<html>
<head>
<title>3 Simple Ways To Reduce Your AWS Bill Today</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">3个简单的方法来减少你的AWS账单</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/3-simple-ways-to-reduce-your-aws-bill-today-3c937225ee5e?source=collection_archive---------28-----------------------#2022-12-19">https://levelup.gitconnected.com/3-simple-ways-to-reduce-your-aws-bill-today-3c937225ee5e?source=collection_archive---------28-----------------------#2022-12-19</a></blockquote><div><div class="fc ij ik il im in"/><div class="io ip iq ir is"><div class=""/><div class=""><h2 id="dc18" class="pw-subtitle-paragraph js iu iv bd b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj dk translated">这些简单的改变可以用于降低任何主要云提供商的成本</h2></div><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi kk"><img src="../Images/089b49b28817431b51f99554ab366b5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VVjQQRMoestadDh9"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">照片由<a class="ae la" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae la" href="https://unsplash.com/@jpvalery?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Jp Valery </a></figcaption></figure><p id="c824" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">你最后一次看你的AWS账单是什么时候？你们中的一些人可能从来没有，直到最近，我也没有。当我这样做时，我被花费的金额震惊了。</p><p id="6d88" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">然而，这并不完全是悲观的。使用一些简单的技术，我成功地减少了我们的AWS账单。通过遵循这篇文章中的建议，我想你也可以降低你的成本。</p><p id="a1d6" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">我将使用AWS作为例子，只是因为我对它最熟悉，但是这些技术应该适用于任何主要的云提供商。</p></div><div class="ab cl lx ly hz lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="io ip iq ir is"><h1 id="64ff" class="me mf iv bd mg mh mi mj mk ml mm mn mo kb mp kc mq ke mr kf ms kh mt ki mu mv bi translated">如何看待自己的AWS账单？</h1><p id="6a97" class="pw-post-body-paragraph lb lc iv ld b le mw jw lg lh mx jz lj lk my lm ln lo mz lq lr ls na lu lv lw io bi translated">在我们开始存钱之前，我们首先需要对前景有个概念。Azure、GCP和AWS都有工具可以让你轻松获得支出明细。在AWS中，我们可以使用<a class="ae la" href="https://aws.amazon.com/aws-cost-management/aws-cost-explorer/" rel="noopener ugc nofollow" target="_blank">成本浏览器</a>。</p><p id="4334" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">它是免费使用的，你只需要登录你的AWS帐户，导航到成本浏览器，并启用它。24小时后，数据将可供您开始分析。</p><p id="9ca9" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">启用后，如果您单击左侧菜单中的成本浏览器，以下是报告外观的示例:</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi nb"><img src="../Images/5efd72df7184b88d2eed342e9c4746f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rj9KY3w_43vXd8YJQEPZsw.jpeg"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">图片来源:AWS</figcaption></figure><p id="6db4" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">默认情况下，它应该显示你在每个AWS服务上花费的明细。如果不是分组，只需从右侧的维度选项中选择“服务”。</p><p id="644a" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">在这个简单的例子中，我们可以看到5月份我们在VPC上花了178.51美元，在EC2上花了70.73美元(两者相加)，在CloudTrail上花了15.21美元。</p><h2 id="362e" class="nc mf iv bd mg nd ne dn mk nf ng dp mo lk nh ni mq lo nj nk ms ls nl nm mu nn bi translated">如何分析你的AWS账单</h2><p id="e2dd" class="pw-post-body-paragraph lb lc iv ld b le mw jw lg lh mx jz lj lk my lm ln lo mz lq lr ls na lu lv lw io bi translated">有了这些信息，我们如何着手决定我们努力省钱的最佳目标呢？</p><p id="c9ba" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">在现实世界中，比如我在分析一家公司的AWS账单时，清单可能会更长，成本也会更高。在大多数情况下，我们都在寻找立竿见影的效果。</p><p id="eeea" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">虽然将一项服务的成本从150美元降低到100美元是好事，但我们是在追求大人物。这就是为什么我会建议你从最高成本的服务到最低成本的服务。根据你使用服务的时间长短，我会选择前10-20个作为重点。</p><p id="91c3" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">首先，我会运用一些简单的常识。看看前10-20名中的每一项服务，并思考其成本是否合理或符合预期。你可以很容易地在网上找到服务的价格。如果没有人跳出来，那完全没问题，但在我的情况下，第一次胜利是发现了一些有点奇怪的东西…让我们来看看。</p></div><div class="ab cl lx ly hz lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="io ip iq ir is"><h1 id="9d06" class="me mf iv bd mg mh mi mj mk ml mm mn mo kb mp kc mq ke mr kf ms kh mt ki mu mv bi translated">删除未使用的高级功能</h1><p id="ac43" class="pw-post-body-paragraph lb lc iv ld b le mw jw lg lh mx jz lj lk my lm ln lo mz lq lr ls na lu lv lw io bi translated">这听起来很简单，对吗？你为什么要为你不需要的高级功能付费呢？</p><p id="cfdd" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">首先，很容易错误配置服务的设置。当它被创建时，也许它被错误地打开了。或者，就像我的情况，它被打开是有原因的，但没有人意识到它有多贵，而且它实际上没有帮助。</p><p id="65fc" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">为了发现这种异常，我注意到我们在AWS Cognito上花费了相当多的钱，我认为这有点奇怪。我们确实使用了Cognito，但使用在线定价，我们的成本明显高于应有水平。</p><p id="9ca2" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">我着手研究这是为什么，我在定价页面上发现，你可以花很高的价格启用可选的高级安全功能。经过尽职调查以确保我们不需要那些高级特性(这确实花了一些时间！)，<strong class="ld iw">关掉那个开关降低了我们95%的认知成本。</strong></p><p id="450b" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">AWS服务有许多选项和功能，所以只需花一些时间将成本与预期进行比较，如果账单中有任何异常值，就深入研究一下。有时你会惊讶于你的发现！</p><p id="f1c9" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">接下来，我们来看看只使用您需要的东西。</p></div><div class="ab cl lx ly hz lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="io ip iq ir is"><h1 id="118b" class="me mf iv bd mg mh mi mj mk ml mm mn mo kb mp kc mq ke mr kf ms kh mt ki mu mv bi translated">根据资源使用情况调整AWS服务</h1><p id="26d6" class="pw-post-body-paragraph lb lc iv ld b le mw jw lg lh mx jz lj lk my lm ln lo mz lq lr ls na lu lv lw io bi translated">许多AWS资源，特别是基于计算的资源，如<a class="ae la" href="https://aws.amazon.com/ec2/" rel="noopener ugc nofollow" target="_blank"> EC2 </a>，以及支持服务，如<a class="ae la" href="https://aws.amazon.com/elasticache/" rel="noopener ugc nofollow" target="_blank">elastic cache</a>和<a class="ae la" href="https://aws.amazon.com/rds/" rel="noopener ugc nofollow" target="_blank"> RDS </a>，允许您选择可用的资源数量。</p><p id="fe5e" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">例如，您可以在创建EC2实例时选择一个实例类型来设置其CPU和内存。根据您选择的实例类型，成本会有所不同。</p><p id="0d58" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">我特别关注的是ElastiCache，但是相同或相似的过程也适用于其他服务。有几个例子，所以我想知道我们是否可以减少我们已经分配的资源，以便节省一些钱。</p><h2 id="dfe7" class="nc mf iv bd mg nd ne dn mk nf ng dp mo lk nh ni mq lo nj nk ms ls nl nm mu nn bi translated">我们如何确定AWS中的资源使用情况？</h2><p id="7f53" class="pw-post-body-paragraph lb lc iv ld b le mw jw lg lh mx jz lj lk my lm ln lo mz lq lr ls na lu lv lw io bi translated">AWS有一个方便的工具叫做<a class="ae la" href="https://aws.amazon.com/cloudwatch/" rel="noopener ugc nofollow" target="_blank"> CloudWatch </a>，它确实需要<a class="ae la" href="https://aws.amazon.com/cloudwatch/getting-started/" rel="noopener ugc nofollow" target="_blank">一点点设置</a>，并且会有一个超出免费层的相关成本。简而言之，它提供了一整套关于所有AWS服务的指标。</p><p id="8c02" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">除了寻找成本优化，它还使您能够监控和警告您的应用程序，所以在我看来是一个必须具备的。否则，您如何知道您的服务在性能和使用方面发生了什么？</p><p id="9104" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">一旦设置好，你可以直接在CloudWatch中查询，它有一个很好的GUI，或者我更喜欢去特定的服务并使用metrics选项卡，比如在ElastiCache上。这两种方法都会产生类似这样的结果:</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi no"><img src="../Images/c0be96a4bd0c55059454fdb5df253eda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_HMH13ApWSu--rPVIiC_Ew.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">图片来源:AWS</figcaption></figure><p id="08dc" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">这显示了一个给定的ElastiCache集群(其中有两个节点)在过去一个月的CPU使用情况。我们可以看到，它几乎不出汗。您还可以看到其他指标，比如内存使用情况，以及特定于服务的指标，比如缓存大小(对于ElastiCache)或IOPS(对于RDS)。</p><p id="b126" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">假设使用率是稳定的，并且远低于max，我们可以对实例应用所谓的<em class="np">合理调整</em>，并减少分配的资源。<strong class="ld iw">通过合理调整所有elastic cache实例，我减少了50%的elastic cache账单。</strong></p><p id="9668" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">如果你把这种技术应用到所有你能调整的服务中，你肯定至少能节省一些。</p><p id="88ab" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">我想看的最后一种方法有点不同:利用AWS的魔力。</p></div><div class="ab cl lx ly hz lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="io ip iq ir is"><h1 id="bd95" class="me mf iv bd mg mh mi mj mk ml mm mn mo kb mp kc mq ke mr kf ms kh mt ki mu mv bi translated">启用成本节约功能</h1><p id="59ad" class="pw-post-body-paragraph lb lc iv ld b le mw jw lg lh mx jz lj lk my lm ln lo mz lq lr ls na lu lv lw io bi translated">你可能认为AWS希望你尽可能多地花钱，你可能是对的。然而，他们确实经常为你提供工具和技巧，在你力所能及的地方省钱。</p><p id="f389" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">我将重点介绍其中一个，但AWS的产品套件中还有很多。我们在AWS的文件存储服务<a class="ae la" href="https://aws.amazon.com/s3/" rel="noopener ugc nofollow" target="_blank"> S3 </a>上花了很多钱。</p><p id="003d" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">我最初是从确定我们是否可以在S3减少存储，或者从S3删除多余数据的角度来考虑这个问题的。事实证明，这是不可能的。</p><p id="0dad" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">不过我并没有被打败，因为在研究S3的时候，我看到了一个你可以启用的功能，叫做<a class="ae la" href="https://aws.amazon.com/s3/storage-classes/intelligent-tiering/" rel="noopener ugc nofollow" target="_blank"> <em class="np">智能分层</em> </a> <em class="np">。</em>本质上，如果您在S3上存储数据，但不经常访问它，您可以随着时间的推移逐渐将其转移到更便宜的存储上。它是这样工作的:</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi nq"><img src="../Images/fe698b5d5959c5c17e71488ba7d7e212.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kDXqbDPYj2gy04cffEN7eQ.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">图片来源:AWS</figcaption></figure><p id="d3bf" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">稍微扩展一下，只需很少的费用(老实说，这是微不足道的)，AWS将监控存储在启用智能分层的存储桶中的所有对象。您可以按照自己认为合适的方式调整规则，但是在30天不被访问后，对象将被移动到更便宜的存储，90天后，它将被移动到非常便宜的存储。更具体地说，30天后，存储成本降低了40%，90天后，降低了68%。</p><p id="653a" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">但是，如果您突然需要访问存储在某个低成本层中的对象，数据的性能和可访问性不会受到影响。自动分层也仅适用于大于128KB的对象，但小于128 kb的对象不会收费，AWS会忽略它们。</p><p id="d054" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">您节省了多少将取决于有多少移动到了每一层，但在我的案例中，一旦智能分层开始实施，S3成本就降低了70%以上。</p></div><div class="ab cl lx ly hz lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="io ip iq ir is"><h1 id="6d3b" class="me mf iv bd mg mh mi mj mk ml mm mn mo kb mp kc mq ke mr kf ms kh mt ki mu mv bi translated">最后一件事…</h1><p id="4de8" class="pw-post-body-paragraph lb lc iv ld b le mw jw lg lh mx jz lj lk my lm ln lo mz lq lr ls na lu lv lw io bi translated">希望这些提示对你有用，你可以用它们来减少你的AWS账单。我想说的另一件事是<a class="ae la" href="https://aws.amazon.com/ec2/pricing/reserved-instances/" rel="noopener ugc nofollow" target="_blank">保留实例</a>，如果你知道你最少需要一定数量的实例，这是一个省钱的好方法。</p><p id="75c6" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">简而言之，您需要在1到3年内注册一定数量的实例，涵盖各种AWS服务(EC2、RDS等)。)作为回报，AWS会给你一个很大的折扣——<strong class="ld iw">高达72% </strong>！</p><p id="4bf9" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">你有没有发现并尝试降低AWS成本的额外技巧？请在评论中告诉我！</p></div><div class="ab cl lx ly hz lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="io ip iq ir is"><blockquote class="nr ns nt"><p id="7d3d" class="lb lc np ld b le lf jw lg lh li jz lj nu ll lm ln nv lp lq lr nw lt lu lv lw io bi translated"><strong class="ld iw">我的书</strong> <a class="ae la" href="https://www.amazon.com/dp/1680509837?maas=maas_adg_265A9C302E256D26C2E10C30DA1AA728_afap_abs&amp;ref_=aa_maas&amp;tag=maas" rel="noopener ugc nofollow" target="_blank"> <strong class="ld iw">用现代图表技术创作软件</strong> </a> <strong class="ld iw">，现在已经出版了！</strong></p><p id="0b55" class="lb lc np ld b le lf jw lg lh li jz lj nu ll lm ln nv lp lq lr nw lt lu lv lw io bi translated">您可以学习创建图表来比文字更直接、更清晰地交流信息，同时使用它来构建更好的软件。仅使用基于文本的标记，由Mermaid提供支持，创建有意义和有吸引力的图表来记录您的领域，可视化用户流，揭示任何所需级别的系统架构，等等！</p></blockquote></div></div>    
</body>
</html>