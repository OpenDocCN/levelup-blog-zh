<html>
<head>
<title>Launch Your ML App in 4 Easy Steps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过4个简单的步骤启动您的ML应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/launch-your-ml-app-in-4-easy-steps-861b2b2f2179?source=collection_archive---------8-----------------------#2021-04-14">https://levelup.gitconnected.com/launch-your-ml-app-in-4-easy-steps-861b2b2f2179?source=collection_archive---------8-----------------------#2021-04-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b3d3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">从模型培训到AWS中的部署</h2></div><p id="f1fb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">机器学习和数据科学家从业者经常在Jupyter笔记本上进行项目和实验。这是一个允许他们快速迭代和轻松创建可视化的过程。然而，它不像在云中部署模型那样具有影响力、可伸缩性和易于向全世界发布。很多时候，一个好的分销网络甚至比产品本身的质量更重要。</p><p id="6fb6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本教程旨在介绍如何建立一个机器学习项目，并将其与MLOps实践相结合，例如创建一个Docker容器并将其部署在Amazon Web Services (AWS)中。它适合初学者作为一种学习练习，也适合希望充分利用任何项目的经验丰富的从业者。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/c1c2d95f1a49fea8edbddd16271d846c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kIqHsMFy_aYHBdLMBz319Q.jpeg"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">如果没人看得见，你的产品再好也没用——照片由<a class="ae lr" href="https://unsplash.com/s/photos/blind?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae lr" href="https://unsplash.com/@joshcala?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">乔希·卡拉布雷斯</a>拍摄</figcaption></figure><p id="cd84" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的主要目标将是创建一个机器学习应用程序，能够对不同的音频声音进行分类，并将其部署在云中。在本教程中，我们将进行数据探索和分析，随后是机器学习模型的训练和评估，我们将使用<a class="ae lr" href="https://flask.palletsprojects.com/en/1.1.x/" rel="noopener ugc nofollow" target="_blank"> Flask </a>创建我们的应用程序，最后我们将使用<a class="ae lr" href="https://aws.amazon.com/elasticbeanstalk/" rel="noopener ugc nofollow" target="_blank">亚马逊弹性豆茎</a>和<a class="ae lr" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>免费将其部署在云上。</p><h2 id="9347" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">介绍</h2><p id="3525" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">在这个<a class="ae lr" href="https://github.com/jsalbert/sound_classification_ml_production/" rel="noopener ugc nofollow" target="_blank">仓库</a>中，您将找到运行本教程所需的所有python代码。它包含:</p><ol class=""><li id="7acc" class="mq mr iq kh b ki kj kl km ko ms ks mt kw mu la mv mw mx my bi translated"><a class="ae lr" href="https://colab.research.google.com/github/jsalbert/sound_classification_ml_production/blob/main/notebooks/UrbanSound8k_data_exploration.ipynb" rel="noopener ugc nofollow" target="_blank">用于进行数据探索和分析的Colab笔记本电脑</a></li><li id="adcb" class="mq mr iq kh b ki mz kl na ko nb ks nc kw nd la mv mw mx my bi translated"><a class="ae lr" href="https://colab.research.google.com/github/jsalbert/sound_classification_ml_production/blob/main/notebooks/UrbanSound8k_machine_learning.ipynb" rel="noopener ugc nofollow" target="_blank">用于执行机器学习模型的训练和评估的Colab笔记本</a></li><li id="56c9" class="mq mr iq kh b ki mz kl na ko nb ks nc kw nd la mv mw mx my bi translated"><a class="ae lr" href="https://github.com/jsalbert/sound_classification_ml_production#creating-the-flask-app" rel="noopener ugc nofollow" target="_blank">创建自己的烧瓶应用程序的说明</a></li><li id="3bb1" class="mq mr iq kh b ki mz kl na ko nb ks nc kw nd la mv mw mx my bi translated"><a class="ae lr" href="https://github.com/jsalbert/sound_classification_ml_production#creating-a-docker-image-and-uploading-to-aws-elastic-beanstalk" rel="noopener ugc nofollow" target="_blank">创建Docker映像并将其上传到AWS Beanstalk以与世界分享您的应用程序的说明</a></li></ol><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ne"><img src="../Images/d34d75e7ebee83c8c90526ce086adec9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gBPbTQ7U_PtjasfANAbx3w.jpeg"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">部署你的声音分类器——照片由<a class="ae lr" href="https://unsplash.com/@jesmanfabio?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">杰斯曼·法比奥</a>在<a class="ae lr" href="https://unsplash.com/s/photos/sounds?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="e3de" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我建议在阅读的同时运行Colab笔记本，因为(为了简洁)有些步骤没有在文章中显示。</p><h2 id="15a9" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">1.数据探索</h2><p id="6c09" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">我们将使用众所周知的<a class="ae lr" href="https://urbansounddataset.weebly.com/urbansound8k.html#10foldCV" rel="noopener ugc nofollow" target="_blank"> UrbanSound8k数据集</a>，其中包含以下10种声音:空调声、汽车喇叭声、儿童玩耍声、狗吠声、钻孔声、发动机空转声、枪击声、手提钻声、警笛声和街头音乐。在本节中，我们将执行一组数据分析步骤，以观察和查看给定数据中的模式，并相应地选择最佳建模。</p></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><p id="ce17" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以在笔记本上看到，数据以不同的方式被记录和数字化:</p><ul class=""><li id="f237" class="mq mr iq kh b ki kj kl km ko ms ks mt kw mu la nm mw mx my bi translated">在几乎所有的样本(立体声)中，它大多是使用2个声道录制的。</li><li id="f021" class="mq mr iq kh b ki mz kl na ko nb ks nc kw nd la nm mw mx my bi translated">采样速率从8kHz到192kHz(主要是44kHz、48Khz)。</li><li id="fb68" class="mq mr iq kh b ki mz kl na ko nb ks nc kw nd la nm mw mx my bi translated">音频的长度从0.0008s到4s(大部分是4s)。</li><li id="2de3" class="mq mr iq kh b ki mz kl na ko nb ks nc kw nd la nm mw mx my bi translated">使用的每个样本的比特从4到32(大部分是24比特)。</li></ul><p id="ce18" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于这种可变性，数据将需要在被馈送到机器学习模型之前被标准化。我们将使用<a class="ae lr" href="https://librosa.org/doc/latest/index.html" rel="noopener ugc nofollow" target="_blank"> Librosa </a>库来加载、标准化、绘制和执行音频处理。</p><p id="a1cf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以在下图中观察到不同的信号波形(振幅与时间的关系)。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nn"><img src="../Images/3d5737cf6855af14889f50e3b7092843.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MLp8SCO1Ir5KeVd6IH8w4g.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">每个数据集类的随机样本的音频波形</figcaption></figure><p id="72f8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">短期傅立叶变换(STFT)、梅尔频谱和梅尔频率倒谱系数(MFCCs)都是处理音频信号并生成可用作机器学习算法输入的区别特征的流行方法。对于音频信号处理的回顾，我真的推荐观看Valerio Velardo制作的一个很棒的youtube视频系列<a class="ae lr" href="https://www.youtube.com/watch?v=-Yxj3yfvY-4&amp;list=PL-wATfeyAMNqIee7cH3q1bh4QJFAaeNv0&amp;index=15&amp;ab_channel=ValerioVelardo-TheSoundofAI" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="e4c2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将可视化Mel谱图，它是不同时间步长的不同频率幅度的表示。考虑到人类如何感知和处理音频信号，频率幅度被转换为Mel尺度。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi no"><img src="../Images/1e3e6ed0a80e7eb937449a7f5305411a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YJO434sww9jXiPjCJUHYvA.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">先前音频样本的Mel频谱图</figcaption></figure><p id="8fe5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在查看一些不同排列的图表后，我们可以观察到数据集类的信号差异足以被机器学习算法正确分类。</p><h2 id="dd06" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">2.机器学习</h2><p id="3382" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">在项目的这一部分，我们将训练一个机器学习模型，能够在我们的数据集的10种声音之间进行分类。根据数据探索，并在阅读了有关音频信号分类的最新技术后，我做出了以下设计选择:</p><ul class=""><li id="30f3" class="mq mr iq kh b ki kj kl km ko ms ks mt kw mu la nm mw mx my bi translated">我们将训练一个卷积神经网络(CNN ),并使用MFCCs、STFT或Mel-Spectrogram作为输入特征。</li><li id="303d" class="mq mr iq kh b ki mz kl na ko nb ks nc kw nd la nm mw mx my bi translated">由于音频持续时间范围从0到4秒，我们将填充生成的声谱图，以使所有音频的长度相等。</li></ul><p id="bf8f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我的第一选择是使用STFT特征，因为理论上CNN可以更好地利用频率-时间结构，并从原始信号而不是人类设计的表示中学习滤波器。然而，由于计算资源和使事情变得更快，我们将使用MFCCs作为特性，因为它们的内存效率更高。</p><p id="bbeb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了将MFCCs计算为特征，通常要:</p><ul class=""><li id="837e" class="mq mr iq kh b ki kj kl km ko ms ks mt kw mu la nm mw mx my bi translated">计算前13个MFCCs、它们的导数和二阶导数。</li><li id="88d4" class="mq mr iq kh b ki mz kl na ko nb ks nc kw nd la nm mw mx my bi translated">使用前40个MFCC(libro sa默认)。</li></ul><p id="77cb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的机器学习模型将是一个完全卷积的网络(FCN)。由于我们的图像在形状上是矩形的(y轴是MFCC，x轴是时间)，我们将使它们成为矩形，而不是使用方形滤波器(通常)，这样它们可以更好地学习MFCC与时间维度的相关性。</p><p id="19a3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的模型定义如下所示:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="24e2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们正面临一个经典的多分类问题，所以我们将使用分类交叉熵损失函数。此外，作为优化器，我们将使用带有默认超参数值的Adam的Keras实现。</p><p id="6332" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">笔记本包含所有的培训和评估代码。您应该能够尝试不同的超参数和网络配置。一旦你训练了一个模型，你就可以看到结果，并把它们绘制在一个混淆矩阵中。这样你就可以比较不同型号的性能。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nr"><img src="../Images/7343ff6a892e3032647ae2b0535663d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8eafhll5yARPHoDWb0BPzg.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">显示我们模型预测的混淆矩阵</figcaption></figure><h2 id="9708" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">3.创建烧瓶应用程序</h2><p id="f27b" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">一旦我们对我们训练的模型感到满意，我们将创建一个小应用程序，并将其部署在云中。我们将使用<a class="ae lr" href="https://flask.palletsprojects.com/en/1.1.x/" rel="noopener ugc nofollow" target="_blank"> Flask </a>来构建我们的应用程序。</p><blockquote class="ns nt nu"><p id="6479" class="kf kg nv kh b ki kj jr kk kl km ju kn nw kp kq kr nx kt ku kv ny kx ky kz la ij bi translated"><em class="iq"> Flask是一个轻量级的WSGI web应用框架。它旨在快速轻松地开始使用，并能够扩展到复杂的应用程序。它最初是一个围绕Werkzeug和Jinja的简单包装器，现在已经成为最流行的Python web应用程序框架之一。</em></p></blockquote><p id="4df8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我将提供包含运行它所需的所有代码的<code class="fe nz oa ob oc b">app.py</code>文件。您将需要Python安装和pip来运行下面的代码。</p><ol class=""><li id="d83d" class="mq mr iq kh b ki kj kl km ko ms ks mt kw mu la mv mw mx my bi translated">克隆此存储库:</li></ol><pre class="lc ld le lf gt od oc oe of aw og bi"><span id="23ef" class="ls lt iq oc b gy oh oi l oj ok">git clone git@github.com:jsalbert/sound_classification_ml_production.git</span></pre><p id="1dae" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2.使用<a class="ae lr" href="https://virtualenv.pypa.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> virtualenv </a>创建虚拟环境并安装库要求:</p><pre class="lc ld le lf gt od oc oe of aw og bi"><span id="464f" class="ls lt iq oc b gy oh oi l oj ok">pip install virtualenv<br/>virtualenv .venv<br/>source .venv/bin/activate<br/>pip install -r requirements.txt</span></pre><p id="4615" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">3.转到文件夹<code class="fe nz oa ob oc b">flask_app</code>并在您的电脑上本地运行应用程序:</p><pre class="lc ld le lf gt od oc oe of aw og bi"><span id="1215" class="ls lt iq oc b gy oh oi l oj ok">python app.py</span></pre><p id="da2a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">4.通过<a class="ae lr" href="http://localhost:5000/" rel="noopener ugc nofollow" target="_blank"> localhost:5000 </a>访问</p><p id="8099" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您应该能够看到这个屏幕:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ol"><img src="../Images/ef22c243daa0fc20c48f6e9dc6c42b47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*14cM1UyLI0GCZVWEQEPENA.png"/></div></div></figure><p id="676f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此时，您应该能够在您的计算机上本地运行该应用程序。</p><h1 id="ef00" class="om lt iq bd lu on oo op lx oq or os ma jw ot jx md jz ou ka mg kc ov kd mj ow bi translated">4.创建Docker图像并上传到AWS Elastic Beanstalk</h1><p id="09db" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">最后…让我们使用Docker和AWS Elastic Beanstalk在云中部署我们的应用程序！</p><p id="cedc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于教程的这一部分，您需要安装<a class="ae lr" href="https://www.docker.com/get-started" rel="noopener ugc nofollow" target="_blank"> Docker </a>并在<a class="ae lr" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank">亚马逊网络服务(AWS) </a>和<a class="ae lr" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker Hub </a>中创建一个帐户。我推荐阅读和浏览<a class="ae lr" href="https://docker-curriculum.com/" rel="noopener ugc nofollow" target="_blank">Docker-课程表</a>以获得对Docker更广泛的介绍。</p><p id="8b6b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Docker是什么，有什么好处？</p><blockquote class="ns nt nu"><p id="b9a6" class="kf kg nv kh b ki kj jr kk kl km ju kn nw kp kq kr nx kt ku kv ny kx ky kz la ij bi translated">Docker是一个允许开发者、系统管理员等使用的工具。轻松地将他们的应用程序部署在沙箱(称为容器)中，以便在主机操作系统(即Linux)上运行。Docker的主要好处是，它允许用户将一个应用程序及其所有依赖项打包成一个标准化的软件开发单元。与虚拟机不同，容器没有很高的开销，因此能够更有效地利用底层系统和资源。</p><p id="2d7c" class="kf kg nv kh b ki kj jr kk kl km ju kn nw kp kq kr nx kt ku kv ny kx ky kz la ij bi translated"><em class="iq">容器提供了一种逻辑打包机制，其中应用程序可以从它们实际运行的环境中抽象出来。这种分离使得基于容器的应用程序可以轻松、一致地部署，无论目标环境是私有数据中心、公共云，甚至是开发人员的个人笔记本电脑。</em></p></blockquote><p id="e0fc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将使用Docker为我们的应用程序创建一个容器。我将提供必要的<code class="fe nz oa ob oc b">Dockerfile</code>和<code class="fe nz oa ob oc b">Dockerrun.aws.json</code>文件，以便能够在本地运行您的应用程序，并将其部署在AWS中。</p><p id="6376" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，您应该通过运行以下命令来验证Docker是否正确安装:</p><pre class="lc ld le lf gt od oc oe of aw og bi"><span id="e3d6" class="ls lt iq oc b gy oh oi l oj ok">docker run hello-world</span></pre><p id="0992" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您应该会看到:</p><pre class="lc ld le lf gt od oc oe of aw og bi"><span id="2348" class="ls lt iq oc b gy oh oi l oj ok">Hello from Docker.<br/>This message shows that your installation appears to be working correctly.</span></pre><p id="eddf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">之后，我们将通过一个<a class="ae lr" href="https://docs.docker.com/engine/reference/builder/" rel="noopener ugc nofollow" target="_blank">Docker文件</a>建立我们自己的Docker形象。</p><blockquote class="ns nt nu"><p id="1d1c" class="kf kg nv kh b ki kj jr kk kl km ju kn nw kp kq kr nx kt ku kv ny kx ky kz la ij bi translated">Dockerfile是一个文本文档，它包含用户可以在命令行上调用的所有命令来组合一个图像。使用docker build，用户可以创建一个连续执行几个命令行指令的自动化构建。</p></blockquote><p id="1197" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您应该位于docker文件所在的目录中，并运行:</p><pre class="lc ld le lf gt od oc oe of aw og bi"><span id="f799" class="ls lt iq oc b gy oh oi l oj ok">docker build -t yourusername/sound_classification .</span></pre><p id="f090" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当您运行时，您应该能够在列表中看到您的图像:</p><pre class="lc ld le lf gt od oc oe of aw og bi"><span id="8898" class="ls lt iq oc b gy oh oi l oj ok">docker images</span></pre><p id="ad1b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您应该能够在本地运行应用程序:</p><pre class="lc ld le lf gt od oc oe of aw og bi"><span id="8371" class="ls lt iq oc b gy oh oi l oj ok">docker run -p 8888:5000 yourusername/sound_classification</span></pre><p id="95b7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了部署我们的图像，我们将在AWS可以访问的注册表上发布它，在我们的例子中是Docker Hub。如果这是您第一次推送图像，客户端会要求您登录。提供用于登录Docker Hub的相同凭据。</p><pre class="lc ld le lf gt od oc oe of aw og bi"><span id="dc4d" class="ls lt iq oc b gy oh oi l oj ok">docker login</span></pre><p id="6230" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">之后，您可以通过运行以下命令将您的映像推送到注册表:</p><pre class="lc ld le lf gt od oc oe of aw og bi"><span id="99fd" class="ls lt iq oc b gy oh oi l oj ok">docker push yourusername/sound_classification</span></pre><p id="3434" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">完成后，您应该可以在Docker Hub上查看您的图像。现在你的图片已经在线了，任何安装了docker的人都可以通过输入一个简单的命令来访问和使用你的应用。</p><pre class="lc ld le lf gt od oc oe of aw og bi"><span id="483f" class="ls lt iq oc b gy oh oi l oj ok">docker run -p 8888:5000 yourusername/sound_classification</span></pre></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><p id="9dba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们将看到如何在AWS Elastic Beanstalk上进行部署。</p><blockquote class="ns nt nu"><p id="9b8c" class="kf kg nv kh b ki kj jr kk kl km ju kn nw kp kq kr nx kt ku kv ny kx ky kz la ij bi translated"><em class="iq"> AWS Elastic Beanstalk是一种易于使用的服务，用于部署和扩展使用Java开发的web应用程序和服务。NET、PHP、Node.js、Python、Ruby、Go、Docker在Apache、Nginx、Passenger、IIS等熟悉的服务器上。您只需上传您的代码，Elastic Beanstalk就会自动处理部署，从容量供应、负载平衡、自动扩展到应用健康监控。同时，您保留了对驱动应用程序的AWS资源的完全控制，并且可以随时访问底层资源。</em></p></blockquote><p id="d7dd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您需要修改<code class="fe nz oa ob oc b">Dockerrun.aws.json</code>文件，用您的用户名替换用户名。如果你离开我的，它也应该工作，因为我主持一个公众形象。</p><p id="4d1c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">遵循以下步骤:</p><ol class=""><li id="af04" class="mq mr iq kh b ki kj kl km ko ms ks mt kw mu la mv mw mx my bi translated">登录您的AWS控制台。</li><li id="7c4d" class="mq mr iq kh b ki mz kl na ko nb ks nc kw nd la mv mw mx my bi translated">在搜索栏或菜单上搜索<em class="nv">弹性豆茎</em>并点击。</li><li id="4293" class="mq mr iq kh b ki mz kl na ko nb ks nc kw nd la mv mw mx my bi translated">选择<em class="nv">创建新环境</em>。</li><li id="d37b" class="mq mr iq kh b ki mz kl na ko nb ks nc kw nd la mv mw mx my bi translated">在应用程序名称上为您的应用程序引入一个名称。</li><li id="eabf" class="mq mr iq kh b ki mz kl na ko nb ks nc kw nd la mv mw mx my bi translated">选择Docker作为平台。做出更改后，选择<em class="nv">上传您的代码</em>并上传<code class="fe nz oa ob oc b">Dockerrun.aws.json</code>文件。</li></ol><p id="76f2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">环境创建将需要几分钟时间，之后您应该能够访问托管您的应用程序的网站。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ox"><img src="../Images/3e2a1cb4b312961437da57c644b5a2c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UnPPZYRXwDssenTxb0-6vw.png"/></div></div></figure><p id="aa49" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您点击该链接，您将被定向到部署该应用程序的网站。您可以播放自己的音频或<a class="ae lr" href="https://github.com/jsalbert/sound_classification_ml_production/tree/main/audio_files" rel="noopener ugc nofollow" target="_blank">示例音频</a>。</p><p id="9140" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有…不要忘记在完成时关闭AWS中的环境，以免因额外使用资源而被收费！</p><p id="5609" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于任何反馈、评论、打字错误或错误更正，请在<a class="ae lr" href="https://github.com/jsalbert/sound_classification_ml_production/issues" rel="noopener ugc nofollow" target="_blank">问题部分</a>告诉我。</p><p id="f227" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">希望你喜欢这个教程，感谢阅读。</p></div></div>    
</body>
</html>