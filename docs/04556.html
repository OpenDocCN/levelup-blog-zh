<html>
<head>
<title>Useful JavaScript Tips — Objects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有用的JavaScript技巧—对象</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/useful-javascript-tips-objects-aa8dd5960309?source=collection_archive---------17-----------------------#2020-07-01">https://levelup.gitconnected.com/useful-javascript-tips-objects-aa8dd5960309?source=collection_archive---------17-----------------------#2020-07-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/dedc775c730967d156fd74cdbd76033e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*whlQzw5iKQd9WiTR"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@ignaciobrosa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Ignacio Brosa </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="fe5d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">像任何类型的应用程序一样，JavaScript应用程序也必须写得很好。否则，我们以后会遇到各种各样的问题。</p><p id="96a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将了解一些应该遵循的技巧，以便更快更好地编写JavaScript代码。</p><h1 id="e286" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">挑选和拒绝对象属性</h1><p id="3396" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">Object.keys</code>方法来获取密钥并选择我们想要的密钥。</p><p id="1299" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="3076" class="mt lf it mk b gy mu mv l mw mx">const reject = (obj, keys) =&gt; {<br/>  return Object.keys(obj)<br/>    .filter(k =&gt; !keys.includes(k))<br/>    .map(k =&gt; Object.assign({}, {[k]: obj[k]}))<br/>    .reduce((res, o) =&gt; Object.assign(res, o), {});<br/>}</span></pre><p id="4489" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们调用了<code class="fe mh mi mj mk b">Object.keys</code>来获取密钥。</p><p id="2545" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们调用<code class="fe mh mi mj mk b">map</code>将对象键映射到他们自己的对象，以键的属性值作为值。</p><p id="d268" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们使用<code class="fe mh mi mj mk b">reduce</code>将来自<code class="fe mh mi mj mk b">map</code>的对象数组合并成一个带有<code class="fe mh mi mj mk b">reduce</code>的对象。</p><p id="8fa2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以这样称呼它:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="c76e" class="mt lf it mk b gy mu mv l mw mx">const obj = {<br/>  foo: 1,<br/>  bar: 2,<br/>  bar: 3<br/>}<br/>const newOb = reject(obj, ['foo', 'bar']);</span></pre><h1 id="9779" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用Object.is进行对象比较</h1><p id="6763" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">Object.is</code>方法进行比较。<code class="fe mh mi mj mk b">===</code>和<code class="fe mh mi mj mk b">Object.is</code>的区别在于<code class="fe mh mi mj mk b">NaN</code>等于自身。</p><p id="722a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="00d5" class="mt lf it mk b gy mu mv l mw mx">Object.is(NaN, NaN);</span></pre><p id="663f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它会返回<code class="fe mh mi mj mk b">true</code>。</p><h1 id="6157" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">创建记录值的函数</h1><p id="5f89" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以创建一个记录值并返回它的函数，这样我们就可以在调试时同时完成这两项工作。</p><p id="a599" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="43c2" class="mt lf it mk b gy mu mv l mw mx">const tap = (x) =&gt; {<br/>  console.log(x);<br/>  return x;<br/>}</span></pre><p id="ae18" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们记录<code class="fe mh mi mj mk b">x</code>并用函数返回。</p><p id="d2aa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这对于以下情况很方便:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="c15a" class="mt lf it mk b gy mu mv l mw mx">.filter(c =&gt; tap(c.numItems &gt; 100))</span></pre><p id="fd80" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以记录快递的值，同时返回它。</p><h1 id="7f53" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">数组技巧</h1><p id="62cf" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用数组做一些我们可能还没有想到的事情。</p><h1 id="11e5" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">遍历空数组</h1><p id="9810" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用数组构造函数创建一个空槽数组。</p><p id="5e1d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为此，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="c0a4" class="mt lf it mk b gy mu mv l mw mx">const arr = new Array(10);</span></pre><p id="950c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将一个数字作为唯一的参数传入，使构造函数返回具有给定数量的空槽的数组。</p><p id="7b02" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为我们传入了10个，所以我们得到了一个有10个空槽的数组。</p><h1 id="e86a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">填充空数组</h1><p id="aa09" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">fill</code>来填充空数组。</p><p id="66b5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="914d" class="mt lf it mk b gy mu mv l mw mx">const arr = new Array(10);<br/>const nums = arr.fill().map((_, i) =&gt; i)</span></pre><p id="8d01" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建一个从0到9的数组。</p><p id="77b2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们调用<code class="fe mh mi mj mk b">fill</code>来用<code class="fe mh mi mj mk b">undefined</code>填充空槽。然后我们可以用回调来调用<code class="fe mh mi mj mk b">map</code>返回数组索引，用数字填充它。</p><h1 id="d681" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将空参数传递给方法</h1><p id="6536" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以传入<code class="fe mh mi mj mk b">null</code>或<code class="fe mh mi mj mk b">undefined</code>来跳过参数。</p><p id="4a81" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="fcfc" class="mt lf it mk b gy mu mv l mw mx">foo('a', null, 'b')</span></pre><p id="12ae" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="6ee0" class="mt lf it mk b gy mu mv l mw mx">foo('a', undefined, 'b')</span></pre><p id="5beb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是我们也可以使用spread运算符，并写出:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="fb1d" class="mt lf it mk b gy mu mv l mw mx">foo(...['a', , 'b']);</span></pre><p id="12d0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以跳过数组中的一个条目。</p><p id="4d61" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们将条目作为参数传播时，它会变成<code class="fe mh mi mj mk b">undefined</code>,所以我们像前面的例子一样做同样的事情。</p><h1 id="0c45" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">唯一数组值</h1><p id="f3d5" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过将一个数组转换成一个集合，然后用spread操作符将它转换回一个数组，来删除数组中的重复项。</p><p id="f992" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="7635" class="mt lf it mk b gy mu mv l mw mx">const arr = [...new Set([1, 2, 3, 3])];</span></pre><p id="8aad" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们得到:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="9021" class="mt lf it mk b gy mu mv l mw mx">[1, 2, 3]</span></pre><p id="b427" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作为<code class="fe mh mi mj mk b">arr</code>的值。</p><h1 id="e6d3" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将对象绑定到函数</h1><p id="24b4" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">bind</code>返回一个我们想要的值为<code class="fe mh mi mj mk b">this</code>的函数。</p><p id="ff4e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="7123" class="mt lf it mk b gy mu mv l mw mx">const getName = function () {<br/> console.log(this.name);<br/>};</span></pre><p id="22aa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么如果我们写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="2373" class="mt lf it mk b gy mu mv l mw mx">const getJoe = getName.bind({ name: 'joe' });</span></pre><p id="94b2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么<code class="fe mh mi mj mk b">this.name</code>将是<code class="fe mh mi mj mk b">getJoe</code>中的<code class="fe mh mi mj mk b">'joe'</code>，因为<code class="fe mh mi mj mk b">bind</code>返回一个函数，其值为第一个参数中给出的<code class="fe mh mi mj mk b">this</code>。</p><p id="c90e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="43a4" class="mt lf it mk b gy mu mv l mw mx">const getJane = getName.bind({ name: 'jane' });</span></pre><p id="b22f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么<code class="fe mh mi mj mk b">this.name</code>就是<code class="fe mh mi mj mk b">'jane'</code>。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/3fde074bf93cdc46ad3bfbf8947e0685.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OLYzQsbKJGOOqk1H"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@dhillssr?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">德韦恩·希尔斯</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><h1 id="1f52" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="f600" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用<code class="fe mh mi mj mk b">Array</code>构造函数创建带有空槽的数组。</p><p id="a5a7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们可以使用<code class="fe mh mi mj mk b">fill</code>方法来填充条目。</p><p id="a41a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">Object.keys</code>和<code class="fe mh mi mj mk b">Object.assign</code>返回一个没有某些属性的新对象。</p><p id="da63" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我们可以使用<code class="fe mh mi mj mk b">Object.is</code>来比较包括<code class="fe mh mi mj mk b">NaN</code>在内的值。所以比<code class="fe mh mi mj mk b">===</code>稍微有用一点。</p></div></div>    
</body>
</html>