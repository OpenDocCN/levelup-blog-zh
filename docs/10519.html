<html>
<head>
<title>Easily Toggle Philips Hue Depending on Your PC State v2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">根据您的电脑状态v2轻松切换飞利浦色调</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/easily-toggle-philips-hue-depending-on-your-pc-state-v2-91249151c325?source=collection_archive---------6-----------------------#2021-12-17">https://levelup.gitconnected.com/easily-toggle-philips-hue-depending-on-your-pc-state-v2-91249151c325?source=collection_archive---------6-----------------------#2021-12-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a3d2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用智能手机或平板电脑应用程序并不是控制智能照明的唯一方式。您也可以从您的PC、笔记本电脑或平板电脑上完成这项工作。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b17ba2836d6e2c92450567cd024d6414.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*deu652G-UxKHYBf6LS5zaw.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由@iamkendall点亮<a class="ae ky" href="https://unsplash.com/@iamkendall" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="0694" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能会问为什么是v2？很久以前，我为Hue API的第一个版本写了一篇关于<a class="ae ky" href="https://morehue.com/easily-toggle-philips-hue-depending-on-your-pc-state/" rel="noopener ugc nofollow" target="_blank">如何根据你的PC状态</a>切换飞利浦Hue的指南。从那时起，signification决定清理他们的API并创建一个改进的版本。改进后的版本包括<strong class="lb iu">更好的安全性</strong>并且整体更清晰<strong class="lb iu"/>。但对我来说，这也意味着我必须更新我的剧本，而我为什么不<strong class="lb iu">改进我自己的剧本</strong>？因此，让我们开始根据您的电脑状态切换飞利浦色调。</p><p id="93f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我之前的故事中，我解释了用<strong class="lb iu"> PowerShell </strong>和<strong class="lb iu"> Windows任务调度器</strong>编程Hue Lights的基础。在这个故事中，我将再次解释色相灯编程的基础，但这次是用<strong class="lb iu"> cURL </strong>并使它在每个操作系统上都能运行。我将使用两个<a class="ae ky" href="https://amzn.to/3lN3kiB" rel="noopener ugc nofollow" target="_blank">飞利浦色调播放条</a>用于本教程。</p><p id="4397" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">重要！</strong>在遵循本指南之前，请检查您的网桥是否至少是1948086000版本。</p><blockquote class="lv"><p id="fbdb" class="lw lx it bd ly lz ma mb mc md me lu dk translated">自动化很容易，你只需要知道要采取哪些步骤。</p></blockquote><p id="abe3" class="pw-post-body-paragraph kz la it lb b lc mg ju le lf mh jx lh li mi lk ll lm mj lo lp lq mk ls lt lu im bi translated"><em class="ml">原载于2021年12月17日</em><a class="ae ky" href="https://morehue.com/easily-toggle-philips-hue-depending-on-your-pc-state-v2/" rel="noopener ugc nofollow" target="_blank"><em class="ml">https://morehue.com</em></a><em class="ml">。</em></p><h1 id="dc12" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">阶段</h1><ol class=""><li id="9148" class="ne nf it lb b lc ng lf nh li ni lm nj lq nk lu nl nm nn no bi translated">找到你的网桥<strong class="lb iu"> ID和</strong>IP地址</li><li id="d37f" class="ne nf it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">获得一个经过<strong class="lb iu">认证的</strong>用户名</li><li id="7d33" class="ne nf it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">找到<strong class="lb iu">灯使</strong>自动化</li><li id="8b8d" class="ne nf it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">创建一个<strong class="lb iu"> CA证书</strong></li><li id="fd8c" class="ne nf it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">创建你想要的<strong class="lb iu">脚本</strong></li><li id="26a2" class="ne nf it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">定义<strong class="lb iu">任务</strong></li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><h1 id="ec95" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">1.找到您的网桥ID和IP地址</h1><p id="50da" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">幸运的是，Hue系统附带了一个API，可以通过<strong class="lb iu">网络请求</strong>轻松控制。但是在我们用飞利浦Hue灯做任何事情之前，我们首先需要找到网桥的<strong class="lb iu"> ID和IP地址</strong>。在以前的版本中，只需要IP地址，但是对于Hue API的v2，我们需要一个需要ID的<strong class="lb iu">安全连接。桥将接收我们所有的网络请求。很好看的教程可以在<a class="ae ky" href="https://developers.meethue.com/develop/get-started-2/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。但是因为我们现在只需要我们的网桥的ID和IP，所以我们也可以访问这个链接:<a class="ae ky" href="https://discovery.meethue.com/" rel="noopener ugc nofollow" target="_blank">https://discovery.meethue.com/</a>。</strong></p><p id="5455" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该链接将显示一个小的JSON响应，其中包含网桥的内部IP地址。响应看起来有点像这样:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="453d" class="oe mn it oa b gy of og l oh oi">[<br/>  {<br/>    "id": "ecbdsa5afffe1303cf",<br/>    "internalipaddress": "192.168.1.41"<br/>  }<br/>]</span></pre><p id="1c8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">保存此响应，因为我们将在其他步骤中需要它。</p><h1 id="6cbf" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">2.获取经过验证的用户名</h1><p id="5d60" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">与当今任何其他受保护的系统一样，Hue系统要求用户验证他或她的身份。为了得到这个，我们需要打几个电话。最简单的方法是使用<a class="ae ky" href="https://www.postman.com/downloads/" rel="noopener ugc nofollow" target="_blank">邮递员</a>。</p><p id="ab1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们需要发送一个认证请求来认证我们自己。用下面的消息体<code class="fe oj ok ol oa b">{ "devicetype" : "My_amazing_computer" }</code>向URL <code class="fe oj ok ol oa b">https://&lt;bridge_ip_address&gt;/api</code>发送post请求。然后，您将看到以下消息:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="f6cd" class="oe mn it oa b gy of og l oh oi">[<br/> {<br/>  "error": {<br/>   "type": 101,<br/>   "address": "",<br/>   "description": "link button not pressed"<br/>  }<br/> }<br/>]</span></pre><p id="c1f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在去按你的桥上的链接按钮，然后再按POST按钮。您现在应该会得到如下所示的成功响应:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="2521" class="oe mn it oa b gy of og l oh oi">[ <br/>  { "success": <br/>    { <br/>      "username": "j5hvYCkJPN8a87daQ6a0mmxBcG6ozeLp3zXU5lgc",                 <br/>      "clientkey": "ZV17AVUNUB95G2UXW64TEXDZD" <br/>    } <br/>  } <br/>]</span></pre><p id="9d2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就对了。您现在有了经过验证的用户名。把这个也写下来，我们将在下一阶段用到它。</p><h1 id="da6d" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">3.找到要自动化的灯</h1><p id="68e5" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">如介绍中所述，significance对其安全性进行了相当大的升级。一部分是API <strong class="lb iu">的v2只允许通过HTTPS </strong>调用。稍后，我们将使用此证书，但在与Postman的测试阶段，您需要禁用“文件-设置”菜单中的“SSL证书验证”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/ca5f3342987f2f6cae6e65bf6d030ce2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fAJZIuZb6u6BOPKj.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">禁用SSL验证</figcaption></figure><p id="25cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们需要做的就是创建一个请求，以我们的用户名作为头获取所有的灯，并找到我们想要使用的灯。在postman中调用下面的URL并添加这个头:“hue-application-key:j 5 hvyckjpn 8 a 87 DAQ 6a 0 MMX BCG 6 ozelp 3 zxu 5 lgc”</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="bf6e" class="oe mn it oa b gy of og l oh oi">https://&lt;bridge_ip_address&gt;/clip/v2/resource/light</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/7e967ff7412008dcdcd9241fc1dce5d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*N9V10hVRV8HMDJxu.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">邮递员请求</figcaption></figure><p id="7df3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将给你一个JSON响应，显示你系统中所有的灯。所有这些灯将有相同的名称对应他们，因为你会看到在色调应用程序。对于我的示例，我将使用具有以下id的两个色调灯条(“18233658–5 CD b-42 D1–9b 08–588210 dsadsa J2”和“18233658-dajji-dsadi-9b 08-dsajdsaiuidsa”)。</p><h1 id="a1ba" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">4.创建CA证书</h1><p id="2c67" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">如果您通过HTTPS打电话，您需要使用证书。客户端必须根据色调桥的专用CA证书来验证色调桥证书。幸运的是，创建这个证书听起来比实际困难。定义您想要包含自动化脚本的文件夹，并添加一个名为:<strong class="lb iu"> huebridge_cacert.pem </strong>的文件，其内容如下。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="124b" class="oe mn it oa b gy of og l oh oi">-----BEGIN CERTIFICATE----- MIICMjCCAdigAwIBAgIUO7FSLbaxikuXAljzVaurLXWmFw4wCgYIKoZIzj0EAwIw OTELMAkGA1UEBhMCTkwxFDASBgNVBAoMC1BoaWxpcHMgSHVlMRQwEgYDVQQDDAty b290LWJyaWRnZTAiGA8yMDE3MDEwMTAwMDAwMFoYDzIwMzgwMTE5MDMxNDA3WjA5 MQswCQYDVQQGEwJOTDEUMBIGA1UECgwLUGhpbGlwcyBIdWUxFDASBgNVBAMMC3Jv b3QtYnJpZGdlMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEjNw2tx2AplOf9x86 aTdvEcL1FU65QDxziKvBpW9XXSIcibAeQiKxegpq8Exbr9v6LBnYbna2VcaK0G22 jOKkTqOBuTCBtjAPBgNVHRMBAf8EBTADAQH/MA4GA1UdDwEB/wQEAwIBhjAdBgNV HQ4EFgQUZ2ONTFrDT6o8ItRnKfqWKnHFGmQwdAYDVR0jBG0wa4AUZ2ONTFrDT6o8 ItRnKfqWKnHFGmShPaQ7MDkxCzAJBgNVBAYTAk5MMRQwEgYDVQQKDAtQaGlsaXBz IEh1ZTEUMBIGA1UEAwwLcm9vdC1icmlkZ2WCFDuxUi22sYpLlwJY81Wrqy11phcO MAoGCCqGSM49BAMCA0gAMEUCIEBYYEOsa07TH7E5MJnGw557lVkORgit2Rm1h3B2 sFgDAiEA1Fj/C3AN5psFMjo0//mrQebo0eKd3aWRx+pQY08mk48= <br/>-----END CERTIFICATE-----</span></pre><p id="269e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在终于是时候创建我们的脚本了。</p><h1 id="de1f" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">5.创建您想要的脚本</h1><p id="442f" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">现在我们已经有了网桥ID &amp; IP、经过验证的用户名和要自动化的灯，我们可以开始一些真正的编程了！在这一部分，我们将编写一个cURL脚本。该脚本将根据参数打开或关闭播放栏。实现这一点的代码是用bash编写的，所以如果你还没有它，最简单的方法就是安装<a class="ae ky" href="https://gitforwindows.org/" rel="noopener ugc nofollow" target="_blank"> GIT </a>。Git会自动为你安装Git Bash。现在将“<strong class="lb iu"> toggle_hue.sh </strong>”添加到您添加PEM证书的同一个文件夹中，其内容如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo nv l"/></div></figure><p id="3716" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，您需要用您自己的值来替换下面的变量:BRIDGEID、BRIDGEIP、USERNAME和LIGHTIDS。设置好初始值后，脚本将根据您给出的<strong class="lb iu">参数</strong>来<strong class="lb iu">定义您的请求</strong>。如果脚本提供了" on "来打开你想要的灯，如果提供了其他任何东西，它将关闭灯。在设置请求对象后，脚本将在你的灯上循环，然后<strong class="lb iu">发送一个cURL请求，其中包含你刚刚添加的证书</strong>(将证书文件夹更改为你想要的文件夹)，以打开或关闭特定的灯。现在，让我们通过在您的文件夹中的Git Bash内运行以下命令来尝试或编写脚本:<strong class="lb iu"> "bash toggle_hue.sh on" </strong>。这应该可以打开你的灯了😊。如果你把开替换成关，它将关闭你定义的灯。</p><h1 id="8f55" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">6.定义任务</h1><p id="55cd" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">对于windows和Linux，这一步是分开的。先说windows。</p><h2 id="7a39" class="oe mn it bd mo op oq dn ms or os dp mw li ot ou my lm ov ow na lq ox oy nc oz bi translated">6 .窗户</h2><p id="f8e7" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">在lights自动化过程的最后一步，我们需要定义上面写的脚本何时需要运行。幸运的是，windows有一个称为任务调度器的东西，可以将任何操作与Windows中的特定操作结合起来。</p><p id="d74f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们将添加关灯任务。打开Windows任务调度器，点击<strong class="lb iu">动作、</strong>，然后点击<strong class="lb iu">创建任务… </strong>。转到<strong class="lb iu">触发器</strong>选项卡，定义一个新的触发器。我添加了一个触发器，将工作站上的开始任务<strong class="lb iu">锁定</strong>，并将其添加到我们的触发器中。然后我又加了一个睡眠模式。这个稍微复杂一点，我们在一个事件上添加了一个新的触发器<strong class="lb iu">，日志值<strong class="lb iu">系统</strong>，作为源值<strong class="lb iu">内核功率</strong>和事件ID <strong class="lb iu"> 42 </strong>(睡眠事件)。这将看起来像这样:</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/24d2bb60e207a23a70fc12dbbc3d16c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/0*5_ed311WlbsOSvFz.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">创建新触发器</figcaption></figure><p id="f6f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们需要将一个<strong class="lb iu">动作</strong>耦合到已定义的触发器。转到<strong class="lb iu">动作</strong>选项卡，添加一个新动作。离开动作为<strong class="lb iu">开始一个程序。</strong>在设置部分，填写Bash作为要运行的程序。如果你已经安装了Git Bash，你会在“C:\Program Files\Git\bin”下找到它。现在添加以下参数:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="fe2e" class="oe mn it oa b gy of og l oh oi">C:\Users\&lt;username&gt;\&lt;folder&gt;\toggle_hue.sh off</span></pre><p id="19dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后点击确定。您的操作选项卡将如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/1e60f995ac61ba04e0f9b9e7333ff7be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/0*lq9vRxR0NfAwpa_8.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">要运行的Bash脚本</figcaption></figure><p id="2326" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">干得好！你完成了自动关闭色调灯的脚本！在我们继续下一步之前，去检查一下。</p><h2 id="d03e" class="oe mn it bd mo op oq dn ms or os dp mw li ot ou my lm ov ow na lq ox oy nc oz bi translated">开灯</h2><p id="a2d9" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">现在我们需要做同样的事情，当你的电脑醒来时打开灯。这个过程几乎和关灯的任务一样。我现在将指出这项任务的不同之处:</p><ul class=""><li id="7533" class="ne nf it lb b lc ld lf lg li pc lm pd lq pe lu pf nm nn no bi translated">在工作站解锁上，将锁定的触发器更改为<strong class="lb iu"/></li><li id="a346" class="ne nf it lb b lc np lf nq li nr lm ns lq nt lu pf nm nn no bi translated">将<strong class="lb iu">事件ID </strong>更新为1(电脑唤醒事件)</li><li id="bba6" class="ne nf it lb b lc np lf nq li nr lm ns lq nt lu pf nm nn no bi translated">将动作的<strong class="lb iu">参数</strong>改为C:\ Users \&lt;username&gt;\&lt;folder&gt;\ toggle _ hue . sh off</li></ul><h2 id="be3f" class="oe mn it bd mo op oq dn ms or os dp mw li ot ou my lm ov ow na lq ox oy nc oz bi translated">6.b Linux</h2><p id="bef9" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">现在让我们对Linux做同样的事情。可以想象，在Linux上这样做要容易得多。在<code class="fe oj ok ol oa b">/usr/lib/systemd/system-sleep/setup-hue-toggle.sh</code>中添加以下脚本</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="849c" class="oe mn it oa b gy of og l oh oi">#!/bin/sh<br/>case $1/$2 in<br/>     pre/*)<br/>         bash &lt;folder of hue script&gt;\toggle_hue.sh off<br/>         ;;<br/>     post/*)<br/>         bash &lt;folder of hue script&gt;\toggle_hue.sh on<br/>         ;;<br/>esac</span></pre><p id="2544" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅此而已。现在是时候尝试新添加的脚本了，看看它是否像预期的那样工作。如果您也想让脚本在锁定/解锁上工作，将下面的文件添加到<code class="fe oj ok ol oa b"> ~/.config/autostart-scripts/setup-hue-toggle.sh</code></p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="b427" class="oe mn it oa b gy of og l oh oi">#!/bin/sh<br/>dbus-monitor --session 'type=signal,interface=org.freedesktop.ScreenSaver,pah=/org/freedesktop/ScreenSaver,member=ActiveChanged' |<br/>   while read -r line; do<br/>     if [[ $line =~ "member=ActiveChanged" ]]; then<br/>       read -r state<br/>       if [[ $state =~ "true" ]]; then<br/>          <!-- -->bash &lt;folder of hue script&gt;\toggle_hue.sh off<br/>       else<br/>          bash &lt;folder of hue script&gt;\toggle_hue.sh on<br/>       fi<br/>     fi<br/>   done</span></pre><h2 id="7980" class="oe mn it bd mo op oq dn ms or os dp mw li ot ou my lm ov ow na lq ox oy nc oz bi translated">6.c Mac</h2><p id="7590" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">要在Mac上完成同样的事情，你需要安装一个名为<a class="ae ky" href="https://apps.apple.com/jp/app/eventscripts/id525319418?l=en&amp;mt=12" rel="noopener ugc nofollow" target="_blank"> EventScripts </a>的程序。在EventScripts中，您有几个选项来创建触发器(见下图)。由于EventScripts在Mac App Store上，它只能在自己的文件夹中运行脚本，所以把你的脚本放在那里。选择Screen password unlocked并将参数更改为bash toggle_hue.sh on。对锁定/睡眠执行完全相同的操作，并将参数更改为off。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/75d4d6c7f2a822888f09a2da569bc608.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/format:webp/0*1P7pYYgANBJPnIMM.png"/></div></figure><h1 id="2628" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">结论</h1><p id="ce03" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">自动化很容易，你只需要知道要采取哪些步骤。在本教程中，我们找到了一种根据我们电脑的状态来自动化我们的<a class="ae ky" href="https://amzn.to/3lN3kiB" rel="noopener ugc nofollow" target="_blank">飞利浦色调播放条的方法。让这成为你家庭自动化之旅的开始。</a></p><p id="4c61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐！</p></div><div class="ab cl ph pi hx pj" role="separator"><span class="pk bw bk pl pm pn"/><span class="pk bw bk pl pm pn"/><span class="pk bw bk pl pm"/></div><div class="im in io ip iq"><p id="2ab1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ml">原载于2021年12月17日</em><a class="ae ky" href="https://morehue.com/easily-toggle-philips-hue-depending-on-your-pc-state-v2/" rel="noopener ugc nofollow" target="_blank"><em class="ml">https://morehue.com</em></a><em class="ml">。</em></p></div></div>    
</body>
</html>