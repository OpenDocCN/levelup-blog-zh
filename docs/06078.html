<html>
<head>
<title>Timing module in Python — timeit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的计时模块— timeit</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/timing-module-in-python-timeit-bddc6dc84846?source=collection_archive---------7-----------------------#2020-10-23">https://levelup.gitconnected.com/timing-module-in-python-timeit-bddc6dc84846?source=collection_archive---------7-----------------------#2020-10-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="18f2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">理解如何使用“timeit”模块为Python代码计时的指南。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b08e08da1199487a4884f0f04f806544.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*47yrkEiFEyG6KEcl"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kv" href="https://unsplash.com/@insungyoon?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">尹新荣</a>拍摄的照片</figcaption></figure><p id="09ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Python有一个名为“timeit”的内置计时模块，可以帮助用户知道代码运行需要多长时间。它还可以帮助找出是否有任何一行代码降低了整个程序的速度。</p><p id="3015" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个模块有一个命令行界面和一个可调用函数。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="5276" class="lx ly iq lt b gy lz ma l mb mc"><strong class="lt ir">&gt;&gt;&gt; import</strong> timeit</span></pre><p id="6a62" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们从计时创建字符串的代码开始。我们试图创建的字符串是“0，1，2，3，…”。,99"</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="384d" class="lx ly iq lt b gy lz ma l mb mc">&gt;&gt;&gt; ",".join(str(n) <strong class="lt ir">for</strong> n <strong class="lt ir">in</strong> range(100))</span><span id="7a2e" class="lx ly iq lt b gy md ma l mb mc">'0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99'</span></pre><p id="aecb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们将通过向time it函数传递两个参数来计时。第一个参数是字符串格式的代码，第二个参数是希望运行多少次。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="c98b" class="lx ly iq lt b gy lz ma l mb mc">&gt;&gt;&gt; timeit.timeit('",".join(str(n) for n in range(100))', number <strong class="lt ir">=</strong> 10000)</span><span id="ba41" class="lx ly iq lt b gy md ma l mb mc">0.5468854000000647</span></pre><p id="cf6a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们尝试使用列表理解创建相同的字符串。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="340f" class="lx ly iq lt b gy lz ma l mb mc">&gt;&gt;&gt; timeit.timeit('",".join([str(n) for n in range(100)])', number <strong class="lt ir">=</strong> 10000)</span><span id="d876" class="lx ly iq lt b gy md ma l mb mc">0.48502080000002934</span></pre><p id="8b01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在使用map函数创建相同的字符串。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="77c1" class="lx ly iq lt b gy lz ma l mb mc">&gt;&gt;&gt; timeit.timeit('",".join(map(str,range(100)))', number <strong class="lt ir">=</strong> 10000)</span><span id="d8ad" class="lx ly iq lt b gy md ma l mb mc">0.3379802000000609</span></pre><p id="142e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此可以看出，使用map函数花费的时间最少。</p><h1 id="ebbb" class="me ly iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">使用timeit内置的神奇功能</h1><p id="f3a6" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">如果使用jupyter笔记本，可以使用内置魔法。当使用timeit作为内置魔术函数时，不需要将代码作为字符串传递。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="8bac" class="lx ly iq lt b gy lz ma l mb mc"><strong class="lt ir">&gt;&gt;&gt; %</strong>timeit ",".join(str(n) <strong class="lt ir">for</strong> n <strong class="lt ir">in</strong> range(100))<br/>58.5 µs ± 3.58 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)</span><span id="153f" class="lx ly iq lt b gy md ma l mb mc"><strong class="lt ir">&gt;&gt;&gt; %</strong>timeit ",".join([str(n) <strong class="lt ir">for</strong> n <strong class="lt ir">in</strong> range(100)])<br/>46.4 µs ± 4 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)</span><span id="bdd3" class="lx ly iq lt b gy md ma l mb mc"><strong class="lt ir">&gt;&gt;&gt; %</strong>timeit ",".join(map(str,range(100)))<br/>30.4 µs ± 3.48 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)</span></pre><p id="f124" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">参考笔记本<a class="ae kv" href="https://github.com/jayashree8/Python_guide/blob/master/Python%20modules%20and%20packages/Timing%20module%20in%20Python%20-%20timeit.ipynb" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><h2 id="7161" class="lx ly iq bd mf na nb dn mj nc nd dp mn lf ne nf mp lj ng nh mr ln ni nj mt nk bi translated">学习Python可以参考的入门书籍:</h2><div class="nl nm gp gr nn no"><a href="https://amzn.to/3yDY4To" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">Python速成班，第二版:基于项目的编程入门实践</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">世界上最畅销的Python书籍的第二版。一个快速的，没有废话的Python编程指南…</h3></div></div><div class="nw l"><div class="nx l ny nz oa nw ob kp no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://amzn.to/3vtvQZv" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">艰难地学习Python:一个非常简单的介绍可怕的美丽世界…</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">你会学习Python！Zed Shaw完善了世界上最好的学习Python的系统。遵循它，你会…</h3></div></div><div class="nw l"><div class="oc l ny nz oa nw ob kp no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://amzn.to/3urluYI" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">思考Python，2e:如何像计算机科学家一样思考</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">思考Python，2e:如何像计算机科学家一样思考</h3></div></div><div class="nw l"><div class="od l ny nz oa nw ob kp no"/></div></div></a></div><h2 id="c31d" class="lx ly iq bd mf na nb dn mj nc nd dp mn lf ne nf mp lj ng nh mr ln ni nj mt nk bi translated">学习Python可以参考的高级书籍:</h2><div class="nl nm gp gr nn no"><a href="https://amzn.to/3fMzVBn" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">编程Python:强大的面向对象编程</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">如果你已经掌握了Python的基础，你就可以开始使用它来完成真正的工作了。编程Python将…</h3></div></div><div class="nw l"><div class="oe l ny nz oa nw ob kp no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://amzn.to/34oFFMl" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">高级Python编程:使用以下工具构建高性能、并发和多线程应用</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">关键特性使用Dask和PySpark Master技能在集群上设置和运行分布式算法，以准确地…</h3></div></div><div class="nw l"><div class="of l ny nz oa nw ob kp no"/></div></div></a></div><blockquote class="og oh oi"><p id="30ed" class="kw kx oj ky b kz la jr lb lc ld ju le ok lg lh li ol lk ll lm om lo lp lq lr ij bi translated"><em class="iq">联系我:</em> <a class="ae kv" href="https://www.linkedin.com/in/jayashree-domala8/" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> LinkedIn </em> </a></p><p id="8dd9" class="kw kx oj ky b kz la jr lb lc ld ju le ok lg lh li ol lk ll lm om lo lp lq lr ij bi translated"><em class="iq">查看我的其他作品:</em> <a class="ae kv" href="https://github.com/jayashree8" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> GitHub </em> </a></p></blockquote></div></div>    
</body>
</html>