<html>
<head>
<title>The killer Storybook Webpack config</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">杀手故事书网络包配置</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-killer-storybook-webpack-config-a0fd05dc70a4?source=collection_archive---------2-----------------------#2019-07-16">https://levelup.gitconnected.com/a-killer-storybook-webpack-config-a0fd05dc70a4?source=collection_archive---------2-----------------------#2019-07-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3090392447954662030e77234b569b42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R3rvQeCGYAK5RfNwL1OiSg.jpeg"/></div></div></figure><p id="6fcc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">嘿，嘶…是的，你…过来这里…你需要一本故事书的配置吗？是的，你听到了。你需要访问全局SCSS变量，不是吗？我正好有药给你。看看藏在我难以置信的污渍风衣里的这个…耶，这是一个杀手网络包配置。 什么？不，不，把装金条的公文包拿开，你的钱在这里没用，朋友…这是免费的。我带你去看世界。</p><h1 id="e673" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">什么是故事书？</h1><p id="25d7" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">它确实非常方便。<strong class="ka ir"> Storybook </strong>是一个用于独立开发UI组件的开源工具。它大多与React、Angular和Vue相结合。</p><p id="051a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然而，我们将使用<strong class="ka ir">和<em class="kw">做出反应。</em> </strong> <em class="kw">这篇文章的目标是为Storybook创建一个配置，</em>让你的故事可以全局访问<strong class="ka ir"> <em class="kw"> SCSS变量、打字稿、反应、巴别塔</em> </strong>和其他好东西。这是你需要的最杀手级的故事书版本。</p><h1 id="966a" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">我不能按照文档进行配置吗？</h1><p id="0b34" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">是的，如果你想构建你的UI组件，必须手动包含你所有的SCSS变量，直接满足于CSS或者不能访问你的SCSS变量？官方文档只能带你到这里，但是它遗漏了很多你在构建一个可靠的故事书webpack时会遇到的核心问题。然后你将不得不用每个依赖的所有包版本玩扫雷…对你来说谢天谢地，我已经为你受苦了。</p><h1 id="62a1" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">装置</h1><p id="93f8" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">幸运的是，我不会要求您手动一点一点地将整个配置放在一起。我已经帮你做了重活。然而，如果你决定要迎合你的需求。克隆完不想要的，随便砍改。</p><p id="5ea1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，git克隆那个坏小子下来。</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="c7a9" class="mj ky iq mf b gy mk ml l mm mn">git clone <a class="ae mo" href="https://github.com/hghazni/killer-storybook-config.git" rel="noopener ugc nofollow" target="_blank">https://github.com/hghazni/killer-storybook-config.git</a><br/>cd killer-storybook-config</span></pre><p id="69f1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦你得到了回购，我们需要:-</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="c1f9" class="mj ky iq mf b gy mk ml l mm mn">npm i<br/>npm run storybook</span></pre><p id="76f6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">仅此而已<a class="ae mo" href="https://emojipedia.org/party-popper/" rel="noopener ugc nofollow" target="_blank">🎉</a></p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mp"><img src="../Images/66f894043f580b0d2fc7af31ddd240fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3pfp-jcBqJZq9-Hrn7i4wQ.png"/></div></div></figure><p id="1e3b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，如果你想在安装包后运行<strong class="ka ir"> React </strong>，只需</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="7dae" class="mj ky iq mf b gy mk ml l mm mn">npm start</span></pre></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><h1 id="859c" class="kx ky iq bd kz la mx lc ld le my lg lh li mz lk ll lm na lo lp lq nb ls lt lu bi translated">那么这个配置中有什么呢？</h1><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="4be6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好吧，让我们来探索是什么让这个故事书配置，<em class="kw">“杀手”。</em></p><h1 id="3bc8" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">文件基础设施</h1><p id="c64f" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">这就是配置结构的布局。</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="157e" class="mj ky iq mf b gy mk ml l mm mn">|.storybook/<br/>|.webpack/<br/>|public/<br/>|src/<br/>|stories/<br/>|-_babel.config.js<br/>|-.babelrc<br/>|-.eslintignore<br/>|-.gitignore<br/>|-package.json<br/>|-tsconfig.json<br/>|-webpack.config.js</span></pre><p id="0ecf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">重要提示:</strong></p><p id="91ac" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ne nf ng mf b">.webpack</code>是您的storybook webpack设置所在的位置。</p><p id="55e3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ne nf ng mf b">.src</code>是您的react应用程序还是您决定使用的任何前端(已经为您设置好)。</p><p id="92c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ne nf ng mf b">public</code>是React应用程序编译的地方。</p><p id="81df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ne nf ng mf b">.tsconfig.json</code>是您的打字稿翻译设置。</p><p id="f0d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ne nf ng mf b">.webpack.config.js</code>是你网站的主要引擎，几乎做了所有的事情。</p><h1 id="149c" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">Webpack配置</h1><p id="b50d" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">这是分解的这个webpack配置的引擎。</p><p id="ccf0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在根文件夹中有一个主<code class="fe ne nf ng mf b">webpack.config.js</code>。这将决定你的应用程序如何运行。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="nh nd l"/></div></figure><p id="39d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">根中还有一个包含我们的巴别塔配置的<code class="fe ne nf ng mf b">_babel.config.js</code>。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="nh nd l"/></div></figure><p id="61a7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<code class="fe ne nf ng mf b">.storybook</code>文件夹中有另一个<code class="fe ne nf ng mf b">webpack.config.js</code>,它是主文件夹的延伸。这让我们的故事可以访问我们在React应用程序中使用的所有内容。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="nh nd l"/></div></figure><p id="eac5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在同一个<code class="fe ne nf ng mf b">.storybook</code>文件夹中，我们还有一个<code class="fe ne nf ng mf b">config.ts</code>来搜索整个<code class="fe ne nf ng mf b">src</code>文件夹。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="nh nd l"/></div></figure><p id="383e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最重要的是，我们在故事书的<code class="fe ne nf ng mf b">rules.js</code>中包含了我们的webpack配置，并在<code class="fe ne nf ng mf b">webpack.config.js</code>中需要它以供将来重用。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="nh nd l"/></div></figure><p id="3d4e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就是在React应用程序中访问SCSS变量的神奇之处。总的想法是扩展我们在主webpack配置中使用的加载器，并在每个故事中包含特定的SCSS文件(上面列出的那些)。有了它，我们就能做一些神奇的事情。</p><p id="614a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您需要它用于项目中的另一个webpack配置，为了将来的可重用性，它被分成了一个<code class="fe ne nf ng mf b">rule.js</code>。理想情况下，您也应该将它包含在您的根webpack配置中。</p><h1 id="8823" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">或者只是用我的配置引导</h1><p id="b59e" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">所以你可以从头开始构建一个，一步一步地使用上面的配置进行定制…或者，你可以下载我的repo，只需几个命令就可以立即启动。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/debc7fcc8faee73584a8f8214d75db7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H5PH-bXXaQ4bvuUh4LFVpg.png"/></div></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk translated"><a class="ae mo" href="https://github.com/hghazni/killer-storybook-config" rel="noopener ugc nofollow" target="_blank">https://github.com/hghazni/killer-storybook-config</a></figcaption></figure><div class="nn no gp gr np nq"><a href="https://github.com/hghazni/killer-storybook-config" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">hghazni/杀手-故事书-配置</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">一个杀手级故事书Webpack配置，帮助你尽快启动一个伟大的故事书配置。它包括一个反应前端…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">github.com</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe jw nq"/></div></div></a></div><h1 id="57c8" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">一路上学到的见解、技巧和诀窍</h1><p id="e2de" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">从不同的仓库提升和移动webpack配置时，检查您的<code class="fe ne nf ng mf b">package-lock.json</code>。通过正确匹配包版本，而不是依赖于<code class="fe ne nf ng mf b">package.json</code>，您可以省去很多麻烦。这也适用于解决任何类型项目的问题。</p><p id="a3d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一点一点地构建你的webpack配置，不要试图一次完成所有事情。耐心是关键。如果你不系统地使用它，会浪费很多时间。</p><p id="a49c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不要在Storybook中退而求其次，你可以用状态、道具、GraphQL查询和真实数据设置几乎任何类型的环境。</p><h1 id="0d95" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">经过思考</h1><p id="f155" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我写这篇文章的原因是，对于webpack的非专家级用户来说，让全局SCSS变量在Storybook中工作实际上是一个相当大的挑战。所以我花了很大力气试图得到一个易于重用、快速启动并运行的配置。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="of nd l"/></div></figure><p id="49f0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">处于webpack配置拼图地狱，是最糟糕的地方。有了这个<strong class="ka ir">黑仔故事书配置</strong> …应该有助于平衡世界上的事情，只是一点点，并帮助你更快地启动和运行:)</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="og nd l"/></div></figure><h1 id="ad85" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">感谢阅读</h1><p id="2bf0" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我的名字<a class="ae mo" href="https://github.com/hghazni" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">哈里加兹尼</strong> </a>我在英国诺丁汉工作。</p><p id="a7d5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你喜欢我写的东西，你可以在<a class="ae mo" href="https://twitter.com/harryghazni" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="kw">Twitter</em></strong></a>或<a class="ae mo" href="https://medium.com/@hghazni" rel="noopener"><strong class="ka ir"><em class="kw">medium</em></strong></a>上找到我。我热爱我所做的事情，我所学的知识，并与他人分享。</p><p id="b286" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我也有一个YouTube频道叫做<a class="ae mo" href="https://www.youtube.com/channel/UChgP4qLeMhkcJUFMO5S05mQ/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">好奇Byt </strong> e </a>，我在那里发布教程和建议，看看吧！</p></div></div>    
</body>
</html>