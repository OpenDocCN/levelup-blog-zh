<html>
<head>
<title>How to Configure Node.js to Use Port 443</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何配置Node.js使用端口443</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/tws-004-how-to-configure-nodejs-to-use-port-443-86f1ca801c5f?source=collection_archive---------3-----------------------#2020-09-17">https://levelup.gitconnected.com/tws-004-how-to-configure-nodejs-to-use-port-443-86f1ca801c5f?source=collection_archive---------3-----------------------#2020-09-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/dbda0f9d21bf6830f150589c3b9e2c5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ueL2U9cB5hixdaGn0Nfq5A.png"/></div></div></figure><div class=""/><div class=""><h2 id="c262" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">授予服务器对众所周知的特权Linux系统端口的访问权限</h2></div><p id="d110" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在这一集里，Ivana学习如何授予Node.js网络能力，这样她就可以为她的HTTP/2服务器使用端口443。</p><p id="54f0" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">Ivana刚刚对她为艺术用品商店石头剪刀布开发的定制网站进行了最后的润色。她准备将它投入生产。</p><p id="8444" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在过去的几个月里，所有的东西都是在她的临时服务器上开发和测试的，该服务器被配置为监听端口8443。浏览器通过URL访问临时区域:</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="0fde" class="lz ma je lv b gy mb mc l md me">https://rock-paper-scissor.com:8443</span></pre><p id="254a" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">Ivana需要在端口443而不是端口8443上向公众提供服务器。但是她知道端口0到1023是众所周知的系统端口，非特权软件禁止访问它们。</p><p id="18b0" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">她部署的<a class="ae mf" href="https://rwserve.readwritetools.com/?utm_term=AccessingPort443" rel="noopener ugc nofollow" target="_blank"> HTTP/2服务器</a>是Node.js服务器。任何Node.js服务器作为<em class="lp">非根</em>用户启动，作为用户域进程运行，不允许访问系统端口。无论是从前台的终端窗口执行，还是通过使用<code class="fe mg mh mi lv b">PM2</code>的后台守护进程执行，或者直接在<code class="fe mg mh mi lv b">systemd</code>的控制下执行，都是如此。</p><p id="b756" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">她不可能以<code class="fe mg mh mi lv b">root</code>的身份启动服务器。有太多的内在风险。</p><p id="8c03" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">Ivana研究了允许Node.js作为用户<em class="lp"> rwserve </em>直接监听端口443需要做些什么。她了解到覆盖限制的Linux命令是<em class="lp"> set capabilities </em>命令<code class="fe mg mh mi lv b">setcap</code>。赋予Node.js网络权限的咒语是:</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="2e00" class="lz ma je lv b gy mb mc l md me">setcap 'cap_net_bind_service=+ep' /usr/bin/node</span></pre><p id="3104" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">其中<code class="fe mg mh mi lv b">cap_net_bind_service</code>是将套接字绑定到特权端口的能力；值<code class="fe mg mh mi lv b">+ep</code>表示添加能力“有效”和“允许”；而目标是Node.js可执行文件，位于<code class="fe mg mh mi lv b">/usr/bin/node</code>。</p><p id="c96e" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这达到了目的。现在她可以使用著名的443端口在<code class="fe mg mh mi lv b">https://rock-paper-scissors.com</code>访问石头剪刀布的网站。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><figure class="lq lr ls lt gt iv gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/63bc6c9688ccc7ad0abb46241e2e11bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*oBkUhI84JNeMhQW8ZCHjJA.png"/></div></figure><p id="0b3e" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><em class="lp">没有</em> <a class="ae mf" href="https://readwritetools.com/meet-the-team.blue" rel="noopener ugc nofollow" target="_blank"> <em class="lp"> minifig人物</em> </a> <em class="lp">在制作这一段纠结的Web Services插曲中受到伤害。</em></p></div></div>    
</body>
</html>