# JavaScript 干净代码—垂直格式

> 原文：<https://levelup.gitconnected.com/javascript-clean-code-vertical-formatting-d15097f5f30e>

![](img/bd4cbbd521e8a6b664715d1188cd358e.png)

照片由[pix poeties](https://unsplash.com/@blackpoetry?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

**鸣谢:灵感来自罗伯特·c·马丁的廉洁守则**

以易读的方式格式化代码是保持代码整洁的重要部分。没有正确格式化的代码需要更多的脑力来解释和理解。

在本文中，我们将研究如何一致地格式化 JavaScript 代码，以便通过查看垂直格式可以容易地阅读它们。

# 为什么我们需要格式化代码？

代码格式很重要，因为它完全是关于交流的。可读性对我们自己和其他读者都很重要。

杂乱无章的代码会妨碍人们理解代码。其他人不理解代码就无法工作。

此外，阅读代码的人也必须坚持清理代码。我们不希望他们因为容易修复的错误格式而遭受损失。

# 垂直格式

代码的行数应该少于 500 行。小文件比大文件更容易理解。大文件需要更长的时间来阅读，所以花在阅读代码上的时间比做实际工作的时间要多。

源代码就像一篇报纸文章。我们研究得越深入，文章就越详细。代码也是如此。我们有一个关于变量和函数声明的介绍，然后随着我们越来越深入，我们得到了更多的代码实现细节。

# 空白行

不同实体之间的空行很重要。它们在函数和类定义之间尤其重要。没有它们，一切都变得难以阅读，令读者沮丧。

例如，下面的内容很难读懂:

```
class Foo {metho1(){}metho2(){}}
class Bar {metho1(){}metho2(){}}
```

然而，下面要简单得多:

```
class Foo {
  method1() {} method2() {}
}class Bar {
  method1() {} method2() {}
}
```

所以我们应该在代码中放一些空行。

当它们都被捆绑在一起时，很难集中在一段代码上。

# 垂直密度

正如我们在上面看到的，代码在垂直方向上不应该太密集。总是在代码组之间留出一些空间。

我们可以将没有空行的变量声明和类组合在一起，如下所示:

```
let x = 1;
let y = 2;class Foo {
  method1() {} method2() {}
}class Bar {
  method1() {} method2() {}
}
```

# 垂直距离

不得不从一个函数跳到下一个函数，并一直上下滚动页面来阅读我们的代码，这令人沮丧。这让所有人都很困惑。

此外，在成吨的文件中寻找某个事物的原始定义是令人沮丧的。

为了防止这种情况，相关的概念应该保持相互接近。

# 变量声明

变量声明应该尽可能接近它们的用法，这样就可以很快找到它们的用法，而不需要在不同的文件之间滚动或跳转。

循环控制变量应该在循环语句中声明，这样读者会马上知道它在循环中使用。

![](img/0221385a446357e814a2826331385d6b.png)

照片由[利奥·可比](https://unsplash.com/@leomoko?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

# 实例变量

实例变量应该在类的顶部声明，这样我们就知道可以马上找到它们。

我们可以把它们放在`constructor`中，这样我们就知道它们是供我们使用或更改的。

例如，下面的类:

```
class Point {
  constructor(x, y) {
    this.x = x;
    this.y = y;
  } getPoint() {} setPoint() {}
}
```

比下面的更清楚:

```
class Point {
  getPoint() {} setPoint() {} constructor(x, y) {
    this.x = x;
    this.y = y;
  }
}
```

因为大多数人希望类的初始化代码在顶部。`constructor`有初始化代码，所以我们应该把它放在上面。

# 从属函数

相互依赖的函数应该靠得很近，这样我们就不必滚动文件来寻找被调用函数的原始定义。

这减少了挫折感，因为我们把所有的东西都放在一个屏幕上。

例如，如果我们有如下一连串的调用，我们应该将它们放在一起:

```
class Foo {
  foo() {
    this.bar();
  } bar() {
    this.baz();
  } baz() {}
}
```

# 相关代码

相关的代码应该彼此靠近，这样我们就不必在代码中滚动查找相关的概念。他们可能没有直接的依赖关系，但他们有足够的密切关系，我们需要一起找到他们。

例如，下面的类具有彼此密切相关的方法:

```
class Assert {
  assertTrue() {} assertFalse() {} assertNotUndefined() {}
}
```

这三者都断言满足某些条件，所以它们是相关的概念，所以它们应该放在一起。

# 垂直排序

被调用的函数应该在执行调用的函数下面。这创造了一个从高到低的良好流程。

高层次的概念很重要，所以它们应该在最上面，然后我们可以看看低层次的帮助函数。

所以上面的例子也适用于这里:

```
class Foo {
  foo() {
    this.bar();
  } bar() {
    this.baz();
  } baz() {}
}
```

`foo`叫`bar`做某事，`bar`叫`baz`做另一件事。总之，`foo`是最高级别，因为它首先被调用，然后调用沿着链向下到达`baz`。

# 结论

代码格式很重要。没有它，代码会变得一团糟，难以阅读，因此也难以维护。我们必须主动清理格式混乱的代码。

要做到这一点，我们必须先看看代码的垂直格式。每个文件应该有数千行或更多行。此外，空行在像函数和变量声明这样的代码组之间也很重要。

此外，相关的概念应该紧密地组合在一起，以减少一起搜索这些实体的时间。

实例变量应该放在最上面，这样容易找到。其他变量声明也应该放在一起，但是它们应该靠近将要使用它们的地方，以最小化滚动。

最后，高级代码应该在低级助手代码之上。