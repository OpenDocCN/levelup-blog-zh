<html>
<head>
<title>Creating Candlestick Plots for Stocks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为股票创建蜡烛图</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-candlestick-plots-for-stocks-50c35b1573aa?source=collection_archive---------3-----------------------#2022-03-28">https://levelup.gitconnected.com/creating-candlestick-plots-for-stocks-50c35b1573aa?source=collection_archive---------3-----------------------#2022-03-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c36c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何使用matplotlib、Plotly、Cufflinks和bqplot创建烛台图</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/119c9ac715049e1425e3f042ae2fe959.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MEp4L8Lgdtwf0Tob"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">马克西姆·霍普曼在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="a019" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我之前的文章中，我谈到了如何绘制时间序列箱线图。另一个涉及时间序列的相似类型的情节是<strong class="lb iu">烛台</strong>情节。</p><div class="lv lw gp gr lx ly"><a href="https://towardsdatascience.com/plotting-time-series-boxplots-5a21f2b76cfe" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">绘制时间序列箱线图</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">了解如何使用matplotlib和Seaborn绘制时间序列箱线图</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">towardsdatascience.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><p id="8a4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">蜡烛图是一种金融图表，用于描述证券、衍生品或货币的价格变动。顾名思义，烛台图的中心组件是<em class="mn">烛台</em>，它类似于一根蜡烛。</p><p id="35ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">烛台有以下部件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/434ef6c1abd252901de0bffd49def284.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*XMUOtyKIOM31JgXZmMgFWg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><ul class=""><li id="98e7" class="mp mq it lb b lc ld lf lg li mr lm ms lq mt lu mu mv mw mx bi translated"><strong class="lb iu">实体</strong> —显示价格从开盘价到收盘价变动的矩形。通常绿色用来代表价格的上升(看涨)，红色用来代表价格的下降(看跌)。</li><li id="16e4" class="mp mq it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated"><strong class="lb iu">灯芯</strong> —开盘价和收盘价上方和下方的灯芯。这些棒代表股票在特定交易日的最高价和最低价。棍子的长度称为<strong class="lb iu">上影</strong>和<strong class="lb iu">下影</strong>。</li></ul><p id="c692" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">烛台是一个很好的方式来分析和可视化的股票价格运动。例如，如果<em class="mn">真实体</em>具有异常宽的范围，它代表价格运动方向的非常强的偏向。另一方面，如果<em class="mn">实体</em>的区间很窄，就暗示着不确定性，买卖双方都在纠结。</p><p id="d922" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将向您展示如何使用Python中的各种库来构建烛台图。</p><h1 id="d342" class="nd ne it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">加载股票数据</h1><p id="e464" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">人们总是问的一个常见问题是:我在哪里可以找到历史股票数据，以便我可以使用它来实践数据可视化？简单的回答是<strong class="lb iu">雅虎财经</strong>。下面的代码片段允许您指定一个日期范围，并获取一家公司的历史价格(例如以下示例中的Google(股票代码<strong class="lb iu"> GOOG </strong>)):</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="c2b1" class="of ne it ob b gy og oh l oi oj">import time<br/>from datetime import datetime<br/>import pandas as pd</span><span id="f66e" class="of ne it ob b gy ok oh l oi oj">dt = datetime(2020, 1, 1)<br/>start_date = int(round(dt.timestamp()))</span><span id="0b04" class="of ne it ob b gy ok oh l oi oj">dt = datetime(2020, 3, 31)<br/>end_date = int(round(dt.timestamp()))</span><span id="24ed" class="of ne it ob b gy ok oh l oi oj">stock = 'GOOG'</span><span id="8519" class="of ne it ob b gy ok oh l oi oj">df = \<br/> pd.read_csv(f"<a class="ae ky" href="https://query1.finance.yahoo.com/v7/finance/download/{stock}?period1={start_date}&amp;period2={end_date}&amp;interval=1d&amp;events=history&amp;includeAdjustedClose=true" rel="noopener ugc nofollow" target="_blank">https://query1.finance.yahoo.com/v7/finance/download/{stock}?period1={start_date}&amp;period2={end_date}&amp;interval=1d&amp;events=history&amp;includeAdjustedClose=true</a>",<br/>    parse_dates = ['Date'], index_col='Date')</span><span id="efeb" class="of ne it ob b gy ok oh l oi oj">df</span></pre><p id="4f0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据帧看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/be62cec173542bbb42aadc24b63ff0fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*OyiZxN7PiO43ehsr1gkBYg.png"/></div></figure><p id="b8d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，在数据帧加载期间，使用<strong class="lb iu">日期</strong>列设置索引。</p><h1 id="cc3c" class="nd ne it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">使用matplotlib绘制收盘价</h1><p id="7b10" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">您可能希望使用数据框创建的第一个图是显示收盘价的折线图:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="a0e4" class="of ne it ob b gy og oh l oi oj">import matplotlib.pyplot as plt</span><span id="dce3" class="of ne it ob b gy ok oh l oi oj">fig, ax = plt.subplots(figsize=(15,10))<br/>ax.plot(df.index, df['Close'], 'o-')<br/>ax.grid(True)</span></pre><p id="55ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你有这样一个情节:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/303f1bd4dde33f156050c2e520bc75fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WPdzt5cWW9GR4TIGOMbKew.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="cef3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您注意上面的输出，您可能还会观察到一些东西—注意网格的宽度不一致。这是因为股票只在工作日交易——周一到周五，在上面的图中，不均匀的宽度是因为在绘制图表时考虑到了周末。这是在绘制涉及周末缺失数据的时间序列图表时的一个常见问题。有一种方法可以解决这个问题:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="24d3" class="of ne it ob b gy og oh l oi oj">import matplotlib.pyplot as plt<br/><strong class="ob iu">from matplotlib.ticker import Formatter<br/>from matplotlib.dates import num2date<br/>import numpy as np</strong></span><span id="b9e6" class="of ne it ob b gy ok oh l oi oj"><strong class="ob iu">rows = len(df)<br/>indices = np.arange(rows)</strong></span><span id="4242" class="of ne it ob b gy ok oh l oi oj"><strong class="ob iu">def format_date(x, pos = None):<br/>    i = np.clip(int(x + 0.5), 0, rows - 1)<br/>    return df.index[i].strftime('%Y-%m-%d')</strong></span><span id="3ece" class="of ne it ob b gy ok oh l oi oj">fig, ax = plt.subplots(figsize=(15,10))<br/>ax.plot(<strong class="ob iu">indices</strong>, df['Close'], 'o-')<strong class="ob iu"><br/>ax.xaxis.set_major_formatter(format_date)<br/></strong>ax.grid(True)</span></pre><p id="05d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不是使用日期来绘制x轴，而是使用其索引来绘制。之后，创建一个索引格式化函数(<code class="fe on oo op ob b">format_date</code>)，用正确的日期格式化x轴。最终结果看起来要好得多:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/8e118a12fad5bfbd51e53467bd8753d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f0XQwNzMWnf7k4xmXMfkuA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="b7f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，显示收盘价的图并不能显示交易日内价格变动的太多信息。因此，更好的选择是创建一个烛台阴谋。</p><h1 id="f3b7" class="nd ne it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">用matplotlib绘制蜡烛图</h1><p id="d73f" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">有许多库可以用来绘制蜡烛图。但是让我们从基础开始——使用matplotlib绘制一个。以下是步骤:</p><ul class=""><li id="b0b5" class="mp mq it lb b lc ld lf lg li mr lm ms lq mt lu mu mv mw mx bi translated">从数据框架中，得到所有看涨的行(它们的收盘价大于或等于开盘价)</li><li id="90ca" class="mp mq it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">获取所有看跌的行(它们的收盘价低于开盘价)</li><li id="4044" class="mp mq it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">画出看涨和看跌行的真实主体</li><li id="be6f" class="mp mq it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">画出看涨和看跌的线索</li></ul><p id="5733" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的代码片段执行上述步骤:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="2cf4" class="of ne it ob b gy og oh l oi oj">import matplotlib.pyplot as plt</span><span id="2abc" class="of ne it ob b gy ok oh l oi oj">width  = 0.9   # width of real body<br/>width2 = 0.05  # width of shadow</span><span id="c666" class="of ne it ob b gy ok oh l oi oj">fig, ax = plt.subplots(figsize=(15,10))</span><span id="5b60" class="of ne it ob b gy ok oh l oi oj"><strong class="ob iu"># find the rows that are bullish</strong><br/>dfup = df[df.Close &gt;= df.Open]</span><span id="fb9f" class="of ne it ob b gy ok oh l oi oj"><strong class="ob iu"># find the rows that are bearish</strong><br/>dfdown = df[df.Close &lt; df.Open]</span><span id="5083" class="of ne it ob b gy ok oh l oi oj"><strong class="ob iu"># plot the bullish candle stick</strong><br/>ax.bar(dfup.index, dfup.Close - dfup.Open, width, <br/>       bottom = dfup.Open, edgecolor='g', color='green')<br/>ax.bar(dfup.index, dfup.High - dfup.Close, width2, <br/>       bottom = dfup.Close, edgecolor='g', color='green')<br/>ax.bar(dfup.index, dfup.Low - dfup.Open, width2, <br/>       bottom = dfup.Open, edgecolor='g', color='green')</span><span id="f467" class="of ne it ob b gy ok oh l oi oj"><strong class="ob iu"># plot the bearish candle stick</strong><br/>ax.bar(dfdown.index, dfdown.Close - dfdown.Open, width, <br/>       bottom = dfdown.Open, edgecolor='r', color='red')<br/>ax.bar(dfdown.index, dfdown.High - dfdown.Open, width2, <br/>       bottom = dfdown.Open, edgecolor='r', color='red')<br/>ax.bar(dfdown.index, dfdown.Low - dfdown.Close, width2, <br/>       bottom = dfdown.Close, edgecolor='r', color='red')</span><span id="93ed" class="of ne it ob b gy ok oh l oi oj">ax.grid(color='gray')</span></pre><p id="e84f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/58489c6d5297d8cfc42c049da6251f67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yTwM_BqFCs28o3PtyzgSLA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="91f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您喜欢黑色背景，请使用<code class="fe on oo op ob b">plt.style.use()</code>功能:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="8b92" class="of ne it ob b gy og oh l oi oj">import matplotlib.pyplot as plt<br/><strong class="ob iu">plt.style.use("dark_background")<br/></strong># plt.style.use("default")          # reset to white background</span></pre><p id="b18b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">图表现在看起来是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/93bc5d43199ea7f069427e7041286788.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*30cifu8wWXuG1i_mluoGjg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="0321" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，您需要注意省略周末，所以下面是我们修改后的代码:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="c7c0" class="of ne it ob b gy og oh l oi oj">import matplotlib.pyplot as plt<br/>plt.style.use("dark_background")<br/># plt.style.use("default")</span><span id="7c35" class="of ne it ob b gy ok oh l oi oj">width  = 0.9   # width of real body<br/>width2 = 0.05  # width of shadow</span><span id="e24a" class="of ne it ob b gy ok oh l oi oj"><strong class="ob iu"># add a row containing the indices of each row<br/>df['indices'] = range(len(df))</strong></span><span id="6012" class="of ne it ob b gy ok oh l oi oj">fig, ax = plt.subplots(figsize=(15,10))</span><span id="f201" class="of ne it ob b gy ok oh l oi oj"># find the rows that are bullish<br/>dfup = df[df.Close &gt;= df.Open]</span><span id="dd16" class="of ne it ob b gy ok oh l oi oj"># find the rows that are bearish<br/>dfdown = df[df.Close &lt; df.Open]</span><span id="7086" class="of ne it ob b gy ok oh l oi oj"># plot the bullish candle stick<br/>ax.bar(<strong class="ob iu">dfup['indices']</strong>, dfup.Close - dfup.Open, width,<br/>       bottom = dfup.Open, edgecolor='g', color='green')<br/>ax.bar(<strong class="ob iu">dfup['indices']</strong>, dfup.High - dfup.Close, width2, <br/>       bottom = dfup.Close, edgecolor='g', color='green')<br/>ax.bar(<strong class="ob iu">dfup['indices']</strong>, dfup.Low - dfup.Open, width2, <br/>       bottom = dfup.Open, edgecolor='g', color='green')</span><span id="d580" class="of ne it ob b gy ok oh l oi oj"># plot the bearish candle stick<br/>ax.bar(<strong class="ob iu">dfdown['indices']</strong>, dfdown.Close - dfdown.Open, width, <br/>       bottom = dfdown.Open, edgecolor='r', color='red')<br/>ax.bar(<strong class="ob iu">dfdown['indices']</strong>, dfdown.High - dfdown.Open, width2, <br/>       bottom = dfdown.Open, edgecolor='r', color='red')<br/>ax.bar(<strong class="ob iu">dfdown['indices']</strong>, dfdown.Low - dfdown.Close, width2, <br/>       bottom = dfdown.Close, edgecolor='r', color='red')</span><span id="faaf" class="of ne it ob b gy ok oh l oi oj">ax.grid(color='gray')</span><span id="1c43" class="of ne it ob b gy ok oh l oi oj"><strong class="ob iu"># set the ticks on the x-axis<br/>ax.set_xticks(df[::5]['indices'])</strong></span><span id="544c" class="of ne it ob b gy ok oh l oi oj"><strong class="ob iu"># display the date for each x-tick<br/>_ = ax.set_xticklabels(labels = <br/>        df[::5].index.strftime('%Y-%b-%d'), <br/>        rotation=45, ha='right')</strong></span></pre><p id="883b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是更新后的烛台图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/d557a0da931023f4c06790ac67d28b78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e7du67CkEbPGDUZjz1riJQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="8bf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果要将收盘价图叠加到烛台图上，请添加以下粗体语句:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="ca92" class="of ne it ob b gy og oh l oi oj">import matplotlib.pyplot as plt<br/>plt.style.use("dark_background")<br/># plt.style.use("default")</span><span id="d4ca" class="of ne it ob b gy ok oh l oi oj">...<br/>ax.bar(dfdown['indices'], dfdown.Low - dfdown.Close, width2, <br/>       bottom = dfdown.Close, edgecolor='r', color='red')</span><span id="97f4" class="of ne it ob b gy ok oh l oi oj"><strong class="ob iu"># plot the closing price plot<br/>ax.plot(df['indices'], df.Close, color='yellow')  </strong>                       </span><span id="4b9a" class="of ne it ob b gy ok oh l oi oj">ax.grid(color='gray')</span><span id="4153" class="of ne it ob b gy ok oh l oi oj">...</span></pre><p id="59f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是更新后的收盘价图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/7dcb0328a461d6eaf39c567d655cb982.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MZ0g2BH5EJhrIfgT7gnoEg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><h1 id="f70c" class="nd ne it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">用Plotly绘制蜡烛图</h1><p id="c575" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">正如您在上一节中看到的，使用matplotlib绘制蜡烛图需要做大量的工作。我将使用的下一个库是<strong class="lb iu"> Plotly </strong>。</p><blockquote class="ou ov ow"><p id="e189" class="kz la mn lb b lc ld ju le lf lg jx lh ox lj lk ll oy ln lo lp oz lr ls lt lu im bi translated">Plotly是Python中的一个高级绘图库，用于创建交互式绘图。我在另一篇关于如何使用它绘制choropleth地图的文章中谈到了Plotly。请点击这里查看:</p></blockquote><div class="lv lw gp gr lx ly"><a rel="noopener  ugc nofollow" target="_blank" href="/plotting-choropleth-maps-in-python-b74c53b8d0a6"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">用Python绘制Choropleth地图</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">学习如何使用Plotly绘制choropleth地图</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mh l"><div class="pa l mj mk ml mh mm ks ly"/></div></div></a></div><p id="0b2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您需要首先安装Plotly:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="d866" class="of ne it ob b gy og oh l oi oj">!pip install plotly</span></pre><p id="bef4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要创建烛台图，创建一个<code class="fe on oo op ob b">go.Candlestick</code>对象，然后将其传递给<code class="fe on oo op ob b">go.Figure</code>类:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="b436" class="of ne it ob b gy og oh l oi oj">import numpy as np<br/>import pandas as pd<br/>import plotly.graph_objects as go</span><span id="d1a8" class="of ne it ob b gy ok oh l oi oj">fig = <strong class="ob iu">go.Figure</strong>(data=<br/>    [<strong class="ob iu">go.Candlestick</strong>(x = df.index,<br/>                    open  = df["Open"],<br/>                    high  = df["High"],<br/>                    low   = df["Low"],<br/>                    close = df["Close"])]<br/>)</span><span id="4e16" class="of ne it ob b gy ok oh l oi oj">fig.update_layout(<br/>    title='GOOG Stock Price',<br/>    yaxis_title="Price ($)"<br/>)</span><span id="1210" class="of ne it ob b gy ok oh l oi oj">fig.show()</span></pre><p id="2a34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你会看到这样的情节:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/cca83c9c01dea3d0af7bd6d21a18ab39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HQ9-FT8ZKxFCfI3OIV1f4Q.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="cde0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">图表底部是滑块，您可以在其中选择日期范围，并放大您想要更详细检查的图表部分:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/aeeac2d8f67a2f234b9e002fd4f9c0b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EsvYEj-_EXWOGvdG_uiW3Q.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="0a77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以将鼠标悬停在特定烛台上，查看当天的交易详情:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/eac3ffbcc64d9afc7f8fba046d2b7917.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OSqo6qqKlvU8wTlHADwI7g.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="a9d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过将<code class="fe on oo op ob b">x-axis_rangeslider_visible</code>参数设置为<code class="fe on oo op ob b">False</code>来隐藏范围滑块:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="d7af" class="of ne it ob b gy og oh l oi oj">fig.update_layout(<br/>    title='GOOG Stock Price',<br/>    yaxis_title="Price ($)",<br/><strong class="ob iu">    xaxis_rangeslider_visible=False</strong><br/>)</span></pre><h1 id="d600" class="nd ne it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">使用袖扣绘制烛台图表</h1><p id="149f" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">你可以用来绘制烛台图的下一个库是<strong class="lb iu">袖扣</strong>。</p><blockquote class="ou ov ow"><p id="1f91" class="kz la mn lb b lc ld ju le lf lg jx lh ox lj lk ll oy ln lo lp oz lr ls lt lu im bi translated"><strong class="lb iu"> Cufflinks </strong>是一个Python库，直接与Pandas连接，这样你就可以直接从Pandas数据帧中绘图。</p></blockquote><p id="de3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要安装袖扣，请使用以下命令:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="401d" class="of ne it ob b gy og oh l oi oj">$ <strong class="ob iu">pip install cufflinks</strong></span></pre><p id="06f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">袖扣可以很容易地创建一个蜡烛图，加上能够添加额外的图表到当前的情节非常容易。</p><p id="5715" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要绘制一个蜡烛图，使用<code class="fe on oo op ob b">QuantFig</code>类并传递给它包含你的股票数据的dataframe。然后，调用<code class="fe on oo op ob b">QuantFig</code>对象的<code class="fe on oo op ob b">iplot()</code>函数:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="396a" class="of ne it ob b gy og oh l oi oj">import cufflinks as cf<br/>cf.go_offline()</span><span id="5d25" class="of ne it ob b gy ok oh l oi oj">qf = cf.QuantFig(df, title='GOOG (2020)', name='GOOG')</span><span id="138f" class="of ne it ob b gy ok oh l oi oj">qf.iplot()</span></pre><blockquote class="ou ov ow"><p id="128b" class="kz la mn lb b lc ld ju le lf lg jx lh ox lj lk ll oy ln lo lp oz lr ls lt lu im bi translated">由于Plotly是一个在线平台，如果您在在线模式下使用它，您需要提供登录凭证。因此，当我们使用Jupyter笔记本电脑时，我们将使用离线模式。</p></blockquote><p id="4cb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">袖扣创造的烛台情节看起来是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/66ba7355603d262487f56ffa14227e17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WCizDLcIVPDVE6M1Qn26lQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="d0c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与Plotly一样，Cufflinks创建的情节是交互式的，您可以放大想要关注的情节部分，并将鼠标悬停在特定烛台上，将显示交易细节:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/f8a3a676e0d37c64175918410cc2ea08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DV5eu-vbsr5hePFlrWjJRA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="30f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用<code class="fe on oo op ob b">up_color</code>和<code class="fe on oo op ob b">down_color</code>参数配置烛台的颜色:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="f97a" class="of ne it ob b gy og oh l oi oj">qf = cf.QuantFig(df, name='GOOG', title='GOOG (2020)', <br/>                 <strong class="ob iu">up_color='green',<br/>                 down_color='red'</strong>)</span></pre><p id="6036" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看涨烛台现在显示为绿色，而看跌烛台现在显示为红色:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/d37636d6d0b34927de3beb79fd0e118f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1V-bL2i1L8xRgVEeZQ0LKQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="e05d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还可以轻松地向当前绘图添加附加图表。例如，假设您想要添加一个使用14天收盘价的<strong class="lb iu"> SMA </strong> ( <strong class="lb iu">简单移动平均线</strong>)图。使用<code class="fe on oo op ob b">add_sma()</code>功能可以很容易地做到这一点:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="4b2f" class="of ne it ob b gy og oh l oi oj">qf = cf.QuantFig(df, name='GOOG', title='GOOG (2020)', <br/>                 up_color='green',<br/>                 down_color='red')<br/><strong class="ob iu">qf.add_sma(periods=14, column='Close', color='blue')</strong></span></pre><blockquote class="ou ov ow"><p id="d254" class="kz la mn lb b lc ld ju le lf lg jx lh ox lj lk ll oy ln lo lp oz lr ls lt lu im bi translated"><strong class="lb iu">简单移动平均线</strong> (SMA)计算所选价格范围的平均值，通常是收盘价，乘以该范围内的周期数。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/2366729f46bd0d7ca6f9a027fa974b02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kmUneMdhyrh5iVYdCyPpIw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="ea08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想要SMA的不同周期，您可以传入一个<code class="fe on oo op ob b">periods</code>和<code class="fe on oo op ob b">color</code>参数列表:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="83e5" class="of ne it ob b gy og oh l oi oj">qf.add_sma(periods=<strong class="ob iu">[14,20]</strong>, column='Close', color=<strong class="ob iu">['blue','green']</strong>)</span></pre><p id="b14c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你会有两个14天和20天的SMA图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/33fef275fb8678f8244f9fc9e8358a00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WbJfoZrsl4sCPyoCDs042g.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="dfc9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了SMA，你还可以绘制一个<strong class="lb iu">均线</strong> ( <strong class="lb iu">指数移动平均线</strong>)图:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="a963" class="of ne it ob b gy og oh l oi oj"><strong class="ob iu">qf.add_ema(periods=14, column='Close', color='magenta')</strong></span></pre><blockquote class="ou ov ow"><p id="e97e" class="kz la mn lb b lc ld ju le lf lg jx lh ox lj lk ll oy ln lo lp oz lr ls lt lu im bi translated"><strong class="lb iu">指数移动平均线</strong> (EMA)是一种移动平均线，它对最近的数据点赋予更大的权重和重要性。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pj"><img src="../Images/00ac74facb84497e152d8392da519d3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E_dx2qmp5ckFeA_n91ilbA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="74b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您也可以将趋势线添加到当前图中:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="95fc" class="of ne it ob b gy og oh l oi oj"><strong class="ob iu">qf.add_trendline('2Jan20','17Jan20', on='close')  # '%d%b%y'</strong></span></pre><p id="d415" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意现在有一条从2020年1月2日到2020年1月17日的趋势线:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/b86da5d5360dc875593ba98bec578179.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*99drmufasgDqqnr9igEoNg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="805a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你也可以在图上添加一个<strong class="lb iu"> RSI </strong>图:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="86eb" class="of ne it ob b gy og oh l oi oj"><strong class="ob iu">qf.add_rsi(periods=14, color='red')</strong></span></pre><p id="73bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">相对强弱指数</strong> (RSI)是金融分析中使用的动量指标。RSI计算最近价格运动的变化，以检查它是超买还是抛售:</p><ul class=""><li id="666b" class="mp mq it lb b lc ld lf lg li mr lm ms lq mt lu mu mv mw mx bi translated">RSI值范围从0到100</li><li id="bea8" class="mp mq it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">传统上，任何高于70的价值都被高估，任何低于30的价值都被低估</li></ul><p id="9863" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">RSI图被添加到蜡烛图的下方:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pj"><img src="../Images/232c68728f47305606897256a7328d04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bYLIg8SUnGmvWjxa8A_jOg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="794c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">绿线代表70%的标志，而红线代表30%的标志。</p><p id="c924" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，您还可以添加一个体积条形图:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="ccf5" class="of ne it ob b gy og oh l oi oj"><strong class="ob iu">qf.add_volume()</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/9e5ab0d510f9c8f78fc704b85e5086c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IIjbqJ7WG2b8nvL7gexQ6w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="4e0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，袖扣让你很容易在一个图中绘制所有不同的图表。</p><h1 id="3cda" class="nd ne it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">使用bqplot绘制蜡烛图</h1><p id="99eb" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">我要讨论的最后一个库是<strong class="lb iu"> bqplot </strong>。</p><blockquote class="ou ov ow"><p id="0662" class="kz la mn lb b lc ld ju le lf lg jx lh ox lj lk ll oy ln lo lp oz lr ls lt lu im bi translated"><strong class="lb iu"> Bqplot </strong>是由彭博开发团队开发的python库。</p></blockquote><p id="c472" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您需要使用以下命令安装<strong class="lb iu"> bqplot </strong>:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="a35e" class="of ne it ob b gy og oh l oi oj">!pip install bqplot</span></pre><p id="1868" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装后，关闭Jupyter笔记本，然后重新启动。如果<strong class="lb iu"> bqplot </strong>无法显示图表(使用下面的例子)，执行以下步骤(记得关闭并重启Jupyter笔记本):</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="32c4" class="of ne it ob b gy og oh l oi oj">$ <strong class="ob iu">jupyter labextension install </strong><a class="ae ky" href="http://twitter.com/jupyter" rel="noopener ugc nofollow" target="_blank"><strong class="ob iu">@jupyter</strong></a><strong class="ob iu">-widgets/jupyterlab-manager</strong><br/>$ <strong class="ob iu">jupyter labextension install bqplot</strong></span></pre><p id="d30c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下代码片段使用<strong class="lb iu"> bqplot </strong>库创建烛台图:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="bee5" class="of ne it ob b gy og oh l oi oj">from bqplot import pyplot as plt</span><span id="0be1" class="of ne it ob b gy ok oh l oi oj">fig = plt.figure(title = "GOOG 2020")<br/>fig.layout.width = "750px"</span><span id="d4a6" class="of ne it ob b gy ok oh l oi oj">ohlc = plt.ohlc(x = df.index, <br/>                y = df[["Open","High","Low","Close"]],<br/>                marker = "candle", <br/>                stroke = "black")<br/>ohlc.colors=["lightgreen", "red"]</span><span id="ef06" class="of ne it ob b gy ok oh l oi oj">plt.show()</span></pre><p id="d4b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里是由<strong class="lb iu"> bqplot </strong>创建的图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pm"><img src="../Images/e5ab2415831aa6512b9c009aeca47ad8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*--LAqzlMsvSqyfdTaSLzBg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="c147" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像matplotlib一样，您也可以添加显示收盘价的折线图:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="8047" class="of ne it ob b gy og oh l oi oj">from bqplot import pyplot as plt</span><span id="11aa" class="of ne it ob b gy ok oh l oi oj">fig = plt.figure(title = "GOOG 2020")<br/>fig.layout.width = "750px"</span><span id="8fcd" class="of ne it ob b gy ok oh l oi oj">ohlc = plt.ohlc(x = df.index, <br/>                y = df[["Open","High","Low","Close"]],<br/>                marker = "candle", <br/>                stroke = "black")<br/>ohlc.colors=["lightgreen", "red"]</span><span id="681e" class="of ne it ob b gy ok oh l oi oj"><strong class="ob iu">plt.plot(x = df.index, y = df['Close'])<br/>plt.xlabel("Date")</strong><br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/8ba602787042d6ecf8c3a5f953e058d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*3oT1gJyHKKTq8W_ZYEMI7g.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="0b9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要放大地图，您需要点击<strong class="lb iu">全景缩放</strong>按钮(左侧按钮)，然后使用鼠标滚轮放大/缩小地图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi po"><img src="../Images/8a8728f3425e9858b680bea9180d0509.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kgqdp-6Zeeyrf6cGpmS3CQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="8805" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要在将鼠标悬停在烛台上时显示工具提示，请添加以下粗体语句:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="1148" class="of ne it ob b gy og oh l oi oj">from bqplot import pyplot as plt<br/><strong class="ob iu">from bqplot import Tooltip</strong></span><span id="6cd1" class="of ne it ob b gy ok oh l oi oj">fig = plt.figure(title = "GOOG 2020")<br/>fig.layout.width = "750px"</span><span id="5702" class="of ne it ob b gy ok oh l oi oj"><strong class="ob iu">tool_tip = Tooltip(fields=['open','high','low','close'],<br/>                   show_labels = True)</strong></span><span id="fe1b" class="of ne it ob b gy ok oh l oi oj">ohlc = plt.ohlc(x = df.index, <br/>                y = df[["Open","High","Low","Close"]],<br/>                marker = "candle", <br/>                stroke = "black",<br/>                <strong class="ob iu">tooltip = tool_tip</strong>)</span><span id="65e7" class="of ne it ob b gy ok oh l oi oj">ohlc.colors=["lightgreen", "red"]</span><span id="a14d" class="of ne it ob b gy ok oh l oi oj">plt.plot(x = df.index, y = df['Close'])<br/>plt.xlabel("Date")<br/>plt.show()</span></pre><blockquote class="ou ov ow"><p id="0962" class="kz la mn lb b lc ld ju le lf lg jx lh ox lj lk ll oy ln lo lp oz lr ls lt lu im bi translated">注意，对于传递到<code class="fe on oo op ob b">Tooltip</code>类的<code class="fe on oo op ob b">fields</code>参数中的项目，它们必须是小写的。</p></blockquote><p id="75bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你悬停在烛台上时，工具提示会弹出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pp"><img src="../Images/6c70957978e6a4e929c70dc8864804d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*HNb4_KimScDSD8L8YJY7fg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><h1 id="8940" class="nd ne it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">摘要</h1><p id="abe5" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">我希望这篇文章为您提供了一些显示股票数据的蜡烛图的选项。就我个人而言，我最喜欢的是袖扣，因为它可以很容易地为你的情节添加额外的图表。然而，如果您想要更好地控制绘图的外观，matplotlib仍然是一个不错的选择，尽管需要更多的工作。</p><div class="lv lw gp gr lx ly"><a href="https://weimenglee.medium.com/membership" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">加入媒介与我的介绍链接-李伟孟</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">weimenglee.medium.com</p></div></div><div class="mh l"><div class="pq l mj mk ml mh mm ks ly"/></div></div></a></div></div></div>    
</body>
</html>