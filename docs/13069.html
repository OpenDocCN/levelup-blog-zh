<html>
<head>
<title>Build a Toast Notification Component with React and TypeScript.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React和TypeScript构建一个Toast通知组件。</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/build-a-toast-notification-component-with-react-and-typescript-5bc67d9b96b0?source=collection_archive---------2-----------------------#2022-08-04">https://levelup.gitconnected.com/build-a-toast-notification-component-with-react-and-typescript-5bc67d9b96b0?source=collection_archive---------2-----------------------#2022-08-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/63233f934b61af65a1f920f41de2070f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mr_VmfhZbqCHeRJg_UEqMw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">带有文本“如何创建Toast通知”的Toast通知示例</figcaption></figure><p id="487c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Toast是web应用程序的一个常用组件，用于提供与用户操作相关的反馈。这些弹出窗口是非破坏性元素，位于屏幕底部。根据实现的不同，可以忽略这个元素的可见性。然而，它通常带有自动隐藏机制，在特定时间间隔后触发。</p><p id="26f2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">根据您的需要，各种组件库已经提供了复杂程度更高的Toast元素。让我们创建一个轻量级和可访问的Toast系统，它可以在您的定制组件库中使用。</p></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h1 id="82fa" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">要求</h1><p id="e2b7" class="pw-post-body-paragraph kc kd iq ke b kf mf kh ki kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz ij bi translated">我们的组件将解决三个主要的工程问题。</p><ol class=""><li id="6326" class="mk ml iq ke b kf kg kj kk kn mm kr mn kv mo kz mp mq mr ms bi translated"><strong class="ke ir">渲染</strong> —组件应该能够在不需要手动放置DOM的情况下进行渲染。因此，迎合了开发者的体验。</li><li id="8ea3" class="mk ml iq ke b kf mt kj mu kn mv kr mw kv mx kz mp mq mr ms bi translated"><strong class="ke ir">显示</strong> — Toast应该从react组件树中的任何地方触发。还应该导出一个显示和隐藏元素的函数。</li><li id="765d" class="mk ml iq ke b kf mt kj mu kn mv kr mw kv mx kz mp mq mr ms bi translated"><strong class="ke ir">隐藏</strong> —当组件可见时，它应该在特定间隔后自动隐藏。如果光标放在顶部，该间隔可以中断。</li></ol><p id="9a25" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">通过很好地定义我们的需求，我们可以开始为我们的需求构建正确的解决方案。</p></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h1 id="730b" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">履行</h1><blockquote class="my"><p id="bdf9" class="mz na iq bd nb nc nd ne nf ng nh kz dk translated">以下实现不包括同时呈现的多个祝酒词。如果你对这样的话题感兴趣，请留下评论。</p></blockquote><p id="b5f1" class="pw-post-body-paragraph kc kd iq ke b kf ni kh ki kj nj kl km kn nk kp kq kr nl kt ku kv nm kx ky kz ij bi translated">让我们定义一组适用于我们的吐司的核心CSS样式。对于我们的系统，我们不会定义所有可能的位置属性(底部中心、底部右侧等。).相反，我们将把组件放在视口的左下方。</p><figure class="nn no np nq gt jr"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="bc14" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们使用值为<code class="fe nt nu nv nw b">transform</code>的CSS属性<code class="fe nt nu nv nw b">will-change</code>来预先通知浏览器发生的动画。选择<code class="fe nt nu nv nw b">transform</code>而不是动画<code class="fe nt nu nv nw b">bottom</code>属性是有意的。</p><p id="db1d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">通过这样做，我们主动避免了昂贵的布局计算。<a class="nx ny ep" href="https://medium.com/u/72fdaedf1f27?source=post_page-----5bc67d9b96b0--------------------------------" rel="noopener" target="_blank"> Matthew Costello </a>有一篇关于CSS布局&amp;复合属性差异的优秀<a class="ae nz" href="https://medium.com/@matthew.costello/frontend-web-performance-the-essentials-0-61fea500b180" rel="noopener">文章。</a></p><p id="32ee" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">让我们分别定义两个利用<code class="fe nt nu nv nw b">ReactDOM.render</code> &amp; <code class="fe nt nu nv nw b">ReactDOM.unmountComponentAtNode</code>的函数<code class="fe nt nu nv nw b">ShowToast</code> &amp; <code class="fe nt nu nv nw b">HideToast</code>。这些函数满足上一节中概述的前两个要求。</p><figure class="nn no np nq gt jr"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="7bff" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe nt nu nv nw b">ShowToast</code>函数转发定义组件行为的属性。带有HTML id属性的第二个参数是将我们的Toast组件放在DOM树中的任何位置。如果没有找到元素的id，我们通过编程创建一个<code class="fe nt nu nv nw b">div</code>并将其附加在<code class="fe nt nu nv nw b">body</code>的底部。</p><figure class="nn no np nq gt jr"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="8a7e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们已经创建了一个组件生命周期来满足我们的最终需求。一旦组件安装完毕，我们触发一个<code class="fe nt nu nv nw b">setTimeout</code>，它将在一个特定的时间框架(默认为4.5秒)后自动删除该元素。当光标进入我们的目标时，生命周期可以被中断。当光标离开时，它将继续运行，从而重新开始生命周期。</p><figure class="nn no np nq gt jr gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/4b0e62aa1a43d7293e62690954f097a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*dWDeWGtc23w8YKR3Iwojmg.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">控制台日志展示了当光标进入和离开我们的目标元素时调用的显式函数。</figcaption></figure><p id="b676" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">元素拥有所有相关的鼠标事件监听器。就可访问性而言，HTML元素有一个隐式的<code class="fe nt nu nv nw b">role=”status”</code>，表示用户操作的结果。为了获得更广泛的兼容性，建议显式添加角色属性。</p><p id="cc35" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">最后，我们使用的是<code class="fe nt nu nv nw b">window</code>名称与<code class="fe nt nu nv nw b">setTimeout</code>和<code class="fe nt nu nv nw b">clearTimeout</code>名称的间隔变体。如果需要服务器端呈现，建议使用NodeJS替代方案。</p><figure class="nn no np nq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ob"><img src="../Images/73c3d824329dd269db42b98086d17e78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*TY6aT_UKqO_P3ghcs8JSlw.gif"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">带有文本“Trigger”的按钮，当单击它时显示我们的Toast组件。4.5秒后吐司隐藏。</figcaption></figure></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h1 id="affa" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">结论</h1><p id="7e8b" class="pw-post-body-paragraph kc kd iq ke b kf mf kh ki kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz ij bi translated">请随意修改上述实现以符合您的规范。您可以找到本项目中使用的参考资料的链接，以及下面几个令人惊叹的开源库。</p><p id="1912" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">希望这篇文章对你自己的React项目有所帮助！</p></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h1 id="9c5b" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">参考</h1><ul class=""><li id="2fd3" class="mk ml iq ke b kf mf kj mg kn oc kr od kv oe kz of mq mr ms bi translated"><a class="ae nz" href="https://web.dev/building-a-toast-component/" rel="noopener ugc nofollow" target="_blank">构建烤面包组件</a></li><li id="d2cf" class="mk ml iq ke b kf mt kj mu kn mv kr mw kv mx kz of mq mr ms bi translated"><a class="ae nz" href="https://www.scottohara.me/blog/2019/07/10/the-output-element.html" rel="noopener ugc nofollow" target="_blank">输出:HTML的原生live region元素</a></li><li id="59a6" class="mk ml iq ke b kf mt kj mu kn mv kr mw kv mx kz of mq mr ms bi translated"><a class="ae nz" href="https://www.thecodeteacher.com/question/16465/TypeScript---use-correct-version-of-setTimeout-(node-vs-window)" rel="noopener ugc nofollow" target="_blank"> Typescript —使用setTimeout(节点vs窗口)的正确版本</a></li></ul></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h1 id="8779" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">开源toast库</h1><ul class=""><li id="2438" class="mk ml iq ke b kf mf kj mg kn oc kr od kv oe kz of mq mr ms bi translated"><a class="ae nz" href="https://react-hot-toast.com" rel="noopener ugc nofollow" target="_blank"> react-hot-toast —镇上最好的react通知</a></li><li id="186d" class="mk ml iq ke b kf mt kj mu kn mv kr mw kv mx kz of mq mr ms bi translated"><a class="ae nz" href="https://www.npmjs.com/package/react-toastify" rel="noopener ugc nofollow" target="_blank">反应——干杯——NPM</a></li></ul></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h1 id="fa05" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">请与他人分享这篇文章，并给予一些掌声👏🏻在下面。</h1><p id="659d" class="pw-post-body-paragraph kc kd iq ke b kf mf kh ki kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz ij bi translated"><em class="og">通过鼓掌和关注，你可以帮助其他人发现这些内容，并激发更多关于可访问性、React、JavaScript和TypeScript的文章的写作！</em></p></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h1 id="e300" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">分级编码</h1><p id="3971" class="pw-post-body-paragraph kc kd iq ke b kf mf kh ki kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz ij bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="7eb2" class="mk ml iq ke b kf kg kj kk kn mm kr mn kv mo kz of mq mr ms bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="d2aa" class="mk ml iq ke b kf mt kj mu kn mv kr mw kv mx kz of mq mr ms bi translated">📰查看<a class="ae nz" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="1ec9" class="mk ml iq ke b kf mt kj mu kn mv kr mw kv mx kz of mq mr ms bi translated">🔔关注我们:<a class="ae nz" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae nz" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae nz" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="8987" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">🚀👉<a class="ae nz" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>