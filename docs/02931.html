<html>
<head>
<title>Taming your inner Javascript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">驯服你内心的Javascript</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/taming-your-inner-javascript-1d48c1bd365a?source=collection_archive---------22-----------------------#2020-04-10">https://levelup.gitconnected.com/taming-your-inner-javascript-1d48c1bd365a?source=collection_archive---------22-----------------------#2020-04-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="7ec2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如何控制前端项目中的代码库</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/a3c47fbb60e00c899311d7e88fe20b92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LVR7YyWWi4at1GJCs9VtBw.jpeg"/></div></div></figure><h2 id="98b3" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">TLDR；</h2><blockquote class="lt lu lv"><p id="b674" class="jq jr lw js b jt ju jv jw jx jy jz ka lx kc kd ke ly kg kh ki lz kk kl km kn im bi translated">用预提交挂钩检查代码样式。用预推挂钩检查代码覆盖率。务实一点，把感情放在一边。</p></blockquote><h1 id="143c" class="ma lb it bd lc mb mc md lf me mf mg li mh mi mj ll mk ml mm lo mn mo mp lr mq bi translated">问题是</h1><p id="60a0" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">Javascript是最受欢迎的语言之一，在调查中有60%以上的市场份额。作为一门语言，它非常灵活，允许许多不同的编码风格和方法，但这是有代价的。即使你拿了打字稿之类的东西，也有很多需要解释的地方。</p><p id="c417" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你不够小心，项目在loc、依赖项和人力资源中增长，代码库最终会变得一团糟。在一个项目中，不止一种编码风格是很常见的，每个新人做的事情都会略有不同。</p><p id="38ab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是灾难的最佳配方，我认为最有问题的方面是非常低的团队士气，因此是次优的产品。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mx"><img src="../Images/19926b0973101af971d71304aed3f251.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6u51C_pl-UH3X3CbggmCjA.png"/></div></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated">从https://xkcd.com/1513/<a class="ae mw" href="https://xkcd.com/1513/" rel="noopener ugc nofollow" target="_blank">借来的</a></figcaption></figure><h1 id="1e4b" class="ma lb it bd lc mb mc md lf me mf mg li mh mi mj ll mk ml mm lo mn mo mp lr mq bi translated">解决方案</h1><p id="7165" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">一个非常简单而优雅的方法是<strong class="js iu">用GIT钩子</strong>强制代码风格和代码覆盖率。这种方法足够灵活，因为任何项目都可以适应这些原则，而不管其背后的技术栈。重要的目标是我们最终想要降低认知负荷，提高质量和可维护性，并最终让每个人都更快乐。</p><p id="b6a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最受欢迎的选择是<a class="ae mw" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> ESLint </a>搭配<a class="ae mw" href="https://prettier.io/" rel="noopener ugc nofollow" target="_blank">更漂亮的</a>。已经有很多文章介绍了如何配置这些工具，所以我现在不再重点讨论这个话题。需要记住的是<strong class="js iu">结合GIT钩子</strong>使用这些工具。我喜欢在我们自己的项目中使用的一个推荐模式是<strong class="js iu">使用一个预提交和一个预推挂钩</strong>。</p><h2 id="77b9" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">提交前挂钩</h2><p id="3d1f" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">在这里，您应该检查进入您的代码库的所有内容是否都是正确的。在package.json中设置一个<strong class="js iu"> lint:fix </strong>脚本，每当有人想要添加一个提交时，就会触发这个脚本。它将自动重新格式化，并检查所有符合约定标准的内容。</p><p id="84f8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">自动化通过<a class="ae mw" href="https://github.com/typicode/husky" rel="noopener ugc nofollow" target="_blank"> Husky </a>和<a class="ae mw" href="https://github.com/okonet/lint-staged" rel="noopener ugc nofollow" target="_blank"> Lint Staged </a>完成。只需将它们添加到您的项目中，并根据下面的代码片段进行配置。不要忘记设置您的IDE在每次保存文件时运行lint:fix。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nc nd l"/></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated"><a class="ae mw" href="https://gist.github.com/filipcieker/9185d14ee5d1e1d12e20b841a6cf15fc" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/filipcieker/9185d 14 ee 5 D1 E1 d 12 e 20 b 841 a6 cf 15 fc</a></figcaption></figure><h2 id="6495" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">预推钩</h2><p id="8422" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">您应该检查您的代码覆盖率是否符合标准。在预提交钩子中检查这一点可能会太死板，会让很多人抱怨。另一方面，等待云中的管道告诉某人他没有为新功能编写足够的测试是浪费时间和资源。</p><p id="953b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">缩短反馈周期，并在每次推送之前运行单元测试。我通常通过<a class="ae mw" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank"> Jest </a>和一个定制的测试脚本定义有一个默认的测试观察器，这与我的package.json中的CI/CD管道中发生的事情完全相同。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nc nd l"/></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated"><a class="ae mw" href="https://gist.github.com/filipcieker/9185d14ee5d1e1d12e20b841a6cf15fc" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/filipcieker/9185d 14 ee 5 D1 E1 d 12 e 20 b 841 a6 cf 15 fc</a></figcaption></figure><h1 id="3d09" class="ma lb it bd lc mb mc md lf me mf mg li mh mi mj ll mk ml mm lo mn mo mp lr mq bi translated">结论</h1><p id="ab8e" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">使用这些原则时，我遇到的最大问题是自我。我的自我。我在使用类似于<a class="ae mw" href="https://www.sonarqube.org/" rel="noopener ugc nofollow" target="_blank">sonar cube</a>的工具时也遇到了同样的问题。他们只是对我们开发人员所犯的错误非常诚实。</p><p id="dfe6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">经理和销售部门会告诉你跳过技术和流程投资。但你永远不要忘记，从长远来看，它总会回来咬你。</p><p id="382d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">永远不要退而求其次，而是要务实。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/2ce240e4d5f4bf4aa4a0812e2d827654.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*9nMBMt-OugnruBr_M-WuEQ.png"/></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated">借自<a class="ae mw" href="https://xkcd.com/927/" rel="noopener ugc nofollow" target="_blank">https://xkcd.com/927/</a></figcaption></figure><blockquote class="nf"><p id="9332" class="ng nh it bd ni nj nk nl nm nn no kn dk translated">让“不核实”的旗帜在你痛苦和绝望的时候指引你。</p></blockquote></div></div>    
</body>
</html>