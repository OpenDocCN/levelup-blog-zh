<html>
<head>
<title>When and why to use TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">何时以及为何使用TypeScript</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/when-and-why-to-use-typescript-1bab96dd69e1?source=collection_archive---------12-----------------------#2020-07-15">https://levelup.gitconnected.com/when-and-why-to-use-typescript-1bab96dd69e1?source=collection_archive---------12-----------------------#2020-07-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3df00b2c50c65b465b58983c1de8f0f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6UUH9pzTvpcf2ifGXbO3ww.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">共享知识对开发团队至关重要。照片:伊斯托克</figcaption></figure><p id="cc76" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi la translated">过去五年来，avaScript一直是我的主要编程语言。我喜欢用JavaScript编程，直到最近，我还不知道为什么要放弃它。我不明白为什么我要牺牲JavaScript带来的速度和灵活性。</p><p id="d69e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我喜欢JS的动态特性。它让我能够快速实施新的解决方案。我的想法是，TypeScript增加的类型声明和类型检查会使我速度更慢，效率更低。</p><p id="6992" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">最近我的观点发生了变化，在我最近的项目中，我开始理解TypeScript的好处。</p><p id="8d8c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在本文中，我解释了为什么我改变了对TypeScript的看法，以及为什么我认为许多项目将从使用它而不是普通的JavaScript中受益。</p><h1 id="46ee" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated"><strong class="ak">单干</strong></h1><p id="0893" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">我认为JavaScript在单独工作时是足够的，但是对于团队来说是次优的。</p><p id="e510" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">JavaScript适合快速开发。当独自工作时，如果代码对其他人来说很难理解，那么<em class="mm">也没关系。作为代码库的唯一作者，您很有可能能够很好地理解它并对其进行维护和增强。</em></p><p id="4ecd" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">JavaScript允许快速开发，部分是因为它不需要编写任何类型或接口。你没有“浪费”任何时间来写这个打字稿。</p><p id="e257" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在过去，我已经用普通的JavaScript实现了相当大的代码库，并且我已经维护它们很多年了。这很有效，因为我是唯一一个参与这些项目的人。</p><h1 id="13f4" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated"><strong class="ak">团队合作</strong></h1><p id="3084" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">我最近开始开发一个巨大的JavaScript代码库，它是由一个开发人员用了几年时间创作的。我的任务是对它做一个小小的改进，但是我没能做到，因为对我来说理解代码中发生的事情太难了。</p><p id="4986" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">显然，最初的开发人员仍然能够对它进行修改，但对我来说，代码没有多大意义。编码风格，或者说缺乏编码风格，让我头疼。</p><p id="8457" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们决定开始迁移项目以使用TypeScript。我们确定了从类型注释中受益最大的两个领域:</p><ul class=""><li id="6de9" class="mn mo iq ke b kf kg kj kk kn mp kr mq kv mr kz ms mt mu mv bi translated">所有消息类型的接口。该项目使用一个消息传递系统，在模块和函数之间发送和接收几种不同类型的消息。</li><li id="62ad" class="mn mo iq ke b kf mw kj mx kn my kr mz kv na kz ms mt mu mv bi translated">所有数据库类型的接口。就像消息对象一样，这些DB记录也在模块和函数之间传递。</li></ul><p id="a048" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们添加了这些接口，并继续为所有在签名中包含这些对象作为参数或返回值的函数添加类型。正是这些类型声明使得代码更容易理解。从类型声明中，您可以立即看到该函数接受了哪些数据。接口描述了所有复杂参数的结构和类型。不需要检查调用代码、函数实现或单元测试来找出这些复杂对象是由哪些字段组成的。</p><p id="fa39" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">当你在团队中工作时，对代码的共同理解变得<em class="mm">至关重要</em>。增加的类型信息带来了更多的理解。</strong></p><h1 id="42df" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated"><strong class="ak">更少的bug</strong></h1><p id="72da" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">类型信息也由TypeScript编译器使用和检查。编译器会告诉你什么时候你的代码不是类型安全的。</p><p id="4069" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这是类型检查带来的典型好处:<em class="mm">在开发过程的早期捕获bugs】。您将在开发过程中发现并修复bug，而不是在您的应用程序处于生产阶段时让您的客户发现它们。</em></p><p id="daa8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae nb" href="https://www.reddit.com/r/typescript/comments/c079bt/airbnb_think_38_of_their_bugs_could_have_been/" rel="noopener ugc nofollow" target="_blank"> Airbnb报告称</a>通过在开发过程中添加TypeScript，bug<strong class="ke ir">减少了</strong>38%。</p><p id="9caa" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">TypeScript编译器有一个<em class="mm"> _strict选项_ </em>，它支持更严格的类型检查。启用严格选项后，它将标记出更多的潜在问题。</p><blockquote class="nc nd ne"><p id="3d63" class="kc kd mm ke b kf kg kh ki kj kk kl km nf ko kp kq ng ks kt ku nh kw kx ky kz ij bi translated"><em class="iq">“如果因为编译器警告，使用TypeScript比使用普通JavaScript更好，为什么你不想把编译器警告调到10呢？”— </em> <a class="ae nb" href="https://www.stevefenton.co.uk/2018/01/embracing-typescript-strict-mode/" rel="noopener ugc nofollow" target="_blank"> <em class="iq">拥抱打字稿严格模式</em> </a> <em class="iq"> —史蒂夫·芬顿</em></p></blockquote><p id="f5f1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在迁移现有JS项目以使用TypeScript时，最好不要使用严格模式。在我们的TypeScript迁移项目中，我们已经禁用了严格检查，这使得我们可以轻松地通过构建和运行程序。如果我们决定启用严格检查，在编译器满意地生成一个可运行的程序之前，我们还有更多的工作要做。</p><h1 id="c8d8" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated"><strong class="ak">使用打字稿的成本</strong></h1><p id="9ddd" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">TypeScript不是免费的。使用它有一些相关的成本:</p><ul class=""><li id="8dfa" class="mn mo iq ke b kf kg kj kk kn mp kr mq kv mr kz ms mt mu mv bi translated">编写类型注释并维护它们需要付出努力</li><li id="5bac" class="mn mo iq ke b kf mw kj mx kn my kr mz kv na kz ms mt mu mv bi translated">类型注释增加了代码库的混乱</li></ul><p id="e1be" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">应该注意的是，我们的行业正在使用几种技术来捕捉bug。Typescript及其静态类型检查只是这些技术中的一种。以下是一些推荐的实践:测试驱动开发(TDD)、结对编程、代码评审、设计评审和林挺。</p><p id="5aaa" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果您使用TDD和代码审查，您可能已经在早期有效地恢复了bug。在这种情况下，添加TypeScript不会对提高质量产生如此显著的影响。您应该考虑您的情况，并尝试确定TypeScript的好处是否会超过成本。</p><h1 id="3013" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated"><strong class="ak">面向对象与函数式编程</strong></h1><p id="5af0" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">在过去的两年中，我一直在学习在我的JS项目中使用函数式编程。我有点担心TypeScript不太适合函数式编程。我的无知想法是，TypeScript会使我的代码类似于Java，其中一切都基于类，一切都必须是对象。</p><p id="d0e4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">事实证明，我的担心是没有道理的。TypeScript构建在JavaScript之上，我可以用JavaScript做的一切也可以在TypeScript中完成。我没有被强迫使用类，或者为所有变量声明类型。键入是可选的，可以在最合适的地方添加。</p><h1 id="3d41" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated"><strong class="ak">结论</strong></h1><p id="2ba9" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated"><strong class="ke ir">什么时候使用TypeScript？</strong></p><p id="28a4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">当满足以下一些条件时，您将从TypeScript中受益:</p><ul class=""><li id="4222" class="mn mo iq ke b kf kg kj kk kn mp kr mq kv mr kz ms mt mu mv bi translated">您有一个丰富的数据模型，其中数据对象在模块和函数之间传递。</li><li id="9175" class="mn mo iq ke b kf mw kj mx kn my kr mz kv na kz ms mt mu mv bi translated">您有多个开发人员在该项目中工作。</li><li id="cb55" class="mn mo iq ke b kf mw kj mx kn my kr mz kv na kz ms mt mu mv bi translated">你正在开发一个开源库。库需要类型脚本类型，以便人们可以使用他们的类型脚本代码库。</li></ul><p id="4da3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">为什么要用TypeScript？</strong></p><ul class=""><li id="e691" class="mn mo iq ke b kf kg kj kk kn mp kr mq kv mr kz ms mt mu mv bi translated">类型检查可以及早发现错误。</li><li id="56cc" class="mn mo iq ke b kf mw kj mx kn my kr mz kv na kz ms mt mu mv bi translated">它通过增加代码的可理解性和可维护性来支持团队合作。由于同样的原因，它也使得新的团队成员更快地适应环境。</li></ul><p id="6f56" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">什么时候坚持使用JavaScript比较好？</strong></p><p id="7efc" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">有些情况下，我不会使用TypeScript，而是使用普通的JavaScript:</p><ul class=""><li id="e9ed" class="mn mo iq ke b kf kg kj kk kn mp kr mq kv mr kz ms mt mu mv bi translated">你有使用TDD和代码评审的JavaScript开发经验。</li><li id="e5f6" class="mn mo iq ke b kf mw kj mx kn my kr mz kv na kz ms mt mu mv bi translated">用JavaScript开发原型很快。</li><li id="2ab8" class="mn mo iq ke b kf mw kj mx kn my kr mz kv na kz ms mt mu mv bi translated">一次性脚本，如迁移脚本等。，非常适合用JavaScript来完成。</li></ul></div></div>    
</body>
</html>