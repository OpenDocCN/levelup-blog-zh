<html>
<head>
<title>CI Pipelines for Python Projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python项目的CI管道</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/ci-pipelines-for-python-projects-9ac2830d2e38?source=collection_archive---------2-----------------------#2020-07-30">https://levelup.gitconnected.com/ci-pipelines-for-python-projects-9ac2830d2e38?source=collection_archive---------2-----------------------#2020-07-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5f17" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">什么是持续集成管道，我如何使用它？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/cbccb24ce8452e4a81fdc12296844216.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U6Uzx3QmW8qVT72x"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">尽可能自动化以节省时间，专注于复杂的事情。莱尼·屈尼在Unsplash<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拍摄的照片</a></figcaption></figure><p id="4afc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">持续集成是定期将代码与主要开发分支集成的实践。当您查看像SciPy这样的大型项目时，您会发现这样做的必要性，这些项目目前有<a class="ae ky" href="https://github.com/scipy/scipy/pulls" rel="noopener ugc nofollow" target="_blank"> 274个开放拉取请求</a> (PRs)。这意味着要添加274个不同的新功能、错误修复或其他改进。维护人员可能不认识贡献者本人。虽然没有办法查看促成的更改，但是有一个好的解决方案可以确保事情不会严重出错:单元测试。</p><p id="8c01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为所有这些拉请求运行测试套件需要花费相当多的时间。维护人员越快发现PR是否有问题以及问题是什么，就越好。</p><p id="2da2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">解决方案是持续集成管道。CI管道是自动执行的代码。通常，流水线中有几个步骤，比如(1)用pytest进行单元测试(2)用flake8或pylint等工具进行林挺(3)用mypy进行类型检查(4)手工评审。有一个自动生成的注释，让维护者和贡献者知道管道步骤的状态。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/0e5e6dee9d0701be206de8f9434cc220.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9zpCoAhX9Zr8f-NiSsm2gg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Github Actions、Travis、Azure Pipelines、Circle CI给出的自动反馈。有些步骤失败了，有些成功了。这些步骤都有链接，以便维护人员可以查看细节。马丁·托马斯截图。</figcaption></figure><p id="91a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下一篇文章中，我将向您展示如何使用各种CI服务(如Github Actions、Azure Pipelines、TravisCI和CircleCI)自动运行单元测试。</p><p id="7871" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我展示了可以使用纯Python的相当简单的例子。如果您需要安装其他依赖项(例如C库)，那么您需要创建一个Docker映像。其余保持不变。如果你想开始使用Docker，我有<a class="ae ky" href="https://makeitnew.io/docker-ab1a6bddf389" rel="noopener ugc nofollow" target="_blank">一篇文章给你</a>。</p><h1 id="615f" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">特拉维斯·CI</h1><p id="208f" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Travis CI 成立于2011年，是我使用的第一个CI服务。它通过一个<code class="fe mt mu mv mw b">.travis.yml</code>文件进行配置</p><p id="7c3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我几乎总是在下面的脚本中使用它，只是略有不同:</p><p id="1548" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mt mu mv mw b"><a class="ae ky" href="https://github.com/tox-dev/tox-travis" rel="noopener ugc nofollow" target="_blank">tox-travis</a></code>套餐超赞。我刚确认了毒理检验有效，特拉维斯也有效。如果你想重温一下tox，看看本系列的前一篇文章。</p><p id="80b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个配置文件看起来肯定没有Github Actions那么可怕。Travis的界面也很漂亮干净:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/c3331bea9b4e82709cddc4ba01ffc754.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xjcf1Ls3rqmW20Mad4lWbQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">特拉维斯的网页界面。马丁·托马斯截图</figcaption></figure><h1 id="68a0" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">Github操作</h1><p id="63a5" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated"><a class="ae ky" href="https://github.com/features/actions" rel="noopener ugc nofollow" target="_blank"> Github Actions </a>是集成到Github中的CI/CD解决方案。它于2019年11月发布，因此是最近发布的服务。它相对于其他产品的主要优势是与Github的集成。您可以通过单击提供的选项卡来创建新的操作:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/c8ba0bccd942463c5d1ac14d41320692.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4-PqFmEYlaegOMe-qjUaxw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">马丁·托马斯截图</figcaption></figure><p id="2d8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认值是可以的，但是您可能想要调整文件中的一些内容。例如，在我的私人项目中，我不支持任何比3.6更老的Python版本。我还想从我的<code class="fe mt mu mv mw b">requirements.txt</code>安装依赖项。如果你想调整文件名，你可以这样做。看起来不错的时候提交。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/f1db778bfe14132a4161899316e2a0a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BecTMSolaiAKHd7HrhNuHg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">马丁·托马斯截图</figcaption></figure><p id="70e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，您可以看到一个漂亮的绿色复选标记，表示运行成功。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/6c542b767bd282a5abcb4342b68f7eaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kkhi8-RI0eP-z83sSQvTcQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">马丁·托马斯截图</figcaption></figure><p id="fdb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您也可以单击“操作”选项卡并检查上次运行:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/7e4abe73fcf1e6933a23e66d6436f53e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cd9PHrlEZqTixtENL1zwzQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">马丁·托马斯截图</figcaption></figure><h1 id="1798" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">切尔莱西</h1><p id="9b0f" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">CircleCI是CI渠道的另一种可能性。他们有一个叫做<a class="ae ky" href="https://circleci.com/orbs/" rel="noopener ugc nofollow" target="_blank"> Orbs </a>的概念，这是一组可重用的配置。这让我想起了一个Docker基础图片。</p><p id="b7f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python orb在Github的<a class="ae ky" href="https://github.com/circleci-public/python-orb" rel="noopener ugc nofollow" target="_blank">circle ci-Public/Python-orb</a>上。有趣的部分在<code class="fe mt mu mv mw b">src/commands</code>。CircleCI有一个Python orb的<a class="ae ky" href="https://circleci.com/orbs/registry/orb/circleci/python" rel="noopener ugc nofollow" target="_blank">示例页面</a>和一个<a class="ae ky" href="https://circleci.com/docs/2.0/language-python/" rel="noopener ugc nofollow" target="_blank"> Python语言概述</a>。</p><p id="c131" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我为<code class="fe mt mu mv mw b"><a class="ae ky" href="https://github.com/MartinThoma/mpu" rel="noopener ugc nofollow" target="_blank">mpu</a></code>使用的配置只使用了<code class="fe mt mu mv mw b">checkout</code>步骤。其余的是手动定义的。以下是在<code class="fe mt mu mv mw b">.circleci/config.yml</code>中:</p><pre class="kj kk kl km gt nc mw nd ne aw nf bi"><span id="58ac" class="ng lx it mw b gy nh ni l nj nk">version: 2.1</span><span id="6380" class="ng lx it mw b gy nl ni l nj nk">orbs:<br/>  python: circleci/python@0.2.1</span><span id="4808" class="ng lx it mw b gy nl ni l nj nk">jobs:<br/>  build-and-test:<br/>    executor: python/default<br/>    steps:<br/>      - checkout<br/>      - run:<br/>          command: pip install -r requirements-dev.txt<br/>          name: Install Test requirements-dev<br/>      - run:<br/>          command: pip install -e .[all]<br/>          name: Install Pacakge<br/>      - run:<br/>          command: pytest<br/>          name: Test</span><span id="8107" class="ng lx it mw b gy nl ni l nj nk">workflows:<br/>  main:<br/>    jobs:<br/>      - build-and-test</span></pre><p id="1ff5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CircleCI网络界面看起来漂亮而干净:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/427776e624fdaa0c02cbadec6bfef391.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mLghCu81atNCvTEoq0qdEw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">CircleCI接口。马丁·托马斯截图</figcaption></figure><p id="b6da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在mpu中添加了CircleCI check，当然，徽章不应该丢失:</p><pre class="kj kk kl km gt nc mw nd ne aw nf bi"><span id="7e25" class="ng lx it mw b gy nh ni l nj nk">[![MartinThoma](<a class="ae ky" href="https://circleci.com/gh/MartinThoma/mpu.svg?style=shield)](https://app.circleci.com/pipelines/github/MartinThoma/mpu)" rel="noopener ugc nofollow" target="_blank">https://circleci.com/gh/MartinThoma/mpu.svg?style=shield)](https://app.circleci.com/pipelines/github/MartinThoma/mpu)</a></span></pre><h1 id="6ba7" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">Gitlab CI</h1><p id="4afa" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated"><a class="ae ky" href="https://docs.gitlab.com/ee/ci/yaml/README.html" rel="noopener ugc nofollow" target="_blank"> Gitlab CI </a>类似于Github Actions，因为它也被集成到平台中。您使用一个<code class="fe mt mu mv mw b">.gitlab-ci.yml</code>文件来配置它。然而，我更喜欢Gitlab CI，因为它看起来更干净。</p><p id="4d8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们以棉绒<a class="ae ky" href="https://gitlab.com/pycqa/flake8" rel="noopener ugc nofollow" target="_blank">薄片8 </a>为例。他们的<code class="fe mt mu mv mw b"><a class="ae ky" href="https://gitlab.com/pycqa/flake8/-/blob/master/.gitlab-ci.yml" rel="noopener ugc nofollow" target="_blank">.gitlab-ci.yml</a></code>有点长，所以我把它缩短到测试阶段。它们也有构建和发布阶段:</p><p id="8970" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在web界面中，它看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/806860b9f5947b8462c2f3861e8774b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wiAx4GrNZNZ057GzjnjmFA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">GitLab的web界面。马丁·托马斯截图。</figcaption></figure><p id="04e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果管道失败，您还可以勾选存储库的“设置”部分中的复选框来防止合并。你应该去做。</p><h1 id="4802" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">天蓝色管道</h1><p id="5a61" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Azure是微软的云平台，类似于亚马逊的AWS或谷歌的GCP。与所有这些大型云平台一样，事情过于复杂。比不上特拉维斯的轻松。</p><p id="b8e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不喜欢Azure Pipelines的很多地方，尤其是它需要许可才能进行代码更改。这主要是作为一个方便的特性，这样它可以创建配置文件<code class="fe mt mu mv mw b">azure-pipelines.yml</code>。我讨厌这样，因为CI解决方案不应该触及我的代码。它应该只是读它。但由于Github被微软收购，Azure Pipelines也归微软所有，我猜给它访问权不会有太大的坏处🤷</p><p id="cb9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Azure管道有一个杀手锏:你可以在Windows机器上执行东西。让我们进入到达那里的最短路径:</p><ol class=""><li id="b298" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated">转到<a class="ae ky" href="http://azure.microsoft.com/services/devops/pipelines/" rel="noopener ugc nofollow" target="_blank">azure.microsoft.com/services/devops/pipelines</a></li><li id="1399" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">创建项目</li><li id="34d0" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">点击管道-&gt;创建管道-&gt; Github YAML -&gt; Python包</li><li id="fe24" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">使用<code class="fe mt mu mv mw b">vmImage: 'VS2017-Win2016'</code></li></ol><p id="9ba7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将在项目根中创建一个<code class="fe mt mu mv mw b">azure-pipelines.yml</code>:</p><pre class="kj kk kl km gt nc mw nd ne aw nf bi"><span id="9850" class="ng lx it mw b gy nh ni l nj nk"># <a class="ae ky" href="https://docs.microsoft.com/azure/devops/pipelines/languages/python" rel="noopener ugc nofollow" target="_blank">https://docs.microsoft.com/azure/devops/pipelines/languages/python</a></span><span id="4654" class="ng lx it mw b gy nl ni l nj nk">trigger:<br/>- master</span><span id="f17f" class="ng lx it mw b gy nl ni l nj nk">pool:<br/>  vmImage: 'VS2017-Win2016'<br/>strategy:<br/>  matrix:<br/>    Python36:<br/>      python.version: '3.6'<br/>    Python37:<br/>      python.version: '3.7'</span><span id="393d" class="ng lx it mw b gy nl ni l nj nk">steps:<br/>- task: UsePythonVersion@0<br/>  inputs:<br/>    versionSpec: '$(python.version)'<br/>  displayName: 'Use Python $(python.version)'</span><span id="f359" class="ng lx it mw b gy nl ni l nj nk">- script: |<br/>    python -m pip install --upgrade pip<br/>    pip install -r requirements-dev.txt<br/>  displayName: 'Install dependencies'</span><span id="8d10" class="ng lx it mw b gy nl ni l nj nk">- script: |<br/>    pip install .[all]<br/>  displayName: 'Install package'</span><span id="2244" class="ng lx it mw b gy nl ni l nj nk">- script: |<br/>    pip install pytest pytest-azurepipelines<br/>    pytest -vv<br/>  displayName: 'pytest'</span></pre><p id="2e03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">管道工作后，我做的第一件事是添加一个项目徽章:</p><pre class="kj kk kl km gt nc mw nd ne aw nf bi"><span id="7523" class="ng lx it mw b gy nh ni l nj nk">[![Build Status](<a class="ae ky" href="https://dev.azure.com/martinthoma/mpu/_apis/build/status/MartinThoma.mpu?branchName=master)](https://dev.azure.com/martinthoma/mpu/_build/latest?definitionId=1&amp;branchName=master)" rel="noopener ugc nofollow" target="_blank">https://dev.azure.com/martinthoma/mpu/_apis/build/status/MartinThoma.mpu?branchName=master)](https://dev.azure.com/martinthoma/mpu/_build/latest?definitionId=1&amp;branchName=master)</a></span></pre><p id="737a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加徽章的主要原因是Azure试图为我创建新帐户。我很难回到主概览页面😢</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/09983f9205ed288bac4957838c06b44f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e9gDg8Ln2S22SmIlrXAIkw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">项目概述页面。马丁·托马斯截图</figcaption></figure><p id="b467" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您单击其中一个失败的作业，您会看到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/ab26dad4690ae1c0dd11caed23a74680.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*45ksdRUm0FFl6jMJP58bWA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">失败的pytest运行。马丁·托马斯截图。</figcaption></figure><h1 id="7c60" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">CI服务比较</h1><p id="ca37" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Azure的独特卖点是可以在Windows机器上运行代码。Github Actions / Gitlab CI的杀手锏是与github.com/git lab的集成。</p><blockquote class="od oe of"><p id="d561" class="kz la og lb b lc ld ju le lf lg jx lh oh lj lk ll oi ln lo lp oj lr ls lt lu im bi translated">编辑:Github动作也可以通过<code class="fe mt mu mv mw b"><em class="it">runs-on: "windows-2019"</em></code> ( <a class="ae ky" href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobsjob_idruns-on" rel="noopener ugc nofollow" target="_blank"> docs </a>，<a class="ae ky" href="https://github.com/domdfcoding/flake8_strftime/blob/master/.github/workflows/python_ci.yml" rel="noopener ugc nofollow" target="_blank">完整示例</a>在Windows上执行</p><p id="8ce9" class="kz la og lb b lc ld ju le lf lg jx lh oh lj lk ll oi ln lo lp oj lr ls lt lu im bi translated">编辑:CircleCI在2019年增加了Windows支持(<a class="ae ky" href="https://circleci.com/build-environments/windows/" rel="noopener ugc nofollow" target="_blank"> docs </a>)并且Travis也提供了Windows支持(<a class="ae ky" href="https://docs.travis-ci.com/user/reference/windows/" rel="noopener ugc nofollow" target="_blank"> docs </a>)。所以我看不出有什么理由再使用Azure管道了。</p></blockquote><p id="1bab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只看<strong class="lb iu"> Web界面</strong>，很喜欢CircleCI，Travis，Gitlab。Github Actions有点超载，我讨厌Azure pipelines，因为我找不到一种简单的方法来访问我的帐户。</p><p id="339d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">配置文件格式</strong>都是YAML。我喜欢大多数服务都有一个文件/文件夹的前导点，这样CI配置在Linux上就隐藏起来了。只有Azure Pipelines希望可见。看配置本身，Travis和Gitlab在我看来最干净。CircleCI提供了我不习惯的独特的“球体”概念——从长远来看，这可能会使事情变得更简单。</p><p id="80f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于CircleCI来说，这些步骤的<strong class="lb iu">执行速度</strong>感觉相当快，但是我没有彻底测试过。</p><p id="2353" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您中断管道以及管道再次修复时，所有提供的CI服务都会发送一封电子邮件。我不确定设置其他<strong class="lb iu">通知</strong>比如松弛消息有多简单。我已经看到了Jenkins和Gitlab的Slack通知。</p><p id="8d51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">到目前为止我还没有提出的一点是<strong class="lb iu">连续交付(CD) </strong>。所有呈现的服务也可以用于CD。你想读一篇专门关于CD的文章吗？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/9e86ec96f4f36765ca01c0ce1cc166e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/1*lR6FvnDWWvUFC_PDuSRx9A.jpeg"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:<a class="ae ky" href="http://geek-and-poke.com/geekandpoke/2010/10/26/geekpokes-list-of-best-practices-today-continuous-integratio.html" rel="noopener ugc nofollow" target="_blank">极客和戳</a></figcaption></figure><h1 id="a594" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">下一步是什么？</h1><p id="83d7" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在这个系列中，我们已经有了:</p><ul class=""><li id="d9d4" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu ol nu nv nw bi translated">第1部分:<a class="ae ky" href="https://medium.com/swlh/unit-testing-in-python-basics-21a9a57418a0" rel="noopener">Python中单元测试的基础知识</a></li><li id="3d83" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu ol nu nv nw bi translated">第2部分:<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/unit-testing-in-python-mocking-patching-and-dependency-injection-301280db2fed">修补、模拟和依赖注入</a></li><li id="2a61" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu ol nu nv nw bi translated">第3部分:<a class="ae ky" href="https://medium.com/analytics-vidhya/how-to-test-flask-applications-aef12ae5181c" rel="noopener">如何用数据库、模板和受保护的页面测试Flask应用程序</a></li><li id="846f" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu ol nu nv nw bi translated">第4部分:<a class="ae ky" href="https://medium.com/python-in-plain-english/unit-testing-in-python-tox-and-nox-833e4bbce729" rel="noopener"> tox和nox </a></li><li id="c009" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu ol nu nv nw bi translated">第5部分:<a class="ae ky" href="https://medium.com/python-in-plain-english/unit-testing-in-python-structure-57acd51da923" rel="noopener">结构化单元测试</a></li><li id="5816" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu ol nu nv nw bi translated">第6部分:<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/ci-pipelines-for-python-projects-9ac2830d2e38">CI-管道</a></li><li id="e69d" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu ol nu nv nw bi translated">第7部分:<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/unit-testing-in-python-property-based-testing-892a741fc119">基于属性的测试</a></li><li id="f1ac" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu ol nu nv nw bi translated">第8部分:<a class="ae ky" href="https://medium.com/analytics-vidhya/unit-testing-in-python-mutation-testing-7a70143180d8" rel="noopener">突变测试</a></li><li id="88cd" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu ol nu nv nw bi translated">第9部分:<a class="ae ky" href="https://towardsdatascience.com/static-code-analysis-for-python-bdce10b8d287" rel="noopener" target="_blank">静态代码分析</a> — Linters、类型检查和代码复杂性</li><li id="6beb" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu ol nu nv nw bi translated">第10部分:<a class="ae ky" href="https://towardsdatascience.com/pytest-plugins-to-love-%EF%B8%8F-9c71635fbe22" rel="noopener" target="_blank"> Pytest插件来爱</a></li></ul><p id="abed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您对使用Python测试的其他主题感兴趣，请告诉我。</p><h1 id="c052" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">请参见</h1><ul class=""><li id="6e84" class="no np it lb b lc mo lf mp li om lm on lq oo lu ol nu nv nw bi translated">joaquín Menchaca:<a class="ae ky" href="https://medium.com/@Joachim8675309/jenkins-ci-pipeline-with-python-8bf1a0234ec3" rel="noopener">Jenkins CI Pipeline with Python</a>，2019。</li><li id="835a" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu ol nu nv nw bi translated">Elle O'Brien  : <a class="ae ky" href="https://towardsdatascience.com/what-data-scientists-need-to-know-about-devops-2f8bc6660284" rel="noopener" target="_blank">科学家需要了解2020年DevOps </a>的哪些数据。</li></ul></div></div>    
</body>
</html>