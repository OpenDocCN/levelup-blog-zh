<html>
<head>
<title>Create a Static Website Blog with Gatsby, CosmicJS, and React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Gatsby、CosmicJS和React创建一个静态网站博客</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/build-a-gatsby-blog-using-the-cosmic-js-source-plugin-57ea1b7c87dd?source=collection_archive---------0-----------------------#2018-06-26">https://levelup.gitconnected.com/build-a-gatsby-blog-using-the-cosmic-js-source-plugin-57ea1b7c87dd?source=collection_archive---------0-----------------------#2018-06-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/bb659ece888c498cdb9998e3addc955b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rdFavPDfmEikPONLbt1VqQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">最初发表于<a class="ae kc" href="https://cosmicjs.com/articles" rel="noopener ugc nofollow" target="_blank"> Cosmic JS开发者文章</a>。</figcaption></figure><p id="f9c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本教程中，我们将学习如何使用React、<a class="ae kc" href="https://gatsbyjs.org/" rel="noopener ugc nofollow" target="_blank"> Gatsby JS </a>和<a class="ae kc" href="https://cosmicjs.com/" rel="noopener ugc nofollow" target="_blank"> Cosmic JS </a>创建一个简单而快速的静态网站博客。Gatsby是一个工具，可以让你生成静态HTML页面(服务器端渲染),这对于你的web应用程序来说是一个巨大的性能提升</p><h1 id="3cd7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="8016" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><a class="ae kc" href="https://cosmicjs.com/apps/gatsby-blog" rel="noopener ugc nofollow" target="_blank">盖茨比博客</a> <br/> <a class="ae kc" href="https://github.com/cosmicjs/gatsby-blog-cosmicjs" rel="noopener ugc nofollow" target="_blank">盖茨比博客代码库</a> <br/> <a class="ae kc" href="https://github.com/cosmicjs/gatsby-starter" rel="noopener ugc nofollow" target="_blank">盖茨比快速入门</a> <br/> <a class="ae kc" href="https://gatsby-blog-cosmicjs.netlify.com/" rel="noopener ugc nofollow" target="_blank">查看演示。</a></p><h1 id="4d23" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">先决条件</h1><p id="01f8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在开始之前，您需要NodeJS、npm和Gastby CLI。请确保您已经安装了这些。</p><h1 id="2a4a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">盖茨比是什么？</h1><p id="5605" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Gatsby是React的一个超快的网站框架。它允许开发者在几分钟内快速构建基于React的网站。无论你是想发展博客还是商业网站，《盖茨比》都会是一个不错的选择。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/8a70b8a7835ba94418180bd9d8c935d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gz6h0xGgviceEw5h.jpg"/></div></div></figure><p id="9147" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于Gatsby使用React和React路由器，客户端在初始呈现后成为单页面应用程序。它还将为route生成一个静态HTML页面，确保您的初始加载几乎是即时的。</p><h1 id="0b08" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">博客发展</h1><p id="a8f6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们必须设置环境，以便开始在博客上工作。</p><h1 id="c311" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">安装盖茨比</h1><p id="26c2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">首先，安装Gatsby CLI:</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="c33e" class="mo lc iq mk b gy mp mq l mr ms">npm install --global gatsby-cli</span></pre><h1 id="38e3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">搭建一个盖茨比模板</h1><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="4226" class="mo lc iq mk b gy mp mq l mr ms">gatsby new gatsby-blog-cosmicjs</span></pre><p id="b43a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在项目的文件夹中输入:</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="f352" class="mo lc iq mk b gy mp mq l mr ms">cd gatsby-blog-cosmicjs</span></pre><p id="264a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">启动服务器:</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="c976" class="mo lc iq mk b gy mp mq l mr ms">gatsby develop</span></pre><p id="c9ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">至此，您应该已经能够访问您的Gatsby JS博客网站了，地址是:<a class="ae kc" href="http://localhost:8000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8000 </a>。</p><h1 id="dd63" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">安装宇宙JS源代码插件</h1><p id="37c5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在静态博客中，你的数据可以从不同的来源消费:Markdown文件、HTML文件、外部API (WordPress、<a class="ae kc" href="https://cosmicjs.com" rel="noopener ugc nofollow" target="_blank"> Cosmic JS </a>等)。</p><p id="4ba1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，盖茨比实现了独立的层:数据层。它由GraphQL提供支持。非常令人兴奋的东西！</p><p id="ca26" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">GraphQL是脸书为API开发的现代查询语言。它允许客户端使用键/值对对象定义他们想要的查询。用户将密钥发送给服务器，服务器用相应的值进行响应。</p><p id="c3b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要将这个数据层与不同的数据提供者连接起来，您需要集成源插件。幸运的是，有许多源代码插件可以满足大多数需求。</p><p id="8a75" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的例子中，我们使用的是<a class="ae kc" href="https://cosmicjs.com/" rel="noopener ugc nofollow" target="_blank">宇宙JS </a>。显然，我们需要为Cosmic JS集成源代码插件。好消息:Cosmic JS已经实现了他们的<a class="ae kc" href="https://www.gatsbyjs.org/packages/gatsby-source-cosmicjs/" rel="noopener ugc nofollow" target="_blank">源码插件</a>！</p><p id="09dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们安装:</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="ddde" class="mo lc iq mk b gy mp mq l mr ms">npm install --save gatsby-source-cosmicjs</span></pre><p id="9f72" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还需要安装一些其他插件。我们也这么做吧</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="5dfc" class="mo lc iq mk b gy mp mq l mr ms">npm install --save gatsby-plugin-offline gatsby-source-filesystem</span></pre><p id="4d52" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些插件需要一些配置。因此，将<code class="fe mt mu mv mk b">gatsby-config.js</code>的内容替换为:</p><p id="a11e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">路径:</em>T1】</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="7ca6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，重启服务器，让Gatsby考虑这些更新。</p><h1 id="8772" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">帖子列表和设置</h1><p id="88e0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">首先，我们想在主页上显示文章列表。为此，请将以下内容添加到现有主页文件中:</p><p id="8a8c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">路径:</em> <code class="fe mt mu mv mk b"><em class="mw">src/pages/index.js</em></code></p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><h2 id="785e" class="mo lc iq bd ld mz na dn lh nb nc dp ll ko nd ne lp ks nf ng lt kw nh ni lx nj bi translated">解释:</h2><p id="272a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在<code class="fe mt mu mv mk b"><em class="mw">index.js</em></code>文件的末尾，我们导出了pageQuery。这些是GraphQl查询，用于获取关于设置和帖子列表的重要信息。</p><p id="181b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们将<code class="fe mt mu mv mk b">{ data }</code>被析构的对象作为<code class="fe mt mu mv mk b">IndexPage</code>的参数传递，并对其<code class="fe mt mu mv mk b">allCosmicjsPosts</code> &amp; <code class="fe mt mu mv mk b">cosmicjsSettings</code>对象进行循环以显示数据。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/5315627ad8dd3b659f3e25a8d4c4ea0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SrXyR8Wr8c98bumW.png"/></div></div></figure><h1 id="182c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">单柱布局</h1><p id="e268" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">到目前为止，我们已经将Cosmic JS源代码插件与Gatsby集成在一起，它看起来就像一个博客。现在，我们将致力于博客文章的详细信息页面。</p><p id="669c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们创建模板:</p><p id="1642" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">路径:</em>T8】</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="3c6b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这看起来不错，但是此时，Gatsby不知道何时应该显示这个模板。每个帖子都需要一个特定的URL。因此，我们将通过<code class="fe mt mu mv mk b">createPage</code>函数通知Gatsby我们需要的新URL。</p><p id="0fc7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">路径:</em>T10】</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="fd39" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">重启<strong class="kf ir">盖茨比服务器。</strong></p><p id="c9b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从现在开始，您应该可以通过点击主页上显示的URL来访问详细页面。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/f76e25258a1c155aad796d8365373671.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yhB3D2rZClgmJA3H.png"/></div></div></figure><h1 id="e16d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">额外的东西！</h1><p id="f21b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">除此之外，我们还实现了<code class="fe mt mu mv mk b"><em class="mw">src/components/Bio.js</em></code>来显示作者信息&amp; <code class="fe mt mu mv mk b"><em class="mw">src/layouts/index.js</em></code>来创建博客的通用布局。</p><p id="8803" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://github.com/cosmicjs/gatsby-blog-cosmicjs" rel="noopener ugc nofollow" target="_blank">的源代码可以在GitHub </a>上获得。要实时查看它，克隆存储库，并运行(<code class="fe mt mu mv mk b">cd gatsby-blog-cosmicjs &amp;&amp; npm i &amp;&amp; npm run develop</code>)。</p><p id="51e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后重启服务器，访问网站。看起来会很棒！</p><p id="67de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">盖茨比生成的静态网站可以<a class="ae kc" href="https://www.gatsbyjs.org/docs/deploy-gatsby/" rel="noopener ugc nofollow" target="_blank">轻松发布在存储提供商</a>上:Netlify、S3/Cloudfront、GitHub pages、GitLab pages、Heroku等。</p><p id="5ecb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">注意:</strong>我们的<a class="ae kc" href="https://gatsby-blog-cosmicjs.netlify.com/" rel="noopener ugc nofollow" target="_blank">演示</a>部署在Netlify上。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/f2493f3df53317cfe01377857527b910.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JyB-aojg3seRrO4q.png"/></div></div></figure><h1 id="c9d6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="f141" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">恭喜你。您已经成功构建了一个超级快速且易于维护的博客！请随意继续这个项目来发现盖茨比和宇宙JS的优点。</p><p id="80f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以将Cosmic JS的强大功能添加到任何新的或现有的代码库中，而不考虑编程语言。在<a class="ae kc" href="https://cosmicjs.com/knowledge-base" rel="noopener ugc nofollow" target="_blank">我们的知识库</a>中查看更多应用集成技巧。</p><p id="ebf8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Cosmic JS使内容管理者和开发者能够更好地合作。通过提供直观的管理仪表板、强大的API和灵活的用户角色，应用程序的构建速度更快、重量更轻，并且您的整个团队在这个过程中节省了时间。</p><p id="07c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://cosmicjs.com/" rel="noopener ugc nofollow" target="_blank"> Cosmic JS </a>是一个API第一的基于云的内容管理平台，可以轻松管理应用和内容。如果你有关于Cosmic JS API的问题，请在<a class="ae kc" href="https://twitter.com/cosmic_js" rel="noopener ugc nofollow" target="_blank"> Twitter </a>或<a class="ae kc" href="https://cosmicjs.com/community" rel="noopener ugc nofollow" target="_blank"> Slack </a>上联系创始人。</p></div></div>    
</body>
</html>