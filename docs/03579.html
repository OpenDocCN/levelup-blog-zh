<html>
<head>
<title>JavaScript Code Styling Best Practices — Maximum Depth and Lines</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript代码样式最佳实践—最大深度和行数</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-code-styling-best-practices-maximum-depth-and-lines-e89bd591186c?source=collection_archive---------10-----------------------#2020-05-17">https://levelup.gitconnected.com/javascript-code-styling-best-practices-maximum-depth-and-lines-e89bd591186c?source=collection_archive---------10-----------------------#2020-05-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/0117216a4a2887cdb91b2ed660ae1322.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TheJK6he_EDTGfIB"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">Deanna Lewis 在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="fb20" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">JavaScript是一种非常宽容的语言。编写可以运行但有错误的代码很容易。</p><p id="0fa8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将研究嵌套的最大深度、最大行长度和最大文件长度。</p><h1 id="4343" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">最大嵌套深度</h1><p id="1bd0" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们应该尽可能地消除嵌套。嵌套代码很难阅读。</p><p id="4db0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这适用于对象、<code class="fe mh mi mj mk b">if</code>块、<code class="fe mh mi mj mk b">try...catch</code>、循环或任何其他可以嵌套的对象。</p><p id="2da5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有以下代码:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="32a4" class="mt lf it mk b gy mu mv l mw mx">if (true) {<br/>   while (true) {<br/>     if (true) {<br/>       if (true) {<br/>         if (true) {}<br/>       }<br/>     }<br/>   }<br/> }</span></pre><p id="6e45" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那就太多嵌套了。我们有5层嵌套，这太多了。</p><p id="de91" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2或3可能是最佳的最大深度。越少越好。</p><p id="6d4e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过使用guard子句而不是嵌套<code class="fe mh mi mj mk b">if</code>语句来减少这些块的嵌套深度。</p><p id="8846" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">guard子句是指我们检查一些条件，如果是<code class="fe mh mi mj mk b">true</code>，就提前返回。</p><p id="3301" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样，在运行任何东西之前，我们不必嵌套<code class="fe mh mi mj mk b">if</code>块来检查某些东西。</p><p id="bbf2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以替换如下内容:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="3df1" class="mt lf it mk b gy mu mv l mw mx">const foo = () =&gt; {<br/>  const x = true;<br/>  const y = true;<br/>  if (x) {<br/>    //...<br/>    if (y) {<br/>      //...<br/>    }<br/>  }<br/>}</span></pre><p id="a1fe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">类似于:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="1856" class="mt lf it mk b gy mu mv l mw mx">const foo = () =&gt; {<br/>  const x = true;<br/>  const y = true;<br/>  if (!x) {<br/>    return;<br/>  }</span><span id="f732" class="mt lf it mk b gy my mv l mw mx">  //...<br/>  if (!y) {<br/>    return;<br/>  }</span><span id="80ac" class="mt lf it mk b gy my mv l mw mx">  //...<br/>}</span></pre><p id="168a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们检查<code class="fe mh mi mj mk b">x</code>是否为<code class="fe mh mi mj mk b">false</code>，如果是则停止运行该函数，然后运行某个仅依赖于<code class="fe mh mi mj mk b">x</code>在<code class="fe mh mi mj mk b">true</code>之后的函数。</p><p id="ab97" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们检查<code class="fe mh mi mj mk b">y</code>是否为<code class="fe mh mi mj mk b">false</code>，如果<code class="fe mh mi mj mk b">y</code>为<code class="fe mh mi mj mk b">false.</code>我们就停止运行我们的函数，然后运行依赖于<code class="fe mh mi mj mk b">y</code>为<code class="fe mh mi mj mk b">true</code>或者依赖于<code class="fe mh mi mj mk b">x</code>和<code class="fe mh mi mj mk b">y</code>都为<code class="fe mh mi mj mk b">true</code>的代码。</p><p id="f15c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们消除了前面代码示例中的嵌套。</p><p id="e29b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，如果我们正在创建自己的对象，我们也应该消除嵌套。例如，我们应该创建如下所示的对象文字:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="fd3a" class="mt lf it mk b gy mu mv l mw mx">const obj = {<br/>  a: {<br/>    b: {<br/>      c: {<br/>        d: {<br/>          e: 1<br/>        }<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="dd31" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这种嵌套非常难读，应该尽可能避免。</p><p id="8f97" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">相反，我们应该通过编写类似如下的代码来消除嵌套:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="d82a" class="mt lf it mk b gy mu mv l mw mx">const obj = {<br/>  a: 1<br/>}</span></pre><p id="85ba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，嵌套越少，我们的代码越易读。</p><h1 id="ad81" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">不要超过最大行长度</h1><p id="81d0" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">代码的行长度应该足够短，这样就可以在大多数人的屏幕上显示，不需要水平滚动。</p><p id="b3c6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在大多数情况下，这大约是100个字符，包括大小屏幕以及它们在各种操作系统中的显示方式。</p><p id="ae8a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">长字符串应该连接在一起或者分解成更小的字符串。</p><p id="7e4e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，减少嵌套深度也有助于减少长线长度。</p><p id="ee2f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们应该保持较短的行长度，这样大部分人不用水平滚动就能看到整行。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/e9bc2444fc61ea7f4bb9a5af915a221a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9DnflwGN06AMogPU"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">帕特丽夏·塞尔纳在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="0669" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">最大文件长度</h1><p id="fa78" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们不应该拥有由人类程序员生成的大型代码文件。</p><p id="e7f5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一个长文件可能意味着它做的太多了。这并不好，因为一个文件做得越多，它就越混乱。</p><p id="1a9d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">长代码文件不可读，因为跟踪工作流很困难。调试也很难，因为我们必须在文件中上下跳转。</p><p id="bac3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果一个文件很长，那么它应该被分解成小的模块。每个模块应该只做一件事。</p><p id="83d4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样，我们就不会因为代码太长而遇到可读性问题。</p><p id="36fd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它所做的只是一件事，我们在看它的内容之前就知道它在做什么。</p><p id="48eb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">做多件事的代码文件太长。</p><h1 id="65fd" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="a580" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们不应该编写嵌套过多的代码。深度嵌套的代码很难阅读。</p><p id="369e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们必须嵌套条件块，那么我们应该通过使用guard子句来减少嵌套。</p><p id="7ca8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们不应该创建嵌套过多的对象文字。</p><p id="336a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最大文件长度不应太长。如果它做的不止一件事，那么它就太长了。</p><p id="2a6e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，代码文件中的行长度应该适合大多数人的屏幕，因此在大多数情况下，每行100个字符左右可能是合适的。</p></div></div>    
</body>
</html>