<html>
<head>
<title>Docker for Mac causing disk space issues</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">导致磁盘空间问题的Docker</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/docker-for-mac-causing-disk-space-issues-7ff8b14d2c83?source=collection_archive---------2-----------------------#2019-06-13">https://levelup.gitconnected.com/docker-for-mac-causing-disk-space-issues-7ff8b14d2c83?source=collection_archive---------2-----------------------#2019-06-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><h1 id="88f6" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">磁盘空间问题</h1><p id="343b" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">MacOS最近通知我，系统更新将不会执行，因为我的磁盘中没有12 GB的可用空间。这是真的，我实际上有7个。</p><p id="abb0" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">我知道有了120 GB的SSD，我肯定不是磁盘空间的大地主。问题是我只在工作中使用我的MacBook Pro。没有图片，没有电影，没有音乐(只有Spotify)，没有游戏。</p><p id="1e61" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">由于我是一名在<a class="ae lr" href="https://konduto.com" rel="noopener ugc nofollow" target="_blank"> Konduto </a>工作的程序员，这家公司使用机器学习来防止欺诈，因此处理非常大的文件，我认为数据库转储或大型CSV可能是原因。</p><p id="1197" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">事实证明并非如此。我存放工作资料的文件夹占用了3 GB的磁盘空间，比我预期的要少得多。</p><p id="1599" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">我是不是不小心把Dropbox上非常大的东西放到了另一台同步到MacBook Pro的设备上？</p><p id="7e57" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">不，事实并非如此。</p><p id="886d" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">出于想法，我去了<code class="fe ls lt lu lv b">About This Mac</code>(点击OS工具栏左侧的苹果图标)，然后去了<code class="fe ls lt lu lv b">Storage</code>标签。</p><p id="0eb3" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">除了报道的<strong class="kq iu">系统</strong>大小:高达87 GB之外，没有任何东西真正引人注目。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/38893c5403f131effe040ad3230f7da7.png" data-original-src="https://miro.medium.com/v2/resize:fit:392/format:webp/1*p01ihKBjiPFcV25YZbQHGw.jpeg"/></div></figure><p id="fed0" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">我打开iTerm，进入操作系统根目录，按大小排列文件夹:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="me mf l"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated">从大到小对Unix中的文件和文件夹进行排序</figcaption></figure><p id="91be" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">该命令以人类可读的格式(例如24K、15M)显示文件夹大小(<strong class="kq iu"> du </strong>)，并根据人类可读的输出将结果从小到大排序(<strong class="kq iu"> sort </strong>命令的<code class="fe ls lt lu lv b">h</code>标志)。因为我想看最大的，所以我用<strong class="kq iu">排序</strong>命令的<code class="fe ls lt lu lv b">r</code>标志颠倒了顺序。</p><p id="16ce" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated"><code class="fe ls lt lu lv b">/Users</code>文件夹是最大的一个。所以我进去输入了同样的命令。</p><p id="a7b3" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">在对每个最大的文件夹重复上述步骤后，我在<code class="fe ls lt lu lv b">/Users/rsampaio/Library/Containers/com.docker.docker</code>结束。该文件夹的大小超过50 GB。</p><h1 id="1efd" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">如何减少Docker专用的磁盘空间？</h1><p id="1270" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">好消息:我找到了罪犯。</p><p id="e0a0" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">坏消息:我不知道如何减少Docker的空间。</p><p id="f090" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">幸运的是，Docker有一个优秀的文档，我在那里找到了问题的答案。</p><p id="e469" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">将Docker的<strong class="kq iu">磁盘镜像大小</strong>从64 GB改回16 GB释放了将近50 GB的磁盘空间，我现在可以更新MacOS了。</p><div class="lx ly lz ma gt ab cb"><figure class="mk mb ml mm mn mo mp paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><img src="../Images/d3d5e4d1e1858dad8d88301d47692892.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*O6qACK7RIsDWpvM6jbY1iw.png"/></div></figure><figure class="mk mb mu mm mn mo mp paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><img src="../Images/2d7937543fc5b91618d3771318f4fc62.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/1*ogxnplclbrjIyuLcyobSDg.png"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk mv di mw mx translated">将磁盘映像大小滑块移回16.0 GB而不是16.0 GB，大大减少了Docker的磁盘空间使用</figcaption></figure></div><blockquote class="my"><p id="7ead" class="mz na it bd nb nc nd ne nf ng nh ll dk translated">警告:如果最大尺寸减小，当前文件将被删除，因此所有容器和图像将丢失(<a class="ae lr" href="https://docs.docker.com/docker-for-mac/space/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/docker-for-mac/space/</a>)</p></blockquote></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><p id="e255" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated"><em class="np">原载于2019年6月11日</em><a class="ae lr" href="https://raphaelsampaio.com/tech/2019/02/17/site-de-graca-usando-github-pages-jekyll-lambda-ses.html" rel="noopener ugc nofollow" target="_blank"><em class="np">【raphaelsampaio.com】</em></a><em class="np">。</em></p></div></div>    
</body>
</html>