# 清除您的 Go 代码

> 原文：<https://levelup.gitconnected.com/cleaning-your-go-code-863c6f995049>

![](img/95585277b6ad3a821407f4da230ae4c7.png)

卡里·谢伊在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

作为大学计算机科学课程的助教，一个永久的收获是可读的、地道的代码的价值。当你不得不仔细地一个接一个地审查许多相似的代码样本时，你不希望它们变得模糊不清。这一课让我在专业上受益匪浅，在关键的开发任务中发挥了作用，比如拉请求和维护代码。将代码从*工作*升级到*可读*(因此*可维护)，*对你和你的雇主来说都是值得的。

# Golang 的基础清洁产品

Go 提供了许多代码质量工具，这些工具可能已经直接集成到了您的编辑器或 IDE 中，但是无论我在哪里编写代码，我都习惯性地遵循以下步骤，以使代码清晰易读。

## 第一步:“开始 fmt”

可读代码最基本的方面是格式化。对于 Go，格式化**是**重要的，因为，虽然你可能不认为 Go 考虑缩进或空白，但它确实考虑了。在“.”之前加一个换行符*或者在*之前的*，布尔运算符和编译器会很快提醒你 Go 的编译器不关心。不管您的编辑器或 IDE 的格式化能力如何，处理简单格式化的最好方法是 [fmt](https://golang.org/cmd/go/#hdr-Gofmt__reformat__package_sources) ，它包装了 [gofmt](https://golang.org/cmd/gofmt/) :*

> Gofmt 格式化 Go 程序。它使用制表符缩进和空白对齐。对齐方式假设编辑器使用固定宽度的字体。

要运行 fmt，您只需提供想要格式化的包路径:

```
go fmt ./...
```

这将为您重新格式化所有代码。

## 第二步:“去兽医诊所”

一旦格式化就绪，我使用的下一个工具就是 [vet](https://golang.org/cmd/vet/) 命令:

> Vet 检查 Go 源代码并报告可疑的构造，比如参数与格式字符串不一致的 Printf 调用。Vet 使用试探法，不能保证所有的报告都是真正的问题，但是它可以发现编译器没有发现的错误。

它是 Go 发行版的一部分，将检查您的代码并报告它发现的问题。要运行 vet，像 fmt 一样，只需提供包路径:

```
go vet ./...
```

与 fmt 不同，使用 vet 时，您必须完成工作，检查其输出并做出适当的更改。

## 第三步:“棉绒”

最后，我使用了一个 [lint](https://en.wikipedia.org/wiki/Lint_(software)) 程序，它将真正挑剔你的代码。有多种棉绒可供选择，但我目前的选择是 [golangci-lint](https://golangci-lint.run/usage/quick-start/) :

> golangci-lint 是一个 Go linters 聚合器。
> 非常快:并行运行 linters，重用 Go 构建缓存并缓存分析结果。

一旦安装了 golangci-lint，就可以像运行前面的命令一样运行它:

```
golangci-lint run ./...
```

在这里，您也必须查看。输出并进行适当的更改。

## 摘要

在运行 ***时，对我的代码进行三次*** 清理可能看起来过多，但这是值得的。我这样做是提交拉取请求前的最后一步。这样做，你的代码会尽可能的干净和可共享，在调整的过程中，你会提高你的编码技能。