<html>
<head>
<title>How to Handle a Memory Leak in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何处理Android中的内存泄漏</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-handle-a-memory-leak-in-android-d6e7e1ea435b?source=collection_archive---------11-----------------------#2022-03-30">https://levelup.gitconnected.com/how-to-handle-a-memory-leak-in-android-d6e7e1ea435b?source=collection_archive---------11-----------------------#2022-03-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0761" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">制作一个防撞应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4d7cce48dff5ea9c1915ec7dbf8235f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dvB8N2sjGk0uOL3P"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">乔·兹洛梅克在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><blockquote class="kz"><p id="07bb" class="la lb it bd lc ld le lf lg lh li lj dk translated">“一个小漏洞会使一艘大船沉没。” —本杰明·富兰克林</p></blockquote><p id="3c97" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf lj im bi translated">作为Andriod开发者，我们的主要座右铭是创建一个在任何情况下都不会崩溃并且运行良好的应用程序。为了实现这一点，我们需要关心内存泄漏。因为内存泄漏会导致<code class="fe mg mh mi mj b">OutOfMemoryError</code>崩溃并降低应用程序的性能。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="a343" class="pw-post-body-paragraph ll lm it ln b lo mr ju lq lr ms jx lt lu mt lw lx ly mu ma mb mc mv me mf lj im bi translated">首先，我们将知道什么是内存泄漏。根据维基百科</p><blockquote class="mw mx my"><p id="29da" class="ll lm mz ln b lo mr ju lq lr ms jx lt na mt lw lx nb mu ma mb nc mv me mf lj im bi translated">在<a class="ae ky" href="https://en.wikipedia.org/wiki/Computer_science" rel="noopener ugc nofollow" target="_blank">计算机科学</a>中，<strong class="ln iu">内存泄漏</strong>是<a class="ae ky" href="https://en.wikipedia.org/wiki/Resource_leak" rel="noopener ugc nofollow" target="_blank">资源泄漏</a>的一种，当<a class="ae ky" href="https://en.wikipedia.org/wiki/Computer_program" rel="noopener ugc nofollow" target="_blank">计算机程序</a>错误地管理<a class="ae ky" href="https://en.wikipedia.org/wiki/Memory_allocation" rel="noopener ugc nofollow" target="_blank">内存分配</a><a class="ae ky" href="https://en.wikipedia.org/wiki/Memory_leak#cite_note-1" rel="noopener ugc nofollow" target="_blank">【1】</a>而不释放不再需要的内存时就会发生。</p></blockquote><p id="5e64" class="pw-post-body-paragraph ll lm it ln b lo mr ju lq lr ms jx lt lu mt lw lx ly mu ma mb mc mv me mf lj im bi translated">最简单的一句话，有一段需要释放却没有释放的记忆。</p><h1 id="8785" class="nd ne it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">如何发现内存泄漏</h1><p id="192d" class="pw-post-body-paragraph ll lm it ln b lo nv ju lq lr nw jx lt lu nx lw lx ly ny ma mb mc nz me mf lj im bi translated"><a class="ae ky" href="https://square.github.io/leakcanary/" rel="noopener ugc nofollow" target="_blank"><strong class="ln iu">leak canary</strong></a><strong class="ln iu"/>是android中最常用的查找内存泄漏的库。安装非常简单。我们只需要使用应用程序级别中的依赖关系<code class="fe mg mh mi mj b">build.gradle</code>。</p><pre class="kj kk kl km gt oa mj ob oc aw od bi"><span id="b554" class="oe ne it mj b gy of og l oh oi">debugImplementation 'com.squareup.leakcanary:leakcanary-android:2.8.1'</span></pre><p id="8cbc" class="pw-post-body-paragraph ll lm it ln b lo mr ju lq lr ms jx lt lu mt lw lx ly mu ma mb mc mv me mf lj im bi translated">我们使用<code class="fe mg mh mi mj b">debugImplementation</code>,因为内存泄漏检查只能在调试版本中进行。现在，如果你运行应用程序，你会收到一个通知，如果你的应用程序有任何内存泄漏。</p><h1 id="baa0" class="nd ne it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">LeakCanary在行动</h1><p id="0b5c" class="pw-post-body-paragraph ll lm it ln b lo nv ju lq lr nw jx lt lu nx lw lx ly ny ma mb mc nz me mf lj im bi translated">我用的是这个<a class="ae ky" href="https://github.com/Farhandroid/Pexel" rel="noopener ugc nofollow" target="_blank"><strong class="ln iu">GitHub</strong></a><strong class="ln iu"/>库。请随意检查。安装LeakCanary后，当我构建应用程序时，我收到了一个通知。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/4981859080c39cecd052bccac1696868.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kveD2rdq70dfmA2MmmsR1w.jpeg"/></div></div></figure><p id="4f87" class="pw-post-body-paragraph ll lm it ln b lo mr ju lq lr ms jx lt lu mt lw lx ly mu ma mb mc mv me mf lj im bi translated">它告诉我，我的应用程序存在内存泄漏。点击通知后，它显示了错误的原因。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/9c6ffa5f0dfcb3842e3190195afd80a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nfVf8SLCcnlrnZoNUj_wMg.jpeg"/></div></div></figure><p id="6e10" class="pw-post-body-paragraph ll lm it ln b lo mr ju lq lr ms jx lt lu mt lw lx ly mu ma mb mc mv me mf lj im bi translated">基本上就是在告诉我<code class="fe mg mh mi mj b">ImageSearchFragment</code>有内存泄漏。因为有一个视图应该被清除以防止内存泄漏。原因是，我使用了在<code class="fe mg mh mi mj b">ImageSearchFragment</code>中引用了<code class="fe mg mh mi mj b">ConstrainLayout</code>的<code class="fe mg mh mi mj b">databindig</code>，但是没有删除导致内存泄漏的引用。</p><p id="f4fb" class="pw-post-body-paragraph ll lm it ln b lo mr ju lq lr ms jx lt lu mt lw lx ly mu ma mb mc mv me mf lj im bi translated"><strong class="ln iu">这个原因特别针对这个项目。这可能是项目中内存泄漏的另一个原因。</strong></p><h1 id="e2a5" class="nd ne it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">如何解决内存泄漏</h1><p id="7314" class="pw-post-body-paragraph ll lm it ln b lo nv ju lq lr nw jx lt lu nx lw lx ly ny ma mb mc nz me mf lj im bi translated">现在我知道了我的应用程序内存泄漏的原因，我必须解决这个问题。所以我改装了<code class="fe mg mh mi mj b">ImageSearchFragment</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="ef15" class="pw-post-body-paragraph ll lm it ln b lo mr ju lq lr ms jx lt lu mt lw lx ly mu ma mb mc mv me mf lj im bi translated">我所做的是创建一个引用<code class="fe mg mh mi mj b">databinding</code>并在<code class="fe mg mh mi mj b">onDestroyView</code>中删除它。所以我已经清除了需要清除的内存。如果我现在运行应用程序，那么将不会有来自LeakCanary的通知。所以现在这个app不存在内存泄露的问题。知道你的应用程序没有内存泄漏的感觉真好。不是吗？</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="c87e" class="pw-post-body-paragraph ll lm it ln b lo mr ju lq lr ms jx lt lu mt lw lx ly mu ma mb mc mv me mf lj im bi translated">今天到此为止。我希望你学到了新的有用的东西。</p><p id="b4be" class="pw-post-body-paragraph ll lm it ln b lo mr ju lq lr ms jx lt lu mt lw lx ly mu ma mb mc mv me mf lj im bi translated">你的建议对我很重要。如果你有任何问题，请在评论中分享。直到我们再次见面…干杯！</p><pre class="kj kk kl km gt oa mj ob oc aw od bi"><span id="1cc3" class="oe ne it mj b gy of og l oh oi"><strong class="mj iu">Want to Connect?</strong></span><span id="03ba" class="oe ne it mj b gy on og l oh oi">If you want to, you can connect with me on <a class="ae ky" href="https://twitter.com/FarhanT99598254" rel="noopener ugc nofollow" target="_blank">Twitter</a> or <a class="ae ky" href="https://www.linkedin.com/in/farhan-tanvir-b08520151/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>.</span></pre></div></div>    
</body>
</html>