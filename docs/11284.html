<html>
<head>
<title>How to Make an Interactive Camera in Unity using Cinemachine and C#</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Cinemachine和C#在Unity中制作交互式摄像机</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-make-an-interactive-camera-in-unity-using-cinemachine-and-c-31cad0143057?source=collection_archive---------5-----------------------#2022-03-04">https://levelup.gitconnected.com/how-to-make-an-interactive-camera-in-unity-using-cinemachine-and-c-31cad0143057?source=collection_archive---------5-----------------------#2022-03-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/cbbd54719eda9919615df1b8adcbf3fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*IGjPVf3TrcTdu5tFD1004w.gif"/></div></div></figure><div class=""/><p id="b060" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">虽然电影摄影是一个非常视觉化的探险，但在Unity中使用cinemachine允许用户通过脚本控制最终的摄像机。在本文中，我将制作一个<em class="la">交互式相机</em>，当用户输入被按下时，它会改变目标并放大。</p></div><div class="ab cl lb lc hx ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="im in io ip iq"><p id="9555" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated"><strong class="ke jf">变数</strong></p><p id="0fad" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">对于这个解决方案，我使用了三个<em class="la">变量</em>。你完全可以使用单个对象变量，但是对于我的目的，我将围绕这个<em class="la">数组</em>系统来构建。有两个<em class="la">游戏对象</em>数组变量，一个用于虚拟<em class="la">摄像机</em>，另一个用于<em class="la">注视目标</em>。最后一个<em class="la"> int </em>变量数组存储了三个期望的<em class="la">值</em>，我将用它们来调整<em class="la">视场</em>。这个<em class="la">脚本</em>在所有虚拟摄像机的<em class="la">父</em>对象上。</p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi li"><img src="../Images/294c9128ffc2195cda7be2cba5ed8bd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zz7mAYIY5HprtwcOocSBYw.png"/></div></div></figure><p id="3439" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这是选中的<em class="la">父</em>对象<em class="la"> (Vcams) </em>，上面有<em class="la">脚本</em>。注意，序列化字段中的游戏对象<em class="la">数组</em>为空<em class="la">。当按下<em class="la">播放</em>按钮时，这些列表将通过<em class="la">脚本</em>填充。</em></p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ln"><img src="../Images/c620fd8d6bdf054a45b0189b6bfccbca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YcItN5iCvvzQVTsiWza1Zg.png"/></div></div></figure></div><div class="ab cl lb lc hx ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="im in io ip iq"><p id="0f2f" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated"><strong class="ke jf">摄像机目标</strong></p><p id="8fcc" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">第一个<em class="la">目标</em>将是这里的<em class="la">玩家</em>对象。</p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/ac6740784bb630f98330221c5acb2926.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qj4oCUTSsimUdPjvR_xhyA.png"/></div></div></figure><p id="6d30" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">我创建了一个名为<em class="la">目标</em>的新<em class="la">标签</em>，然后将其分配给<em class="la">检查器</em>中的<em class="la">玩家</em>。</p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/297dff623c3c3899a66eba41605536d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*W9JLagNl7pyAxUzmRadV8w.png"/></div></figure><p id="6c87" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">下一个焦点<em class="la">目标</em>将是这个巨大的<em class="la">雕像</em>。</p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/c60f3060f457f82cbc9a5451f61e0770.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iZc7tpqzkCFiWY7ONQEY_w.png"/></div></div></figure><p id="6783" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">雕像也获得了一个新的<em class="la">标签</em>的<em class="la">目标</em>。</p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/68ad5a024b33daa52fae026bd28af06d.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/1*EO6cDPxrp10hp_P_gP1Xkw.png"/></div></figure></div><div class="ab cl lb lc hx ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="im in io ip iq"><p id="43c1" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated"><strong class="ke jf">初始化</strong></p><p id="9eec" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这里在void <em class="la"> Start </em>方法中，我可以为数组制作所需对象的附件。虚拟<em class="la">摄像机</em>是由它们的<em class="la">类型<em class="la">找到</em>的。</em>然后，由于他们有一个<em class="la">父</em>对象持有这个<em class="la">脚本</em>，他们的<em class="la">组件</em>通过<em class="la">getcomponentsinchilds</em>被抓取。<em class="la">第一个摄像机</em>【0】上的聚焦<em class="la">镜头</em>，被设置为焦距<em class="la">数组</em> (60)中的第一个存储值。通过在场景中搜索带有<em class="la">目标(玩家和雕像)的<em class="la">标签</em>的<em class="la">游戏对象</em>来填充<em class="la">目标数组</em>。</em>最后，为每个找到的目标运行一个<em class="la"> foreach </em>循环，将其<em class="la">名称</em>打印到<em class="la">控制台</em>。</p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lq"><img src="../Images/584297836ca1c204fc23cdc87f0b425c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HEFJQ4zUzJxQS6ksKbAsdg.png"/></div></div></figure></div><div class="ab cl lb lc hx ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="im in io ip iq"><p id="32fd" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated"><strong class="ke jf">带间隙测试</strong></p><p id="7571" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在按下<em class="la"> Play </em>按钮后，<em class="la">虚拟摄像机</em>被显示为按照它们在数组中的<em class="la">元素</em>编号的适当顺序填充。<em class="la">注意:如果不使用来自父代的GetComponent来获取摄像机，它们仍然可以工作，并在这里填充，但是顺序不同。</em><em class="la">目标</em>数组显示两个<em class="la">标记的</em>对象被<em class="la">发现</em>。</p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/b176804fdba35bdc89b39b3de7d37631.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*MW4GmLH-Hvoy423WemIyGQ.png"/></div></figure><p id="7c9d" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated"><em class="la"> foreach </em>循环运行，两个目标<em class="la">名称</em>被打印到<em class="la">控制台</em>。</p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/4d32216e8a1fbd968957ad0685dfb0bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*YiC05gx-k2DnTb1VxZiqPA.png"/></div></figure></div><div class="ab cl lb lc hx ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="im in io ip iq"><p id="9847" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated"><strong class="ke jf">用户输入</strong></p><p id="d1d2" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">因为这些动作将快速响应<em class="la">玩家</em>按下<em class="la">按钮</em>，我需要检查void <em class="la"> Update </em>中的<em class="la">输入</em>。首先检查<em class="la">空格键</em>，如果<em class="la">被按下</em>，则调用<em class="la">方法</em>来改变相机上的焦距。接下来检查<em class="la"> R键</em>，当<em class="la">按下</em>时，调用<em class="la">方法</em>改变摄像机<em class="la">目标</em>。</p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/ad7894667dabdd91f7f0eac0a3408312.png" data-original-src="https://miro.medium.com/v2/resize:fit:1038/format:webp/1*-MZwA1w0xgcV7Fn5OVXW_w.png"/></div></figure></div><div class="ab cl lb lc hx ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="im in io ip iq"><p id="24f3" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated"><strong class="ke jf">改变焦距</strong></p><p id="3547" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这种情况下的默认焦距是60<em class="la">(_ focal distances[0])</em>。第一个<em class="la"> if语句</em>检查焦距是否等于<em class="la"> 60 </em>，如果是，则改为下一个焦距<em class="la"> (40) </em>。如果焦距是40，它会<em class="la">将</em>设置为20，然后如果是20，它会<em class="la">将</em>复位回60。当重复按下<em class="la">空格键</em>时<em class="la">完成变焦循环</em>。</p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lu"><img src="../Images/3f37c1b5de1fc2d27187b3d6feb27b23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q-oPoLRuWba1C01FIXybbQ.png"/></div></div></figure><p id="c7b7" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在<em class="la">检查器</em>中，您可以看到当<em class="la">按压空间</em>时<em class="la">视场</em>循环通过<em class="la">数组</em>的<em class="la">值</em>。</p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lv"><img src="../Images/5e7e8b2800b45a3871e0df2f56b833c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*9nxnRYQhlKw_31blhcxaUA.gif"/></div></div></figure><p id="ef31" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这是一张在<em class="la">游戏</em>视图中相机<em class="la">变焦</em>的gif图。</p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/cbbd54719eda9919615df1b8adcbf3fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*IGjPVf3TrcTdu5tFD1004w.gif"/></div></div></figure></div><div class="ab cl lb lc hx ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="im in io ip iq"><p id="48d2" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated"><strong class="ke jf">改变注视目标</strong></p><p id="0d7b" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">改变<em class="la">查看</em>目标的方式类似。第一个<em class="la"> if语句</em>检查目标<em class="la">是否为空</em>。如果还没有分配给的注视目标<em class="la">，它将抓取数组中的第一个目标。一旦初始目标被分配，接下来的两条语句在两个</em>目标之间来回切换。我还需要访问每个<em class="la">目标</em>的<em class="la">变换</em>，因为这是<em class="la">查看</em>时使用的参考点。</p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lw"><img src="../Images/44740a78286e232ed9f0f9aee24d28fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IdyPQV0lLN05HZg1cqkDtg.png"/></div></div></figure><p id="a712" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">第一次按下<em class="la"> R键</em>时，<em class="la">第一个</em>目标被分配给<em class="la">查看</em>。</p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lx"><img src="../Images/284c0fc75f3dfeff9899c5c6995c025b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ztuDcrEcH4KKmEwCEJsVgA.gif"/></div></div></figure><p id="2203" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">重复按压，然后在两个可用的<em class="la">目标</em>之间来回翻转。</p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ly"><img src="../Images/acf7ed83e19932c9489884f98b27b65f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*gSb2AMKTMHwYGLHrSyc4iw.gif"/></div></div></figure><p id="90c4" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这是在<em class="la">游戏</em>视图中的样子。</p><figure class="lj lk ll lm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/bf85b193ef599992a45f513aecba13bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*x0THHdCjU7Y8xZnGjKQ7gw.gif"/></div></div></figure><p id="68cf" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">就是这样！感谢您的阅读！</p></div></div>    
</body>
</html>