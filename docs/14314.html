<html>
<head>
<title>8 Must-know Stream API Usages</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">8个必须知道的流API用法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/8-must-know-stream-api-usages-b72ebc50d447?source=collection_archive---------4-----------------------#2022-11-16">https://levelup.gitconnected.com/8-must-know-stream-api-usages-b72ebc50d447?source=collection_archive---------4-----------------------#2022-11-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="850a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">跟我一起用stream API写更优雅的代码吧。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/e2f22bad4f735011596b4f0204c1ce91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B_hdDOe1QqKuEeDGupDT4g.jpeg"/></div></div></figure><p id="bc9f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">作为一名java开发工程师，数组和集合在我的代码中随处可见。我经常使用集合或数组来处理数据，如过滤和对象转换。相信大家对数组的数据处理已经非常熟悉了。但是当数据处理比较复杂的时候，我们的代码就会很长，很难理解。这个时候我一般会把代码拆分成方法，给有意义的方法名，可以解决我的一部分问题。不过在java8之后，有了官方更高效便捷的解决方案:Stream API。</p><p id="2550" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">流是Java8中处理集合的关键抽象。它可以指定要对集合执行的操作，并可以执行非常复杂的操作，如搜索、过滤和映射数据。使用流API操作集合数据类似于使用SQL执行数据库查询。也可以使用流API并行执行操作。简而言之，流API提供了一种高效且易于使用的数据处理方式。</p><p id="fc25" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该流具有以下特征。</p><ul class=""><li id="67a8" class="la lb it js b jt ju jx jy kb lc kf ld kj le kn lf lg lh li bi translated">它不是数据结构，也不保存数据。</li><li id="3006" class="la lb it js b jt lj jx lk kb ll kf lm kj ln kn lf lg lh li bi translated">懒求值，在流的中间处理过程中，只记录操作，不立即执行，直到执行终止操作，才会进行实际的计算。</li></ul><p id="527d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">今天我就分享一些工作中常用的，非常有用的API。</p><h2 id="e6ec" class="lo lp it bd lq lr ls dn lt lu lv dp lw kb lx ly lz kf ma mb mc kj md me mf mg bi translated">要映射的列表</h2><p id="fbfd" class="pw-post-body-paragraph jq jr it js b jt mh jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj ml kl km kn im bi translated">在我们的工作中，经常会遇到列表或数组转换成映射的场景。<code class="fe mm mn mo mp b">Collectors.toMap</code>可以将列表转换成地图。代码显示如下:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="1b99" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">类似的还有<code class="fe mm mn mo mp b">Collectors.toList()</code>、<code class="fe mm mn mo mp b">Collectors.toSet()</code>，意思是把对应的流转换成一个列表或者集合。</p><h2 id="dc7b" class="lo lp it bd lq lr ls dn lt lu lv dp lw kb lx ly lz kf ma mb mc kj md me mf mg bi translated">使用分组方式分组</h2><p id="c156" class="pw-post-body-paragraph jq jr it js b jt mh jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj ml kl km kn im bi translated">执行聚合数据操作时经常使用分组，例如按国籍对用户进行分组。说到分组，相信大家都会想到SQL group by。在Java8之前，我们可能需要这样做:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="c39f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果使用groupingBy，只需要一行代码。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h2 id="9391" class="lo lp it bd lq lr ls dn lt lu lv dp lw kb lx ly lz kf ma mb mc kj md me mf mg bi translated">使用限制和跳过的内存分页</h2><p id="879f" class="pw-post-body-paragraph jq jr it js b jt mh jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj ml kl km kn im bi translated">有时候我们在内存中聚合数据后，数据量可能太大，无法一次性将数据返回前端。这时候就需要分页了。Stream api提供了limit和skip来完美地支持它。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h2 id="1ec5" class="lo lp it bd lq lr ls dn lt lu lv dp lw kb lx ly lz kf ma mb mc kj md me mf mg bi translated">使用filter()过滤元素</h2><p id="4a99" class="pw-post-body-paragraph jq jr it js b jt mh jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj ml kl km kn im bi translated">从集合中筛选出不符合条件的元素。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h2 id="c5e0" class="lo lp it bd lq lr ls dn lt lu lv dp lw kb lx ly lz kf ma mb mc kj md me mf mg bi translated">使用排序+比较器进行排序</h2><p id="a28b" class="pw-post-body-paragraph jq jr it js b jt mh jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj ml kl km kn im bi translated">排序绝对是集合操作中的高频操作。虽然有现成的集合工具进行排序，但是Stream api集成了这个功能，形成了自己的功能生态，进一步提高了api的便利性。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h2 id="1e00" class="lo lp it bd lq lr ls dn lt lu lv dp lw kb lx ly lz kf ma mb mc kj md me mf mg bi translated">使用reduce的聚合评估</h2><p id="0f63" class="pw-post-body-paragraph jq jr it js b jt mh jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj ml kl km kn im bi translated">stream api还有一个非常有用的方法<code class="fe mm mn mo mp b">reduce()</code>。使用reduce可以聚合集合中的所有元素以获得单个值。最典型的场景是数组求和。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="dc81" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当然，也可以使用reduce来执行其他的聚合操作，比如求一个数组的平均值。</p><h2 id="c080" class="lo lp it bd lq lr ls dn lt lu lv dp lw kb lx ly lz kf ma mb mc kj md me mf mg bi translated">使用映射转换类型</h2><p id="1a20" class="pw-post-body-paragraph jq jr it js b jt mh jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj ml kl km kn im bi translated">映射操作是重新处理流中的元素以形成新的流。这在开发中很有用，例如，我有一个用户集合，但我只需要使用用户的姓名和年龄，使用map方法可以做到这一点:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h2 id="d862" class="lo lp it bd lq lr ls dn lt lu lv dp lw kb lx ly lz kf ma mb mc kj md me mf mg bi translated">平面地图</h2><p id="3395" class="pw-post-body-paragraph jq jr it js b jt mh jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj ml kl km kn im bi translated">flatMap操作可以将多个相同类型的流组合成一个流。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h2 id="a5ae" class="lo lp it bd lq lr ls dn lt lu lv dp lw kb lx ly lz kf ma mb mc kj md me mf mg bi translated">最后</h2><p id="9037" class="pw-post-body-paragraph jq jr it js b jt mh jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj ml kl km kn im bi translated">Stream API以声明的方式处理集合数据，可以极大地提高Java程序员的生产率，让我们能够编写高效、干净、简洁的代码。希望大家都能掌握stream api，写出优雅的代码。感谢阅读。</p><div class="ms mt gp gr mu mv"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-draw-a-technical-architecture-diagram-2d2c3b4a1d07"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd iu gy z fp na fr fs nb fu fw is bi translated">如何绘制技术架构图</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">什么是架构图？为什么要画架构图？怎样才能画出一个简单易懂的…</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="ne l"><div class="nf l ng nh ni ne nj ky mv"/></div></div></a></div><div class="ms mt gp gr mu mv"><a rel="noopener  ugc nofollow" target="_blank" href="/seven-intellij-debug-tricks-that-every-java-developer-must-know-de26aaac736a"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd iu gy z fp na fr fs nb fu fw is bi translated">每个Java开发人员都必须知道的七个Intellij调试技巧</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">你知道这些把戏吗？这些一定会提高你的开发效率。</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="ne l"><div class="nk l ng nh ni ne nj ky mv"/></div></div></a></div><div class="ms mt gp gr mu mv"><a rel="noopener  ugc nofollow" target="_blank" href="/dont-use-fileinputstream-to-transfer-files-5990805de28e"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd iu gy z fp na fr fs nb fu fw is bi translated">不要使用FileInputStream传输文件</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">为了提高效率，请使用FileChannel。</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="ne l"><div class="nl l ng nh ni ne nj ky mv"/></div></div></a></div><div class="ms mt gp gr mu mv"><a href="https://medium.com/javarevisited/five-api-performance-optimization-tricks-that-every-java-developer-must-know-75324ee1d244" rel="noopener follow" target="_blank"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd iu gy z fp na fr fs nb fu fw is bi translated">每个Java开发人员都必须知道的五个API性能优化技巧</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">为什么你的API响应这么慢？也许你需要解决这些问题。</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">medium.com</p></div></div><div class="ne l"><div class="nm l ng nh ni ne nj ky mv"/></div></div></a></div></div></div>    
</body>
</html>