<html>
<head>
<title>Build a Chess Tactics App with React (Part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React构建一个象棋战术应用程序(第1部分)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/build-a-chess-tactics-app-with-react-part-1-49be01fc63b5?source=collection_archive---------6-----------------------#2020-12-31">https://levelup.gitconnected.com/build-a-chess-tactics-app-with-react-part-1-49be01fc63b5?source=collection_archive---------6-----------------------#2020-12-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="267a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">从头做起</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2e825c6ab6814de669b2b16d3a2a52c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rwPNPwtYwkaQp5YfmDpJbQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@louishansel?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Louis Hansel @ shotsoflouis</a>在<a class="ae kv" href="https://unsplash.com/s/photos/online-chess?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="d348" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我的上一篇文章中，我构建了一个简单的象棋应用来展示创建象棋应用是多么简单。在这篇文章中，让我们更进一步，建立一个象棋战术应用程序。</p><h2 id="cb1b" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">系列</h2><ul class=""><li id="a944" class="ml mm iq ky b kz mn lc mo lf mp lj mq ln mr lr ms mt mu mv bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/build-a-chess-tactics-app-with-react-part-1-49be01fc63b5">用React构建一个象棋战术App(第一部分)</a>(本帖)</li><li id="1ae9" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/build-a-chess-tactics-app-with-react-part-2-35621640afd1">用React构建一个象棋战术应用(第二部分)</a></li></ul><h2 id="04f5" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">先决条件</h2><ul class=""><li id="2295" class="ml mm iq ky b kz mn lc mo lf mp lj mq ln mr lr ms mt mu mv bi translated">浏览一下<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/how-to-create-a-simple-chess-app-with-react-e18c0179b167">我的上一篇帖子</a>，这样你就知道了基本的国际象棋编程术语。</li><li id="d8d0" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated">反应(明显)</li></ul><h2 id="b525" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">我们在建造什么</h2><p id="3a9c" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">一如既往，在开始之前。让我们快速浏览一下我们将要构建的内容。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/bd3b18402bd5ea03233285ca47cd3f25.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/1*mUcBYuUilYxqhoKGbJ7fCg.gif"/></div></figure><p id="8b2a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将建立这个应用程序的一部分。在这一部分中，我们将创建应用程序的核心组件<code class="fe nf ng nh ni b">TacticBoard</code>，并使用一些硬编码策略来测试它。</p><p id="d167" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在下一部分。我们将把这个应用程序连接到一个国际象棋战术API，并添加移动反馈。</p><h2 id="f68f" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">我们开始吧</h2><p id="bb82" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">创建一个新的支持typescript的react应用程序。</p><pre class="kg kh ki kj gt nj ni nk nl aw nm bi"><span id="3db5" class="ls lt iq ni b gy nn no l np nq">npx create-react-app tactics-trainer --template=typescript</span></pre><p id="c31c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装<code class="fe nf ng nh ni b">chessboardjsx</code>和<code class="fe nf ng nh ni b">chess.js</code></p><pre class="kg kh ki kj gt nj ni nk nl aw nm bi"><span id="292d" class="ls lt iq ni b gy nn no l np nq">yarn add chessboardjsx chess.js @types/chess.js</span></pre><p id="2a61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">删除<code class="fe nf ng nh ni b">App.tsx</code>、<code class="fe nf ng nh ni b">App.css</code>中的所有代码。我们将从创建战术界面开始。我在<code class="fe nf ng nh ni b">src/types/Tactic.ts</code>保存这个文件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">战略</figcaption></figure><p id="5785" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nf ng nh ni b">fen</code>是战术的起始位置。<code class="fe nf ng nh ni b">blunderMove</code>是国际象棋的<a class="ae kv" href="https://www.chessprogramming.org/Algebraic_Chess_Notation#Standard_Algebraic_Notation_.28SAN.29" rel="noopener ugc nofollow" target="_blank">三</a>步棋，包含着错误的一步棋，从而产生一种战术。<code class="fe nf ng nh ni b">solution</code>是一组<a class="ae kv" href="https://www.chessprogramming.org/Algebraic_Chess_Notation#Standard_Algebraic_Notation_.28SAN.29" rel="noopener ugc nofollow" target="_blank">散</a>招式，内含战术解答。</p><p id="cae4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们已经完成了战术界面，让我们来构建<code class="fe nf ng nh ni b">TacticBoard</code>。在我们开始之前，我们将需要一些utils函数来使<code class="fe nf ng nh ni b">TacticBoard</code>工作。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="6fbd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们分解这些功能。</p><ul class=""><li id="8af2" class="ml mm iq ky b kz la lc ld lf nt lj nu ln nv lr ms mt mu mv bi translated"><code class="fe nf ng nh ni b">getSideToPlayFromFen</code>——给定一个<a class="ae kv" href="https://www.chessprogramming.org/Forsyth-Edwards_Notation" rel="noopener ugc nofollow" target="_blank">分</a>，得到哪一方下一步棋。</li><li id="9571" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated"><code class="fe nf ng nh ni b">makeMove</code> —给定一个<a class="ae kv" href="https://www.chessprogramming.org/Forsyth-Edwards_Notation" rel="noopener ugc nofollow" target="_blank">分</a>和移动类型<code class="fe nf ng nh ni b">string</code>或<code class="fe nf ng nh ni b">ShortMove</code>。在栅栏上移动并在移动后返回栅栏。</li><li id="c3e5" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated"><code class="fe nf ng nh ni b">validateMove</code> —这是我们将用来确认已玩过的招式的功能。它接受3个参数(fen，move，solution ),如果有效，则返回下一个fen和剩余的解决方案，否则为null。</li></ul><h2 id="369d" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">战术板</h2><p id="2d11" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">现在我们必须做好基础工作。再来看<code class="fe nf ng nh ni b">TacticBoard</code>组件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><h2 id="5586" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">了解战术板</h2><p id="bdb0" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">从道具开始。我们有4个道具:</p><ul class=""><li id="0cbe" class="ml mm iq ky b kz la lc ld lf nt lj nu ln nv lr ms mt mu mv bi translated"><code class="fe nf ng nh ni b">tactic</code> —在棋盘上游戏的战术对象。</li><li id="9dba" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated"><code class="fe nf ng nh ni b">onIncorrect</code> —如果走法不正确，则进行回调调用。</li><li id="296d" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated"><code class="fe nf ng nh ni b">onCorrect</code> —如果播放的移动是正确的，则回调调用。</li><li id="a3e6" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated"><code class="fe nf ng nh ni b">onSolve</code> —战术解决后的回叫。</li></ul><p id="468e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么我们有两个状态变量。</p><ul class=""><li id="734a" class="ml mm iq ky b kz la lc ld lf nt lj nu ln nv lr ms mt mu mv bi translated"><code class="fe nf ng nh ni b">fen</code> —保持战术的初始位置。每当一个游戏的移动是正确的或者策略被解决的时候得到更新。</li><li id="6c04" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated"><code class="fe nf ng nh ni b">solution</code> —这将保持战术的状态。当策略被解决时，我们不断地移除解决方案的第一项。一旦解为空，战术也就解决了。</li></ul><p id="0222" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们使用<code class="fe nf ng nh ni b">useEffect</code>挂钩来播放<code class="fe nf ng nh ni b">blunderMove</code>并在组件安装后更新<code class="fe nf ng nh ni b">fen</code>。</p><p id="bda2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nf ng nh ni b">handleMove</code> —当用户在棋盘上移动时调用。我们在<code class="fe nf ng nh ni b">handleMove</code>中做的第一件事是检查所下的棋是否有效，并更新<code class="fe nf ng nh ni b">fen</code>和<code class="fe nf ng nh ni b">solution</code>。叫<code class="fe nf ng nh ni b">onCorrect</code>。否则调用<code class="fe nf ng nh ni b">onIncorrect</code>因为所下的棋不正确。</p><p id="6c6b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们检查<code class="fe nf ng nh ni b">solution</code>是否不为空，并自动播放下一步棋，再次更新<code class="fe nf ng nh ni b">fen</code>和<code class="fe nf ng nh ni b">solution</code>。如果<code class="fe nf ng nh ni b">solution</code>为空，则表示该战术已解决。所以我们称之为<code class="fe nf ng nh ni b">onSolve</code>。</p><p id="4ebe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，棋盘很像上一篇<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/how-to-create-a-simple-chess-app-with-react-e18c0179b167">文章</a>中的棋盘，除了我们有两个额外的道具。</p><ul class=""><li id="8f78" class="ml mm iq ky b kz la lc ld lf nt lj nu ln nv lr ms mt mu mv bi translated"><code class="fe nf ng nh ni b">transitionDuration</code> —告诉棋盘移动动画的持续时间。</li><li id="5dc9" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated"><code class="fe nf ng nh ni b">orientation</code> —棋盘的方位。因为我们自动玩<code class="fe nf ng nh ni b">blunderMove</code>，所以我们将它设置为与初始fen方相反的一方来玩。</li></ul><h2 id="095a" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">测试策略板</h2><p id="3a3b" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">我们将用一些硬编码的策略来测试它。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="0bcd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们使用两个状态变量。</p><ul class=""><li id="af10" class="ml mm iq ky b kz la lc ld lf nt lj nu ln nv lr ms mt mu mv bi translated"><code class="fe nf ng nh ni b">key</code> —每当战术改变时，战术板组件触发组件重新渲染的键。</li><li id="40b8" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated">我们将在下一部分讨论为什么我们有一个战术数组而不是一个战术变量。</li></ul><p id="641b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们呈现传递键的<code class="fe nf ng nh ni b">TacticBoard</code>组件，证明回调函数。</p><p id="c665" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe nf ng nh ni b">onSolve</code>中，我们选择了一个随机战术，称之为<code class="fe nf ng nh ni b">nextTactic</code>。从<code class="fe nf ng nh ni b">tactics</code>数组中移除第一个战术。将下一个<code class="fe nf ng nh ni b">nextTactic</code>连接到<code class="fe nf ng nh ni b">tactics</code>数组。并更新<code class="fe nf ng nh ni b">key</code>状态。</p><p id="0c68" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你运行这个应用程序，你将能够解决一些战术(同样的4战术一遍又一遍)。</p><p id="8695" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在下一篇<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/build-a-chess-tactics-app-with-react-part-2-35621640afd1">文章</a>中，我们将把我们的应用程序插入到一个国际象棋战术API服务中，这样我们就可以免费玩无限国际象棋战术了。</p><p id="2153" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是这篇文章的内容。我希望你喜欢它。如果你看到了，请鼓掌。</p><p id="2dd8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读。</p></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><p id="cd90" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/build-a-chess-tactics-app-with-react-part-2-35621640afd1">用React构建一个象棋战术App(第二部分)</a></p></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><h1 id="7e6e" class="od lt iq bd lu oe of og lx oh oi oj ma jw ok jx md jz ol ka mg kc om kd mj on bi translated">分级编码</h1><p id="dada" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">感谢您成为我们社区的一员！<a class="ae kv" href="https://www.youtube.com/channel/UC3v9kBR_ab4UHXXdknz8Fbg?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">订阅我们的YouTube频道</strong> </a>或者加入<a class="ae kv" href="https://skilled.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Skilled.dev编码面试课程</strong> </a>。</p><div class="oo op gp gr oq or"><a href="https://skilled.dev" rel="noopener  ugc nofollow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd ir gy z fp ow fr fs ox fu fw ip bi translated">编写面试问题+获得开发工作</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">掌握编码面试的过程</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">技术开发</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf kp or"/></div></div></a></div></div></div>    
</body>
</html>