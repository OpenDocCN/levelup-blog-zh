# 问题解决 2038 年的问题

> 原文：<https://levelup.gitconnected.com/problem-solving-ii-26c3e0456c3a>

![](img/7a60d2010d2390503ce91fb45d271205.png)

从前，计算机资源是有限的。时钟速度、带宽、内存、存储，这些都是他们现在的千分之一千分之一。必须做出妥协，必须设计捷径。

从前，日期是用两位数的年份写在程序中的。距离世纪之交还有几十年，这是有意义的；当然 2/1/70 是在 1970 年，为什么你需要指定这该死的世纪？那些穿孔卡片有 80 个字符的限制，我们需要我们能得到的每一个字符。当日期从 1999 年转到 2000 年时，计算机认为现在已经过去了一百年，[这是一个问题](https://en.wikipedia.org/wiki/Year_2000_problem)。令人欣慰的是，人们看到了这一天的到来，并在它变成灾难之前解决了它。

从前，Unix 开发人员认为他们需要一种简单的方法来保持时间。他们决定采用 Unix 时间 T11，这是一个代表自 1970 年 1 月 1 日午夜以来经过的秒数的数字。(那是一个星期四。)开始时，在今天的许多系统上，它是用 32 位有符号二进制整数表示的。

对于 1972 年 12 月 10 日上午 10 点，Unix 时间是十进制的`219060000`。用二进制表示就是:

```
00001101 00001110 10010111 00100000
```

被签名，Unix 时间也可以代表过去。Unix 时间 1941 年 6 月 6 日上午 6:30 是`-806952600`，用二进制表示就是

```
11001111 11100110 11100001 01101000
```

有符号二进制数以代表正数的`0`和代表负数的`1`开始。

## 问题在于:

32 位有符号二进制整数可以计数到 2，147，483，647。那是很多秒，但是一年有很多秒；Unix 时间是标准化的，因此每天有 86，400 秒，每年(365.24 天，查一下)是 31，556，926 秒。2147483647 秒元旦过后，1970 年只带我们到 2038 年 1 月 19 日 03:14:07。(一个星期二。)一秒钟后，我们有了所谓的[整数溢出](http://projects.webappsec.org/w/page/13246946/Integer%20Overflows)，其中数字从 2，147，483，647 到-2，147，483，647，32 位 Unix time 认为这发生在 1901 年 12 月 13 日。

![](img/5848a9669629fbfe9f82cbc4f51eb970.png)

[来自维基共享资源](https://commons.wikimedia.org/wiki/File:Year_2038_problem.gif)

想象一下，你的汽车里程表翻转，但对世界来说。

这非常类似于 2000 年问题，但是要大得多。

## 解决方案是这样的:

64 位有符号整数可以计算更多的秒。好像，多了很多。一个 64 位有符号整数计数到 9，223，372，036，854，775，807(不管它值多少，第一个数字是在[第五万亿次](https://cs.uwaterloo.ca/~alopez-o/math-faq/node54.html)位)；该秒数转换为 12 月 4 日，292，277，026，596。周日 15 点 30 分 08 秒。(所以时间的终点是一个星期天的下午 3 点半，这正好向你表明宇宙是热闹的。)根据记录，[宇宙的估计总年龄](https://www.quora.com/How-old-does-our-universe-get-Are-there-any-predictions-calculations)是它的 5%。

大多数设计为在 64 位硬件上运行的系统都实现了 64 位 Unix time。正在努力在 32 位系统上实现 64 位 Unix 时间。这些努力正在进行中。

这里真正的问题在于嵌入式系统，比如你汽车的防抱死刹车，或者飞机的惯性导航系统。这些系统不打算升级。永远不会。只要汽车在行驶，飞机在飞行，这些系统就有望完成它们的工作。但是，这些系统中的大多数都没有利用 Unix 时间。

所以，这个问题是可以解决的，但是它的责任分散在每个地方的每个系统设计者或维护者身上。

## 教训是:

当我们建造任何东西时，我们显然不知道它会被如何使用或使用多长时间。我们必须对未来和意想不到的后果有所考虑。我认为，用心的设计和文档是关键，即使是在像我的愚蠢的小迷宫游戏[这样小而无足轻重的东西上练习也是好的。](https://github.com/no-relation/maze-game)

*我在找工作！如果您或您的公司需要懂 React、JavaScript、Ruby 或 Rails 的人，我邀请您查看我的 LinkedIn 个人资料*[](https://www.linkedin.com/in/echildress/)**。**