<html>
<head>
<title>Exploring the JavaScript Window Object: document.implementation and document.links</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索JavaScript窗口对象:document.implementation和document.links</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/introducing-the-javascript-window-object-implementation-laststylesheetused-and-links-c3a661696aee?source=collection_archive---------5-----------------------#2019-12-31">https://levelup.gitconnected.com/introducing-the-javascript-window-object-implementation-laststylesheetused-and-links-c3a661696aee?source=collection_archive---------5-----------------------#2019-12-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/87236ccf680fc08d7d6edf2848c1c20e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IwpDx2hgTSH_M5s_"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@petterrudwall?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">皮特·鲁德沃尔</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="d05f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">window</code>对象是一个全局对象，具有与当前DOM文档相关的属性。</p><p id="1172" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将查看<code class="fe le lf lg lh b">window.document</code>对象的属性，包括<code class="fe le lf lg lh b">implementation</code>和<code class="fe le lf lg lh b">links</code>属性。</p><h1 id="fee0" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">windw . document . implement</h1><p id="bd63" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated"><code class="fe le lf lg lh b">document.implementation</code>属性返回一个<code class="fe le lf lg lh b">DOMImplementation</code>对象，该对象具有允许我们创建文档对象或XMLDocument对象的属性，并且还有一个创建DocumentType对象的方法。它还有一个<code class="fe le lf lg lh b">hasFeature</code>方法，返回一个特性是否被支持。然而<code class="fe le lf lg lh b">hasFeature</code>方法并不可靠，因为除了与SVG相关的特性之外，它几乎对所有的东西都返回<code class="fe le lf lg lh b">true</code>。</p><p id="0be0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要创建一个XMLDocument对象，我们可以使用<code class="fe le lf lg lh b">document.implementation.createDocument</code>方法。它需要三个参数。第一个是名称空间URI，它是包含XML文档的名称空间URI的字符串。第二个是具有限定名的字符串，限定名是一个可选的前缀和一个冒号加要创建的文档的本地根名称。第三个参数是可选的文档类型参数，它是包含doctype的节点，默认为<code class="fe le lf lg lh b">null</code>。例如，我们可以在下面的代码中使用它:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="ccc8" class="mt lj it lh b gy mu mv l mw mx">const doc = document.implementation.createDocument ('<a class="ae kf" href="http://www.w3.org/1999/xhtml'" rel="noopener ugc nofollow" target="_blank">http://www.w3.org/1999/xhtml'</a>, 'html', null);<br/>const body = document.createElementNS('<a class="ae kf" href="http://www.w3.org/1999/xhtml'" rel="noopener ugc nofollow" target="_blank">http://www.w3.org/1999/xhtml'</a>, 'body');<br/>body.setAttribute('id', 'hello');<br/>body.innerHTML = 'hello';<br/>doc.documentElement.appendChild(body);<br/>console.log(body);</span></pre><p id="9303" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后在<code class="fe le lf lg lh b">console.log</code>的最后一行，我们得到:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="c234" class="mt lj it lh b gy mu mv l mw mx">&lt;body ae kf" href="http://www.w3.org/1999/xhtml" rel="noopener ugc nofollow" target="_blank"&gt;http://www.w3.org/1999/xhtml" id="hello"&gt;hello&lt;/body&gt;</span></pre><p id="43c0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以将上一个示例中创建的文档对象放入IFrame中，首先添加一个<code class="fe le lf lg lh b">iframe</code>元素，如下所示:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="483c" class="mt lj it lh b gy mu mv l mw mx">&lt;iframe id='frame'&gt;&lt;/iframe&gt;</span></pre><p id="7371" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，在我们的脚本中，我们可以通过添加以下内容来扩展上面的示例:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="5323" class="mt lj it lh b gy mu mv l mw mx">const doc = document.implementation.createDocument('<a class="ae kf" href="http://www.w3.org/1999/xhtml'" rel="noopener ugc nofollow" target="_blank">http://www.w3.org/1999/xhtml'</a>, 'html', null);<br/>const body = document.createElementNS('<a class="ae kf" href="http://www.w3.org/1999/xhtml'" rel="noopener ugc nofollow" target="_blank">http://www.w3.org/1999/xhtml'</a>, 'body');<br/>body.setAttribute('id', 'hello');<br/>body.innerHTML = 'hello';<br/>doc.documentElement.appendChild(body);</span><span id="f088" class="mt lj it lh b gy my mv l mw mx">const frame = document.getElementById("frame");<br/>const destDocument = frame.contentDocument;<br/>const srcNode = doc.documentElement;<br/>const newNode = destDocument.importNode(srcNode, true);</span><span id="478c" class="mt lj it lh b gy my mv l mw mx">destDocument.replaceChild(newNode, destDocument.documentElement);</span></pre><p id="5785" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中。我们将doctype的名称空间、限定标记和<code class="fe le lf lg lh b">null</code>传递到第二行的<code class="fe le lf lg lh b">createDocument</code>方法中。</p><p id="ac0f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们在第三行创建一个<code class="fe le lf lg lh b">p</code>元素，将内容设置为“hello”到<code class="fe le lf lg lh b">p</code>标签，然后我们将它附加到新创建的文档的<code class="fe le lf lg lh b">body</code>中，然后我们获取从<code class="fe le lf lg lh b">createHTMLDocument</code>方法创建的<code class="fe le lf lg lh b">doc</code>对象的<code class="fe le lf lg lh b">documentElement</code>，然后用<code class="fe le lf lg lh b">importNode</code>方法复制节点。</p><p id="9ff3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，在最后一行，我们用从<code class="fe le lf lg lh b">importNode</code>方法获得的文档节点替换了iframe的内容。</p><p id="0180" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在运行了所有这些之后，我们应该在IFrame中得到单词“hello”。</p><p id="91dc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">createDocumentType</code>方法让我们创建一个<code class="fe le lf lg lh b">DocumentType</code>对象。这可以作为第三个参数传递给<code class="fe le lf lg lh b">createDocument</code>，也可以通过<code class="fe le lf lg lh b">insertBefore()</code>或<code class="fe le lf lg lh b">replaceChild()</code>之类的方法放入文档。它需要三个参数。</p><p id="b643" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第一个参数是限定名，类似于<code class="fe le lf lg lh b">svg:svg</code>。第二个是公共ID，它是一个包含公共标识符的字符串，第三个是系统ID，它是一个包含系统标识符的字符串。例如，如果我们有以下代码:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="1879" class="mt lj it lh b gy mu mv l mw mx">const doctype = document.implementation.createDocumentType('svg:svg', '-//W3C//DTD SVG 1.1//EN', '<a class="ae kf" href="http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'" rel="noopener ugc nofollow" target="_blank">http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'</a>);</span><span id="106e" class="mt lj it lh b gy my mv l mw mx">const doc = document.implementation.createDocument('<a class="ae kf" href="http://www.w3.org/2000/svg'" rel="noopener ugc nofollow" target="_blank">http://www.w3.org/2000/svg'</a>, 'svg:svg', doctype);</span><span id="62a8" class="mt lj it lh b gy my mv l mw mx">console.log(doc.doctype);<br/>console.log(doc.doctype.publicId);<br/>console.log(doc.doctype.systemId);</span></pre><p id="eef7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们回来了:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="3cfc" class="mt lj it lh b gy mu mv l mw mx">&lt;!doctype svg:svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "<a class="ae kf" href="http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" rel="noopener ugc nofollow" target="_blank">http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd</a>"&gt;</span><span id="0967" class="mt lj it lh b gy my mv l mw mx">-//W3C//DTD SVG 1.1//EN</span><span id="d8cf" class="mt lj it lh b gy my mv l mw mx"><a class="ae kf" href="http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" rel="noopener ugc nofollow" target="_blank">http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd</a></span></pre><p id="17c7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第一个是我们创建的doctype。最后两个日志输出是我们传入的内容。</p><p id="74ce" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用<code class="fe le lf lg lh b">createHTMLDocument</code>方法，我们可以创建一个HTML文档对象。它需要一个参数，即<code class="fe le lf lg lh b">title</code>，除了IE之外，它是可选的。它是一个字符串，代表我们给文档的标题。我们可以使用它来创建一个新的文档对象，然后通过首先在HTML文件中添加一个<code class="fe le lf lg lh b">iframe</code>元素将它放入IFrame中，如下面的代码所示:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="226e" class="mt lj it lh b gy mu mv l mw mx">&lt;iframe id='frame'&gt;&lt;/iframe&gt;</span></pre><p id="a4e1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以使用下面的代码中的<code class="fe le lf lg lh b">createHTMLDocument</code>方法创建HTML文档:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="cf41" class="mt lj it lh b gy mu mv l mw mx">const frame = document.getElementById("frame");<br/>const doc = document.implementation.createHTMLDocument("Hello");<br/>const p = doc.createElement("p");<br/>p.innerHTML = "hello";<br/>doc.body.appendChild(p);<br/>const destDocument = frame.contentDocument;<br/>const srcNode = doc.documentElement;<br/>const newNode = destDocument.importNode(srcNode, true);<br/>destDocument.replaceChild(newNode, destDocument.documentElement);</span></pre><p id="023f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中。我们将标题传递给第二行的<code class="fe le lf lg lh b">createHTMLDocument</code>方法。</p><p id="56db" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们在第三行创建一个<code class="fe le lf lg lh b">p</code>元素，将内容设置为<code class="fe le lf lg lh b">p</code>标签的“hello ”,然后我们将它附加到新创建文档的<code class="fe le lf lg lh b">body</code>,然后我们获取从<code class="fe le lf lg lh b">createHTMLDocument</code>方法创建的<code class="fe le lf lg lh b">doc</code>对象的<code class="fe le lf lg lh b">documentElement</code>,然后用<code class="fe le lf lg lh b">importNode</code>方法复制节点。</p><p id="7191" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，在最后一行，我们用从<code class="fe le lf lg lh b">importNode</code>方法获得的文档节点替换了iframe的内容。</p><p id="716e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在所有这些都运行之后，我们应该在IFrame中得到单词“hello ”,当我们检查IFrame时，我们应该得到<code class="fe le lf lg lh b">title</code>标记应该有“Hello”。</p><p id="0c11" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">hasFeature</code>方法被否决了，它对于检查特性不是很有用。它接受两个参数，一个是要检查的特性的字符串，另一个是特定特性的版本。例如，如果我们有:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="ab20" class="mt lj it lh b gy mu mv l mw mx">console.log(document.implementation.hasFeature('HTML', '5'));</span></pre><p id="b391" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它记录了<code class="fe le lf lg lh b">true</code>，因为这是该方法为大多数特性返回的内容。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/ee11cd38248a70c3589659f541a93805.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5Cp4K0RZV5adtQ8q"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@mikezo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">迈克·阿隆佐</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="5197" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">windw.document.links</h1><p id="25e8" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated"><code class="fe le lf lg lh b">links</code>属性是一个只读属性，它包含一个文档对象的所有<code class="fe le lf lg lh b">area</code>和<code class="fe le lf lg lh b">a</code>元素，并设置了<code class="fe le lf lg lh b">href</code>属性的值。它返回一个HTMLCollection，这是一个类似数组的对象，我们可以用<code class="fe le lf lg lh b">for...of</code>循环遍历它，或者用spread操作符将其转换为一个数组。例如，如果我们的HTML中有以下链接:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="a487" class="mt lj it lh b gy mu mv l mw mx">&lt;a href='<a class="ae kf" href="http://google.com'" rel="noopener ugc nofollow" target="_blank">http://google.com'</a>&gt;Google&lt;/a&gt;<br/>&lt;a href='<a class="ae kf" href="http://yahoo.com'" rel="noopener ugc nofollow" target="_blank">http://yahoo.com'</a>&gt;Yahoo&lt;/a&gt;<br/>&lt;a href='<a class="ae kf" href="http://medium.com'" rel="noopener">http://medium.com'</a>&gt;Medium&lt;/a&gt;</span></pre><p id="71d2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以像下面的代码一样用<code class="fe le lf lg lh b">for...of</code>循环遍历它们:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="41e9" class="mt lj it lh b gy mu mv l mw mx">for (const link of document.links) {<br/>  console.log(link);<br/>}</span></pre><p id="2b1e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以使用HTMLCollection对象的<code class="fe le lf lg lh b">item</code>方法通过索引获取每个链接。为此，我们可以编写以下代码:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="95e1" class="mt lj it lh b gy mu mv l mw mx">for (let i = 0; i &lt; document.links.length; i++) {<br/>  console.log(document.links.item(i));<br/>}</span></pre><p id="3b9a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">两个循环应该以相同的方式输出链接。我们还可以通过属性链接直接获取链接的属性，如下面的代码所示:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="434c" class="mt lj it lh b gy mu mv l mw mx">for (const link of document.links) {<br/>  console.log(link.href);<br/>}</span></pre><p id="4565" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们从<code class="fe le lf lg lh b">console.log</code>语句中得到以下内容:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="d1fb" class="mt lj it lh b gy mu mv l mw mx"><a class="ae kf" href="http://google.com/" rel="noopener ugc nofollow" target="_blank">http://google.com/</a><br/><a class="ae kf" href="http://yahoo.com/" rel="noopener ugc nofollow" target="_blank">http://yahoo.com/</a><br/><a class="ae kf" href="http://medium.com/" rel="noopener">http://medium.com/</a></span></pre><h2 id="29fc" class="mt lj it bd lk na nb dn lo nc nd dp ls kr ne nf lw kv ng nh ma kz ni nj me nk bi translated">结论</h2><p id="9db8" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">对于<code class="fe le lf lg lh b">document</code>对象，我们有一些方便的属性，让我们通过使用它的方便属性来获取文档中的元素。<code class="fe le lf lg lh b">document.implementation</code>属性对于动态创建新文档并附加到其他元素(如<code class="fe le lf lg lh b">iframe</code>)非常方便。</p><p id="20d0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这可以通过<code class="fe le lf lg lh b">createDocument</code>和<code class="fe le lf lg lh b">createHTMLDocument</code>方法完成。要从文档中获取所有的<code class="fe le lf lg lh b">a</code>和<code class="fe le lf lg lh b">area </code>元素，并设置<code class="fe le lf lg lh b">href</code>属性的值，我们可以使用<code class="fe le lf lg lh b">links</code>属性。</p><p id="6c94" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以用<code class="fe le lf lg lh b">for...of</code>循环遍历<code class="fe le lf lg lh b">document.links</code>条目。此外，HTMLCollection对象附带了一个<code class="fe le lf lg lh b">item</code>方法，我们可以通过索引获得想要的元素。</p><p id="928c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们可以通过使用属性名称作为元素的属性来获取代码中的属性值，从而获取HTMLCollection元素的属性。</p></div></div>    
</body>
</html>