<html>
<head>
<title>How to use google-maps-react: Part One</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用谷歌地图反应:第一部分</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-use-google-maps-react-57ba97ca897b?source=collection_archive---------7-----------------------#2021-08-10">https://levelup.gitconnected.com/how-to-use-google-maps-react-57ba97ca897b?source=collection_archive---------7-----------------------#2021-08-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e455d3f250faa61ef1326ccd4702de0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0auUWDNxcxpkp6eu_iNR7w.jpeg"/></div></div></figure><p id="93db" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我决定做一个React钓鱼应用时，我知道让用户保存位置是至关重要的，因为像个白痴一样站在岸边和钓鱼的主要区别之一是知道在哪里(T2)钓鱼。</p><p id="8fcb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">无论你是想在你钓到一条大鳟鱼的新钓鱼点放一根针，还是想为当地企业提供方向，或者显示房地产网站的搜索结果，在你的应用程序中添加一张地图都是非常强大的<strong class="ka ir"/>。</p><h1 id="4d05" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">从这篇文章中可以期待什么</h1><p id="545e" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">这是我在React应用程序中使用<strong class="ka ir"> GoogleMapReact </strong>构建高功能动态地图系列的第一部分。假设您在本系列结束时已经熟悉React，那么您应该能够创建自己的地图组件，并根据自己的需要为其提供定制的功能。到本文结束时，您应该有一个运行的地图，并能够使用自定义标记填充它。</p><p id="7de3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> GoogleMapReact </strong>让您可以访问Google Maps API的功能，还允许您在地图中呈现自定义的React组件。事实上，它会将任何具有<strong class="ka ir"> lat </strong>和<strong class="ka ir"> lng </strong>属性的组件渲染到地图上。这真是太棒了。</p><h1 id="93a0" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">谷歌应用编程接口</strong></h1><p id="4ec4" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">要开始，您需要创建一个Google API项目。你可以在这里这样做<a class="ae ma" href="https://developers.google.com/workspace/guides/create-project" rel="noopener ugc nofollow" target="_blank">。一旦你创建了你的项目，启用<strong class="ka ir"> Maps JavaScript API </strong>并获得一个<strong class="ka ir"> API密匙</strong>。有很多关于如何做到这一点的资源，谷歌文档可以在这里找到</a><a class="ae ma" href="https://developers.google.com/maps/documentation/javascript/get-api-key" rel="noopener ugc nofollow" target="_blank"/>。一旦你有了你的API密匙，请保管好它，我们以后会用到它。</p><h1 id="012f" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">NPM套餐</strong></h1><p id="8099" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">有许多名称相似的不同包，所以请确保您使用的是<strong class="ka ir"> google-map-react </strong>(而不是react-google-maps或google-maps-react)。正确的包装可以在这里找到<a class="ae ma" href="https://www.npmjs.com/package/google-map-react" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="3f3e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过运行以下命令在react应用程序中安装软件包:</p><p id="18b7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mb mc md me b">npm i google-map-react</code></p><h1 id="24bc" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">起床跑步</strong></h1><p id="4be1" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">接下来，我们将创建自己的地图组件，在我们的应用程序中进行渲染。我们将在我们的<strong class="ka ir"> MapExample </strong>组件中导入<strong class="ka ir"> GoogleMapReact </strong>。此外，最初需要一些东西，以便地图能够正确显示和运行。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/c92eb24d0a37a7a0af728078a756d0f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8rt7bRwGwkA6k0p-XA3z0Q.png"/></div></div></figure><h1 id="ca50" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">设置内嵌尺寸</strong></h1><p id="678b" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">设置MapExample组件的宽度和高度。作为所有谷歌地图的要求，导入的地图将填充其父组件的维度，但如果没有维度集，它将折叠到零。我用内联CSS设置尺寸，以确保它总是以设置的尺寸加载。</p><h1 id="11be" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">默认地图道具</strong></h1><p id="b6db" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">在加载之前，谷歌地图会寻找它的<strong class="ka ir">默认中心、中心</strong>和<strong class="ka ir">默认缩放</strong>属性。d <strong class="ka ir"> efaultCenter </strong>和<strong class="ka ir"> center </strong>应该返回一个具有<strong class="ka ir"> lat </strong>和<strong class="ka ir"> lng </strong>属性的对象，并且<strong class="ka ir"> defaultZoom </strong>是一个整数。我从12开始。缩放整数越高，它被放大得越多。</p><p id="9e4e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在地图示例中，我将默认的<strong class="ka ir"> lat </strong>和<strong class="ka ir"> lng </strong>设置为我捕获所有这些斑点鳟鱼的地点。:)</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/02fc45083d9e168f572383577968bb08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FxF12I2YJXEpoBDlcOLtow.jpeg"/></div></div></figure><p id="6735" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">中心</strong>被设置为<strong class="ka ir">本状态中心</strong>，目前与<strong class="ka ir">默认中心相同。你不希望将默认中心设置为州，因为谷歌地图不喜欢你改变默认属性，而且当你使用地图时，你会不断改变州的中心属性。</strong></p><h1 id="78f9" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">谷歌API键</strong></h1><p id="859e" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">在GoogleMapReact对象中，在<strong class="ka ir"> bootstrapURLKeys </strong>中传递您的API键。传入一个对象，该对象的key属性设置为引用中的API Key。</p><h1 id="01f8" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak"> OnChange状态更新</strong></h1><p id="e4eb" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我们希望我们的状态总是反映地图中心的当前位置，这可以通过用抓取工具拖动地图来改变。幸运的是，onChange prop内置了对当前<strong class="ka ir">中心</strong>和<strong class="ka ir">缩放</strong>属性的访问。在这个事件处理程序中，我们可以在每次地图改变时将状态更新到地图当前指向的位置。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ml"><img src="../Images/7189db2ade77ab435339ddad1de36d82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P0OFaqesmyMkpexMQCgPbQ.png"/></div></div></figure><p id="ceab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们已经建立并运行了地图，您的应用程序可能需要一些基本的功能。</p><h1 id="e244" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">获取用户的位置</strong></h1><p id="2adb" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">接下来，我们在MapExample组件中放置一个按钮，单击该按钮将获取用户的位置，并将地图重新置于该位置的中心。</p><p id="ccd7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们在应用程序组件中获取用户的位置。然后我们通过Props将它传递给MapExample组件。我还将其保存到localStor</p><p id="6fac" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">年龄的原因，我稍后会进入。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mm"><img src="../Images/80eb66973881a7622bcd97b7ae6c7efa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bu9wK3DlQuHpLIF06Yh7XA.png"/></div></div></figure><p id="815d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在MapExample组件中，我们制作了一个调用<strong class="ka ir"> centerMyLocation </strong>函数的按钮:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/48e3ed8c9ba62d3c7ad079c85d752646.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2wCnvIl5PW9kjpbOtUrYow.png"/></div></div></figure><p id="c827" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，MapExample组件中的这个函数通过更新状态将地图置于用户位置的中心。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/a1c0c4b8a999111cd1b4df9c4ccb4462.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v0mcsAwX8WRcN5YJMp-6xw.png"/></div></div></figure><h1 id="3c3a" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">放置标记</strong></h1><p id="5306" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">正如我之前说过的，GoogleMapReact最酷的事情之一是，它会将任何有<strong class="ka ir"> lat </strong>和<strong class="ka ir"> lng </strong>道具的组件渲染到地图上。您还可以创建具有满足您应用程序特定需求的功能的组件。所以让我们做一些标记吧！</p><h1 id="4197" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">我的位置标记</strong></h1><p id="6cf8" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">首先，我们将创建一个简单的MyLocationMarker组件，它在地图加载时自动显示用户的位置。我已经提供了一些内联CSS来使div变成蓝点。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mp"><img src="../Images/662fbd9a2cdedc71b1f4a8c295a81e7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XIKC_lsrHDDRLRQV7RBoDw.png"/></div></div></figure><p id="3e64" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从这里开始，我们所要做的就是将标记导入到MapExample中，并传入用户的lat和lng作为道具。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/d87954affb5682297907bfe4b8eb5f5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X4ZusL3jLAKk_pzwsZ-K-g.png"/></div></div></figure><p id="701b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后嘣！我们有用户的位置…</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mr"><img src="../Images/1e67cb5db83b2081f3058e1809ece020.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9oWfgwIdMIrfGhJ5zdx_TQ.png"/></div></div></figure><p id="577d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要让地图在加载时自动以用户的位置为中心，有几个选项。对于这个例子，我只是将用户的位置保存到localStorage，并在MapExample组件中检索它。然后我用逻辑OR运算符将其设置为状态。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/9199be6e61470fe83034f9af1bcfc83d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M2ox7h8J-M8637adba2U1g.png"/></div></div></figure><h1 id="6fad" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">重新加盖</strong></h1><p id="7942" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">到目前为止，在本系列的第一部分中，我们已经学习了如何:</p><ul class=""><li id="b6cd" class="mt mu iq ka b kb kc kf kg kj mv kn mw kr mx kv my mz na nb bi translated">将<strong class="ka ir"> google-map-react </strong>导入一个组件。</li><li id="58c4" class="mt mu iq ka b kb nc kf nd kj ne kn nf kr ng kv my mz na nb bi translated">设置默认道具。</li><li id="25f5" class="mt mu iq ka b kb nc kf nd kj ne kn nf kr ng kv my mz na nb bi translated">从<strong class="ka ir"> onChange </strong>事件处理程序中访问映射属性。</li><li id="1658" class="mt mu iq ka b kb nc kf nd kj ne kn nf kr ng kv my mz na nb bi translated">获取用户的位置。</li><li id="cca2" class="mt mu iq ka b kb nc kf nd kj ne kn nf kr ng kv my mz na nb bi translated">将标记组件设置到地图内用户的位置。</li></ul><p id="b5b6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望这能帮助你更好地使用谷歌地图。在本系列的下一部分，我将介绍如何用信息气泡创建更多的功能标记组件。编码快乐！</p></div></div>    
</body>
</html>