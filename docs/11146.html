<html>
<head>
<title>How to Write a C-like sizeof() function in Java? [Solved]</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Java写一个类似C的sizeof()函数？[已解决]</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-write-a-c-like-sizeof-function-in-java-9352e646d112?source=collection_archive---------2-----------------------#2022-02-19">https://levelup.gitconnected.com/how-to-write-a-c-like-sizeof-function-in-java-9352e646d112?source=collection_archive---------2-----------------------#2022-02-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="68b1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一个易于在Java中实现的sizeOf()函数，可以获得不同数据类型的大小。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://javarevisited.blogspot.com/2011/06/top-programming-interview-questions.html"><div class="gh gi kf"><img src="../Images/838f76b3eab77f43249ba8f97b9d80a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*C3cB1nIEs2FXAKrg"/></div></a><figcaption class="kn ko gj gh gi kp kq bd b be z dk translated">照片由<a class="ae kr" href="https://unsplash.com/@lucabravo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卢卡·布拉沃</a>在<a class="ae kr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="55ac" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果你刚开始学习Java，并且来自C背景，那么你可能已经注意到了<a class="ae kr" href="https://medium.com/javarevisited/10-best-places-to-learn-java-online-for-free-ce5e713ab5b2" rel="noopener"> Java </a>和<a class="ae kr" href="https://medium.com/javarevisited/10-best-c-programming-courses-for-beginners-2c2c1f6bcb12" rel="noopener"> C编程语言</a>之间的区别，比如<a class="ae kr" href="http://javarevisited.blogspot.sg/2013/07/java-string-tutorial-and-examples-beginners-programming.html#axzz4upeaPBNd" rel="noopener ugc nofollow" target="_blank"> String是Java </a>中的一个对象，而不是一个<code class="fe lo lp lq lr b">NULL</code>终止的字符数组。</p><p id="72ee" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">同样，Java中也没有<code class="fe lo lp lq lr b">sizeof()</code>运算符。所有的原始值都有一个预定义的大小，比如int是4字节，char是2字节，short是2字节，long和float是8字节，等等。</p><p id="7857" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">但是，如果您缺少操作符，那么为什么不让我们将它作为一个编码任务呢？如果你没问题，那么你的下一个任务就是<em class="ls">用Java </em>写一个方法，它可以像C语言中的<code class="fe lo lp lq lr b">sizeOf()</code>操作符/函数一样工作，并返回每个数字基本类型的字节大小，即除了布尔之外的所有基本类型。</p><p id="36e1" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">你们中的许多人会想，为什么我们不包括<a class="ae kr" href="https://www.java67.com/2018/03/java-convert-string-to-boolean.html" rel="noopener ugc nofollow" target="_blank">布尔</a>不就是需要一位来表示真假值吗？嗯，我在这个练习中没有包括Boolean，因为Boolean的大小在Java规范中没有严格定义，并且在不同的JVM之间有所不同</p><p id="53a1" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">另外，就你所知，Java中原语的<em class="ls">大小是固定的。它不依赖于平台。因此，在32位和64位机器上，一个int原语变量在Windows和Linux中都需要4个字节。</em></p><p id="7383" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">反正下面是Java 中不同<a class="ae kr" href="https://click.linksynergy.com/fs-bin/click?id=JVFxdTr9V80&amp;subid=0&amp;offerid=323058.1&amp;type=10&amp;tmpid=14538&amp;RD_PARM1=https%3A%2F%2Fwww.udemy.com%2Fjava-the-complete-java-developer-course%2F" rel="noopener ugc nofollow" target="_blank">原语类型的大小和默认值，供大家参考:</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://click.linksynergy.com/deeplink?id=JVFxdTr9V80&amp;mid=39197&amp;murl=https%3A%2F%2Fwww.udemy.com%2Fcourse%2Fjava-the-complete-java-developer-course%2F"><div class="gh gi lt"><img src="../Images/099f454ef5ce2bc02536beecc8f4823c.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*AKXbX_0wKJtNMAxq.png"/></div></a></figure><p id="39a3" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">现在，由你的创造力给出多个答案，但我们至少需要一个答案来解决这个编码问题。如果你们喜欢这个问题，那么我可能会把它列入我的<a class="ae kr" href="http://www.java67.com/2018/05/top-75-programming-interview-questions-answers.html" rel="noopener ugc nofollow" target="_blank"> 75个破解任何编程工作面试的编码问题列表</a>，如果这个问题有趣且具有挑战性，请留言。</p><div class="lu lv gp gr lw lx"><a href="https://www.java67.com/2018/06/data-structure-and-algorithm-interview-questions-programmers.html" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd ir gy z fp mc fr fs md fu fw ip bi translated">Java程序员100大数据结构和算法面试问题</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">数据结构和算法是任何编程工作面试的核心部分。不管你是不是C++…</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">www.java67.com</p></div></div><div class="mg l"><div class="mh l mi mj mk mg ml kl lx"/></div></div></a></div></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="5027" class="mt mu iq bd mv mw mx my mz na nb nc nd jw ne jx nf jz ng ka nh kc ni kd nj nk bi translated">Java sizeof()函数示例</h1><p id="2f95" class="pw-post-body-paragraph ks kt iq ku b kv nl jr kx ky nm ju la lb nn ld le lf no lh li lj np ll lm ln ij bi translated">这是我们实现<code class="fe lo lp lq lr b">sizeof</code>操作符的完整Java程序。虽然大小不一样，但用途是一样的。<code class="fe lo lp lq lr b">sizeof</code>返回一个特定的数据类型占用多少内存，这个方法就是这么做的。</p><pre class="kg kh ki kj gt nq lr nr bn ns nt bi"><span id="c085" class="nu mu iq lr b be nv nw l nx ny">/**<br/> * Java Program to print size of primitive data types e.g. byte, int, short, <br/> * double, float<br/> * char, short etc, in a method like C programming language's sizeof<br/> *<br/> * @author Javin Paul<br/> */<br/>public class SizeOf {<br/>    public static void main(String args[]) {<br/>        System.out.println(" size of byte in Java is (in bytes) :  " +<br/>            sizeof(byte.class));<br/>        System.out.println(" size of short in Java is (in bytes) :" +<br/>            sizeof(short.class));<br/>        System.out.println(" size of char in Java is (in bytes) :" +<br/>            sizeof(char.class));<br/>        System.out.println(" size of int in Java is (in bytes) :" +<br/>            sizeof(int.class));<br/>        System.out.println(" size of long in Java is (in bytes) :" +<br/>            sizeof(long.class));<br/>        System.out.println(" size of float in Java is (in bytes) :" +<br/>            sizeof(float.class));<br/>        System.out.println(" size of double in Java is (in bytes) :" +<br/>            sizeof(double.class));<br/>    }<br/>    /*<br/>     * Java method to return size of primitive data type based on <br/>     * hard coded values<br/>     * valid but provided by developer<br/>     */<br/>    public static int sizeof(Class dataType) {<br/>        if (dataType == null) {<br/>            throw new NullPointerException();<br/>        }<br/>        if (dataType == byte.class || dataType == Byte.class) {<br/>            return 1;<br/>        }<br/>        if (dataType == short.class || dataType == Short.class) {<br/>            return 2;<br/>        }<br/>        if (dataType == char.class || dataType == Character.class) {<br/>            return 2;<br/>        }<br/>        if (dataType == int.class || dataType == Integer.class) {<br/>            return 4;<br/>        }<br/>        if (dataType == long.class || dataType == Long.class) {<br/>            return 8;<br/>        }<br/>        if (dataType == float.class || dataType == Float.class) {<br/>            return 4;<br/>        }<br/>        if (dataType == double.class || dataType == Double.class) {<br/>            return 8;<br/>        }<br/>        return 4; // default for 32-bit memory pointer<br/>    }<br/><br/><br/>    /*<br/>     * A perfect way of creating confusing method name, sizeof and sizeOf<br/>     * this method take advantage of SIZE constant from wrapper class<br/>     */<br/>    public static int sizeOf(Class dataType) {<br/>        if (dataType == null) {<br/>            throw new NullPointerException();<br/>        }<br/>        if (dataType == byte.class || dataType == Byte.class) {<br/>            return Byte.SIZE;<br/>        }<br/>        if (dataType == short.class || dataType == Short.class) {<br/>            return Short.SIZE;<br/>        }<br/>        if (dataType == char.class || dataType == Character.class) {<br/>            return Character.SIZE;<br/>        }<br/>        if (dataType == int.class || dataType == Integer.class) {<br/>            return Integer.SIZE;<br/>        }<br/>        if (dataType == long.class || dataType == Long.class) {<br/>            return Long.SIZE;<br/>        }<br/>        if (dataType == float.class || dataType == Float.class) {<br/>            return Float.SIZE;<br/>        }<br/>        if (dataType == double.class || dataType == Double.class) {<br/>            return Double.SIZE;<br/>        }<br/>        return 4; // default for 32-bit memory pointer<br/>    }<br/>}</span></pre><pre class="nz nq lr oa ob aw oc bi"><span id="63a0" class="od mu iq lr b gy oe of l og ny">Output:</span><span id="dd5f" class="od mu iq lr b gy oh of l og ny">size of byte in Java is (in bytes) :  1</span><span id="9287" class="od mu iq lr b gy oh of l og ny">size of short in Java is (in bytes) :2</span><span id="db89" class="od mu iq lr b gy oh of l og ny">size of char in Java is (in bytes) :2</span><span id="1918" class="od mu iq lr b gy oh of l og ny">size of int in Java is (in bytes) :4</span><span id="3a0f" class="od mu iq lr b gy oh of l og ny">size of long in Java is (in bytes) :8</span><span id="6b81" class="od mu iq lr b gy oh of l og ny">size of float in Java is (in bytes) :4</span><span id="0e2a" class="od mu iq lr b gy oh of l og ny">size of double in Java is (in bytes) :8</span></pre><p id="fd03" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">这就是<strong class="ku ir">编写一个</strong> <code class="fe lo lp lq lr b"><strong class="ku ir">sizeof</strong></code> <strong class="ku ir">像Java </strong>中的一个方法的全部编程练习。这实际上很棘手，因为您没有考虑利用Java数据类型的预定义大小，也没有考虑利用包装类中定义的大小常量，如Integer或Double。如果您能找到任何其他方法来找到原始数据类型的大小，请告诉我们。</p><p id="d9f2" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">Java开发人员的其他<strong class="ku ir">编码面试问题</strong></p><ul class=""><li id="a498" class="oi oj iq ku b kv kw ky kz lb ok lf ol lj om ln on oo op oq bi translated">如何在数组中实现二分搜索法？(<a class="ae kr" href="http://www.java67.com/2016/05/java-program-to-perform-binary-search-without-recursion.html" rel="noopener ugc nofollow" target="_blank">解决方案</a>)</li><li id="ba15" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">学习数据结构和算法的前5门课程(<a class="ae kr" href="https://javarevisited.blogspot.com/2018/11/top-5-data-structures-and-algorithm-online-courses.html" rel="noopener ugc nofollow" target="_blank">课程</a></li><li id="1c55" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">如何在Java中原地反转数组？(<a class="ae kr" href="http://www.java67.com/2016/01/java-program-to-reverse-array-in-place.html" rel="noopener ugc nofollow" target="_blank">解决方案</a>)</li><li id="7115" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">如何检查数组是否包含特定值？(<a class="ae kr" href="http://java67.com/2014/11/how-to-test-if-array-contains-certain-value-in-java.html" rel="noopener ugc nofollow" target="_blank">解</a>)</li><li id="ebd1" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">如何找到一个数组中所有和等于k的对(<a class="ae kr" href="http://javarevisited.blogspot.com/2014/08/how-to-find-all-pairs-in-array-of-integers-whose-sum-equal-given-number-java.html" rel="noopener ugc nofollow" target="_blank">解</a>)</li><li id="c6d4" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">如何在不排序的情况下求一个数组中的最大最小数？(<a class="ae kr" href="http://java67.com/2014/02/how-to-find-largest-and-smallest-number-array-in-java.html" rel="noopener ugc nofollow" target="_blank">解</a>)</li><li id="eb3c" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">如何在排序后的数组中找到一个缺失的数字？(<a class="ae kr" href="http://java67.com/2014/12/how-to-find-missing-number-in-sorted.html" rel="noopener ugc nofollow" target="_blank">解</a></li><li id="7b10" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">如何在Java中从数组中移除一个元素？(<a class="ae kr" href="http://java67.com/2012/12/how-to-remove-element-from-array-in-java-example.html" rel="noopener ugc nofollow" target="_blank">解</a></li><li id="e9a0" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">如何从给定的数组中找到前2个数字？(<a class="ae kr" href="http://www.java67.com/2014/03/how-to-find-top-two-maximum-number-from-integer-array-java.html" rel="noopener ugc nofollow" target="_blank">解</a>)</li><li id="0f32" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">前30个链表编码面试问题(<a class="ae kr" href="http://javarevisited.blogspot.sg/2017/07/top-10-linked-list-coding-questions-and.html" rel="noopener ugc nofollow" target="_blank">看这里</a>)</li><li id="3162" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">来自编码访谈的前50个Java程序(<a class="ae kr" href="http://javarevisited.blogspot.sg/2017/07/top-50-java-programs-from-coding-Interviews.html" rel="noopener ugc nofollow" target="_blank">参见此处</a>)</li><li id="f661" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">面向程序员的5门免费数据结构和算法课程(<a class="ae kr" href="https://javarevisited.blogspot.com/2018/01/top-5-free-data-structure-and-algorithm-courses-java--c-programmers.html" rel="noopener ugc nofollow" target="_blank">课程</a>)</li><li id="130e" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">每个程序员都应该阅读的10本算法书(<a class="ae kr" href="http://www.java67.com/2015/09/top-10-algorithm-books-every-programmer-read-learn.html" rel="noopener ugc nofollow" target="_blank">书</a>)</li><li id="ef5b" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">10门面向程序员的免费数据结构和算法课程(<a class="ae kr" href="http://www.java67.com/2019/02/top-10-free-algorithms-and-data.html" rel="noopener ugc nofollow" target="_blank">课程</a>)</li><li id="5f13" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">来自访谈的100+数据结构编码问题(<a class="ae kr" href="http://www.java67.com/2018/06/data-structure-and-algorithm-interview-questions-programmers.html" rel="noopener ugc nofollow" target="_blank">问题</a>)</li><li id="cb13" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">如何在Java中使用冒泡排序对数组进行排序？(<a class="ae kr" href="http://www.java67.com/2012/12/bubble-sort-in-java-program-to-sort-integer-array-example.html" rel="noopener ugc nofollow" target="_blank">解</a>)</li><li id="b5b9" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">如何在Java中从一个未排序的数组中找到重复项？(<a class="ae kr" href="http://java67.com/2015/10/2-ways-to-find-duplicate-elements-in-java-array.html" rel="noopener ugc nofollow" target="_blank">解</a>)</li><li id="c83a" class="oi oj iq ku b kv or ky os lb ot lf ou lj ov ln on oo op oq bi translated">如何在Java中删除数组中的重复项？(<a class="ae kr" href="http://javarevisited.blogspot.com/2014/01/how-to-remove-duplicates-from-array-java-without-collection-API.html" rel="noopener ugc nofollow" target="_blank">解</a>)</li></ul><p id="0e18" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">感谢您阅读本文。如果你喜欢这篇文章，请与你的朋友和同事分享。如果您有任何问题或疑问，请告诉我们，我会尽力为您找到答案。一如既往的建议，评论，创新和更好的答案是最受欢迎的。<br/> <br/> <strong class="ku ir"> P. S. </strong> —如果你正在寻找一些免费的算法课程来提高你对数据结构和算法的理解，那么你也应该在Udemy上查看Java免费课程 中的<a class="ae kr" href="https://www.java67.com/2019/02/top-10-free-algorithms-and-data.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ku ir">数据结构。这是完全免费的，你需要做的就是创建一个免费的Udemy帐户来注册这门课程。<br/><br/><strong class="ku ir">【p . p . s .】</strong>—如果你想从技术面试中获得更多这样的问题，请参见<a class="ae kr" href="https://javarevisited.blogspot.com/2016/06/top-5-books-for-programming-coding-interviews-best.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ku ir">《破解编码面试》第六版</strong> </a>，其中包含来自不同软件公司、创业公司、投资银行和服务型公司的190多个编码问题。</strong></a></p><div class="lu lv gp gr lw lx"><a href="https://javarevisited.blogspot.com/2016/06/top-5-books-for-programming-coding-interviews-best.html#axzz5YWji1wWP" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd ir gy z fp mc fr fs md fu fw ip bi translated">编程/编码面试的前5本书——最好的</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">如果你正在准备编程工作面试，并寻找一些最好的编程问题的书籍…</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">javarevisited.blogspot.com</p></div></div><div class="mg l"><div class="ow l mi mj mk mg ml kl lx"/></div></div></a></div></div></div>    
</body>
</html>