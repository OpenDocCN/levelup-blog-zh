<html>
<head>
<title>10 Twig Filters You Should Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你应该知道的10个小过滤器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/10-twig-filters-you-should-know-9719285d1f83?source=collection_archive---------6-----------------------#2020-09-08">https://levelup.gitconnected.com/10-twig-filters-you-should-know-9719285d1f83?source=collection_archive---------6-----------------------#2020-09-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/2ad7b730693d439692f2c0b7dedf6e61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ouhtB5DJaAwubLn6"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://unsplash.com/@_imkiran?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">赛·基兰·阿纳加尼</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><div class=""/><div class=""><h2 id="1d72" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">以一种简单优雅的方式修改你的小枝变量</h2></div><p id="dec8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你以前使用过Twig，你可能已经知道过滤器，并且你可能经常使用它们。过滤器非常强大，允许您以简单而优雅的方式修改变量。有很多可用的过滤器，可能你还不知道所有的过滤器。</p><p id="d7e4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这正是我们将在本文中查看过滤器列表的原因。但在我们继续之前，我想让你知道，你可以在<a class="ae jg" href="https://twigfiddle.com/" rel="noopener ugc nofollow" target="_blank">twigfiddle.com</a>上摆弄这些滤镜。这个网站提供了一个小的在线游乐场，你可以在那里摆弄树枝。这可以省去在本地机器上设置环境的麻烦。</p><p id="485e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">事不宜迟，让我们直接进入你应该知道的10个树枝过滤器。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="8daf" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">1.系统默认值</h1><p id="bba2" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated"><em class="my">默认</em>过滤器返回指定的默认值，如果该值未定义或为空，则返回该值，否则返回变量值。该过滤器不仅适用于变量，也适用于对象和数组。</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="7bb6" class="ni mc jj ne b gy nj nk l nl nm">{{ name|default('No name defined') }}<br/><br/>{{ person.age|default('Age is not defined') }}<br/><br/>{{ person['age']|default('Age is not defined') }}</span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="15b1" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">2.nl2br</h1><p id="8092" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated"><code class="fe nn no np ne b">nl2br</code>代表<em class="my">换行到br </em>，这意味着这个过滤器在一个字符串中的所有换行符之前插入HTML换行符。所有的新行(<code class="fe nn no np ne b">\n</code>)都被一个HTML <code class="fe nn no np ne b">&lt;br&gt;</code>标签所取代。</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="e1d8" class="ni mc jj ne b gy nj nk l nl nm">{{ "Hey, how are you?\nJust fine."|nl2br }}</span><span id="f4a9" class="ni mc jj ne b gy nq nk l nl nm"><em class="my">{# outputs</em><br/><em class="my">    </em>Hey, how are you?<em class="my">&lt;br /&gt;</em><br/><em class="my">    Just fine.</em><br/><em class="my">#}</em></span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="145a" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">3.生的</h1><p id="51ac" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">默认情况下，当启用自动转义时，Twig中的所有内容都会被转义。如果你不想对一个变量进行转义，你必须显式地将它标记为安全的，这可以通过使用<em class="my"> raw </em>过滤器来实现。仅当原始滤镜是应用于该滤镜的最后一个滤镜时，这种方法才有效。</p><p id="5265" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，当您想要呈现包含HTML的变量时，此过滤器会很有用。在这种情况下，您不希望转义变量，而是按原样呈现它。</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="a501" class="ni mc jj ne b gy nj nk l nl nm">{{ data|raw }} <em class="my">{# The data variable won't be escaped #}</em></span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="8b01" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">4.日期</h1><p id="a6a7" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated"><em class="my">日期</em>过滤器将日期变量格式化为给定的格式。您可以将所需的格式作为第一个参数传入。第二个参数是可选的，用于指定时区。</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="a712" class="ni mc jj ne b gy nj nk l nl nm">{{ updated_at|date("d/m/Y") }}<br/>{{ "now"|date("d/m/Y") }}<br/>{{ updated_at|date("d/m/Y", "Europe/Amsterdam") }}</span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="8347" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">5.一批</h1><p id="1ae2" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated"><em class="my">批处理</em>过滤器分割列表列表中的一个列表——每个子列表被称为一个<em class="my">批处理</em>。第一个参数指定批处理的大小。第二个参数是一个占位符，用于填充缺失的项目。</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="c41d" class="ni mc jj ne b gy nj nk l nl nm">{% set names = ['John', 'Lisa', 'Frank', 'Ted'] %}<br/><br/>&lt;table&gt;<br/>{% for row in names|batch(3, 'No name') %}<br/>    &lt;tr&gt;<br/>        {% for column in row %}<br/>            &lt;td&gt;{{ column }}&lt;/td&gt;<br/>        {% endfor %}<br/>    &lt;/tr&gt;<br/>{% endfor %}<br/>&lt;/table&gt;</span></pre><p id="505d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是渲染后的样子:</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="6ddf" class="ni mc jj ne b gy nj nk l nl nm">&lt;table&gt;<br/>    &lt;tr&gt;<br/>        &lt;td&gt;John&lt;/td&gt;<br/>        &lt;td&gt;Lisa&lt;/td&gt;<br/>        &lt;td&gt;Frank&lt;/td&gt;<br/>    &lt;/tr&gt;<br/>    &lt;tr&gt;<br/>        &lt;td&gt;Ted&lt;/td&gt;<br/>        &lt;td&gt;No name&lt;/td&gt;<br/>        &lt;td&gt;No name&lt;/td&gt;<br/>    &lt;/tr&gt;<br/>&lt;/table&gt;</span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="cda1" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">6.替换</h1><p id="0cee" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated"><em class="my">替换</em>过滤器通过替换占位符来格式化给定的字符串。替换过滤器有一个参数，它是一个对象。键指定需要替换什么，相应的值指定需要替换什么。</p><p id="3810" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意，使用<em class="my"> % </em>作为分隔符完全是惯例，因此是可选的。</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="d555" class="ni mc jj ne b gy nj nk l nl nm">{{ "This is %name% and my hobby is %hobby%."|replace({'%name%': "Fred", '%hobby%': hobby}) }}<br/><em class="my">{# This is Fred and my hobby is tennis. #}</em></span><span id="6b35" class="ni mc jj ne b gy nq nk l nl nm">{{ "I have a dog"|replace({'dog': 'cat'}) }}<br/><em class="my">{# I have a cat #}</em></span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="6b88" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">7.第一</h1><p id="1c43" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated"><em class="my">第一个</em>过滤器返回序列、映射或字符串的第一个元素。</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="7313" class="ni mc jj ne b gy nj nk l nl nm">{{ ['a', 'b', 'c', 'd']|first }}<br/><em class="my">{# outputs a #}</em><br/><br/>{{ { a: 1, b: 2, c: 3, d: 4 }|first }}<br/><em class="my">{# outputs 1 #}</em><br/><br/>{{ 'abcd'|first }}<br/><em class="my">{# outputs a #}</em></span></pre><p id="9f42" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">就像第一个<em class="my">滤波器和最后一个<em class="my">滤波器一样。</em></em></p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="763f" class="ni mc jj ne b gy nj nk l nl nm">{{ ['a', 'b', 'c', 'd']|last }}<br/><em class="my">{# outputs d #}</em><br/><br/>{{ { a: 1, b: 2, c: 3, d: 4 }|last}}<br/><em class="my">{# outputs 4 #}</em><br/><br/>{{ 'abcd'|last}}<br/><em class="my">{# outputs d #}</em></span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="78b3" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">8.无限的</h1><p id="dbd2" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated"><em class="my">无空格</em>过滤器移除HTML标签之间的空格。注意它<strong class="la jk">没有</strong>删除HTML标签中的空白。</p><p id="f27f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个标签是为了避免HTML标签之间的额外空白，以避免浏览器在某些情况下呈现异常。这并不意味着将生成的HTML的大小保持在最小。</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="7bfe" class="ni mc jj ne b gy nj nk l nl nm">"&lt;div&gt;<br/>        &lt;label&gt;Some text&lt;/label&gt;<br/>    &lt;/div&gt;<br/>"|spaceless }}<br/><br/><em class="my">{# output will be &lt;div&gt;&lt;label&gt;Some text&lt;/label&gt;&lt;/div&gt; #}</em></span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="9d88" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">9.轮次</h1><p id="9098" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated"><em class="my">舍入</em>过滤器将数字舍入到给定的精度。第一个参数是精度，默认值为0。第二个参数是舍入方法，默认为common。其他可能的舍入方法有<em class="my">天花板</em>和<em class="my">地板</em>。</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="47c1" class="ni mc jj ne b gy nj nk l nl nm">{{ 14.65|round }}<br/><em class="my">{# outputs 15#}</em><br/><br/>{{ 14.65|round(1, 'floor') }}<br/><em class="my">{# outputs 14.6 #}</em></span><span id="ecd0" class="ni mc jj ne b gy nq nk l nl nm">{{ 14.65|round(1, 'ceil') }}<br/><em class="my">{# outputs 14.7 #}</em></span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="732a" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">10.键</h1><p id="8036" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated"><em class="my"> keys </em>过滤器返回一个数组的键，当你想要迭代一个数组的键时，这个过滤器很方便。</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="2fff" class="ni mc jj ne b gy nj nk l nl nm">{% for key in items|keys %}<br/>    ...<br/>{% endfor %}</span></pre></div></div>    
</body>
</html>