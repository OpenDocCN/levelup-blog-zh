<html>
<head>
<title>Space Shooter Challenge: Wave System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">太空射击挑战:波浪系统</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/space-shooter-challenge-wave-system-377b65255d10?source=collection_archive---------0-----------------------#2021-06-11">https://levelup.gitconnected.com/space-shooter-challenge-wave-system-377b65255d10?source=collection_archive---------0-----------------------#2021-06-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/4248c2bad9d7ec845b8ffbdd4d2a7e80.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/1*0Ugz81HuTMAwqIzw3vCb4Q.gif"/></div></figure><p id="7705" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">下一个挑战是实现一个wave系统。虽然这不会像对付更多敌人那样彻底，但我至少可以把这个系统放在适当的位置。</p><p id="18ac" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">首先，我在<strong class="jw ir">画布内创建了一个<strong class="jw ir">空游戏对象</strong>，</strong>，其中包含了一个<strong class="jw ir"> Wave ID文本对象、</strong>和一个<strong class="jw ir"> Wave Timer文本对象。</strong></p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ks"><img src="../Images/7aace35c11400d64ee581738f9aed789.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KWDlPG4h93cuXHoukaKtKg.png"/></div></div></figure><p id="ed72" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">处理<strong class="jw ir"> Wave系统</strong>最有意义的脚本是<strong class="jw ir">游戏管理器。</strong>目前，<strong class="jw ir">小行星</strong>处理对<strong class="jw ir">产卵管理器</strong>的<strong class="jw ir">开始产卵调用</strong>，相反，我将其改为在<strong class="jw ir">游戏管理器</strong>上调用一个<strong class="jw ir">开始产卵公共方法</strong>，然后它可以在告诉<strong class="jw ir">产卵管理器</strong>做它的事情之前处理功能。</p><p id="870f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我需要一个<strong class="jw ir"> int变量</strong>来保存<strong class="jw ir"> Wave ID、</strong>和一个<strong class="jw ir"> float变量</strong>来保存<strong class="jw ir"> Wave time。</strong>我希望第一波有30秒长，所以我把时间初始化为20秒。</p><p id="fe73" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我这样做是因为每次调用<strong class="jw ir">start spaving方法</strong>时，我都希望Wave ID增加1，Wave Time增加10秒。从30秒开始，通过10波，每一波都比另一波长，最终会导致一场老板大战！现在，我只需要debug.log“你赢了！”</p><p id="dc89" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">从这里，我需要访问<strong class="jw ir"> UI管理器</strong>并调用<strong class="jw ir">公共方法</strong>来传递<strong class="jw ir"> ID </strong>和<strong class="jw ir">时间。</strong>除此之外，我还想调用<strong class="jw ir">产卵管理器</strong>来<strong class="jw ir">开始产卵</strong>，并在方法中添加了一个<strong class="jw ir"> int变量</strong>来传递<strong class="jw ir"> Wave ID。</strong></p><p id="cce5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">最后，我需要一个倒计时的方法…一个<strong class="jw ir">协程！</strong></p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lb"><img src="../Images/e90459380721d78d50026482a40af192.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HKhxmSl9-0xksVV6rCYRVg.png"/></div></div></figure><p id="f129" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">协程</strong>会将<strong class="jw ir"> _waveTime </strong>的<strong class="jw ir">浮点变量</strong>赋值给<strong class="jw ir"> _time。</strong>然后<strong class="jw ir">当时间大于0时，在更新<strong class="jw ir"> UI管理器</strong>并等待直到当前帧结束之前，时间</strong>将由<strong class="jw ir">增量时间</strong>修改。</p><p id="7d3e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">一旦<strong class="jw ir"> while循环</strong>完成，就可以在<strong class="jw ir"> Spawn Manager上调用<strong class="jw ir">公共方法</strong>，</strong>将<strong class="jw ir"> stop spawn bool </strong>设置为<strong class="jw ir"> true。</strong></p><p id="2d58" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然后，我创建了一个保持时间<strong class="jw ir"> WaitForSeconds变量</strong>，以便在再次调用<strong class="jw ir">start spashing</strong>之前等待。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lb"><img src="../Images/44a4063106852ea14caa809cb26c6384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LET6IufNHTwhh6d79ooKhA.png"/></div></div></figure><p id="9ab6" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在进入wave系统的生成功能之前，我想设置一下<strong class="jw ir"> UI </strong>。为此，我需要两个<strong class="jw ir">公共方法</strong>，它们将各自的<strong class="jw ir">文本组件</strong>分配给传递的值。</p><p id="7eb0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">对于时间变量，我首先需要将其四舍五入为一个int值<strong class="jw ir">以便于显示。</strong></p><p id="f7d8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当该波结束并且保持时间正在发生时，我希望显示器闪烁，向用户显示他们已经通过了该波，因此我创建了一个类似于我的另一个<strong class="jw ir"> UI闪烁例程</strong>的<strong class="jw ir">协程</strong>。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lb"><img src="../Images/cb120aa736831b7cc53799416a6ee32c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U5RgakABwZG6UFYUi7sIgw.png"/></div></div></figure><p id="50b7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在是产卵功能。在<strong class="jw ir">start spaving方法</strong>中，我正在从<strong class="jw ir">游戏管理器接收<strong class="jw ir"> Wave ID </strong>。</strong>所以在调用<strong class="jw ir"> SpawnEnemyRoutine之前，</strong>我首先想传递一个<strong class="jw ir">方法</strong>，它可以根据<strong class="jw ir"> Wave ID </strong>为<strong class="jw ir">例程</strong>分配不同的值。</p><p id="a08d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">因此，我创建了下面的<strong class="jw ir"> switch语句，</strong>它现在对每种情况都非常相似，但是当增加额外的敌人时会有更多的变化。现在我只是简单地通过不同的<strong class="jw ir">重生时间</strong>，它对应于<strong class="jw ir">实例化</strong>每个敌人之前的时间量，也是一个<strong class="jw ir"> int变量</strong>，用于表示<strong class="jw ir"> ID的</strong>在<strong class="jw ir">敌人预置阵列中可以被随机访问的最大数量。然后我可以调用<strong class="jw ir">启动协同例程</strong>并修改这些变量。</strong></p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lb"><img src="../Images/6968ae925a4b79e16f30d04cbfb9c644.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ws18w3J0Fc-7VBEQarT6Iw.png"/></div></div></figure><p id="7fcb" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">最后，当每一波结束时，我希望所有的敌人消失，但要以视觉上有意义的方式。因此在<strong class="jw ir">停止产卵方法</strong>和<strong class="jw ir">开启死亡方法</strong>中，我调用了一个新的<strong class="jw ir">方法</strong>叫做<strong class="jw ir">清除敌人。</strong></p><p id="c518" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在这个方法中，我用<strong class="jw ir">敌人容器中的<strong class="jw ir">子组件</strong>创建了一个<strong class="jw ir">数组</strong>。</strong>然后对于每个敌人，我可以使用<strong class="jw ir"> GetComponent、</strong>访问它的<strong class="jw ir">脚本</strong>，并在各自的脚本中调用一个方法。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lb"><img src="../Images/149282bc7c464f7a725e0baca53d01b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yVZFRs5Jvd5foGtkafsfgg.png"/></div></div></figure><p id="14d6" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在<strong class="jw ir">敌方脚本中，</strong>我的<strong class="jw ir">净空方法</strong>，将<strong class="jw ir">速度变量</strong>乘以2，将<strong class="jw ir"> canFire bool </strong>设置为<strong class="jw ir">假，</strong>启用<strong class="jw ir">推进器视觉</strong>，并将一个新的<strong class="jw ir"> bool waveEnded </strong>设置为<strong class="jw ir">假。</strong></p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lb"><img src="../Images/2655c60d4e9913196ed2a58ff59c9213.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MqRZLSNc6NSsRpqvuGv-uA.png"/></div></div></figure><p id="b912" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我创造的这个新球，是用来在敌人走出垂直范围时消灭敌人的，而不是在屏幕顶部重新显示。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lb"><img src="../Images/b0ef2a1a1e6c28a59ee0e2a2a1f8d74e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FWyLwpiXck3dr2McBkGYiQ.png"/></div></div></figure><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ks"><img src="../Images/e0d80bb242bf7b4732fa7aea1b9d00b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wq09wWLDPuRkcwag2Bi3ow.gif"/></div></div></figure></div></div>    
</body>
</html>