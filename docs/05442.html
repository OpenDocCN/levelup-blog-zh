<html>
<head>
<title>4 Things you can do right now to get the most out of Redis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你现在可以做的4件事来充分利用Redis</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/4-things-you-can-do-right-now-to-get-the-most-out-of-redis-e8085e8494a1?source=collection_archive---------2-----------------------#2020-08-29">https://levelup.gitconnected.com/4-things-you-can-do-right-now-to-get-the-most-out-of-redis-e8085e8494a1?source=collection_archive---------2-----------------------#2020-08-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/9829d7fa685fc7e9f495cdde0c815cd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tPDg_A5FPQNMxUTTCLGT4g.jpeg"/></div></div></figure><div class=""/><p id="d191" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您还不知道的话，Redis是一个内存中的键值数据库，它能够存储简单的数据结构以及其他复杂的数据结构，如队列、集合和流。当您有几台不同的计算机运行一项服务的不同部分，需要在彼此之间共享和传递数据时，Redis非常有用。它还经常被用作缓存&amp;处理实时数据。</p><p id="b5c4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">阅读我上周的一篇文章，关于什么时候该用什么时候不该用Redis。</p><p id="4fab" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这个视频中，我将分享一些你现在可以做的快速的事情，以充分利用你的Redis。</p><h1 id="6ad6" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">1)存储JSON字符串，而不是使用HMSET</h1><p id="990f" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">Redis中有一个快捷的功能，允许您将多个项目存储到一个Hashmap中。通常，这可用于从redis队列中重新创建对象。实现通常如下所示。</p><figure class="mb mc md me gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ma"><img src="../Images/790540dfe96abae09d642e7573d02bc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OQRc98G_ofxpD1VCsx9daw.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">对象的HMSet</figcaption></figure><p id="8066" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这对于简单的字符串来说已经足够了，但是对于像列表这样的数据结构来说就不行了</p><figure class="mb mc md me gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/207c9e88a8eec527a246ac74d0de2253.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J-KqLHEtq-fIwWsWBR-obg.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">HMSET用数组分隔</figcaption></figure><p id="29b3" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另一种方法是使用json字符串在Redis中保存对象</p><figure class="mb mc md me gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/ba545da9558fcd9721392f6cc753fdb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4c-aYomBSCkUs5YZ9KWsWw.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">使用JSON字符串实现容错和可伸缩性</figcaption></figure><p id="dfa2" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将确保所有JSON可编码的值都能够保存在Redis中。它还将确保将来插入任何钥匙时无需任何额外的维护</p><h1 id="abbb" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">2)使用BLPop进行作业处理</h1><p id="fde3" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">开箱即用，Redis支持发布/订阅。Pub/Sub是一个用于实时交互应用程序发送和接收消息的协议。发布/订阅通常会被触发并被遗忘，因此一旦消息被触发，就不会有任何记录。如果您有一个架构，其中多个工作线程订阅同一个队列来接收消息，那么发布/订阅是一个很难扩展的解决方案。</p><figure class="mb mc md me gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/85f52eec6ee7353b68ba4dfcc3a6547c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t8oSo6kMkuNUtdK6i_gQcg.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">PubSub比较适合聊天</figcaption></figure><p id="0070" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">BLPOP是更好的方法。这类似于LPOP，但是B意味着这个函数将阻塞，直到队列中出现一个项目。结合运行循环，这将有效地成为一个可扩展到多个工作线程的作业队列。</p><figure class="mb mc md me gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/dfd8eadd844d85a929e84ad93357cbb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qjk-diHs_PV-n4hJDL_MCA.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">作业队列的BLPOP</figcaption></figure><h1 id="2fc2" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">3)使用唯一的Redis密钥</h1><p id="1845" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">Redis的默认行为是，一旦设置了键，就不会自动覆盖它们。为了更新密钥，需要两步过程，即删除，然后再次插入。如果您试图保存同一Redis键下的数据，这可能会导致数据完整性问题。</p><figure class="mb mc md me gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/8f3387f24c0d73efa16a410e95f1d012.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8U4LTZG2ICBk52t-skXaFg.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">不要重复使用钥匙</figcaption></figure><p id="9496" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用自定义的键命名约定来解决这个问题。Redis支持字节编码的字符串，所以Redis没有保留字符。</p><figure class="mb mc md me gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/0a63fe5bae651d03a87e9af186333741.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qwtOCwMOwf3dEDe1tTkLmQ.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">每次都创建一个唯一的密钥</figcaption></figure><h1 id="c03a" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">4)让您的密钥过期</h1><p id="ba04" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">Redis缓存可能会变大，尤其是在生产环境中。您希望避免任何迫使您转储整个缓存的情况。这可能意味着用户的停机时间和宝贵数据的丢失。相反，遵循随着时间的推移使您的密钥过期的最佳实践。这是对您的缓存进行自我管理的一种形式，可以确保您在很长一段时间内得到最佳使用。</p><figure class="mb mc md me gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/a98e64b9dbf37b6fccaaa753f5673913.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UU5jrCIqWyWcjiiV3u_zVQ.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">让你的钥匙过期！</figcaption></figure><p id="1c14" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就这些了，感谢您的阅读，我希望您能从Redis上获得一些提示。如果你喜欢这个，不要忘了鼓掌并跟随！</p></div></div>    
</body>
</html>