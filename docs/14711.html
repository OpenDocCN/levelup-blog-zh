<html>
<head>
<title>4 ways CSS :has() can make your HTML forms even better</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CSS :has()可以让你的HTML表单变得更好的4种方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/4-ways-css-has-can-make-your-html-forms-even-better-350f03fa5821?source=collection_archive---------15-----------------------#2022-12-19">https://levelup.gitconnected.com/4-ways-css-has-can-make-your-html-forms-even-better-350f03fa5821?source=collection_archive---------15-----------------------#2022-12-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/5121a3a30a0d1cbfce1c352137b933e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Tuqglw-rBaMcjYgBffiHA.png"/></div></div></figure><div class=""/><figure class="gl gn kb kc kd iv"><div class="bz fp l di"><div class="ke kf l"/></div></figure><p id="4497" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最近有很多关于<a class="ae le" href="https://austingil.com/category/css/" rel="noopener ugc nofollow" target="_blank"> CSS </a> <code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/CSS/:has" rel="noopener ugc nofollow" target="_blank">:has()</a></code> <a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes" rel="noopener ugc nofollow" target="_blank">伪类</a>的炒作。理所当然！这基本上是我们多年来一直要求的“父母选择器”。今天我想重点谈谈我们如何使用<code class="fe lf lg lh li b">:has()</code>让<a class="ae le" href="https://austingil.com/category/html/" rel="noopener ugc nofollow" target="_blank"> HTML </a>表单变得更好。</p><h1 id="a814" class="lj lk je bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">前言</h1><p id="f99e" class="pw-post-body-paragraph kg kh je ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">在本文中，我将使用自定义的<a class="ae le" href="https://austingil.com/how-to-build-html-forms-right-semantics/" rel="noopener ugc nofollow" target="_blank">表单</a>控件，如下所示:</p><pre class="mm mn mo mp gt mq li mr bn ms mt bi"><span id="61c7" class="mu lk je li b be mv mw l mx my">&lt;div class="control"&gt;<br/> &lt;label for="name"&gt;Name&lt;/label&gt;<br/> &lt;div class="control__input"&gt;<br/>  &lt;input type="text" id="name" name="name" required&gt;<br/> &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="a3e3" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一个<code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div" rel="noopener ugc nofollow" target="_blank">&lt;div&gt;</a></code>包装整个控件，一个<code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label" rel="noopener ugc nofollow" target="_blank">&lt;label&gt;</a></code>保持输入<a class="ae le" href="https://austingil.com/category/accessibility/" rel="noopener ugc nofollow" target="_blank">可访问</a>，一个包装输入元素的<code class="fe lf lg lh li b">&lt;div&gt;</code>，以及<code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input" rel="noopener ugc nofollow" target="_blank">&lt;input&gt;</a></code>元素本身。输入元素将没有边框或背景。“control _ _ input”<code class="fe lf lg lh li b">&lt;div&gt;</code>将具有作为表单控件的可视表示的样式。</p><pre class="mm mn mo mp gt mq li mr bn ms mt bi"><span id="b1a8" class="mu lk je li b be mv mw l mx my">.control :where(input, select, textarea) {<br/>  border: 0;<br/>  background-color: transparent;<br/>}<br/>.control__input {<br/>  display: flex;<br/>  align-items: center;<br/>  gap: .125rem;<br/>  border: .125rem solid;<br/>  border-radius: .25rem;<br/>  padding: .25rem;<br/>}</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mz"><img src="../Images/d1a61f4841bb5812b879278efd2f9bf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XI3rG9k4OkZBsaaF.png"/></div></div></figure><p id="b146" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这种方法允许我们在输入类型为“email”时添加一些小的设计修饰，比如“at”符号。</p><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi na"><img src="../Images/08c4db06dcca345639bdabed75433179.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Z50ITSsjGJpbkfO7.png"/></div></div></figure><p id="121e" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model" rel="noopener ugc nofollow" target="_blank"> DOM </a>中包含元素使得对它们或动画应用样式变得更加容易。这对本文中的例子也很有用。</p><h1 id="dd45" class="lj lk je bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">自定义焦点样式</h1><p id="c692" class="pw-post-body-paragraph kg kh je ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">CSS为样式元素提供了许多不错的伪类。对表单输入特别有帮助的一个是<code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/CSS/:focus-visible" rel="noopener ugc nofollow" target="_blank">:focus-visible</a></code>,它让我们在元素通过键盘导航聚焦时对元素应用样式。</p><p id="0c96" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们的输入获得焦点时，在包装器上应用焦点样式会更好。我们可以用<code class="fe lf lg lh li b">:has()</code>做到这一点:</p><pre class="mm mn mo mp gt mq li mr bn ms mt bi"><span id="66d9" class="mu lk je li b be mv mw l mx my">.control__input:has(:focus-visible) {<br/>  outline: 3px solid plum;<br/>}</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi na"><img src="../Images/25567d3216b8f6681c6e6893b5d80c54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1zqrOhopPnYSIe1F.png"/></div></div></figure><h1 id="42fc" class="lj lk je bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">在线验证反馈</h1><p id="c860" class="pw-post-body-paragraph kg kh je ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">如果我们想给用户反馈输入是有效还是无效呢？我们可以用<code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/CSS/:valid" rel="noopener ugc nofollow" target="_blank">:valid</a></code>和<code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/CSS/:invalid" rel="noopener ugc nofollow" target="_blank">:invalid</a></code>伪类做到这一点。</p><p id="064f" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们在输入包装器中添加几个SVG来提供一些视觉反馈。默认情况下，我们会将它们设置为<code class="fe lf lg lh li b">display:none</code>，这样您就看不到它们了。</p><pre class="mm mn mo mp gt mq li mr bn ms mt bi"><span id="7dfb" class="mu lk je li b be mv mw l mx my">&lt;div class="control"&gt;<br/> &lt;label for="name"&gt;Name&lt;/label&gt;<br/> &lt;div class="control__input"&gt;<br/>  &lt;input type="text" id="name" name="name" required&gt;<br/>  &lt;svg class="icon icon-check" role="presentation"&gt;<br/>   &lt;use href="#icon-check"&gt;&lt;/use&gt;<br/>  &lt;/svg&gt;<br/>  &lt;svg class="icon icon-cancel" role="presentation"&gt;<br/>   &lt;use href="#icon-cancel"&gt;&lt;/use&gt;<br/>  &lt;/svg&gt;<br/> &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="cb60" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用<code class="fe lf lg lh li b">:has()</code>伪类，我们可以显示适当的SVG以及为整个表单控件添加颜色；绿色代表有效反馈，红色代表无效反馈。</p><p id="3d7c" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了避免一次提供太多的反馈，我们还将使用<code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/CSS/:focus" rel="noopener ugc nofollow" target="_blank">:focus</a></code>伪类来将样式仅应用于当前聚焦的输入。</p><pre class="mm mn mo mp gt mq li mr bn ms mt bi"><span id="dd75" class="mu lk je li b be mv mw l mx my">.control__input is(.icon-cancel, .icon-check) {<br/>  display: none;<br/>}<br/>.control:has(:focus:invalid) .icon-cancel,<br/>.control:has(:focus:valid) .icon-check {<br/>  display: unset<br/>}<br/>.control:has(:focus:invalid) {<br/>  color: tomato;<br/>}<br/>.control:has(:focus:valid) {<br/>  color: limegreen;<br/>}<br/>.control:has(:focus-visible:invalid) .control__input {<br/>  outline-color: pink;<br/>}<br/>.control:has(:focus-visible:valid) .control__input {<br/>  outline-color: palegreen;<br/>}</span></pre><p id="c7af" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以看到，当控件的输入获得焦点并且输入具有无效状态时，整个表单控件变成红色，并且您可以看到“cancel”图标。随着用户输入，当输入有效时，整个表单控件变成绿色，您可以看到“check”图标。</p><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nb"><img src="../Images/f513adfa7247744f3fe82e7724335470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6BuIpvf4BuClGcZT.png"/></div></div></figure><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nc"><img src="../Images/55c09d4d686e6a47f5972f3665fc8c47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sFDHZWkmbW9ob3Fp.png"/></div></div></figure><p id="7a2a" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在顶层着色很方便，因为这些样式可以向下传播到标签、输入包装器的边框、输入文本和图标SVG的填充。</p><p id="be09" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这种效果也适用于<code class="fe lf lg lh li b">select</code>元素，但是我建议将<code class="fe lf lg lh li b">option</code>元素重置为默认颜色。否则，它们会继承绿色和红色。</p><pre class="mm mn mo mp gt mq li mr bn ms mt bi"><span id="8b79" class="mu lk je li b be mv mw l mx my">.control option {<br/>  color: initial;<br/>}</span></pre><p id="a096" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，添加图标和改变颜色并不是一个完整的验证策略，因为它对有视觉障碍的用户不起作用，并且不能传达输入有什么问题。这种增加应该伴随着对输入约束和验证错误消息的清晰描述。</p><p id="4984" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Jhey Tompkins 进一步发展了这个概念，使用隐藏占位符和<code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/CSS/:placeholder-shown" rel="noopener ugc nofollow" target="_blank">:placeholder-shown</a></code>伪类，只在用户与输入交互后添加反馈。点击这里查看他的精彩演示:<a class="ae le" href="https://codepen.io/jh3y/pen/yLKMOBm" rel="noopener ugc nofollow" target="_blank">https://codepen.io/jh3y/pen/yLKMOBm</a></p><p id="b8d8" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我喜欢这个概念，但是这个<code class="fe lf lg lh li b">:placeholder-shown</code>技巧对我来说总是有点奇怪，因为它移除了占位符的功能。将来我们应该有<code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/CSS/:user-invalid" rel="noopener ugc nofollow" target="_blank">:user-invalid</a></code>专门用于这个用例。目前它只在Firefox中受支持。</p><h1 id="773d" class="lj lk je bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">类似卡片的输入选项</h1><p id="176d" class="pw-post-body-paragraph kg kh je ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">考虑一个表单，询问您最喜欢的前端语言是什么，以及它的名称、徽标和描述。它可能看起来像这样:</p><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nd"><img src="../Images/200b5586fde86ccdf3f21bfd6d1c9f40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6nh1eRgZiJZTkwYR.png"/></div></div></figure><p id="2843" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不幸的是，网络没有为我们提供<code class="fe lf lg lh li b">&lt;input type="card"&gt;</code>选项。但我们是开发人员，所以我们将利用现有资源来构建一个。</p><p id="eb15" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为UI提出了一个只能有一个答案的问题，所以这项工作的最佳工具是三个<code class="fe lf lg lh li b">&lt;input type="radio"&gt;</code>元素。我们将使用一个<code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/fieldset" rel="noopener ugc nofollow" target="_blank">&lt;fieldset&gt;</a></code>在语义上将输入分组在一起。输入需要一个<code class="fe lf lg lh li b">&lt;label&gt;</code>。用label元素包装整个卡片，让用户可以单击卡片并选择输入内容，这可能很有诱惑力，但这样卡片的全部内容就会被屏幕阅读器读出，我希望避免这种情况。相反，使用语言名称作为标签是有意义的。我们稍后会解决让整张卡片可点击的问题。最后，由于UI中已经有了一个小描述，我们不妨使用<code class="fe lf lg lh li b">aria-describedby</code>属性将它与输入关联起来。</p><pre class="mm mn mo mp gt mq li mr bn ms mt bi"><span id="e084" class="mu lk je li b be mv mw l mx my">&lt;fieldset&gt;<br/>  &lt;legend&gt;What's your fave frontend language&lt;/legend&gt;<br/>  &lt;div class="cards"&gt;<br/>    &lt;div class="card card--html"&gt;<br/>      &lt;img src="/img/logo-html.svg" alt="HTML logo" width="48" height="48"&gt;<br/>      &lt;label for="html"&gt;HTML&lt;/label&gt;<br/>      &lt;input id="html" type="radio" name="fe-fave" aria-describedby="html-description" class="visually-hidden"&gt;<br/>      &lt;p id="html-description"&gt;The bones of any good website&lt;/p&gt;<br/>    &lt;/div&gt;<br/><br/>    &lt;! – CSS card markup – &gt;<br/><br/>    &lt;! – JavaScript card markup – &gt;<br/>  &lt;/div&gt;<br/>&lt;/fieldset&gt;</span></pre><p id="5e85" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">根据设计，您可能会注意到明显的<strong class="ki jf">缺少</strong>无线电输入。我们想对样式做的第一件事是确保我们的无线电输入是不可见的，但仍然是可访问的。我们不能使用<code class="fe lf lg lh li b">display:none</code>,因为那会将它从文档中移除。那么它就不可点击或键盘访问。相反，我们将使用<a class="ae le" href="https://www.a11yproject.com/posts/how-to-hide-content/" rel="noopener ugc nofollow" target="_blank">一个通用模式</a>和一个名为“可视隐藏”的类。看起来是这样的:</p><pre class="mm mn mo mp gt mq li mr bn ms mt bi"><span id="4cf9" class="mu lk je li b be mv mw l mx my">.visually-hidden {<br/>  border: 0;<br/>  clip: rect(0 0 0 0);<br/>  height: auto;<br/>  margin: 0;<br/>  overflow: hidden;<br/>  padding: 0;<br/>  position: absolute !important;<br/>  width: 1px;<br/>  white-space: nowrap;<br/>}</span></pre><p id="1fab" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我希望用户能够点击卡片的任何地方来选择它，但我不想破坏可访问性。在<a class="ae le" href="https://inclusive-components.design/cards/" rel="noopener ugc nofollow" target="_blank"> Inclusive Components </a>中还有另一种类似卡片的便捷模式。</p><p id="037e" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以将一个<code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/CSS/::after" rel="noopener ugc nofollow" target="_blank">:after</a></code> <a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-elements" rel="noopener ugc nofollow" target="_blank">伪元素</a>添加到标签中，并定位它以覆盖整个卡片。这具有使<code class="fe lf lg lh li b">&lt;label&gt;</code>表现得好像它覆盖了整张卡片的效果。用户可以点击卡片上的任何地方，点击标签元素，激活相关的输入。</p><pre class="mm mn mo mp gt mq li mr bn ms mt bi"><span id="5e10" class="mu lk je li b be mv mw l mx my">.card {<br/>  position: relative;<br/>}<br/>.card label:after {<br/>  content: '';<br/>  position: absolute;<br/>  inset: 0;<br/>}<br/>.card a {<br/>  position: relative;<br/>}</span></pre><p id="1c79" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">卡片中的其他交互元素应该是<code class="fe lf lg lh li b">position:relative</code>，这样它们仍然可以被点击。</p><p id="0d5c" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好了，鼠标用户被照顾到了，让我们也考虑一下键盘用户。</p><p id="79a7" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们在键盘输入方面做得很好，但是用户看不到他们的焦点轮廓，因为它们在视觉上是隐藏的。</p><p id="ff22" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是<code class="fe lf lg lh li b">:has()</code>可以帮助我们的地方。</p><p id="74ad" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以将任何输入具有:focus-visible伪类的卡片作为目标，并对卡片应用一个轮廓。</p><pre class="mm mn mo mp gt mq li mr bn ms mt bi"><span id="9d85" class="mu lk je li b be mv mw l mx my">.card:has(input:focus-visible) {<br/>  outline: 3px solid plum;<br/>}</span></pre><p id="22ae" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">输入在视觉上仍然是隐藏的，但是卡片接收到一个轮廓。</p><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ne"><img src="../Images/007002e5676bf5ab65f5c3d04ca0ce43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7Xy2P6S_UmeSvZVk.png"/></div></div></figure><p id="0b86" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个技巧的最后一部分是提供一些视觉反馈，输入当前是活动的。为此，我们可以做一个与上一个类似的技巧，但是使用<code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/CSS/:checked" rel="noopener ugc nofollow" target="_blank">:checked</a></code>伪类。</p><p id="7d65" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当卡片包含选中的输入时，应用样式；在这种情况下，一个<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow" rel="noopener ugc nofollow" target="_blank">方框阴影</a>。</p><pre class="mm mn mo mp gt mq li mr bn ms mt bi"><span id="c514" class="mu lk je li b be mv mw l mx my">.card:has(:checked) {<br/>  box-shadow: inset 0 0 0 .25em mediumpurple;<br/>}</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nf"><img src="../Images/b2a35a4be0b46a23e36056d2d9ba2cec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*czHaH6-gCuAZ0BMp.png"/></div></div></figure><p id="f7b1" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">(我应该使用复选框，这样我可以选择所有三个)</p><p id="2e0c" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个例子可能是最不依赖<code class="fe lf lg lh li b">:has()</code>的，因为没有它完成同样的事情并不困难。您必须将输入移动到card元素之前，然后使用CSS兄弟<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Selectors/Combinators" rel="noopener ugc nofollow" target="_blank">组合器</a>来定位card ( <code class="fe lf lg lh li b">input:checked + .card { /* styles */ }</code>)。</p><p id="7639" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，虽然这个例子可能是最容易在没有<code class="fe lf lg lh li b">:has()</code>的情况下存在的，但是有了它，通过在DOM中共同定位输入和标签，我们的生活变得更加容易。</p><h1 id="cccb" class="lj lk je bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">条件内容呈现</h1><p id="91da" class="pw-post-body-paragraph kg kh je ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">我想展示的下一个很酷的东西是使用<code class="fe lf lg lh li b">:has()</code>显示和隐藏DOM的不同部分。</p><p id="e01e" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">考虑这个用户界面:</p><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ng"><img src="../Images/c7dbf0ffc8fd9827169f064e88703888.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IRi_-4BMyG23mw7a.png"/></div></div></figure><p id="07b3" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我们有一个有几个选项的问题，但只能选择一个。因此，我们将再次使用带有一些无线电输入的<code class="fe lf lg lh li b">&lt;fieldset&gt;</code>。</p><pre class="mm mn mo mp gt mq li mr bn ms mt bi"><span id="8579" class="mu lk je li b be mv mw l mx my">&lt;fieldset&gt;<br/>  &lt;legend&gt;Favorite Starter Pokemon&lt;/legend&gt;<br/>  &lt;div&gt;<br/>    &lt;input id="bulbasaur" type="radio" name="poke" value="bulbasaur" /&gt;<br/>    &lt;label for="bulbasaur"&gt;Bulbasaur&lt;/label&gt;<br/>  &lt;/div&gt;<br/>  &lt;! – charmander form control – &gt;<br/>  &lt;! – bulbasaur form control – &gt;<br/>&lt;/fieldset&gt;</span></pre><p id="5817" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">目前为止，没什么特别的。但是当我们选择其中一个选项时，事情就变得有趣了。我们可以根据所做的选择来显示内容。</p><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nh"><img src="../Images/cfe3d9517b24754a7e240022746e6fa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*g7zlxRamGvOVwrxj.png"/></div></div></figure><p id="95de" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设表单中的某个地方有我们想要显示的项目。</p><pre class="mm mn mo mp gt mq li mr bn ms mt bi"><span id="5db3" class="mu lk je li b be mv mw l mx my">&lt;form&gt;<br/>  &lt;div class="pokemon pokemon--bulbasaur"&gt;<br/>    &lt;img src="img/bulbasaur.png" width="300" height="300" alt="Bulbasaur" /&gt;<br/>    &lt;p&gt;Bulbasaur can be seen napping in bright sunlight. There is a seed on its back. By soaking up the sun's rays, the seed grows progressively larger.&lt;/p&gt;<br/>    &lt;ul&gt;<br/>      &lt;li&gt;Height: 2' 04"&lt;/li&gt;<br/>      &lt;li&gt;Weight: 15.2 lbs&lt;/li&gt;<br/>      &lt;li&gt;Type: Grass/Poison&lt;/li&gt;<br/>      &lt;li&gt;Weaknesses: Fire, Psychic, Flying, Ice&lt;/li&gt;<br/>    &lt;/ul&gt;<br/>  &lt;/div&gt;<br/>  &lt;! – charmander details – &gt;<br/>  &lt;! – bulbasaur details – &gt;<br/>&lt;/form&gt;</span></pre><p id="4224" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以默认隐藏这些元素，然后使用<code class="fe lf lg lh li b">:has()</code>来查找被检查的特定输入，并在表单中的其他地方显示其对应的元素。</p><pre class="mm mn mo mp gt mq li mr bn ms mt bi"><span id="7b7f" class="mu lk je li b be mv mw l mx my">.pokemon {<br/>  display: none;<br/>}<br/>form:has(#bulbasaur:checked) .pokemon--bulbasaur,<br/>form:has(#charmander:checked) .pokemon--charmander,<br/>form:has(#squirtle:checked) .pokemon--squirtle {<br/>  display: block;<br/>}</span></pre><p id="f59d" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我选择妙蛙种子时，我看到了妙蛙种子的细节。当我选择小火龙时，我看到了小火龙的细节。当我选择杰尼龟时，我会看到杰尼龟的细节。</p><p id="de0b" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">(顺便说一句，<a class="ae le" href="https://pokemoncraze.com/2020/02/why-bulbasaur-is-actually-the-strongest-starter-gen-1-3/" rel="noopener ugc nofollow" target="_blank">妙蛙种子客观上是最好的首发</a>:只有一个多类型的。对抗早期健身房领导的最佳类型。游戏中有更强的火和水类型，但是金星龙是最强的植物类型，所以你可以在以后建立一个更好的团队)</p><p id="4d6a" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这种模式也适用于<code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/select" rel="noopener ugc nofollow" target="_blank">&lt;select&gt;</a></code>或复选框。例如，如果您想制作一个比萨饼订购表单，您可以提供浇头作为复选框输入。然后在订单查看区，您可以列出所选的浇头。相当酷！</p><p id="eac4" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我还没有找到一种方法，在不明确添加不同的ID和类的情况下，在许多不同的实现中实现这一点。所以不利的一面是，你的CSS会随着每次实现而线性增长。</p><p id="6ad8" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">考虑到这一点，如果您只需要这样做几次，CSS是一个很好的选择。如果您想在应用程序的多个地方显示/隐藏元素，JavaScript可能是更好的选择。</p><p id="5804" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样值得一提的是，无论何时显示和隐藏内容，都需要考虑可访问性问题。在这种情况下，内容紧跟在交互元素(表单控件)之后。这使得辅助技术用户很容易发现发生了什么变化。但是如果内容在控件之前，或者远离控件，那么可能需要JavaScript来使用像<code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-expanded" rel="noopener ugc nofollow" target="_blank">aria-expanded</a></code>或<code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-controls" rel="noopener ugc nofollow" target="_blank">aria-controls</a></code>这样的工具来改善体验。</p><p id="91f9" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">总之，我的目标是向你展示什么是可能的。太棒了。</p><h1 id="7319" class="lj lk je bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">自级验证提示</h1><p id="8a23" class="pw-post-body-paragraph kg kh je ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">今天我最不想展示的是表单的提交按钮。在提交表单之前，让我们设置一个带有必填复选框的表单。如果我们在表单无效和有效时给出某种视觉反馈，那不是很酷吗？</p><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/1667a7f9cd6d33edbab2e1d9493d0307.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/0*R9j-Snn-jqB7tt2x.png"/></div></figure><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/32bef44bf0e82c81d2a3093742e99515.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/0*Z3O16Frj2cDFLZQg.png"/></div></figure><p id="b357" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以用<code class="fe lf lg lh li b">:has()</code>来做</p><pre class="mm mn mo mp gt mq li mr bn ms mt bi"><span id="da27" class="mu lk je li b be mv mw l mx my">&lt;form&gt;<br/>  &lt;div class="control"&gt;<br/>    &lt;input id="checkme" type="checkbox" name="learned" required /&gt;<br/>    &lt;label for="checkme"&gt;I learned something cool!&lt;/label&gt;<br/>  &lt;/div&gt;<br/><br/>  &lt;button type="submit"&gt;Submit&lt;/button&gt;<br/>&lt;/form&gt;</span></pre><p id="7305" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的标记中，我们有一个必需的复选框。如果未选中，它将满足<code class="fe lf lg lh li b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/CSS/:invalid" rel="noopener ugc nofollow" target="_blank">:invalid</a></code>伪类。</p><p id="0155" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以检查表单是否有任何无效输入，并相应地对提交按钮应用样式。</p><pre class="mm mn mo mp gt mq li mr bn ms mt bi"><span id="63fd" class="mu lk je li b be mv mw l mx my">form:has(:invalid) :where(button:not([type]), button[type="submit"]) {<br/>  opacity: 0.7;<br/>  color: black;<br/>  background: whitesmoke;<br/>  cursor: not-allowed;<br/>}</span></pre><p id="0df3" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们只关注那些缺少类型属性或者类型属性被设置为“提交”的按钮。这样我们就不会意外地将样式应用到<code class="fe lf lg lh li b">&lt;button type="button"&gt;</code>上。</p><p id="53c5" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这实际上不会阻止表单被提交，这有利于验证和可访问性。相反，我们添加了一些额外的提示来告诉视觉用户，“嘿，你可能想再看一遍表单”。CSS在很多方面都很棒。实际验证不在其中(<a class="ae le" href="https://caniuse.com/mdn-css_selectors_user-invalid" rel="noopener ugc nofollow" target="_blank">还没有</a>)。</p><p id="126d" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">无论如何，当我有一个有效的表单，我可以显示按钮准备好了。当我有一个无效的表单时，我可以显示按钮没有准备好。</p><p id="bb16" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我觉得这很酷。</p><h1 id="3c8a" class="lj lk je bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">结束语</h1><p id="9d38" class="pw-post-body-paragraph kg kh je ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">除了所有其他可以使用<code class="fe lf lg lh li b">:has()</code>的地方，表单还提供了一些我最喜欢的用例。许多过去需要JavaScript的事情现在只用CSS就能完成。</p><p id="24f7" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不幸的是，<code class="fe lf lg lh li b">:has()</code>还不具备<a class="ae le" href="https://caniuse.com/css-has" rel="noopener ugc nofollow" target="_blank">我们今天需要的浏览器支持</a>来让它做好生产准备。</p><p id="07cd" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好在上面的例子很多都没有严格要求<code class="fe lf lg lh li b">:has()</code>。使用不同的标记和兄弟组合符，你可以完成相同或类似的事情。这些方法有点难以维护，但是我们离用<code class="fe lf lg lh li b">:has()</code>更简单的方法做事情不远了。</p><p id="2613" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我对此很兴奋。</p><p id="ff65" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你对使用<code class="fe lf lg lh li b">:has()</code>有任何其他想法或有趣的方法，特别是如果它是以表格的形式，但不仅仅是这样，请告诉我，我很想看看你用它构建了什么样的酷东西。</p><p id="188e" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">非常感谢您的阅读。如果你喜欢这篇文章，请<a class="ae le" href="https://twitter.com/share?via=heyAustinGil" rel="noopener ugc nofollow" target="_blank">分享它</a>。这是支持我的最好方式之一。你也可以<a class="ae le" href="https://austingil.com/newsletter/" rel="noopener ugc nofollow" target="_blank">注册我的时事通讯</a>或者<a class="ae le" href="https://twitter.com/heyAustinGil" rel="noopener ugc nofollow" target="_blank">在Twitter上关注我</a>如果你想知道什么时候有新文章发表。</p></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><p id="3424" class="pw-post-body-paragraph kg kh je ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="nr">原载于</em><a class="ae le" href="https://austingil.com/css-has-with-html-forms/" rel="noopener ugc nofollow" target="_blank"><em class="nr"/></a><em class="nr">。</em></p></div></div>    
</body>
</html>