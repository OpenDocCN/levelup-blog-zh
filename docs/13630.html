<html>
<head>
<title>Software Abstractions: Is a Square a Rectangle?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">软件抽象:正方形是长方形吗？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/software-abstractions-is-a-square-a-rectangle-494bf957f353?source=collection_archive---------13-----------------------#2022-09-22">https://levelup.gitconnected.com/software-abstractions-is-a-square-a-rectangle-494bf957f353?source=collection_archive---------13-----------------------#2022-09-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6272" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><em class="ki">软件抽象本质上并不反映现实世界。</em></h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/6400305bf641ed0d06fcb9e6f18189df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tF1QbuFA1Gug6006"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">文森特·拉维尼亚在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="0651" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">大多数人，甚至是孩子，都能明确地回答这个问题。是的，正方形是矩形的子类型；因此，它是一个所有边都相等的长方形。</p><p id="0a34" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">那么，为什么这个问题会让有经验的软件开发人员踌躇不前呢？</p><p id="e0b7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们在这里学习一个警示性的故事，软件抽象是困难的，即使它们看起来很容易。</p><p id="9430" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在正方形/矩形的例子中，一个有经验的软件开发人员会说正方形不是矩形，原因很简单。让我们比较一下类<code class="fe lw lx ly lz b">Rectangle</code>和<code class="fe lw lx ly lz b">Square</code>的抽象。</p><pre class="kk kl km kn gt ma lz mb mc aw md bi"><span id="19ef" class="me mf it lz b gy mg mh l mi mj">class Rectangle {<br/>  length: number;<br/>  width: number;</span><span id="5cd8" class="me mf it lz b gy mk mh l mi mj">  getArea(): number {<br/>    return this.length * this.width<br/>  }<br/>}</span><span id="e4b3" class="me mf it lz b gy mk mh l mi mj">class Square {<br/>  size: number;</span><span id="9570" class="me mf it lz b gy mk mh l mi mj">  getArea(): number {<br/>    return Math.pow(this.size, 2)<br/>  }<br/>}</span></pre><p id="71d2" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这两个类是不一样的，因为前者的属性是<code class="fe lw lx ly lz b">length</code>和<code class="fe lw lx ly lz b">width</code>，后者的属性是<code class="fe lw lx ly lz b">size</code>。所以，如果我们尝试<code class="fe lw lx ly lz b">Square extends Rectangle</code>甚至<code class="fe lw lx ly lz b">Rectangle extends Square</code>，我们打破了各种最佳实践；来自固体的<a class="ae kz" href="https://en.wikipedia.org/wiki/Liskov_substitution_principle" rel="noopener ugc nofollow" target="_blank">利斯科夫-替代原理</a>和<a class="ae kz" href="https://en.wikipedia.org/wiki/Is-a" rel="noopener ugc nofollow" target="_blank">是-关系</a>法则。因此，正方形不是长方形。</p><p id="ef84" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">另一方面，说这两个阶级之间没有关系也是错误的。他们共享什么软件属性？他们都有方法<code class="fe lw lx ly lz b">getArea</code>。</p><p id="aaf5" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">那么，我们如何在软件中建立这些联系而不破坏利斯科夫替代原理或is-a关系呢？</p><pre class="kk kl km kn gt ma lz mb mc aw md bi"><span id="1344" class="me mf it lz b gy mg mh l mi mj">interface Shape {<br/>  getArea(): number;<br/>}</span><span id="ec06" class="me mf it lz b gy mk mh l mi mj">class Rectangle implements Shape {...}</span><span id="6b7e" class="me mf it lz b gy mk mh l mi mj">class Square implements Shape {...}</span></pre><p id="74a4" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><a class="ae kz" href="https://en.wikipedia.org/wiki/Interface_segregation_principle" rel="noopener ugc nofollow" target="_blank">界面偏析原理</a>，来自固体，来自救援。该原则鼓励更小、更具体的接口。</p><p id="088d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">对于这个例子，接口<code class="fe lw lx ly lz b">Shape</code>将包含在<code class="fe lw lx ly lz b">Rectangle</code>、<code class="fe lw lx ly lz b">Square</code>和其他未来形状之间共享的属性。这样，我们就满足了利斯科夫替代原理和is-a关系规则。</p><p id="d772" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">让我们通过考虑现实世界中所有不同的形状来仔细检查这个解决方案。例如，球体是具有体积的形状。然而，长方形和正方形没有体积。所以我们的抽象，尽管是通过我们对现实世界的了解，却有了错误的名称。</p><p id="384b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">抽象和它们的名字应该有意义。</p><p id="5345" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">所有这些都是说，抽象是困难的，所以不要厌倦创造它们。</p><p id="70ac" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><em class="ml">旁注。参见文章“</em><a class="ae kz" href="https://henrietteharmse.com/2015/04/18/the-rectanglesquare-controversy" rel="noopener ugc nofollow" target="_blank"><em class="ml"/></a><em class="ml">”对这一具体用例的进一步解释。</em></p><pre class="kk kl km kn gt ma lz mb mc aw md bi"><span id="7172" class="me mf it lz b gy mg mh l mi mj">interface Quadrilateral {<br/>  getArea(): number<br/>}</span><span id="48f5" class="me mf it lz b gy mk mh l mi mj">class Rectangle implements Quadrilateral {<br/>  length: number<br/>  width: number</span><span id="ccf2" class="me mf it lz b gy mk mh l mi mj">  getArea(): number {<br/>    return this.length * this.width<br/>  }<br/>}</span><span id="bfe9" class="me mf it lz b gy mk mh l mi mj">class Square implements Quadrilateral {<br/>  size: number</span><span id="000e" class="me mf it lz b gy mk mh l mi mj">  getArea(): number {<br/>    return Math.pow(this.size, 2)<br/>  }<br/>}</span></pre><p id="f08e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><em class="ml">上面的方案最好，但不是重点。我跑题了。</em></p><p id="b1bb" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">软件抽象本质上并不反映现实世界，同时，我们也不能将我们的软件抽象与现实世界完全分离。这个警示性的故事是为了鼓励正确的命名，遵循最佳实践，如坚实的原则，并允许一定程度的重复，直到“啊哈！”你有那一瞬间的清醒。</p><p id="6901" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在以后的文章中，我将深入探讨后者，解释只要我们继续清理代码，通过复制发现抽象是可以的。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="d44f" class="mt mf it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">分级编码</h1><p id="35ef" class="pw-post-body-paragraph la lb it lc b ld nk ju lf lg nl jx li lj nm ll lm ln nn lp lq lr no lt lu lv im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="6c12" class="np nq it lc b ld le lg lh lj nr ln ns lr nt lv nu nv nw nx bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="34f4" class="np nq it lc b ld ny lg nz lj oa ln ob lr oc lv nu nv nw nx bi translated">📰查看<a class="ae kz" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="acc4" class="np nq it lc b ld ny lg nz lj oa ln ob lr oc lv nu nv nw nx bi translated">🔔关注我们:<a class="ae kz" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae kz" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae kz" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="409f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">🚀👉<a class="ae kz" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iu">将像你这样的开发人员安置在顶级创业公司和科技公司</strong> </a></p></div></div>    
</body>
</html>