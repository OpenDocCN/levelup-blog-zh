<html>
<head>
<title>An Easy Way to Collect Market Data for Tronix (TRX)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为Tronix (TRX)收集市场数据的简单方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/an-easy-way-to-collect-market-data-for-tronix-trx-41e6e7c52555?source=collection_archive---------15-----------------------#2021-02-28">https://levelup.gitconnected.com/an-easy-way-to-collect-market-data-for-tronix-trx-41e6e7c52555?source=collection_archive---------15-----------------------#2021-02-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="22e2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">就用R包tronr</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/82fef75c8a2a6661068477693bab602b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xLDsH9JBm4y7xsZK"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@nampoh?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马克西姆·霍普曼</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="f1c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">ronix  (TRX，又名特隆)是特隆区块链的本币。TRX令牌基于ERC-20以太网标准并与之完全兼容。虽然TRX最初的目的是实现数字娱乐支付，但如今它已经获得了许多其他用例，推动了创区块链上的交易，并建立了它的经济(主要是在游戏和<a class="ae ky" href="https://en.wikipedia.org/wiki/Decentralized_finance" rel="noopener ugc nofollow" target="_blank">去中心化金融</a>部门)。</p><p id="07bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">人们可以在众多交易所(如币安、火币、Bittrex等)购买TRX或将其兑换成其他加密货币。).2021年2月，TRX在加密货币中的全球排名约为25位，总市值超过40亿美元。</p><p id="e109" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">鉴于创区块链的日益普及和经济价值，对于市场分析师、加密货币交易员和数据科学家来说，通过编程轻松收集TRX市场数据变得非常重要。一种方法是使用我的<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/introducing-tronr-an-r-package-to-explore-the-tron-blockchain-f0413f38b753">最近发布的用于r的</a>包<code class="fe me mf mg mh b"><a class="ae ky" href="https://github.com/next-game-solutions/tronr" rel="noopener ugc nofollow" target="_blank">tronr</a></code>，这篇文章是一个关于如何使用该包中各个函数的综合教程。</p><div class="mi mj gp gr mk ml"><a rel="noopener  ugc nofollow" target="_blank" href="/introducing-tronr-an-r-package-to-explore-the-tron-blockchain-f0413f38b753"><div class="mm ab fo"><div class="mn ab mo cl cj mp"><h2 class="bd iu gy z fp mq fr fs mr fu fw is bi translated">介绍tronr，一个探索TRON区块链的R包</h2><div class="ms l"><h3 class="bd b gy z fp mq fr fs mr fu fw dk translated">查询账户余额、交易、代币转账等等。</h3></div><div class="mt l"><p class="bd b dl z fp mq fr fs mr fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mu l"><div class="mv l mw mx my mu mz ks ml"/></div></div></a></div><h1 id="38e7" class="na nb it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated"><code class="fe me mf mg mh b">tronr</code>提供的TRX市场数据</h1><p id="4dcb" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">这个包提供了几个函数，人们可以用它们来查询由公众<a class="ae ky" href="https://www.coingecko.com/api/documentations/v3" rel="noopener ugc nofollow" target="_blank"> CoinGecko API </a>提供的TRX市场数据。在高层次上，可以获得以下数据:</p><ul class=""><li id="805e" class="nx ny it lb b lc ld lf lg li nz lm oa lq ob lu oc od oe of bi translated">一组指标，描述了TRX在加密货币市场上相对于用户指定的基础货币(如美元、欧元、BTC等)的当前状态。；可以用<code class="fe me mf mg mh b"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_supported_coingecko_currencies.html" rel="noopener ugc nofollow" target="_blank">get_supported_coingecko_currencies()</a></code>函数获取CoinGecko服务目前支持的基础货币列表)；</li><li id="e68e" class="nx ny it lb b lc og lf oh li oi lm oj lq ok lu oc od oe of bi translated">过去任意日期或历史日期范围内的TRX市场指标；</li><li id="400c" class="nx ny it lb b lc og lf oh li oi lm oj lq ok lu oc od oe of bi translated">一系列最近历史日期(例如，过去7天)的TRX市场指标。</li></ul><p id="84ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有这些函数都返回直接适用于任何使用r的下游分析的变量。</p><h1 id="0658" class="na nb it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated">查询当前市场状况</h1><p id="80f9" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">使用<code class="fe me mf mg mh b"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_current_trx_price.html" rel="noopener ugc nofollow" target="_blank">get_current_trx_price()</a></code>功能可以查询TRX对一组基础货币的当前价格。基础货币列表由<code class="fe me mf mg mh b">vs_currencies</code>参数指定，例如:</p><pre class="kj kk kl km gt ol mh om on aw oo bi"><span id="08cd" class="op nb it mh b gy oq or l os ot">library(tronr)<br/>#&gt; R toolbox to explore the TRON blockchain<br/>#&gt; Developed by Next Game Solutions (<a class="ae ky" href="http://nextgamesolutions.com" rel="noopener ugc nofollow" target="_blank">http://nextgamesolutions.com</a>)<br/>library(dplyr)</span><span id="d903" class="op nb it mh b gy ou or l os ot">get_current_trx_price(vs_currencies = c("usd", "eur", "gbp", "btc"))</span><span id="8e61" class="op nb it mh b gy ou or l os ot">#&gt; # A tibble: 4 x 3<br/>#&gt;   trx_price vs_currency last_updated_at    <br/>#&gt;       &lt;dbl&gt; &lt;chr&gt;       &lt;dttm&gt;             <br/>#&gt; 1 0.0473     usd         2021-02-27 22:49:53<br/>#&gt; 2 0.0392     eur         2021-02-27 22:49:53<br/>#&gt; 3 0.0340     gbp         2021-02-27 22:49:53<br/>#&gt; 4 0.00000101 btc         2021-02-27 22:49:53</span></pre><p id="77b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe me mf mg mh b">last_updated_at</code>列显示价格值最后一次更新的时间(在UTC时区，在这里和所有其他由<code class="fe me mf mg mh b">tronr</code>函数返回的结果中)。</p><p id="723c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe me mf mg mh b"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_current_trx_price.html" rel="noopener ugc nofollow" target="_blank">get_current_trx_price()</a></code>函数还可以用于检索当前市值、过去24小时的交易量以及与24小时前相比的价格百分比变化的数据。这可以通过分别打开<code class="fe me mf mg mh b">include_market_cap</code>、<code class="fe me mf mg mh b">include_24h_vol</code>和<code class="fe me mf mg mh b">include_24h_change</code>选项来完成:</p><pre class="kj kk kl km gt ol mh om on aw oo bi"><span id="340f" class="op nb it mh b gy oq or l os ot">pr &lt;- get_current_trx_price(vs_currencies = c("usd", "eur", "gbp"),<br/>                            include_market_cap = TRUE,<br/>                            include_24h_vol = TRUE,<br/>                            include_24h_change = TRUE)</span><span id="8d3f" class="op nb it mh b gy ou or l os ot">glimpse(pr)</span><span id="c344" class="op nb it mh b gy ou or l os ot">#&gt; Rows: 3<br/>#&gt; Columns: 6<br/>#&gt; $ trx_price                &lt;dbl&gt; 0.04720316, 0.03910102, 0....<br/>#&gt; $ vs_currency              &lt;chr&gt; "usd", "eur", "gbp"<br/>#&gt; $ market_cap               &lt;dbl&gt; 3389781118, 2807945528, 24...<br/>#&gt; $ vol_24h                  &lt;dbl&gt; 1542178017, 1277472414, 11...<br/>#&gt; $ price_percent_change_24h &lt;dbl&gt; 5.397492, 5.397238, 5.397492<br/>#&gt; $ last_updated_at          &lt;dttm&gt; 2021-02-27 22:57:50, 2021...</span></pre><p id="ec42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe me mf mg mh b"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_current_trx_market_data.html" rel="noopener ugc nofollow" target="_blank">get_current_trx_market_data()</a></code>函数可以获得一组更全面的指标，这些指标描述了TRX在加密货币市场上的现状。</p><pre class="kj kk kl km gt ol mh om on aw oo bi"><span id="bafc" class="op nb it mh b gy oq or l os ot">cur_market &lt;- get_current_trx_market_data(<br/>    vs_currencies = c("usd", "eur")<br/>)</span><span id="d22a" class="op nb it mh b gy ou or l os ot">glimpse(cur_market)</span><span id="fc42" class="op nb it mh b gy ou or l os ot">#&gt; Rows: 2<br/>#&gt; Columns: 34<br/>#&gt; $ last_updated_at                  &lt;dttm&gt; 2021-02-27 23:01:...<br/>#&gt; $ total_supply                     &lt;dbl&gt; 100850743812, 1008...<br/>#&gt; $ circulating_supply               &lt;dbl&gt; 71660220128, 71660...<br/>#&gt; $ vs_currency                      &lt;chr&gt; "usd", "eur"<br/>#&gt; $ market_cap                       &lt;dbl&gt; 3360737036, 278388...<br/>#&gt; $ market_cap_rank                  &lt;int&gt; 25, 25<br/>#&gt; $ market_cap_change_24h            &lt;dbl&gt; 173537637, 143744568<br/>#&gt; $ market_cap_percentage_change_24h &lt;dbl&gt; 5.44483, 5.44458<br/>#&gt; $ total_trading_vol_24h            &lt;dbl&gt; 1531231415, 126840...<br/>#&gt; $ current_price                    &lt;dbl&gt; 0.04689822, 0.0388...<br/>#&gt; $ price_high_24h                   &lt;dbl&gt; 0.04843521, 0.0401...<br/>#&gt; $ price_low_24h                    &lt;dbl&gt; 0.04447655, 0.0368...<br/>#&gt; $ price_change_24h                 &lt;dbl&gt; 0.00242167, 0.0020...<br/>#&gt; $ price_percentage_change_24h      &lt;dbl&gt; 5.44483, 5.44458<br/>#&gt; $ price_percentage_change_7d       &lt;dbl&gt; -23.56806, -23.27816<br/>#&gt; $ price_percentage_change_14d      &lt;dbl&gt; -15.25585, -14.91854<br/>#&gt; $ price_percentage_change_30d      &lt;dbl&gt; 65.48261, 65.91304<br/>#&gt; $ price_percentage_change_60d      &lt;dbl&gt; 58.56575, 60.50827<br/>#&gt; $ price_percentage_change_200d     &lt;dbl&gt; 118.2539, 112.3130<br/>#&gt; $ price_percentage_change_1y       &lt;dbl&gt; 183.3925, 155.5123<br/>#&gt; $ ath                              &lt;dbl&gt; 0.231673, 0.192595<br/>#&gt; $ ath_change_percentage            &lt;dbl&gt; -79.62507, -79.69782<br/>#&gt; $ ath_date                         &lt;dttm&gt; 2018-01-05, 2018-...<br/>#&gt; $ atl                              &lt;dbl&gt; 0.00180434, 0.0015...<br/>#&gt; $ atl_change_percentage            &lt;dbl&gt; 2516.088, 2427.333<br/>#&gt; $ atl_date                         &lt;dttm&gt; 2017-11-12, 2017-...<br/>#&gt; $ coingecko_rank                   &lt;int&gt; 14, 14<br/>#&gt; $ coingecko_score                  &lt;dbl&gt; 62.811, 62.811<br/>#&gt; $ developer_score                  &lt;dbl&gt; 79.48, 79.48<br/>#&gt; $ community_score                  &lt;dbl&gt; 52.285, 52.285<br/>#&gt; $ liquidity_score                  &lt;dbl&gt; 77.151, 77.151<br/>#&gt; $ public_interest_score            &lt;dbl&gt; 0.065, 0.065<br/>#&gt; $ sentiment_votes_up_percentage    &lt;dbl&gt; 77.81, 77.81<br/>#&gt; $ sentiment_votes_down_percentage  &lt;dbl&gt; 22.19, 22.19</span></pre><p id="34da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上述结果中的大多数变量应该是不言自明的。更多详情可在CoinGecko网站的“<a class="ae ky" href="https://www.coingecko.com/en/methodology" rel="noopener ugc nofollow" target="_blank">方法学</a>”页面上找到。</p><h1 id="4d78" class="na nb it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated">查询特定的历史日期</h1><p id="7456" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">特定历史日期的TRX市场数据可以通过<code class="fe me mf mg mh b"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_trx_market_data_for_date.html" rel="noopener ugc nofollow" target="_blank">get_trx_market_data_for_date()</a></code>功能获得。该函数的<code class="fe me mf mg mh b">date</code>参数接受<code class="fe me mf mg mh b">%Y-%m-%d</code>格式的字符、日期或POSIXct值，例如:</p><pre class="kj kk kl km gt ol mh om on aw oo bi"><span id="46c9" class="op nb it mh b gy oq or l os ot"># `date` as a character value:<br/>df1 &lt;- get_trx_market_data_for_date(date = "2021-01-01")</span><span id="da8b" class="op nb it mh b gy ou or l os ot"># `date` as a Date value:<br/>df2 &lt;- get_trx_market_data_for_date(date = as.Date("2021-01-01"))</span><span id="2634" class="op nb it mh b gy ou or l os ot">identical(df1, df2)<br/>#&gt; [1] TRUE</span><span id="d6c1" class="op nb it mh b gy ou or l os ot">df1<br/>#&gt; # A tibble: 2 x 5<br/>#&gt;   date       vs_currency  market_cap total_trading_vol  price<br/>#&gt;   &lt;date&gt;     &lt;chr&gt;             &lt;dbl&gt;             &lt;dbl&gt;  &lt;dbl&gt;<br/>#&gt; 1 2021-01-01 usd         1918734259.       1231160613. 0.0268<br/>#&gt; 2 2021-01-01 eur         1570737264.       1007867475. 0.0220</span></pre><p id="413f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CoinGecko提供的TRX市场数据的历史始于<code class="fe me mf mg mh b">2017-11-09 00:00:00</code>。尝试检索更早日期的数据将会失败，并显示相应的控制台消息:</p><pre class="kj kk kl km gt ol mh om on aw oo bi"><span id="f2e4" class="op nb it mh b gy oq or l os ot">get_trx_market_data_for_date(date = "2017-11-08")<br/>#&gt; Error: No data are available for dates before 2017-11-09. <br/>#&gt; Check the `date` argument</span></pre><p id="1410" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">试图要求一个尚不存在历史的未来<code class="fe me mf mg mh b">date</code>也将失败:</p><pre class="kj kk kl km gt ol mh om on aw oo bi"><span id="5dcf" class="op nb it mh b gy oq or l os ot">get_trx_market_data_for_date(date = "2090-01-01")<br/>#&gt; Error: Cannot retrieve data for a future `date`. <br/>#&gt; Check the `date` argument</span></pre><h1 id="d60a" class="na nb it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated">查询一系列历史日期</h1><p id="3ff4" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">用户还可以检索一系列历史日期的TRX市场数据。这可以使用<code class="fe me mf mg mh b"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_trx_market_data_for_time_range.html" rel="noopener ugc nofollow" target="_blank">get_trx_market_data_for_time_range()</a></code>功能来完成。与<code class="fe me mf mg mh b"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_trx_market_data_for_date.html" rel="noopener ugc nofollow" target="_blank">get_trx_market_data_for_date()</a></code>相反，这个函数在每个查询中只接受一种基础货币(参数<code class="fe me mf mg mh b">vs_currency</code>)。此外，定义历史范围的开始(<code class="fe me mf mg mh b">min_timestamp</code>)和结束(<code class="fe me mf mg mh b">max_timestamp</code>)的时间戳是Unix时间格式的字符值。</p><p id="c90e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe me mf mg mh b"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_trx_market_data_for_time_range.html" rel="noopener ugc nofollow" target="_blank">get_trx_market_data_for_time_range()</a></code>返回数据的粒度取决于请求的范围。将检索长达90天的每小时数据，以及90天以上的每日数据:</p><pre class="kj kk kl km gt ol mh om on aw oo bi"><span id="b848" class="op nb it mh b gy oq or l os ot"># ------ Range of &lt;1 day ------ </span><span id="6fb1" class="op nb it mh b gy ou or l os ot">(min_timestamp &lt;- <a class="ae ky" href="https://rdrr.io/r/base/as.POSIXlt.html" rel="noopener ugc nofollow" target="_blank">as.POSIXct</a>("2020-01-01 10:00:10") %&gt;%<br/><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/to_unix_timestamp.html" rel="noopener ugc nofollow" target="_blank">to_unix_timestamp</a>())</span><span id="ef95" class="op nb it mh b gy ou or l os ot">#&gt; [1] "1577872810000"</span><span id="4ebc" class="op nb it mh b gy ou or l os ot">(max_timestamp = <a class="ae ky" href="https://rdrr.io/r/base/as.POSIXlt.html" rel="noopener ugc nofollow" target="_blank">as.POSIXct</a>("2020-01-01 20:45:10") %&gt;% <a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/to_unix_timestamp.html" rel="noopener ugc nofollow" target="_blank">to_unix_timestamp</a>())</span><span id="531c" class="op nb it mh b gy ou or l os ot">#&gt; [1] "1577911510000"<br/><br/><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_trx_market_data_for_time_range.html" rel="noopener ugc nofollow" target="_blank">get_trx_market_data_for_time_range</a>(<br/>  vs_currency = "usd",<br/>  min_timestamp = min_timestamp,<br/>  max_timestamp = max_timestamp<br/>) %&gt;% glimpse()</span><span id="503b" class="op nb it mh b gy ou or l os ot">#&gt; <!-- -->Rows: 11<br/>#&gt; <!-- -->Columns: 5<br/>#&gt; <!-- -->$ timestamp         &lt;dttm&gt; 2020-01-01 10:09:54, 2020-01-01 ...<br/>#&gt; <!-- -->$ vs_currency       &lt;chr&gt; "usd", "usd", "usd", "usd", "usd"...<br/>#&gt; <!-- -->$ price             &lt;dbl&gt; 0.01321627, 0.01329594, 0.0131974...<br/>#&gt; <!-- -->$ total_trading_vol &lt;dbl&gt; 1102088570, 1099017083, 108718413...<br/>#&gt; <!-- -->$ market_cap        &lt;dbl&gt; 874524530, 879244117, 872880577, ...<br/></span><span id="795e" class="op nb it mh b gy ou or l os ot"># ------ Range of &gt;90 days ------</span><span id="dfd1" class="op nb it mh b gy ou or l os ot">(min_timestamp &lt;- <a class="ae ky" href="https://rdrr.io/r/base/as.POSIXlt.html" rel="noopener ugc nofollow" target="_blank">as.POSIXct</a>("2020-01-01 00:00:00") %&gt;% <a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/to_unix_timestamp.html" rel="noopener ugc nofollow" target="_blank">to_unix_timestamp</a>())</span><span id="1de2" class="op nb it mh b gy ou or l os ot">#&gt; [1] "1577836800000"</span><span id="6522" class="op nb it mh b gy ou or l os ot">(max_timestamp = <a class="ae ky" href="https://rdrr.io/r/base/as.POSIXlt.html" rel="noopener ugc nofollow" target="_blank">as.POSIXct</a>("2020-05-01 00:00:00") %&gt;% <a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/to_unix_timestamp.html" rel="noopener ugc nofollow" target="_blank">to_unix_timestamp</a>())</span><span id="3635" class="op nb it mh b gy ou or l os ot">#&gt; [1] "1588291200000"<br/><br/><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_trx_market_data_for_time_range.html" rel="noopener ugc nofollow" target="_blank">get_trx_market_data_for_time_range</a>(<br/>  vs_currency = "usd",<br/>  min_timestamp = min_timestamp,<br/>  max_timestamp = max_timestamp<br/>) %&gt;% glimpse()</span><span id="9de2" class="op nb it mh b gy ou or l os ot">#&gt; <!-- -->Rows: 121<br/>#&gt; <!-- -->Columns: 5<br/>#&gt; <!-- -->$ timestamp         &lt;dttm&gt; 2020-01-01, 2020-01-02, 2020-01-...<br/>#&gt; <!-- -->$ vs_currency       &lt;chr&gt; "usd", "usd", "usd", "usd", "usd"...<br/>#&gt; <!-- -->$ price             &lt;dbl&gt; 0.01329452, 0.01319943, 0.0128447...<br/>#&gt; <!-- -->$ total_trading_vol &lt;dbl&gt; 1134528759, 1032624901, 105654945...<br/>#&gt; <!-- -->$ market_cap        &lt;dbl&gt; 877119319, 872350811, 848482045, ...</span></pre><p id="fd73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与<code class="fe me mf mg mh b"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_trx_market_data_for_date.html" rel="noopener ugc nofollow" target="_blank">get_trx_market_data_for_date()</a></code>类似，如果<code class="fe me mf mg mh b">min_timestamp</code>和/或<code class="fe me mf mg mh b">max_timestamp</code>定义了一个不存在数据的时间范围，则<code class="fe me mf mg mh b"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_trx_market_data_for_time_range.html" rel="noopener ugc nofollow" target="_blank">get_trx_market_data_for_time_range()</a></code>将失败:</p><pre class="kj kk kl km gt ol mh om on aw oo bi"><span id="58f5" class="op nb it mh b gy oq or l os ot"># Requesting non-existing data from the past:</span><span id="b13a" class="op nb it mh b gy ou or l os ot">min_timestamp &lt;- as.POSIXct("2017-11-08 00:00:00") %&gt;% to_unix_timestamp()<br/>max_timestamp = as.POSIXct("2020-01-01 00:00:00") %&gt;% to_unix_timestamp()</span><span id="05ac" class="op nb it mh b gy ou or l os ot">get_trx_market_data_for_time_range(<br/>  vs_currency = "usd",<br/>  min_timestamp = min_timestamp,<br/>  max_timestamp = max_timestamp<br/>)</span><span id="1eed" class="op nb it mh b gy ou or l os ot">#&gt; Error: No data are available for dates before 2017-11-09. <br/>#&gt; Check the `min_timestamp` argument</span><span id="6984" class="op nb it mh b gy ou or l os ot"><br/># Requesting non-existing data from the future:</span><span id="bb77" class="op nb it mh b gy ou or l os ot">min_timestamp &lt;- as.POSIXct("2021-01-01 00:00:00") %&gt;% to_unix_timestamp()<br/>max_timestamp = as.POSIXct("2022-01-01 00:00:00") %&gt;% to_unix_timestamp()</span><span id="be76" class="op nb it mh b gy ou or l os ot">get_trx_market_data_for_time_range(<br/>  vs_currency = "usd",<br/>  min_timestamp = min_timestamp,<br/>  max_timestamp = max_timestamp<br/>)</span><span id="7f06" class="op nb it mh b gy ou or l os ot">#&gt; Error: Cannot retrieve data for future dates. <br/>#&gt; Check the `max_timestamp` argument</span></pre><h1 id="14f7" class="na nb it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated">查询最近<em class="ov"> n </em>天</h1><p id="5741" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">作为查询历史日期范围的一种变体，可以使用<code class="fe me mf mg mh b"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_trx_market_data_for_last_n_days.html" rel="noopener ugc nofollow" target="_blank">get_trx_market_data_for_last_n_days()</a></code>函数检索最近几个日期(从当前日期开始，包括当前日期)的TRX市场数据:</p><pre class="kj kk kl km gt ol mh om on aw oo bi"><span id="cb44" class="op nb it mh b gy oq or l os ot">get_trx_market_data_for_last_n_days(<br/>     vs_currency = "usd", days = 7<br/>) %&gt;% glimpse()</span><span id="56eb" class="op nb it mh b gy ou or l os ot">#&gt; Rows: 169<br/>#&gt; Columns: 5<br/>#&gt; $ timestamp         &lt;dttm&gt; 2021-02-21 00:11:55, 2021-02-21 ...<br/>#&gt; $ vs_currency       &lt;chr&gt; "usd", "usd", "usd", "usd", "usd"...<br/>#&gt; $ price             &lt;dbl&gt; 0.05765095, 0.05823241, 0.0583598...<br/>#&gt; $ total_trading_vol &lt;dbl&gt; 3059125266, 3057387492, 304195819...<br/>#&gt; $ market_cap        &lt;dbl&gt; 4175200820, 4176192440, 416885311...</span></pre><p id="098a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了接受数值之外，<code class="fe me mf mg mh b">days</code>参数还可以接受一个字符值<code class="fe me mf mg mh b">"max"</code>，这将导致检索TRX市场数据的全部现有历史:</p><pre class="kj kk kl km gt ol mh om on aw oo bi"><span id="b87b" class="op nb it mh b gy oq or l os ot">get_trx_market_data_for_last_n_days(<br/>    vs_currency = "usd", days = "max"<br/>) %&gt;% glimpse()</span><span id="accd" class="op nb it mh b gy ou or l os ot">#&gt; Rows: 1,207<br/>#&gt; Columns: 5<br/>#&gt; $ timestamp         &lt;dttm&gt; 2017-11-09, 2017-11-10, 2017-11-...<br/>#&gt; $ vs_currency       &lt;chr&gt; "usd", "usd", "usd", "usd", "usd"...<br/>#&gt; $ price             &lt;dbl&gt; 0.002386822, 0.002044441, 0.00191...<br/>#&gt; $ total_trading_vol &lt;dbl&gt; 1224287.2, 990422.8, 707643.0, 81...<br/>#&gt; $ market_cap        &lt;dbl&gt; 156404162, 133968506, 125470649, ...</span></pre><p id="0c37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意在最后两个例子中数据粒度是如何变化的。通常，如果选择<code class="fe me mf mg mh b">days = 1</code>，数据将大约每3-8分钟显示一次。如果<code class="fe me mf mg mh b">days</code>在2和90(含)之间，将使用每小时的时间步长。日数据用于90以上的<code class="fe me mf mg mh b">days</code>。可以使用<code class="fe me mf mg mh b">interval</code>参数来控制这个粒度(默认情况下是<code class="fe me mf mg mh b">interval = NULL</code>)。目前，它唯一接受的值是<code class="fe me mf mg mh b">"daily"</code>:</p><pre class="kj kk kl km gt ol mh om on aw oo bi"><span id="afe2" class="op nb it mh b gy oq or l os ot"># ------ Within-day data, with `interval = "daily"` ------</span><span id="d49a" class="op nb it mh b gy ou or l os ot"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_trx_market_data_for_last_n_days.html" rel="noopener ugc nofollow" target="_blank">get_trx_market_data_for_last_n_days</a>(<br/>  vs_currency = "usd",<br/>  days = 1,<br/>  interval = "daily"<br/>) %&gt;% glimpse()</span><span id="1584" class="op nb it mh b gy ou or l os ot">#&gt; <!-- -->Rows: 2<br/>#&gt; <!-- -->Columns: 5<br/>#&gt; <!-- -->$ timestamp         &lt;dttm&gt; 2021-02-27 00:00:00, 2021-02-27 ...<br/>#&gt; <!-- -->$ vs_currency       &lt;chr&gt; "usd", "usd"<br/>#&gt; <!-- -->$ price             &lt;dbl&gt; 0.04534392, 0.04601954<br/>#&gt; <!-- -->$ total_trading_vol &lt;dbl&gt; 2032986783, 1516129456<br/>#&gt; <!-- -->$ market_cap        &lt;dbl&gt; 3253119066, 3297770342</span><span id="0f3d" class="op nb it mh b gy ou or l os ot"><br/># ------ Less than 90 days, with `interval = "daily"` ------</span><span id="395a" class="op nb it mh b gy ou or l os ot"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_trx_market_data_for_last_n_days.html" rel="noopener ugc nofollow" target="_blank">get_trx_market_data_for_last_n_days</a>(<br/>  vs_currency = "usd",<br/>  days = 10,<br/>  interval = "daily"<br/>) %&gt;% glimpse()</span><span id="fba8" class="op nb it mh b gy ou or l os ot">#&gt; <!-- -->Rows: 11<br/>#&gt; <!-- -->Columns: 5<br/>#&gt; <!-- -->$ timestamp         &lt;dttm&gt; 2021-02-18 00:00:00, 2021-02-19 ...<br/>#&gt; <!-- -->$ vs_currency       &lt;chr&gt; "usd", "usd", "usd", "usd", "usd"...<br/>#&gt; <!-- -->$ price             &lt;dbl&gt; 0.05254076, 0.05504973, 0.0613594...<br/>#&gt; <!-- -->$ total_trading_vol &lt;dbl&gt; 2221799069, 1965989783, 354407505...<br/>#&gt; <!-- -->$ market_cap        &lt;dbl&gt; 3770282093, 3942038158, 438662175...<br/></span><span id="6abd" class="op nb it mh b gy ou or l os ot"># ------ More than 90 days, with `interval = "daily"` ------</span><span id="131d" class="op nb it mh b gy ou or l os ot"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_trx_market_data_for_last_n_days.html" rel="noopener ugc nofollow" target="_blank">get_trx_market_data_for_last_n_days</a>(<br/>  vs_currency = "usd",<br/>  days = 100,<br/>  interval = "daily"<br/>) %&gt;% glimpse()</span><span id="0c20" class="op nb it mh b gy ou or l os ot">#&gt; <!-- -->Rows: 101<br/>#&gt; <!-- -->Columns: 5<br/>#&gt; <!-- -->$ timestamp         &lt;dttm&gt; 2020-11-20, 2020-11-21, 2020-11-...<br/>#&gt; <!-- -->$ vs_currency       &lt;chr&gt; "usd", "usd", "usd", "usd", "usd"...<br/>#&gt; <!-- -->$ price             &lt;dbl&gt; 0.02579945, 0.02621825, 0.0303699...<br/>#&gt; <!-- -->$ total_trading_vol &lt;dbl&gt; 762903574, 791787366, 1650443139,...<br/>#&gt; <!-- -->$ market_cap        &lt;dbl&gt; 1846615827, 1879975405, 217323112...</span></pre><p id="b3cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果请求的天数涵盖了<code class="fe me mf mg mh b">2017–11–09</code>之前的日期，检索到的数据将在<code class="fe me mf mg mh b">2017–11–09</code>(TRX历史的开始)被<em class="ow">截取</em>。将以下结果与之前创建的表<code class="fe me mf mg mh b">hist_max</code>进行比较:</p><pre class="kj kk kl km gt ol mh om on aw oo bi"><span id="7507" class="op nb it mh b gy oq or l os ot">hist_clipped &lt;- get_trx_market_data_for_last_n_days(<br/>  vs_currency = "usd",<br/>  days = 100000,<br/>  interval = "daily"<br/>)</span><span id="fd4b" class="op nb it mh b gy ou or l os ot">min(hist_max$timestamp)<br/>#&gt; [1] "2017-11-09 UTC"</span><span id="b555" class="op nb it mh b gy ou or l os ot">min(hist_clipped$timestamp)<br/>#&gt; [1] "2017-11-09 UTC"</span></pre><h1 id="c9ed" class="na nb it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated">查询最近n天的OHLC数据</h1><p id="8233" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">开盘-盘高-盘低-收盘(<a class="ae ky" href="https://en.wikipedia.org/wiki/Open-high-low-close_chart" rel="noopener ugc nofollow" target="_blank"> OHLC </a>)数据描述了一项金融资产当天和当天之间的价格变动。可以使用<code class="fe me mf mg mh b"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_trx_ohlc_data_for_last_n_days.html" rel="noopener ugc nofollow" target="_blank">get_trx_ohlc_data_for_last_n_days()</a></code>函数检索TRX的这类数据，该函数具有与<code class="fe me mf mg mh b"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_trx_market_data_for_last_n_days.html" rel="noopener ugc nofollow" target="_blank">get_trx_market_data_for_last_n_days()</a></code>相同的参数，只是没有<code class="fe me mf mg mh b">interval</code>参数。检索数据(即蜡烛体)的粒度取决于<code class="fe me mf mg mh b">days</code>的值，如下所示:</p><ul class=""><li id="8e96" class="nx ny it lb b lc ld lf lg li nz lm oa lq ob lu oc od oe of bi translated">1天30分钟</li><li id="10c5" class="nx ny it lb b lc og lf oh li oi lm oj lq ok lu oc od oe of bi translated">7–30天:4小时</li><li id="81bb" class="nx ny it lb b lc og lf oh li oi lm oj lq ok lu oc od oe of bi translated">31岁及以上:4天</li></ul><p id="6a13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe me mf mg mh b">days</code>参数当前接受的值只有1、7、14、30、90、180、365和<code class="fe me mf mg mh b">"max"</code>。以下是一些例子:</p><pre class="kj kk kl km gt ol mh om on aw oo bi"><span id="ae96" class="op nb it mh b gy oq or l os ot"># ------ 30-min granularity ------</span><span id="b8db" class="op nb it mh b gy ou or l os ot"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_trx_ohlc_data_for_last_n_days.html" rel="noopener ugc nofollow" target="_blank">get_trx_ohlc_data_for_last_n_days</a>(<br/>   vs_currency = "usd", days = 1<br/>) %&gt;% glimpse()</span><span id="ece4" class="op nb it mh b gy ou or l os ot">#&gt; Rows: 49<br/>#&gt; Columns: 6<br/>#&gt; $ timestamp   &lt;dttm&gt; 2021-02-27 00:00:00, 2021-02-27 00:30:...<br/>#&gt; $ vs_currency &lt;chr&gt; "usd", "usd", "usd", "usd", "usd", "usd...<br/>#&gt; $ price_open  &lt;dbl&gt; 0.045396, 0.045326, 0.045813, 0.046517,...<br/>#&gt; $ price_high  &lt;dbl&gt; 0.045396, 0.045801, 0.046534, 0.046576,...<br/>#&gt; $ price_low   &lt;dbl&gt; 0.045188, 0.045326, 0.045813, 0.046204,...<br/>#&gt; $ price_close &lt;dbl&gt; 0.045344, 0.045660, 0.046534, 0.046204,...</span><span id="e6b6" class="op nb it mh b gy ou or l os ot"><br/># ------ 4-hours granularity ------</span><span id="4d9a" class="op nb it mh b gy ou or l os ot">get_trx_ohlc_data_for_last_n_days(<br/>   vs_currency = "usd", days = 7<br/>) %&gt;% glimpse()</span><span id="ad08" class="op nb it mh b gy ou or l os ot">#&gt; Rows: 42<br/>#&gt; Columns: 6<br/>#&gt; $ timestamp   &lt;dttm&gt; 2021-02-21 04:00:00, 2021-02-21 08:00:...<br/>#&gt; $ vs_currency &lt;chr&gt; "usd", "usd", "usd", "usd", "usd", "usd...<br/>#&gt; $ price_open  &lt;dbl&gt; 0.057651, 0.058873, 0.059038, 0.060590,...<br/>#&gt; $ price_high  &lt;dbl&gt; 0.059317, 0.059300, 0.060171, 0.060590,...<br/>#&gt; $ price_low   &lt;dbl&gt; 0.057651, 0.058873, 0.059038, 0.059617,...<br/>#&gt; $ price_close &lt;dbl&gt; 0.059317, 0.059134, 0.060171, 0.059912,...</span><span id="c768" class="op nb it mh b gy ou or l os ot"><br/># ------ 4-days granularity ------</span><span id="6fe8" class="op nb it mh b gy ou or l os ot"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_trx_ohlc_data_for_last_n_days.html" rel="noopener ugc nofollow" target="_blank">get_trx_ohlc_data_for_last_n_days</a>(<br/>   vs_currency = "usd", days = 90<br/>) <!-- -->%&gt;% glimpse()</span><span id="1e01" class="op nb it mh b gy ou or l os ot">#&gt; Rows: 24<br/>#&gt; Columns: 6<br/>#&gt; $ timestamp   &lt;dttm&gt; 2020-11-30, 2020-12-03, 2020-12-07, 20...<br/>#&gt; $ vs_currency &lt;chr&gt; "usd", "usd", "usd", "usd", "usd", "usd...<br/>#&gt; $ price_open  &lt;dbl&gt; 0.030608, 0.032244, 0.031609, 0.030334,...<br/>#&gt; $ price_high  &lt;dbl&gt; 0.030608, 0.032244, 0.031609, 0.030334,...<br/>#&gt; $ price_low   &lt;dbl&gt; 0.030608, 0.030360, 0.029581, 0.027870,...<br/>#&gt; $ price_close &lt;dbl&gt; 0.030608, 0.031228, 0.030940, 0.028154,...</span><span id="ea09" class="op nb it mh b gy ou or l os ot"><br/>get_trx_ohlc_data_for_last_n_days(<br/>   vs_currency = "usd", days = "max"<br/>) %&gt;% glimpse()</span><span id="1180" class="op nb it mh b gy ou or l os ot">#&gt; Rows: 315<br/>#&gt; Columns: 6<br/>#&gt; $ timestamp   &lt;dttm&gt; 2017-11-11, 2017-11-15, 2017-11-19, 20...<br/>#&gt; $ vs_currency &lt;chr&gt; "usd", "usd", "usd", "usd", "usd", "usd...<br/>#&gt; $ price_open  &lt;dbl&gt; 0.002387, 0.001804, 0.002248, 0.002133,...<br/>#&gt; $ price_high  &lt;dbl&gt; 0.002387, 0.002415, 0.002248, 0.002333,...<br/>#&gt; $ price_low   &lt;dbl&gt; 0.001915, 0.001804, 0.001985, 0.002130,...<br/>#&gt; $ price_close &lt;dbl&gt; 0.001915, 0.002320, 0.001985, 0.002138,...</span></pre><h1 id="dae3" class="na nb it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated">结论</h1><p id="c5dc" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">这篇文章展示了使用R package tronr为TRX收集市场数据是多么容易。然后，这些数据可以输入到各种分析项目中，甚至可能输入到自动化应用程序中。但是，请注意，CoinGecko API限制从一个给定的IP地址每分钟调用100次。在开发基于tronr的应用程序时，请记住这一点。</p><p id="c49a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将非常感谢这个包的用户的任何反馈、错误报告和贡献——详见该项目的<a class="ae ky" href="https://github.com/next-game-solutions/tronr" rel="noopener ugc nofollow" target="_blank"> Github库</a>。</p></div><div class="ab cl ox oy hx oz" role="separator"><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc"/></div><div class="im in io ip iq"><h1 id="1e6b" class="na nb it bd nc nd pe nf ng nh pf nj nk jz pg ka nm kc ph kd no kf pi kg nq nr bi translated">在你走之前</h1><p id="0d93" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">我提供数据科学咨询服务。<a class="ae ky" href="mailto:sergey@nextgamesolutions.com" rel="noopener ugc nofollow" target="_blank">取得联系</a>！</p></div></div>    
</body>
</html>