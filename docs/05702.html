<html>
<head>
<title>A Simple Explanation on Updating Redux Store</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于更新Redux存储的简单说明</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-simple-explanation-on-updating-redux-store-8e9bc6c8e279?source=collection_archive---------6-----------------------#2020-09-24">https://levelup.gitconnected.com/a-simple-explanation-on-updating-redux-store-8e9bc6c8e279?source=collection_archive---------6-----------------------#2020-09-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="dbf2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Redux为我们提供了一个中心位置来存储我们的应用程序的各种状态，而无需在React中遍历组件树来执行更新。此外，通过使用combineReducers，我们可以将我们的状态分成不同的段，并隔离特定于某种类型的数据和代码。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/110af804e9dddfd5d44ca608dacdcc8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1bSUpq_kx7KAAgNoqmP71g.png"/></div></div></figure><p id="8585" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个例子中，我有四种类型的数据需要在我的应用程序中处理。combineReducers让我可以通过我设置的键访问所有这些内容——用户、桶、课程和四人组。让我们看看bucketsReducers，看看我们如何更新Redux存储的这一部分。</p><p id="02b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在大多数应用程序中，当后端的数据更新时，需要更新Redux存储，我们需要更新存储以反映相同的变化，以便在不从后端重新加载更新数据的情况下向前端呈现。在大多数情况下，它涉及添加、更新和删除。我们向表中添加一行，更新表中某一行的一些信息，或者删除表中的某一行。Redux中的匹配动作将是向状态数组添加一个项目，更新状态数组中的一个项目，或者从状态数组中删除一个项目。让我们一次看一个。</p><p id="eafb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Redux中，我们通过导出的动作来访问reducers。这些是我用来添加、更新和删除的。重要的是动作类型和每个动作的有效负载。对于每个动作类型，该函数接收要被操作的项目，然后动作类型和有效负载(通常是您接收到的)被传递给reducer。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/c1aea7993de310cbbb6c33ed5527cbb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lWfhal2BWXxKSgVfNdZJ8g.png"/></div></div></figure><h1 id="34f1" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">增加</h1><p id="f819" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">假设您已经执行了一个fetch调用来更新后端数据库，现在是时候更新Redux store了，这样您的新项目就可以显示了。使用Redux，我们需要将有效载荷项插入到状态数组中。以下是需要做的事情的简单描述。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ma"><img src="../Images/c7d31739a0b4e679c475d1ed8d02d07f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eNoCMRzsQNeWzGPQC_jiIw.png"/></div></div></figure><p id="f5c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在bucketReducer中，我们需要做的就是将条目添加到数组中。动作的有效负载部分被创建到一个新对象中，然后这个新对象通过一个concat方法被添加到数组的末尾。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mb"><img src="../Images/46a28235e722a4749134d8c2d61f0431.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pghJV_bogrAZGkepZ91Mng.png"/></div></div></figure><h1 id="4e3a" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">更新</h1><p id="37ad" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">通过update，我们用新信息更新现有的Redux存储项。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mc"><img src="../Images/bc82ecfa4744f09b1b7f3a44c0efc653.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kHHEogktOiug7ajTNbI7OQ.png"/></div></div></figure><p id="41aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在bucketReducer中，我们需要找到更新的项目，并用更新的项目替换它。首先，我们使用findIndex找到状态数组中项的索引。在上图中，x+1是需要更新的项目的索引。一旦创建了更新的对象，最快的更新方法是使用切片方法和展开运算符(…)。我们实际上是把状态数组分成三部分。第一个块是一个数组，包含从数组头到x的项。第二个块是我们需要更新的项(x+1)。最后一个块是从x+1 (x+2)之后到数组末尾的数组。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi md"><img src="../Images/0782a2386d66cfd12e95c8052e7a521c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WK_XJBjNMOVMFGSAF3l6gQ.png"/></div></div></figure><p id="cabc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在可以通过[…chunk1，updated item，…chunk3]用更新的项替换chunk2来组装更新的数组。</p><h1 id="4a6b" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">删除</h1><p id="fbf3" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">删除类似于Redux store update中的更新，因为我们删除的是一个项目，而不是替换它。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi me"><img src="../Images/04614e6ab9ae240cf14260806eb185c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8gYBNL_W_MtAkBHDqPfDcw.png"/></div></div></figure><p id="12e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在bucketReducer中，我们需要找到要删除的项目，并将其从状态数组中删除。就像在更新中一样，我们将数组分割成三部分。然而，我们并没有用更新的条目替换chunk2，而是把它扔掉了。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mf"><img src="../Images/737aa0e797dfef8738840b08aa466db7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JhzkouDlnxR8pba6riTidg.png"/></div></div></figure><p id="0fda" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过使用spread，我们现在只使用chunk1和chunk3重组数组，就像这样— […chunk1，…chunk3]。删除的项目(chunk2)现在从我们的Redux商店中消失了。</p><p id="4526" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">热毒星快乐！</p></div></div>    
</body>
</html>