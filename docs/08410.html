<html>
<head>
<title>Promises in JavaScript: Explained for Kids</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的承诺:为孩子们解释</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/promises-in-javascript-explained-for-kids-a69e56b58e2c?source=collection_archive---------1-----------------------#2021-04-29">https://levelup.gitconnected.com/promises-in-javascript-explained-for-kids-a69e56b58e2c?source=collection_archive---------1-----------------------#2021-04-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9b56" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回调、承诺和ES6异步等待。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/53ccd1d735a364b0ed0e07b0964e0be1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GLmIJCPQfXoCHLeBFCyV5w.png"/></div></div></figure><p id="42e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将讨论异步JavaScript。这不是一个简单的话题，但我会尽可能简单明了地解释它，这样孩子就能理解了。</p><p id="b2fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我给你讲个故事:</p><p id="eddf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从前，有一对父子。如果天气晴朗，他们想一起去划船。否则，他们会找到另一种方式度过周末。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/74d664df454045f4f333a8d4d18a2b3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WxCIIuh8GtwPlCVdouQPhw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">第一场</figcaption></figure><p id="ff8b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为这是一个小城市，他们没有互联网来查看天气，父亲说:</p><p id="4326" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">父亲</strong>:儿子……你应该爬到最高的树上去看看天气。</p><p id="d687" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">儿子:好的，爸爸。</p><p id="1497" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">父亲:我不会和你一起去，因为我很忙，但是你必须答应我，无论如何都要带着一个答案回来。根据你的回答，我会决定这个周末我们要做什么，</p><p id="cbf6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">儿子:我保证。</p><p id="f2ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">了解这一点很重要:</strong> <br/> 1)父亲真的很忙，所以他会在儿子查看天气的时候做其他事情。</p><p id="c2f4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2)儿子会回到家里，告诉父亲他所看到的一切。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="cad3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们一起看看会发生什么:</p><h2 id="469c" class="li lj iq bd lk ll lm dn ln lo lp dp lq jy lr ls lt kc lu lv lw kg lx ly lz ma bi translated"><strong class="ak"> 1。快乐案例:</strong></h2><p id="a896" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">当儿子爬上树，天气晴朗的时候。他将愉快地回家，周末他们将一起航行。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mg"><img src="../Images/e349393d7d2bc58c6303c7ea45da3d2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O7DNOEX76RxTu5eF"/></div></div></figure><h2 id="8ecf" class="li lj iq bd lk ll lm dn ln lo lp dp lq jy lr ls lt kc lu lv lw kg lx ly lz ma bi translated"><strong class="ak"> 2。坏消息:</strong></h2><p id="4544" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">有可能会有<strong class="jp ir">坏消息</strong>。雨天这不是孩子想要的，但有时我们需要呆在家里(尤其是现在，冠状病毒疫情)。儿子将回家告诉父亲他看到的所有的云。在这种情况下，根据答案，父亲将决定呆在家里玩棋盘游戏。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mg"><img src="../Images/154789866e257b5c0e67a964af7e6a67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0LFLqhTTowyWdohy"/></div></div></figure><h2 id="065c" class="li lj iq bd lk ll lm dn ln lo lp dp lq jy lr ls lt kc lu lv lw kg lx ly lz ma bi translated"><strong class="ak"> 3。意外错误:</strong></h2><p id="ab03" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">还有第三种选择。也许，出于某种不可预知的原因，儿子无法知道是否会下雨。有很多雾或者他不能爬树…这都不重要。结果就是我们不知道天气。</p><p id="7dcc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">即使在这种情况下，男孩答应带着一个答案回来，所以他会回家，向他的父亲解释发生了什么事…然后…父亲会做出决定。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/58d9c7943ab21f3e30f723ac0604ee37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aNrdLEYiL2RTHuHorvZjFg.png"/></div></div></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="f724" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们来谈谈编程。JavaScript以同样的方式工作。</p><p id="4c53" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有时候，我们在等待(儿子的)回答时，想做其他的事情(父亲)。</p><p id="8ad8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设我们在Amazon.com，想找一台新电视。有数以百万计的产品出售，所以只需2-3秒钟就能根据标题找到你想要的电视。</p><p id="dc7a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在此期间，浏览器可以做其他与我们的搜索无关的事情。(例如，打开聊天机器人或绘制页面)。</p><p id="006e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2-3秒后，我们会有答案:</p><ol class=""><li id="471f" class="mh mi iq jp b jq jr ju jv jy mj kc mk kg ml kk mm mn mo mp bi translated">产品有货，我们可以买。</li><li id="78fd" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">产品缺货，店家会推荐不同的。</li><li id="5ece" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">连接到数据库时出现问题。在这种情况下，网站将不得不显示一条错误消息。</li></ol></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="9c6c" class="mv lj iq bd lk mw mx my ln mz na nb lq nc nd ne lt nf ng nh lw ni nj nk lz nl bi translated">好吧，好吧，这是一个很好的故事，但是……我该怎么利用它呢？</h1><h2 id="2853" class="li lj iq bd lk ll lm dn ln lo lp dp lq jy lr ls lt kc lu lv lw kg lx ly lz ma bi translated"><strong class="ak"> A)使用回调:</strong></h2><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">回调示例</figcaption></figure><p id="7643" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我真的不建议再用回调了。代码将很难理解和维护。可以搜索“回调地狱”了解更多。</p><p id="d413" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的情况下，父亲会等待儿子。但是也许母亲必须等到父亲做出决定，而父亲的决定必须等到儿子……你明白了。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi no"><img src="../Images/5e9d459a8a9673a46e709e2fb41ae9ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DEptuVzAhgFaZgxq"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">回调地狱</figcaption></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h2 id="2a22" class="li lj iq bd lk ll lm dn ln lo lp dp lq jy lr ls lt kc lu lv lw kg lx ly lz ma bi translated"><strong class="ak"> B)利用承诺</strong></h2><p id="28e3" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">作为回调的替代，JavaScript引入了承诺。</p><p id="5eb7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">主旨很简单。承诺有两个功能:</p><ul class=""><li id="e871" class="mh mi iq jp b jq jr ju jv jy mj kc mk kg ml kk np mn mo mp bi translated">化解:任务成功就叫(男孩爬树。不管是晴天还是雨天，我们都有应对措施</li><li id="0e08" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk np mn mo mp bi translated">拒绝:当我们遇到错误(树着火了)时就会发生</li></ul><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">承诺范例</figcaption></figure><p id="da03" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它比回调更容易阅读，但代码仍然很多。我们不再有回调地狱，但我们可以有一个承诺地狱:D</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nq"><img src="../Images/4e2ee815ce87e87c155f22c299bd075d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jh7Qn71IGI6RtDM5"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">承诺地狱</figcaption></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h2 id="26a8" class="li lj iq bd lk ll lm dn ln lo lp dp lq jy lr ls lt kc lu lv lw kg lx ly lz ma bi translated"><strong class="ak"> C)异步等待— ES6 </strong></h2><p id="dcaa" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">2015年，JavaScript引入了一种新的承诺语法糖。</p><p id="6baf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以找到许多解释ES6功能的非常好的资料，但一般来说，您需要理解两个关键词:</p><ul class=""><li id="fa5a" class="mh mi iq jp b jq jr ju jv jy mj kc mk kg ml kk np mn mo mp bi translated"><strong class="jp ir"> <em class="nr"> async </em> </strong>:等待某事的函数必须是async。在我们的情况下，父亲将是异步的，男孩将是一个承诺。</li><li id="4a56" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk np mn mo mp bi translated">在异步函数内部，我们可以使用<strong class="jp ir"> <em class="nr"> await </em> </strong>。只有在等待的函数被解析后，JavaScript才会知道执行剩余的代码。</li></ul><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">ES6异步等待</figcaption></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="40f2" class="mv lj iq bd lk mw mx my ln mz na nb lq nc nd ne lt nf ng nh lw ni nj nk lz nl bi translated"><strong class="ak">结论:</strong></h1><p id="714a" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">在编程中，理解事物如何工作以及为什么工作是很重要的。有了这个故事，你可以向任何人解释回调，承诺和异步等待，甚至是一个孩子。</p><p id="0b33" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我知道你对这篇文章的看法，还有哪些主题值得一个故事。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="0721" class="mv lj iq bd lk mw mx my ln mz na nb lq nc nd ne lt nf ng nh lw ni nj nk lz nl bi translated"><strong class="ak">演职员表:</strong></h1><p id="5e5a" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">有趣的是，我在学习JavaScript时读过一个类似的故事。这是Andy Shora写的一篇关于AngularJS的旧文章，但它背后的想法是这篇文章的灵感。</p><p id="04fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在这里查看:</p><div class="ns nt gp gr nu nv"><a href="https://www.andyshora.com/promises-angularjs-explained-as-cartoon.html" rel="noopener  ugc nofollow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd ir gy z fp oa fr fs ob fu fw ip bi translated">以卡通形式解释的AngularJS承诺</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">每个星期天早上，一位父亲都让他的儿子去用他的…</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">www.andyshora.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj kv nv"/></div></div></a></div><p id="7305" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我知道你对这篇文章的看法，还有哪些主题值得一个故事。</p></div></div>    
</body>
</html>