<html>
<head>
<title>Creating a Node.js API with Express and TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Express和TypeScript创建Node.js API</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-a-node-js-api-with-express-and-typescript-549fba5f5a33?source=collection_archive---------2-----------------------#2021-02-03">https://levelup.gitconnected.com/creating-a-node-js-api-with-express-and-typescript-549fba5f5a33?source=collection_archive---------2-----------------------#2021-02-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/cc8b99eb77e324686afd3e93cc54afbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XZILm1a4pbB6HUA5"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">詹姆斯·哈里逊在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="361c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本教程中，我们将使用Express和TypeScript带给我们的所有功能创建一个Node.js API。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="d174" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将从初始化项目和安装一些依赖项开始。我将在本教程中使用yarn，但是如果你喜欢的话，也可以随意使用npm。</p><pre class="li lj lk ll gt lm ln lo lp aw lq bi"><span id="253f" class="lr ls iq ln b gy lt lu l lv lw">mkdir new-project<br/>cd new-project<br/>yarn init -y</span></pre><p id="eff1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先我们创建我们的项目文件夹，打开它并用<em class="lx"> yarn init -y </em>初始化我们的项目，创建一个<em class="lx"> package.json </em>文件。现在我们必须安装一些依赖项:</p><pre class="li lj lk ll gt lm ln lo lp aw lq bi"><span id="ea08" class="lr ls iq ln b gy lt lu l lv lw">yarn add express<br/>yarn add typescript ts-node nodemon -D<br/>yarn add @types/express @types/node -D</span></pre><p id="b699" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从安装express开始。然后，我们安装<em class="lx"> typescript </em>和<em class="lx"> ts-node </em>库来为我们的项目添加typescript支持，并安装<em class="lx"> nodemon </em>来使我们的服务器监听修改(这样我们就不必在每次对某个文件进行更改时重新启动我们的项目)。最后，我们会安装一些<em class="lx">类型的</em>来避免一些后患。</p><p id="caa0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装好库之后，现在我们必须创建我们的<em class="lx"> tsconfig.json </em>。这是定义TypeScript配置的文件，比如它应该检查哪些文件夹以及应该将文件构建到哪个文件夹。</p><p id="b4ab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在项目文件夹中创建<em class="lx"> tsconfig.json </em>文件:</p><figure class="li lj lk ll gt jr"><div class="bz fp l di"><div class="ly lz l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">tsconfig.json</figcaption></figure><p id="66aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们需要做的最后一个修改是对我们的<em class="lx"> package.json </em>文件的修改。我们将添加脚本来运行我们的开发项目(使用<em class="lx"> nodemon </em>和<em class="lx"> ts-node </em>)并构建和启动已构建的文件。</p><p id="cf6c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">修改您的<em class="lx"> package.json </em>文件，使其看起来像(但不一定要完全相等)如下所示。重点关注<em class="lx">剧本</em>部分:</p><figure class="li lj lk ll gt jr"><div class="bz fp l di"><div class="ly lz l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">package . JSON—您的文件不必完全像这样。只需关注脚本部分</figcaption></figure><p id="b2f1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们正在创建三个脚本:</p><ul class=""><li id="d9aa" class="ma mb iq kf b kg kh kk kl ko mc ks md kw me la mf mg mh mi bi translated">“构建”将运行<em class="lx"> tsc </em>命令来编译我们的<em class="lx">。ts </em>文件转换成<em class="lx">文件。我们在<em class="lx">ts config . JSON</em>(<em class="lx">dist</em>文件夹)上定义的文件夹内的js </em>文件；</li><li id="5148" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">“start:prod”将启动<em class="lx"> dist </em>文件夹中的<em class="lx"> server.js </em>文件；</li><li id="10e6" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">“start:dev”将用<em class="lx"> nodemon </em>(他将运行<em class="lx"> ts-node </em>)启动我们的项目，让我们的服务器监听对我们项目文件夹中文件的任何修改。</li></ul><p id="6bb9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在安装和设置好一切之后，我们终于可以创建我们的API了。我们将首先创建一个<em class="lx"> src </em>文件夹来包含我们项目中的所有代码。</p><p id="bd72" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<em class="lx"> src </em>文件夹中创建<em class="lx"> app.ts </em>文件:</p><figure class="li lj lk ll gt jr"><div class="bz fp l di"><div class="ly lz l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">应用程序</figcaption></figure><p id="366f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">App类用于使用express实例化服务器。这种方式增加了复杂性，但使代码更容易维护。从导入中我们可以看到，我们需要从一个<em class="lx"> routes.ts </em>文件中导入<em class="lx">条路线</em>，所以让我们创建它。</p><p id="331a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<em class="lx"> src </em>文件夹下创建<em class="lx"> routes.ts </em>文件:</p><figure class="li lj lk ll gt jr"><div class="bz fp l di"><div class="ly lz l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">routes.ts</figcaption></figure><p id="52c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一如既往，我们有我们的“你好世界”。在这个文件中，我们将添加我们将在API中使用的每条路线。现在，最后一步是创建启动服务器的文件。从<em class="lx"> package.json </em>脚本中我们知道文件名将是<em class="lx"> server.ts </em>，所以…</p><p id="ed55" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<em class="lx"> src </em>文件夹中创建<em class="lx"> server.ts </em>文件:</p><figure class="li lj lk ll gt jr"><div class="bz fp l di"><div class="ly lz l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">server.ts</figcaption></figure><p id="b55c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们准备好出发了。只需在您的<a class="ae kc" href="http://localhost:3333/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3333/ </a>上运行start命令并进行测试</p><pre class="li lj lk ll gt lm ln lo lp aw lq bi"><span id="5b11" class="lr ls iq ln b gy lt lu l lv lw">yarn start:dev</span></pre><p id="47f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您想部署您的应用程序，您只需运行:</p><pre class="li lj lk ll gt lm ln lo lp aw lq bi"><span id="3d5f" class="lr ls iq ln b gy lt lu l lv lw">yarn build<br/>yarn start:prod</span></pre></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="7796" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">仅此而已。我们使用Express和TypeScript开发了我们的服务器。当然，我们必须做一些额外的步骤，但这绝对值得花时间，因为TypeScript添加了一些可怕的保护和可用性层。</p><p id="5f92" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您想验证最终代码，<a class="ae kc" href="https://github.com/phcarvalho/medium-posts/tree/main/01-base_api_with_ts" rel="noopener ugc nofollow" target="_blank">请在此处</a>检查。如果您想继续开发这个API，添加一个数据库和路由来创建、读取、更新和删除(CRUD)记录，请查看我的另一个教程，它是这个教程的延续:</p><div class="mo mp gp gr mq mr"><a rel="noopener  ugc nofollow" target="_blank" href="/adding-and-using-a-database-on-a-typescript-api-with-typeorm-41c49336eff5"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd ir gy z fp mw fr fs mx fu fw ip bi translated">使用TypeORM在TypeScript API上添加和使用数据库</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">在本教程中，我们将把TypeORM添加到我们的API中，我们将使用它来创建一个数据库来保存产品…</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="na l"><div class="nb l nc nd ne na nf jw mr"/></div></div></a></div></div></div>    
</body>
</html>