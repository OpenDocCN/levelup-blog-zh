<html>
<head>
<title>An Intro to JavaScript Modules</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript模块简介</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/an-intro-to-javascript-modules-36c07c5d4c9c?source=collection_archive---------20-----------------------#2020-07-09">https://levelup.gitconnected.com/an-intro-to-javascript-modules-36c07c5d4c9c?source=collection_archive---------20-----------------------#2020-07-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="11a1" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">更好的编程</h2><div class=""/><div class=""><h2 id="9b60" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">了解如何使用导出和导入语句</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/85161a00a65dc3d782655ebe8957a798.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3OOUVkuPO7f0MwwzNPY1Lg.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">由<a class="ae lh" href="https://unsplash.com/@lastnameeaster?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae lh" href="https://unsplash.com/@lastnameeaster?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> La-Rel复活节</a>拍摄的照片</figcaption></figure><p id="9ef1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">谈到JavaScript模块和它们到底是如何工作的，以及为什么我们可以以不同的形式使用它们，似乎有些混乱。今天我将解释导出和导入模块的不同方式。</p><h1 id="e7e4" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">JavaScript模块的一些背景知识</h1><p id="a60e" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">JavaScript程序开始时是简单的脚本或应用程序，代码库很小，但是随着它的发展和使用的增加，代码库的规模也急剧增加。为了支持这种增长，语言需要支持一种机制，在这种机制下，可以将代码分离或拆分成更小的、可重用的单元。节点。JS拥有这种能力已经有一段时间了，直到它通过一个叫做模块的特性被整合到JavaScript中。因此，最终他们成功进入了语言本身和浏览器。</p><p id="94f3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">根据定义，一个模块只是一个文件，它可以通过指令<code class="fe nb nc nd ne b">export</code>和<code class="fe nb nc nd ne b">import</code>的帮助从其他模块(或文件)导入:</p><ul class=""><li id="f267" class="nf ng it lk b ll lm lo lp lr nh lv ni lz nj md nk nl nm nn bi translated"><code class="fe nb nc nd ne b">export</code>:关键字标记应该可以从当前模块外部访问的变量和函数。</li><li id="c86b" class="nf ng it lk b ll no lo np lr nq lv nr lz ns md nk nl nm nn bi translated"><code class="fe nb nc nd ne b">import</code>:允许从其他模块导入功能。</li></ul><p id="d2c6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">稍后我们将回到更多的内容。</p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="e8b8" class="me mf it bd mg mh oa mj mk ml ob mn mo ki oc kj mq kl od km ms ko oe kp mu mv bi translated">介绍一个例子</h1><p id="7d98" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">为了演示模块的使用，我们将创建一个简单的<code class="fe nb nc nd ne b">user</code>模块，它将公开一个<code class="fe nb nc nd ne b">User</code>类。让我们回顾一下项目的基本结构:</p><pre class="ks kt ku kv gt of ne og oh aw oi bi"><span id="4216" class="oj mf it ne b gy ok ol l om on">index.html<br/>scripts/<br/>    index.js<br/>    modules/<br/>        user.js</span></pre><p id="4afc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们的应用程序将非常简单，它将只在屏幕上显示用户的名字，但有趣的是，这个名字将来自一个<code class="fe nb nc nd ne b">User</code>类的对象实例。让我们通过现场演示来看看它的实际效果:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oo op l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://codesandbox.io/s/an-intro-to-javascript-modules-j05tw?fontsize=14&amp;hidenavigation=1&amp;theme=dark" rel="noopener ugc nofollow" target="_blank">在codesandbox中打开</a></figcaption></figure><p id="cbc2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们按部件详细看看那里发生了什么</p><h1 id="81f1" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">导出模块用户</h1><p id="e793" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">要访问<code class="fe nb nc nd ne b">User</code>类，我们需要做的第一件事是从模块中导出它。为此，我们使用了<code class="fe nb nc nd ne b">export</code>语句。</p><p id="e8ec" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当创建JavaScript模块时，使用export语句从模块中导出函数、对象或基元值的动态绑定，以便其他程序可以使用import语句使用它们。</p><p id="ce9e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们看看我们的代码:</p><pre class="ks kt ku kv gt of ne og oh aw oi bi"><span id="03ed" class="oj mf it ne b gy ok ol l om on">// file: scripts/modules/user.js<br/>export class User {<br/>  constructor(name) {<br/>    this.name = name;<br/>  }<br/>}</span></pre><p id="a530" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">既然模块已经导出，我们可以通过导入在其他模块中使用它。</p><h1 id="7788" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">正在导入模块用户</h1><p id="21d5" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">静态导入语句用于导入由另一个模块导出的只读活动绑定。无论是否声明，导入的模块都处于严格模式。import语句不能在嵌入式脚本中使用，除非这样的脚本具有type="module "。导入的绑定称为活动绑定，因为它们是由导出绑定的模块更新的。</p><p id="90f8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们看看我们的例子</p><pre class="ks kt ku kv gt of ne og oh aw oi bi"><span id="3cd7" class="oj mf it ne b gy ok ol l om on">//file: scripts/index.js<br/>import { User } from './modules/user.js'</span><span id="269b" class="oj mf it ne b gy oq ol l om on">const user = new User('Juan')</span><span id="5f0b" class="oj mf it ne b gy oq ol l om on">document.getElementById('user-name').innerText = user.name;</span></pre><p id="34ab" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe nb nc nd ne b">import</code>语句允许我们从模块中导入特定的绑定。有几种不同的方法来指定我们要导入什么，我们将在后面的文章中讨论它们。现在，在我们的例子中，我们只是从指定的模块(或文件)导入<code class="fe nb nc nd ne b">User</code>。</p><p id="723c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">导入后，我们可以使用该对象，因为它是同一个文件的一部分。</p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="f1e2" class="me mf it bd mg mh oa mj mk ml ob mn mo ki oc kj mq kl od km ms ko oe kp mu mv bi translated">默认导出与命名导出</h1><p id="ff89" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">到目前为止，我们通过名称导出了一个类，但是有2种不同的方式导出模块</p><ul class=""><li id="bd6b" class="nf ng it lk b ll lm lo lp lr nh lv ni lz nj md nk nl nm nn bi translated">命名导出(每个模块零个或多个导出)</li><li id="51b9" class="nf ng it lk b ll no lo np lr nq lv nr lz ns md nk nl nm nn bi translated">默认导出(每个模块只有一个)</li></ul><p id="9ffc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">以下是一些命名导出的示例:</p><pre class="ks kt ku kv gt of ne og oh aw oi bi"><span id="eb22" class="oj mf it ne b gy ok ol l om on">// export features declared earlier<br/>export { myFunction, myVariable }; </span><span id="8b26" class="oj mf it ne b gy oq ol l om on">// export individual features (can export var, let, const, function, class)<br/>export let myVariable = Math.sqrt(2);<br/>export function myFunction() { ... };</span></pre><p id="af47" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">默认导出:</p><pre class="ks kt ku kv gt of ne og oh aw oi bi"><span id="c5d8" class="oj mf it ne b gy ok ol l om on">// export feature declared earlier as default<br/>export { myFunction as default };</span><span id="6f29" class="oj mf it ne b gy oq ol l om on">// export individual features as default<br/>export default function () { ... } <br/>export default class { .. }</span></pre><p id="e704" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">命名导出对于导出多个值非常有用。在导入过程中，必须使用与相应对象相同的名称。但是默认导出可以用任何名称导入，例如:</p><pre class="ks kt ku kv gt of ne og oh aw oi bi"><span id="aafd" class="oj mf it ne b gy ok ol l om on">// file: myk.js<br/>const k = 12<br/>export default k</span><span id="423c" class="oj mf it ne b gy oq ol l om on">// file: main.js<br/>import m from './myk'<br/>console.log(m)</span></pre><p id="617e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用命名导出时，也可以为导出的值分配一个自定义名称，如下例所示:</p><pre class="ks kt ku kv gt of ne og oh aw oi bi"><span id="c4cf" class="oj mf it ne b gy ok ol l om on">const name = 'value'<br/>export {<br/>  name as newName<br/>}</span></pre><p id="9526" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">导出的值现在可以作为<code class="fe nb nc nd ne b">newName</code>而不是<code class="fe nb nc nd ne b">name</code>导入。</p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="0713" class="me mf it bd mg mh oa mj mk ml ob mn mo ki oc kj mq kl od km ms ko oe kp mu mv bi translated">进口</h1><p id="8311" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">我们已经看到了一些如何从模块中导入命名或默认导出的例子。但在进口方面，这里有更多的选择。</p><h1 id="58d3" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">导入默认导出</h1><pre class="ks kt ku kv gt of ne og oh aw oi bi"><span id="8531" class="oj mf it ne b gy ok ol l om on">import something from 'mymodule'</span><span id="ef0b" class="oj mf it ne b gy oq ol l om on">console.log(something)</span></pre><h1 id="4585" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">导入命名导出</h1><pre class="ks kt ku kv gt of ne og oh aw oi bi"><span id="5c01" class="oj mf it ne b gy ok ol l om on">import { var1, var2 } from 'mymodule'</span><span id="7d14" class="oj mf it ne b gy oq ol l om on">console.log(var1)<br/>console.log(var2)</span></pre><h1 id="ab69" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">重命名导入</h1><pre class="ks kt ku kv gt of ne og oh aw oi bi"><span id="def2" class="oj mf it ne b gy ok ol l om on">import { var1 as myvar, var2 } from 'mymodule'</span><span id="e914" class="oj mf it ne b gy oq ol l om on">// Now myvar will be available instead of var1<br/>console.log(myvar)<br/>console.log(var2)</span></pre><h1 id="04de" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">从模块导入所有内容</h1><pre class="ks kt ku kv gt of ne og oh aw oi bi"><span id="912c" class="oj mf it ne b gy ok ol l om on">import * as anyName from 'mymodule'</span><span id="3c8c" class="oj mf it ne b gy oq ol l om on">console.log(anyName.var1)<br/>console.log(anyName.var2)<br/>console.log(anyName.default)</span></pre><p id="0e2c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">到目前为止，我们在这里描述的所有方法都是静态导入，这意味着您将它们放在文件的顶部，模块的内容总是被导入。但也不尽然，你也可以有动态导入。</p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="9508" class="me mf it bd mg mh oa mj mk ml ob mn mo ki oc kj mq kl od km ms ko oe kp mu mv bi translated">动态导入</h1><p id="4fc7" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">这允许您仅在需要时动态加载模块，而不是预先加载所有内容。这有一些明显的性能优势；让我们继续读下去，看看它是如何工作的。</p><p id="bc64" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这个新功能允许您将import()作为一个函数调用，并将模块的路径作为一个参数传递给它。它返回一个承诺，这个承诺通过一个模块对象来实现，这个模块对象允许您访问该对象的导出，例如</p><pre class="ks kt ku kv gt of ne og oh aw oi bi"><span id="a329" class="oj mf it ne b gy ok ol l om on">import('./modules/myModule.js')<br/>  .then((module) =&gt; {<br/>    // Do something with the module.<br/>  });</span></pre></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="237d" class="me mf it bd mg mh oa mj mk ml ob mn mo ki oc kj mq kl od km ms ko oe kp mu mv bi translated">组合默认导出和命名导出</h1><p id="204f" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">你没看错！可以将default和named组合在一起，正如您所料，您可以同时导入它们。让我们看一个例子:</p><pre class="ks kt ku kv gt of ne og oh aw oi bi"><span id="2193" class="oj mf it ne b gy ok ol l om on">//file: mymodule.js<br/>export const named = 'named export'</span><span id="c2c3" class="oj mf it ne b gy oq ol l om on">export function test() {<br/>  console.log('exported function')<br/>}</span><span id="febe" class="oj mf it ne b gy oq ol l om on">export default 'default export';</span></pre><p id="2f4c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们可以使用以下任一方案导入它们:</p><pre class="ks kt ku kv gt of ne og oh aw oi bi"><span id="2225" class="oj mf it ne b gy ok ol l om on">//another file:<br/>import anyName from './mymodule' // where anyName is the default export</span><span id="3ba9" class="oj mf it ne b gy oq ol l om on">// or both named exports<br/>import { named, test } from './mymodule';</span><span id="a4a2" class="oj mf it ne b gy oq ol l om on">// or just one<br/>import { named } from './mymodule';</span><span id="0f88" class="oj mf it ne b gy oq ol l om on">// or all of them together<br/>import anyName, { named, test } from './mymodule';</span></pre></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="1bcb" class="me mf it bd mg mh oa mj mk ml ob mn mo ki oc kj mq kl od km ms ko oe kp mu mv bi translated">结论</h1><p id="9bb1" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">JavaScript模块是一个强大的特性，它允许我们更好地组织代码，但是它也允许我们跨项目共享模块。我希望你今天喜欢并学到了一些新东西。</p><p id="2aa5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">感谢阅读！</p></div></div>    
</body>
</html>