<html>
<head>
<title>Tutorial: Develop a Responsive React Navigation Drawer HOC with Routing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">教程:开发一个带有路由的响应式React导航抽屉</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/tutorial-develop-a-responsive-react-navigation-drawer-hoc-with-routing-a92712e349a9?source=collection_archive---------3-----------------------#2022-09-28">https://levelup.gitconnected.com/tutorial-develop-a-responsive-react-navigation-drawer-hoc-with-routing-a92712e349a9?source=collection_archive---------3-----------------------#2022-09-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="09a2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在Material UI的一点帮助下</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/39eb73e934d6db6a1be38334e045c5b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Kg70Gyt0A3cg15KK"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Maksym Kaharlytskyi 在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="87c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有没有想过一个网站如何在每个页面上都有一个持久的导航菜单？在前端进行URL路由怎么样？对于一些人来说，这个功能可能看起来很基础，但是如果你是新手，下面的介绍会很有用。</p><h1 id="4d77" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">方案</h1><p id="b923" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">假设您有一个客户，希望您构建一个具有以下菜单选项的UI:</p><ul class=""><li id="f72c" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">主页</li><li id="ca57" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">商店</li><li id="98e8" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">仪表盘</li><li id="a796" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">设置</li><li id="6660" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">账户</li></ul><p id="cd2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，我们还为您提供了一些模型，显示了屏幕左侧和顶部的导航栏。菜单选项显示为文本旁边的图标和一个可展开的抽屉。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/4bf727338c5f0992e57e28b54a14a787.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UP77ttcc6NSWy71ZVk3y5A.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">关闭状态的粗略模型</figcaption></figure><h1 id="98e5" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">设置</h1><p id="a88b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">作为先决条件，您应该<a class="ae kv" href="https://medium.com/geekculture/how-to-install-node-js-by-nvm-61addf4ab1ba" rel="noopener">安装节点版本管理器</a>。一旦启动并运行，我们将使用(截至2022年10月25日)Node.js的最新长期支持版本:</p><p id="c329" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ne nf ng nh b">$ nvm install 18 &amp;&amp; nvm use 18</code></p><p id="b216" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将使用可靠的create-react-app来引导React项目:</p><p id="138a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ne nf ng nh b">$ npx create-react-app navigation-drawer --template typescript</code></p><p id="04f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里的名字是“导航抽屉”,但你可以随意称呼它。create-react-app将为您创建一个目录，因此在您的终端中切换到该目录:</p><p id="800a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ne nf ng nh b">$ cd navigation-drawer</code></p><p id="98a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们将从安装一些稍后会用到的软件包开始:</p><p id="efd6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ne nf ng nh b">$ npm i react-router-dom @mui/material @mui/icons-material @emotion/react @emotion/styled</code></p><p id="be5f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是对这些软件包的功能的解释，仅供参考:</p><ul class=""><li id="1ed1" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated"><code class="fe ne nf ng nh b">react-router-dom</code><em class="ni">——(版本6.3.0，解压后大小:169 kB)——React Router是React JavaScript库的一个轻量级、全功能路由库。React路由器运行在React运行的任何地方；在web上、在服务器上(使用node.js)以及在React Native上</em></li><li id="6041" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated"><code class="fe ne nf ng nh b">@mui/material</code><em class="ni">——(版本5.10.1，解压缩后大小:9.51 MB)——一个全面的组件库，它实现了谷歌</em> <a class="ae kv" href="https://material.io/design/introduction/" rel="noopener ugc nofollow" target="_blank"> <em class="ni">材料设计</em> </a> <em class="ni">系统</em></li><li id="3841" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated"><code class="fe ne nf ng nh b">@mui/icons-material</code><em class="ni">——(版本5.8.4，解压后大小:17.8 MB)——一个提供Google </em> <a class="ae kv" href="https://fonts.google.com/icons?icon.set=Material+Icons" rel="noopener ugc nofollow" target="_blank"> <em class="ni">素材图标</em> </a> <em class="ni">转换成</em> <code class="fe ne nf ng nh b"><a class="ae kv" href="https://mui.com/material-ui/api/svg-icon/" rel="noopener ugc nofollow" target="_blank"><em class="ni">SvgIcon</em></a></code> <em class="ni">组件</em>的包</li><li id="fdc3" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated"><code class="fe ne nf ng nh b">@emotion/react</code><em class="ni">——(版本11.10.0，解压缩后大小:549 kB)——一个高性能、灵活的CSS-in-JS库。它建立在许多其他CSS-in-JS库的基础上，允许您使用字符串或对象样式快速设计应用程序。它有可预测的组成，以避免CSS的特殊性问题。有了源地图和标签，Emotion就有了很好的开发者体验和出色的性能，并且在生产中有大量缓存</em></li><li id="7b12" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated"><code class="fe ne nf ng nh b">@emotion/styled</code><em class="ni">——(版本11.10.0，解压后大小:174 kB)——为@emotion/react设计的风格化API</em></li></ul></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="a5c1" class="ls lt iq bd lu lv nq lx ly lz nr mb mc jw ns jx me jz nt ka mg kc nu kd mi mj bi translated">编码</h1><p id="eb71" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这总是每个人最喜欢的部分。在<a class="ae kv" href="https://medium.com/cloud-native-the-gathering/what-is-the-best-react-reactjs-and-react-native-ide-170ad5e23ae3" rel="noopener">你最喜欢的IDE </a>中打开自举React项目。首先在<code class="fe ne nf ng nh b">src/</code>目录中创建5个目录:</p><pre class="kg kh ki kj gt nv nh nw nx aw ny bi"><span id="f9c6" class="nz lt iq nh b gy oa ob l oc od">$ cd src &amp;&amp; mkdir components media pages styles types</span></pre><p id="747b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您的项目目录结构应该如下所示:</p><pre class="kg kh ki kj gt nv nh nw nx aw ny bi"><span id="0f79" class="nz lt iq nh b gy oa ob l oc od">public/<br/>src/<br/><strong class="nh ir">  --&gt; components/<br/>  --&gt; media/<br/>  --&gt; pages/<br/>  --&gt; styles/ <br/>  --&gt; types/<br/></strong>.gitignore<br/>README.md<br/>package-lock.json<br/>package.json<br/>tsconfig.json</span></pre><p id="c525" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe ne nf ng nh b">src/index.tsx</code>文件中，用以下内容替换样板文件内容:</p><pre class="kg kh ki kj gt nv nh nw nx aw ny bi"><span id="4628" class="nz lt iq nh b gy oa ob l oc od">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import App from './components/App';<br/><br/>ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));</span></pre><p id="dcfb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你应该会看到到处都是红线，但没关系，因为我们很快就会修复它。然后，我们将在<code class="fe ne nf ng nh b">components/</code>目录<code class="fe ne nf ng nh b">App.tsx</code>中创建一个文件，并用以下内容填充它:</p><pre class="kg kh ki kj gt nv nh nw nx aw ny bi"><span id="98b2" class="nz lt iq nh b gy oa ob l oc od">import React, { FC } from 'react';<br/>import { BrowserRouter as Router } from "react-router-dom";<br/>import AppRouter from './AppRouter';<br/><br/>const App: FC = () =&gt; (<br/>  &lt;Router&gt;<br/>    &lt;AppRouter /&gt;<br/>  &lt;/Router&gt;<br/>);<br/><br/>export default App;</span></pre><p id="d7a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ne nf ng nh b">BrowserRouter</code>(我们将其别名为<code class="fe ne nf ng nh b">Router</code>)是一个使用HTML5历史API来保持你的UI与URL同步的组件。我们已经将这个包裹在我们的应用程序的路线中，这些路线在<code class="fe ne nf ng nh b">AppRouter</code>中。接下来，我们需要在<code class="fe ne nf ng nh b">components/AppRouter.tsx</code>中创建我们的应用程序的路线。该组件将如下所示:</p><pre class="kg kh ki kj gt nv nh nw nx aw ny bi"><span id="9b5b" class="nz lt iq nh b gy oa ob l oc od">import React, { Suspense } from 'react';<br/>import { Route, Routes } from "react-router-dom";<br/>import { Grid } from '@mui/material';<br/><br/>const DemoPage = ({ pageName }: DemoPageProps) =&gt; &lt;h1 style={{ margin: '1rem' }}&gt;Demo Page: {pageName}&lt;/h1&gt;;</span><span id="9276" class="nz lt iq nh b gy oe ob l oc od">const DemoSpinner = () =&gt; (&lt;p&gt;Spinner&lt;/p&gt;);</span><span id="fffc" class="nz lt iq nh b gy oe ob l oc od">const AppRouter = () =&gt; (<br/>    &lt;Grid className="container"&gt;<br/>      &lt;Suspense fallback={&lt;DemoSpinner /&gt;}&gt;<br/>        &lt;Routes&gt;<br/>          &lt;Route path="/" element={&lt;DemoPage pageName="Home" /&gt;} /&gt;<br/>          &lt;Route path="/shop" element={&lt;DemoPage pageName="Shop" /&gt;} /&gt;<br/>          &lt;Route path="/dashboard" element={&lt;DemoPage pageName="Dashboard" /&gt;} /&gt;<br/>          &lt;Route path="/about" element={&lt;DemoPage pageName="About" /&gt;} /&gt;<br/>          &lt;Route path="/settings" element={&lt;DemoPage pageName="Shop" /&gt;} /&gt;<br/>          &lt;Route path="/account" element={&lt;DemoPage pageName="Account" /&gt;} /&gt;<br/>        &lt;/Routes&gt;<br/>      &lt;/Suspense&gt;<br/>    &lt;/Grid&gt;<br/>);<br/><br/>export default AppRouter;</span></pre><p id="b167" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们的默认路径是主页。请注意我们如何在子路由列表上方的“根”<code class="fe ne nf ng nh b">/</code>指定路由，即<code class="fe ne nf ng nh b">/about</code>。以前这会给应用程序增加一个错误，因为<code class="fe ne nf ng nh b">/</code>路线会拦截任何跟在它后面的东西。这个问题已经在<code class="fe ne nf ng nh b">react-router-dom</code>包中解决了。现在，我们只有一个内容组件，我们将在所有路线中重复使用，因此让我们继续更新它。在<code class="fe ne nf ng nh b">pages/</code>目录下创建<code class="fe ne nf ng nh b">Page.tsx</code>:</p><pre class="kg kh ki kj gt nv nh nw nx aw ny bi"><span id="166c" class="nz lt iq nh b gy oa ob l oc od">import React from 'react';<br/><br/>interface PageProps {<br/>  pageName: string;<br/>}<br/><br/>const Page = ({ pageName }: PageProps) =&gt; (<br/>  &lt;h1 style={{ margin: '1rem' }}&gt;Demo Page: {pageName}&lt;/h1&gt;<br/>);<br/><br/>export default Page;</span></pre><p id="3b4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将作为本教程的占位符，但理想情况下，你不会在专业项目中这样做。我不会在这篇文章中讨论它，但是你应该在<code class="fe ne nf ng nh b">pages/</code>目录中为你的网站中的每个页面创建一个不同的React组件。这隔离了功能，并且是一个比让每个页面都适合这个React组件更干净的实现。回头看看我们的<code class="fe ne nf ng nh b">AppRouter.tsx</code>组件，我们看到还有一个<code class="fe ne nf ng nh b">Spinner</code>组件正在被使用。每当我们向DOM加载新内容时，都会显示这个消息。让我们给<code class="fe ne nf ng nh b">Spinner</code>它自己的文件；在<code class="fe ne nf ng nh b">components/</code>中创建<code class="fe ne nf ng nh b">Spinner.tsx</code>:</p><pre class="kg kh ki kj gt nv nh nw nx aw ny bi"><span id="918d" class="nz lt iq nh b gy oa ob l oc od">import React from 'react';<br/>import { CircularProgress, Box } from '@mui/material';<br/><br/>const Spinner = () =&gt; {<br/>  return (<br/>    &lt;Box sx={{ display: 'flex', color: 'grey.500' }}&gt;<br/>      &lt;CircularProgress /&gt;<br/>    &lt;/Box&gt;<br/>  );<br/>};</span><span id="dc17" class="nz lt iq nh b gy oe ob l oc od">export default Spinner;</span></pre><p id="cda3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回到<code class="fe ne nf ng nh b">AppRouter.tsx</code>，我们现在应该有一个<code class="fe ne nf ng nh b">Page</code>和<code class="fe ne nf ng nh b">Spinner</code>组件可以使用了。该组件的更新版本现在如下所示:</p><pre class="kg kh ki kj gt nv nh nw nx aw ny bi"><span id="a038" class="nz lt iq nh b gy oa ob l oc od">import React, { Suspense, lazy } from 'react';<br/>import { Route, Routes } from "react-router-dom";<br/>import { Grid } from '@mui/material';<br/>import SiteNavigation from './SiteNavigation';<br/>import Spinner from './Spinner';<br/><br/>const About = React.lazy(() =&gt; import("../pages/DemoPage"));<br/>const Dashboard = React.lazy(() =&gt; import("../pages/DemoPage"))<br/>const Account = lazy(() =&gt; import('../pages/DemoPage'));<br/>const Shop = lazy(() =&gt; import('../pages/DemoPage'));<br/>const Home = lazy(() =&gt; import('../pages/DemoPage'));<br/><br/>const AppRouter = () =&gt; (<br/>  &lt;SiteNavigation&gt;<br/>    &lt;Grid className="container"&gt;<br/>      &lt;Suspense fallback={&lt;Spinner /&gt;}&gt;<br/>        &lt;Routes&gt;<br/>          &lt;Route path="/" element={&lt;Home pageName="Home" /&gt;} /&gt;<br/>          &lt;Route path="/shop" element={&lt;Shop pageName="Shop" /&gt;} /&gt;<br/>          &lt;Route path="/dashboard" element={&lt;Dashboard pageName="Dashboard" /&gt;} /&gt;<br/>          &lt;Route path="/about" element={&lt;About pageName="About" /&gt;} /&gt;<br/>          &lt;Route path="/settings" element={&lt;Shop pageName="Shop" /&gt;} /&gt;<br/>          &lt;Route path="/account" element={&lt;Account pageName="Account" /&gt;} /&gt;<br/>        &lt;/Routes&gt;<br/>      &lt;/Suspense&gt;<br/>    &lt;/Grid&gt;<br/>  &lt;/SiteNavigation&gt;<br/>);<br/><br/>export default AppRouter;</span></pre><p id="1670" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，我们是如何延迟加载页面以接受对相应路由的请求的。惰性加载让您可以推迟加载某个组件的捆绑代码，直到它被调用。还有一个SiteNavigation组件，我们将路线包装在其中。这就是有趣的地方。要创建<code class="fe ne nf ng nh b">SiteNavigation.tsx</code>，让我们从<code class="fe ne nf ng nh b">components/</code>目录中的以下代码开始:</p><pre class="kg kh ki kj gt nv nh nw nx aw ny bi"><span id="73eb" class="nz lt iq nh b gy oa ob l oc od">import React, { useState } from 'react';<br/>import { useNavigate, useLocation, NavigateFunction } from 'react-router-dom';<br/>import { Grid } from '@mui/material';<br/>import * as H from 'history';<br/>import ErrorBoundary from './ErrorBoundary';<br/>import '../styles/SiteNavigation.css';<br/><br/>interface SiteNavigationProps {<br/>  children: any,<br/>}<br/><br/>function setInitialRoute(<br/>  location: H.Location,<br/>  navigate: NavigateFunction,<br/>): void {<br/>  // eslint-disable-next-line @typescript-eslint/no-unused-vars        <br/>  const [_root, route] = location.pathname.split('/');<br/>  if (route &amp;&amp; route === 'logout') navigate('/');<br/>}<br/><br/>const SiteNavigation = (props: SiteNavigationProps) =&gt; {<br/>  const { children } = props;<br/>  const location = useLocation();<br/>  const navigate = useNavigate();<br/>  setInitialRoute(location, navigate);<br/>  // eslint-disable-next-line @typescript-eslint/no-unused-vars<br/>  const [isSideBarOpened, setIsSidebarOpened] = useState(false);<br/><br/>  return (<br/>    &lt;Grid className="SiteNavigation"&gt;<br/>      &lt;Grid className="top"&gt;<br/><br/>      &lt;/Grid&gt;<br/>      &lt;Grid className="bottom"&gt;<br/>        &lt;Grid className={isSideBarOpened ? 'left opened' : 'left'}&gt;<br/>          &lt;Grid className="bottom-left-top"&gt;<br/>            <br/>          &lt;/Grid&gt;<br/>          &lt;Grid className="bottom-left-bottom"&gt;<br/><br/>          &lt;/Grid&gt;<br/>        &lt;/Grid&gt;<br/>        &lt;Grid className="right"&gt;<br/>          &lt;ErrorBoundary&gt;<br/>            {children}<br/>          &lt;/ErrorBoundary&gt;<br/>        &lt;/Grid&gt;<br/>      &lt;/Grid&gt;<br/>    &lt;/Grid&gt;<br/>  );<br/>};<br/><br/>export default SiteNavigation;</span></pre><p id="001d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">花一分钟暂停一下，看看目前为止的app它看起来很简单:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/fbe73726fd90829695880e4aa25126e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_tvVMOSJzcbGvRSCK3vD_g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">没有造型</figcaption></figure><p id="c779" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我从头开始编写代码，我会在这一点上开始给所有组件添加样式。让我们从<code class="fe ne nf ng nh b">styles/index.css</code>和<code class="fe ne nf ng nh b">styles/App.css</code>开始:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og oh l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">styles/index.css</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og oh l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">styles/App.css</figcaption></figure><p id="4689" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了做一个教程，我用普通CSS编写样式。对于一个专业的项目，你可能想使用<a class="ae kv" href="https://medium.com/codex/how-to-style-material-ui-components-6b21ad1e1d8f" rel="noopener">的首选方式，使用主题化和CSS-in-JS </a>的材质UI。接下来让我们来设计<code class="fe ne nf ng nh b">SiteNavigation</code>组件(<code class="fe ne nf ng nh b">styles/SiteNavigation.css</code>)的样式:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og oh l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><code class="fe ne nf ng nh b">styles/SiteNavigation.css</code></figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/66fee925b99e4cee3e27c3de15da05a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3pWhSiUUZZKPotYyTMl5xg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">造型后</figcaption></figure><p id="1167" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，当我们在浏览器中查看应用程序时，它开始看起来更专业了。关于造型需要注意的一些重要事项:</p><ul class=""><li id="d4df" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">它采用flexbox布局的响应式设计。<code class="fe ne nf ng nh b">styles/SiteNavigation.css</code>的第118行显示了用于在移动屏幕上隐藏非核心功能元素的媒体查询。</li><li id="eb68" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">我们坚持使用标准的配色方案，使用原色和二色十六进制代码(<code class="fe ne nf ng nh b">#61DAFB</code>用于浅蓝色高光，<code class="fe ne nf ng nh b">#FFFFFF</code>用于白色背景，<code class="fe ne nf ng nh b">#000000</code>用于黑色文本和边框)。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/cdd55f1ea32b34b872877850236c373b.png" data-original-src="https://miro.medium.com/v2/resize:fit:508/format:webp/1*hU-zI7C-s0FoK5917UP49g.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">淡蓝</figcaption></figure><ul class=""><li id="dae1" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">单击箭头图标控制抽屉的打开/关闭状态。它也根据这个状态旋转。<code class="fe ne nf ng nh b">styles/SiteNavigation.css</code>的第154到172行显示了这是如何完成的。</li><li id="6661" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">顶部菜单图标和底部菜单图标之间有一个分割线</li><li id="29fd" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">如<code class="fe ne nf ng nh b">styles/SiteNavigation.css</code>中第135至151行所示，高亮显示当前页面/路径。</li></ul><p id="aa92" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在要做的最后一件事是添加菜单选项。我们可以用以下内容更新<code class="fe ne nf ng nh b">components/SiteNavigation.tsx</code>组件:</p><pre class="kg kh ki kj gt nv nh nw nx aw ny bi"><span id="9efb" class="nz lt iq nh b gy oa ob l oc od">import React, { useState } from 'react';<br/>import { useNavigate, useLocation, NavigateFunction, Link } from 'react-router-dom';<br/>import { Alert, Badge, Grid, Typography } from '@mui/material';<br/>import { NotificationsOutlined } from '@mui/icons-material';<br/>import * as H from 'history';<br/>import { bottomIcons, SiteNavigationIcon, topIcons } from '../types/SiteNavigationIcon';<br/>import { NotificationItem } from '../types/NotificationItem';<br/>import NotificationsList from './NotificationsList';<br/>import RotatingArrow from './RotatingArrow';<br/>import ErrorBoundary from './ErrorBoundary';<br/>import Search from './Search';<br/>import Logo from '../media/logo.svg';<br/>import '../styles/SiteNavigation.css';<br/><br/>interface SiteNavigationProps {<br/>  children: any,<br/>}<br/><br/>function setInitialRoute(<br/>  location: H.Location,<br/>  navigate: NavigateFunction,<br/>): void {<br/>  const [, route] = location.pathname.split('/');<br/>  if (route &amp;&amp; route === 'logout') navigate('/');<br/>}<br/><br/>const SiteNavigation = ({ children }: SiteNavigationProps) =&gt; {<br/>  const location = useLocation();<br/>  const navigate = useNavigate();<br/>  setInitialRoute(location, navigate);<br/><br/>  // eslint-disable-next-line @typescript-eslint/no-unused-vars<br/>  const [error, setError] = useState&lt;Error | undefined&gt;(undefined);<br/>  const [pageName, setPageName] = useState('');<br/>  const [isSideBarOpened, setIsSidebarOpened] = useState(false);<br/>  const [numNotifications] = useState&lt;number&gt;(0);<br/>  // eslint-disable-next-line @typescript-eslint/no-unused-vars<br/>  const [showNotifications, setShowNotifications] = useState&lt;boolean&gt;(false);<br/>  const [notifications] = useState&lt;NotificationItem[]&gt;([]);<br/><br/>  const onClickShowNotifications = () =&gt; {<br/>    // Fill in your code for displaying the notifications list here!<br/>  };<br/>  <br/>  const onSearch = (searchString: string) =&gt; { <br/>    // Fill in your code for calling the backend API here!<br/>  };<br/><br/>  const toNavLink = (icon: SiteNavigationIcon) =&gt; {<br/>    const IconComponent = icon.component;<br/>    return (<br/>      &lt;Link<br/>        to={icon.path}<br/>        onClick={() =&gt; setPageName(icon.key)}<br/>        key={icon.key}<br/>        className={pageName === icon.key ? 'underlined icon' : 'icon'}<br/>      &gt;<br/>        &lt;IconComponent<br/>          fontSize="large"<br/>          htmlColor="#000"<br/>        /&gt;<br/>        {!!isSideBarOpened &amp;&amp; (<br/>          &lt;Typography variant="body1"&gt;{icon.key}&lt;/Typography&gt;<br/>        )}<br/>      &lt;/Link&gt;<br/>    );<br/>  };<br/><br/>  return (<br/>    &lt;Grid className="SiteNavigation"&gt;<br/>      &lt;Grid className="top"&gt;<br/>        {error &amp;&amp; &lt;Alert severity="error"&gt;{error.message}&lt;/Alert&gt;}<br/>        {!error &amp;&amp; (<br/>          &lt;&gt;<br/>            &lt;Grid className="left"&gt;<br/>              &lt;img className="logo" src={Logo} alt="logo" /&gt;<br/>            &lt;/Grid&gt;<br/>            &lt;Grid className="middle"&gt;<br/>              &lt;Search onSearch={onSearch} /&gt;<br/>            &lt;/Grid&gt;<br/>            &lt;Grid className="right"&gt;<br/>              &lt;Badge<br/>                badgeContent={numNotifications}<br/>                color="error"<br/>                anchorOrigin={{<br/>                  vertical: 'bottom',<br/>                  horizontal: 'right',<br/>                }}<br/>                overlap="circular"<br/>              &gt;<br/>                &lt;NotificationsOutlined<br/>                  fontSize="large"<br/>                  htmlColor="#000"<br/>                  className="icon"<br/>                  onClick={onClickShowNotifications}<br/>                /&gt;<br/>              &lt;/Badge&gt;<br/>              {(showNotifications &amp;&amp; notifications.length &gt; 0) &amp;&amp; (<br/>                &lt;NotificationsList<br/>                  notifications={notifications}<br/>                  onClickShowNotifications={onClickShowNotifications}<br/>                /&gt;<br/>              )}<br/>            &lt;/Grid&gt;<br/>          &lt;/&gt;<br/>        )}<br/>      &lt;/Grid&gt;<br/>      &lt;Grid className="bottom"&gt;<br/>        &lt;Grid className={isSideBarOpened ? 'left opened' : 'left'}&gt;<br/>          &lt;Grid className="bottom-left-top"&gt;<br/>            {topIcons.map(toNavLink)}<br/>          &lt;/Grid&gt;<br/>          &lt;Grid className="bottom-left-bottom"&gt;<br/>            {bottomIcons.map(toNavLink)}<br/>            &lt;Grid className="rotating-arrow"&gt;<br/>              &lt;RotatingArrow onOpen={() =&gt; setIsSidebarOpened(!isSideBarOpened)} /&gt;<br/>              {!!isSideBarOpened &amp;&amp; (<br/>                &lt;Typography variant="body1"&gt;Close&lt;/Typography&gt;<br/>              )}<br/>            &lt;/Grid&gt;<br/>          &lt;/Grid&gt;<br/>        &lt;/Grid&gt;<br/>        &lt;Grid className="right"&gt;<br/>          &lt;ErrorBoundary&gt;<br/>            {children}<br/>          &lt;/ErrorBoundary&gt;<br/>        &lt;/Grid&gt;<br/>      &lt;/Grid&gt;<br/>    &lt;/Grid&gt;<br/>  );<br/>};<br/><br/>export default SiteNavigation;</span></pre><p id="5a7b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您需要在菜单中显示图标(<code class="fe ne nf ng nh b">types/SiteNavigationIcon.ts</code>):</p><pre class="kg kh ki kj gt nv nh nw nx aw ny bi"><span id="4b6a" class="nz lt iq nh b gy oa ob l oc od">import React from 'react';<br/>import HomeIcon from '@mui/icons-material/HomeOutlined';<br/>import SettingsIcon from '@mui/icons-material/SettingsOutlined';<br/>import AccountIcon from '@mui/icons-material/AccountCircleOutlined';<br/>import ShopIcon from '@mui/icons-material/StorefrontOutlined';<br/>import DashboardIcon from '@mui/icons-material/BarChartOutlined';<br/>import AboutIcon from '@mui/icons-material/InfoOutlined';<br/><br/>export type SiteNavigationIcon = {<br/>  key: string;<br/>  component: React.ComponentType&lt;any&gt;;<br/>  path: string;<br/>}<br/><br/>export const topIcons: SiteNavigationIcon[] = [<br/>  {<br/>    key: 'Home',<br/>    path: '/',<br/>    component: HomeIcon,<br/>  },<br/>  {<br/>    key: 'Shop',<br/>    path: '/shop',<br/>    component: ShopIcon,<br/>  },<br/>  {<br/>    key: 'Dashboard',<br/>    path: '/dashboard',<br/>    component: DashboardIcon,<br/>  },<br/>  {<br/>    key: 'About',<br/>    path: '/about',<br/>    component: AboutIcon,<br/>  },<br/>];<br/><br/>export const bottomIcons: SiteNavigationIcon[] = [<br/>  {<br/>    key: 'Settings',<br/>    path: '/settings',<br/>    component: SettingsIcon,<br/>  },<br/>  {<br/>    key: 'Account',<br/>    path: '/account',<br/>    component: AccountIcon,<br/>  },<br/>];</span></pre></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="b8fb" class="ls lt iq bd lu lv nq lx ly lz nr mb mc jw ns jx me jz nt ka mg kc nu kd mi mj bi translated">结论</h1><p id="7985" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">添加菜单选项后，您应该能够返回终端并启动服务器:</p><pre class="kg kh ki kj gt nv nh nw nx aw ny bi"><span id="e1fa" class="nz lt iq nh b gy oa ob l oc od">$ npm start</span><span id="35b3" class="nz lt iq nh b gy oe ob l oc od">Compiled successfully!<br/><br/>You can now view navigation-drawer in the browser.<br/><br/>  Local:            http://localhost:3000<br/>  On Your Network:  http://xxx.xxx.x.xxx:3000<br/><br/>Note that the development build is not optimized.<br/>To create a production build, use npm run build.<br/><br/>webpack compiled successfully<br/>No issues found.</span></pre><p id="7b1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开浏览器进入<a class="ae kv" href="http://localhost:300" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>并查看您出色的导航抽屉:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/0fdb61e9cf3f08abac0d33636d60e00c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*tgID8C9GDifFbxU6dcdZ2g.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">完成导航菜单</figcaption></figure><p id="e9d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总结一下我们的成果:</p><ul class=""><li id="9b82" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">响应导航菜单(断点在768像素屏幕宽度)。例如，这可以隐藏手机屏幕上的搜索栏。</li><li id="c88b" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">我们的单页应用程序的路由将请求定向到正确的页面，即<code class="fe ne nf ng nh b">/shop</code>显示商店页面。</li><li id="372d" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">一个高阶组件，我们现在可以包装我们网站中每个页面的内容。这更具性能，因为导航菜单是持久的，我们可以只在需要的时候加载和替换页面的主要内容。</li></ul><p id="eaa3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想增加更多的功能，我可以给你一些灵感。以下是在专业项目中创建导航菜单后的一些逻辑功能:</p><ol class=""><li id="90db" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr ol mv mw mx bi translated"><a class="ae kv" href="https://ui.docs.amplify.aws/react/connected-components/authenticator" rel="noopener ugc nofollow" target="_blank">用户认证</a>和<a class="ae kv" href="https://medium.com/@thanhbinh.tran93/private-route-public-route-and-restricted-route-with-react-router-d50b27c15f5e" rel="noopener">路由守卫</a></li><li id="ace1" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr ol mv mw mx bi translated">在通知图标下添加一个可取消的<a class="ae kv" href="https://mui.com/material-ui/react-popover/" rel="noopener ugc nofollow" target="_blank">弹出窗口</a>列出通知</li><li id="68ca" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr ol mv mw mx bi translated"><a class="ae kv" href="https://medium.com/simars/react-debounce-with-higher-order-component-ce660cd4a967" rel="noopener">去抖向后端API请求</a>进行搜索(使用前端的<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" rel="noopener ugc nofollow" target="_blank">获取API </a></li><li id="61a6" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr ol mv mw mx bi translated">商品详情视图在店铺页面中给定商品ID的URL中显示为查询变量(<code class="fe ne nf ng nh b">http://localhost:3000/shop?productId=xxxx</code>)</li></ol><p id="349d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要查看完整的代码，您可以访问下面的公共GitHub repo</p><div class="om on gp gr oo op"><a href="https://github.com/beatleboy501/react-custom-navigation" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ir gy z fp ou fr fs ov fu fw ip bi translated">GitHub-Beatle boy 501/react-自定义-导航</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">这个项目是用Create React App引导的。在项目目录中，您可以运行:在…中运行应用程序</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">github.com</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd kp op"/></div></div></a></div><p id="cbca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你喜欢我的写作风格，请跟我来。我一个月发表大约1x，我喜欢网络，谢谢！</p></div></div>    
</body>
</html>