# 在 JavaScript 中使用数字的便捷技巧

> 原文：<https://levelup.gitconnected.com/handy-javascript-number-tips-5776205be1f3>

## 用一行代码创建一个数字数组，生成随机数，对数组中的数字进行排序/洗牌

![](img/de3615c4d71a76ca0f63cb7ce6c75c58.png)

照片由[托尼·汉德](https://unsplash.com/@mr_t55?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 拍摄

JavaScript 和其他编程语言一样，有许多方便的技巧，让我们可以更容易地编写程序。在这篇文章中，我们将看看如何做不同的事情，涉及到数字，如生成一个数字数组，生成随机数，并洗牌的数字。

# 生成一个范围内的数字数组

要生成一个从最小到最大的数，我们可以用几种方法。如果我们希望每个条目增加 1，我们可以使用`Array.from`方法。`Array.from`方法接受一个具有`length`属性的对象。

要生成一个范围内的数，比如从 1 到 10，我们可以为最大数设一个常数，为最小值设另一个常数。那么长度就是最大值减去最小值再加上 1。

我们需要加 1，因为最大值减去最小值比我们想要的长度少 1。`Array.from`方法的第二个参数是一个函数，它让我们将值映射到我们想要的值。

第一个参数是原始数组的值，因为我们没有把数组传递给第一个参数，这个参数对我们没有用。

第二个参数是数组的索引，范围从 0 到我们指定为`length`属性减 1 的长度。所以如果我们想生成一个从 1 到 10 的数组，我们可以写:

```
const max = 10;
const min = 1;
const arr = Array.from({
  length: max - min + 1
}, (v, i) => min + i);
console.log(arr)
```

在上面的代码中，我们指定了将要生成的数组的`length`属性，即`max — min + 1`或 10 - 1+1，即 10。这就是我们想要的长度。在第二个参数中，我们有一个将索引`i`映射到`min + i`的函数，它将是`1 + 0`、`1 + 1`、`1 + 2`、…，直到`1 + 9`。然后，如果我们在上面代码的最后一行运行`console.log`语句，我们会得到:

```
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
```

通过调整第二个参数中的函数，很容易生成不同种类的数字数组，因为它映射到我们想要的任何数字。要生成第一个`n`奇数，我们可以写:

```
const arr = Array.from({
  length: 10
}, (v, i) => 2 * i + 1);
console.log(arr)
```

在上面的代码中，我们有一个从公式中生成奇数的函数。`2 * i + 1`总是生成一个奇数，因为任何整数的 2 倍是一个事件数，所以如果我们给它加 1，那么它将成为一个奇数。它对于任何具有某种模式的数字序列都很有用，这种模式可以放入公式中，或者用条件或其他流控制语句来表达。

# 生成随机数

JavaScript 标准库有一个`Math`对象，它有一个`random`方法来生成 0 到 1 之间的随机数。这不需要争论。

就其本身而言，它的用途有限，因为它只能生成 0 到 1 之间的数字，但我们可以很容易地用它来生成任何范围内的随机数。

例如，如果我们想生成一个介于最小值和最大值之间的数，我们可以编写以下代码:

```
const min = 1;
const max = 100;
const num = Math.random() * (max - min) + min;
console.log(num);
```

在上面的代码中，我们有一个将`min`数作为最小数的公式，然后我们将`Math.random() * (max — min)`加到`min`。因为`max`比`min`大，并且`Math.random()`返回一个介于 0 和 1 之间的数字，所以`max-min`将是正的，所以它将是 0 或正的。

如果`max`与`min`相同，那么我们得到`min`作为`num`的结果，这是我们可以接受的最小数字，如果`Math.random()`为 0，我们得到相同的结果。

如果`Math.random()`为 1，我们得到`max — min + min`与`max`相同。这意味着公式永远不会超出`min`和`max`之间的数字范围，这正是我们想要的。上面的公式将得到任何浮点数。如果只想要整数结果，我们可以写:

```
let min = 1;
let max = 10;
min = Math.ceil(min);
max = Math.floor(max);
const num = Math.floor(Math.random() * (max - min)) + min;
console.log(num);
```

在上面的代码中，我们通过`Math.floor(Math.random() * (max — min))`方法调用将结果向下舍入到最接近的整数。这确保生成的结果介于 1(含)和 10(不含)之间。

# 生成一个随机数数组

我们可以很容易地扩展上面的代码来生成一个随机数数组。使用我们上面使用的`Array.from`方法，我们可以创建如下代码所示的数组:

```
const arr = Array.from({
  length: 10
}, (v, i) => {
  const min = 1;
  const max = 10;
  return Math.random() * (max - min) + min
});
console.log(arr)
```

在`Array.from`方法调用的第二个参数中，我们修改了将值映射到数字生成器函数的函数，其中的代码与我们用来生成随机数的代码相同。

同样，我们可以在第一个参数中将对象的`length`属性指定为我们想要的数组长度。如果我们运行上面的代码，最后一行语句的`console.log`输出应该记录如下:

```
[2.09822597784169, 9.485219511793478, 4.905513590655689, 5.428402066955793, 5.874266428138649, 6.288415362686418, 2.768483595321933, 9.849179787675595, 1.1291148797430082, 6.725810669834928]
```

此外，我们可以以同样的方式使用之前的整数生成器代码，如下面的代码所示:

```
const arr = Array.from({
  length: 10
}, (v, i) => {
  let min = 1;
  let max = 10;
  min = Math.ceil(min);
  max = Math.floor(max);
  return num = Math.floor(Math.random() * (max - min)) + min;
});
console.log(arr)
```

我们有和以前一样用来生成整数的代码，除了我们用它来生成一个随机整数数组。如果我们运行上面的代码，应该会得到类似下面的结果:

```
[8, 3, 5, 4, 4, 9, 9, 1, 1, 1]
```

从上面的`console.log`语句来看。

![](img/1c5461410d5a6ca6b6bb3b24a65931ab.png)

[杰克·汉密尔顿](https://unsplash.com/@jacc?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

# 打乱一组数字

有了内置于 JavaScript 数组对象中的`sort`方法，我们可以很容易地使用它对数组进行排序。`sort`方法采用一个函数，让我们比较数组中的 2 个条目，让我们根据指定的条件设置 2 个元素之间的排序顺序。

我们传递给`sort`方法的函数有两个参数，第一个是我们称之为`a`的元素，第二个是我们称之为`b`的元素，我们比较`a`和`b`来决定在数组中哪个应该排在另一个之上。sort 函数期望回调函数返回一个数字。

如果我们的函数返回的值是负的，那么`a`将位于比`b`更低的数组索引中。也就是说，`a`在`b`之前。如果数字是正数，那么`b`将在`a`之前出现。如果函数返回 0，那么`a`和`b`将停留在原来的位置。

如果我们想打乱数组，我们可以从数组中返回一个随机数——`a`或`b`的值不会影响排序。我们可以再次使用`Math.random()`方法来帮助我们为传递给`sort`方法的函数生成一个随机返回值。我们可以编写以下代码，以随机顺序对每个条目进行排序(打乱数组):

```
let nums = [49, -151, 88, -133, -164, 78, 117, -25, 76, -40];
nums = nums.sort(() => {
  return Math.random() - 0.5
});
console.log(nums);
```

在上面的代码中，我们的`sort`方法有一个在`-0.5`和`0.5`之间生成随机数的函数，这意味着根据`sort`方法根据返回值所做的事情，每个元素有可能保持不变或者被打乱。

`Math.random()`只返回 0 到 1 之间的数字。然而，我们可以通过像上面那样扩展它来使它变得更有用。我们可以指定一个最小和最大数字之间的范围，并用`Math.random() * (max — min) + min`生成一个范围之间的数字。还有，我们可以通过返回`Math.random() — 0.5`将它传入`sort`方法的回调函数中，生成一个在`-0.5`和`0.5`之间的数，这意味着可以根据生成的数的符号和是否为 0 来洗牌(或不洗牌)。