<html>
<head>
<title>I Made a Python Bot to Send “Good Night” Texts to My GF</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我做了一个Python机器人给我女朋友发“晚安”短信</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/i-made-a-python-bot-to-send-good-night-texts-to-my-gf-8157f7850761?source=collection_archive---------7-----------------------#2022-01-12">https://levelup.gitconnected.com/i-made-a-python-bot-to-send-good-night-texts-to-my-gf-8157f7850761?source=collection_archive---------7-----------------------#2022-01-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d2ff" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以下是你也可以很容易地构建它的方法。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/45ddba90e87630bd38e3b62d6358da1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n80Xpt3cwgRCS5X3k9TY3Q.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://www.pexels.com/photo/a-black-smartphone-with-whatsapp-2733678/" rel="noopener ugc nofollow" target="_blank">像素</a>。</figcaption></figure><p id="f6b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">拥有一段正常运转的关系很难，尤其是当你是一名全职程序员的时候。你必须一直照顾她和她的需求，最重要的是，如果她粘人，你必须每天晚上发“晚安”短信。</p><p id="a680" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但我会在晚饭后坐下来写代码，老实说，在那之后打开WhatsApp给别人发短信非常分散注意力。我的意思是，我要在3个不同的窗口中处理数百个方法和类。如今，WhatsApp网络在没有互联网连接的情况下也能工作，但在Chrome上多加一个标签对我可怜的RAM来说是一大打击。</p><p id="913d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，我想把整个过程自动化，给自己一些解脱。是的，我知道，你会说我是个糟糕的男朋友，但我刚刚把发一条无聊的晚安短信变得很酷。我编了一个机器人来帮我做这件事！</p><p id="ae4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，让我们看看我是怎么做的。稍后感谢我(读完这篇文章后，也许请我喝杯咖啡)。</p><h1 id="d6a4" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">背景故事:</strong></h1><p id="4cbc" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">几个月前，我需要给我的一些同事发送一些促销信息。但是在每个人的聊天中通过复制粘贴的方式给每个人发送相同的文本是如此的繁琐和耗时。此外，为一千个人做这件事只是令人讨厌的重复。</p><p id="cece" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，我编写了一个python包来实现整个过程的自动化。</p><p id="d0de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的，有其他python包来做类似的事情，但老实说，它们很烂。每一个软件包都会打开一个难看的Chrome窗口，然后开始工作。如果我最小化窗口，这个过程就会失败。我想要在后台工作的东西。</p><p id="ac78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，我编写了AutoWhatsPy，<strong class="lb iu">软件包来自动化你的WhatsApp </strong>，这个<strong class="lb iu">在后台运行</strong>(不会打开难看的窗口)。</p><p id="b3cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以把一个任务分配给一个用这个包编写的程序，它将在后台工作。从技术上来说，它确实会打开一个浏览器窗口，但不会在前台打开。当电脑在后台运行时，您可以继续在电脑上做其他事情。加上一个无头的firefox浏览器窗口</p><p id="80de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，它完全可以安全使用。我把整个项目开源了，这样你就可以自己看看代码做了什么。这个包完全是使用selenium和Firefox gechodriver用python构建的。</p><h1 id="1bf1" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">安装AutoWhatsPy</h1><h2 id="915a" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">环境设置</h2><p id="45fc" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">AutoWhatsPy需要<a class="ae ky" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank"> Python 3。</a> 5 (Python 3.9将是最佳选择)或以上版本运行。我用Python 3.5测试过。确保您的路径中添加了Python。在Windows系统中安装Python时，请确保选中“将Python 3.x添加到路径”。如果你忘记这么做了，请看<a class="ae ky" href="https://www.geeksforgeeks.org/how-to-add-python-to-windows-path/" rel="noopener ugc nofollow" target="_blank">这篇教程</a>来了解如何将Python添加到你的Windows路径中。</p><h2 id="39b5" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">安装Python</h2><p id="dfc7" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><strong class="lb iu">用于Windows和Mac </strong></p><p id="f764" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从<a class="ae ky" href="https://www.python.org/downloads/release/python-397/" rel="noopener ugc nofollow" target="_blank">这里</a>下载Python 3.9。使用安装程序在您的系统中安装Python。为macOS下载“macOS 64位universal2安装程序”。为您的Windows 64位系统下载“Windows x86–64可执行安装程序”,为Windows 32位系统下载“Windows x86可执行安装程序”。</p><p id="c8fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">针对Linux的</strong></p><p id="faaa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用以下命令在Linux系统上安装Python 3.9。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="e8a1" class="ms lw it nf b gy nj nk l nl nm">apt-get install python3.9</span></pre><h1 id="57fe" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">检查pip</h1><p id="bfcb" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">确保您的系统中安装了pip。使用以下命令检查是否安装了pip。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="7b3e" class="ms lw it nf b gy nj nk l nl nm">pip --version</span></pre><p id="bfeb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您看到类似“pip 21.2.2”的消息，那么您的系统上已经安装了pip。否则，按照本教程<a class="ae ky" href="https://pip.pypa.io/en/stable/installation/" rel="noopener ugc nofollow" target="_blank">在您的系统中安装pip。一般来说，Python自带一个ensurepip模块，可以在Python环境中安装pip。</a></p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="e36c" class="ms lw it nf b gy nj nk l nl nm">python -m ensurepip --upgrade</span></pre><h2 id="74c3" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">下载包</h2><p id="2e32" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">打开您的终端/cmd并使用pip命令安装它。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="623f" class="ms lw it nf b gy nj nk l nl nm">pip install autowhatspy</span></pre><h1 id="d471" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">编程；编排</h1><p id="c202" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在到了编程部分。要通过WhatsApp向单个/多个联系人发送单个文本或图像(或两者)消息，我们必须使用包中的message_to_contacts功能。这是函数和所需的参数。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="7a3e" class="ms lw it nf b gy nj nk l nl nm">message_to_contacts(msg, contacts, gechodriver, gechodriver_log, user_profile, image)</span></pre><h2 id="70a9" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">争论</h2><p id="044a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><strong class="lb iu">消息</strong> —包含消息文本的文本文件的路径。</p><p id="bcd9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我创建了一个名为goodnight.txt的文件，其中只有一行字“晚安，宝贝”。文件的内容如下:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="f0ea" class="ms lw it nf b gy nj nk l nl nm">Good night, honey</span></pre><p id="faff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">联系人</strong> —包含联系人列表的文本文件的路径。</p><p id="ebd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，它只包含她的联系人姓名。contacts.txt文件的内容如下:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="17f6" class="ms lw it nf b gy nj nk l nl nm">Bae II</span></pre><p id="ee1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">文本文件中的姓名应与手机中保存的姓名完全一致。你肯定已经在WhatsApp上和他们聊过了。</p><p id="fd5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">gechodriver</strong>—gechodriver.exe文件的路径。<em class="nn">下载gechodriver.exe(</em><a class="ae ky" href="https://github.com/mozilla/geckodriver" rel="noopener ugc nofollow" target="_blank"><em class="nn">链接此处</em> </a> <em class="nn">)并将路径作为参数发送。根据解释器的工作方式，您可以使用绝对路径或相对路径。确保gechodriver.exe在你正在处理的同一个项目文件夹中。或者在路径中添加gechodriver.exe所在的文件夹。否则，可能会发生错误。</em> <em class="nn">如果还是得到错误，将selenium降级到2.53.6版本。</em></p><p id="695b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> gechodriver_log </strong> —保存gechodriver日志的文本文件路径。<em class="nn">确保gechodriver.log位于您正在处理的同一个项目文件夹中。否则，可能会发生错误。</em></p><p id="9745" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> user_profile </strong> —保存的firefox用户配置文件的路径。</p><ul class=""><li id="f2e9" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated">打开火狐。转到“关于:个人资料”并创建新的个人资料。</li><li id="865e" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">用firefox分配给它的任何名字保存在你的项目目录中。</li><li id="031b" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">打开个人资料，打开web.whatsapp.com，扫描二维码。</li><li id="e860" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">将配置文件的路径作为参数发送给函数。</li><li id="37ec" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">图像—(可选)要发送的图像/视频的路径。请确保它受WhatsApp支持，并且长度是允许的。</li></ul><p id="de00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我给你看代码之前，我有一个小小的请求。请成为灵媒的一员。只要每月5美元，你就可以阅读Medium上的任何文章(不仅仅是我的文章，任何文章)。单击下面的链接。如果你从我的推荐链接加入，我会得到一点佣金，这对我支付账单很有帮助。</p><div class="oc od gp gr oe of"><a href="https://samratduttaofficial.medium.com/membership" rel="noopener follow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">通过我的推荐链接加入媒体</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">samratduttaofficial.medium.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot ks of"/></div></div></a></div><h2 id="6f79" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">密码</h2><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="5463" class="ms lw it nf b gy nj nk l nl nm">from datetime import datetime<br/>import autowhatspy<br/>import os<br/>import time</span><span id="aed9" class="ms lw it nf b gy ou nk l nl nm">path = path = os.path.dirname(os.path.realpath(__file__)) + "\\"<br/>msg = path + "msg.txt"<br/>contacts = path + "contacts.txt"<br/>gechodriver = path + "gechodriver.exe"<br/>gechodriver_log = path + "gecholog.txt"<br/>user_profile = path + "firefoxprofile"</span><span id="7863" class="ms lw it nf b gy ou nk l nl nm">while True:<br/>    now = datetime.now()<br/>    current_time = now.strftime("%H%M")<br/>    if current_time == "2315":<br/>        autowhatspy.message_to_contacts(msg, contacts, gechodriver, gechodriver_log, user_profile)<br/>        time.sleep(60)<br/>    else:<br/>        time.sleep(30)</span></pre><p id="3680" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这会在晚上11点15分给她发一条“晚安，亲爱的”短信。代码每30秒检查一次当前时间，当时间到达晚上11:15时，它发送文本。如果你的电脑24/7运行，你可以让这段代码永远运行下去……(直到她离开你)</p><h1 id="8f9a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="3f62" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我不知道她是否发现我用机器人给她发短信，但是，(剧透)，她分手了。所以，现在<strong class="lb iu">我不得不写一个机器人在WhatsApp </strong>上屏蔽她，因为我太虚弱了，自己做不到。</p><p id="0f8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后<strong class="lb iu">我也要做一个机器人去调戏另一个我喜欢的女生</strong>。有很多机器人。在机器革命发生之前，让我们尽可能多地使用它们。</p><p id="f546" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请关注我，当我编写这些机器人时，您会收到通知。</p></div><div class="ab cl ov ow hx ox" role="separator"><span class="oy bw bk oz pa pb"/><span class="oy bw bk oz pa pb"/><span class="oy bw bk oz pa"/></div><div class="im in io ip iq"><p id="ea99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我和我的朋友在2019-2020年对澳大利亚的森林火灾进行了详细的研究。如果您有兴趣阅读一篇资料翔实的数据科学文章，以下是链接:</p><div class="oc od gp gr oe of"><a href="https://towardsdatascience.com/how-much-green-did-australia-lose-during-2020-bushfires-calculating-using-landsat-8-images-36f35c67edb4" rel="noopener follow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">澳大利亚在2020年的森林大火中损失了多少绿色？—使用Landsat-8图像进行计算</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">用Landsat-8计算澳大利亚森林火灾后某一地区健康自然植被的变化</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">towardsdatascience.com</p></div></div><div class="oo l"><div class="pc l oq or os oo ot ks of"/></div></div></a></div></div><div class="ab cl ov ow hx ox" role="separator"><span class="oy bw bk oz pa pb"/><span class="oy bw bk oz pa pb"/><span class="oy bw bk oz pa"/></div><div class="im in io ip iq"><h1 id="d038" class="lv lw it bd lx ly pd ma mb mc pe me mf jz pf ka mh kc pg kd mj kf ph kg ml mm bi translated">更多信息:</h1><p id="714d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><strong class="lb iu"> AutoWhatsPy文档:</strong>【https://pypi.org/project/autowhatspy T2】</p><p id="6724" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">【https://discord.gg/7Bx6PGVy】大智若愚(编程)不和:<a class="ae ky" href="https://discord.gg/7Bx6PGVy" rel="noopener ugc nofollow" target="_blank"/></p><p id="2dd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">我的Github:</strong><a class="ae ky" href="https://github.com/SamratDuttaOfficial" rel="noopener ugc nofollow" target="_blank">https://github.com/SamratDuttaOfficial</a></p><p id="f392" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">我的领英:</strong><a class="ae ky" href="https://www.linkedin.com/in/SamratDuttaOfficial/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/SamratDuttaOfficial</a></p><p id="05a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请考虑给我的GitHub库一颗星。这对我帮助很大。</p><p id="b370" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想雇我吗？在LinkedIn上联系我。</p><p id="0e6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，请考虑<a class="ae ky" href="https://www.buymeacoffee.com/SamratDutta" rel="noopener ugc nofollow" target="_blank">请我喝杯咖啡</a>。</p></div></div>    
</body>
</html>