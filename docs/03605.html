<html>
<head>
<title>JavaScript Arrays and Conditional Tricks to Save Us Time and Frustration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript数组和条件技巧来节省我们的时间和挫折</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-arrays-and-conditional-tricks-to-save-us-time-and-frustration-4eba161b859d?source=collection_archive---------19-----------------------#2020-05-18">https://levelup.gitconnected.com/javascript-arrays-and-conditional-tricks-to-save-us-time-and-frustration-4eba161b859d?source=collection_archive---------19-----------------------#2020-05-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/98b1c8afe8342ff4a8a32df34e01e0c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qJKPDQcA8r-UDCxS"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@hernanlucio?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">埃尔南·卢西奥</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="e968" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在编写JavaScript apps时，我们经常要编写代码来解决经常遇到的问题。</p><p id="586e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将研究JavaScript代码中遇到的一些常见问题，这样我们就不必进一步寻找这些问题的答案。</p><h1 id="8ac4" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">展平多维数组</h1><p id="d324" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过对数组使用各种方法来展平多维数组。</p><p id="13b5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有<code class="fe mh mi mj mk b">flat</code>、<code class="fe mh mi mj mk b">flatMap</code>和<code class="fe mh mi mj mk b">concat</code>方法来展平数组。其中一些与扩展运算符一起使用。</p><p id="0173" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以使用数组实例的<code class="fe mh mi mj mk b">concat</code>方法和spread操作符，如下所示:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="7b71" class="mt lf it mk b gy mu mv l mw mx">const arr = [1, [2, 3],<br/>  [4, 5], 6<br/>];<br/>const flattened = [].concat(...arr);</span></pre><p id="40ff" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们在一个空数组上调用了<code class="fe mh mi mj mk b">concat</code>方法，将<code class="fe mh mi mj mk b">arr</code>数组中的项目放入一个新的数组中。</p><p id="3d38" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">spread操作符将数组中的项作为参数展开，这样就可以用<code class="fe mh mi mj mk b">concat</code>将它们填充到新数组中。</p><p id="868b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们得到<code class="fe mh mi mj mk b">flattened</code>是<code class="fe mh mi mj mk b">[1, 2, 3, 4, 5, 6]</code>。</p><p id="5ee4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们有一个深度嵌套的数组，那么我们需要更加努力地递归展平数组。</p><p id="e4cc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以这样做:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="1f3f" class="mt lf it mk b gy mu mv l mw mx">const flatten = (arr) =&gt; {<br/>  const flat = [];</span><span id="0c0c" class="mt lf it mk b gy my mv l mw mx">  arr.forEach(a =&gt; {<br/>    if (Array.isArray(a)) {<br/>      flat.push(...flatten(a));<br/>    } else {<br/>      flat.push(a);<br/>    }<br/>  });</span><span id="9665" class="mt lf it mk b gy my mv l mw mx"> return flat;<br/>}</span></pre><p id="9f2e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们有一个<code class="fe mh mi mj mk b">flatten</code>函数，它接受一个数组<code class="fe mh mi mj mk b">arr</code>作为参数。</p><p id="51f0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在函数体中，我们对<code class="fe mh mi mj mk b">arr</code>调用<code class="fe mh mi mj mk b">forEach</code>。在回调中，我们通过用<code class="fe mh mi mj mk b">a</code>调用<code class="fe mh mi mj mk b">Array.isArray</code>来检查每个数组条目是否是一个数组条目，其中<code class="fe mh mi mj mk b">a</code>是被循环的数组条目。</p><p id="825d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果是，那么我们将展平的数组推入到<code class="fe mh mi mj mk b">flat</code>数组中，并对其调用<code class="fe mh mi mj mk b">flatten</code>来展平嵌套的数组。</p><p id="16ff" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">否则，我们只需将条目推入<code class="fe mh mi mj mk b">flat</code>。然后我们返回<code class="fe mh mi mj mk b">flat</code>，这是递归展平的数组。</p><p id="5adc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么我们可以这样称呼它:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="7ee7" class="mt lf it mk b gy mu mv l mw mx">const arr = [1, [2, 3],<br/>  [[4, 5]], 6<br/>];<br/>const flattened = flatten(arr);</span></pre><p id="fb9f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们得到<code class="fe mh mi mj mk b">flattened</code>就是<code class="fe mh mi mj mk b">[1, 2, 3, 4, 5, 6]</code>。</p><p id="28d8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">JavaScript的array实例也有一个<code class="fe mh mi mj mk b">flat</code>方法，可以将数组展平任意深度。</p><p id="c6c3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它采用一个正整数或<code class="fe mh mi mj mk b">Infinity</code>作为参数，按照给定的深度级别展平嵌套数组或分别展平所有级别。</p><p id="2664" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">flat</code>返回新的展平数组。</p><p id="49e7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以这样称呼它:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="e97b" class="mt lf it mk b gy mu mv l mw mx">const arr = [1, [2, 3],<br/>  [<br/>    [4, 5]<br/>  ], 6<br/>];<br/>const flattened = arr.flat(1);</span></pre><p id="13f3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们得到:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="6bf3" class="mt lf it mk b gy mu mv l mw mx">[<br/>  1,<br/>  2,<br/>  3,<br/>  [<br/>    4,<br/>    5<br/>  ],<br/>  6<br/>]</span></pre><p id="211d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们通过<code class="fe mh mi mj mk b">Infinity</code>如下:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="45ec" class="mt lf it mk b gy mu mv l mw mx">const arr = [1, [2, 3],<br/>  [<br/>    [4, 5]<br/>  ], 6<br/>];<br/>const flattened = arr.flat(Infinity);</span></pre><p id="692c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么<code class="fe mh mi mj mk b">flattened</code>就是<code class="fe mh mi mj mk b">[1, 2, 3, 4, 5, 6]</code>。</p><p id="c4ea" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">flatMap</code>方法调用<code class="fe mh mi mj mk b">map</code>然后用level 1调用<code class="fe mh mi mj mk b">flat</code>。</p><p id="ac8c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以如下使用它:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="0e0c" class="mt lf it mk b gy mu mv l mw mx">const arr = [1, 2, 3];<br/>const flattened = arr.flatMap(a =&gt; [a])</span></pre><p id="37c8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么<code class="fe mh mi mj mk b">flattened</code>就是<code class="fe mh mi mj mk b">[1, 2, 3]</code>，因为<code class="fe mh mi mj mk b">flatMap</code>调用<code class="fe mh mi mj mk b">map</code>将每个数字映射到一个只有一个数字的数组。然后它调用<code class="fe mh mi mj mk b">flat</code>将数组展平1个嵌套层次。</p><p id="897f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们得到<code class="fe mh mi mj mk b">flattened</code>就是<code class="fe mh mi mj mk b">[1, 2, 3]</code>。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/fb6c73eb1f788885e1d02601c0517901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ezwMAqE5bwAsRPPH"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@cathus?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">加里·尼萨姆</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="63a1" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">短路条件</h1><p id="9076" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">如果我们有如下的条件语句:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="b85d" class="mt lf it mk b gy mu mv l mw mx">if (condition) {<br/>  doSomething();<br/>}</span></pre><p id="2e8f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以用<code class="fe mh mi mj mk b">&amp;&amp;</code>操作符将其缩短，如下所示:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="64f6" class="mt lf it mk b gy mu mv l mw mx">condition &amp;&amp; doSomething();</span></pre><p id="964c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这两段代码是等价的，因为在第二段代码中，只有当两个操作数都为真时，<code class="fe mh mi mj mk b">&amp;&amp;</code>运算符才返回<code class="fe mh mi mj mk b">true</code>。</p><p id="ec50" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，当<code class="fe mh mi mj mk b">condition</code>为真值时，它将继续计算第二个操作数，即运行<code class="fe mh mi mj mk b">doSomething()</code>。</p><p id="dc82" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这与<code class="fe mh mi mj mk b">if</code>语句的作用相同。如果<code class="fe mh mi mj mk b">condition</code>是真实的，那么<code class="fe mh mi mj mk b">doSomething()</code>是运行的。</p><h1 id="c81c" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="216e" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">使用JavaScript有多种方法来展平数组。一个是<code class="fe mh mi mj mk b">flat</code>方法，通过任意深度级别展平数组，包括<code class="fe mh mi mj mk b">Infinity</code>。</p><p id="cad1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">concat</code>方法可以和spread操作符一起使用来做同样的事情。</p><p id="2023" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">flatMap</code>方法调用深度级别为1的<code class="fe mh mi mj mk b">map</code>和<code class="fe mh mi mj mk b">flat</code>。</p><p id="7122" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了缩短我们的条件语句，如果一个条件为真，我们可以使用<code class="fe mh mi mj mk b">&amp;&amp;</code>操作符来代替它。</p></div></div>    
</body>
</html>