<html>
<head>
<title>The problem I had with APIs and Inheritance in .NET</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我在API和继承中遇到的问题。网</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/the-problem-i-had-with-apis-and-inheritance-in-net-7f5ffa8e16f2?source=collection_archive---------17-----------------------#2022-01-17">https://levelup.gitconnected.com/the-problem-i-had-with-apis-and-inheritance-in-net-7f5ffa8e16f2?source=collection_archive---------17-----------------------#2022-01-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6769" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以及如何轻松解决</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/313e3fb37f55d077c9255deb6735db67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b9PlXGgaCZ5jFqDCh8CW9w.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@rupixen" rel="noopener ugc nofollow" target="_blank">rupixen.com</a>在<a class="ae ky" href="https://unsplash.com/photos/Q59HmzK38eQ" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="d399" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这就是我的问题。我的<em class="mc"> OrderController </em>中有一个端点必须添加一个订单，如下所示(为了简洁明了，我将使用一个简短的例子):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="5c4a" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我的<em class="mc"> OrderEntity </em>看起来像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="4f09" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">到目前为止相当简单。问题出现在最后一行的<em class="mc">支付细节</em>中，类看起来像这样<em class="mc"> : </em></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="a6e9" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">不要害怕，空空如也是有原因的！其背后的想法是，将有多种不同的支付方法，包含继承该类的不同属性。在这种情况下，我们有两个:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="md me l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="715f" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">是的，背后的思想是，根据我传递给控制器的JSON主体，它将决定我使用哪种支付方式。所以，假设我发送了这样的消息:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="4053" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我希望API能够发现我发送的订单的付款方式应该是Braintree。不幸的是，我得到的都是空的薪酬明细，平心而论，这确实有些道理，但我没想到。NET不会像我预期的那样支持API中的继承。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="c8bf" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">现在，解决方案。互联网上有很多想法和解决方案，坦率地说，大部分要么是黑客，要么是杂乱无章、不可扩展的。例如，您可以在实际的Order类上添加所有不同的支付细节，并只传递正在使用的那个，但这并不能解决问题，尤其是如果您有大量的方法，那么最佳解决方案(或者至少看起来是最佳的)就是这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="d067" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这里发生的是，我们使用<em class="mc"> StreamReader </em>从JSON中获取数据并传递给控制器，然后我们可以将它映射到<em class="mc"> OrderEntity。</em>与众不同的是，我们可以使用初始JSON并解析它，以便从请求中转换支付细节，然后根据<em class="mc"> PaymentTypeId </em>将数据转换为适当的对象。</p><p id="1875" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我绝不认为这是完美的解决方案，然而在这种情况下这是一个很好的解决方案，但是如果有人有任何建议，我洗耳恭听。</p></div></div>    
</body>
</html>