<html>
<head>
<title>Translate your Next.js app to the world</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将您的Next.js应用程序翻译给全世界</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/translate-your-next-js-app-to-the-world-645d100277e?source=collection_archive---------4-----------------------#2020-04-06">https://levelup.gitconnected.com/translate-your-next-js-app-to-the-world-645d100277e?source=collection_archive---------4-----------------------#2020-04-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="cf5b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将多语言引入Next.js应用程序的指南。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/eac6c22128216215b7811a573dda5260.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FPeWrpYT2HGtO54L37qJ3w.jpeg"/></div></div></figure><h1 id="7732" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">介绍</h1><p id="f307" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">Next.js为React应用程序提供了服务器端渲染。在本文中，我们将学习如何使用<a class="ae ma" href="https://github.com/isaachinman/next-i18next" rel="noopener ugc nofollow" target="_blank"> next-i18next </a>来翻译Next.js应用程序中的文本。</p><p id="fd8a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将看到这些不同的选项:</p><ul class=""><li id="f0de" class="mb mc iq jp b jq jr ju jv jy md kc me kg mf kk mg mh mi mj bi translated">使用HOC(appwithTranslation，withtransflation)</li><li id="d9f8" class="mb mc iq jp b jq mk ju ml jy mm kc mn kg mo kk mg mh mi mj bi translated">使用钩子(使用翻译)</li><li id="26f1" class="mb mc iq jp b jq mk ju ml jy mm kc mn kg mo kk mg mh mi mj bi translated">以编程方式更改语言</li></ul><p id="db33" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要阅读这篇文章，我们需要一个Next.js应用程序:<a class="ae ma" href="https://nextjs.org/learn/basics/getting-started" rel="noopener ugc nofollow" target="_blank">阅读Next.js文档</a>。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h2 id="1c64" class="mw ky iq bd kz mx my dn ld mz na dp lh jy nb nc ll kc nd ne lp kg nf ng lt nh bi translated">设置应用程序</h2><p id="eaa8" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">首先，我们需要安装项目的依赖项:</p><pre class="km kn ko kp gt ni nj nk nl aw nm bi"><span id="9a5b" class="mw ky iq nj b gy nn no l np nq">yarn add express next next-i18next</span></pre><p id="33d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">i18n需要如下配置文件:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="c834" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此配置提供不同的翻译文件并设置默认语言。</p><p id="8e9a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">既然我们已经创建了i18n实例，我们可以在我们的项目中使用它。</p><p id="989c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要修改我们的项目:</p><ul class=""><li id="192f" class="mb mc iq jp b jq jr ju jv jy md kc me kg mf kk mg mh mi mj bi translated">创建翻译</li><li id="517e" class="mb mc iq jp b jq mk ju ml jy mm kc mn kg mo kk mg mh mi mj bi translated">创建server.js</li><li id="39f4" class="mb mc iq jp b jq mk ju ml jy mm kc mn kg mo kk mg mh mi mj bi translated">创建应用程序</li><li id="822b" class="mb mc iq jp b jq mk ju ml jy mm kc mn kg mo kk mg mh mi mj bi translated">修改/创建package.json</li></ul><p id="08ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">创建翻译</strong></p><p id="ea7b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了翻译我们的应用程序，我们需要将翻译的内容提供给Next.js. i18n从静态文件夹下的JSON文件加载翻译:</p><pre class="km kn ko kp gt ni nj nk nl aw nm bi"><span id="fbe3" class="mw ky iq nj b gy nn no l np nq">project<br/>└── public<br/>    └── static<br/>        └── locales<br/>            ├── en<br/>            |   └── common.json<br/>            └── de<br/>            |    └── common.json<br/>            └── fr<br/>                └── common.json</span></pre><p id="478d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在JSON文件中，我们需要添加翻译:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="5e73" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> Create _app.js </strong></p><p id="cd97" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Next.js中的_app.js用于初始化页面。i18n将在其中通过使用特设的“appWithTranslation”进行初始化。</p><p id="46e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Your _app.js应该是这样的:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="d368" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">创建server.js </strong></p><p id="5899" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">默认情况下，您的下一个应用程序通过运行以下命令启动:</p><pre class="km kn ko kp gt ni nj nk nl aw nm bi"><span id="5420" class="mw ky iq nj b gy nn no l np nq">next start</span></pre><p id="4f42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里，我们需要用Express创建一个定制服务器来使用i18n:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="dac9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">修改Package.json </strong></p><p id="64f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于我们改变了应用程序的运行方式，我们需要更新“package.json”中的脚本。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="59cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在配置已经完成，我们可以启动我们的应用程序了:</p><pre class="km kn ko kp gt ni nj nk nl aw nm bi"><span id="e35e" class="mw ky iq nj b gy nn no l np nq">yarn run dev</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nt"><img src="../Images/035ddb95bfc55f87e45fab4270935a88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HiRE2wadbINSKbiTblhxog.png"/></div></div><figcaption class="nu nv gj gh gi nw nx bd b be z dk translated">示例应用程序</figcaption></figure></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h2 id="6549" class="mw ky iq bd kz mx my dn ld mz na dp lh jy nb nc ll kc nd ne lp kg nf ng lt nh bi translated">翻译应用程序</h2><p id="2a3b" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">i18n已经初始化，我们可以翻译我们的内容了！有两种可能的选择:</p><ul class=""><li id="a225" class="mb mc iq jp b jq jr ju jv jy md kc me kg mf kk mg mh mi mj bi translated">使用HOC</li><li id="5e40" class="mb mc iq jp b jq mk ju ml jy mm kc mn kg mo kk mg mh mi mj bi translated">使用挂钩</li></ul><p id="e36f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">使用悬挂夹具</strong></p><p id="4507" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将使用“with translation”HOC来翻译横幅组件:</p><p id="15e4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以前，我们通过将文件命名为“common”来构建翻译文件。该名称将是我们在包装组件时使用的名称空间。</p><p id="4206" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦用“withTranslation”包装了组件并提供了名称空间，就可以使用props中的i18n实例了。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="73d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">使用挂钩</strong></p><p id="e3ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">已经创建了React挂钩来使用i18n实例。我们将用它来翻译内容。</p><p id="e13b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">获取i18n翻译函数:</p><pre class="km kn ko kp gt ni nj nk nl aw nm bi"><span id="2d34" class="mw ky iq nj b gy nn no l np nq">import {useTranslation} from 'react-i18next';<br/>const {t} = useTranslation();</span></pre><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nr ns l"/></div></figure></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h2 id="a3e9" class="mw ky iq bd kz mx my dn ld mz na dp lh jy nb nc ll kc nd ne lp kg nf ng lt nh bi translated">以编程方式更改语言</h2><p id="ed54" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">i18n允许我们通过编程来改变语言。例如，通过点击一个按钮，选择…</p><p id="1ac8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要让i18n对象调用“changeLanguage”函数。</p><pre class="km kn ko kp gt ni nj nk nl aw nm bi"><span id="9204" class="mw ky iq nj b gy nn no l np nq">import {useTranslation} from 'react-i18next';<br/>const {t, i18n} = useTranslation();</span></pre><p id="197c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我创建了三个按钮在FR、DE、en之间切换:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="38a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">示例:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/7e01211d65f1fe29addc40be38726340.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*6P7HOIlGRx2gNrLREMNTHQ.gif"/></div><figcaption class="nu nv gj gh gi nw nx bd b be z dk translated">例子</figcaption></figure></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="3471" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">GitLab回购:<a class="ae ma" href="http://dmg.link/blog-i18n-next-repo" rel="noopener ugc nofollow" target="_blank">dmg.link/blog-i18n-next-repo</a></p><p id="f5ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">你可以在这里</strong>  <strong class="jp ir">找到我的其他文章并关注我</strong> <a class="ae ma" href="https://dmg.link/blog" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">。感谢阅读，我希望你今天学到了一些新东西🚀</strong></a></p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><div class="km kn ko kp gt nz"><a rel="noopener  ugc nofollow" target="_blank" href="/automate-your-react-native-app-with-fastlane-ea516b4a893"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ir gy z fp oe fr fs of fu fw ip bi translated">使用浪子自动化您的React原生应用程序</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">简化截图、测试版部署、应用商店部署和React原生应用的登录🚀</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on kv nz"/></div></div></a></div><div class="oo op gp gr oq nz"><a href="https://medium.com/swlh/how-to-use-face-id-with-react-native-or-expo-134231a25fe4" rel="noopener follow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ir gy z fp oe fr fs of fu fw ip bi translated">如何在React Native或Expo中使用Face ID</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">将生物认证应用到React Native或Expo应用中。让您的用户使用它登录。</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">medium.com</p></div></div><div class="oi l"><div class="or l ok ol om oi on kv nz"/></div></div></a></div></div></div>    
</body>
</html>