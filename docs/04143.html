<html>
<head>
<title>Why You Need Null Objects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么需要空对象</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/3-reasons-why-you-need-null-objects-f6f7ba83cd4e?source=collection_archive---------13-----------------------#2020-06-11">https://levelup.gitconnected.com/3-reasons-why-you-need-null-objects-f6f7ba83cd4e?source=collection_archive---------13-----------------------#2020-06-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/d685911b27d1b25659a6f6ff439b5c6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*89r_jQnRnf7pFjcJZcP0JQ.png"/></div></div></figure><h2 id="204a" class="jc jd je bd b dl jf jg jh ji jj jk dk jl translated" aria-label="kicker paragraph">应用设计模式</h2><div class=""/><div class=""><h2 id="f50b" class="pw-subtitle-paragraph kk jn je bd b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dk translated">让我告诉你为什么这个奇怪的伪空对象如此伟大</h2></div><p id="2f35" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">因此，我写了这篇文章“<a class="ae ly" href="https://medium.com/swlh/stop-checking-for-nulls-5f9f857ddf72" rel="noopener">停止检查空值</a>”，这引起了一些怀疑NOP有用性的开发者的不满。我想我应该花些时间提供更多的例子。</p><div class="is it gp gr iu lz"><a href="https://medium.com/swlh/stop-checking-for-nulls-5f9f857ddf72" rel="noopener follow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd jo gy z fp me fr fs mf fu fw jn bi translated">停止检查空值</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">空对象模式、工厂方法——让我们看看一些生产就绪代码！</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">medium.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn ja lz"/></div></div></a></div><p id="09e2" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">对于那些没有读过上一篇文章，仍然不知道什么是空对象的人，这里有一个简单的解释。</p><blockquote class="mo"><p id="beb2" class="mp mq je bd mr ms mt mu mv mw mx lx dk translated">主要目的是返回空值的合适替代。空对象只是允许更有表现力的代码。</p></blockquote><p id="33a2" class="pw-post-body-paragraph lc ld je le b lf my ko lh li mz kr lk ll na ln lo lp nb lr ls lt nc lv lw lx im bi translated">让我们看一些例子，当空对象比仅仅使用空值更有表现力时，空值很容易破坏你的应用程序。</p><h2 id="c30b" class="nd ne je bd nf ng nh dn ni nj nk dp nl ll nm nn no lp np nq nr lt ns nt nu jk bi translated">1说谎方法签名</h2><p id="ca3c" class="pw-post-body-paragraph lc ld je le b lf nv ko lh li nw kr lk ll nx ln lo lp ny lr ls lt nz lv lw lx im bi translated">方法签名可能在两个方面隐瞒了它做了什么:1)返回类型，以及2)方法名不正确。</p><figure class="ob oc od oe gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oa"><img src="../Images/fc735fafd087ccb18bd2fae973729126.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j19C4Ht5weqPDV0yblP94w.png"/></div></div></figure><p id="b79b" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">我们经常在仓库里看到这样的东西。如果没有空对象，这一行代码的问题是它在返回什么和做什么上撒谎。</p><p id="3dca" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">阅读这段代码告诉我，我可以<em class="of"> always，</em> as in，<strong class="le jo"> <em class="of"> always </em> </strong>，指望接收一个作者类型。但这不是真的，因为一些初级开发人员可能允许它返回null。</p><h2 id="adce" class="nd ne je bd nf ng nh dn ni nj nk dp nl ll nm nn no lp np nq nr lt ns nt nu jk bi translated">取而代之做什么</h2><p id="6b26" class="pw-post-body-paragraph lc ld je le b lf nv ko lh li nw kr lk ll nx ln lo lp ny lr ls lt nz lv lw lx im bi translated">如果您不想应用空模式，请编写代码来告诉您希望从中获得什么。关于的方法签名需要更改为下面的签名。</p><figure class="ob oc od oe gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi og"><img src="../Images/2dc5371847ee1353e1c009e396b1add2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9qBD0sG9LGqE1ixamTWxJg.png"/></div></div></figure><p id="b97c" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">你看Author后面的问号，名字现在包含了“Default”？现在我们知道调用这个方法可能会以空结束。</p><h2 id="542a" class="nd ne je bd nf ng nh dn ni nj nk dp nl ll nm nn no lp np nq nr lt ns nt nu jk bi translated">2表示缺少一个值</h2><p id="edb9" class="pw-post-body-paragraph lc ld je le b lf nv ko lh li nw kr lk ll nx ln lo lp ny lr ls lt nz lv lw lx im bi translated">Null可能意味着“没有价值”。但是，我们可以更有表现力，不是吗？</p><figure class="ob oc od oe gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oh"><img src="../Images/0ef0b653065f57e4fd83742e9c2e4337.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UsDs0anoUWY0OH-qNQ1lfA.png"/></div></div></figure><p id="70c1" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">当执行查询时，您可以通过返回一个<code class="fe oi oj ok ol b">Author.Unknown</code>类型来告知缺少值。它和null一样容易检查，但是如果你愿意，它也允许你传递它。这个对象将会有非常有预见性的行为:<strong class="le jo">它什么也不做</strong>。</p><h2 id="a807" class="nd ne je bd nf ng nh dn ni nj nk dp nl ll nm nn no lp np nq nr lt ns nt nu jk bi translated">3明确告知是否出现了问题</h2><p id="2acd" class="pw-post-body-paragraph lc ld je le b lf nv ko lh li nw kr lk ll nx ln lo lp ny lr ls lt nz lv lw lx im bi translated">使用工厂或工厂方法，您能够返回更专门化的对象，这些对象允许您在出错时进行断言。</p><p id="221c" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">你并不总是想要抛出异常。正如你显然非常清楚的那样，只有在发生了异常的情况下，才应该抛出异常。</p><figure class="ob oc od oe gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi om"><img src="../Images/05936955fc0619f496b6bc7c0b5dced3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XbAsWIA6sH_DjkaV31Gr7g.png"/></div></div></figure><p id="2889" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">向方法提供不正确的输入通常并不罕见。很常见。我们通过返回一个表示出错的空对象来考虑这些共性。</p><h1 id="0c65" class="on ne je bd nf oo op oq ni or os ot nl kt ou ku no kw ov kx nr kz ow la nu ox bi translated">批评家们怎么说</h1><h2 id="2dad" class="nd ne je bd nf ng nh dn ni nj nk dp nl ll nm nn no lp np nq nr lt ns nt nu jk bi translated">切换到另一种零安全的语言</h2><p id="9a0c" class="pw-post-body-paragraph lc ld je le b lf nv ko lh li nw kr lk ll nx ln lo lp ny lr ls lt nz lv lw lx im bi translated">这并不总是一个选项。很多时候，我们无法完全控制自己可以使用哪种语言。一些客户要求我们使用C#、Java、JavaScript等。</p><h2 id="585f" class="nd ne je bd nf ng nh dn ni nj nk dp nl ll nm nn no lp np nq nr lt ns nt nu jk bi translated">空对象模式令人困惑</h2><p id="a02b" class="pw-post-body-paragraph lc ld je le b lf nv ko lh li nw kr lk ll nx ln lo lp ny lr ls lt nz lv lw lx im bi translated">这比什么都没找到就返回null更容易混淆。我不知道null是否代表一个丢失的值，或者是否出错了。至少返回一个名为“Unknown”的空对象会告诉我们找不到我们想要的东西。</p><h2 id="7979" class="nd ne je bd nf ng nh dn ni nj nk dp nl ll nm nn no lp np nq nr lt ns nt nu jk bi translated">这种模式已经过时了</h2><p id="2af9" class="pw-post-body-paragraph lc ld je le b lf nv ko lh li nw kr lk ll nx ln lo lp ny lr ls lt nz lv lw lx im bi translated">MVC、MVVM、状态模式、存储库模式以及四人帮设计模式中的几乎所有模式都是如此。</p><p id="74c5" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">甚至我们使用的语言也是古老的。Python是1990年的。Java是1995年的。是啊，没错。Python甚至比Java更老派。但是我们仍然使用它们。</p><h2 id="cc92" class="nd ne je bd nf ng nh dn ni nj nk dp nl ll nm nn no lp np nq nr lt ns nt nu jk bi translated"><strong class="ak">这种模式已经过时</strong></h2><p id="82cc" class="pw-post-body-paragraph lc ld je le b lf nv ko lh li nw kr lk ll nx ln lo lp ny lr ls lt nz lv lw lx im bi translated">它仍然被应用在绿地项目中，因为它优雅地解决了一个问题。NOP没有什么过时的。</p><h2 id="957f" class="nd ne je bd nf ng nh dn ni nj nk dp nl ll nm nn no lp np nq nr lt ns nt nu jk bi translated">它隐藏了错误</h2><p id="a0e3" class="pw-post-body-paragraph lc ld je le b lf nv ko lh li nw kr lk ll nx ln lo lp ny lr ls lt nz lv lw lx im bi translated">嗯——正如我在上面演示的那样，它实际上会把错误带到你面前，很容易检测和调试。</p><figure class="ob oc od oe gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oy"><img src="../Images/0f33d3c5cb7fff6fd9924b0379750cf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RAKHFUQtsSPWsKNv.png"/></div></div></figure><p id="8f4f" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated"><strong class="le jo"> Nicklas Millard </strong>是一名软件开发工程师，供职于一家发展最快的银行，负责构建任务关键型金融服务基础设施。</p><p id="d7f6" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">此前，他是Big4的高级技术顾问，为商业客户和政府机构开发软件。</p><blockquote class="oz pa pb"><p id="a707" class="lc ld of le b lf lg ko lh li lj kr lk pc lm ln lo pd lq lr ls pe lu lv lw lx im bi translated">在<a class="ae ly" href="https://www.linkedin.com/in/nicklasmillard/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上连接</p></blockquote></div></div>    
</body>
</html>