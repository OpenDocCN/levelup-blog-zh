<html>
<head>
<title>How To Build A Custom Text Classification Model With AWS Comprehend</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用AWS intensive构建自定义文本分类模型</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-build-a-custom-text-classification-model-with-aws-comprehend-576b077a3a87?source=collection_archive---------11-----------------------#2022-04-06">https://levelup.gitconnected.com/how-to-build-a-custom-text-classification-model-with-aws-comprehend-576b077a3a87?source=collection_archive---------11-----------------------#2022-04-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d465" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">关于如何使用AWS intensive构建和部署定制分类模型的演练教程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4fb231a2d5b718d3b9a33624e3d845b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kfsnhz02U5Qi9I3w"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">帕特里克·托马索在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><div class="kz la gp gr lb lc"><a href="https://jorgepit-14189.medium.com/membership" rel="noopener follow" target="_blank"><div class="ld ab fo"><div class="le ab lf cl cj lg"><h2 class="bd iu gy z fp lh fr fs li fu fw is bi translated">用我的推荐链接加入媒体-乔治皮皮斯</h2><div class="lj l"><h3 class="bd b gy z fp lh fr fs li fu fw dk translated">阅读乔治·皮皮斯(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="lk l"><p class="bd b dl z fp lh fr fs li fu fw dk translated">jorgepit-14189.medium.com</p></div></div><div class="ll l"><div class="lm l ln lo lp ll lq ks lc"/></div></div></a></div><p id="72bc" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在本教程中，我们将向您展示如何使用AWS intensive构建自定义文本分类模型。对于这个项目，我们将使用由<strong class="lt iu"> UCI机器学习库</strong>获得的<a class="ae ky" href="https://archive.ics.uci.edu/ml/machine-learning-databases/00228/smsspamcollection.zip" rel="noopener ugc nofollow" target="_blank">垃圾短信收集数据集</a>。请注意，我们已经用0替换了HAM类，用0替换了SPAM类，但这不是必需的。</p><h1 id="37bf" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">训练模型</h1><p id="4392" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">为了使用intensive训练自定义分类模型，您需要登录AWS控制台，然后转到intensive服务，最后选择“自定义分类”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/f528c2af656f16808bb383d1fcde5645.png" data-original-src="https://miro.medium.com/v2/resize:fit:534/format:webp/0*rLSwIyot5gFWeFUJ.png"/></div></figure><p id="27c6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">然后你点击“<strong class="lt iu">创建新模型</strong>”，你定义你的模型的名称。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/b7bdbd8108b86a6df2a5e3e8776ce812.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/0*or_QiUN4pVurpzAY.png"/></div></figure><p id="4a0b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">对于“数据规范”，我们选择“分类器模式”和“CSV文件”格式。<strong class="lt iu">请注意，您的数据不应包含标题</strong>。最后，我们添加数据的S3存储桶位置，对于测试数据集，我们选择“Autosplit”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/3caea16d546ee48ca3592a3a2bf8f7df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SdXfjc7gApwZHux0.png"/></div></div></figure><p id="d745" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">对于输出数据，我们通过向bucket添加一个文件夹来选择一个新位置。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/e84714609ef055d9006f8a69d9df47f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YDrr7DFZNi1pol-D.png"/></div></div></figure><p id="3e53" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">然后，选择IAM角色，并单击右下角的“创建”按钮。</p><h1 id="8c5d" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">受过训练的模型</h1><p id="dda5" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">该模型需要大约40分钟来训练，当然，这也取决于你的数据量。一旦模型被训练，我们可以在“分类器模型”下找到它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/6601f81b26e3cdfd6fc76d0b67ac40d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*U_kNiGo9SmLh-gBc.png"/></div></div></figure><p id="df94" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">当我们点击“<strong class="lt iu">垃圾短信</strong>时，我们可以找到一些统计数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/b41ceff83f22685f81b99a88b5a92bac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*n48Jdh2oWZT5pOzt.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/3131578618924229aed141f6af4b79ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3D2x8wtkv5YeNgkt.png"/></div></div></figure><p id="64de" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">正如我们所看到的，该模型做得非常好(高准确度、精确度、召回率、F1分数)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/4438c8639dd40da6ee7552893eb56689.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CTnmcyuP6CwFVH20.png"/></div></div></figure><p id="47e4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最后，在我们设置的获取模型输出的S3桶下，我们可以在测试数据集上找到模型的“混淆矩阵”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/71d38d38ddd83696ff80b7f83e911ff8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*kF_pwd70KdA89JQA.png"/></div></figure><h1 id="4819" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">实时分析</h1><p id="384f" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">对于“实时分析”,我们需要创建一个端点。因此，我们转到“<strong class="lt iu">端点</strong>”选项卡，并选择“<strong class="lt iu">创建端点</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/4583e90b8fb68b79c53c188268bd6f98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_KexDxAZwKqn4Qfl.png"/></div></div></figure><p id="ff00" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">然后，我们定义“端点名称”,对于IU的数量，我们选择1。一旦您遵循这些步骤，端点将被创建，并且可以在“端点”处找到。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/ba9b533cac427e92f7ab6400c755b253.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jE3WDbI1pCcM9ppn.png"/></div></div></figure><p id="d4f1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在我们已经为“实时分析”做好了准备。转到“Real Analysis”部分，选择“Custom”并输入端点的名称。最后，在输入文本中输入您想要获得预测的文本。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/8a739a84f30b643ab0ee0ef07839b385.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gw-Yw2E-0Y_PFl6Q.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/0d895d46fb80105bc95d3a9fcfa479ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ttW33s-7ju09U2Oo.png"/></div></div></figure><p id="31a0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如我们所见，我们输入的示例看起来是一个99%可信的“垃圾邮件”。</p><h1 id="a115" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">使用面向Python的SDK进行实时分析</h1><p id="58ae" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">我们可以使用Python SDK以及AWS CLI来调用定制模型。让我们看看如何使用Boto3来实现它。首先，您需要复制端点的ARN。</p><blockquote class="nu nv nw"><p id="5cbd" class="lr ls nx lt b lu lv ju lw lx ly jx lz ny mb mc md nz mf mg mh oa mj mk ml mm im bi translated">哈哈，你总是那么有说服力。</p></blockquote><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="4063" class="og mo it oc b gy oh oi l oj ok"><strong class="oc iu">import</strong> <!-- -->boto3</span><span id="af8d" class="og mo it oc b gy ol oi l oj ok">endpoint <strong class="oc iu">=</strong> <!-- -->'arn:aws:comprehend:region:account-id:document-classifier-endpoint/sms-ham-spam-endpoint'</span><span id="8491" class="og mo it oc b gy ol oi l oj ok">session <strong class="oc iu">=</strong> <!-- -->boto3.session.Session(profile_name<strong class="oc iu">=</strong>'sandbox')</span><span id="3f9c" class="og mo it oc b gy ol oi l oj ok">client <strong class="oc iu">=</strong> <!-- -->session.client('comprehend')</span><span id="d5b6" class="og mo it oc b gy ol oi l oj ok">mytxt <strong class="oc iu">=</strong> <!-- -->"Lol your always so convincing."</span><span id="6b54" class="og mo it oc b gy ol oi l oj ok">response <strong class="oc iu">=</strong> <!-- -->client.classify_document(Text<strong class="oc iu">=</strong>mytxt, EndpointArn<strong class="oc iu">=</strong>endpoint)</span><span id="a50b" class="og mo it oc b gy ol oi l oj ok">response</span></pre><p id="76fa" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><strong class="lt iu">输出</strong></p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="f0e4" class="og mo it oc b gy oh oi l oj ok">{'Classes': [{'Name': '0', 'Score': 0.9999861717224121},<br/>  {'Name': '1', 'Score': 1.3849913557351101e-05}],<br/> 'ResponseMetadata': {'RequestId': 'f8c7d94a-a23c-4fc0-9cf5-7229f1387fb6',<br/>  'HTTPStatusCode': 200,<br/>  'HTTPHeaders': {'x-amzn-requestid': 'f8c7d94a-a23c-4fc0-9cf5-7229f1387fb6',<br/>   'content-type': 'application/x-amz-json-1.1',<br/>   'content-length': '96',<br/>   'date': 'Wed, 06 Apr 2022 13:14:41 GMT'},<br/>  'RetryAttempts': 0}}</span></pre><p id="f1fd" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">要使用自定义模型(AWS CLI)运行实时分析，您可以运行:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="536a" class="og mo it oc b gy oh oi l oj ok">aws comprehend classify-document \<br/>    --endpoint-arn arn:aws:comprehend:region:account-id:document-classifier-endpoint/sms-ham-spam-endpoint \<br/>    --text 'Lol your always so convincing.'</span></pre><p id="0a26" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">上面的例子是为Unix、Linux和macOS格式化的。对于Windows，将每行末尾的反斜杠()Unix继续字符替换为插入符号(^).</p><h1 id="6e7f" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">不要忘记删除端点</h1><p id="c122" class="pw-post-body-paragraph lr ls it lt b lu nf ju lw lx ng jx lz ma nh mc md me ni mg mh mi nj mk ml mm im bi translated">请注意，只要终端在运行，您就会被收费。所以，一旦你完成了，不要忘记删除它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/d400c821e016bc791bc2ef1242135834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jAFujxndJb2kXo0t.png"/></div></div></figure></div><div class="ab cl om on hx oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="im in io ip iq"><p id="0090" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最初由<a class="ae ky" href="https://predictivehacks.com/how-to-build-a-custom-text-classification-model-with-aws-comprehend/" rel="noopener ugc nofollow" target="_blank">预测黑客</a>发布</p></div></div>    
</body>
</html>