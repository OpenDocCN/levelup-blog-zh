<html>
<head>
<title>How I Automate Testing Using Jest</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何使用Jest自动化测试</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-i-automate-testing-using-jest-96b93baacaa4?source=collection_archive---------3-----------------------#2021-04-01">https://levelup.gitconnected.com/how-i-automate-testing-using-jest-96b93baacaa4?source=collection_archive---------3-----------------------#2021-04-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1a1b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">当谈到测试自动化时，笑话是取胜的法宝</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8c519d542dbc1ca7da5542a1d235995e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*twR-qCO-2_FXmrLIVCs1nw.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由Pexels上的数码Buggu拍摄</figcaption></figure><p id="7a62" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">软件开发的一个非常重要的部分是测试自动化，因为它为一种或多种类型的测试创建了一个自动化的过程，而不需要人工干预。</p><p id="daba" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在处理JavaScript/TypeScript代码库时，我最喜欢的自动化测试工具之一是<a class="ae lu" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank"> Jest </a>，因为它允许我在开发时轻松地创建测试并迭代它们。它的简单性使它成为使用TDD开发的一个非常好的工具。</p><p id="e344" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我将对Jest做一个简单的介绍，解释Jest成为一个优秀测试工具的主要原因，并给出一些例子。</p><p id="d575" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">先说为什么要用。</p><h1 id="63ae" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">为什么开玩笑</h1><p id="c880" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">当我选择使用一个工具时，我总是试图找到具体的事实，为什么我应该使用这个工具，而不是其他任何工具。</p><p id="9939" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是我最喜欢的特性，这些特性让我选择Jest作为测试自动化工具:</p><ul class=""><li id="9e56" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">简单快速，非常适合原型制作。</li><li id="21f7" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">它允许简单地通过在命令行中添加参数<code class="fe ng nh ni nj b">—-coverage</code>来生成代码覆盖报告。</li><li id="2a4c" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">测试执行期间的错误报告是丰富而有价值的。</li><li id="a91d" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">围绕该工具的文档和社区非常好。</li></ul><p id="f579" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">既然我们已经有了选择Jest的正当理由，让我们开始工作，安装Jest并浏览一些例子。</p><p id="524d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">📝<em class="nk">如果你还没有安装Node.js可以从官网</em> <a class="ae lu" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> <em class="nk">下载</em> </a> <em class="nk">安装。</em></p><h1 id="e1c8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">开玩笑的测试</h1><p id="b4f1" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">让我们从创建一个简单的项目并安装Jest包依赖项开始。</p><p id="f15b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们需要做的第一件事是打开命令行终端并运行以下命令来初始化项目。</p><pre class="kj kk kl km gt nl nj nm nn aw no bi"><span id="2848" class="np lw it nj b gy nq nr l ns nt">npm init</span></pre><p id="3514" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">命令行终端将提示几个问题，在它结束时，您应该有一个名为<code class="fe ng nh ni nj b">package.json</code>的文件，其内容与下面的类似。</p><pre class="kj kk kl km gt nl nj nm nn aw no bi"><span id="017c" class="np lw it nj b gy nq nr l ns nt">{<br/>  "name": "Jest Testing",<br/>  "version": "1.0.0",<br/>  "description": "Let's create some tests with Jest",<br/>  "main": "index.js",<br/>  "scripts": {},<br/>  "author": "Nuno Brites",<br/>  "license": "MIT"<br/>}</span></pre><p id="53c6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">项目准备就绪后，我们需要做的第一件事是安装Jest，为此只需运行下面的命令。</p><pre class="kj kk kl km gt nl nj nm nn aw no bi"><span id="9fcc" class="np lw it nj b gy nq nr l ns nt">npm install --save-dev jest</span></pre><p id="c87f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在让我们创建一个名为<code class="fe ng nh ni nj b">stringConcat.js</code>的文件，并将下面描述的函数添加到它的内容中。功能<code class="fe ng nh ni nj b">stringConcat</code>将在测试中使用。</p><pre class="kj kk kl km gt nl nj nm nn aw no bi"><span id="b3a9" class="np lw it nj b gy nq nr l ns nt">function stringConcat(str1, str2) {<br/>  return str1 + str2;<br/>}</span><span id="e906" class="np lw it nj b gy nu nr l ns nt">module.exports = stringConcat;</span></pre><p id="0914" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下一步是创建测试文件。创建另一个名为<code class="fe ng nh ni nj b">stringConcat.test.js</code>的文件，并将下面的代码添加到它的内容中。</p><pre class="kj kk kl km gt nl nj nm nn aw no bi"><span id="6649" class="np lw it nj b gy nq nr l ns nt">const stringConcat = require('./stringConcat');</span><span id="6049" class="np lw it nj b gy nu nr l ns nt">test('concats "Hello " with "world!" into a single string', () =&gt; {<br/>  expect(stringConcat("Hello ", "world!")).toBe("Hello world!");<br/>});</span></pre><p id="5dbc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在我们已经有了第一个测试，我们需要创建一个运行测试的方法。我们有两个选择，更新<code class="fe ng nh ni nj b">package.json</code>文件中的<code class="fe ng nh ni nj b">scripts</code>元素，或者在您的机器上安装Jest并直接从命令行运行它。</p><p id="5717" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们通过第一种方法，更新<code class="fe ng nh ni nj b">package.json</code>文件并添加以下内容。</p><pre class="kj kk kl km gt nl nj nm nn aw no bi"><span id="9282" class="np lw it nj b gy nq nr l ns nt">{<br/>  "scripts": {<br/>    "test": "jest"<br/>  }<br/>}</span></pre><p id="f60e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">更新完<code class="fe ng nh ni nj b">scripts</code>元素后，我们需要做的就是进入命令行并执行。</p><pre class="kj kk kl km gt nl nj nm nn aw no bi"><span id="6abb" class="np lw it nj b gy nq nr l ns nt">npm run test</span></pre><p id="bbdd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">运行该命令后，您将看到以下输出。让我们更详细地看看Jest向控制台写入了什么。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/886fa0856f7c58926346ddd91003fe6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/1*kVVh5o0Qc-K0Uzm_cU75aQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Jest输出</figcaption></figure><p id="08eb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">运行完测试后，Jest在控制台上打印出执行摘要，并以红色突出显示绿色🟢运行良好的地方和导致错误的地方🔴。在这种情况下，我们可以看到测试运行是成功的，测试的范围由一个测试套件和一个测试组成。</p><p id="ebcf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在让我们将<code class="fe ng nh ni nj b">scripts</code>元素更新为下面的元素。</p><pre class="kj kk kl km gt nl nj nm nn aw no bi"><span id="6ef9" class="np lw it nj b gy nq nr l ns nt">{<br/>  "scripts": {<br/>    "test": "jest"<br/>    "test-with-coverage": "jest --coverage"<br/>  }<br/>}</span></pre><p id="7dde" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">新代码行将执行Jest，并将代码覆盖率报告打印到控制台。让我们运行它，看看会发生什么。</p><pre class="kj kk kl km gt nl nj nm nn aw no bi"><span id="eec0" class="np lw it nj b gy nq nr l ns nt">npm run test-with-coverage</span></pre><p id="8334" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">运行上面的命令后，您将看到以下输出。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/a55f77e90922dbef5d32d10d4703fcc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*beEGowjUUS_uR7YZB0VGdg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">带有覆盖率报告的Jest输出</figcaption></figure><p id="9f67" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这种情况下，Jest打印出与我们之前看到的相同的输出，但是添加了一个由测试提供的代码覆盖率的表格。上表显示我们已经覆盖了100%的代码。</p><h1 id="a795" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">Jest社区</h1><p id="1891" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">Jest有一个对该工具感兴趣并为其发展和改进做出贡献的社区。它存在于GitHub上，其中有一个Visual Studio代码插件或者Jest本身的一些扩展。</p><p id="185f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">GitHub上绝对值得关注的东西。</p><h1 id="866f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">包扎</h1><p id="4f4b" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">在使用Jest作为测试工具之后，这里有几点值得一提:</p><ul class=""><li id="bd1c" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">我喜欢Jest的一个主要原因是因为它将简单易用与强大的测试工具结合在一起，并允许快速可靠的原型开发，正如我们在上面的例子中所看到的。</li><li id="fde7" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">如果你使用JavaScript作为前端和后端的语言，你可以在两者中使用Jest。</li></ul><p id="0232" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你有任何建议或贡献，欢迎在下面评论。编码快乐！</p></div></div>    
</body>
</html>