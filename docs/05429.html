<html>
<head>
<title>Learning JavaScript: Working with Objects — this, getters, and setters</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习JavaScript:使用对象— this、getters和setters</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/learning-javascript-working-with-objects-this-getters-and-setters-16f944397986?source=collection_archive---------10-----------------------#2020-08-27">https://levelup.gitconnected.com/learning-javascript-working-with-objects-this-getters-and-setters-16f944397986?source=collection_archive---------10-----------------------#2020-08-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/dca911a501de1b667d4c4fa1f7c00d88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4pI04acQrzg58EwC"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Markus Spiske </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="d950" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">JavaScript对象为读者提供了一些特殊的特性，使得基于对象的程序员更加有效和高效。在本文中，我将描述其中的三个特性——<code class="fe le lf lg lh b">this</code>关键字、getters和setters。</p><h1 id="3a32" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">this关键字</h1><p id="d6fb" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">如果在计算机编程中还有比<code class="fe le lf lg lh b">this</code>关键字更令人困惑的关键字，我不知道它是什么。然而，<code class="fe le lf lg lh b">this</code>背后的概念并没有那么难理解。关键字<code class="fe le lf lg lh b">this</code>指的是引用中的当前对象，使用它的代码在引用中执行。</p><p id="27bd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例子往往比解释更好，所以这里举个例子。首先，让我们编写一个对象构造函数和一个简短的程序来测试它:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="171b" class="mt lj it lh b gy mu mv l mw mx">function Person(n, a) {<br/>  this.name = n;<br/>  this.age = a;<br/>}</span><span id="c909" class="mt lj it lh b gy my mv l mw mx">let me = new Person("Mike", 63);<br/>print(me.name + ", " + me.age);</span></pre><p id="3c68" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个程序的输出是:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="cfb0" class="mt lj it lh b gy mu mv l mw mx">Mike, 63</span></pre><p id="bf83" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">this</code>关键字用于在代码运行时引用内存中的当前对象属性。可以翻译为“将n中的值赋给这个特定对象的name属性。”</p><p id="62ce" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">this</code>的另一个很好的用途是消除属性名与参数名相同的代码的歧义，就像在这个重写的构造函数中一样:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="33df" class="mt lj it lh b gy mu mv l mw mx">function Person(name, age) {<br/>  this.name = name;<br/>  this.age = age;<br/>}</span></pre><p id="2a79" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你不能把<code class="fe le lf lg lh b">this </code>关键字从构造函数定义中去掉，但是它仍然有助于使代码对读者来说更加清晰。</p><p id="2a45" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">this</code>关键字在处理JavaScript中的对象时起着重要的作用，我希望我已经让你对它的用法更清楚了。</p><h1 id="8355" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">用Setters分配对象属性值</h1><p id="2f05" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">setter是一个特殊的函数，它允许您将数据分配给一个对象，就像您使用赋值一样，但是有一个函数的支持，该函数可用于执行数据验证之类的事情。</p><p id="0eb3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们来看看用于设置<code class="fe le lf lg lh b">Person</code>对象年龄的setter的第一个版本，以及一个测试程序:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="b8c7" class="mt lj it lh b gy mu mv l mw mx">let Person = {<br/>  name: "",<br/>  setAge(age) {<br/>    this.age = age;<br/>  }<br/>}</span><span id="4a8e" class="mt lj it lh b gy my mv l mw mx">let me = Person;<br/>me.name = "Mike";<br/>me.setAge = 63;<br/>print(me.name + ", " + me.age);</span></pre><p id="7273" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个程序的输出是:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="30f2" class="mt lj it lh b gy mu mv l mw mx">Mike, 63</span></pre><p id="8868" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">setter的一个更好的用途是用它来执行一些数据验证。在这个版本中，setter检查以确保分配给对象的年龄至少为0。下面是代码和一个测试程序:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="719c" class="mt lj it lh b gy mu mv l mw mx">let Person = {<br/>  name: "",<br/>  set setAge(a) {<br/>    if (a &gt;= 0) {<br/>      this.age = a;<br/>    }<br/>    else {<br/>      this.age = 0;<br/>    }<br/>  }<br/>}</span><span id="8b0c" class="mt lj it lh b gy my mv l mw mx">let me = Person;<br/>me.name = "Mike";<br/>me.setAge = 63;<br/>print(me.name + ", " + me.age);<br/>me.setAge = -10;<br/>print(me.name + ", " + me.age);</span></pre><p id="9921" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个程序的输出是:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="d904" class="mt lj it lh b gy mu mv l mw mx">Mike, 63<br/>Mike, 0</span></pre><p id="4b31" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当第二次调用<code class="fe le lf lg lh b">me.setAge</code>时，<code class="fe le lf lg lh b">setAge</code>函数查看参数的值，并选择将<code class="fe le lf lg lh b">age</code>属性设置为0，而不是无效的年龄-10。</p><p id="bc8f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们看看如何使用getters来检索对象的属性。</p><h1 id="84aa" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">用Getters检索对象属性</h1><p id="9e89" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">在JavaScript中，getters不如setters有用。要理解其中的原因，您需要理解其他面向对象编程语言(如Java和C++)中getters和setters的用法。在这些语言中，当变量的访问级别是私有的，但您希望类的用户能够访问该变量的值时，getter方法(或成员函数)是必需的。做到这一点并遵循良好的OOP设计的唯一方法是提供一个getter来检索值。</p><p id="b015" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">JavaScript对象没有私有访问变量，所以所有属性都可以使用点符号直接从对象中访问。但是，如果我们想返回一些东西，而不仅仅是存储在属性中的原始数据，我们可能还想提供一个getter。</p><p id="00e4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里有一个例子。我定义了一个<code class="fe le lf lg lh b">Timer</code>对象，它以秒为单位存储时间，但通过一个getter以分钟为单位返回时间。下面是对象定义和测试它的程序:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="0ef0" class="mt lj it lh b gy mu mv l mw mx">let Timer = {<br/>  start: 0,<br/>  stop: 0,<br/>  get time() {<br/>    return (this.stop - this.start) / 60;<br/>  }<br/>}</span><span id="f758" class="mt lj it lh b gy my mv l mw mx">let someTime = Timer;<br/>someTime.start = 0;<br/>someTime.stop = 230;<br/>print(someTime.time.toPrecision(3));</span></pre><p id="b059" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个程序的输出是:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="7230" class="mt lj it lh b gy mu mv l mw mx">3.83</span></pre><p id="85c4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这种情况下，我没有使用setter，所以我可以突出显示getter，所以我将setter留给读者作为练习。</p><h1 id="8644" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">可以在对象创建后添加Getters和Setters</h1><p id="aa1d" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">创建对象后，可以为对象定义getters和setters。下面是你如何从上面用<code class="fe le lf lg lh b">Timer</code>对象做到这一点。首先，让我们重新定义没有getter或setter的Timer:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="776d" class="mt lj it lh b gy mu mv l mw mx">Object.defineProperty(someTime, 'time', {<br/>  get: function() {return (this.stop - this.start) / 60; }<br/>});</span></pre><p id="23f0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您不熟悉<code class="fe le lf lg lh b">Object.defineProperty</code>，我将在以后的文章中详细介绍。</p><p id="08dc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是测试这个新getter的完整程序:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="5b30" class="mt lj it lh b gy mu mv l mw mx">function Timer(start, stop) {<br/>  this.start = start,<br/>  this.stop = stop<br/>}</span><span id="4746" class="mt lj it lh b gy my mv l mw mx">let someTime = new Timer(0, 230);<br/>print("Starting time: " + someTime.start);<br/>print("Stopping time: " + someTime.stop);</span><span id="8e6e" class="mt lj it lh b gy my mv l mw mx">Object.defineProperty(someTime, 'time', {<br/>  get: function() {return (this.stop - this.start) / 60; }<br/>});</span><span id="7182" class="mt lj it lh b gy my mv l mw mx">print("Time elapsed in minutes: " + someTime.time.toPrecision(3));</span></pre><p id="6b36" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个程序的输出是:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="f88d" class="mt lj it lh b gy mu mv l mw mx">Starting time: 0<br/>Stopping time: 230<br/>Time elapsed in minutes: 3.83</span></pre><h1 id="ff63" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">使用Getters和Setters</h1><p id="ac9d" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">在基于对象的JavaScript程序中，Getters和setters并不是必需的，但它们确实使一些编程变得更容易，并使一些事情成为可能，比如数据验证，没有它们是不可能的。如果您打算在程序中创建和使用对象，您应该认真考虑对您的对象使用getters和setters。</p><p id="070b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢您的阅读，请将您的意见和建议发邮件至<a class="ae kf" href="mailto:mmmcmillan1@att.net" rel="noopener ugc nofollow" target="_blank">mmmcmillan1@att.net</a>给我。如果你对我的在线编程课程感兴趣，请访问<a class="ae kf" href="https://learningcpp.teachable.com" rel="noopener ugc nofollow" target="_blank">https://learningcpp.teachable.com</a>。</p></div></div>    
</body>
</html>