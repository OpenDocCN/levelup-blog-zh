<html>
<head>
<title>Are MySQL BETWEEN Operator Queries Inclusive?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">运算符查询之间的MySQL包含吗？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/are-mysql-between-operator-queries-inclusive-3bd757c37f03?source=collection_archive---------11-----------------------#2021-06-12">https://levelup.gitconnected.com/are-mysql-between-operator-queries-inclusive-3bd757c37f03?source=collection_archive---------11-----------------------#2021-06-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="6870" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">没有什么比编程的实际经验更好的了。事实上，生活中几乎所有的事情都是通过经验获得的。</p><p id="cafa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我最近在LAMP stack web应用程序中实现了一个特性，在使用<code class="fe kp kq kr ks b">BETWEEN</code>操作符通过<code class="fe kp kq kr ks b">DATETIME</code>列值过滤MySQL查询时遇到了<em class="ko">尖锐边缘</em>。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi kt"><img src="../Images/c9405b4f0042a9a2c2f223cfde0087a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*3srJbrpE1LWk3LYdLFucnw.png"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">图片由<a class="ae lf" href="https://pixabay.com/users/openclipart-vectors-30363/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=159098" rel="noopener ugc nofollow" target="_blank"> OpenClipart-Vectors </a>来自<a class="ae lf" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=159098" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></figcaption></figure><p id="98ef" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我的印象是<code class="fe kp kq kr ks b">BETWEEN</code>是包含性的，这意味着指定范围内的任何值，以及那些匹配高端和低端范围的值，也将包含在返回的结果集中。</p><p id="5ac0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe kp kq kr ks b">BETWEEN</code> <em class="ko">是</em>的包含。然而，正如我所发现的，当作为<code class="fe kp kq kr ks b">BETWEEN</code>范围查询的一部分时，<code class="fe kp kq kr ks b">DATETIME</code>列数据类型<em class="ko">的行为有点出乎意料</em>。或者至少这是我在这种情况下的经验。由于我的查询没有返回正确的预期行数，这促使我进一步调查并尝试了解原因。</p><p id="a6db" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">毕竟不正确的查询结果也不过如此；不正确的</strong>。</p><p id="5cf7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我正在开发的web应用程序使用的是MariaDB 10.2.38。然而，我在这篇文章中使用MySQL 8 . 0 . 25版的数据和例子。</p><h2 id="2072" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">模拟数据设置</h2><p id="0c35" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">出于演示目的，我将创建一个简单的表，有3列:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="630f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">虽然我不一定需要<code class="fe kp kq kr ks b">DATETIME</code>数据类型的时间部分，但是在列定义中使用它的好处是，当您希望当前日期时间作为列值时，可以使用<code class="fe kp kq kr ks b">DEFAULT</code>关键字设置<code class="fe kp kq kr ks b">DEFAULT</code>到<code class="fe kp kq kr ks b">CURRENT_TIMESTAMP()</code>和<code class="fe kp kq kr ks b">INSERT</code>行:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="1688" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于那些需要存储特定日期的实例，您也可以轻松地<code class="fe kp kq kr ks b">INSERT</code>省略时间部分:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="bf2c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下查询都是在2021年6月2日撰写本文时执行的，如<code class="fe kp kq kr ks b">CURRENT_TIMESTAMP()</code>函数所示:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="f4f8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">“练习名称”表中的数据如下所示:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/689fac0db2173dabd56180b60c1e85a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/1*2gg6-Otg8P11YVujvDA7Uw.png"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">来自“练习名称”表的所有数据。</figcaption></figure><h2 id="b683" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">使用BETWEEN按日期筛选行</h2><p id="ac54" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">如果我希望返回日期“2021–05–31”和“2021–06–02”之间(包括这两个日期)的所有行，此查询将完成此任务:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/53913d1e4d2842a7b2d32be906107370.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*AGkAFlVdCFfqkzM9ib0BfQ.png"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">没有正确行数的查询结果。</figcaption></figure><p id="38a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">等一下。</p><p id="d6dd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">那些查询结果不正确。</p><p id="8663" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">日期值为“2021–06–02”的2行也应该包含在返回的结果集中。</p><p id="3329" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">怎么回事？</p><h2 id="bb2c" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">使用CAST()函数进行类型转换</h2><p id="8337" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">在进行了大量的<em class="ko">挠头</em>和一些<em class="ko">搜索</em>之后，我发现‘inclusion _ date’列可以被<em class="ko">类型转换</em>为<code class="fe kp kq kr ks b">DATE</code>数据类型(回想一下，该列被创建为<code class="fe kp kq kr ks b">DATETIME</code>数据类型)以便查询返回正确的行数。</p><p id="a17f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如下面修改后的查询所示，在<code class="fe kp kq kr ks b">WHERE</code>子句中使用<code class="fe kp kq kr ks b">CAST()</code>函数返回正确的行数:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/d434042e85d92fb1a0157bb799acfa95.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*i3iwIdSIb_9fK_xFpgFxUg.png"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">返回正确行的查询结果</figcaption></figure><p id="d0cd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当<em class="ko">使用<code class="fe kp kq kr ks b">CAST()</code>将<code class="fe kp kq kr ks b">DATETIME </code>列类型转换</em>为<code class="fe kp kq kr ks b">DATE</code>列时，为什么这个查询会工作？</p><p id="0116" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们看看能否通过更多的后续问题来回答这个问题…</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="1161" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我可以向你保证一件事。如果你给我买杯咖啡，我会喝的！！！</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h2 id="4abd" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">包括查询之间的时间部分。</h2><p id="938b" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">根据“practice_names”表中的数据，值为<code class="fe kp kq kr ks b">id</code>1和2的行的时间部分为<code class="fe kp kq kr ks b">19:08:16</code>。回想一下，这2行是用<code class="fe kp kq kr ks b">DEFAULT</code> ( <code class="fe kp kq kr ks b">CURRENT_TIMESTAMP()</code>)列值插入的。</p><p id="9fdb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我将在不使用<code class="fe kp kq kr ks b">CAST()</code>的情况下执行一个查询，并在<em class="ko">上端</em>值中包含一个时间部分:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/d4694b8c6d213a988654ceb8fb68ba71.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*wZjOAgqqbFyYK52aimO4Wg.png"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">在查询中包含时间部分…</figcaption></figure><p id="4e02" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">没有变化。</p><p id="147e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，包括一个时间部分直到午夜怎么样？</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/c8d5ec4a90f3be5fd1e4983db99a04e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*duSfAOj6XXukH2f9BisiqA.png"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">包括几乎午夜之前的一段时间…</figcaption></figure><p id="94ce" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该查询返回正确的行数。</p><p id="c389" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">我感觉</em>通过包含<code class="fe kp kq kr ks b">23:59:59</code>的时间部分值，返回带有<code class="fe kp kq kr ks b">id</code>的1和2的行，因为它们的<code class="fe kp kq kr ks b">19:08:16</code>的时间部分在<code class="fe kp kq kr ks b">BETWEEN</code>的指定下限和上限之间。</p><p id="388d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">包含时间部分值可能不是一个实用的解决方案，因为您需要第一手了解每个<code class="fe kp kq kr ks b">DATETIME</code>列的时间部分值，除非时间部分是您特定业务需求的组成部分。对我来说，时间部分不太重要(或者我是这么认为的！).</p><h2 id="d533" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">其他信息资源</h2><ul class=""><li id="7f6d" class="ms mt it js b jt lz jx ma kb mu kf mv kj mw kn mx my mz na bi translated"><a class="ae lf" href="https://dev.mysql.com/doc/refman/8.0/en/datetime.html" rel="noopener ugc nofollow" target="_blank">有关更多信息</a>，请访问关于日期、日期时间和时间戳数据类型的在线MySQL文档。(非现场链接)</li><li id="2484" class="ms mt it js b jt nb jx nc kb nd kf ne kj nf kn mx my mz na bi translated"><a class="ae lf" href="https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html#operator_between" rel="noopener ugc nofollow" target="_blank"> MySQL在运营商之间</a>(异地链接)</li><li id="5d76" class="ms mt it js b jt nb jx nc kb nd kf ne kj nf kn mx my mz na bi translated"><a class="ae lf" href="https://dev.mysql.com/doc/refman/8.0/en/cast-functions.html#function_cast" rel="noopener ugc nofollow" target="_blank"> MySQL CAST()函数</a>(异地链接)</li></ul><p id="abcf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望，如果你在使用<code class="fe kp kq kr ks b">BETWEEN</code>的<code class="fe kp kq kr ks b">DATE</code>或<code class="fe kp kq kr ks b">DATETIME</code>列查询中面临同样的<em class="ko">不一致</em>，你可以更容易地<em class="ko">对</em>进行故障排除，因为你已经阅读了这篇文章，并且理解了解决这种类型查询的一种方法。</p><h2 id="4259" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">进一步阅读</h2><p id="52c7" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">请务必访问以下任何类似内容的博客帖子:</p><ul class=""><li id="8861" class="ms mt it js b jt ju jx jy kb ng kf nh kj ni kn mx my mz na bi translated"><a class="ae lf" rel="noopener ugc nofollow" target="_blank" href="/mysql-searched-case-expression-with-examples-6d5f3bcf2c81"> MySQL搜索案例表达式—附示例</a></li><li id="bfb8" class="ms mt it js b jt nb jx nc kb nd kf ne kj nf kn mx my mz na bi translated"><a class="ae lf" rel="noopener ugc nofollow" target="_blank" href="/mysql-count-weekday-occurrences-5241511dba8c"> MySQL统计工作日出现次数</a></li><li id="099f" class="ms mt it js b jt nb jx nc kb nd kf ne kj nf kn mx my mz na bi translated"><a class="ae lf" href="https://joshuaotwell.com/mysql-aggregate-query-using-codeigniters-query-builder/" rel="noopener ugc nofollow" target="_blank">使用CodeIgniter的查询构建器进行MySQL聚合查询</a>(非现场链接)</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="ce7c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">喜欢的内容，你在这个帖子里看过？那么你肯定会喜欢我博客上的博文，<a class="ae lf" href="http://joshuaotwell.com/" rel="noopener ugc nofollow" target="_blank">数字猫头鹰的散文</a>(站外链接)。</p><p id="889e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在那里你会找到关于SQL数据库开发/编程和LAMP stack web开发的博文。</p><p id="d092" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我最近开始每周发一封电子邮件，分享我感兴趣的、我正在学习的或我已经写过的所有SQL/PHP内容。如果你对此感兴趣，<a class="ae lf" href="https://hustling-speaker-4067.ck.page/1b35a06295" rel="noopener ugc nofollow" target="_blank">在这里注册</a>。</p></div></div>    
</body>
</html>