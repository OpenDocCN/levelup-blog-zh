# 重新思考命令行

> 原文：<https://levelup.gitconnected.com/rethinking-the-command-line-24540990ed2a>

*命令行界面是最古老的，但也是最常用的人机界面之一，用户在这里输入带参数的文本命令以获得想要的结果。开发人员通常为软件应用程序提供命令行选项以及图形用户界面。一些编程语言提供了标准库来帮助程序员解析和处理命令行参数。然而，这些年来 CLI 和库都在发展，标准化了构建命令的方式，并增加了新的功能，如使用颜色、自动完成、自动更正等。然而还有很大的改进空间，特别是在创建多语言界面、获取命令进度、进一步使用颜色等方面。*

*这是多语言应用程序开发系列的第 1 部分。本系列的第 2 部分是关于如何以透明的方式* [*构建多语言命令行*](https://medium.com/@jsamwrites/building-a-multilingual-command-line-85813adaf1e2) *。*

# 介绍

![](img/aa398a12ae9f67ecfd04cb37a104348a.png)

[法比安·格罗斯](https://unsplash.com/@grohsfabian?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

考虑到具有图形用户界面的人机界面的最近进步、鼠标、操纵杆等新设备的可用性、对语音命令的支持、理解动作手势的新技术的最近到来，很容易说命令行界面(CLI)已经失去了它的相关性和魅力。CLI 可以被认为是最古老的人机界面之一，在这里，你输入一些文本命令，计算机就会给出一个结果。但是它仍然被开发人员和管理员普遍使用，尽管许多命令都有其对等的图形界面。CLI 不是来这里的。现代编程语言继续提供库来标准化命令创建，并帮助开发人员解析命令行参数。

看看 Unix/Linux 命令行工具，我们注意到这些命令中的大多数都是与某个关键功能相关的较长命令的缩写。为该功能选择的单词通常来自英语。举个例子，Unix/Linux 命令`ls`是 *list* 的缩写，它的主要功能是列出给定目录下的文件。命令可以带参数，并且它们可以有相关的更短和更长的版本。

或者

列出目录的内容和附加信息:文件大小。参数的较短版本(通常)以一个连字符`-`开始，相关的较长版本以两个连字符`--`开始。同样，在大多数情况下，参数通常来自英语中相应的功能。

命令行或终端命令(以下简称为命令)需要记忆，如果您是 CLI 的普通用户，这并不困难。然而，新手的学习曲线是很难的，尤其是非英语背景的用户。然而，有手册，甚至可以从命令行访问，如 `$ man`或 `$ info` 。然而，CLI 要求记忆命令及其参数。即使这样，这个初始曲线也不会阻止新用户，许多最新的编程和开发工具都有命令行选项。

在这个语音命令和动作手势盛行的时代，CLI 还有用吗？这取决于你问的是谁？然而，问题仍然存在:不管新用户日常使用的语言是什么，命令行能对他们更友好吗？能不能做得更人性化，自然语言友好？我们真的需要记住所有这些命令和它们的参数吗？多年来，我们看到了使 CLI 人性化的趋势；自动完成和自动更正已经进入了几个 shells。搜索引擎提高了基于文本的应用程序的门槛。 `$ man -k 'search term'`可能提示几个与搜索词相关的命令。仍然需要大量的人力来为给定的任务找到正确的命令集和相关的参数。所以 CLI 还是需要大量的增强。在 GUI 图标和命令的争论中，有人说一个图像可以说千言万语，但不能轻易代替单词(或命令)。

# 了解命令行参数

熟悉 C 编程语言的人可能听说过`getopt()`，这是一个用于解析命令行参数的库函数，有几个类似`getopt_long()`的变体。像 Python 这样的编程语言也有类似名称的函数。一个命令可能有几个选项，如上面看到的`-s`或`--size`。每个选项都有一个较长或较短的版本，较短的版本通常是较长版本的第一个字符。选项的较短版本以`-`开始，而较长版本以`--`开始。一个选项可能需要也可能不需要额外的参数，如果没有参数被传递，它可能会假设一些由开发人员提供的默认值。

然而，像 Python 的`argparse()`这样的新方法进一步增强了对命令行参数的处理，比如一个选项可以接受一个或多个参数，能够指定参数的预期数据类型(例如，浮点、整数等)。)，更容易处理帮助消息(例如，`ls --help`用于不同的选项)。另一个有趣的特性是支持子命令，比如`git`有几个子命令`push, pull, commit`等等，每个子命令都有自己的一组共享相同名称的选项(有长有短)。`argparse()`还增加了分组参数的可能性(默认情况下，可选参数和位置参数是分开的)，并且只允许一个组中有一个选项。组允许查看按关键功能分隔的可用选项，而不是按字母顺序查看所有可用选项。

这些函数倾向于统一命令行参数的处理方式。使用这样的库函数对用户和应用程序开发人员都很有用。然而，命令行仍然可以进一步增强。

# 增强命令行

一个重要的问题是如何进一步**减少新用户对命令行的学习曲线**，即一种超越需要记忆命令及其各种选项的方式。但是文本界面不仅仅局限于命令行。一些桌面应用程序和网络服务有文本界面。搜索引擎并不期望从最终用户那里得到很多专业知识；用户键入他们的搜索查询来找到想要的信息。在过去的几年里，图形用户界面的趋势越来越明显，一些作品已经展示了命令行驱动的系统如何转化为 web 应用程序、二进制组件、GUI。同样，反过来也是可能的，GUI 工具的进步可以作为增强命令行的灵感。我们是否需要进一步的标准化或使用更自然的语言是一个悬而未决的问题。

虽然有些 shells 在用户输入命令出错时提供建议，并让他们搜索一些最近输入的命令，但这种用户体验确实无法与遵循数据驱动或使用驱动方法的 web 服务上的个性化用户体验相比。令人难过的是，shells 很少利用用户命令历史来向用户推荐命令或提供个性化的命令行体验。

像 MySQL、MariaDB 这样的命令有自己的内部 **REPL(读取-评估-打印循环)**，允许它们为用户交互提供另一种语言(如 SQL)。通常，这种语言是声明性的，并且倾向于自然语言(通常是英语)友好。这种方法允许命令行工具的开发人员超越使用标准的命令行解析器，灵活地创建用户友好的*命令行选项。其中一些 REPL 工具是多用户和多配置文件的。因此，为了自动完成、参数推荐(建议)等的目的，也可以利用 REPL 用户命令历史来个性化用户体验。类似于搜索引擎中看到的功能。尽管如此，这种声明性语言的流行已经产生了一组新的管理工具，如`osquery`，它们重用 SQL 的语法来查询系统资源。因此`osquery`让用户执行系统使用分析，将进程、用户、内存作为关系表，而不是像`ps, top`等那样记忆命令。*

集成搜索和过滤选项、没有固定词序的命令、同义词的使用、对自然语言短语的支持(今天、两周后等等。)对于下一代命令行体验至关重要。几年前，Mozilla 的实验项目 Ubiquity 展示了一个文本界面，可以预览和执行各种用户操作。它演示了用户如何输入动作动词，如翻译、电子邮件和参数。用户不需要记住动作动词，因为同义词也可以使用。动作动词被配置为关联的服务，用户可以选择在实际执行动作之前进行预览。另一个有趣的特性是对多语言的支持。这种通过支持其他人类语言中的动作动词来支持国际化的做法，帮助非英语用户以与英语用户非常相似的方式访问各种 web 服务。动作动词不必在开头，如`email "emailid" "message"`。它也可以在句尾，这取决于语言。此外，助记符或缩写也可以用于这些动词。基于语言的界面与基于图标的界面一样有前途，甚至更好，为最终用户提供了更多灵活的选择。

fish(友好的交互式 shell)是一个经常被谈论的 shell，因为它的用户体验。一个显著的特点是它(默认)使用**颜色**，这有助于用户轻松区分文件、目录甚至错误信息。应用程序发生了很大变化。在单台机器上运行应用程序的日子已经一去不复返了。当前这一代工具管理多个分布式机器进行存储或并行计算，并且通常是多线程的。熟悉从多线程进程打印日志消息的人都知道，区分来自不同线程或进程的消息是很困难的(除非在开头添加一些有区别的短语)；一个主要原因是处理流程输出/错误消息的遗留双色方法。颜色需要完全整合到 CLI 中。

另一个有趣的特性是能够跟踪命令的**进度。像`progress, pv`等命令。仅限于某些命令或使用数据管道时(即使用`|`)。用户与命令(尤其是长时间运行的命令)的交互允许用户根据命令的当前状态进一步使用涉及一个或多个命令的复杂工具。此外，管道可以得到增强，以支持多个数据管道(目前由类似`parallel`的命令支持)。的确，管道的使用可以进一步用于推荐和创建*命令混搭*。**

# 结论

随着人机界面越来越多，人们很容易质疑命令行界面的相关性。然而，它仍然被开发人员和管理员普遍使用，一些新的工具具有命令行界面和图形用户界面。一些研究人员已经提出了增强命令行的方法，本文研究了其中的一些建议。命令行界面需要更加用户友好，基于过去的命令历史提供个性化的用户体验，增加对自然语言的额外支持并利用颜色。

**注意:**这篇文章最初是作为一个提议写给即将到来的 Linux 发行会议的。

# 参考

1.  [命令行界面](https://en.wikipedia.org/wiki/Command-line_interface)
2.  [arg parse——命令行选项、参数和子命令的解析器](https://docs.python.org/3/library/argparse.html)
3.  [getopt —命令行选项的 C 风格解析器](https://docs.python.org/3/library/getopt.html)
4.  [专题:语言命令行](https://dl.acm.org/citation.cfm?doid=1330526.1330535)，阿萨·拉斯金,《互动——走向创新模式》,第 15 卷第 1 期，2008 年 1 月+2 月，第 19–22 页
5.  [将命令行驱动系统转换为 Web 应用](http://www.sciencedirect.com/science/article/pii/S0169755297000494)，Constantinos Phanouriou，Marc Abrams，计算机网络和 ISDN 系统，第 29 卷，第 8-13 期，1997 年 9 月，第 1497-1505 页，第六届国际万维网会议论文
6.  [将命令行应用程序转换成二进制组件](http://onlinelibrary.wiley.com/doi/10.1002/spe.659/abstract)，Peter M. Maurer，软件:实践与经验，第 35 卷，第 8 期，2005 年 7 月 10 日，第 787–797 页
7.  下一个 UI 突破:命令行，Don Norman,《交互——商业领导和 UX 经理》,第 14 卷第 3 期，2007 年 5 月+6 月，第 44–45 页
8.  无处不在:设计多语言自然语言界面，SIGIR 多语言世界信息访问研讨会，2009 年 7 月 23 日
9.  [读取-评估-打印循环](https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop)
10.  [外壳(计算)](https://en.wikipedia.org/wiki/Shell_(computing))
11.  [友好的交互外壳](https://en.wikipedia.org/wiki/Friendly_interactive_shell)
12.  [GNU 并行](https://www.gnu.org/software/parallel/)

*最初发布于*[*https://John Samuel . info*](https://johnsamuel.info/en/programming/command-line-arguments.html)*。*