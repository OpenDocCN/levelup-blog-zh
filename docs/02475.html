<html>
<head>
<title>Create more extensible React components with the “as” prop pattern</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用“as”prop模式创建更多可扩展的React组件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-more-extensible-react-components-with-the-as-prop-pattern-b79bcbcf4024?source=collection_archive---------1-----------------------#2020-03-16">https://levelup.gitconnected.com/create-more-extensible-react-components-with-the-as-prop-pattern-b79bcbcf4024?source=collection_archive---------1-----------------------#2020-03-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4987cfb4eb289f033dc8c30b565c5cea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F2Qq_gHN1L1EsSqDkzNYEQ.jpeg"/></div></div></figure><p id="035a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">React组件将HTML语义烘焙到它们的实现中。以这个<code class="fe kw kx ky kz b">Title</code>组件为例:</p><figure class="la lb lc ld gt jr"><div class="bz fp l di"><div class="le lf l"/></div></figure><p id="72e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">虽然这不是一个特别有趣或健壮的组件，但它将有助于说明一个有用的概念。该组件创建一个HTML <code class="fe kw kx ky kz b">h1</code>元素，将一个<code class="fe kw kx ky kz b">className</code>属性集应用到<code class="fe kw kx ky kz b">"title"</code>来对其进行样式化，然后允许组件的消费者传递他们想要使用<code class="fe kw kx ky kz b">children</code>属性呈现的任何内容。在这种情况下，语义是表示为<code class="fe kw kx ky kz b">h1</code>元素的标题级别1。</p><p id="7bb5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该组件可以这样使用:</p><figure class="la lb lc ld gt jr"><div class="bz fp l di"><div class="le lf l"/></div></figure><p id="6f8a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以预期<code class="fe kw kx ky kz b">Demo</code>会产生如下效果:</p><figure class="la lb lc ld gt jr"><div class="bz fp l di"><div class="le lf l"/></div></figure><p id="54e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">基于此，我们可以清楚地看到<code class="fe kw kx ky kz b">Demo</code>创建了一个<code class="fe kw kx ky kz b">section</code>元素，而<code class="fe kw kx ky kz b">Title</code>创建了一个<code class="fe kw kx ky kz b">h1</code>。对于这个简单但不自然的用例来说，这很好。</p><p id="abc4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我们需要我们的<code class="fe kw kx ky kz b">Title</code>组件来渲染其他东西时，我们该怎么做？我们可能需要它呈现为一个<code class="fe kw kx ky kz b">h2</code>或者一个普通的<code class="fe kw kx ky kz b">div</code>。当针对SEO进行优化或提高页面的可访问性时，我们通常需要这种灵活性(方便地改善其中一个往往会改善另一个)。不管我们的理由是什么，我们该如何处理？创建一个<code class="fe kw kx ky kz b">TitleH2</code>或<code class="fe kw kx ky kz b">TitleDiv</code>除了用不同的元素替换包装器HTML元素之外什么也不做，这似乎一点也不明智。正如您现在可能已经猜到的，这就是可以利用<code class="fe kw kx ky kz b">as</code>道具产生巨大效果的地方。</p><h1 id="0e90" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated"><code class="fe kw kx ky kz b">as</code>道具</h1><p id="9dbf" class="pw-post-body-paragraph jy jz iq ka b kb me kd ke kf mf kh ki kj mg kl km kn mh kp kq kr mi kt ku kv ij bi translated">下面是使用<code class="fe kw kx ky kz b">as</code>道具的样子:</p><figure class="la lb lc ld gt jr"><div class="bz fp l di"><div class="le lf l"/></div></figure><p id="5dfa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe kw kx ky kz b">as</code> prop正在指示组件(<code class="fe kw kx ky kz b">Title</code>)将其包装器元素<em class="mj">呈现为</em>别的东西。如果我们不指定一个<code class="fe kw kx ky kz b">as</code>属性，组件将使用它内部定义的默认值。</p><p id="e82a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是它在代码中的工作方式:</p><figure class="la lb lc ld gt jr"><div class="bz fp l di"><div class="le lf l"/></div></figure><p id="f7f1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们来分析一下这里发生了什么。在<code class="fe kw kx ky kz b">Title</code>函数中，我们正在析构<code class="fe kw kx ky kz b">props</code>的两个属性:<code class="fe kw kx ky kz b">as</code>和<code class="fe kw kx ky kz b">children</code>。除了我们现在使用析构变量代替了<code class="fe kw kx ky kz b">props.children</code>之外，使用<code class="fe kw kx ky kz b">children</code>并没有真正改变什么。我们还对<code class="fe kw kx ky kz b">as</code>属性进行了析构，然后将其别名化为一个名为<code class="fe kw kx ky kz b">Component</code>的新常量。由于有了<code class="fe kw kx ky kz b">defaultProps</code>，如果<code class="fe kw kx ky kz b">Title</code>的消费者没有为<code class="fe kw kx ky kz b">as</code>指定一个值，<code class="fe kw kx ky kz b">Component</code>将评估为<code class="fe kw kx ky kz b">'h1'</code>。在这种情况下，<code class="fe kw kx ky kz b">Title</code>将呈现:</p><figure class="la lb lc ld gt jr"><div class="bz fp l di"><div class="le lf l"/></div></figure><p id="dd0b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然而，如果<code class="fe kw kx ky kz b">Title</code>的用户确实指定了一个<code class="fe kw kx ky kz b">as</code>值，那么变成了被渲染的<em class="mj">。</em></p><figure class="la lb lc ld gt jr"><div class="bz fp l di"><div class="le lf l"/></div></figure><h1 id="4c00" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">为什么把<code class="fe kw kx ky kz b">as</code>道具别名为<code class="fe kw kx ky kz b">Component</code>？</h1><p id="6594" class="pw-post-body-paragraph jy jz iq ka b kb me kd ke kf mf kh ki kj mg kl km kn mh kp kq kr mi kt ku kv ij bi translated">类似于“as”这个名字，<code class="fe kw kx ky kz b">Component</code>这个名字有些武断。重要的一点是，当你在React元素的上下文中返回prop(例如<code class="fe kw kx ky kz b">&lt;Component /&gt;</code>)时，它必须大写。这只是一个反应规则。小写组件名是为DOM节点保留的，来自react-dom库。</p><h1 id="f03b" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">如同自定义组件一样使用</h1><p id="4062" class="pw-post-body-paragraph jy jz iq ka b kb me kd ke kf mf kh ki kj mg kl km kn mh kp kq kr mi kt ku kv ij bi translated">关于<code class="fe kw kx ky kz b">as</code> prop的一件很酷的事情是它不局限于HTML元素。您可以传入自定义的React组件，而无需任何额外的工作。让我们假设我们有一个名为<code class="fe kw kx ky kz b">SpecialButton</code>的组件，我们希望它看起来像一个<code class="fe kw kx ky kz b">Title</code>但呈现为一个按钮。</p><figure class="la lb lc ld gt jr"><div class="bz fp l di"><div class="le lf l"/></div></figure><p id="43e4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果我们分析一下这是怎么回事，它看起来像这样:</p><figure class="la lb lc ld gt jr"><div class="bz fp l di"><div class="le lf l"/></div></figure><p id="5131" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意，为了让<code class="fe kw kx ky kz b">Title</code>组件样式(即<code class="fe kw kx ky kz b">className="title"</code>)正确地前进到最后的<code class="fe kw kx ky kz b">&lt;button /&gt;</code>，我们需要在<code class="fe kw kx ky kz b">SpecialButton</code>组件上析构<code class="fe kw kx ky kz b">className</code>，然后将道具前进到最后的按钮。</p><p id="3db5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">和<code class="fe kw kx ky kz b">SpecialButton</code>中的情况一样，我发现沿着<code class="fe kw kx ky kz b">className</code>道具转发是一种有用的通用最佳实践。我计划在后续的帖子中对此进行扩展，我将举例说明一种更健壮的处理<code class="fe kw kx ky kz b">className</code>和其他你可能想要转发的道具的方法。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="9cdc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就是它的工作原理。<code class="fe kw kx ky kz b">as</code>道具没什么特别的。它只是一个和其他一样的道具。</p></div></div>    
</body>
</html>