<html>
<head>
<title>Choosing The Right Android Layout</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">选择正确的Android布局</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/choosing-the-right-android-layout-8c35fe476b35?source=collection_archive---------4-----------------------#2020-06-01">https://levelup.gitconnected.com/choosing-the-right-android-layout-8c35fe476b35?source=collection_archive---------4-----------------------#2020-06-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f0d0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">三个用例来改进您选择正确布局的方法。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bff7e3a793f1c6bbac4103ab6177b598.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KfcF7k1U8FpV_MOQIfx4lQ@2x.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">安杰洛·费拉的封面</figcaption></figure><p id="358e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为我们的应用程序UI选择正确的布局并不总是容易的。一个错误的<em class="lu">根布局</em>会导致一个复杂的层次结构，从而导致渲染阶段的低性能。</p><p id="6070" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">许多开发人员，尤其是初学者，经常会做出错误的选择，因为他们不知道不同布局的特点。</p><p id="31b2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这篇文章中，我想用一个小练习来挑战你。我们将一起分析3个屏幕，并想象实现它们的最佳方式。</p><p id="de65" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于每个屏幕，我会给你看一个简单的描述样机。你将提出你的假设，然后我将描述我认为的最佳解决方案。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1438" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">注册</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/253760deb258b7f52b84bb0d7e6e3b28.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*L7DU7O707QFujF4fRxDG8g.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">登录屏幕</figcaption></figure><p id="29bb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们从一个简单的登录屏幕开始。一个<em class="lu"> ImageView </em>，两个用于用户名和密码的<em class="lu"> EditText </em>，以及一个提交<em class="lu">按钮</em>。</p><p id="5a78" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你会为这个<em class="lu">活动</em>选择哪种布局？花点时间思考，做出你的猜测，然后继续阅读。</p><p id="1bf5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">几个选择。首先是用一个<a class="ae mv" href="https://developer.android.com/reference/android/widget/LinearLayout" rel="noopener ugc nofollow" target="_blank"><em class="lu">linear layout</em></a><em class="lu"/>搭配<code class="fe mw mx my mz b">android:layout_gravity="center”</code>。通过为视图2、3和4设置一个<code class="fe mw mx my mz b">margin_top</code>,我们将很容易得到想要的结果。</p><p id="59ce" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第二个选项是<a class="ae mv" href="https://developer.android.com/guide/topics/ui/layout/relative" rel="noopener ugc nofollow" target="_blank"> <em class="lu">相对布局</em> </a>。视图1和4可以分别在其父视图的顶部和底部对齐。视图2和视图3应该居中，一个在另一个下面。</p><p id="83cc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用<a class="ae mv" href="https://developer.android.com/training/constraint-layout" rel="noopener ugc nofollow" target="_blank"><em class="lu">constraint layout</em></a>可以做同样的事情，在顶部(1)、底部(4)和中心(2和3)锚定视图。</p><p id="6156" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这最后两个假设经过一些调整将会导致预期的结果。然而，在我看来，最简单、最干净的解决方案是第一种，LinearLayout。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9c4c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">目录</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/8b3a341eaa1b2300ef9e79dfbf18c813.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*vavc9GDN44v-8DYpz6zixg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">目录屏幕</figcaption></figure><p id="c6b8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">目录的典型例子。几类元素，每一类都有一个可水平滚动的列表。很像网飞和亚马逊的应用程序。</p><p id="3e6c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你会为这个活动选择哪种布局？像以前一样，花一点时间思考，做出你的假设，然后继续阅读。</p><p id="bb5a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先要注意的是垂直滚动条。这就指引我们选择了一个<a class="ae mv" href="https://developer.android.com/reference/android/support/v4/widget/NestedScrollView.html" rel="noopener ugc nofollow" target="_blank"><em class="lu">nested scroll view</em></a><em class="lu"/>作为根布局。由于NestedScrollView只能有一个直接子视图，我们需要选择使用哪个视图组。</p><p id="69aa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">子视图在一列中垂直组织，所以最好的选择是不同类别之间留有空白的LinearLayout。</p><p id="7681" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用RelativeLayout或CosntrainLayout也可以获得相同的结果，但这一次，LinearLayout似乎是最自然、最简洁的解决方案。</p><p id="ab2b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">至于列表，有必要考虑在大多数情况下元素是动态加载的。因此，正确的选择应该是使用<a class="ae mv" href="https://developer.android.com/reference/android/support/v7/widget/RecyclerView.html" rel="noopener ugc nofollow" target="_blank"><em class="lu">recycler view</em></a><em class="lu"/>和<a class="ae mv" href="https://developer.android.com/reference/kotlin/androidx/recyclerview/widget/LinearLayoutManager" rel="noopener ugc nofollow" target="_blank"><em class="lu">LinearLayoutManager</em></a><em class="lu"/>来水平显示元素。</p><p id="77d2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">RecyclerView是旧的<em class="lu"> ListView </em>的优化版本，默认情况下是可滚动的，所以结果正是我们想要的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9139" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">饲料</h1><div class="kj kk kl km gt ab cb"><figure class="na kn nb nc nd ne nf paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/cbff0fc3a29d44264ad0d36f9934145e.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*AZ7Z3GQC3o-lvHSF1L5j6Q.png"/></div></figure><figure class="na kn nb nc nd ne nf paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/f3943633a88462a1a0faa5789e22b648.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*PP5wd9SmcK-WXWR9vWc58w.png"/></div></figure><figure class="na kn nb nc nd ne nf paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/ee96c517ef2e1fc85479d24cc8b44a95.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*QHztFsqE3nkTl0gOpPuesA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk ng di nh ni translated">馈送选项卡1 —馈送选项卡1，向下滚动—馈送选项卡2，向下滚动</figcaption></figure></div><p id="b0d4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">想象这是一个类似LinkedIn的社交网络的主页。</p><p id="d674" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">顶部有一个<em class="lu">工具栏</em>，两个选项卡，底部有一个浮动按钮。在第一个选项卡中，一列中有一个元素列表。在第二个示例中，元素分为两列。请注意<em class="lu">滚动行为</em>:当您向下滚动以给主要内容留出空间时，工具栏会消失，而两个选项卡仍然固定在顶部。</p><p id="9416" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">花点时间想一想你会在这个活动中使用什么样的布局，然后继续读下去。</p><p id="ba52" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">可以指导我们的细节当然是工具栏的滚动行为。这表明文档的根可能是什么，一个<a class="ae mv" href="https://developer.android.com/reference/android/support/design/widget/CoordinatorLayout.html" rel="noopener ugc nofollow" target="_blank"><em class="lu">coordinator layout</em></a>。CoordinatorLayout允许您指定与其子视图的行为和交互。</p><p id="7fcf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这种情况下，我会选择一个带有工具栏的<a class="ae mv" href="https://developer.android.com/reference/com/google/android/material/appbar/AppBarLayout" rel="noopener ugc nofollow" target="_blank"><em class="lu">appbar layout</em></a><em class="lu"/>和一个<a class="ae mv" href="https://developer.android.com/reference/com/google/android/material/tabs/TabLayout" rel="noopener ugc nofollow" target="_blank"><em class="lu">tablayut</em></a>。为了获得想要的行为，你只需要为工具栏设置<code class="fe mw mx my mz b">app:layout_scrollFlags="scroll|enterAlways"</code>。这样，CoordinatorLayout将负责在向下滚动时隐藏工具栏，在向上滚动时显示工具栏。</p><p id="07be" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于主要内容，我会使用一个<a class="ae mv" href="https://developer.android.com/reference/kotlin/androidx/viewpager/widget/ViewPager" rel="noopener ugc nofollow" target="_blank"><em class="lu">viewparager</em></a><em class="lu"/>与两个<a class="ae mv" href="https://developer.android.com/guide/components/fragments" rel="noopener ugc nofollow" target="_blank"> <em class="lu">片段</em> </a>。第一个片段将有一个带有LinearLayoutManager的RecyclerView。对于第二个片段的RecyclerView，最好的选择是一个有两列的<a class="ae mv" href="https://developer.android.com/reference/kotlin/androidx/recyclerview/widget/GridLayoutManager" rel="noopener ugc nofollow" target="_blank"><em class="lu">GridLayoutManager</em></a><em class="lu"/>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1682" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">外卖食品</h1><ul class=""><li id="5bc6" class="nj nk it la b lb nl le nm lh nn ll no lp np lt nq nr ns nt bi translated"><em class="lu"> LinearLayout </em>非常适合在单行或单列中显示视图。如果需要指定空间分布，可以将<code class="fe mw mx my mz b">layout_weights</code>添加到子视图中。</li><li id="0f0f" class="nj nk it la b lb nu le nv lh nw ll nx lp ny lt nq nr ns nt bi translated">如果需要相对于兄弟视图或父视图定位视图，使用<em class="lu">相对布局</em>，或者更好的<em class="lu">约束布局</em>。</li><li id="8230" class="nj nk it la b lb nu le nv lh nw ll nx lp ny lt nq nr ns nt bi translated"><em class="lu"> CoordinatorLayout </em>允许您指定与其子视图的行为和交互。</li><li id="b8ed" class="nj nk it la b lb nu le nv lh nw ll nx lp ny lt nq nr ns nt bi translated">使用<em class="lu"> RecyclerView </em>创建动态内容列表，注意布局管理器的选择。</li><li id="216b" class="nj nk it la b lb nu le nv lh nw ll nx lp ny lt nq nr ns nt bi translated">尽量保持你的布局层次结构的扁平化。<em class="lu">你的层级越平，布局阶段完成的时间就越少</em>。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="457d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你会如何实现这些布局？你还想分析其他人吗？请在评论中让我知道<code class="fe mw mx my mz b">android:below</code>。</p><p id="610f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您喜欢这篇文章，您可能也会喜欢:</p><div class="nz oa gp gr ob oc"><a href="https://medium.com/better-programming/7-lessons-i-learned-in-two-years-of-android-development-5d06ee744082" rel="noopener follow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">我在两年的Android开发过程中学到的7个教训</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">我希望在开始Android开发时就知道的事情</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">medium.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq ks oc"/></div></div></a></div></div></div>    
</body>
</html>