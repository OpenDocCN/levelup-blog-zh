<html>
<head>
<title>How to Build Your React UI with Reactstrap</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Reactstrap构建React UI</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-build-your-react-ui-with-reactstrap-cc461880ff6?source=collection_archive---------2-----------------------#2019-10-19">https://levelup.gitconnected.com/how-to-build-your-react-ui-with-reactstrap-cc461880ff6?source=collection_archive---------2-----------------------#2019-10-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/d7df7f32997a04e8f5ded4055532cf71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y5EfmtSPRf34XoJHcmKVOw.png"/></div></div></figure><p id="0775" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">现在在</strong><a class="ae kz" href="http://jauyeung.net/subscribe/" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">http://jauyeung.net/subscribe/</strong></a><strong class="kd iu">订阅我的邮件列表。</strong></p><p id="50ad" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">在推特上关注我</strong><a class="ae kz" href="https://twitter.com/AuMayeung" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">https://twitter.com/AuMayeung</strong></a></p><p id="1105" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">React是一个用于构建交互式前端web应用的简单库。它有一个简单的API，完全专注于视图层。React的核心是组件架构，它允许开发者构建模块化和直观的web应用。Bootstrap是Twitter做的UI框架，提供默认的CSS和UI元素。通过创建与引导UI元素相匹配的组件，React对其进行了调整。Reactstrap是提供Boostrap风格的React组件的库之一。</p><p id="364e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这个故事中，我们将使用Reactstrap以及Formik和Yup构建一个地址簿应用程序，该应用程序无缝集成以构建表单。首先，我们使用Create React App来搭建应用程序。我们运行<code class="fe la lb lc ld b">npx create-react-app address-book</code>来创建包含初始文件的app项目文件夹。</p><p id="781e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">该应用程序将有一个主页来显示联系人，并让我们打开一个模式来添加联系人。将会有一个表格显示所有的联系人以及编辑和删除按钮。这些联系人将被存储在一个中央Redux存储中，以便于访问。React路由器将用于路由。联系人将保存在后端，并通过使用<a class="ae kz" href="https://github.com/typicode/json-server" rel="noopener ugc nofollow" target="_blank"> JSON服务器包</a>的API进行访问。</p><p id="aa15" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了安装我们上面提到的库，我们运行<code class="fe la lb lc ld b">npm i axios bootstrap formik reactstrap react-redux react-router-dom yup</code>。Axios是我们用来向后端发出HTTP请求的HTTP客户端。<code class="fe la lb lc ld b">react-router-dom</code>是React Router for web最新版本的包名。</p><p id="3584" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们已经安装了所有的库，我们可以开始构建应用程序了。除非另有说明，否则所有文件都将保存在<code class="fe la lb lc ld b">src</code>文件夹中。首先，我们在Redux商店工作。我们在<code class="fe la lb lc ld b">src</code>文件夹中创建一个名为<code class="fe la lb lc ld b">actionCreator.js</code>的文件，并添加以下内容:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="6fe5" class="lm ln it ld b gy lo lp l lq lr">import { SET_CONTACTS } from './actions';</span><span id="c70b" class="lm ln it ld b gy ls lp l lq lr">const setContacts = (contacts) =&gt; {<br/>    return {<br/>        type: SET_CONTACTS,<br/>        payload: contacts<br/>    }<br/>};</span><span id="421d" class="lm ln it ld b gy ls lp l lq lr">export { setContacts };</span></pre><p id="b191" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是用于在商店中存储联系人的动作创建器。</p><p id="ff9c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们创建了另一个名为<code class="fe la lb lc ld b">actions.js</code>的文件，并添加了用于分派动作的常量:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="10b0" class="lm ln it ld b gy lo lp l lq lr">const SET_CONTACTS = 'SET_CONTACTS';</span><span id="4fb3" class="lm ln it ld b gy ls lp l lq lr">export { SET_CONTACTS };</span></pre><p id="49c4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<code class="fe la lb lc ld b">App.js</code>中，我们用以下内容替换现有内容:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="b6ee" class="lm ln it ld b gy lo lp l lq lr">import React, { useState } from "react";<br/>import { Router, Route, Link } from "react-router-dom";<br/>import HomePage from "./HomePage";<br/>import { createBrowserHistory as createHistory } from "history";<br/>import "./App.css";<br/>import {<br/>  Collapse,<br/>  Navbar,<br/>  NavbarToggler,<br/>  NavbarBrand,<br/>  Nav,<br/>  NavItem,<br/>  NavLink,<br/>} from "reactstrap";<br/>const history = createHistory();</span><span id="f6b0" class="lm ln it ld b gy ls lp l lq lr">function App() {<br/>  const [isOpen, setIsOpen] = useState(false);<br/>  const toggle = () =&gt; {<br/>    setIsOpen(!isOpen);<br/>  };<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Router history={history}&gt;<br/>        &lt;Navbar color="light" light expand="md"&gt;<br/>          &lt;NavbarBrand href="/"&gt;Address Book&lt;/NavbarBrand&gt;<br/>          &lt;NavbarToggler onClick={toggle} /&gt;<br/>          &lt;Collapse isOpen={isOpen} navbar&gt;<br/>            &lt;Nav className="ml-auto" navbar&gt;<br/>              &lt;NavItem&gt;<br/>                &lt;NavLink href="/"&gt;Home&lt;/NavLink&gt;<br/>              &lt;/NavItem&gt;<br/>            &lt;/Nav&gt;<br/>          &lt;/Collapse&gt;<br/>        &lt;/Navbar&gt;<br/>        &lt;Route path="/" exact component={HomePage} /&gt;<br/>      &lt;/Router&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="3f47" class="lm ln it ld b gy ls lp l lq lr">export default App;</span></pre><p id="4173" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们使用Reactstrap提供的<code class="fe la lb lc ld b">Navbar</code>组件来添加顶栏。它与<code class="fe la lb lc ld b">NavToggler</code>组件和<code class="fe la lb lc ld b">Collapse</code>组件一起响应。</p><p id="f288" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<code class="fe la lb lc ld b">App.css</code>中，我们将现有代码替换为:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="ff85" class="lm ln it ld b gy lo lp l lq lr">.App {<br/>  text-align: center;<br/>}</span></pre><p id="ae38" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这会使文本居中。</p><p id="d15d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，我们需要创建一个Formik表单将使用的输入组件，因为Reactstrap没有内置的form Formik表单处理程序支持。在<code class="fe la lb lc ld b">src</code>文件夹中，添加一个<code class="fe la lb lc ld b">input.js</code>并添加以下内容:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="af86" class="lm ln it ld b gy lo lp l lq lr">import React from "react";<br/>import { Input, FormFeedback } from "reactstrap";</span><span id="e5aa" class="lm ln it ld b gy ls lp l lq lr">const input = ({ field, form: { touched, errors }, ...props }) =&gt; {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;Input<br/>        invalid={!!(touched[field.name] &amp;&amp; errors[field.name])}<br/>        {...field}<br/>        {...props}<br/>        value={field.value || ""}<br/>      /&gt;<br/>      {touched[field.name] &amp;&amp; errors[field.name] &amp;&amp; (<br/>        &lt;FormFeedback&gt;{errors[field.name]}&lt;/FormFeedback&gt;<br/>      )}<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="2aed" class="lm ln it ld b gy ls lp l lq lr">export default input;</span></pre><p id="c1b6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们在这里使用Reactstrap中的<code class="fe la lb lc ld b">Input</code>组件接受输入，使用<code class="fe la lb lc ld b">FormFeedback</code>组件显示表单验证错误。<code class="fe la lb lc ld b">touched</code>和<code class="fe la lb lc ld b">errors</code>道具将从Formik <code class="fe la lb lc ld b">Field</code>组件传入。</p><p id="6a00" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，我们需要一个国家列表来填充联系人表单的国家下拉列表。在<code class="fe la lb lc ld b">src</code>文件夹中创建一个名为<code class="fe la lb lc ld b">export.js</code>的文件，并添加:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="1983" class="lm ln it ld b gy lo lp l lq lr">export const COUNTRIES = [<br/>  "Afghanistan",<br/>  "Albania",<br/>  "Algeria",<br/>  "Andorra",<br/>  "Angola",<br/>  "Anguilla",<br/>  "Antigua &amp;amp; Barbuda",<br/>  "Argentina",<br/>  "Armenia",<br/>  "Aruba",<br/>  "Australia",<br/>  "Austria",<br/>  "Azerbaijan",<br/>  "Bahamas",<br/>  "Bahrain",<br/>  "Bangladesh",<br/>  "Barbados",<br/>  "Belarus",<br/>  "Belgium",<br/>  "Belize",<br/>  "Benin",<br/>  "Bermuda",<br/>  "Bhutan",<br/>  "Bolivia",<br/>  "Bosnia &amp;amp; Herzegovina",<br/>  "Botswana",<br/>  "Brazil",<br/>  "British Virgin Islands",<br/>  "Brunei",<br/>  "Bulgaria",<br/>  "Burkina Faso",<br/>  "Burundi",<br/>  "Cambodia",<br/>  "Cameroon",<br/>  "Canada",<br/>  "Cape Verde",<br/>  "Cayman Islands",<br/>  "Chad",<br/>  "Chile",<br/>  "China",<br/>  "Colombia",<br/>  "Congo",<br/>  "Cook Islands",<br/>  "Costa Rica",<br/>  "Cote D Ivoire",<br/>  "Croatia",<br/>  "Cruise Ship",<br/>  "Cuba",<br/>  "Cyprus",<br/>  "Czech Republic",<br/>  "Denmark",<br/>  "Djibouti",<br/>  "Dominica",<br/>  "Dominican Republic",<br/>  "Ecuador",<br/>  "Egypt",<br/>  "El Salvador",<br/>  "Equatorial Guinea",<br/>  "Estonia",<br/>  "Ethiopia",<br/>  "Falkland Islands",<br/>  "Faroe Islands",<br/>  "Fiji",<br/>  "Finland",<br/>  "France",<br/>  "French Polynesia",<br/>  "French West Indies",<br/>  "Gabon",<br/>  "Gambia",<br/>  "Georgia",<br/>  "Germany",<br/>  "Ghana",<br/>  "Gibraltar",<br/>  "Greece",<br/>  "Greenland",<br/>  "Grenada",<br/>  "Guam",<br/>  "Guatemala",<br/>  "Guernsey",<br/>  "Guinea",<br/>  "Guinea Bissau",<br/>  "Guyana",<br/>  "Haiti",<br/>  "Honduras",<br/>  "Hong Kong",<br/>  "Hungary",<br/>  "Iceland",<br/>  "India",<br/>  "Indonesia",<br/>  "Iran",<br/>  "Iraq",<br/>  "Ireland",<br/>  "Isle of Man",<br/>  "Israel",<br/>  "Italy",<br/>  "Jamaica",<br/>  "Japan",<br/>  "Jersey",<br/>  "Jordan",<br/>  "Kazakhstan",<br/>  "Kenya",<br/>  "Kuwait",<br/>  "Kyrgyz Republic",<br/>  "Laos",<br/>  "Latvia",<br/>  "Lebanon",<br/>  "Lesotho",<br/>  "Liberia",<br/>  "Libya",<br/>  "Liechtenstein",<br/>  "Lithuania",<br/>  "Luxembourg",<br/>  "Macau",<br/>  "Macedonia",<br/>  "Madagascar",<br/>  "Malawi",<br/>  "Malaysia",<br/>  "Maldives",<br/>  "Mali",<br/>  "Malta",<br/>  "Mauritania",<br/>  "Mauritius",<br/>  "Mexico",<br/>  "Moldova",<br/>  "Monaco",<br/>  "Mongolia",<br/>  "Montenegro",<br/>  "Montserrat",<br/>  "Morocco",<br/>  "Mozambique",<br/>  "Namibia",<br/>  "Nepal",<br/>  "Netherlands",<br/>  "Netherlands Antilles",<br/>  "New Caledonia",<br/>  "New Zealand",<br/>  "Nicaragua",<br/>  "Niger",<br/>  "Nigeria",<br/>  "Norway",<br/>  "Oman",<br/>  "Pakistan",<br/>  "Palestine",<br/>  "Panama",<br/>  "Papua New Guinea",<br/>  "Paraguay",<br/>  "Peru",<br/>  "Philippines",<br/>  "Poland",<br/>  "Portugal",<br/>  "Puerto Rico",<br/>  "Qatar",<br/>  "Reunion",<br/>  "Romania",<br/>  "Russia",<br/>  "Rwanda",<br/>  "Saint Pierre &amp;amp; Miquelon",<br/>  "Samoa",<br/>  "San Marino",<br/>  "Satellite",<br/>  "Saudi Arabia",<br/>  "Senegal",<br/>  "Serbia",<br/>  "Seychelles",<br/>  "Sierra Leone",<br/>  "Singapore",<br/>  "Slovakia",<br/>  "Slovenia",<br/>  "South Africa",<br/>  "South Korea",<br/>  "Spain",<br/>  "Sri Lanka",<br/>  "St Kitts &amp;amp; Nevis",<br/>  "St Lucia",<br/>  "St Vincent",<br/>  "St. Lucia",<br/>  "Sudan",<br/>  "Suriname",<br/>  "Swaziland",<br/>  "Sweden",<br/>  "Switzerland",<br/>  "Syria",<br/>  "Taiwan",<br/>  "Tajikistan",<br/>  "Tanzania",<br/>  "Thailand",<br/>  "Timor L'Este",<br/>  "Togo",<br/>  "Tonga",<br/>  "Trinidad &amp;amp; Tobago",<br/>  "Tunisia",<br/>  "Turkey",<br/>  "Turkmenistan",<br/>  "Turks &amp;amp; Caicos",<br/>  "Uganda",<br/>  "Ukraine",<br/>  "United Arab Emirates",<br/>  "United Kingdom",<br/>  "United States",<br/>  "United States Minor Outlying Islands",<br/>  "Uruguay",<br/>  "Uzbekistan",<br/>  "Venezuela",<br/>  "Vietnam",<br/>  "Virgin Islands (US)",<br/>  "Yemen",<br/>  "Zambia",<br/>  "Zimbabwe",<br/>];</span></pre><p id="1a47" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">该文件将由<code class="fe la lb lc ld b">ContactForm</code>组件导入。</p><p id="b2f9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们有了创建联系表单的所有部分。创建一个名为<code class="fe la lb lc ld b">ContactForm.js</code>的文件，并添加以下代码:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="81ea" class="lm ln it ld b gy lo lp l lq lr">import React from "react";<br/>import { Formik, Field } from "formik";<br/>import * as yup from "yup";<br/>import { COUNTRIES } from "./exports";<br/>import PropTypes from "prop-types";<br/>import { addContact, editContact, getContacts } from "./requests";<br/>import { connect } from "react-redux";<br/>import { setContacts } from "./actionCreators";<br/>import {<br/>  Button,<br/>  Form,<br/>  FormGroup,<br/>  Label,<br/>  Input,<br/>  FormFeedback,<br/>} from "reactstrap";<br/>import input from "./input";</span><span id="44f2" class="lm ln it ld b gy ls lp l lq lr">const schema = yup.object({<br/>  firstName: yup.string().required("First name is required"),<br/>  lastName: yup.string().required("Last name is required"),<br/>  address: yup.string().required("Address is required"),<br/>  city: yup.string().required("City is required"),<br/>  region: yup.string().required("Region is required"),<br/>  country: yup<br/>    .string()<br/>    .required("Country is required")<br/>    .default("Afghanistan"),<br/>  postalCode: yup<br/>    .string()<br/>    .when("country", {<br/>      is: "United States",<br/>      then: yup<br/>        .string()<br/>        .matches(/^[0-9]{5}(?:-[0-9]{4})?$/, "Invalid postal code"),<br/>    })<br/>    .when("country", {<br/>      is: "Canada",<br/>      then: yup<br/>        .string()<br/>        .matches(<br/>          /^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/,<br/>          "Invalid postal code"<br/>        ),<br/>    })<br/>    .required(),<br/>  phone: yup<br/>    .string()<br/>    .when("country", {<br/>      is: country =&gt; ["United States", "Canada"].includes(country),<br/>      then: yup<br/>        .string()<br/>        .matches(/^[2-9]\d{2}[2-9]\d{2}\d{4}$/, "Invalid phone nunber"),<br/>    })<br/>    .required(),<br/>  email: yup<br/>    .string()<br/>    .email("Invalid email")<br/>    .required("Email is required"),<br/>  age: yup<br/>    .number()<br/>    .required("Age is required")<br/>    .min(0, "Minimum age is 0")<br/>    .max(200, "Maximum age is 200"),<br/>});</span><span id="f34a" class="lm ln it ld b gy ls lp l lq lr">function ContactForm({<br/>  edit,<br/>  onSave,<br/>  setContacts,<br/>  contact,<br/>  onCancelAdd,<br/>  onCancelEdit,<br/>}) {<br/>  const handleSubmit = async evt =&gt; {<br/>    const isValid = await schema.validate(evt);<br/>    if (!isValid) {<br/>      return;<br/>    }<br/>    if (!edit) {<br/>      await addContact(evt);<br/>    } else {<br/>      await editContact(evt);<br/>    }<br/>    const response = await getContacts();<br/>    setContacts(response.data);<br/>    onSave();<br/>  };</span><span id="adb8" class="lm ln it ld b gy ls lp l lq lr">  return (<br/>    &lt;div className="form"&gt;<br/>      &lt;Formik<br/>        validationSchema={schema}<br/>        onSubmit={handleSubmit}<br/>        initialValues={contact || {}}<br/>      &gt;<br/>        {({<br/>          handleSubmit,<br/>          handleChange,<br/>          handleBlur,<br/>          values,<br/>          touched,<br/>          isInvalid,<br/>          errors,<br/>        }) =&gt; (<br/>          &lt;Form noValidate onSubmit={handleSubmit}&gt;<br/>            &lt;FormGroup&gt;<br/>              &lt;Label&gt;First name&lt;/Label&gt;<br/>              &lt;Field name="firstName" type="text" component={input} /&gt;<br/>            &lt;/FormGroup&gt;<br/>            &lt;FormGroup&gt;<br/>              &lt;Label&gt;Last name&lt;/Label&gt;<br/>              &lt;Field name="lastName" type="text" component={input} /&gt;<br/>            &lt;/FormGroup&gt;<br/>            &lt;FormGroup&gt;<br/>              &lt;Label&gt;Address&lt;/Label&gt;<br/>              &lt;Field name="address" type="text" component={input} /&gt;<br/>            &lt;/FormGroup&gt;<br/>            &lt;FormGroup&gt;<br/>              &lt;Label&gt;City&lt;/Label&gt;<br/>              &lt;Field name="city" type="text" component={input} /&gt;<br/>            &lt;/FormGroup&gt;<br/>            &lt;FormGroup&gt;<br/>              &lt;Label&gt;Region&lt;/Label&gt;<br/>              &lt;Field name="region" type="text" component={input} /&gt;<br/>            &lt;/FormGroup&gt;</span><span id="c571" class="lm ln it ld b gy ls lp l lq lr">&lt;FormGroup&gt;<br/>              &lt;Label&gt;Country&lt;/Label&gt;<br/>              &lt;Field<br/>                name="country"<br/>                component={({ field, form: { touched, errors }, ...props }) =&gt; {<br/>                  return (<br/>                    &lt;div&gt;<br/>                      &lt;Input<br/>                        invalid={!!(touched[field.name] &amp;&amp; errors[field.name])}<br/>                        {...field}<br/>                        {...props}<br/>                        type="select"<br/>                        value={field.value || ""}<br/>                      &gt;<br/>                        {COUNTRIES.map(c =&gt; (<br/>                          &lt;option key={c} value={c}&gt;<br/>                            {c}<br/>                          &lt;/option&gt;<br/>                        ))}<br/>                      &lt;/Input&gt;<br/>                      {touched[field.name] &amp;&amp; errors[field.name] &amp;&amp; (<br/>                        &lt;FormFeedback&gt;{errors[field.name]}&lt;/FormFeedback&gt;<br/>                      )}<br/>                    &lt;/div&gt;<br/>                  );<br/>                }}<br/>              /&gt;<br/>              &lt;FormFeedback type="invalid"&gt;{errors.country}&lt;/FormFeedback&gt;<br/>            &lt;/FormGroup&gt;</span><span id="8c33" class="lm ln it ld b gy ls lp l lq lr">&lt;FormGroup&gt;<br/>              &lt;Label&gt;Postal Code&lt;/Label&gt;<br/>              &lt;Field name="postalCode" type="text" component={input} /&gt;<br/>            &lt;/FormGroup&gt;</span><span id="787b" class="lm ln it ld b gy ls lp l lq lr">&lt;FormGroup&gt;<br/>              &lt;Label&gt;Phone&lt;/Label&gt;<br/>              &lt;Field name="phone" type="text" component={input} /&gt;<br/>            &lt;/FormGroup&gt;</span><span id="076c" class="lm ln it ld b gy ls lp l lq lr">&lt;FormGroup&gt;<br/>              &lt;Label&gt;Email&lt;/Label&gt;<br/>              &lt;Field name="email" type="text" component={input} /&gt;<br/>            &lt;/FormGroup&gt;</span><span id="b940" class="lm ln it ld b gy ls lp l lq lr">&lt;FormGroup&gt;<br/>              &lt;Label&gt;Age&lt;/Label&gt;<br/>              &lt;Field name="age" type="text" component={input} /&gt;<br/>            &lt;/FormGroup&gt;<br/>            &lt;Button type="submit" style={{ marginRight: "10px" }}&gt;<br/>              Save<br/>            &lt;/Button&gt;<br/>            &lt;Button type="button" onClick={edit ? onCancelEdit : onCancelAdd}&gt;<br/>              Cancel<br/>            &lt;/Button&gt;<br/>          &lt;/Form&gt;<br/>        )}<br/>      &lt;/Formik&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="32b9" class="lm ln it ld b gy ls lp l lq lr">ContactForm.propTypes = {<br/>  edit: PropTypes.bool,<br/>  onSave: PropTypes.func,<br/>  onCancelAdd: PropTypes.func,<br/>  onCancelEdit: PropTypes.func,<br/>  contact: PropTypes.object,<br/>};</span><span id="679d" class="lm ln it ld b gy ls lp l lq lr">const mapStateToProps = state =&gt; {<br/>  return {<br/>    contacts: state.contacts,<br/>  };<br/>};</span><span id="3fb2" class="lm ln it ld b gy ls lp l lq lr">const mapDispatchToProps = dispatch =&gt; ({<br/>  setContacts: contacts =&gt; dispatch(setContacts(contacts)),<br/>});</span><span id="7733" class="lm ln it ld b gy ls lp l lq lr">export default connect(<br/>  mapStateToProps,<br/>  mapDispatchToProps<br/>)(ContactForm);</span></pre><p id="f7ec" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们使用Formik的<code class="fe la lb lc ld b">Field</code>组件，它让我们处理输入值的变化，并在输入时设置它们。在每个<code class="fe la lb lc ld b">Field</code>组件的<code class="fe la lb lc ld b">component</code>属性中，我们传递我们在<code class="fe la lb lc ld b">input.js</code>中添加的Reactstrap输入，或者对于国家下拉列表，我们传递一个类型为<code class="fe la lb lc ld b">select</code>的<code class="fe la lb lc ld b">Input</code>组件，其中国家选项作为选择输入的子元素。我们传入了输入验证模式，即使用Yup库创建的<code class="fe la lb lc ld b">schema</code>对象，这样我们就可以在Formik表单中使用它。表单验证将由验证模式自动处理，因为我们使用Formik的表单字段作为输入。</p><p id="ab38" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">handleSubmit</code>函数获取存储在<code class="fe la lb lc ld b">evt</code>对象中的表单数据，如果数据有效就保存它，然后在Redux store中设置联系人。并且调用从<code class="fe la lb lc ld b">HomePage</code>组件传来的<code class="fe la lb lc ld b">onSave</code>函数，以便我们通知<code class="fe la lb lc ld b">HomePage</code>组件保存联系人已经完成，以便它刷新页面。</p><p id="d695" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，我们创建主页。在<code class="fe la lb lc ld b">src</code>文件夹中创建一个名为<code class="fe la lb lc ld b">HomePage.js</code>的文件，并添加:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="1adf" class="lm ln it ld b gy lo lp l lq lr">import React from "react";<br/>import { useState, useEffect } from "react";<br/>import {<br/>  Button,<br/>  Modal,<br/>  ModalHeader,<br/>  ModalBody,<br/>  ButtonToolbar,<br/>  Table,<br/>} from "reactstrap";</span><span id="fc45" class="lm ln it ld b gy ls lp l lq lr">import ContactForm from "./ContactForm";<br/>import "./HomePage.css";<br/>import { connect } from "react-redux";<br/>import { getContacts, deleteContact } from "./requests";</span><span id="4969" class="lm ln it ld b gy ls lp l lq lr">function HomePage() {<br/>  const [openAddModal, setOpenAddModal] = useState(false);<br/>  const [openEditModal, setOpenEditModal] = useState(false);<br/>  const [initialized, setInitialized] = useState(false);<br/>  const [selectedContact, setSelectedContact] = useState({});<br/>  const [contacts, setContacts] = useState([]);</span><span id="79dd" class="lm ln it ld b gy ls lp l lq lr">  const openModal = () =&gt; {<br/>    setOpenAddModal(true);<br/>  };</span><span id="01be" class="lm ln it ld b gy ls lp l lq lr">  const closeModal = () =&gt; {<br/>    setOpenAddModal(false);<br/>    setOpenEditModal(false);<br/>    getData();<br/>  };</span><span id="dc85" class="lm ln it ld b gy ls lp l lq lr">const cancelAddModal = () =&gt; {<br/>    setOpenAddModal(false);<br/>  };</span><span id="6758" class="lm ln it ld b gy ls lp l lq lr">  const editContact = contact =&gt; {<br/>    setSelectedContact(contact);<br/>    setOpenEditModal(true);<br/>  };</span><span id="2990" class="lm ln it ld b gy ls lp l lq lr">  const cancelEditModal = () =&gt; {<br/>    setOpenEditModal(false);<br/>  };</span><span id="b2f8" class="lm ln it ld b gy ls lp l lq lr">  const getData = async () =&gt; {<br/>    const response = await getContacts();<br/>    setContacts(response.data);<br/>    setInitialized(true);<br/>  };</span><span id="89a1" class="lm ln it ld b gy ls lp l lq lr">  const deleteSelectedContact = async id =&gt; {<br/>    await deleteContact(id);<br/>    getData();<br/>  };</span><span id="5908" class="lm ln it ld b gy ls lp l lq lr">  useEffect(() =&gt; {<br/>    if (!initialized) {<br/>      getData();<br/>    }<br/>  });</span><span id="8ed0" class="lm ln it ld b gy ls lp l lq lr">  return (<br/>    &lt;div className="home-page"&gt;<br/>      &lt;h1&gt;Contacts&lt;/h1&gt;<br/>      &lt;Modal isOpen={openAddModal}&gt;<br/>        &lt;ModalHeader&gt;Add Contact&lt;/ModalHeader&gt;<br/>        &lt;ModalBody&gt;<br/>          &lt;ContactForm<br/>            edit={false}<br/>            onSave={closeModal.bind(this)}<br/>            onCancelAdd={cancelAddModal}<br/>          /&gt;<br/>        &lt;/ModalBody&gt;<br/>      &lt;/Modal&gt;</span><span id="4bf3" class="lm ln it ld b gy ls lp l lq lr">&lt;Modal isOpen={openEditModal}&gt;<br/>        &lt;ModalHeader&gt;Edit Contact&lt;/ModalHeader&gt;<br/>        &lt;ModalBody&gt;<br/>          &lt;ContactForm<br/>            edit={true}<br/>            onSave={closeModal.bind(this)}<br/>            contact={selectedContact}<br/>            onCancelEdit={cancelEditModal}<br/>          /&gt;<br/>        &lt;/ModalBody&gt;<br/>      &lt;/Modal&gt;<br/>      &lt;ButtonToolbar&gt;<br/>        &lt;Button variant="outline-primary" onClick={openModal}&gt;<br/>          Add Contact<br/>        &lt;/Button&gt;<br/>      &lt;/ButtonToolbar&gt;<br/>      &lt;br /&gt;<br/>      &lt;Table striped bordered hover&gt;<br/>        &lt;thead&gt;<br/>          &lt;tr&gt;<br/>            &lt;th&gt;First Name&lt;/th&gt;<br/>            &lt;th&gt;Last Name&lt;/th&gt;<br/>            &lt;th&gt;Address&lt;/th&gt;<br/>            &lt;th&gt;City&lt;/th&gt;<br/>            &lt;th&gt;Country&lt;/th&gt;<br/>            &lt;th&gt;Postal Code&lt;/th&gt;<br/>            &lt;th&gt;Phone&lt;/th&gt;<br/>            &lt;th&gt;Email&lt;/th&gt;<br/>            &lt;th&gt;Age&lt;/th&gt;<br/>            &lt;th&gt;Edit&lt;/th&gt;<br/>            &lt;th&gt;Delete&lt;/th&gt;<br/>          &lt;/tr&gt;<br/>        &lt;/thead&gt;<br/>        &lt;tbody&gt;<br/>          {contacts.map(c =&gt; (<br/>            &lt;tr key={c.id}&gt;<br/>              &lt;td&gt;{c.firstName}&lt;/td&gt;<br/>              &lt;td&gt;{c.lastName}&lt;/td&gt;<br/>              &lt;td&gt;{c.address}&lt;/td&gt;<br/>              &lt;td&gt;{c.city}&lt;/td&gt;<br/>              &lt;td&gt;{c.country}&lt;/td&gt;<br/>              &lt;td&gt;{c.postalCode}&lt;/td&gt;<br/>              &lt;td&gt;{c.phone}&lt;/td&gt;<br/>              &lt;td&gt;{c.email}&lt;/td&gt;<br/>              &lt;td&gt;{c.age}&lt;/td&gt;<br/>              &lt;td&gt;<br/>                &lt;Button<br/>                  variant="outline-primary"<br/>                  onClick={editContact.bind(this, c)}<br/>                &gt;<br/>                  Edit<br/>                &lt;/Button&gt;<br/>              &lt;/td&gt;<br/>              &lt;td&gt;<br/>                &lt;Button<br/>                  variant="outline-primary"<br/>                  onClick={deleteSelectedContact.bind(this, c.id)}<br/>                &gt;<br/>                  Delete<br/>                &lt;/Button&gt;<br/>              &lt;/td&gt;<br/>            &lt;/tr&gt;<br/>          ))}<br/>        &lt;/tbody&gt;<br/>      &lt;/Table&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="892e" class="lm ln it ld b gy ls lp l lq lr">const mapStateToProps = state =&gt; {<br/>  return {<br/>    contacts: state.contacts,<br/>  };<br/>};</span><span id="0738" class="lm ln it ld b gy ls lp l lq lr">export default connect(<br/>  mapStateToProps,<br/>  null<br/>)(HomePage);</span></pre><p id="85ab" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这个页面上，我们有一个列出联系人数据的表格，我们添加了添加、编辑和删除联系人的按钮。为了切换Reactstrap模式，我们分别设置了<code class="fe la lb lc ld b">openAddModal</code>和<code class="fe la lb lc ld b">openEditModal</code>标志。</p><p id="8be7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">表格和按钮由Reactstrap提供。</p><p id="91ae" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们使用<code class="fe la lb lc ld b">useEffect</code>的回调函数在初始加载期间获取数据，然后在数据加载后通过调用<code class="fe la lb lc ld b">getData</code>函数将<code class="fe la lb lc ld b">initalized</code>标志设置为<code class="fe la lb lc ld b">true</code>以阻止其再次获取数据。</p><p id="e307" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们将<code class="fe la lb lc ld b">closeModal</code>函数传递给<code class="fe la lb lc ld b">onSave</code> prop，这样它将在<code class="fe la lb lc ld b">ContactForm</code>组件中的数据保存后关闭模态。我们用<code class="fe la lb lc ld b">ContactForm</code>的<code class="fe la lb lc ld b">onCancelEdit</code>道具传入相同的函数。</p><p id="9211" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<code class="fe la lb lc ld b">index.js</code>中，我们将现有代码替换为:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="1ea9" class="lm ln it ld b gy lo lp l lq lr">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import './index.css';<br/>import App from './App';<br/>import * as serviceWorker from './serviceWorker';<br/>import { contactsReducer } from './reducers';<br/>import { Provider } from 'react-redux'<br/>import { createStore, combineReducers } from 'redux'</span><span id="c489" class="lm ln it ld b gy ls lp l lq lr">const addressBookApp = combineReducers({<br/>    contacts: contactsReducer,<br/>})</span><span id="c4ea" class="lm ln it ld b gy ls lp l lq lr">const store = createStore(addressBookApp)</span><span id="40dd" class="lm ln it ld b gy ls lp l lq lr">ReactDOM.render(<br/>    &lt;Provider store={store}&gt;<br/>        &lt;App /&gt;<br/>    &lt;/Provider&gt;<br/>    , document.getElementById('root'));</span><span id="aa3b" class="lm ln it ld b gy ls lp l lq lr">// If you want your app to work offline and load faster, you can change<br/>// unregister() to register() below. Note this comes with some pitfalls.<br/>// Learn more about service workers: <a class="ae kz" href="https://bit.ly/CRA-PWA" rel="noopener ugc nofollow" target="_blank">https://bit.ly/CRA-PWA</a><br/>serviceWorker.unregister();</span></pre><p id="d232" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们合并了reducers并创建了store，然后用<code class="fe la lb lc ld b">Provider</code>组件将它注入到我们的应用程序中，这样我们就可以在任何地方使用它。</p><p id="e5fe" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，我们为Redux存储添加减速器。在<code class="fe la lb lc ld b">src</code>文件夹中添加一个名为<code class="fe la lb lc ld b">reducers.js</code>的文件，并添加:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="54d8" class="lm ln it ld b gy lo lp l lq lr">import { SET_CONTACTS } from './actions';</span><span id="f23a" class="lm ln it ld b gy ls lp l lq lr">function contactsReducer(state = {}, action) {<br/>    switch (action.type) {<br/>        case SET_CONTACTS:<br/>            state = JSON.parse(JSON.stringify(action.payload));<br/>            return state;<br/>        default:<br/>            return state<br/>    }<br/>}</span><span id="8b25" class="lm ln it ld b gy ls lp l lq lr">export { contactsReducer };</span></pre><p id="ed63" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是我们存储联系人的缩减器，我们通过调用组件中的<code class="fe la lb lc ld b">mapDispatchToProps</code>函数提供的属性来发送这些联系人。</p><p id="64a6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后我们创建一个名为<code class="fe la lb lc ld b">requests.js</code>的文件，并添加:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="8271" class="lm ln it ld b gy lo lp l lq lr">const APIURL = '<a class="ae kz" href="http://localhost:3000'" rel="noopener ugc nofollow" target="_blank">http://localhost:3000'</a>;<br/>const axios = require('axios');</span><span id="10a5" class="lm ln it ld b gy ls lp l lq lr">export const getContacts = () =&gt; axios.get(`${APIURL}/contacts`);</span><span id="12e3" class="lm ln it ld b gy ls lp l lq lr">export const addContact = (data) =&gt; axios.post(`${APIURL}/contacts`, data);</span><span id="f435" class="lm ln it ld b gy ls lp l lq lr">export const editContact = (data) =&gt; axios.put(`${APIURL}/contacts/${data.id}`, data);</span><span id="ab97" class="lm ln it ld b gy ls lp l lq lr">export const deleteContact = (id) =&gt; axios.delete(`${APIURL}/contacts/${id}`);</span></pre><p id="df2a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这些是向后端发出HTTP请求以保存和删除联系人的函数。</p><p id="e364" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，我们可以通过在Windows上运行<code class="fe la lb lc ld b">set PORT=3001 &amp;&amp; react-scripts start</code>或在Linux上运行<code class="fe la lb lc ld b">PORT=3006 react-scripts start</code>来运行应用程序。</p><p id="e4b4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了启动后端，我们通过运行<code class="fe la lb lc ld b">npm i json-server</code>来安装<code class="fe la lb lc ld b">json-server</code>包。然后转到我们的项目文件夹并运行:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="d3e4" class="lm ln it ld b gy lo lp l lq lr">json-server --watch db.json</span></pre><p id="f6b5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<code class="fe la lb lc ld b">db.json</code>中，将文本改为:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="94b3" class="lm ln it ld b gy lo lp l lq lr">{<br/>  "contacts": [<br/>  ]<br/>}</span></pre><p id="6e0c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这使得<code class="fe la lb lc ld b">requests.js</code>中定义的<code class="fe la lb lc ld b">contacts</code>端点可用。</p><p id="2f49" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你完了！我们现在已经构建了以下内容:</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lt"><img src="../Images/19ed9d869e342406c8b0bc2f120e36f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uw7-VdhawzxSO7b53A8RQg.png"/></div></div></figure><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/d7df7f32997a04e8f5ded4055532cf71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y5EfmtSPRf34XoJHcmKVOw.png"/></div></div></figure><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lt"><img src="../Images/d8d0c7eadd4b279059ed10676e300244.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lp2AgT9wE8rekpz-LJ1KaQ.png"/></div></div></figure></div></div>    
</body>
</html>