<html>
<head>
<title>TypeScript — Excess Property Checks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TypeScript —超额属性检查</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/typescript-excess-property-checks-6ffe5584f450?source=collection_archive---------6-----------------------#2020-09-26">https://levelup.gitconnected.com/typescript-excess-property-checks-6ffe5584f450?source=collection_archive---------6-----------------------#2020-09-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="da68" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解TypeScript的核心原则之一——多余属性检查。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/76224a6c8f97c515c48ca5760a9cbb7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OKaw_EAk5oEU6VNmxHY2ow.png"/></div></div></figure><p id="6829" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">TypeScript的核心原则之一是它是一个<em class="ln">结构类型系统</em>。<em class="ln"> <br/> </em>简而言之，只要你提供一个具有所需属性的类型，TypeScript就可以拥有额外的属性，让我们来看一个例子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="5bcc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是当我们试图直接给对象赋值时:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="ee8e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们得到以下(有点令人惊讶的)错误:</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="5880" class="lv lw iq lr b gy lx ly l lz ma">Type ‘{ x: number; y: number; meaningOfLife: number; }’ is not assignable to type ‘Point’.<br/>Object literal may only specify known properties, and ‘meaningOfLife’ does not exist in type ‘Point’.</span></pre><p id="1ebb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当TypeScript在赋值中遇到object literal或者作为参数传递给函数时，它会触发一个叫做<strong class="kt ir">超额属性检查的动作。</strong></p><p id="133c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">与结构类型相反，它检查对象是否具有<strong class="kt ir">精确的</strong>属性。如上所述，作为参数传递给函数的对象文字也是如此:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="cd6d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一个有趣的行为是使用<strong class="kt ir"> <em class="ln">“弱类型”</em> </strong> <em class="ln"> </em> —所有字段都标记为<em class="ln">可选</em>的类型。在这种情况下，即使在分配中间变量时，也会执行超额属性检查操作:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lo lp l"/></div></figure><h2 id="012f" class="lv lw iq bd mb mc md dn me mf mg dp mh la mi mj mk le ml mm mn li mo mp mq mr bi translated">变通办法</h2><p id="a8c4" class="pw-post-body-paragraph kr ks iq kt b ku ms jr kw kx mt ju kz la mu lc ld le mv lg lh li mw lk ll lm ij bi translated">我们可以，<strong class="kt ir">虽然不推荐</strong>，解决多余的属性检查。<br/>第一种方法是使用<em class="ln">中间变量，</em>这种方法有效，因为你首先将对象文字赋值给一个非类型变量，然后第二次赋值不进行额外的属性检查:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="2c28" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第二种方法是使用类型断言:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lo lp l"/></div></figure></div></div>    
</body>
</html>