<html>
<head>
<title>Kubernetes is Deprecating Docker, but Should We Panic?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes是在贬低Docker，但我们应该恐慌吗？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/kubernetes-is-deprecating-docker-but-should-we-panic-bd50d3d4815?source=collection_archive---------9-----------------------#2020-12-10">https://levelup.gitconnected.com/kubernetes-is-deprecating-docker-but-should-we-panic-bd50d3d4815?source=collection_archive---------9-----------------------#2020-12-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dcac" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Docker一开始就应该在里面吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f4844787f4ba1b613fa29426f7f087c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LpofnCw46zZIuJ-ex0FILg.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@kelvin1987?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Kelvin Ang </a>在<a class="ae ky" href="https://unsplash.com/s/photos/server?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="9e8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在发行说明中提到Kubernetes放弃对Docker的支持引起了很多人的关注。</p><blockquote class="lv lw lx"><p id="de86" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">kubelet中的Docker支持现在已被否决，并将在未来的版本中删除。kubelet使用了一个名为“dockershim”的模块，它实现了对Docker的CRI支持，并且在Kubernetes社区中发现了维护问题。我们鼓励您评估迁移到一个容器运行时，它是CRI的一个成熟的实现</p></blockquote><p id="dbf4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Kubernetes SIG安全联席主席Ian Coldwater的一条<a class="ae ky" href="https://twitter.com/IanColdwater/status/1334149283449352200" rel="noopener ugc nofollow" target="_blank">推文</a>也于事无补。</p><blockquote class="lv lw lx"><p id="6410" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">Docker支持在Kubernetes中已被否决。你需要注意这一点，并为此做好计划。这将打破你的集群</p></blockquote><p id="2f89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于那些一直忙于生产集装箱而没有关注Kubernetes发展的人来说，这一举动可能会令人震惊。但是这真的没什么大不了的。</p><p id="faa5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，在我们深入研究这一变化之前，让我们先来看看Docker在高层做了些什么:</p><ol class=""><li id="9e89" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">Docker可以构建容器映像</li><li id="f950" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated">Docker可以从容器注册表中推和拉</li><li id="9142" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated">Docker可以创建容器进程</li><li id="a476" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated">Docker是一个容器运行时。</li></ol><p id="7125" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">变化是Kubernetes在1.20版之后不再把Docker作为<strong class="lb iu">容器运行时</strong>，这是kubernetes.io <a class="ae ky" href="https://kubernetes.io/blog/2020/12/02/dont-panic-kubernetes-and-docker/" rel="noopener ugc nofollow" target="_blank">帖子</a>中解释的。因此，您仍然可以构建容器，在注册表中使用它们，以及推和拉。所有发生的事情就是Docker作为一个底层运行时被弃用，而支持CRI运行时。</p><p id="0906" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了这些知识，让我们更详细地了解Kubernetes是如何使用Docker作为底层运行时的，以及这个特殊的变化。</p><p id="cd9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Kubernetes是一个编排工具，它将许多不同的计算资源(如虚拟/物理机器)组合在一起，并使其看起来像一个巨大的计算资源，供您的应用程序运行并与其他人共享。在当前的架构中，Docker作为一个容器运行时，仅用于在实际的主机中运行那些应用程序。</p><p id="8c8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Docker是该运行时的一个流行选择，但是Docker并没有被设计成嵌入到Kubernetes中。Docker为程序员提供了许多用户增强功能，但是Kubernetes不需要这些。Kubernetes需要的部分就是'<em class="ly"> containerd </em>'。</p><p id="728d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，Docker不符合CRI，即<a class="ae ky" href="https://kubernetes.io/blog/2016/12/container-runtime-interface-cri-in-kubernetes/" rel="noopener ugc nofollow" target="_blank">容器运行时接口</a>。正因为如此，Kubernetes使用了一种叫做“<em class="ly"> dockershim </em>”的桥接服务。维护dockershim已经成为Kubernetes维护者的沉重负担。Dockershim一直是一个临时的解决方案。创建CRI标准就是为了减轻这种负担，并允许不同容器运行时之间的平稳互操作性。Docker本身目前没有实现CRI，因此出现了问题。</p><p id="4273" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总结一下，Kubernetes反对Docker的两个主要原因是:</p><ol class=""><li id="bbbb" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">dockershim的管理开销。</li><li id="0ac9" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated">码头工人对中国国际广播电台不满意</li></ol><h1 id="7485" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">那么，影响是什么呢？</h1><p id="04cb" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">对于Kubernetes的最终用户来说，这一举动应该不会有太大的影响，因为开发人员解释说“<em class="ly"> Docker生成的映像将继续在所有运行时在您的集群中工作，因为它们总是有</em>”。</p><p id="7a41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这并不意味着Docker的死亡，也不意味着你不能，或者不应该再使用Docker作为开发工具。Docker仍然是构建容器的有用工具，运行<code class="fe nn no np nq b">docker build</code>得到的图像仍然可以在Kubernetes集群中运行。</p><p id="679c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以没什么好担心的。无论如何，你都有足够的时间来解决这个问题。在1.20中唯一改变的是如果使用Docker作为运行时，在kubelet启动时打印一个警告日志。</p><p id="7698" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有关更多详细信息，请参考这些文档:</p><div class="nr ns gp gr nt nu"><a href="https://kubernetes.io/blog/2020/12/02/dont-panic-kubernetes-and-docker/" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">不要惊慌:Kubernetes和Docker</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">作者:豪尔赫卡斯特罗，达菲库利，凯特科斯格罗维，贾斯汀加里森，诺亚坎特罗威茨，鲍勃基伦，雷伊莱亚诺，丹“流行”…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">kubernetes.io</p></div></div><div class="od l"><div class="oe l of og oh od oi ks nu"/></div></div></a></div><div class="nr ns gp gr nt nu"><a href="https://kubernetes.io/blog/2020/12/02/dockershim-faq/" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">Dockershim弃用常见问题</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">本文档介绍了一些常见问题，这些问题与Dockershim作为……</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">kubernetes.io</p></div></div><div class="od l"><div class="oj l of og oh od oi ks nu"/></div></div></a></div></div></div>    
</body>
</html>