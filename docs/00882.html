<html>
<head>
<title>GraphQL in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android中的GraphQL</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/graphql-in-android-563c9cea705e?source=collection_archive---------2-----------------------#2019-09-03">https://levelup.gitconnected.com/graphql-in-android-563c9cea705e?source=collection_archive---------2-----------------------#2019-09-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="7543" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">介绍</h1><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/f86b6a7950839db9c5ad68d4be191fae.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*9JjYKrdxDFn7fBGY.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">GraphQL</figcaption></figure><p id="0d4f" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们编写的大多数Android应用程序都遵循这个循环:从远程服务器获取/发送数据，处理数据，将数据保存在本地，然后以有意义的方式显示数据。</p><p id="fa54" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">如果您一直通过API从远程服务器请求数据，那么您很可能使用的是REST API。然而，鉴于GraphQL API相对于REST API的优势——最佳的数据提取，没有数据提取过量或不足——它正越来越多地被采用。</p><p id="ac29" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在本文中，您将了解在您的Android应用程序中开始利用GraphQL的能力所需的基础知识。</p><h1 id="8352" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">GraphQL是什么？</h1><p id="41d5" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">GraphQL是一种用于API的查询语言。作为API的查询语言，它定义了如何对API进行查询的规范。与其他查询语言类似，它有不同的操作类型，这些操作类型定义了可以执行的查询类型。</p><h1 id="b34b" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">询问</h1><p id="2c8d" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">GraphQL中的客户端请求可以是查询，也可以是变异。如果请求从服务器获取数据，那么它就是查询。这类似于REST中的HTTP GET请求。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi me"><img src="../Images/28af03e178d5f429c2068de100486ac7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tg5xjb1ukbrJ-8Rc.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">示例查询</figcaption></figure><p id="02b5" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">示例查询包含以下重要内容:</p><ol class=""><li id="682b" class="mf mg iq ld b le lf li lj lm mh lq mi lu mj ly mk ml mm mn bi translated">定义请求是查询的操作类型。</li><li id="bb4f" class="mf mg iq ld b le mo li mp lm mq lq mr lu ms ly mk ml mm mn bi translated">便于跟踪查询的操作名称。</li><li id="de1f" class="mf mg iq ld b le mo li mp lm mq lq mr lu ms ly mk ml mm mn bi translated">字段:GraphQL查询归结为选择所需的字段。与使用REST API相比，这是一个优势，因为可以只获取所需的字段。因此，不存在数据的过度提取。在本例中，查询将只获取名字、姓氏和电子邮件。</li></ol><h1 id="b336" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">变化</h1><p id="8c4b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">另一方面，如果客户端请求在API上发布数据、更新或删除数据，那么它就是一个变异。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mt"><img src="../Images/419e71280c301bc335725de1e3825339.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5Z5TOkaFQL-z70ye.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">样本突变</figcaption></figure><p id="9239" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在这个例子中，要更新的字段作为参数传递给了mutation。此外，变异还会返回新的字段值。</p><h1 id="da63" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">自变量和变量</h1><p id="016c" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">有时候只需要查询或改变特定的数据。一个例子是当我们对查询具有特定ID的用户数据感兴趣时。GraphQL使这变得更容易，并通过允许查询和变异接收参数来避免像REST API中那样多次调用API。</p><p id="6688" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">参数是通过说明其名称和类型来指定的。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi me"><img src="../Images/8d3c123c043a07d59b55b29d0d29575a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*x-Q8q7Q9W85vRM0i.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">带参数的样本变异</figcaption></figure><p id="3574" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">请注意，如果参数类型的末尾有感叹号，则该参数不可为空。在本例中，参数firstName的类型为String，并且不可为null。</p><h1 id="95fb" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">指令</h1><p id="a263" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这些用于在条件为真时包含或跳过GraphQL查询中的特定字段。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mu"><img src="../Images/744c2ab38702a6a1f5ad2e4bd52f0f23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yJNlA2HjP1CdPak2.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">样本指令</figcaption></figure><p id="35ef" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在本例中，如果$skipLastName为true，查询将跳过提取lastName。此外，如果$withEmail为真，它将只包括电子邮件字段。</p><h1 id="9490" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">碎片</h1><p id="fa47" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这些是可重复使用的单元。假设您有一个应用程序，您请求客户和员工数据，并在两者中重复联系数据。GraphQL片段通过使联系人数据成为一个片段，使得重用它成为可能。</p><p id="343f" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">片段的定义是以“fragment”关键字开始，后跟片段名称，如下所示:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/0730a8dddb4231f2be5fba9c19b9373f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ehJv62NWDebfNRP0.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">样本片段</figcaption></figure><p id="aaaa" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">然后如下所示使用该片段:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mw"><img src="../Images/5db2791b1bf5cd38da0e7d70be18d983.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wdOJt0oSpCeUVLGA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">使用片段的示例查询</figcaption></figure><h1 id="ad1f" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">(计划或理论的)纲要</h1><p id="8425" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">与SQL中的模式类似，graphQL模式描述了客户端可以请求的数据、字段和类型。</p><p id="3c15" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">这是API和客户端之间的契约。无论何时发出请求，在执行之前都会首先根据模式进行验证。</p><h1 id="cfc0" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">结论</h1><p id="4671" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在本文中，您已经学习了在Android应用程序中开始使用GraphQL所需的概念。在下一篇文章中，您将通过构建一个向GraphQL API发出请求的示例应用程序，学习如何在您的Android应用程序中应用这些概念。</p><p id="3b0c" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">感谢莫伊诺卢瓦·阿德耶米和T2的安妮丝·戴维斯</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><div class="km kn ko kp gt nf"><a href="https://gitconnected.com/learn/android-development" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd ir gy z fp nk fr fs nl fu fw ip bi translated">学习Android -最佳Android教程(2019) | gitconnected</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">29大安卓教程-免费学习安卓。课程由开发人员提交和投票，使您能够…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">gitconnected.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt kv nf"/></div></div></a></div></div></div>    
</body>
</html>