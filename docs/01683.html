<html>
<head>
<title>Hacking it: Setting up your own Bulk Mail Server — using Sendy and AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">黑客入侵:使用熊智娟和AWS建立自己的批量邮件服务器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/setting-up-your-own-bulk-mail-server-using-sendy-and-aws-20d05ee01362?source=collection_archive---------1-----------------------#2020-01-22">https://levelup.gitconnected.com/setting-up-your-own-bulk-mail-server-using-sendy-and-aws-20d05ee01362?source=collection_archive---------1-----------------------#2020-01-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/151680966ffe9707c27dc23a0028409f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_zvLp1kHY2AKMi8QNZgeng.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">卡罗尔·郑在<a class="ae jd" href="https://unsplash.com/s/photos/airmail?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><div class=""/><p id="5332" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">已经有一段时间没写教程了。生活阻碍了我，我所有的项目想法都被搁置了。但是现在，在我的新工作中，我被迫重新评估时事通讯和大宗邮件的发送方式，就在那时我遇到了<a class="ae jd" href="https://sendy.co" rel="noopener ugc nofollow" target="_blank">熊智娟</a>。它非常棒——一个发送批量邮件的干净的解决方案和界面。我没有被熊智娟雇佣来做这个教程；我真的很喜欢这个产品，希望下面的教程能帮助到其他人。</p><p id="8b4b" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在AWS上有一个非常详细的熊智娟教程，我想在这里强调一下，没有它，我甚至无法开始我的项目——<a class="ae jd" href="https://colcol.co.uk/introduction-to-installing-sendy-and-virtualmin-on-aws/" rel="noopener ugc nofollow" target="_blank">https://colcol . co . uk/introduction-to-installing-sendy-and-virtual min-on-AWS/</a>我的教程略有不同，因为我已经有一点技术背景，所以我可以稍微缩短步骤。此外，我在Ubuntu 18.04上使用灯设置。</p><p id="acd7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你不需要很高的技术背景来完成这个教程，最多你可能只是在设置上比较慢。我还添加了一些我在使用新版Virtualmin时遇到的故障排除和问题，以及一些在EC2实例上省钱的方法。</p><p id="3680" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">需要注意的几点:</p><ol class=""><li id="9ea2" class="lb lc jg kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">你必须使用Ubuntu <strong class="kf jh">服务器</strong>版本，这样它就没有GUI了。节省安装空间。</li><li id="117e" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">我在免费层(t2.micro type EC2)上进行了尝试和测试，但它经常崩溃。其他在线教程说这是可能的，但我不知道是否Virtualmin升级或熊智娟或操作系统，但最终我不得不转移到t2.small，它的工作好多了。我留下了一个关于如何自动启动/停止实例的注释，这样您可以节省一些钱。</li><li id="0eb6" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">你需要拥有自己的域名来设置它。</li><li id="91ad" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">我用亚马逊SES代替我自己的SMTP服务器来设置它。</li><li id="375c" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">我选择EC2而不是raspberry pi的原因是，如果你的批量邮件服务器托管在EC2上，AWS每个月会给你62，000封免费邮件。此外，与pi，你将负责维护互联网等。</li></ol><h1 id="b67e" class="lp lq jg bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">那么这个教程是关于什么的呢…</h1><p id="585e" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">基本上，我的公司花了一大笔钱来发送大宗邮件。这甚至不在Mailchimp这样的服务上；所以我无法想象那样的全套服务要花多少钱。因此，我决定寻找另一种解决方案，给我一个类似Mailchimp的界面，但自托管，这样可以降低成本。</p><p id="af48" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我发现熊智娟是一个很好的界面选项，因为它们几乎涵盖了除拖放HTML电子邮件生成器之外的所有功能(我发现了另一个很好的解决方案，我将在教程中添加)。虽然他们有一次性费用，但这是值得的，因为这意味着软件得到了维护，而且创建者会定期在熊智娟论坛上回答问题。我还在黑色星期五买了熊智娟，他们给了很好的折扣:)所以如果你临近假期，查一下折扣。</p><p id="8438" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本质上，熊智娟安装在AWS上的一个EC2实例上，与作为服务器控制面板的T2虚拟桌面一起。<a class="ae jd" href="https://docs.aws.amazon.com/ses/latest/DeveloperGuide/Welcome.html" rel="noopener ugc nofollow" target="_blank"> AWS SES </a>被用作发送邮件的SMTP服务器。这很方便，因为你可能知道试图从你自己的邮箱发送大量邮件会导致你的邮件被阻止，因为它看起来像垃圾邮件。因此，使用批量邮件SMTP服务器非常重要。</p><h1 id="2301" class="lp lq jg bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">开始吧！</h1><p id="1219" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">好了，我们不要再浪费时间了。让我们进入项目模式，开始使用我们自己的批量邮件服务器。</p><h2 id="7e06" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">你需要什么</h2><ol class=""><li id="4add" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">经过验证的AWS帐户—验证可能需要一些时间，因此请提前计划。</li><li id="bc40" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">熊智娟驾照——你在网上购买后，他们会很快发送详细信息。</li><li id="43e1" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">我自己用的是Ubuntu 18.04电脑，因为大部分工作都是通过SSH完成的。如果您使用的是Windows，那么您需要安装Putty来SSH到EC2实例中。</li><li id="2087" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">您拥有并有权访问其DNS配置的域。</li></ol><h2 id="076d" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">主要步骤概述</h2><ol class=""><li id="192b" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">创建安全组</li><li id="e219" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">创建EC2实例</li><li id="7637" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">为您的密钥对设置配置文件</li><li id="1e05" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">设置弹性IP地址</li><li id="db19" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">通过SSH连接到EC2</li><li id="6260" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">安装虚拟机</li><li id="f8fe" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在Virtualmin上创建服务器</li><li id="b60e" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">设置SSL</li><li id="f7b4" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">安装熊智娟</li><li id="ad1f" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">设置Amazon SES</li><li id="f959" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">验证SES上的域</li><li id="f420" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">设置Cron作业</li></ol><h2 id="2f98" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">可选建议</h2><ol class=""><li id="ef2d" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">备份/恢复您的熊智娟数据库</li><li id="1aee" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">EC2实例的自动启动/停止</li><li id="3b4a" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">使用MJML创建超棒的HTML电子邮件</li><li id="3d17" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">使用快照在AWS上自动备份熊智娟</li><li id="a875" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">更新您的熊智娟安装</li></ol><p id="404d" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如你所见，有相当多的步骤，所以调整好你自己的步伐。有时DNS配置需要一段时间才能生效，我建议测试服务器一周左右，看看它是否能满足您的需求。</p></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><h1 id="8243" class="lp lq jg bd lr ls no lu lv lw np ly lz ma nq mc md me nr mg mh mi ns mk ml mm bi translated">创建安全组</h1><ol class=""><li id="787a" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">登录您的<a class="ae jd" href="https://aws.amazon.com/console/" rel="noopener ugc nofollow" target="_blank"> AWS账户</a>。</li><li id="7103" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">请确保将您的区域更改为右上角您想要的区域。选择这个的一个好方法是，如果你的大部分电子邮件将从英国发出，那么选择一个基于英国的地区。</li><li id="fe28" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在左上方的服务选项卡下(这是我们将用来浏览AWS的地方)，找到/选择<strong class="kf jh"> EC2 </strong>。</li><li id="d572" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在左侧菜单中，选择<strong class="kf jh">安全组</strong>。</li><li id="ac82" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">创建安全组</strong>。</li><li id="70ce" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">输入以下细节和规则:<br/> <strong class="kf jh">名称</strong>:熊智娟群发邮件<br/> <strong class="kf jh">描述</strong> : HTTP，HTTPS，SSH，Virtualmin <br/> <strong class="kf jh"> VPC </strong>:默认<br/> <strong class="kf jh">规则1 </strong> : HTTP(保留默认值)<br/> <strong class="kf jh">规则2 </strong> : HTTPS(保留默认值)<br/> <strong class="kf jh">规则3 </strong> : SSH，选择我的IP —这将用于SSH如果您有多个工作地点，您可以添加所有地点，只要确保您给了它们适当的描述。<br/> <strong class="kf jh">规则4 </strong>:自定义TCP，选择我的IP，端口:10000——这将用于访问Virtualmin</li><li id="e610" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">创建。</strong></li><li id="b247" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">创建后，您将在安全组列表中看到该安全组。在这里，您可以为群组添加名称。悬停在第一列，<strong class="kf jh">名称</strong>，您将看到一个铅笔图标。单击并编辑。</li></ol><h1 id="d87d" class="lp lq jg bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">创建EC2实例</h1><ol class=""><li id="0694" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">仔细检查你的地区。</li><li id="dd8b" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">导航至<strong class="kf jh"> EC2 </strong>。</li><li id="2168" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">从左侧菜单中选择<strong class="kf jh">实例</strong>。</li><li id="61d3" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">启动实例</strong>。</li><li id="64f1" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">选择左侧的<strong class="kf jh">仅自由层</strong>。</li><li id="4ea7" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">选择<strong class="kf jh"> Ubuntu Server 18.04 LTS </strong>。</li><li id="d1b0" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击下一个的<strong class="kf jh">。</strong></li><li id="2fec" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">对于<strong class="kf jh">实例类型</strong>，在自由层上只有一个合格的实例，那就是t2.micro，但是这对于熊智娟和Virtualmin来说并不适用。我选择了t2.small，它在过去的一个月里运行得相当平稳。这并不昂贵，而且我已经建议了一种在不使用时停止实例的方法来节省一些钱，因为AWS是按小时计费的。</li><li id="5dd7" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">下一步:配置实例细节</strong>。</li><li id="c5f3" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">确保选择<strong class="kf jh">防止意外终止</strong>，因为如果终止实例，您将丢失所有数据。有一些方法可以设置数据不被删除，但是恢复数据超出了本教程的范围。</li><li id="c21d" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">下一步:添加存储</strong>。</li><li id="d7f2" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">输入30GB作为磁盘大小。这是空闲层上允许的最大值。在这里你也可以选择终止时不删除，但是正如我所说的，恢复它超出了本教程的范围。其余的可以保留为默认值。</li><li id="fd7e" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">下一步:添加标签</strong>。</li><li id="3d7c" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">不需要添加任何标签。</li><li id="252e" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">下一步:配置安全组</strong>。</li><li id="409a" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">选择<strong class="kf jh">选择一个现有的安全组</strong>。</li><li id="bcbe" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">并选择我们在上一节中创建的安全组。在本教程中，它被称为<strong class="kf jh">熊智娟批量邮件</strong>。</li><li id="03c6" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">查看并启动</strong>。</li><li id="575d" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">确保您的所有设置都是正确的。</li><li id="7548" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">启动</strong>。</li><li id="d5f6" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">如果您以前没有使用过AWS，将会要求您创建一个新的密钥对。</li><li id="7633" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">输入名称并下载文件。你只能做这一次，所以请确保你有它保存在某个安全的地方。</li><li id="150b" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">启动EC2后，您可以输入一个实例名，以便于区分。比如<strong class="kf jh">熊智娟服务器</strong>。</li></ol><h2 id="9b84" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">设置登录EC2的密钥文件</h2><ol class=""><li id="bdd7" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">将下载的密钥文件移动到您的。ssh文件夹。</li><li id="747e" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">需要更改该文件的权限，否则AWS会在尝试使用该密钥文件登录时给出错误—<a class="ae jd" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/TroubleshootingInstancesConnecting.html#troubleshoot-unprotected-key" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/AWS C2/latest/user guide/troubleshooting instances connecting . html # troubleshoot-unprotected-key</a></li><li id="cf65" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">打开终端并导航到您的。ssh文件夹。</li><li id="afb4" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">输入以下内容:<code class="fe nt nu nv nw b">chmod 400 &lt;mykey&gt;.pem</code></li></ol><h1 id="260c" class="lp lq jg bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">为您的密钥对设置配置文件</h1><p id="acce" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">通常，当通过ssh登录到EC2实例时，还需要传递pem文件，这使得SSH命令有点麻烦。config设置有助于将密钥文件指向Amazon，这样您就不需要每次都输入密钥文件。</p><p id="22ae" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您不希望设置配置文件，这就是您的ssh命令通常的样子，如果您不希望创建配置设置，</p><pre class="nx ny nz oa gt ob nw oc od aw oe bi"><span id="a27f" class="ms lq jg nw b gy of og l oh oi">ssh -i <!-- -->/path/&lt;mykey&gt;<!-- -->.pem <!-- -->ubuntu<!-- -->@<!-- -->ec2-198-51-100-1.compute-1.amazonaws.com</span></pre><ol class=""><li id="2715" class="lb lc jg kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">打开终端并导航到您的。ssh文件夹。</li><li id="c162" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">如果你没有配置文件，那么<code class="fe nt nu nv nw b">touch config</code></li><li id="36fb" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">然后用<code class="fe nt nu nv nw b">nano config</code>编辑配置文件</li><li id="5e9b" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">根据您安装的映像，您的实例的用户名会发生变化。在这里找到完整列表—<a class="ae jd" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/connection-prereqs.html#connection-prereqs-get-info-about-instance" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/AWS C2/latest/user guide/connection-prereqs . html # connection-prereqs-get-info-about-instance<br/></a>为了这个教程，我们安装了一个Ubuntu镜像；所以用户名是ubuntu。</li><li id="f1dc" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在配置文件中追加以下内容:</li></ol><pre class="nx ny nz oa gt ob nw oc od aw oe bi"><span id="a59d" class="ms lq jg nw b gy of og l oh oi">Host *amazonaws.com<br/>IdentityFile ~/.ssh/&lt;mykey&gt;.pem<br/>User ubuntu</span></pre><p id="fd1a" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">6.Ctrl+O(保存更改)，然后Ctrl+X关闭编辑器。</p><h1 id="0597" class="lp lq jg bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">设置弹性IP地址</h1><p id="c55e" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">AWS上的一个<a class="ae jd" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html" rel="noopener ugc nofollow" target="_blank">弹性IP </a>对于您的域指向EC2服务器来说是一种非常方便的方式。只要与EC2相关联，它们就可以在AWS免费层下免费使用。</p><ol class=""><li id="bca2" class="lb lc jg kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">在AWS上的EC2仪表板上，选择<strong class="kf jh"> Elastic IPs </strong>。</li><li id="d6dd" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">分配弹性IP地址</strong>。</li><li id="a05c" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">选择亚马逊的IPv4地址池。</li><li id="7e9d" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">分配</strong>。</li><li id="f789" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">现在点击新分配的IP地址，并从<strong class="kf jh">动作</strong>菜单或从分配IP地址时弹出的成功消息中选择<strong class="kf jh">关联IP地址</strong>。</li><li id="7326" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">选择<strong class="kf jh">实例</strong>。</li><li id="87d4" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">为熊智娟选择EC2实例。</li><li id="be16" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">关联</strong>。</li><li id="7e1e" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">回到你的<a class="ae jd" href="https://console.aws.amazon.com/ec2/" rel="noopener ugc nofollow" target="_blank"> EC2实例</a>，点击实例并查看下面的描述标签。确保公共IP与我们刚刚创建的弹性IP相同。</li></ol><h2 id="9e58" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">将弹性IP添加到您的域的DNS记录中</h2><p id="7d2a" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">现在，我们需要将您的域或子域与该IP地址相关联。这是您将用来访问熊智娟的域。我建议将它创建为你网站的一个子域，类似于<code class="fe nt nu nv nw b">sendy.&lt;mydomain&gt;.com</code>，因为你的主域是你理想的托管网站的地方(为此你可能需要时事通讯)。这将是您的熊智娟安装的URL。</p><p id="1540" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每个域主机都有自己的平台，但本质上，您需要登录到您的域主机控制面板，并导航到DNS设置/记录或高级DNS设置/记录。</p><p id="ad3b" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦你在正确的地方，你需要添加一个<strong class="kf jh">一个</strong>记录。如果您希望主机名是一个子域，如<code class="fe nt nu nv nw b">sendy.&lt;mydomain&gt;.com</code> <strong class="kf jh"> </strong>所示，主机名将是<strong class="kf jh"> sendy </strong>，或者如果您使用根域，主机名将留空。</p><blockquote class="oj ok ol"><p id="254b" class="kd ke om kf b kg kh ki kj kk kl km kn on kp kq kr oo kt ku kv op kx ky kz la ij bi translated">注意:这需要几个小时来关联，所以如果你很快完成了这个教程，如果你的熊智娟网站仍然无法加载，不要惊慌。睡一觉:)</p></blockquote><h1 id="0daa" class="lp lq jg bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">通过SSH连接到EC2</h1><ol class=""><li id="be3c" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">在AWS控制台上，导航到您的<a class="ae jd" href="https://console.aws.amazon.com/ec2/" rel="noopener ugc nofollow" target="_blank"> EC2实例</a>(如果需要，通过服务菜单)。</li><li id="9d64" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在EC2实例列表中，单击您希望安装熊智娟的实例；我们在本教程中创建的。</li><li id="02fe" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在下面的描述选项卡中，找到公共DNS并复制它。</li><li id="9bb9" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">打开你的终端。</li><li id="cff7" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">输入<code class="fe nt nu nv nw b">ssh &lt;my-EC2-public-DNS&gt;</code></li><li id="8ba9" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">接受指纹信息，您就登录了。</li></ol><h2 id="ab88" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">更新操作系统</h2><ol class=""><li id="60c4" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">一旦您登录到EC2，让我们借此机会在开始安装其余软件之前更新操作系统。</li><li id="248e" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><code class="fe nt nu nv nw b">sudo apt-get update</code></li><li id="9591" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><code class="fe nt nu nv nw b">sudo apt-get upgrade</code></li><li id="4501" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><code class="fe nt nu nv nw b">sudo apt-get full-upgrade</code></li><li id="b3d3" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><code class="fe nt nu nv nw b">sudo reboot</code></li><li id="8da4" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">重新启动时，您将与EC2断开连接。</li></ol><h1 id="3272" class="lp lq jg bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">安装虚拟机</h1><p id="91e2" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">为了让Virtualmin启动并运行，我们必须首先对EC2服务器的主机名进行一些编辑。</p><h2 id="ebb8" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">编辑主机名</h2><ol class=""><li id="3909" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">通过ssh登录您的EC2。</li><li id="5a2e" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">登录后，输入以下内容:<code class="fe nt nu nv nw b">sudo nano /etc/hostname</code>。</li><li id="9020" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">这里将有一个单词代表服务器的主机名—将其改为<strong class="kf jh"> sendy </strong>。</li><li id="0cf6" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><code class="fe nt nu nv nw b">sudo reboot</code></li><li id="59c9" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">重新登录。</li><li id="3d89" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">提示中应该会更新您的服务器名称。</li><li id="1b0c" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">现在，我们需要更新主机文件— <code class="fe nt nu nv nw b">sudo nano /etc/hosts</code>。</li><li id="78e3" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">增加以下<code class="fe nt nu nv nw b">127.0.1.1 sendy.&lt;mydomain&gt;.com</code>。这是假设熊智娟正在使用子域<strong class="kf jh"> sendy </strong>，如果没有，那么简单地添加<code class="fe nt nu nv nw b">&lt;mydomain&gt;.com</code>。</li><li id="7ff9" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><code class="fe nt nu nv nw b">sudo reboot</code> —在对任何配置进行更改后重启总是好的。</li></ol><h2 id="9945" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">安装虚拟桌面</h2><ol class=""><li id="242e" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">通过ssh重新登录到您的EC2。</li><li id="f075" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">首先我们需要下载安装文件— <code class="fe nt nu nv nw b">wget http://software.virtualmin.com/gpl/scripts/install.sh</code>。</li><li id="f96b" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">运行安装文件— <code class="fe nt nu nv nw b">sh ./install.sh --minimal</code>。我们将使用最小化的设置，因为熊智娟不需要Virtualmin附带的额外文件。尽管如此，如果你要在同一个地方托管网站，你可能需要完全安装Virtualmin。这方面的细节超出了本教程的范围。</li><li id="560a" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">输入<strong class="kf jh"> y </strong>继续。</li><li id="3bed" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">您可能会被要求输入FQDN，请输入您的熊智娟网址。在本教程的情况下，将是<code class="fe nt nu nv nw b">sendy.&lt;mydomain&gt;.com</code>。</li><li id="4115" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">安装分3个阶段进行，需要一些时间。</li><li id="a5f5" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">安装完成后，更改Virtualmin的root密码— <code class="fe nt nu nv nw b">sudo /usr/share/webmin/changepass.pl /etc/webmin/ root &lt;mypassword&gt;</code></li></ol><blockquote class="oj ok ol"><p id="439a" class="kd ke om kf b kg kh ki kj kk kl km kn on kp kq kr oo kt ku kv op kx ky kz la ij bi translated">注意:我在设置熊智娟时试验了很多版本的Ubuntu和设置，我注意到在Ubuntu 16.04上，安装Virtualmin时有一个语言环境问题，下面是解决方案——<a class="ae jd" href="https://askubuntu.com/questions/162391/how-do-i-fix-my-locale-issue" rel="noopener ugc nofollow" target="_blank">https://askubuntu . com/questions/162391/how-do-I-fix-my-locale-issue</a></p></blockquote><h2 id="673d" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">Virtualmin安装后向导</h2><ol class=""><li id="0d67" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">更改密码后，打开浏览器，输入您的熊智娟网址，如下所示— <code class="fe nt nu nv nw b">sendy.&lt;mydomain&gt;.com:10000</code></li><li id="ccaf" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">使用用户名<strong class="kf jh"> root </strong>登录，使用您在上一节中刚刚创建的密码登录。</li><li id="092b" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">登录Virtualmin后，您将看到安装后向导。</li><li id="d815" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在第一个<strong class="kf jh">介绍</strong>页面点击<strong class="kf jh">下一个</strong>。</li><li id="d7cf" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">因为我们使用Virtualmin来简单地监控熊智娟，所以为<strong class="kf jh">预加载Virtualmin库选择No？</strong>和<strong class="kf jh">是运行电子邮件域名查找服务器？</strong>。<br/>点击<strong class="kf jh">下一步。</strong></li><li id="ef5b" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">对于<strong class="kf jh">病毒扫描</strong>选择否。点击<strong class="kf jh">下一步。</strong></li><li id="1e92" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">对于<strong class="kf jh">垃圾邮件过滤</strong>选择否。点击<strong class="kf jh">下一步。</strong></li><li id="43da" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在<strong class="kf jh">数据库服务器</strong>中，对<strong class="kf jh"> MySQL </strong>选择是，对<strong class="kf jh"> PostgreSQL </strong>选择否。点击<strong class="kf jh">下一步。</strong></li><li id="c2f1" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">为MySQL设置一个root密码。这应该不同于您为Virtualmin设置的root密码。点击下一个的<strong class="kf jh">。</strong></li><li id="f2ef" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">对于<strong class="kf jh"> MySQL数据库大小</strong>，我选择了<strong class="kf jh">大</strong>，因为我有数百封电子邮件，但我想为它的增长留出空间；大杯对熊智娟来说应该足够了。这个真的要看你了。点击下一个的<strong class="kf jh">。</strong></li><li id="6b6e" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">你的<strong class="kf jh">主域名服务器</strong>是熊智娟网址— <code class="fe nt nu nv nw b">sendy.&lt;mydomain&gt;.com</code>点击<strong class="kf jh">下一步</strong>。</li><li id="c351" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">选择<strong class="kf jh">仅存储散列密码</strong>。点击下一个的<strong class="kf jh">。</strong></li><li id="9eb9" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在<strong class="kf jh">全部完成</strong>页面上，只需点击<strong class="kf jh">下一步</strong>。</li><li id="0b21" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">现在Virtualmin将被刷新。点击<strong class="kf jh">重新检查并刷新配置</strong>。</li><li id="1820" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">将会出现一串安装信息，一旦所有步骤完成，您应该会看到一条系统就绪信息。</li></ol><h1 id="eb4a" class="lp lq jg bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">在Virtualmin上创建服务器</h1><ol class=""><li id="f3c9" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">在<code class="fe nt nu nv nw b">sendy.&lt;mydomain&gt;.com:10000</code>登录虚拟桌面。</li><li id="222f" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">确保你在Virtualmin选项卡上(左侧菜单，右上方，有两个选项:Webmin和Virtualmin)。</li><li id="0ab5" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">创建虚拟服务器</strong>。</li><li id="bfc4" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">输入以下详细信息:<br/> <strong class="kf jh">域名:</strong> <code class="fe nt nu nv nw b">sendy.&lt;mydomain&gt;.com</code> <br/> <strong class="kf jh">管理密码:</strong>与您在本教程中设置的其他密码不同的密码。<br/> <strong class="kf jh">管理用户名:</strong>自动(这将使你的用户名成为你的熊智娟网址的子域。在这种情况下，<code class="fe nt nu nv nw b">sendy</code>。</li><li id="f8b6" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在<strong class="kf jh">启用功能</strong>下，我检查了以下内容，<br/> - DNS域已启用？<br/> - Apache网站启用？<br/> - MySQL数据库启用？<br/> - Webmin登录已启用？<br/> - Apache SSL网站已启用？</li><li id="ec1c" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">创建服务器</strong>。</li><li id="e97b" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">将会出现各种设置信息。一旦创建了服务器，您将在左侧菜单的顶部看到它。</li><li id="ce0f" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">当您点击它时，您将会看到它的摘要，例如我们在步骤4中选择了<strong class="kf jh">自动</strong>的用户名。</li></ol><h1 id="1329" class="lp lq jg bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">设置SSL</h1><ol class=""><li id="cb39" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">点击Virtualmin左侧菜单上的<strong class="kf jh">服务器配置</strong>。</li><li id="b4e3" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh"> SSL证书</strong>。注意:如果您没有看到SSL证书选项，那么有可能您还没有启用它。点击<strong class="kf jh">编辑虚拟服务器</strong>并选择<strong class="kf jh">启用功能。</strong>检查<strong class="kf jh"> Apache SSL网站是否已启用？</strong>。</li><li id="452a" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击顶部菜单上的<strong class="kf jh">让我们加密</strong>。</li><li id="8d7c" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在<strong class="kf jh">为</strong>申请证书下，您可以手动输入域名(如果您有不同于默认域名的域名),或者将其保留为默认域名。</li><li id="b8fa" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">请求证书</strong>。<br/> <em class="om">注意:如果您在尝试请求证书时收到ACME错误，您将需要在EC2实例上安装一个工具。通过ssh登录您的EC2和</em> <code class="fe nt nu nv nw b"><em class="om">sudo apt-get install certbot</em></code> <em class="om">，然后是</em> <code class="fe nt nu nv nw b"><em class="om">sudo certbot register</em></code> <em class="om">。输入你的邮箱地址，重启EC2实例</em> <code class="fe nt nu nv nw b"><em class="om">sudo reboot</em></code> <em class="om">。参考:</em>https://www.cloudmin.com/node/67390T42</li><li id="6a1c" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">到<strong class="kf jh">让我们在你的虚拟桌面<code class="fe nt nu nv nw b">sendy.&lt;mydomain&gt;.com:10000</code>上加密</strong>。</li><li id="9b6b" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">当你点击<strong class="kf jh">请求证书</strong>时，这次应该不会有错误。</li><li id="1139" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击顶部菜单中的<strong class="kf jh">当前证书</strong>。</li><li id="fef2" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">复制到虚拟桌面</strong>。</li><li id="3af6" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">注销当前虚拟主页。</li><li id="88b3" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">打开一个新的浏览器窗口，导航到你的虚拟桌面<code class="fe nt nu nv nw b">sendy.&lt;mydomain&gt;.com:10000</code>。</li><li id="1cae" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">这一次连接将是安全的。</li></ol><h1 id="7f94" class="lp lq jg bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">安装熊智娟</h1><h2 id="91f1" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">配置MySQL数据库</h2><ol class=""><li id="a307" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">SSH到您的EC2实例。</li><li id="c88c" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">输入<code class="fe nt nu nv nw b">mysql_secure_installation</code>。</li><li id="23f4" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">这将询问您一系列问题以保护您的SQL server。</li><li id="216d" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">配置由您决定；以下是我跟随的设置:<br/> <strong class="kf jh">验证密码插件</strong> : n <br/> <strong class="kf jh"> Root密码</strong>:你在Virtualmin的后安装wixard中设置的那个。<br/> <strong class="kf jh">移除匿名用户</strong> : y <br/> <strong class="kf jh">不允许远程root登录</strong> : y <br/> <strong class="kf jh">移除测试数据库并访问</strong> : y <br/> <strong class="kf jh">重新加载权限表</strong> : y</li><li id="4280" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">熊智娟需要编辑SQL配置以使其正常运行。参考:<a class="ae jd" href="https://sendy.co/forum/discussion/7752/#Item_6" rel="noopener ugc nofollow" target="_blank">https://sendy.co/forum/discussion/7752/#Item_6</a></li><li id="15bb" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在你的终端中输入下面的<br/>到EC2实例<code class="fe nt nu nv nw b">sudo nano /etc/mysql/mysql.conf.d/mysql.cnf</code>。</li><li id="ed18" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在<code class="fe nt nu nv nw b">[mysqld]</code>部分的末尾，有一个SQL模式列表。确保<code class="fe nt nu nv nw b">ONLY_FULL_GROUP_BY</code>被移除。</li><li id="af50" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">编辑后的列表可能如下:<br/> <code class="fe nt nu nv nw b">sql_mode = "STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION"</code></li><li id="d83e" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">重启MySQL服务<br/> <code class="fe nt nu nv nw b">sudo service mysqld restart</code></li></ol><h2 id="460e" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">建立熊智娟</h2><ol class=""><li id="05fc" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">使用您在购买许可证时收到的电子邮件中的链接下载熊智娟。让这些文件现在就在你的计算机上，因为我们需要对配置进行一些编辑。</li><li id="f8d3" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">下载时，导航至您的虚拟桌面。</li><li id="e5ab" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击左侧菜单上的<strong class="kf jh">编辑数据库</strong>。</li><li id="354b" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击顶部菜单中的<strong class="kf jh">密码</strong>。</li><li id="9e0c" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">将鼠标悬停在钥匙符号上以获取您的用户名和密码。记下它们。</li><li id="f42f" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">一旦熊智娟下载到你的本地电脑，解压。</li><li id="6f8d" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">打开文件<code class="fe nt nu nv nw b">includes/config.php</code>。</li><li id="9cdf" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">更新所需详细信息:<br/> <strong class="kf jh">安装URL </strong> : <code class="fe nt nu nv nw b">sendy.&lt;mydomain&gt;.com</code> <br/> <strong class="kf jh">主机名</strong> : <code class="fe nt nu nv nw b">localhost</code> <br/> <strong class="kf jh">用户名</strong>:您从Virtualmin <br/> <strong class="kf jh">密码</strong>:您从Virtualmin <br/> <strong class="kf jh"> DB名称</strong> : <code class="fe nt nu nv nw b">sendy</code></li><li id="444c" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">将sendy文件复制到EC2中有点复杂，有很多方法可以做到，我确信比我的方法更好。所以，如果你把这个项目作为一次学习经历，就在这里做实验吧。我很乐意听到不同于我概述的方法的建议:<br/> -我使用Filezilla复制文件<br/> -当VirtualMin安装后，它会创建一个名为<strong class="kf jh"> sendy </strong>(假设您遵循了我的教程中的命名约定)<br/> -要使用Filezilla，您必须作为这个<strong class="kf jh"> sendy </strong>用户登录到EC2。为此，您需要授予该用户SSH访问权限。<br/> -一旦你给它SSH访问权限，你就可以使用Filezilla登录并复制必要的文件。<br/>步骤详述如下。</li><li id="089e" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">以通常的方式SSH到EC2实例中。</li><li id="3ea1" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">首先，我们必须得到私钥的公钥部分(即<strong class="kf jh">)。pem </strong>文件)我们从AWS下载的。输入<code class="fe nt nu nv nw b">cat .ssh/authorized_keys</code>。复制从<code class="fe nt nu nv nw b">ssh-rsa</code>开始的输出。暂时将它保存在一些文本编辑器中。记得以后扔掉。</li><li id="80e9" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">现在我们必须切换到EC2实例上的<strong class="kf jh"> sendy </strong>用户。输入<code class="fe nt nu nv nw b">sudo su sendy</code></li><li id="d403" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">您将看到您的提示更改为<strong class="kf jh"> sendy </strong></li><li id="0c52" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">为该用户创建SSH目录:<br/> <code class="fe nt nu nv nw b">mkdir .ssh</code></li><li id="dda0" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">更改SSH文件夹的权限。这在处理钥匙时很重要:<br/> <code class="fe nt nu nv nw b">chmod 700 .ssh</code></li><li id="ccb2" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">创建一个<code class="fe nt nu nv nw b">authorized_keys</code>文件:<br/> <code class="fe nt nu nv nw b">touch .ssh/authorized_keys</code></li><li id="1d57" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">更改文件的权限:<br/> <code class="fe nt nu nv nw b">chmod 600 .ssh/authorized_keys</code></li><li id="116c" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">让我们添加从EC2主用户复制的公钥。<br/> <code class="fe nt nu nv nw b">nano .ssh/authorized_keys</code></li><li id="3034" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">将密钥(不是您的<code class="fe nt nu nv nw b">.pem</code>密钥，而是我们之前复制的公钥)复制到文件中。<code class="fe nt nu nv nw b">Ctrl+O</code>，<code class="fe nt nu nv nw b">Ctrl+X</code>保存文件。<br/> <em class="om">注:这些步骤从这里改编而来:</em><a class="ae jd" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/managing-users.html" rel="noopener ugc nofollow" target="_blank"><em class="om">https://docs . AWS . Amazon . com/AWS C2/latest/user guide/managing-users . html</em></a></li><li id="b6d9" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">登录到Filezilla上的EC2实例。详细信息将与您的SSH登录相同，但这一次不是使用<code class="fe nt nu nv nw b">ubuntu</code>作为Filezilla上的用户名，而是输入<code class="fe nt nu nv nw b">sendy</code>。</li><li id="a069" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">将文件从本地计算机(左窗格)复制到EC2上的目录<code class="fe nt nu nv nw b">/home/sendy/public_html/</code>(右窗格)。<br/> <em class="om">注意:确保隐藏文件</em> <code class="fe nt nu nv nw b"><em class="om">.htaccess</em></code> <em class="om">也被复制。</em></li><li id="72be" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">如果复制时EC2实例上的用户和组所有者发生了变化，可以通过再次登录(或在Filezilla上)将它们更改为<code class="fe nt nu nv nw b">sendy</code>:<br/><code class="fe nt nu nv nw b">sudo chown -R sendy:sendy /home/sendy/public_html</code></li><li id="d81a" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">安装一些熊智娟需要的库:<br/> <code class="fe nt nu nv nw b">sudo apt-get install libcurl4-openssl-dev php7.2-curl</code></li><li id="e118" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><code class="fe nt nu nv nw b">sudo reboot</code></li><li id="6836" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">一旦EC2重新启动，导航到您的熊智娟URL — <code class="fe nt nu nv nw b">sendy.&lt;mydomain&gt;.com</code>。</li><li id="9e38" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">如果你看到一个500的错误，请按照这个链接来纠正它—<a class="ae jd" href="https://sendy.co/troubleshooting#500-error" rel="noopener ugc nofollow" target="_blank">https://sendy.co/troubleshooting#500-error</a><br/><em class="om">注意:你可以使用Virtualmin的文件管理器来编辑文本文件。</em></li><li id="ac34" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><code class="fe nt nu nv nw b">sudo reboot</code></li><li id="1928" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">导航到熊智娟— <code class="fe nt nu nv nw b">sendy.&lt;mydomain&gt;.com</code></li><li id="d5f7" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">您现在应该会看到一个安装页面。在服务器兼容性列表中是mod_rewrite没有启用，没关系。在AWS上安装时，这通常是不启用的。</li><li id="d9c3" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">填写所有细节。登录详细信息将用于管理员登录。AWS详细信息现在可以留空。我们将在下一节对此进行补充。</li><li id="1fec" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">填写完详细信息后，点击<strong class="kf jh">立即安装。</strong></li><li id="36db" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">您现在应该看到登录页面，您可以在其中输入您在之前的安装页面上设置的电子邮件和密码。</li></ol><h1 id="9793" class="lp lq jg bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">设置Amazon SES</h1><ol class=""><li id="23b2" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">登录您的<a class="ae jd" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"> AWS控制台</a>。</li><li id="4916" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">使用<strong class="kf jh">服务</strong>菜单导航至<strong class="kf jh"> IAM </strong>。</li><li id="e145" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">确保您的区域设置在右上方。</li><li id="f1c6" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击右侧菜单中的<strong class="kf jh">用户</strong>。</li><li id="b574" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">添加用户</strong>。</li><li id="6bf6" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">输入以下详细信息:<br/> <strong class="kf jh">用户名</strong> : sendy <br/> <strong class="kf jh">访问类型</strong>:程序化访问</li><li id="caff" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">下一步:权限</strong>。</li><li id="65c0" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">选择<strong class="kf jh">附加现有策略</strong>。</li><li id="1d5a" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在搜索中输入<code class="fe nt nu nv nw b">sesf</code>。选择<strong class="kf jh"> AmazonSESFullAccess </strong>。</li><li id="90d2" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在搜索中键入<code class="fe nt nu nv nw b">snsf</code>。选择<strong class="kf jh">amazonsfunllaccess</strong>。</li><li id="a806" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">下一步:标签</strong>。这一节可以跳过。</li><li id="39d4" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">下一步:复习。查看您的设置。</strong></li><li id="030a" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">创建用户</strong>。</li><li id="5f4e" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">将凭据复制到一个临时文本文件中，以便轻松进入熊智娟。或者，并排打开熊智娟，直接复制。<br/> <em class="om">注意:请确保在复制完凭证后，删除包含凭证的临时文本文件。</em></li><li id="c233" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">转到您的熊智娟— <code class="fe nt nu nv nw b">sendy.&lt;mydomain&gt;.com</code>，在右上角的下拉菜单中，选择<strong class="kf jh">设置</strong>。</li><li id="e88a" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在<strong class="kf jh">Amazon Web Services Credentials</strong>下添加您的AWS凭证，并在<strong class="kf jh"> Amazon SES region </strong>下选择您的AWS区域。</li><li id="5555" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">保存</strong>。</li></ol><h1 id="bd33" class="lp lq jg bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">验证SES上的域</h1><p id="45db" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">当你第一次开始使用AWS SES时，它会将你置于一个沙盒环境中，在那里你可以发送有限的电子邮件，并且只能从经过验证的电子邮件或域中发送。这是为了鼓励您在向客户发送简讯之前测试您的批量邮件服务器。利用这段时间彻底测试和学习熊智娟是如何工作的，因为你的错误在这里不会有任何影响。这也是检查熊智娟在AWS上是否设置正确，以及EC2实例类型是否是您所需要的理想类型的好时机。在我的例子中，我从t2.micro(免费层)开始，但是熊智娟经常崩溃，所以我最终不得不升级。</p><blockquote class="oj ok ol"><p id="11b8" class="kd ke om kf b kg kh ki kj kk kl km kn on kp kq kr oo kt ku kv op kx ky kz la ij bi translated">注意:当您进行了足够多的测试，并准备增加对SES的限制，并脱离沙盒环境时，您需要向AWS提出请求。在此查找详细信息—<a class="ae jd" href="https://docs.aws.amazon.com/ses/latest/DeveloperGuide/manage-sending-quotas-request-increase.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/ses/latest/developer guide/manage-sending-quotas-request-increase . html</a></p></blockquote><ol class=""><li id="3744" class="lb lc jg kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">登录您的<a class="ae jd" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"> AWS控制台</a>并导航至<strong class="kf jh"> SES </strong>。</li><li id="428d" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击左侧菜单上的<strong class="kf jh">域</strong>。</li><li id="7082" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">验证新域</strong>。</li><li id="bfbc" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">输入您的域名。该域名应与您托管熊智娟的域名— <code class="fe nt nu nv nw b">&lt;mydomain&gt;.com</code>相匹配，不含<code class="fe nt nu nv nw b">sendy</code>子域名部分。</li><li id="4a5f" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">检查<strong class="kf jh">生成DKIM设置</strong>。</li><li id="f25e" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">打开域的控制面板，您可以在其中设置DNS记录。正如我们在上一节中设置弹性IP时所做的那样。</li><li id="8a99" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">需要添加两类记录:<strong class="kf jh">域验证记录</strong> (TXT)和<strong class="kf jh"> DKIM记录集</strong> (CNAME)。将它们添加到您的DNS设置中。<br/> <em class="om">注意:如果您的域已经有关联的邮件，不要添加</em> <strong class="kf jh"> <em class="om">邮件接收记录</em> </strong> <em class="om">。</em></li><li id="533e" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">检查与您的AWS帐户相关的电子邮件，很快您就会收到正在验证的域的确认。</li></ol><p id="36b7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是重要的一步，因为它减少了你的简讯进入客户垃圾邮件的机会。现在你可以开始玩熊智娟了，只要电子邮件只发送到你的域名或从你的域名发出。</p><p id="be4f" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想试着发送给你的其他电子邮件进行测试，比如私人邮件，你必须点击左边菜单上的<strong class="kf jh">电子邮件地址</strong>来验证个人邮件。</p><blockquote class="oj ok ol"><p id="429c" class="kd ke om kf b kg kh ki kj kk kl km kn on kp kq kr oo kt ku kv op kx ky kz la ij bi translated">注意:AWS提供了一个很棒的邮箱模拟器来测试熊智娟上的电子邮件行为—<a class="ae jd" href="https://docs.aws.amazon.com/ses/latest/DeveloperGuide/mailbox-simulator.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/ses/latest/developer guide/Mailbox-Simulator . html</a></p></blockquote><h2 id="3905" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">从域更新您的邮件(可选)</h2><ol class=""><li id="9a21" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">验证您的域后，在SES控制台的域列表中单击它。</li><li id="4dbe" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在这里，您可以看到您的域的设置，例如我们在上一节中添加的记录。</li><li id="8efa" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">一个额外的功能是使用来自域的邮件。如果你试着从熊智娟发一封电子邮件(比如发给你自己)，你可以在邮件标题中看到，这封邮件是<strong class="kf jh">mail-by</strong>&lt;AWS服务器名称&gt;。你可以通过观察你可能收到的其他简讯来尝试一下。有些人显示一个个性化的域名，有些人只显示原始的服务器名称。比如AWS简讯来自<code class="fe nt nu nv nw b">bounce.amazon.com</code>。<code class="fe nt nu nv nw b">bounce</code>是一个用于时事通讯的常见子域，但这真的取决于你。</li><li id="8c8c" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">回到AWS控制台，打开来自域的<strong class="kf jh">邮件部分。并点击<strong class="kf jh">添加来自域的邮件</strong>。</strong></li><li id="bb69" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">确保来自域的<strong class="kf jh">邮件不同于您的熊智娟子域，并且没有被您域的任何其他部分使用。有各种各样的选择，像<code class="fe nt nu nv nw b">bounce.&lt;mydomain&gt;.com</code>或<code class="fe nt nu nv nw b">mail.&lt;mydomain&gt;.com</code>或<code class="fe nt nu nv nw b">info.&lt;mydomain&gt;.com</code>。</strong></li><li id="a8eb" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">您必须在您的域的控制面板上设置两种类型的DNS设置:<strong class="kf jh"> MX记录设置</strong> (MX)和<strong class="kf jh"> SPF记录设置</strong> (TXT)。<br/> <em class="om">注意:不要担心一个子域的MX记录不会与你的主域的电子邮件冲突。</em></li><li id="8587" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">一旦AWS验证了该域，您应该会收到一封电子邮件。</li></ol><h1 id="2114" class="lp lq jg bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">设置Cron作业</h1><p id="86da" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">熊智娟建议您添加四个cron作业:</p><ul class=""><li id="6d1e" class="lb lc jg kf b kg kh kk kl ko ld ks le kw lf la oq lh li lj bi translated">导入CSV</li><li id="b780" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la oq lh li lj bi translated">计划活动</li><li id="65bc" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la oq lh li lj bi translated">激活自动回复</li><li id="f795" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la oq lh li lj bi translated">更新方案</li></ul><p id="3a67" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">尽管cron作业不是必需的，但是最好添加它们，以防服务器发生问题，熊智娟可以继续它正在执行的任何任务。</p><p id="24af" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是熊智娟关于克隆工作细节的摘录，</p><pre class="nx ny nz oa gt ob nw oc od aw oe bi"><span id="d104" class="ms lq jg nw b gy of og l oh oi">To import large CSVs more reliably and have Sendy handle server timeouts, add a cron job with the following command.</span><span id="f5d0" class="ms lq jg nw b gy or og l oh oi">Time Interval<br/>*/1 * * * * <br/>Command<br/>php /home/sendy/public_html/import-csv.php &gt; /dev/null 2&gt;&amp;1<br/>(Note that adding cron jobs vary from hosts to hosts, most offer a UI to add a cron job easily. Check your hosting control panel or consult your host if unsure.).</span><span id="42d1" class="ms lq jg nw b gy or og l oh oi">The above cron job runs every 1 minute. You can set it at 5 minutes (eg. */5) or any interval you want. The shorter the interval, the faster your CSV will start to import. Once added, wait for cron job to start running. If your cron job is functioning correctly, the blue informational message will disappear and future CSV imports will be done via cron.<br/>________________________________________________<br/>To schedule campaigns or to make sending more reliable, add a cron job with the following command.</span><span id="950a" class="ms lq jg nw b gy or og l oh oi">Time Interval<br/>*/5 * * * * <br/>Command<br/>php /home/sendy/public_html/scheduled.php &gt; /dev/null 2&gt;&amp;1<br/>This command needs to be run every 5 minutes in order to check the database for any scheduled campaigns to send.<br/>(Note that adding cron jobs vary from hosts to hosts, most offer a UI to add a cron job easily. Check your hosting control panel or consult your host if unsure.).</span><span id="d3b0" class="ms lq jg nw b gy or og l oh oi">Once added, wait around 5 minutes. If your cron job is functioning correctly, you'll see the scheduling options instead of this modal window when you click on "Schedule this campaign?".<br/>_____________________________________________<br/>To activate autoresponders, add a cron job with the following command.</span><span id="4ef2" class="ms lq jg nw b gy or og l oh oi">Time Interval<br/>*/1 * * * * <br/>Command<br/>php /home/sendy/public_html/autoresponders.php &gt; /dev/null 2&gt;&amp;1<br/>This command needs to be run every minute in order to check the database for any autoresponder emails to send.<br/>(Note that adding cron jobs vary from hosts to hosts, most offer a UI to add a cron job easily. Check your hosting control panel or consult your host if unsure.).</span><span id="7d6f" class="ms lq jg nw b gy or og l oh oi">Once added, wait one minute. If your cron job is functioning correctly, you'll see the autoresponder options instead of this modal window when you click on the "Autoresponders" button.<br/>____________________________________________________<br/>Add a cron job that runs every 15 minutes with the following command:</span><span id="36a4" class="ms lq jg nw b gy or og l oh oi">Time Interval<br/>*/15 * * * * <br/>Command<br/>php /home/sendy/public_html/update-segments.php &gt; /dev/null 2&gt;&amp;1<br/>(Note that adding cron jobs vary from hosts to hosts, most offer a UI to add a cron job easily. Check your hosting control panel or consult your host if unsure.).</span><span id="2145" class="ms lq jg nw b gy or og l oh oi">Once added, wait for the cron job to start running in 15 minutes. If your cron job is functioning correctly, the blue informational message will disappear and your segmentation results will be updated automatically every 15 minutes by the cron job.</span></pre><h2 id="8b5f" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">在Virtualmin上添加cron作业</h2><ol class=""><li id="2c73" class="lb lc jg kf b kg mn kk mo ko ne ks nf kw ng la lg lh li lj bi translated">导航到您的虚拟桌面。</li><li id="04e9" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在左上角选择<strong class="kf jh"> Webmin </strong>。</li><li id="f5b7" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在<strong class="kf jh">系统</strong>下，点击<strong class="kf jh">预定Cron作业</strong>。</li><li id="4e38" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击顶部的<strong class="kf jh">创建一个新的计划cron作业</strong>。</li><li id="1a17" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">输入以下<strong class="kf jh">作业详细信息</strong> : <br/> <strong class="kf jh">作为</strong>执行cron作业:root <br/> <strong class="kf jh"> Active？</strong>:是<br/> <strong class="kf jh">命令</strong>:在这里输入你正在添加的cron任务的命令。例如，对于导入CSV，输入<code class="fe nt nu nv nw b">php /home/sendy/public_html/import-csv.php &gt; /dev/null 2&gt;&amp;1</code>。你可以通过<a class="ae jd" href="https://sendy.co/forum/discussion/4800/where-are-the-cron-job-setup-instructions/p1" rel="noopener ugc nofollow" target="_blank">查看你的熊智娟</a>或者我在上面列出的命令。<br/> <em class="om">注意:如果您的熊智娟安装没有安装在</em> <code class="fe nt nu nv nw b"><em class="om">sendy</em></code> <em class="om">上，php文件的路径可能会有所不同。<br/> </em>其余可以留空或者可以添加一个<strong class="kf jh">描述</strong>。</li><li id="958f" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">对于<strong class="kf jh">何时执行</strong>，这真的取决于你，熊智娟会给你最佳执行时间的指导方针。例如，对于导入CSV，他们建议每1分钟一次。参见上面列出的cron作业中的<strong class="kf jh">下的</strong>时间间隔。</li><li id="b77d" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">对于<strong class="kf jh">执行</strong>的日期范围，最好选择<strong class="kf jh">在任意日期</strong>运行。</li><li id="ef4a" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">创建。</strong></li><li id="a8ef" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">对其余的cron作业也这样做。</li></ol><h1 id="5877" class="lp lq jg bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">可选建议</h1><p id="0e07" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">以下是您可以在熊智娟中使用或整合的一些选项。</p><h2 id="6f7f" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">备份/恢复您的熊智娟数据库</h2><p id="767c" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">在你真正开始使用熊智娟之前，这是一个好主意。您可能需要将您的熊智娟转移到另一个服务器或移动到一个更大的数据库等。</p><p id="c2a9" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">倒车</strong></p><ol class=""><li id="c516" class="lb lc jg kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">导航至您的虚拟桌面— <code class="fe nt nu nv nw b">sendy.&lt;mydomain&gt;.com:10000</code>。</li><li id="564a" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击左侧菜单上的<strong class="kf jh">编辑数据库</strong>。</li><li id="7749" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">管理你数据库旁边的</strong>，应该命名为<code class="fe nt nu nv nw b">sendy</code>。</li><li id="1979" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在底部，点击<strong class="kf jh">备份数据库。</strong></li><li id="74d2" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在<strong class="kf jh">备份到文件</strong>部分，选择<strong class="kf jh">在浏览器中下载</strong>。</li><li id="ba98" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在底部，点击<strong class="kf jh">立即备份</strong>。</li><li id="10da" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">将下载sql文件。</li></ol><p id="8c1d" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最终，我想自动化这个过程，但没有机会这样做。希望能得到一些建议。</p><p id="c05c" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">恢复</strong></p><ol class=""><li id="5027" class="lb lc jg kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">导航至您的虚拟桌面— <code class="fe nt nu nv nw b">sendy.&lt;mydomain&gt;.com:10000</code>。</li><li id="024b" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击左侧菜单中的<strong class="kf jh">编辑数据库</strong>。</li><li id="d207" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">管理你数据库旁边的</strong>，应该命名为<code class="fe nt nu nv nw b">sendy</code>。</li><li id="8518" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击底部的<strong class="kf jh">执行SQL </strong>。</li><li id="d743" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">从文件</strong>运行SQL。</li><li id="7bb6" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">从上传的文件中选择<strong class="kf jh">，假设您已经从上一节下载了备份。</strong></li><li id="1765" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">附上你的<code class="fe nt nu nv nw b">.sql</code>文件。通常被称为<code class="fe nt nu nv nw b">backup.sql</code>。</li><li id="bf4a" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">点击<strong class="kf jh">执行</strong>。</li></ol><h2 id="fcdc" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">EC2实例的自动启动/停止</h2><p id="781b" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">对于使用EC2实例的付费版本的人来说，这是一个很好的选择。AWS按小时收费，因此EC2离线的任何时间都是省钱的。唯一的缺点是，当您的实例关闭时，熊智娟不能发送任何预定的活动，也不会从您的简讯中收集点击数据。</p><p id="ba02" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就我而言，这些电子邮件只针对一个地区的人，所以让它在半夜离线是有意义的。</p><p id="4102" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我不打算在这里重写这些步骤，因为AWS已经在他们的文章中详细介绍了每个步骤—<a class="ae jd" href="https://aws.amazon.com/premiumsupport/knowledge-center/start-stop-lambda-cloudwatch/" rel="noopener ugc nofollow" target="_blank">https://AWS . Amazon . com/premium support/knowledge-center/start-stop-lambda-cloud watch/</a></p><h2 id="fd7f" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">使用MJML创建超棒的HTML电子邮件</h2><p id="032f" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">不幸的是，熊智娟不提供所见即所得编辑器，所以如果你想写一些HTML简讯，你需要找到另一种方式来做。在选定MJML之前，我至少尝试了十种。我对此感到非常惊讶。它非常容易使用，文档中有足够的教程和例子让你自己制作。</p><p id="1d1c" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">MJML代码简洁明了，如果你使用的是他们支持的编辑器，你可以很容易地将所有内容转换成HTML并复制到熊智娟的模板中。我个人最喜欢的是<a class="ae jd" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio Code </a>，它有一个MJML插件，你可以在编码时实时查看时事通讯的样子，还可以转换成HTML，等等。</p><h2 id="e0ed" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">使用快照在AWS上自动备份熊智娟</h2><p id="5cdb" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">随着你的熊智娟数据库的增长，开始备份你的服务器是个好主意，主要是你的注册用户数据库。也避免了重新设置服务器。</p><p id="3d23" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">AWS已经有了一个自动执行这些备份的教程—<a class="ae jd" href="https://aws.amazon.com/premiumsupport/knowledge-center/ebs-snapshot-data-lifecycle-manager/" rel="noopener ugc nofollow" target="_blank">https://AWS . Amazon . com/premium support/knowledge-center/EBS-snapshot-data-life cycle-manager/</a></p><p id="ce08" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有许多方法可以备份您的数据，使用快照可能会变得昂贵。所以，在你继续做这件事之前，探索一下你的选择。</p><h2 id="04fa" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">更新您的熊智娟安装</h2><p id="7998" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">几个月前我写了这个帖子，现在是时候让熊智娟做一些更新了。</p><blockquote class="oj ok ol"><p id="bb81" class="kd ke om kf b kg kh ki kj kk kl km kn on kp kq kr oo kt ku kv op kx ky kz la ij bi translated">注意:在本教程中，我还对熊智娟在EC2上的首次安装方式做了新的更新。最初，我有一个稍微麻烦的方法，首先将文件复制到EC2上的Ubuntu主目录，然后SSH 'ing并将它们复制到public_html目录。因此，对于使用这种旧方法的读者，我已经将其更新为直接SSH到EC2上的sendy用户。您可以向上滚动到“设置熊智娟”部分，查看该部分的更新。下一节假设您可以通过SSH进入sendy用户。</p></blockquote><p id="01ef" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">更新熊智娟非常简单。</p><ol class=""><li id="d439" class="lb lc jg kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">您可能会在熊智娟页面的底部看到一条消息，说明有可用的更新。单击该按钮，系统会提示您在本地机器上下载新的熊智娟。</li><li id="be8a" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">你还会看到熊智娟关于如何更新你的系统的一些说明。查看这些说明很重要，因为每次更新都可能需要您做一些特别的事情。下面的步骤假设你已经看过了。</li><li id="78bf" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">一般来说，一旦下载了新的sendy文件并在本地机器上解压缩，就会要求您从EC2实例中复制<code class="fe nt nu nv nw b">/includes/config.php</code>文件。这很重要。sendy下载中的新配置文件不会保存您的数据库配置。所以复制，把旧的<code class="fe nt nu nv nw b">config.php</code>复制到这个新下载的安装文件中。你可以直接通过文件管理器下的VirtualMin页面来实现。</li><li id="9135" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">如果你已经在<code class="fe nt nu nv nw b">/locale/</code>下载了额外的语言文件，那么把它们从EC2复制到你的本地机器上。</li><li id="e764" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">如果您对<code class="fe nt nu nv nw b">.htaccess</code>文件进行了更改，那么也下载该文件。</li><li id="4a29" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">用下载的文件替换新版本— <code class="fe nt nu nv nw b">config.php</code>、<code class="fe nt nu nv nw b">/locale/</code>、<code class="fe nt nu nv nw b">.htaccess</code></li><li id="6f9e" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">使用EC2通常的SSH细节登录到Filezilla上的EC2实例，但是将用户名改为<code class="fe nt nu nv nw b">sendy</code>。<br/> <em class="om">注意:对于在2020年5月12日之前使用本教程的读者，请向上滚动到设置熊智娟，查看如何使用</em> <code class="fe nt nu nv nw b"><em class="om">sendy</em></code> <em class="om">用户登录到您的EC2实例。</em></li><li id="42f0" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">将新下载的sendy安装文件复制并替换到<code class="fe nt nu nv nw b">/home/sendy/public_html/</code>的EC2实例目录中。</li><li id="a9f0" class="lb lc jg kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">刷新您的熊智娟页面，您应该会看到新的变化(新版本可用的消息消失了)。如果你看不到这些变化，你的电脑可能已经缓存了这个页面。</li></ol></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><p id="b046" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">哇，那是一个很长的教程。会有一些错误，我提前道歉。我已经读了好几遍了，但是它太长了！请指出任何不符合的地方。</p></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><p id="904e" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以在下面找到更多的黑客系列。本系列旨在用免费工具或最低成本快速构建一些东西，而不是购买专有软件。看看他们！</p><h2 id="348c" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated"><a class="ae jd" href="https://medium.com/all-technology-feeds/hacking-it-google-sheets-crm-59e413bee303" rel="noopener">黑客入侵:谷歌工作表&amp;客户关系管理</a></h2><h2 id="3f31" class="ms lq jg bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated"><a class="ae jd" href="https://medium.com/@nem25/hacking-it-generate-pdfs-from-google-forms-3ca4fcc5a0aa" rel="noopener">破解它:从谷歌表单生成PDFs】</a></h2></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><blockquote class="os"><p id="809f" class="ot ou jg bd ov ow ox oy oz pa pb la dk translated">希望这个指南是有用的，如果有任何意见/编辑/问题/疑问，请提出来:)欢迎所有的反馈。也可以通过Twitter随意提问—<a class="ae jd" href="https://twitter.com/neha_m25" rel="noopener ugc nofollow" target="_blank">https://twitter.com/neha_m25</a></p></blockquote></div></div>    
</body>
</html>