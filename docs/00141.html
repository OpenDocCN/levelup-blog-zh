<html>
<head>
<title>Making a scrolling card list — WotW</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">制作滚动卡片清单——WotW</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/making-a-scrolling-card-list-wotw-bcd5e31fbcc5?source=collection_archive---------0-----------------------#2018-05-23">https://levelup.gitconnected.com/making-a-scrolling-card-list-wotw-bcd5e31fbcc5?source=collection_archive---------0-----------------------#2018-05-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/71f59c52877a269de736e664b72a7647.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*893VxYudpdDifLpo.jpeg"/></div></div></figure><p id="2666" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">欢迎来到“每周小部件”系列，在这里我拍摄了令人敬畏的UI/UX组件的gif或视频，并用代码将它们赋予生命。</p><blockquote class="kw kx ky"><p id="97bd" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated">查看本周所有的<a class="ae ld" rel="noopener ugc nofollow" target="_blank" href="https://levelup.gitconnected.com/wotw/home"> Widget文章</a>并关注Gitconnected，确保你不会错过任何Widget教程。</p></blockquote><p id="06b1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">今天我们将学习一系列卡片，当你向下滚动时，这些卡片会显示出来。这个小工具的灵感来自于<a class="ae ld" href="https://dribbble.com/Hiwowstudio" rel="noopener ugc nofollow" target="_blank"> Hiwow </a>创作的这个<a class="ae ld" href="https://uimovement.com/ui/5572/movie-animation/" rel="noopener ugc nofollow" target="_blank">运球</a>的第一部分，看起来是这样的:</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div class="gh gi le"><img src="../Images/4107a6a0ccc332ab41e04726e5585f8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*QubAoJ967e6Um9fY.gif"/></div></figure><h2 id="590a" class="lj lk iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">准备</h2><p id="2b8e" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">对于今天的小工具，我们将只使用<a class="ae ld" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>，没有动画库，这意味着我们将大量使用Vue的功能。</p><p id="fd74" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你想继续，你可以派生这个已经有依赖关系的<a class="ae ld" href="https://codepen.io/ederdiaz/pen/bMLbNp" rel="noopener ugc nofollow" target="_blank"> codepen模板</a>。</p><h2 id="b2e8" class="lj lk iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">初始标记</h2><p id="c2a3" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">为了让我们的应用程序工作，我们应该有一个id为<code class="fe mh mi mj mk b">app</code>的主div，Vue.js将安装在那里。完成这些后，我们可以开始创建卡片了，在本例中，我将只创建一张卡片，因为稍后我们将通过编程创建其余的卡片。<br/>每张卡片都将有一个占位符图像，它将紧挨着一个<code class="fe mh mi mj mk b">div</code>，我将把它称为<em class="kz">卡片内容</em>。该<em class="kz">卡片内容</em>显示标题、描述和评级数据。</p><pre class="lf lg lh li gt ml mk mm mn aw mo bi"><span id="049e" class="lj lk iq mk b gy mp mq l mr ms">&lt;div id="app"&gt;<br/>  &lt;div class="card"&gt;<br/>    &lt;img class="card__image" src="https://placeimg.com/100/140/animals"&gt;      <br/>    &lt;div class="card__content"&gt;<br/>      &lt;h3&gt;title&lt;/h3&gt;<br/>      &lt;p&gt;description&lt;/p&gt;<br/>      &lt;div class="card__rating"&gt;<br/>        &lt;span&gt;8.0 &lt;/span&gt;<br/>        &lt;span class="card__stars--active"&gt;★★★&lt;/span&gt;<br/>        &lt;span class="card__stars--inactive"&gt;★★&lt;/span&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="9d29" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于类的命名，你可能已经注意到我使用了<a class="ae ld" href="http://getbem.com/introduction/" rel="noopener ugc nofollow" target="_blank"> BEM </a>，这将有助于下一步设计卡片的样式。</p><h2 id="78d5" class="lj lk iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">式样</h2><p id="8d45" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">现在我们有一个带有丑陋测试的图像，让我们改变它。首先，我们将有一个浅灰色的背景直接设置在“主体”中。</p><pre class="lf lg lh li gt ml mk mm mn aw mo bi"><span id="1a5a" class="lj lk iq mk b gy mp mq l mr ms">body {<br/>  background-color: #FEFEFE;<br/>}</span></pre><p id="73fb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，我们将为卡片声明一个预定义的高度，匹配图像高度<code class="fe mh mi mj mk b">140px</code>。我们还添加了一些细节，通过设置填充，改变字体和添加阴影来创建一个浮动卡的效果。</p><pre class="lf lg lh li gt ml mk mm mn aw mo bi"><span id="703d" class="lj lk iq mk b gy mp mq l mr ms">.card {<br/>  height: 140px;<br/>  background-color: white;<br/>  padding: 5px;<br/>  margin-bottom: 10px;<br/>  font-family: Helvetica;<br/>  box-shadow: 0px 3px 8px 0px rgba(0,0,0,0.5);<br/>}</span></pre><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/41dc14769064e0bb3c04d19f86667ef2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hNGeat1iV6laL4jc.png"/></div></div></figure><p id="627d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们就要到了，该是设计内部元素的时候了。</p><p id="3100" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">卡片图像和卡片内容都应该有一个<code class="fe mh mi mj mk b">display: inline-block</code>并排。图像的宽度是<code class="fe mh mi mj mk b">100px</code>,并且有一个小的边距将其与文本分开，所以卡片内容将占用卡片宽度的剩余部分。</p><p id="2277" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">卡片内容的内部文本需要与顶部对齐，否则它看起来不会像我们想要的那样。就标题而言，<code class="fe mh mi mj mk b">h3</code>元素的默认边距太大，所以我们将把它设置为<code class="fe mh mi mj mk b">0</code>。<br/>卡片分级容器需要与底部对齐，我们将使用<code class="fe mh mi mj mk b">position: absolute</code>来实现这一点。最后但同样重要的是，星星<code class="fe mh mi mj mk b">span</code>元素将根据一颗星星是否“活跃”而具有不同的颜色。</p><pre class="lf lg lh li gt ml mk mm mn aw mo bi"><span id="c098" class="lj lk iq mk b gy mp mq l mr ms">.card__img {<br/>  display: inline-block;<br/>  margin-right: 10px;<br/>}<br/><br/>.card__content {<br/>  display: inline-block;<br/>  position: relative;<br/>  vertical-align: top;<br/>  width: calc(100% - 120px);<br/>  height: 140px;<br/>}<br/><br/>.card__content h3 {<br/>  margin: 0;<br/>}<br/><br/>.card__rating {<br/>  position: absolute;<br/>  bottom: 0;<br/>}<br/><br/>.card__stars--active {<br/>  color: #41377C;<br/>}<br/>.card__stars--inactive {<br/>  color: #CCCCCC;<br/>}</span></pre><p id="2fa7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它应该开始看起来更像运球:</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/ee310b8df9c7652e84008bd3c1e30786.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lWNkkQSRYtnhdo52EaxMyw.png"/></div></div></figure><p id="a2d5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你有一双敏锐的眼睛，你可能会注意到活跃恒星和不活跃恒星之间的空间差异。这是由两个跨度元素之间的空间造成的，可以像这样移除:</p><pre class="lf lg lh li gt ml mk mm mn aw mo bi"><span id="99a7" class="lj lk iq mk b gy mp mq l mr ms">...<br/>      &lt;div class="card__rating"&gt;<br/>        &lt;span&gt;8.0 &lt;/span&gt;<br/>        &lt;span class="card--stars-active"&gt;★★★&lt;/span&gt;&lt;!-- I'm removing the space<br/>     --&gt;&lt;span class="card--stars-inactive"&gt;★★&lt;/span&gt;<br/>      &lt;/div&gt;<br/>...</span></pre><h2 id="6417" class="lj lk iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">行为</h2><p id="2fb6" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">现在，在我们的Vue实例中，我们将开始声明我们需要在组件上使用的数据。我们需要很多卡片，但我没有每张都做，而是做了三张，复制了很多次:</p><pre class="lf lg lh li gt ml mk mm mn aw mo bi"><span id="edbe" class="lj lk iq mk b gy mp mq l mr ms">const cardsData = [<br/>  {<br/>    img:'https://placeimg.com/100/140/animals',<br/>    title: 'Title 1',<br/>    description: 'Tempora quam ducimus dolor animi magni culpa neque sit distinctio ipsa quos voluptates accusantium possimus earum rerum iure',<br/>    rating: 9.5,<br/>    stars: 4<br/>  },<br/>  {<br/>    img:'https://placeimg.com/100/140/arch',<br/>    title: 'Title 2',<br/>    description: 'Tempora quam ducimus dolor animi magni culpa neque sit distinctio ipsa quos voluptates accusantium possimus earum rerum iure',<br/>    rating: 8.4,<br/>    stars: 5<br/>  },<br/>  {<br/>    img:'https://placeimg.com/100/140/people',<br/>    title: 'Title 3',<br/>    description: 'Tempora quam ducimus dolor animi magni culpa neque sit distinctio ipsa quos voluptates accusantium possimus earum rerum iure',<br/>    rating: 7.234,<br/>    stars: 2<br/>  },<br/>  // copy and paste those three items as many times as you want<br/>]</span></pre><p id="a6ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，在我们的Vue实例中，我们可以将该数组设置到数据属性中，这样我们就可以开始跟踪它。</p><pre class="lf lg lh li gt ml mk mm mn aw mo bi"><span id="331a" class="lj lk iq mk b gy mp mq l mr ms">new Vue({<br/>  el: '#app',<br/>  data: {<br/>    cards: cardsData<br/>  }<br/>})</span></pre><p id="144b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们用HTML模板绑定数据。通过一个<code class="fe mh mi mj mk b">v-for</code>指令，我们将遍历cards数据数组并呈现每个属性。</p><pre class="lf lg lh li gt ml mk mm mn aw mo bi"><span id="8640" class="lj lk iq mk b gy mp mq l mr ms">&lt;div id="app"&gt;<br/>  &lt;div class="card" <br/>    v-for="(card, index) in cards"<br/>    :key="index"&gt;<br/><br/>    &lt;img class="card__image" :src="card.img"&gt;      <br/>    &lt;div class="card__content"&gt;<br/>      &lt;h3&gt;{{card.title}}&lt;/h3&gt;<br/>      &lt;p&gt;{{card.description}}&lt;/p&gt;<br/>      &lt;div class="card__rating"&gt;<br/>        &lt;span&gt;{{card.rating}} &lt;/span&gt;<br/>        &lt;span class="card__stars--active"&gt;{{card.stars}}&lt;/span&gt;<br/>        &lt;span class="card__stars--inactive"&gt;{{5 - card.stars}}&lt;/span&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/><br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="9282" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">很好，我们有很多卡片，不幸的是收视率和明星看起来不像我们预期的那样。</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/72c868f57ef6ca8df668ed5fd7ef319f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6DXHkfSwGKVKj7YO.png"/></div></div></figure><p id="1bd7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如你所注意到的，星星就像数字一样被渲染，最后一个评级被打印出来，带有不止一个十进制数字。幸运的是，Vue.js有一个叫做<a class="ae ld" href="https://vuejs.org/v2/guide/filters.html" rel="noopener ugc nofollow" target="_blank"> filters </a>的东西，可以帮助我们按照我们想要的方式解析任何数据。</p><p id="9fd1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们回到Vue实例并声明两个过滤器，一个将约束数字，另一个将把任何数字转换成星号:</p><pre class="lf lg lh li gt ml mk mm mn aw mo bi"><span id="e2e4" class="lj lk iq mk b gy mp mq l mr ms">// ... data<br/>  filters: {<br/>    oneDecimal: function (value) {<br/>      return value.toFixed(1)<br/>    },<br/>    toStars: function (value) {<br/>      let result = ''<br/>      while(result.length &lt; value) {<br/>        result+='★' <br/>      }<br/>      return result<br/>    }<br/>  },<br/>  // ...</span></pre><p id="ad81" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这些过滤器准备就绪后，我们可以返回模板，将它们添加到我们需要过滤的数据中:</p><pre class="lf lg lh li gt ml mk mm mn aw mo bi"><span id="f5aa" class="lj lk iq mk b gy mp mq l mr ms">&lt;!-- ... card markup --&gt;<br/>  &lt;span&gt;{{card.rating | oneDecimal}} &lt;/span&gt;<br/>  &lt;span class="card__stars--active"&gt;{{card.stars | toStars }}&lt;/span&gt;&lt;!--<br/>  --&gt;&lt;span class="card__stars--inactive"&gt;{{5 - card.stars | toStars}}&lt;/span&gt;</span></pre><p id="8268" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就是这么简单<code class="fe mh mi mj mk b">{{ value | filter }}</code>，数据会在渲染前被转换。</p><h2 id="0f50" class="lj lk iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">卷动</h2><p id="047d" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">到目前为止，我们还没有在卡片列表中添加任何行为，我们只是关注它的外观和渲染。动画时间到了！</p><p id="e0a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，当应用程序滚动时，我们需要以某种方式开始跟踪，为此我们将使用另一个Vue特性，称为<strong class="ka ir">自定义指令</strong>。</p><p id="3d24" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个滚动指令是从<a class="ae ld" href="https://vuejs.org/v2/cookbook/creating-custom-scroll-directives.html" rel="noopener ugc nofollow" target="_blank"> Vue.js文档</a>中提取的，当我们将它添加到我们的js中时，它将允许我们使用<code class="fe mh mi mj mk b">v-scroll</code>指令:</p><pre class="lf lg lh li gt ml mk mm mn aw mo bi"><span id="f0aa" class="lj lk iq mk b gy mp mq l mr ms">Vue.directive('scroll', {<br/>  inserted: function (el, binding) {<br/>    let f = function (evt) {<br/>      if (binding.value(evt, el)) {<br/>        window.removeEventListener('scroll', f)<br/>      }<br/>    }<br/>    window.addEventListener('scroll', f)<br/>  }<br/>})</span></pre><p id="74a9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后在我们的HTML上，我们的应用程序div中的一个快速更改将允许我们使用它:</p><pre class="lf lg lh li gt ml mk mm mn aw mo bi"><span id="ab62" class="lj lk iq mk b gy mp mq l mr ms">&lt;div id="app" v-scroll="onScroll"&gt;<br/>  &lt;!-- ... rest of the markup --&gt;</span></pre><p id="5922" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们应该能够创建<code class="fe mh mi mj mk b">onScroll</code>方法来开始跟踪滚动位置:</p><pre class="lf lg lh li gt ml mk mm mn aw mo bi"><span id="e08a" class="lj lk iq mk b gy mp mq l mr ms">data: {<br/>    cards: cardsData,<br/>    scrollPosition: 0<br/>  },<br/>  methods: {<br/>    onScroll () {<br/>      this.scrollPosition = window.scrollY<br/>    }<br/>  },</span></pre><p id="41db" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意，我们添加了<code class="fe mh mi mj mk b">scrollPosition</code>来跟踪<code class="fe mh mi mj mk b">window.scrollY</code>属性。这将有助于Vue在发生变化时重新计算。</p><h2 id="00a9" class="lj lk iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">动画卡片</h2><p id="8ab3" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">在最初的运球中，当卡片开始到达屏幕顶部时，它们有这个<em class="kz">消失</em>的效果。为了实现这一点，我们需要在每次<code class="fe mh mi mj mk b">scrollPosition</code>更新时计算每张卡片的风格。</p><p id="31fe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来的两个方法执行所有的数学运算来生成样式。一开始可能会有点混乱，但我会尽力解释它们。</p><p id="bb18" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先我们设置一个<code class="fe mh mi mj mk b">cardHeight</code>常量，它具有一张卡片的值，包括它的填充和边距。然后考虑到卡的索引，我们将卡的位置设置为<code class="fe mh mi mj mk b">positionY</code>，第一个是<code class="fe mh mi mj mk b">0</code>，第二个是<code class="fe mh mi mj mk b">160</code>，然后是第三个<code class="fe mh mi mj mk b">320</code>，以此类推。</p><p id="4bbc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">之后，我们需要知道卡片离顶部有多近，我们这样做，并将值赋给<code class="fe mh mi mj mk b">deltaY</code>。我们需要在卡片到达屏幕顶部时开始制作动画，所以我们应该只关心deltaY何时小于<code class="fe mh mi mj mk b">0</code>。我将它夹在<code class="fe mh mi mj mk b">-160</code>和<code class="fe mh mi mj mk b">0</code>之间，因为当deltaY小于<code class="fe mh mi mj mk b">-160</code>时，它已经离开屏幕。</p><p id="26ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，我们创建一个<code class="fe mh mi mj mk b">dissapearingValue</code>、<code class="fe mh mi mj mk b">yValue</code>和<code class="fe mh mi mj mk b">zValue</code>，它们依赖于<em class="kz"> dY </em>的值。顾名思义，<code class="fe mh mi mj mk b">dissapearingValue</code>会使卡片褪色，所以我们将其绑定到css opacity属性。其他两个值将有助于转换属性，使卡片看起来像是在其他卡片后面。</p><pre class="lf lg lh li gt ml mk mm mn aw mo bi"><span id="3b81" class="lj lk iq mk b gy mp mq l mr ms">// ... methods<br/>    calculateCardStyle (card, index) {<br/>      const cardHeight = 160 // height + padding + margin<br/>      <br/>      const positionY = index * cardHeight<br/>      const deltaY = positionY - this.scrollPosition<br/><br/>      // constrain deltaY between -160 and 0<br/>      const dY = this.clamp(deltaY, -cardHeight, 0)<br/><br/>      const dissapearingValue = (dY / cardHeight) + 1<br/>      const zValue = dY / cardHeight * 50<br/>      const yValue = dY / cardHeight * -20<br/><br/>      card.style = {<br/>        opacity: dissapearingValue,<br/>        transform: `perspective(200px) translate3d(0,${yValue}px, ${zValue}px)`<br/>      }<br/>      return card<br/>    },<br/>    clamp (value, min, max) {<br/>      return Math.min(Math.max(min, value), max)<br/>    }</span></pre><p id="d936" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在只需要通过该方法传递每张卡片，并将结果公开为一个名为<em class="kz"> styledCards </em>的计算属性:</p><pre class="lf lg lh li gt ml mk mm mn aw mo bi"><span id="6e21" class="lj lk iq mk b gy mp mq l mr ms">computed: {<br/>    styledCards () {<br/>      return this.cards.map(this.calculateCardStyle)<br/>    }<br/>  },</span></pre><p id="1d66" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这已经差不多准备好了，让我们将新创建的样式绑定到卡片HTML代码中:</p><pre class="lf lg lh li gt ml mk mm mn aw mo bi"><span id="703e" class="lj lk iq mk b gy mp mq l mr ms">&lt;div class="card" <br/>    v-for="(card, index) in styledCards"<br/>    :style="card.style"<br/>    :key="index"&gt;</span></pre><p id="f611" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在是最终结果(记得向下滚动):</p><figure class="lf lg lh li gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="871a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就是本周的<strong class="ka ir">小部件。</strong></p><p id="193e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你渴望更多，你可以检查其他WotW: <br/> — <a class="ae ld" href="http://ederdiaz.com/blog/2018/05/15/making-an-animated-nav-component-wotw/" rel="noopener ugc nofollow" target="_blank">动画导航</a> <br/> — <a class="ae ld" href="http://ederdiaz.com/blog/2018/05/09/how-i-made-a-fluid-layout-component-wotw/" rel="noopener ugc nofollow" target="_blank">流体布局</a> <br/> — <a class="ae ld" href="http://ederdiaz.com/blog/2018/04/25/how-to-make-an-animated-wizard-component-wotw/" rel="noopener ugc nofollow" target="_blank">向导</a></p><p id="26cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另外，如果你想看下周的某个小部件，可以在评论区发表。</p><p id="5980" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下周见，关注<a class="ae ld" href="https://levelup.gitconnected.com" rel="noopener ugc nofollow" target="_blank"> gitconnected </a>获取每周小工具！</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><p id="cb11" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kz">最初发表于</em><a class="ae ld" href="http://ederdiaz.com/blog/2018/05/23/making-a-scrolling-card-list-wotw/" rel="noopener ugc nofollow" target="_blank"><em class="kz">Eder díaz</em></a><em class="kz">。</em></p></div></div>    
</body>
</html>