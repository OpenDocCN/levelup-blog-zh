<html>
<head>
<title>Generate a GraphQL API for Amazon RDS PostgreSQL With StepZen</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用StepZen为Amazon RDS PostgreSQL生成GraphQL API</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/generate-a-graphql-api-for-amazon-rds-postgresql-with-stepzen-8e37cfaba2ec?source=collection_archive---------7-----------------------#2022-10-13">https://levelup.gitconnected.com/generate-a-graphql-api-for-amazon-rds-postgresql-with-stepzen-8e37cfaba2ec?source=collection_archive---------7-----------------------#2022-10-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7031cdda06176cef5e76320e84c1a0df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*V6tm_7rz0gEAA-Oe.png"/></div></div></figure><p id="e0e8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">StepZen是一个GraphQL即服务云基础设施，它帮助您从不同的数据源构建和部署可伸缩的、安全的和高性能的GraphQL APIs。使用StepZen，您可以从数据库(MySQL、PostgreSQL、NoSQL)或现有的REST或GraphQL API启动并运行您的GraphQL API。</p><p id="5481" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本文中，您将学习如何将StepZen与基于PostgreSQL的Amazon RDS数据库一起使用。</p><h2 id="58a2" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">关于亚马逊(AWS) RDS数据库</h2><p id="d6d1" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">Amazon Web Services关系数据库系统(或AWS RDS PostgreSQL)是一个基于云的关系数据库系统，它使得在云中设置、操作和扩展关系数据库变得更加容易。Amazon RDS数据库为PostgreSQL提供了高可用性，这使得它们非常适合在高流量的生产环境中使用。除了高可用性，您还可以轻松部署新的数据库，获得备份和恢复选项，以及增强的安全性，而不是在内部运行PostgreSQL数据库。</p><p id="553a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将AWS RDS与StepZen一起使用有很大的好处，因为这两种服务都运行在云中，并针对性能进行了优化。使用StepZen创建的GraphQL APIs会自动伸缩，以满足您的API的流量需求。所以你不必担心你的API的流量和安全性，因为StepZen已经覆盖了你！另一方面，AWS RDS确保当GraphQL API的流量增加时，数据库不会成为瓶颈。</p><p id="b252" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这篇文章将展示如何使用StepZen为AWS RDS PostgreSQL生成一个GraphQL API。我们开始吧！</p><h2 id="be82" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">设置AWS RDS设置:使用Amazon的关系数据库服务(RDS)创建和连接PostgreSQL数据库</h2><p id="3080" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">我们将学习如何创建PostgreSQL数据库并将其连接到基于云的数据库管理系统。这通常是一项艰巨的任务，但现在这是一件简单的事情，这都要感谢AWS。</p><p id="4a0d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以通过Amazon Web Service的RDS web产品创建并部署六个关系数据库。RDS支持的数据库引擎有MariaDB、Oracle数据库、MySQL、SQL Server、Amazon Aurora，当然还有PostgreSQL。</p><ul class=""><li id="4986" class="lu lv iq ka b kb kc kf kg kj lw kn lx kr ly kv lz ma mb mc bi translated">第一步:注册一个亚马逊网络服务账户</li><li id="1f9f" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">创建一个亚马逊网络服务账户非常简单。你需要做的就是去aws.amazon.com的T2。这个网站的登录页面是通用的，像其他网站一样。你现在所要做的就是点击“创建AWS账户”</li><li id="ca8b" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated"><strong class="ka ir">步骤2:创建一个RDS实例</strong></li><li id="2e30" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">创建您的AWS帐户后，转到位于左上角或页脚的服务。点击它并选择RDS。选择RDS后，将提示您选择一个关系数据库引擎。在这种情况下，我们将使用PostgreSQL数据库引擎。您还会注意到一个下拉菜单，您可以在其中选择数据库版本。选择最新版本，或至少第二个最新版本。</li><li id="81b7" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated"><strong class="ka ir">步骤3:配置您的数据库实例</strong></li><li id="1c50" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">此时，您需要为数据库实例命名，并设置主用户名和密码。您在这里设置的密码和用户名用于本地和云数据库交互。</li></ul><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mj"><img src="../Images/3169dd7e662038835dd74db007868601.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/format:webp/0*hY_GYXcevklad8-h.png"/></div></div></figure><ul class=""><li id="1a2f" class="lu lv iq ka b kb kc kf kg kj lw kn lx kr ly kv lz ma mb mc bi translated">选择“PostgreSQL”作为数据库引擎后，您需要配置数据库实例大小、可用性和存储。尽管进行个性化选择总是好的，但是在AWS数据库创建的这一点上，您应该保留所有的默认设置，这仅仅是因为最佳选择已经被默认勾选。最后，点击“创建数据库”</li><li id="5882" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">我们将不得不等待一段时间，以便AWS可以完成设置我们新创建的数据库。这个过程一般不超过10分钟。然后嘣！我们的数据库准备好了！</li></ul><p id="80fe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们完成了数据库的创建。现在是时候将我们的云数据库连接到本地PostgreSQL了。我们将使用pgAdmin 4作为本地PostgreSQL开发环境。</p><h2 id="8508" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">pgAdmin和AWS PostgreSQL的集成</h2><p id="57f8" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">将PostgreSQL数据库连接到AWS非常简单。您所要做的就是在“查看连接详细信息”中获取可用的连接凭据。您需要从AWS获得的唯一信息是端口号、主机端点、用户名和一些安全组配置。</p><ul class=""><li id="083a" class="lu lv iq ka b kb kc kf kg kj lw kn lx kr ly kv lz ma mb mc bi translated"><strong class="ka ir">第一步:从“连接详细信息”中复制登录凭证</strong>。</li><li id="4d09" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">创建数据库实例后，连接到新的AWS RDS PostgreSQL数据库所需的所有细节都已经可用。接下来要做的是单击安全组栏并查找入站规则。为了避免中断PostgreSQL-AWS连接，单击编辑入站规则并选择“Anywhere”</li></ul><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/ec97c5515c5105909e6e9db2583da159.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fVYbeEO0yZCzeigJ.png"/></div></div></figure><ul class=""><li id="f615" class="lu lv iq ka b kb kc kf kg kj lw kn lx kr ly kv lz ma mb mc bi translated"><strong class="ka ir">第二步:下载并安装pgAdmin或EDB PostgreSQL套件</strong></li><li id="68b2" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">可以从他们的<a class="ae mi" href="http://pgadmin.org/" rel="noopener ugc nofollow" target="_blank">官网</a>下载pgAdmin。来自EDB的PostgreSQL也是如此。设置基本上很简单，只需点击安装程序，等待程序完成安装。</li><li id="be39" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated"><strong class="ka ir">步骤3:启动pgAdmin并连接到AWS数据库</strong></li><li id="2c71" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">像任何应用程序一样启动已经安装的pgAdmin。右键单击pgAdmin中的服务器对象，然后单击“create”。</li><li id="a668" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">输入数据库实例的名称，然后单击connection选项卡。从AWS RDS控制台输入登录凭据，最后单击“保存”。</li></ul><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/ef47014eba3bf3292363e3f5053a3a24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Z7ptILyoBJc311-0.png"/></div></div></figure><ul class=""><li id="4cab" class="lu lv iq ka b kb kc kf kg kj lw kn lx kr ly kv lz ma mb mc bi translated">现在，您的工作区应该有了一些变化，并且包含了PostgreSQL数据库的模式。</li></ul><p id="e8f6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们在下一节继续向这个数据库添加数据。</p><h2 id="af13" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">使用pgAdmin向AWS RDS添加数据</h2><p id="8a66" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">我们差不多完成了数据库的设置。是时候将一些数据添加到我们的AWS RDS数据库中了，我们将使用这些数据通过StepZen创建我们的GraphQL模式。为此，我们将再次使用pgAdmin，我们已经在上一节中设置了它。</p><blockquote class="mp mq mr"><p id="ad5d" class="jy jz ms ka b kb kc kd ke kf kg kh ki mt kk kl km mu ko kp kq mv ks kt ku kv ij bi translated">您还可以使用其他工具向PostgreSQL数据库添加数据，例如直接从命令行使用<a class="ae mi" href="https://www.postgresql.org/docs/current/app-psql.html" rel="noopener ugc nofollow" target="_blank"> psql </a>。</p></blockquote><p id="1d3f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将使用几个产品作为我们数据库的数据。每个产品都有自己的<code class="fe mw mx my mz b">description</code>、<code class="fe mw mx my mz b">price</code>、<code class="fe mw mx my mz b">quantity</code>，以及各自独特的<code class="fe mw mx my mz b">IDs. To achieve this, we’ll create a table named </code>产品。包含以下各列:</p><ul class=""><li id="d83e" class="lu lv iq ka b kb kc kf kg kj lw kn lx kr ly kv lz ma mb mc bi translated"><code class="fe mw mx my mz b">area</code>:我们桌子的面积是<code class="fe mw mx my mz b">Products</code>，因为我们将存储产品数据。</li><li id="b526" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">这是我们的主键。</li><li id="fe3c" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">上面有我们产品的名字。</li><li id="f66f" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated"><code class="fe mw mx my mz b">quantity</code>:显示每个产品的数量。</li><li id="aa72" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated"><code class="fe mw mx my mz b">price</code>:该列显示每种产品的价格。</li></ul><p id="af50" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面的CSV数据包含我们的数据库列中使用的数据:</p><pre class="mk ml mm mn gt na mz nb nc aw nd bi"><span id="b866" class="kw kx iq mz b gy ne nf l ng nh">"area","id","description","quantity","price"<br/>"Product",1,"Rice",20,120<br/>"Product",2,"Bread",400,5<br/>"Product",3,"Oysters",35,50<br/>"Product",4,"Beans",10,3<br/>"Product",5,"Grape",456,23</span></pre><p id="0d29" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">向我们的远程数据库添加数据与向本地数据库添加数据是一样的，您所要做的就是在您的工作空间中定位“表”。</p><p id="56d0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">点击它，然后点击“创建一个新表”。创建一个表名，然后单击列栏。您将在这里添加表格列。</p><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/39b33fd984f88a241c07db9b58aeef6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hP7pH_IYctib56gB.png"/></div></div></figure><p id="510f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要查看和编辑表格数据，只需右键单击表格名称并选择“查看和编辑数据”下图显示了我们在Postgres中使用的列和行数据。</p><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/75edaf034ec451251c2fb940a9b9944a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HVGUOtGQu19KL_I8.png"/></div></div></figure><p id="5f5a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建表数据后，单击“刷新”来同步您的主数据库。这将确保所有新的变更都被推送到AWS。</p><h2 id="db6d" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">从AWS RDS生成GraphQL模式</h2><p id="efca" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">现在我们已经建立了数据库，是时候生成一个GraphQL模式了。我们将使用StepZen来生成我们的GraphQL模式。StepZen是一个GraphQL API服务，允许您连接到任何数据源，并从中生成一个可以部署到云的GraphQL模式。</p><p id="252b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要使用StepZen，您需要安装CLI。StepZen CLI的安装过程并不难。您只需使用以下npm命令:</p><pre class="mk ml mm mn gt na mz nb nc aw nd bi"><span id="2a8e" class="kw kx iq mz b gy ne nf l ng nh">npm install -g stepzen</span></pre><p id="2ea0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">确保在您的计算机上安装Node.js，因为它用作CLI的运行时。安装CLI后，您可以从AWS RDS数据库生成一个GraphQL模式。</p><ul class=""><li id="24c4" class="lu lv iq ka b kb kc kf kg kj lw kn lx kr ly kv lz ma mb mc bi translated"><strong class="ka ir">第一步:创建一个StepZen账户</strong></li><li id="77b8" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">要使用StepZen CLI，您必须创建一个帐户，就像我们在AWS设置期间所做的那样。您可以在这里创建一个账户<a class="ae mi" href="https://stepzen.com/signup" rel="noopener ugc nofollow" target="_blank">。然后转到您的</a><a class="ae mi" href="https://dashboard.stepzen.com/" rel="noopener ugc nofollow" target="_blank"> StepZen仪表板</a>，在这里您可以监控您已经部署的API，并访问StepZen的CLI所需的登录详细信息。</li><li id="2041" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">您可以从您的<a class="ae mi" href="https://dashboard.stepzen.com/account" rel="noopener ugc nofollow" target="_blank">我的步骤—认证</a>选项卡中获取您的用户名和API密钥。您将需要这些凭据来登录StepZen CLI。</li><li id="ba7d" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated"><strong class="ka ir">步骤2:登录StepZen CLI </strong></li><li id="3f10" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">要登录到StepZen CLI，您需要使用以下命令:</li><li id="3864" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated"><code class="fe mw mx my mz b">stepzen login</code></li><li id="735e" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">这将提示您输入用户名和API密钥。输入凭据后，您将登录到StepZen CLI。</li><li id="070e" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated"><strong class="ka ir">步骤3:使用StepZen导入AWS RDS PostgreSQL </strong></li><li id="1a2e" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated">StepZen简化了从不同来源导入数据库的过程；AWS RDS PostgreSQL也不例外。你所要做的就是使用下面的命令。Amazon RDS PostgreSQL的凭证与我们用来连接pgAdmin的凭证相同。</li><li id="7a43" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated"><code class="fe mw mx my mz b">$ stepzen import postgresql ? What would you like your endpoint to be called? (api/product-list) Downloading from StepZen...... done ? What is your host? &lt;AWS_RDS_HOST&gt; ? What is your database name? &lt;PGADMIN_DB_NAME&gt; ? What is the username? &lt;AWS_RDS_DB_USERNAME&gt; ? What is the password? [hidden] &lt;AWS_RDS_DB_PASSWORD&gt;</code></li></ul><p id="bcad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果过程成功，StepZen将自动为您的PostgreSQL数据库创建一个GraphQL模式，其中包含一组示例查询和变异。</p><p id="e52d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您打开从上面的StepZen命令创建的目录，您将看到以下文件:</p><ul class=""><li id="4b0e" class="lu lv iq ka b kb kc kf kg kj lw kn lx kr ly kv lz ma mb mc bi translated"><code class="fe mw mx my mz b">postgresql/index.graphql</code>:这个文件包含数据库的GraphQL模式。</li><li id="e472" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated"><code class="fe mw mx my mz b">index.graphql</code>:这个文件包含所有GraphQL模式的索引，以防您使用多个数据源。</li><li id="6a40" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated"><code class="fe mw mx my mz b">config.yaml</code>:这是我们的数据库配置文件所在的位置。</li><li id="fa50" class="lu lv iq ka b kb md kf me kj mf kn mg kr mh kv lz ma mb mc bi translated"><code class="fe mw mx my mz b">stepzen.config.json</code>:这是我们的StepZen端点所在的位置。你也可以在你的StepZen仪表盘上看到。</li></ul><p id="80cd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在下一节中，让我们将这些文件部署到StepZen云中。</p><h2 id="0791" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">将GraphQL模式部署到StepZen</h2><p id="6f54" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">到目前为止，我们已经使用AWS RDS建立了一个PostgreSQL数据库，为它植入了数据，并为这个数据库创建了一个GraphQL模式。这意味着我们快完成了。部署GraphQL API是最后一步，您所要做的就是键入下面的命令。</p><pre class="mk ml mm mn gt na mz nb nc aw nd bi"><span id="56cc" class="kw kx iq mz b gy ne nf l ng nh">stepzen start</span></pre><p id="3465" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将把我们的GraphQL模式部署到<code class="fe mw mx my mz b">stepzen.config.json</code>中的端点。终端会为您生成一个链接。使用GraphQL本地浏览GraphQL API的URL如下所示:</p><pre class="mk ml mm mn gt na mz nb nc aw nd bi"><span id="4b7f" class="kw kx iq mz b gy ne nf l ng nh"><a class="ae mi" href="http://localhost:5001/api/product-list" rel="noopener ugc nofollow" target="_blank">http://localhost:5001/api/product-list</a></span></pre><p id="fa4c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">链接打开后，您可以测试您的GraphQL API。您还可以在StepZen仪表板中监控通过端点发出的查询和请求的数量，仪表板中的数据每天都会更新。</p><p id="9941" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们从数据库中生成的GraphQL模式具有如下所示的查询:</p><pre class="mk ml mm mn gt na mz nb nc aw nd bi"><span id="dd48" class="kw kx iq mz b gy ne nf l ng nh">"""<br/>These are some examples of queries generated from the schema. Feel free to modify them or add your own.<br/>"""<br/>type Query {<br/>  getProductsList: [Products]<br/>    @dbquery(<br/>      type: "postgresql"<br/>      schema: "public"<br/>      table: "Products"<br/>      configuration: "postgresql_config"<br/>    )<br/>  getProducts(id: Int!): Products<br/>    @dbquery(<br/>      type: "postgresql"<br/>      schema: "public"<br/>      table: "Products"<br/>      configuration: "postgresql_config"<br/>    )`<br/>}</span></pre><p id="5c98" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以使用<code class="fe mw mx my mz b">getProductsList</code>和<code class="fe mw mx my mz b">getProducts</code>查询来查询我们的数据库。<code class="fe mw mx my mz b">getProductsList</code>查询返回数据库中的所有数据，而<code class="fe mw mx my mz b">getProducts</code>查询返回数据库中的单行数据。</p><p id="ed59" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面的代码将查询我们数据库中产品的描述:</p><pre class="mk ml mm mn gt na mz nb nc aw nd bi"><span id="8eb9" class="kw kx iq mz b gy ne nf l ng nh">{<br/>  getProductsList {<br/>    description<br/>  }<br/>}</span></pre><p id="07b8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">响应将是一个JSON响应，包括我们数据库中的产品描述。您还可以为每个产品请求像<code class="fe mw mx my mz b">price</code>或<code class="fe mw mx my mz b">quantity</code>这样的字段。从GraphiQL来看，它将如下所示:</p><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/c671d454c90f30f9d3cb737873d9a6ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Kcq8TM_HQXctHg8P.png"/></div></div></figure><p id="1a0d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从GraphQL中，您还可以探索graph QL模式并测试查询和变化。您还可以使用StepZen GraphQL API来构建前端应用程序。</p><h2 id="e7eb" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">结论</h2><p id="6450" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">这篇文章介绍了如何为AWS RDS PostgreSQL数据库生成GraphQL API。我们已经介绍了如何设置和连接pgAdmin到AWS RDS PostgreSQL、安装StepZen、从AWS RDS导入数据以及部署和查询StepZen GraphQL API。</p><p id="4853" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">想了解更多关于<a class="ae mi" href="https://stepzen.com/docs/quick-start" rel="noopener ugc nofollow" target="_blank"> StepZen </a>的知识？在这里尝试一下，或者在这里问任何关于不和谐<a class="ae mi" href="https://discord.com/invite/9k2VdPn2FR" rel="noopener ugc nofollow" target="_blank">的问题。</a></p></div></div>    
</body>
</html>