<html>
<head>
<title>How to connect a HOC with React and Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用React和Redux连接一个HOC</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-connect-hoc-with-react-and-redux-2b3bce6a7dbf?source=collection_archive---------4-----------------------#2020-01-21">https://levelup.gitconnected.com/how-to-connect-hoc-with-react-and-redux-2b3bce6a7dbf?source=collection_archive---------4-----------------------#2020-01-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6739" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">创建一个加载组件，使用HOCs从你的服务器获取数据，玩得开心！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/05e62f583b341d75fdf973e50cc69076.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qtk29oApnX1_x3RW"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@kylertrautner?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> kyler trautner </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="7a16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您使用过React，您可能会遇到高阶组件(HOC)。</p><blockquote class="lv"><p id="ddab" class="lw lx it bd ly lz ma mb mc md me lu dk translated">高阶组件(HOC)是React中重用组件逻辑的一种高级技术。本质上，hoc不是React API的一部分。它们是从React的组合性质中出现的一种模式。</p></blockquote><p id="537d" class="pw-post-body-paragraph kz la it lb b lc mf ju le lf mg jx lh li mh lk ll lm mi lo lp lq mj ls lt lu im bi translated">HOC只是一个简单的函数，它将一个组件作为参数，并返回另一个组件。主要目的是<strong class="lb iu">在组件</strong>之间共享相同的逻辑。你可以在这里了解更多。</p><p id="e6d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在假设您有一个React Redux应用程序，您需要将所有数据从服务器API加载到Redux存储中，然后才能呈现它们。是的，您需要对所有组件都这样做。简直是自杀！😱幸运的是HOCs帮助了我们:)</p><p id="ddec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，您需要:</p><ul class=""><li id="7ae9" class="mk ml it lb b lc ld lf lg li mm lm mn lq mo lu mp mq mr ms bi translated"><strong class="lb iu">从您的服务器API获取</strong>所有数据</li><li id="d355" class="mk ml it lb b lc mt lf mu li mv lm mw lq mx lu mp mq mr ms bi translated"><strong class="lb iu">分派</strong>并填充redux存储</li><li id="3789" class="mk ml it lb b lc mt lf mu li mv lm mw lq mx lu mp mq mr ms bi translated">从你更新的redux状态中渲染 HTML</li><li id="969e" class="mk ml it lb b lc mt lf mu li mv lm mw lq mx lu mp mq mr ms bi translated"><strong class="lb iu">渲染一个进度条</strong>直到获取数据</li></ul><p id="84ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">开始吧！</p><h1 id="bd00" class="my mz it bd na nb nc nd ne nf ng nh ni jz nj ka nk kc nl kd nm kf nn kg no np bi translated">装载部件HOC</h1><p id="e8fc" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">首先，让我们创建一个包含<code class="fe nv nw nx ny b">Loading</code>组件的文件。如果状态正在加载，它将呈现一个进度条，否则它将呈现其子代。我们已经创建了这个组件，因为您可以在任何想要应用另一个获取数据逻辑的时候重用它😉</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="d55c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，太简单了！:)</p><p id="76e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以创建特设！我们将其命名为<em class="ob"> withLoading.js </em>，并放入一个名为“<em class="ob"> HOC </em>的单独文件夹中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="ba49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">多亏了reduce方法，我们可以将<code class="fe nv nw nx ny b">fetchActions</code>创建为一个对象，将actions name作为键，将functions作为相关值。我们将把它传递给<code class="fe nv nw nx ny b">connect</code> react-redux函数，将动作与我们需要返回的组件<code class="fe nv nw nx ny b">LoadingDataHOC</code>绑定在一起。我们对<code class="fe nv nw nx ny b">propTypes</code>对象做同样的事情。</p><p id="3c98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在<code class="fe nv nw nx ny b">LoadingDataHOC</code>组件中使用了两个React钩子:<code class="fe nv nw nx ny b">useState</code>和<code class="fe nv nw nx ny b">useEffect</code>。</p><p id="7d1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用了<code class="fe nv nw nx ny b">useState</code>钩子来管理加载状态，而<code class="fe nv nw nx ny b">useEffect</code>钩子在组件挂载时获取所有数据(注意空数组是第二个参数)。</p><p id="cd96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当所有的数据都被获取时，这就是将加载状态设置为false并显示所有组件的子组件的神奇时刻！</p><h1 id="6ecc" class="my mz it bd na nb nc nd ne nf ng nh ni jz nj ka nk kc nl kd nm kf nn kg no np bi translated">使用带负载</h1><p id="0636" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">下面我们来看看如何使用这个组件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="4535" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，我们没有导出<code class="fe nv nw nx ny b">EmployeeList</code>，而是使用<code class="fe nv nw nx ny b">withLoading</code> HOC来包装原始组件，并在组件挂载时自动获取所有雇员。</p><p id="7790" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！我们会显示进度条，直到所有员工都被加载到商店中:)</p><p id="a28b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望你在这里学到了一些东西，并从React中获得了乐趣！🤘</p></div></div>    
</body>
</html>