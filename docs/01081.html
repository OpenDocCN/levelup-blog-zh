<html>
<head>
<title>A Guide to Opening Flutter Hyperlinks on Web and Mobile</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Web和手机上打开Flutter超链接的指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/flutter-hyperlinks-d2eee3fd24f?source=collection_archive---------2-----------------------#2019-11-07">https://levelup.gitconnected.com/flutter-hyperlinks-d2eee3fd24f?source=collection_archive---------2-----------------------#2019-11-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e7af" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">本教程介绍了在Flutter中打开超链接的3个选项，以及如何针对web和移动平台</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6a72801c7317f243385c8e194b54811e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7g9NuwNO24EQbZBqDM2GIA.png"/></div></div></figure><p id="1afd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从一开始，超链接(或简单的链接)就是网络不可或缺的一部分。在我与Flutter和Dart的旅程开始时，我需要发现如何打开链接。</p><p id="ef06" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">web的Flutter不允许导入<a class="ae lq" href="https://pub.dev/packages/url_launcher" rel="noopener ugc nofollow" target="_blank"> url_launcher </a>包。如果你需要打开一个链接，你必须使用<strong class="kw iu"> dart:html </strong>包或者<strong class="kw iu"> dart:js </strong>(这需要更多的努力)。</p><p id="ab3f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在2019年12月12日之前，本文提供的方法是在Flutter web app中打开链接的唯一选项。在<a class="ae lq" href="https://developers.google.com/events/flutter-interact" rel="noopener ugc nofollow" target="_blank"><strong class="kw iu">Flutter Interact 2019</strong></a><strong class="kw iu"/>上宣布了对几个包的web支持，包括<a class="ae lq" href="https://pub.dev/packages/url_launcher" rel="noopener ugc nofollow" target="_blank"> url_launcher </a>包。这些选项在某些用例中仍然可行。</p><p id="8241" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">由于Flutter的开发频道允许针对网络平台，所以在开放链接方面没有太大的变化。如果计划只针对web，您仍然可以使用上述软件包。如果你计划瞄准网络和手机，你需要使用<a class="ae lq" href="https://pub.dev/packages/universal_html" rel="noopener ugc nofollow" target="_blank"> universal_html </a>包。</p><p id="8c33" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们浏览一下选项:</p><p id="c01d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu"> 1。</strong>用<strong class="kw iu"> dart:html </strong>打开一个链接如下:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="f530" class="lw lx it ls b gy ly lz l ma mb">import 'dart:html' as html;</span><span id="d7a5" class="lw lx it ls b gy mc lz l ma mb">void htmlOpenLink() {<br/> String url = '<a class="ae lq" href="https://flutter.dev/web'" rel="noopener ugc nofollow" target="_blank">https://flutter.dev'</a>;<br/> html.window.open(url, '_blank');<br/>}</span></pre><p id="e042" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu"> 2。</strong>使用<strong class="kw iu"> dart:js </strong>打开一个链接，如下所示:</p><p id="2eb9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先编辑<code class="fe md me mf ls b">web</code>文件夹中的<code class="fe md me mf ls b">index.html</code>文件(位于您的Flutter项目的根级别)。</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="e0c8" class="lw lx it ls b gy ly lz l ma mb">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="UTF-8"&gt;<br/>    &lt;title&gt;hyperlinks_demo&lt;/title&gt;<br/><strong class="ls iu">    &lt;script type="application/javascript"&gt;<br/>      function openLink(url, target) { <br/>        window.open(url, target); <br/>      } <br/>    &lt;/script&gt;</strong><br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;script src="main.dart.js" type="application/javascript"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="6c0a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后您就有了打开链接的函数:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="ca31" class="lw lx it ls b gy ly lz l ma mb">import 'dart:js' as js;</span><span id="e5b7" class="lw lx it ls b gy mc lz l ma mb">void jsOpenLink() {<br/>  String url = '<a class="ae lq" href="https://flutter.dev/web'" rel="noopener ugc nofollow" target="_blank">https://flutter.dev'</a>;<br/>  js.context.callMethod('openLink', [url, '_blank']);<br/>}</span></pre><p id="7ca8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如你所见，这比上一个例子更难实现，但实际上做了同样的事情。然而，在JS函数<code class="fe md me mf ls b">openLink</code>中，如果需要，可以添加更多的功能。</p><p id="ea36" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu"> 3。</strong>如果你计划面向多个平台(网络和移动)，那么方法就是使用<code class="fe md me mf ls b">universal_html</code>包和<code class="fe md me mf ls b">url_launcher</code>。</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="4b53" class="lw lx it ls b gy ly lz l ma mb">import 'package:url_launcher/url_launcher.dart';<br/>import 'package:universal_html/html.dart' as html;<br/>import 'package:flutter/foundation.dart';</span><span id="91c3" class="lw lx it ls b gy mc lz l ma mb">void openLink() async {<br/>  String url = '<a class="ae lq" href="https://flutter.dev/web'" rel="noopener ugc nofollow" target="_blank">https://flutter.dev'</a>;    <br/>  if(<strong class="ls iu">kIsWeb</strong>) {<br/>    html.window.open(url, '_blank');<br/>  } else {<br/>    if(await canLaunch(url)) {<br/>      launch(url);<br/>    }<br/>  }<br/>}</span></pre><p id="a908" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对上述代码的一个(不那么)快速的解释:</p><ul class=""><li id="6a20" class="mg mh it kw b kx ky la lb ld mi lh mj ll mk lp ml mm mn mo bi translated">我们已经导入了所需的包(<code class="fe md me mf ls b">url_launcher</code> -将使我们能够在移动设备上打开链接，<code class="fe md me mf ls b">universal_html</code> -将使我们能够从网络浏览器上打开链接，<code class="fe md me mf ls b">foundation</code>将帮助我们决定我们的代码是否在网络浏览器中运行)</li><li id="218c" class="mg mh it kw b kx mp la mq ld mr lh ms ll mt lp ml mm mn mo bi translated">我们已经定义了想要打开的<code class="fe md me mf ls b">url</code></li><li id="e2e1" class="mg mh it kw b kx mp la mq ld mr lh ms ll mt lp ml mm mn mo bi translated">我们使用<code class="fe md me mf ls b">kIsWeb</code>检查代码是否在web浏览器中运行，如果是，那么我们使用<code class="fe md me mf ls b">window.open</code>方法。</li><li id="328e" class="mg mh it kw b kx mp la mq ld mr lh ms ll mt lp ml mm mn mo bi translated">否则，我们检查是否可以使用<code class="fe md me mf ls b">async</code> <strong class="kw iu"> </strong>方法<strong class="kw iu"> </strong> <code class="fe md me mf ls b">canLaunch</code>来启动<code class="fe md me mf ls b">url</code>(我们仍然可以在桌面或其他类型的设备上)。我们这样做的原因是为了它的布尔结果。如果它返回<code class="fe md me mf ls b">true</code>，那么我们调用<code class="fe md me mf ls b">launch</code>方法，它将在我们所在的设备上施展魔法。</li></ul><p id="6a0c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你只想瞄准网络平台，选项<strong class="kw iu"> 1 </strong>和<strong class="kw iu"> 2 </strong>也不错。</p><p id="0154" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想瞄准所有的平台，那么选择<strong class="kw iu"> 3 </strong>将是一个不错的选择。</p><h2 id="67ab" class="lw lx it bd mu mv mw dn mx my mz dp na ld nb nc nd lh ne nf ng ll nh ni nj nk bi translated">iOS和Mao上的Safari问题</h2><p id="1f12" class="pw-post-body-paragraph ku kv it kw b kx nl ju kz la nm jx lc ld nn lf lg lh no lj lk ll np ln lo lp im bi translated">如果在等待一个<strong class="kw iu">异步</strong>操作结束后调用<strong class="kw iu"> openLink </strong>函数中的任何一个(调用不同步)，上述方法在Safari (iOS和macOS)上不起作用。</p><p id="8eff" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">解决方案是检测我们是否在Safari上，如果是，只需更改<code class="fe md me mf ls b">window.location.href</code>。例2变成了:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="fbae" class="lw lx it ls b gy ly lz l ma mb">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="UTF-8"&gt;<br/>    &lt;title&gt;hyperlinks_demo&lt;/title&gt;<br/><strong class="ls iu">    </strong>&lt;script type="application/javascript"&gt;<br/>      <strong class="ls iu">function openLink(url, target, isAsync=false) {<br/>        var is_safari = /^(?!.*chrome).*safari/i.test(navigator.userAgent.toLowerCase());<br/>        if (is_safari &amp;&amp; isAsync) {<br/>          window.location.href = url;<br/>        } else {<br/>          window.open(url, target);<br/>        } <br/>      }<br/>    </strong>&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;script src="main.dart.js" type="application/javascript"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="7e82" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们无法在新标签页中打开链接，尽管我们仍然可以打开链接。如果没有这一点，当我们点击链接时，我们的应用程序将不会有任何反应。</p><h2 id="de26" class="lw lx it bd mu mv mw dn mx my mz dp na ld nb nc nd lh ne nf ng ll nh ni nj nk bi translated">链接目标选项</h2><p id="1856" class="pw-post-body-paragraph ku kv it kw b kx nl ju kz la nm jx lc ld nn lf lg lh no lj lk ll np ln lo lp im bi translated">在上面的例子中，我们使用了<code class="fe md me mf ls b">_blank</code>作为<code class="fe md me mf ls b">url</code>的目标窗口。</p><p id="2e24" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我将花一点时间详细说明在web浏览器中打开链接时的目标选项:</p><ul class=""><li id="5187" class="mg mh it kw b kx ky la lb ld mi lh mj ll mk lp ml mm mn mo bi translated"><strong class="kw iu"> _blank </strong> -指定一个新窗口</li><li id="4d41" class="mg mh it kw b kx mp la mq ld mr lh ms ll mt lp ml mm mn mo bi translated"><strong class="kw iu"> _self </strong> -指定当前窗口中的当前帧</li><li id="8a42" class="mg mh it kw b kx mp la mq ld mr lh ms ll mt lp ml mm mn mo bi translated"><strong class="kw iu"> _parent </strong> -指定当前帧的父帧</li><li id="e48c" class="mg mh it kw b kx mp la mq ld mr lh ms ll mt lp ml mm mn mo bi translated"><strong class="kw iu"> _top </strong> -指定当前窗口中的顶层框架</li><li id="2710" class="mg mh it kw b kx mp la mq ld mr lh ms ll mt lp ml mm mn mo bi translated">存在的窗口的自定义目标名称</li></ul><p id="a2aa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">既然你已经对在Flutter中打开链接有了深入的了解，你也可以在将要打开这些链接的小部件上放置一个<a class="ae lq" href="https://medium.com/@constanting/customcursor-for-flutter-b6f252c0dcbb" rel="noopener"> CustomCursor </a>，这样会更简单。</p><div class="nq nr gp gr ns nt"><a href="https://medium.com/flutter-community/customcursor-for-flutter-b6f252c0dcbb" rel="noopener follow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd iu gy z fp ny fr fs nz fu fw is bi translated">颤振腹板的自定义光标</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">如何在web应用程序中自定义光标</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">medium.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh ks nt"/></div></div></a></div><p id="e1a9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你也可以看看一种特殊的链接，即<a class="ae lq" href="https://medium.com/@constanting/specialized-links-882dfbfca2d3" rel="noopener">专用链接</a>，它可以让你发送电子邮件、短信，甚至打电话。</p><div class="nq nr gp gr ns nt"><a href="https://medium.com/@constanting/specialized-links-882dfbfca2d3" rel="noopener follow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd iu gy z fp ny fr fs nz fu fw is bi translated">专门的超链接</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">在Dart中展示</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">medium.com</p></div></div><div class="oc l"><div class="oi l oe of og oc oh ks nt"/></div></div></a></div><p id="a6f2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">就这些！</p></div></div>    
</body>
</html>