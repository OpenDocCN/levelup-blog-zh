<html>
<head>
<title>Uploading and Displaying Images in a Private AWS S3 Bucket Using ASP.NET</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">上传和显示图像在一个私人的自动气象站S3桶使用ASP。网</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/uploading-and-displaying-images-in-a-private-aws-s3-bucket-using-asp-net-86266af51c8b?source=collection_archive---------1-----------------------#2020-03-15">https://levelup.gitconnected.com/uploading-and-displaying-images-in-a-private-aws-s3-bucket-using-asp-net-86266af51c8b?source=collection_archive---------1-----------------------#2020-03-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="94b2" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">亚马逊网络服务提示</h2><div class=""/><div class=""><h2 id="de30" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">绕过文件系统并使用流</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/acb181d4dda0d5368e8e541f8a8309d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0fSH9TV93g0zOMjlfPgX7w.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">图片<a class="ae lh" href="https://dzone.com/" rel="noopener ugc nofollow" target="_blank">由DZone </a>提供</figcaption></figure><h1 id="8fb9" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">如何使用本教程</h1><p id="4283" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated"><strong class="mc jd">你可以通过三种方式使用本教程:</strong></p><ol class=""><li id="888d" class="mw mx it mc b md my mg mz mj na mn nb mr nc mv nd ne nf ng bi translated">了解如何显示图像而不存储在文件系统中。</li><li id="48ba" class="mw mx it mc b md nh mg ni mj nj mn nk mr nl mv nd ne nf ng bi translated">了解如何将上传的图像存储到AWS S3存储桶。</li><li id="b35f" class="mw mx it mc b md nh mg ni mj nj mn nk mr nl mv nd ne nf ng bi translated">或者两者都有。<strong class="mc jd">这是本教程的主要目标。</strong></li></ol><h2 id="9b8f" class="nm lj it bd lk nn no dn lo np nq dp ls mj nr ns lu mn nt nu lw mr nv nw ly iz bi translated">S3亚马逊网络服务概述</h2><p id="e238" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">亚马逊网络服务(AWS)允许我们使用他们基于云的对象存储服务，亚马逊简单存储服务(<a class="ae lh" href="https://aws.amazon.com/s3/" rel="noopener ugc nofollow" target="_blank"> <em class="nx">亚马逊S3 </em> </a>)。</p></div><div class="ab cl ny nz hx oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="im in io ip iq"><p id="8937" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated"><em class="nx">要了解更多关于亚马逊S3的信息，请查看</em> <a class="ae lh" href="https://medium.com/@jovanshernandez/what-is-amazon-s3-8362ee26c7c3" rel="noopener"> <em class="nx">这篇文章</em> </a> <em class="nx">作者</em> <a class="oi oj ep" href="https://medium.com/u/3cd0a0ff5636?source=post_page-----86266af51c8b--------------------------------" rel="noopener" target="_blank"> <em class="nx">约万·埃尔南德斯</em></a>T22<a class="ae lh" href="https://medium.com/codebase/using-aws-s3-buckets-in-a-nodejs-app-74da2fc547a6" rel="noopener">T25】这篇文章 </a> <em class="nx">作者</em> <a class="oi oj ep" href="https://medium.com/u/e6ae7f5f3b3c?source=post_page-----86266af51c8b--------------------------------" rel="noopener" target="_blank"> <em class="nx">冈萨罗P. </em> </a></p></div><div class="ab cl ny nz hx oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="im in io ip iq"><h2 id="f094" class="nm lj it bd lk nn no dn lo np nq dp ls mj nr ns lu mn nt nu lw mr nv nw ly iz bi translated">本教程</h2><p id="fd22" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">在这篇文章中，我想探索几种方法中的一种在你的网页上显示存储在S3桶中的图像，并将其存储在S3桶中。我们将使用ASP.NET，但这些技术可以适用于其他语言。</p><p id="0170" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">我提到上面提到的几种方式中的一种，因为你选择如何在S3展示图像取决于它们的存储方式，公开还是保密。如果它们在一个公共的S3桶中，这个过程就像把&lt; img &gt;指向图片的URL一样简单。大多数S3水桶是不公开的。</p><p id="77b0" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">然而，当S3桶是私有的，事情变得有点复杂。在这种情况下，有两个主要选择。一个是建立一个<a class="ae lh" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/ShareObjectPreSignedURL.html" rel="noopener ugc nofollow" target="_blank">签名的URL </a>到你的S3桶。<em class="nx">另一个是为了</em></p><blockquote class="ok"><p id="b9e9" class="ol om it bd on oo op oq or os ot mv dk translated"><em class="ou">以流的形式访问图像</em>。</p></blockquote><p id="aa29" class="pw-post-body-paragraph ma mb it mc b md ov kd mf mg ow kg mi mj ox ml mm mn oy mp mq mr oz mt mu mv im bi translated">这将是我们的方针。</p><p id="f328" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">通常当使用上传控件或访问S3桶中的图像时，计算机的文件系统被用作存储和访问图片的媒介。然而，如果您在一个<a class="ae lh" href="https://aws.amazon.com/ec2/" rel="noopener ugc nofollow" target="_blank"> EC2 </a>上托管您的应用程序，您的程序不能访问文件系统(或者不应该试图使用它)，您将需要使用另一种方法。</p><h2 id="8ad1" class="nm lj it bd lk nn no dn lo np nq dp ls mj nr ns lu mn nt nu lw mr nv nw ly iz bi translated">方案</h2><p id="ee25" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">我们将保持这个例子简单，但功能，所以它可以适用于你给定的情况。</p><p id="30de" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">场景是你在网页上有一个ASP文件上传控件。选择图像后，我们将在网页上显示图像，然后将图像上传到一个私人S3桶。</p><p id="361a" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">如前所述，典型的方法是通过将服务器端图像控件的ImageURL指向文件系统上的物理位置来显示图像。</p><blockquote class="ok"><p id="a65c" class="ol om it bd on oo op oq or os ot mv dk translated">但是因为我们将假设我们没有访问文件系统的权限，所以我们将使用流。</p></blockquote><h2 id="a4c3" class="nm lj it bd lk nn pa dn lo np pb dp ls mj pc ns lu mn pd nu lw mr pe nw ly iz bi translated">部分假设</h2><ul class=""><li id="9292" class="mw mx it mc b md me mg mh mj pf mn pg mr ph mv pi ne nf ng bi translated">我假设你已经有一个名为<strong class="mc jd"> companyimages </strong>的私人S3桶，里面有一张图片。<em class="nx">如果需要的话，使用上面提到的资源来帮助建立一个S3。</em></li><li id="451d" class="mw mx it mc b md nh mg ni mj nj mn nk mr nl mv pi ne nf ng bi translated">我假设您拥有IAM凭据或EC2角色，可以访问S3存储区。</li></ul><p id="82de" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated"><strong class="mc jd">然而</strong>，如果你只想使用流显示上传的图像，你不需要S3桶。</p><h1 id="d9d4" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">走查</h1><p id="4388" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">在这个演示中，我们将使用一个简单的C # ASP.NET Web窗体解决方案。</p><h2 id="f314" class="nm lj it bd lk nn no dn lo np nq dp ls mj nr ns lu mn nt nu lw mr nv nw ly iz bi translated">创建项目</h2><ol class=""><li id="7e16" class="mw mx it mc b md me mg mh mj pf mn pg mr ph mv nd ne nf ng bi translated">开始<a class="ae lh" href="https://visualstudio.microsoft.com/free-developer-offers/" rel="noopener ugc nofollow" target="_blank"> Visual Studio 2019社区版</a>(免费)(非Visual Studio代码)</li><li id="798d" class="mw mx it mc b md nh mg ni mj nj mn nk mr nl mv nd ne nf ng bi translated">选择<strong class="mc jd">创建新项目</strong>并点击下一步。</li></ol><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/1693b7c8327b8c16010049b49f496f6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/1*dENGuJLI93LoH4OaZf4Ggw.jpeg"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">新建Visual Studio项目</figcaption></figure><p id="d1e5" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">3.在创建新项目中，选择左侧<em class="nx">的<strong class="mc jd"> Web App </strong>并输入“<strong class="mc jd"> ASP。NET" </strong>进行搜索，找到下面的模板。点击下一个。</em></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pk"><img src="../Images/e44ab2ba1f81a566ba04d1cd4b26af24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lqi1T8O4XyTtFpTyYITW-Q.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">这允许web表单</figcaption></figure><p id="9c20" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">4.选择一个<strong class="mc jd">名称</strong>和<strong class="mc jd">位置</strong>并点击创建。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pl"><img src="../Images/9b608923221be2fc94cbcc265cb180a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*fy1W0ZhAxw9x7nZtsg1MoQ.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">项目名称和位置</figcaption></figure><p id="3244" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">5.最后选择<strong class="mc jd"> Web表单</strong>并点击创建。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pm"><img src="../Images/fcf884c5ea891e41343522d9e918e089.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eW_5Pn72-dZAvrpjQOOFYw.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">基本Web窗体应用程序</figcaption></figure><p id="3279" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">我们可以使用<strong class="mc jd"> Default.aspx </strong>页面。</p><ol class=""><li id="ec35" class="mw mx it mc b md my mg mz mj na mn nb mr nc mv nd ne nf ng bi translated">打开Default.aspx HTML标记并删除内容，使其如下所示。</li></ol><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pn"><img src="../Images/10d1a4da18a62dc165a9285ad070755f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L_bcrimzN622RdUU5gvyow.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">Default.aspx</figcaption></figure><p id="b0ba" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">2.在内容部分添加以下HTML标记。这包括服务器端FileUpload控件和单个服务器端Image控件。注意btnUpload_Click的代码还没有创建，所以它还不会运行。</p><pre class="ks kt ku kv gt po pp pq pr aw ps bi"><span id="7852" class="nm lj it pp b gy pt pu l pv pw">&lt;br /&gt;<br/>&lt;asp:FileUpload ID="FileUpload1" runat="server" accept=".png,.jpg,.jpeg,.gif" /&gt;</span><span id="1b6a" class="nm lj it pp b gy px pu l pv pw">&lt;asp:Button ID="btnUpload" runat="server" Text="Upload Image"<br/>    onclick="btnUpload_Click" /&gt;</span><span id="71b9" class="nm lj it pp b gy px pu l pv pw">&lt;hr /&gt;</span><span id="bfcd" class="nm lj it pp b gy px pu l pv pw">&lt;asp:Image ID="Image1" Visible = "false" runat="server" Height = "100" Width = "100"/&gt;</span></pre><p id="c873" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">3.切换到<strong class="mc jd">设计</strong>模式，双击<em class="nx">上传图片按钮，在Default.aspx.cs页面中创建后面的代码。它应该如下所示(没有注释。)</em></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi py"><img src="../Images/3ebbd1e4d8b7754abe6df6866047df6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*Tzhb9lHMngLUerphql_Z0A.jpeg"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">切换到设计并双击上传图像</figcaption></figure><pre class="ks kt ku kv gt po pp pq pr aw ps bi"><span id="607a" class="nm lj it pp b gy pt pu l pv pw">using System;<br/>using System.Collections.Generic;<br/>using System.Linq;<br/>using System.Web;<br/>using System.Web.UI;<br/>using System.Web.UI.WebControls;</span><span id="c24a" class="nm lj it pp b gy px pu l pv pw">namespace ImageUploadDisplay<br/>{<br/>    public partial class _Default : Page<br/>    {<br/>        protected void Page_Load(object sender, EventArgs e)<br/>        {</span><span id="f25f" class="nm lj it pp b gy px pu l pv pw">}</span><span id="72ef" class="nm lj it pp b gy px pu l pv pw"><strong class="pp jd">protected void btnUpload_Click(object sender, EventArgs e)<br/>        {<br/>            // Our Code Will Go Here<br/>        }<br/>    }</strong><br/>}</span></pre><h2 id="bedb" class="nm lj it bd lk nn no dn lo np nq dp ls mj nr ns lu mn nt nu lw mr nv nw ly iz bi translated">试运转</h2><p id="41aa" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">运行该解决方案，并单击<strong class="mc jd">浏览… </strong>按钮，验证文件上传控件是否正常工作。</p><h2 id="8148" class="nm lj it bd lk nn no dn lo np nq dp ls mj nr ns lu mn nt nu lw mr nv nw ly iz bi translated">显示图像</h2><p id="af89" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">在下一步中，我们将使用文件上传控件的InputStream显示图像，并进行一些操作，将图像转换成ImageURL可以接受的字符串格式。</p><p id="7a03" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">添加以下代码，使btnUpload_Click看起来如下所示。</p><pre class="ks kt ku kv gt po pp pq pr aw ps bi"><span id="6874" class="nm lj it pp b gy pt pu l pv pw">protected void btnUpload_Click(object sender, EventArgs e)<br/>{<br/> // Our Code Will Go Here<br/> // Display the Image<br/> {<br/>  System.IO.Stream stream = FileUpload1.PostedFile.InputStream;<br/>  System.IO.BinaryReader br = new System.IO.BinaryReader(stream);<br/>  Byte[] bytes = br.ReadBytes((Int32) stream.Length);<br/>  string base64String = Convert.ToBase64String(bytes, 0,   bytes.Length);<br/>  Image1.ImageUrl =<strong class="pp jd"> "data:image/jpeg;base64," + base64String;</strong><br/>  Image1.Visible = true;<br/>  }<br/>}</span></pre><p id="337e" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated"><strong class="mc jd">试运行</strong></p><p id="fc94" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">运行解决方案。点击<strong class="mc jd">浏览… </strong>找到图片。然后单击上传图像。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pz"><img src="../Images/3f00d7e4adfd2f9c0f703dc2e7fbf485.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*vJnnuI0Riu1VMC3M9sa1aw.jpeg"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">单击浏览..然后上传图像</figcaption></figure></div><div class="ab cl ny nz hx oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="im in io ip iq"><p id="2f92" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated"><strong class="mc jd">可选步骤</strong></p><p id="775e" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">如果您想查看ImageURL的内容，请设置一个断点，如下所示(在Image1上。Visible="true ")并运行解决方案，然后选择一个图像。在断点处，将鼠标悬停在Image1的ImageURL上。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qa"><img src="../Images/3e802d477a07b19bace92fc242202452.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_oEIBplyZpwusxs0tIsfrA.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">转换为字符串的流形式的图像</figcaption></figure><h2 id="2c49" class="nm lj it bd lk nn no dn lo np nq dp ls mj nr ns lu mn nt nu lw mr nv nw ly iz bi translated">将图像存储在S3桶中</h2><p id="bd7c" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">将图像存储到您的S3存储桶中的过程仍将使用InputStream，但不需要我们操作它。</p><p id="b55c" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">然而，我们需要为S3 NuGet包安装Amazon SDK。</p><p id="d0f9" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated"><strong class="mc jd">安装AWSSDK。S3和存储图像</strong></p><ol class=""><li id="32b1" class="mw mx it mc b md my mg mz mj na mn nb mr nc mv nd ne nf ng bi translated">选择<strong class="mc jd">项目/管理Nuget包</strong>，浏览如下。安装软件包。</li></ol><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qb"><img src="../Images/a000926eceae17d23f3bd7f5abb7b751.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xrQvP9m238woiIlV6ouPBA.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">必需的SDK</figcaption></figure><p id="9923" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">2.在Default.aspx.cs的顶部使用语句添加以下<strong class="mc jd"/></p><pre class="ks kt ku kv gt po pp pq pr aw ps bi"><span id="085e" class="nm lj it pp b gy pt pu l pv pw">using Amazon.S3;<br/>using Amazon.S3.Model;</span></pre><p id="4635" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">这将允许我们，</p><ul class=""><li id="698d" class="mw mx it mc b md my mg mz mj na mn nb mr nc mv pi ne nf ng bi translated">创建AmazonS3Client的一个实例。</li><li id="3b6c" class="mw mx it mc b md nh mg ni mj nj mn nk mr nl mv pi ne nf ng bi translated">使用我们的桶和图像信息发出PutObjectRequest</li><li id="ed3c" class="mw mx it mc b md nh mg ni mj nj mn nk mr nl mv pi ne nf ng bi translated">调用PutObject并向其传递PutObjectRequest</li></ul><p id="e2dd" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">3.将以下代码<strong class="mc jd">添加到图像</strong>的显示下方或其自身程序中。</p><pre class="ks kt ku kv gt po pp pq pr aw ps bi"><span id="06e2" class="nm lj it pp b gy pt pu l pv pw">// Store to S3<br/>{<br/><strong class="pp jd">// Do not actually store your IAM credentials in code</strong>. EC2 Role is best<br/>var awsKey = <strong class="pp jd">"Your IAM Key"</strong>;<br/>var awsSecretKey = <strong class="pp jd">"Your IAM Secret Key"</strong>;<br/>var bucketRegion = Amazon.RegionEndpoint.USEast1;   // Your bucket region<br/>var s3 = new AmazonS3Client(<strong class="pp jd">awsKey,awsSecretKey,bucketRegion</strong>);<br/>var putRequest = new PutObjectRequest();<br/>putRequest.BucketName = "companyimages";        // Your bucket name<br/>putRequest.ContentType = "image/jpeg";<br/>putRequest.InputStream = FileUpload1.PostedFile.InputStream;</span><span id="6ca6" class="nm lj it pp b gy px pu l pv pw"><strong class="pp jd">// key will be the name of the image in your bucket</strong><br/>putRequest.Key = FileUpload1.FileName;<br/>PutObjectResponse putResponse = s3.PutObject(putRequest);<br/>                               <br/>}</span></pre><h1 id="59e4" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">结论</h1><p id="2c3f" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">在本文中，我们探讨了两个主要话题。第一个问题是我们如何显示图像，而不需要将图像存储在文件系统中。其次，我们学习了如何将图像存储到亚马逊S3存储桶中。</p><p id="6247" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">我鼓励你更详细地探索它，玩弄它的概念并扩展它。</p><p id="0598" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated"><strong class="mc jd">感谢您的阅读和快乐编码！</strong></p><p id="1171" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">在Medium上阅读所有你想要的文章，并通过成为Medium会员(每月仅5美元)来帮助我继续写作。</p><div class="qc qd gp gr qe qf"><a href="https://bobtomlin-70659.medium.com/membership" rel="noopener follow" target="_blank"><div class="qg ab fo"><div class="qh ab qi cl cj qj"><h2 class="bd jd gy z fp qk fr fs ql fu fw jc bi translated">通过我的推荐链接加入灵媒——重力井(罗伯·汤姆林)</h2><div class="qm l"><h3 class="bd b gy z fp qk fr fs ql fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="qn l"><p class="bd b dl z fp qk fr fs ql fu fw dk translated">bobtomlin-70659.medium.com</p></div></div><div class="qo l"><div class="qp l qq qr qs qo qt lb qf"/></div></div></a></div><p id="3b39" class="pw-post-body-paragraph ma mb it mc b md my kd mf mg mz kg mi mj of ml mm mn og mp mq mr oh mt mu mv im bi translated">你也可以享受，</p><div class="qc qd gp gr qe qf"><a rel="noopener  ugc nofollow" target="_blank" href="/creating-an-asp-net-core-restful-web-api-62b3a5a90ba5"><div class="qg ab fo"><div class="qh ab qi cl cj qj"><h2 class="bd jd gy z fp qk fr fs ql fu fw jc bi translated">创建ASP.NET核心(RESTful) Web API</h2><div class="qm l"><h3 class="bd b gy z fp qk fr fs ql fu fw dk translated">探索HTTP动词并执行CRUD操作</h3></div><div class="qn l"><p class="bd b dl z fp qk fr fs ql fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="qo l"><div class="qu l qq qr qs qo qt lb qf"/></div></div></a></div><div class="qc qd gp gr qe qf"><a href="https://medium.com/@bobtomlin_70659/signing-out-of-an-alb-web-application-e464723ac6d8" rel="noopener follow" target="_blank"><div class="qg ab fo"><div class="qh ab qi cl cj qj"><h2 class="bd jd gy z fp qk fr fs ql fu fw jc bi translated">创建注销</h2><div class="qm l"><h3 class="bd b gy z fp qk fr fs ql fu fw dk translated">当位于应用程序负载平衡器之后时</h3></div><div class="qn l"><p class="bd b dl z fp qk fr fs ql fu fw dk translated">medium.com</p></div></div><div class="qo l"><div class="qv l qq qr qs qo qt lb qf"/></div></div></a></div><div class="qc qd gp gr qe qf"><a href="https://link.medium.com/u7OawVRSg0" rel="noopener follow" target="_blank"><div class="qg ab fo"><div class="qh ab qi cl cj qj"><h2 class="bd jd gy z fp qk fr fs ql fu fw jc bi translated">从C#调用Lambda函数</h2><div class="qm l"><h3 class="bd b gy z fp qk fr fs ql fu fw dk translated">节点中的AWS Lambda</h3></div><div class="qn l"><p class="bd b dl z fp qk fr fs ql fu fw dk translated">link.medium.com</p></div></div><div class="qo l"><div class="qw l qq qr qs qo qt lb qf"/></div></div></a></div></div></div>    
</body>
</html>