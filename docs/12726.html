<html>
<head>
<title>A GitHub Workflow to Check the Compatibility of Your PHP Package with a Range of Dependency Versions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个GitHub工作流来检查你的PHP包与一系列依赖版本的兼容性</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-github-workflow-to-check-the-compatibility-of-your-php-package-with-a-range-of-dependency-19b674c41b95?source=collection_archive---------30-----------------------#2022-07-03">https://levelup.gitconnected.com/a-github-workflow-to-check-the-compatibility-of-your-php-package-with-a-range-of-dependency-19b674c41b95?source=collection_archive---------30-----------------------#2022-07-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9880" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">对于我们不知道目标环境约束的场景</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4c13f1e0bddbc520b898e23aa95190a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9rB0mIu_6Kj0lMLN.png"/></div></div></figure><p id="770f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">PHP开发人员工作的一个常见方面是处理<a class="ae lq" href="https://getcomposer.org/" rel="noopener ugc nofollow" target="_blank"> Composer </a>依赖项。我们把别人的作品当成乐高积木来建造自己的项目，充分利用开源运动这一美好事物。</p><p id="073f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">作为这些社区工作的典型最终用户，我们维护一个依赖项列表，这些依赖项的版本通过<code class="fe ls lt lu lv b">composer.lock</code>文件被<em class="lr">固定</em>。我们不需要考虑支持这些依赖项的其他版本，就像我们不需要考虑适应一系列PHP版本一样——我们在应用程序的目标环境的约束下工作，这些环境是已知的，并且预计会随着时间的推移而保持稳定。</p><p id="0435" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于开源软件维护者来说，情况有所不同。他们很大程度上不知道用户环境的约束，所以他们能做的最好的事情就是确保他们的库与尽可能多的PHP和依赖版本兼容。</p><p id="cbb9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是兼容性测试至关重要的地方。开源维护者需要确保对代码所做的任何更改都将适用于<code class="fe ls lt lu lv b">composer.json</code>中列出的所有版本。手动这样做是不切实际的，所以他们求助于测试覆盖和自动化脚本。</p><p id="4512" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这篇文章探索了一种自动化兼容性测试的方法，结合使用测试覆盖和<a class="ae lq" href="https://docs.github.com/en/actions/using-workflows" rel="noopener ugc nofollow" target="_blank"> GitHub动作工作流</a>。</p><h1 id="ac71" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">在这篇文章中</h1><ul class=""><li id="8070" class="mo mp it kw b kx mq la mr ld ms lh mt ll mu lp mv mw mx my bi translated">完成工作流程</li><li id="8848" class="mo mp it kw b kx mz la na ld nb lh nc ll nd lp mv mw mx my bi translated">故障</li><li id="e770" class="mo mp it kw b kx mz la na ld nb lh nc ll nd lp mv mw mx my bi translated">结束语</li><li id="bdfa" class="mo mp it kw b kx mz la na ld nb lh nc ll nd lp mv mw mx my bi translated">资源</li></ul><h1 id="73a7" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">完成工作流程</h1><p id="9fa5" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ne lf lg lh nf lj lk ll ng ln lo lp im bi translated">这是工作流程的最终版本。如果你只是为了代码而来，请随意复制和重用下面的代码。否则，继续阅读文件的渐进分解，由一个示例项目支持。</p><p id="2578" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">也可以查看本文的<a class="ae lq" href="https://github.com/osteel/php-compatibility-demo" rel="noopener ugc nofollow" target="_blank">资源库</a>进行参考。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h1 id="d962" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">故障</h1><p id="93dc" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ne lf lg lh nf lj lk ll ng ln lo lp im bi translated">以下是工作流程的完整分解。我们将使用一个示例项目增量地构建它，随着我们扩展支持的依赖版本的范围，我们将更新这个示例项目。</p><h1 id="ad59" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">初始设置</h1><p id="6c6b" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ne lf lg lh nf lj lk ll ng ln lo lp im bi translated">这一步是可选的，但是如果您是一个“通过实践学习”的人，您可能希望在您的机器上构建这个示例项目，并在我们进行的过程中更新它。如果你不知道，你可以阅读这一部分，因为它包含了一些相关的信息。</p><p id="5735" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你这样做了，那么<a class="ae lq" href="https://github.com/new" rel="noopener ugc nofollow" target="_blank">现在创建</a>一个新的空的GitHub库。称它为<code class="fe ls lt lu lv b">php-compatibility-demo</code>(或者其他任何你觉得有灵感的东西)，并确保它是公开的，这样你就可以享受免费的GitHub Actions <a class="ae lq" href="https://docs.github.com/en/billing/managing-billing-for-github-actions/about-billing-for-github-actions" rel="noopener ugc nofollow" target="_blank">津贴</a>(除非你有一个付费账户，在这种情况下，你可以随意保持库的私密性)。</p><blockquote class="nj nk nl"><p id="c64a" class="ku kv lr kw b kx ky ju kz la lb jx lc nm le lf lg nn li lj lk no lm ln lo lp im bi translated">下面假设您的开发设置支持PHP 8.0+并且您已经可以使用Composer和Git访问终端。</p></blockquote><p id="5b45" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在您的开发机器上克隆存储库，并初始化一个新的Composer项目:</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="7cce" class="nt lx it lv b gy nu nv l nw nx">$ git clone php-compatibility-demo<br/>$ cd php-compatibility-demo<br/>$ composer init</span></pre><p id="4923" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后一个命令将询问您一系列问题，并在最后生成一个<code class="fe ls lt lu lv b">composer.json</code>文件。大多数问题在本文的上下文中并不重要，但是请确保为项目类型选择<code class="fe ls lt lu lv b"><a class="ae lq" href="https://getcomposer.org/doc/04-schema.md#type" rel="noopener ugc nofollow" target="_blank">library</a></code>，为最小稳定性选择<code class="fe ls lt lu lv b"><a class="ae lq" href="https://getcomposer.org/doc/04-schema.md#minimum-stability" rel="noopener ugc nofollow" target="_blank">stable</a></code>，并为PSR-4自动加载位保留默认值。</p><p id="f2f9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">完成后，将<code class="fe ls lt lu lv b">/vendor/</code>和<code class="fe ls lt lu lv b">composer.lock</code>添加到<code class="fe ls lt lu lv b">.gitignore</code>文件中:</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="19bc" class="nt lx it lv b gy nu nv l nw nx">/vendor/<br/>composer.lock</span></pre><p id="c2fc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是与常规公司项目的第一个主要区别，在常规公司项目中，开发人员通常会提交<code class="fe ls lt lu lv b">composer.lock</code>文件，因此应用程序在不同环境中是一致的。在这里，我们采用不一致性，让Composer根据客户机环境的约束来决定使用什么依赖版本。</p><p id="782c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这种情况下，GitHub工作流是另一个客户端环境，我们不希望它选择一个<code class="fe ls lt lu lv b">composer.lock</code>文件来强制安装特定版本，而我们的目标是测试所有版本。</p><h1 id="f1f6" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">库和测试覆盖率</h1><p id="dc6c" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ne lf lg lh nf lj lk ll ng ln lo lp im bi translated">有了这些，让我们花点时间讨论一下我们的测试项目。我们将在<a class="ae lq" href="https://github.com/moneyphp/money" rel="noopener ugc nofollow" target="_blank"> Money </a>的基础上构建一个小的库，Money 是一个流行的PHP包，方便了货币值和货币的操作。</p><p id="51a0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们的库将包含一个助手类——<code class="fe ls lt lu lv b">CurrencyHelper.php</code>——这将简化货币的操作。它将公开两个方法——一个确保一堆<code class="fe ls lt lu lv b">Money</code>对象拥有相同的货币，另一个返回一个<code class="fe ls lt lu lv b">Money</code>对象的<a class="ae lq" href="https://en.wikipedia.org/wiki/ISO_4217#Active_codes" rel="noopener ugc nofollow" target="_blank">数字ISO 4217码</a>。</p><p id="26eb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你很快就会意识到这个库是毫无意义的，但是它提供了一个很好的例子来支持这篇文章，所以我相信你会视而不见。</p><p id="b611" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是您在本节末尾应该得到的文件结构(请记住，您也可以随时参考本文的<a class="ae lq" href="https://github.com/osteel/php-compatibility-demo" rel="noopener ugc nofollow" target="_blank">库</a>进行比较):</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="4283" class="nt lx it lv b gy nu nv l nw nx">php-compatibility-demo/<br/>├── src/<br/>│   └── CurrencyHelper.php<br/>├── tests/<br/>│   └── CurrencyHelperTest.php<br/>├── vendor/<br/>├── .gitignore<br/>├── composer.json<br/>└── composer.lock</span></pre><p id="765d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们安装货币库:</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="3b89" class="nt lx it lv b gy nu nv l nw nx">$ composer require moneyphp/money:^4.0</span></pre><p id="e17d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，我们有意在这里导入v4，即使当您阅读本文时，它可能不是最新版本。</p><p id="d253" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们也安装<a class="ae lq" href="https://phpunit.de/" rel="noopener ugc nofollow" target="_blank"> PHPUnit </a>作为开发依赖:</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="771a" class="nt lx it lv b gy nu nv l nw nx">$ composer require --dev phpunit/phpunit</span></pre><p id="dc4e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在创建<code class="fe ls lt lu lv b">src/CurrencyHelper.php</code>文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="1efb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您也在您的机器上构建这个示例库，不要忘记更新顶部名称空间中的供应商名称。</p><p id="9c42" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe ls lt lu lv b">isSame</code>方法接受任意数量的<code class="fe ls lt lu lv b">Money</code>对象，并返回一个布尔值，表明它们是否使用同一种货币。它的工作方式是从数组中移除第一个元素(使用<code class="fe ls lt lu lv b"><a class="ae lq" href="https://www.php.net/manual/en/function.array-shift" rel="noopener ugc nofollow" target="_blank">array_shift</a></code>)，然后使用<code class="fe ls lt lu lv b">Money</code>类中的<code class="fe ls lt lu lv b">isSameCurrency</code>方法将这个元素的货币与其他元素的货币进行比较。</p><p id="021e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第二个方法——<code class="fe ls lt lu lv b">numericCode</code>——将一个<code class="fe ls lt lu lv b">Money</code>对象作为其唯一的参数，并返回其货币的数字ISO代码，使用来自<code class="fe ls lt lu lv b">ISOCurrencies</code>助手类的<code class="fe ls lt lu lv b">numericCodeFor</code>方法(它是货币库的一部分)。</p><p id="5e55" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是<code class="fe ls lt lu lv b">tests/CurrencyHelperTest.php</code>的内容，这个类测试我们的“库”的行为:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="fbf2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这些测试将允许我们稍后确认我们的库是否与各种PHP和依赖版本一起工作。同样，不要忘记在顶部更新供应商的名称。</p><p id="5e40" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们检查测试是否通过:</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="af49" class="nt lx it lv b gy nu nv l nw nx">$ ./vendor/bin/phpunit tests</span></pre><p id="ae22" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果是这样，我们可以继续工作流程。</p><h1 id="e6a4" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">基本工作流程</h1><p id="6386" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ne lf lg lh nf lj lk ll ng ln lo lp im bi translated">让我们从一个简单的GitHub Actions工作流开始，它唯一的工作就是运行测试套件。基本上就是我们刚刚做的，但是是以自动化的方式。</p><p id="ca2d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们需要在项目的根目录下创建一个新的<code class="fe ls lt lu lv b">.github</code>文件夹，它本身包含一个<code class="fe ls lt lu lv b">workflows</code>文件夹，我们在其中添加一个名为<code class="fe ls lt lu lv b">ci.yml</code>的文件。这些目录是GitHub约定——平台期望在那里找到我们的工作流，<code class="fe ls lt lu lv b">ci.yml</code>是其中之一。</p><p id="d110" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是更新后的文件结构:</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="d1f6" class="nt lx it lv b gy nu nv l nw nx">php-compatibility-demo/<br/>├── .github/<br/>│   └── workflows/<br/>│       └── ci.yml<br/>├── src/<br/>│   └── CurrencyHelper.php<br/>├── tests/<br/>│   └── CurrencyHelperTest.php<br/>├── vendor/<br/>├── .gitignore<br/>├── composer.json<br/>└── composer.lock</span></pre><p id="2b3f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是<code class="fe ls lt lu lv b">ci.yml</code>的内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="03ea" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们快速分解一下——我们首先给工作流起一个名字(“CI”代表“持续集成”)，然后定义触发它的条件(这里，任何推送到<code class="fe ls lt lu lv b">main</code>分支的变更，或者任何向它打开的拉请求)。</p><p id="1071" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后我们列出要执行的作业。在我们的例子中只有一个——运行测试套件。我们将这个作业称为“PHPUnit ”,并指定它将在最新的Ubuntu版本上运行。</p><p id="cada" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后我们定义组成工作的步骤——检查代码、设置PHP、安装Composer依赖项，最后运行测试套件。前三步使用流行的GitHub动作(见<code class="fe ls lt lu lv b">uses</code>键):</p><ul class=""><li id="0a0b" class="mo mp it kw b kx ky la lb ld ny lh nz ll oa lp mv mw mx my bi translated"><a class="ae lq" href="https://github.com/actions/checkout" rel="noopener ugc nofollow" target="_blank">结账</a>；</li><li id="8749" class="mo mp it kw b kx mz la na ld nb lh nc ll nd lp mv mw mx my bi translated"><a class="ae lq" href="https://github.com/shivammathur/setup-php" rel="noopener ugc nofollow" target="_blank">设置PHP</a>；</li><li id="4ae2" class="mo mp it kw b kx mz la na ld nb lh nc ll nd lp mv mw mx my bi translated"><a class="ae lq" href="https://github.com/ramsey/composer-install" rel="noopener ugc nofollow" target="_blank">作曲家安装</a>。</li></ul><p id="0b73" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后一步我们不需要GitHub动作，因为这是一个简单的命令。</p><p id="da7c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">保存文件，提交并推送。几秒钟后，您应该会在GitHub存储库的<em class="lr"> Actions </em>选项卡下看到类似这样的屏幕:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/a715cdc938c890fa6f442ff571fd381c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zNoy-NYqTsAznmzj.png"/></div></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">您可以点击工作流运行来查看日志</figcaption></figure><p id="78a4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是我们工作流程的第一个版本。这已经是相当不错的第一步了，因为工作流将在任何时候触发一些新代码被推送到/一个拉请求被打开到<code class="fe ls lt lu lv b">main</code>，自动报告任何重大变化。</p><p id="bec8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但到目前为止，我们只测试了一组依赖版本——当工作流到达<em class="lr">安装composer依赖项</em>步骤时，无论Composer决定什么都是最好的。</p><p id="2dd0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们更进一步。</p><h1 id="90f7" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">相关性范围</h1><p id="e77f" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ne lf lg lh nf lj lk ll ng ln lo lp im bi translated">比方说我们想同时支持PHP 7.4+和PHP 8.0+。我们不会让Composer根据客户端环境中可用的软件版本尽最大努力，而是通过明确列出我们的库兼容的PHP版本来提示它。</p><p id="ebe4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">打开<code class="fe ls lt lu lv b">composer.json</code>并更新<code class="fe ls lt lu lv b">require</code>部分，如下所示:</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="ab82" class="nt lx it lv b gy nu nv l nw nx">"require": {<br/>    "php": "^7.4|^8.0",<br/>    "moneyphp/money": "^4.0"<br/>},</span></pre><p id="ea60" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们现在同时支持PHP 7.4+和PHP 8.0+。但是等等，这是行不通的——Money library<a class="ae lq" href="https://github.com/moneyphp/money/blob/v4.0.0/composer.json#L27" rel="noopener ugc nofollow" target="_blank">需要PHP 8.0+ </a>用于它的v4，所以如果我们想添加对PHP 7.4的支持，我们还需要包含一个旧版本的Money。</p><p id="d2e0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">再来更新一下<code class="fe ls lt lu lv b">composer.json</code>:</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="4a14" class="nt lx it lv b gy nu nv l nw nx">"require": {<br/>    "php": "^7.4|^8.0",<br/>    "moneyphp/money": "^3.0|^4.0"<br/>},</span></pre><p id="f304" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们现在也支持货币v3和v4。由于Money v3 <a class="ae lq" href="https://github.com/moneyphp/money/blob/3.x/composer.json#L27" rel="noopener ugc nofollow" target="_blank">需要PHP 5.6+ </a>，我们也应该兼容PHP 7.4。</p><p id="e0e6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">由于我们已经更新了<code class="fe ls lt lu lv b">composer.json</code>，让我们用下面的命令来确保我们的本地<code class="fe ls lt lu lv b">composer.lock</code>是最新的:</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="baf1" class="nt lx it lv b gy nu nv l nw nx">$ composer update --lock</span></pre><p id="780d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们现在需要更新我们的工作流程，以确保测试套件可以在两个版本的PHP上运行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="2523" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里的主要变化是增加了<code class="fe ls lt lu lv b">strategy</code>部分。一个<a class="ae lq" href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstrategy" rel="noopener ugc nofollow" target="_blank">策略</a>允许我们为我们的工作定义一个<a class="ae lq" href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstrategymatrix" rel="noopener ugc nofollow" target="_blank">矩阵</a>-一种使用不同配置运行步骤的方法。</p><p id="70a5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是让我们先快速看一下<code class="fe ls lt lu lv b">fail-fast</code>——通过将这个<a class="ae lq" href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstrategyfail-fast" rel="noopener ugc nofollow" target="_blank">属性</a>设置为<code class="fe ls lt lu lv b">false</code>,我们确保这些步骤将针对所有配置运行，并且即使其中一个配置失败也不会被中断。我们希望得到所有PHP版本的全面反馈，这样我们就可以解决出现的任何问题。</p><p id="ce4d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后是<code class="fe ls lt lu lv b">matrix</code>部分，由一个<code class="fe ls lt lu lv b">php-version</code>键组成，它是一个值数组。这样做的目的是，对于每一个连续运行的步骤，<code class="fe ls lt lu lv b">php-version</code>键将被赋予一个来自数组的新值，直到我们到达数组的末尾。</p><p id="244b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，我们也在这里列出了PHP 8.1，因为它与PHP 8.0有一些显著的不同。</p><p id="15a3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<em class="lr">设置PHP </em>步骤中，我们可以看到<code class="fe ls lt lu lv b">php-version</code>键被进一步引用。我们在<code class="fe ls lt lu lv b">with</code>部分下添加了一个新的<code class="fe ls lt lu lv b">php-version</code>键——这是我们使用Setup PHP GitHub操作中的<a class="ae lq" href="https://github.com/shivammathur/setup-php#php-version-required" rel="noopener ugc nofollow" target="_blank">配置选项</a>分配当前运行值(<code class="fe ls lt lu lv b">${{ matrix.php-version }}</code>)的地方。</p><p id="7f06" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们尝试一下——提交并推送更改，然后再次转到存储库的<em class="lr"> Actions </em>选项卡。稍等几秒钟，您应该会看到这次运行失败了:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/35ace52f462c047b1b5e1bbcc3081fdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6y4O4RYL4suLsds9.png"/></div></div></figure><p id="bca2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">单击工作流运行PHP 7.4作业出现了一个问题:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/a023da9b64588bae1a16864c7a57298b.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/0*Pop0ROhuj9-qomPE.png"/></div></figure><p id="9f6a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">点击它并展开<em class="lr">运行PHPUnit </em>日志:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/8b889b0da38e8197b27e7ea113bc31a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lWvrMAoGfaWwS2ZS.png"/></div></div></figure><p id="0457" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有意思。我们的一个测试断言在第23行失败了:</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="8f05" class="nt lx it lv b gy nu nv l nw nx">$this-&gt;assertFalse($checker-&gt;isSame($amount1, $amount2, $amount4));</span></pre><p id="bf3d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">查看货币库的<a class="ae lq" href="https://github.com/moneyphp/money/blob/master/CHANGELOG.md" rel="noopener ugc nofollow" target="_blank">变更日志</a>，原因似乎是因为<code class="fe ls lt lu lv b">Money@isSameCurrency</code>方法只增加了对来自v4 的多个参数<a class="ae lq" href="https://github.com/moneyphp/money/blob/v4.0.0/CHANGELOG.md#changed" rel="noopener ugc nofollow" target="_blank">的支持。我们知道这个版本只能和PHP 8.0+一起使用，这也解释了为什么Composer在检测到PHP 7.4的时候会安装Money v3。</a></p><p id="5650" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了解决这个问题，我们需要改变<code class="fe ls lt lu lv b">isSame</code>方法在<code class="fe ls lt lu lv b">CurrencyHelper.php</code>中的工作方式:</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="7cd8" class="nt lx it lv b gy nu nv l nw nx">public function isSame(Money ...$amounts): bool<br/>{<br/>    if (count($amounts) === 1) {<br/>        return true;<br/>    }<br/><br/>    $first = array_shift($amounts);<br/><br/>    foreach ($amounts as $amount) {<br/>        if (! $first-&gt;isSameCurrency($amount)) {<br/>            return false;<br/>        }<br/>    }<br/><br/>    return true;<br/>}</span></pre><p id="2fe2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们现在循环遍历这些元素，并将它们的货币与第一个元素的货币逐一进行比较，而不是一次将<code class="fe ls lt lu lv b">$amounts</code>数组的所有剩余元素传递给<code class="fe ls lt lu lv b">isSameCurrency</code>。</p><p id="db47" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在推动我们的更改之前，让我们确保没有破坏我们的库:</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="acf2" class="nt lx it lv b gy nu nv l nw nx">$ ./vendor/bin/phpunit tests</span></pre><p id="6de7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">提交并推动并再次检查<em class="lr">动作</em>选项卡:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/842828989d75b48c5bb3e64f426139ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2FYqsGE_7I9RiU_I.png"/></div></div></figure><p id="267f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">错误没了！</p><p id="16f5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所以看起来我们的库现在兼容PHP 7.4+和PHP 8.0+。</p><p id="3aa8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">或者是？</p><h1 id="d81a" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">测试依赖性较低的版本</h1><p id="9810" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ne lf lg lh nf lj lk ll ng ln lo lp im bi translated">让我们再看一下日志。单击最近成功运行的工作流，并从左侧输入<em class="lr"> PHPUnit (7.4) </em>作业。展开<em class="lr">Install composer dependencies</em>日志，并查找引用货币库的行。</p><p id="c32b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">看起来Composer默认选择了最新的次要版本(撰写本文时为3.3.1版):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/d9a75d114a497b46381c33289309e37c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TFexoojUkxSN4vCc.png"/></div></div></figure><p id="64f1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">问题是我们希望我们的库也能兼容以前的版本——我们怎么能强迫Composer安装最低版本——3 . 0 . 0？</p><p id="06e9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们需要再次更新<code class="fe ls lt lu lv b">ci.yml</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="7a13" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，我们已经向矩阵中添加了一个新键— <code class="fe ls lt lu lv b">dependency-versions</code>。它也是一个数组，有两个值— <code class="fe ls lt lu lv b">lowest</code>和<code class="fe ls lt lu lv b">highest</code>。</p><p id="62bd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这一次，我们利用了Composer Install GitHub操作中的<a class="ae lq" href="https://github.com/ramsey/composer-install#dependency-versions" rel="noopener ugc nofollow" target="_blank">配置选项</a>，允许我们强制Composer使用最低或最高版本的依赖项。</p><p id="0120" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以看到在下面的<em class="lr">安装composer依赖项</em>步骤中使用了<code class="fe ls lt lu lv b">dependency-versions</code>键。我们给它添加了一个新的<code class="fe ls lt lu lv b">with</code>部分，有一个单独的<code class="fe ls lt lu lv b">dependency-versions</code>键，我们把矩阵中的当前值(<code class="fe ls lt lu lv b">${{ matrix.dependency-versions }}</code>)分配给它。</p><p id="dab3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当值为<code class="fe ls lt lu lv b">lowest</code>时，Composer Install GitHub Action将在后台运行该命令:</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="a2be" class="nt lx it lv b gy nu nv l nw nx">$ composer update --prefer-lowest --prefer-stable</span></pre><p id="85c2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">向矩阵中添加新的值数组会有什么后果？答案是，两个数组的组合有多少，就会触发多少步运行。</p><p id="ddba" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们来看看它的运行情况——提交并推送新的工作流，并再次检查<em class="lr">操作</em>选项卡:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/d552f3000c2efd4561dfff150204fe87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GScTkUStASXRYp1P.png"/></div></div></figure><p id="ffaf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">看起来新版本有问题。如果我们点击它，我们会看到测试套件是为每个PHP和依赖版本运行的，以及为来自<code class="fe ls lt lu lv b">dependency-versions</code>数组的每个值运行的。</p><p id="ed90" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是所有使用<code class="fe ls lt lu lv b">lowest</code>值的运行都失败了:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/212150c91a47a6de0577d1e1a4e5b44d.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/0*axR8TELAMSs9kKw1.png"/></div></figure><p id="6260" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们找出原因。点击<em class="lr"> PHPUnit (7.4，最低)</em>作业，展开<em class="lr">运行PHPUnit </em>日志:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/5b08bda946f4b3b7ccf7c8103e733e7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KOa55hPNtQkuw0xU.png"/></div></div></figure><p id="2bc9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">错误如下:</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="cb9a" class="nt lx it lv b gy nu nv l nw nx">Call to undefined method Money\Currencies\ISOCurrencies::numericCodeFor()</span></pre><p id="3906" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们再看一下钱库的changelog，可以看到这个方法是用v3.0.5 添加的<a class="ae lq" href="https://github.com/moneyphp/money/blob/v4.0.0/CHANGELOG.md#305---2017-04-26" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="2e60" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们现在有两种方法来解决这个问题——要么我们更新<code class="fe ls lt lu lv b">CurrencyHelper@numericCode</code>方法并手动实现<a class="ae lq" href="https://github.com/moneyphp/money/compare/v3.0.4...v3.0.5#diff-0631517d385a0d04aa9dbc68ee7e92163b406e084208483ab1837c3ace4bb7f1" rel="noopener ugc nofollow" target="_blank">变更</a>，要么我们将支持的最低版本提升到3.0.5。</p><p id="c5fe" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">既然这个版本是小<a class="ae lq" href="https://semver.org/#summary" rel="noopener ugc nofollow" target="_blank">补丁</a>，那么做后者感觉也是合理的。</p><p id="1c0e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们最后一次更新<code class="fe ls lt lu lv b">composer.json</code>:</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="7d5d" class="nt lx it lv b gy nu nv l nw nx">"require": {<br/>    "php": "^7.4|^8.0",<br/>    "moneyphp/money": "^3.0.5|^4.0"<br/>},</span></pre><p id="461f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">提交和推送，并等待工作流运行完成:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/ed3273ea717b8b7c69820a7aed88b1aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HWFmdW-mTsrPpve1.png"/></div></div></figure><p id="41c4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">不再有错误！</p><p id="fcbd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了更好地测量，让我们确保我们的本地<code class="fe ls lt lu lv b">composer.lock</code>再次与<code class="fe ls lt lu lv b">composer.json</code>同步:</p><pre class="kj kk kl km gt np lv nq nr aw ns bi"><span id="eec2" class="nt lx it lv b gy nu nv l nw nx">$ composer update --lock</span></pre><h1 id="4d85" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结束语</h1><p id="bb5a" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ne lf lg lh nf lj lk ll ng ln lo lp im bi translated">兼容性测试再次强调了对我们的应用程序进行良好测试的重要性。即使我们不需要支持一系列依赖版本，每当我们发现自己需要更新其中一个版本时，拥有一个强大的测试套件会给我们信心，它不会破坏我们代码的某些部分。这也适用于升级到新的PHP版本。</p><p id="0fef" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">不过话说回来，大部分PHP开发人员都不用过多考虑这个。当我创建我的第一个开源库T2的时候，以及后来，当我开始探索用PHP构建控制台的时候，我个人开始更认真地研究兼容性测试。</p><div class="oo op gp gr oq or"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-build-and-distribute-beautiful-command-line-applications-with-php-and-composer-50b6420245f2"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd iu gy z fp ow fr fs ox fu fw is bi translated">如何用PHP和Composer构建和发布漂亮的命令行应用程序</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">PHP不一定只能在web上使用——开始创建自己的CLI工具怎么样？</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf ks or"/></div></div></a></div><p id="a004" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然而，您可能最终会发现自己处于这样一种情况，需要用有限的目标环境知识来构建和提供一个PHP包。无论是在私人公司，还是作为一种回馈社区的方式，当那一天到来时，手边有这样的指南可能是有用的。</p><h1 id="d030" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">资源</h1><ul class=""><li id="b534" class="mo mp it kw b kx mq la mr ld ms lh mt ll mu lp mv mw mx my bi translated"><a class="ae lq" href="https://github.com/osteel/php-compatibility-demo" rel="noopener ugc nofollow" target="_blank">文章储存库</a></li><li id="2984" class="mo mp it kw b kx mz la na ld nb lh nc ll nd lp mv mw mx my bi translated"><a class="ae lq" href="https://docs.github.com/en/actions" rel="noopener ugc nofollow" target="_blank"> GitHub动作文档</a></li><li id="4791" class="mo mp it kw b kx mz la na ld nb lh nc ll nd lp mv mw mx my bi translated"><a class="ae lq" href="https://docs.github.com/en/actions/using-workflows" rel="noopener ugc nofollow" target="_blank"> GitHub动作工作流程文档</a></li><li id="4af7" class="mo mp it kw b kx mz la na ld nb lh nc ll nd lp mv mw mx my bi translated"><a class="ae lq" href="https://github.com/actions/checkout" rel="noopener ugc nofollow" target="_blank">结账(GitHub动作)</a></li><li id="50ed" class="mo mp it kw b kx mz la na ld nb lh nc ll nd lp mv mw mx my bi translated"><a class="ae lq" href="https://github.com/shivammathur/setup-php" rel="noopener ugc nofollow" target="_blank">设置PHP (GitHub操作)</a></li><li id="9c0b" class="mo mp it kw b kx mz la na ld nb lh nc ll nd lp mv mw mx my bi translated"><a class="ae lq" href="https://github.com/ramsey/composer-install" rel="noopener ugc nofollow" target="_blank"> Composer安装(GitHub操作)</a></li><li id="66dc" class="mo mp it kw b kx mz la na ld nb lh nc ll nd lp mv mw mx my bi translated"><a class="ae lq" href="https://github.com/moneyphp/money" rel="noopener ugc nofollow" target="_blank"> PHP钱库</a></li></ul></div><div class="ab cl pg ph hx pi" role="separator"><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl"/></div><div class="im in io ip iq"><p id="807f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="lr">本故事原载于</em><a class="ae lq" href="https://tech.osteel.me/posts/a-github-workflow-to-check-the-compatibility-of-your-php-package-with-a-range-of-dependency-versions" rel="noopener ugc nofollow" target="_blank"><em class="lr">tech . osteel . me</em></a><em class="lr">。</em></p></div><div class="ab cl pg ph hx pi" role="separator"><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl"/></div><div class="im in io ip iq"><h1 id="eaf4" class="lw lx it bd ly lz pn mb mc md po mf mg jz pp ka mi kc pq kd mk kf pr kg mm mn bi translated">分级编码</h1><p id="8aa4" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ne lf lg lh nf lj lk ll ng ln lo lp im bi translated">感谢您成为我们社区的一员！更多内容见<a class="ae lq" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">级编码出版物</a>。<br/>跟随:<a class="ae lq" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a>，<a class="ae lq" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">领英</a>，<a class="ae lq" href="https://newsletter.levelup.dev/" rel="noopener ugc nofollow" target="_blank">通迅</a> <br/> <strong class="kw iu">升一级正在改造理工大招聘➡️ </strong> <a class="ae lq" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu">加入我们的人才集体</strong> </a></p></div></div>    
</body>
</html>