<html>
<head>
<title>Let's Build a Minecraft Server Wrapper in Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们在Go中构建一个《我的世界》服务器包装器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/lets-build-a-minecraft-server-wrapper-in-go-122c087e0023?source=collection_archive---------14-----------------------#2020-09-14">https://levelup.gitconnected.com/lets-build-a-minecraft-server-wrapper-in-go-122c087e0023?source=collection_archive---------14-----------------------#2020-09-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/d02d58ddb9a8d1d32be285047ee9d418.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*pNjTcPcbi2QzSgK0bIJFFA.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">来自<a class="ae jy" href="https://www.pixilart.com/photo/pixel-gopher-e12f7b080c61303?fbclid=IwAR0Iuvkzpg8z_F-MD3ngSFMxdowAmmFunqAelpmShqDIfPy6psU-Pg25Jow" rel="noopener ugc nofollow" target="_blank"> pixilart </a>的地鼠由<a class="ae jy" href="https://www.pixilart.com/anael-wan" rel="noopener ugc nofollow" target="_blank"> Ana Wan </a></figcaption></figure><p id="bdc6" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated"><em class="kx">本文基于Go 1.14 &amp;《我的世界》服务器1.14。</em></p><p id="f778" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">《我的世界》不需要介绍，《我的世界》的服务器也不需要介绍！但是《我的世界》服务器包装器(MSW)怎么样呢？你可能是一个休闲玩家或者是一个铁杆《我的世界》迷，但是如果你曾经在社区服务器上玩过，那么很有可能你已经间接地和一个MSW互动过了。</p><blockquote class="ky kz la"><p id="32f9" class="jz ka kx kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ij bi translated">MSW是一个包装《我的世界》服务器的工具，它通过推送命令和读取服务器日志来与服务器交互。</p></blockquote><p id="e14e" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">大多数《我的世界》社区服务器或托管服务使用某种MSW。对于开发人员来说，围绕他们的《我的世界》服务器构建解决方案非常方便，例如:</p><ul class=""><li id="72dd" class="le lf iq kb b kc kd kg kh kk lg ko lh ks li kw lj lk ll lm bi translated">运行聊天机器人，如<a class="ae jy" href="https://discord.com/" rel="noopener ugc nofollow" target="_blank"> discord </a>、<a class="ae jy" href="https://slack.com/" rel="noopener ugc nofollow" target="_blank"> slack </a>或<a class="ae jy" href="https://gitter.im/" rel="noopener ugc nofollow" target="_blank"> gitter </a>，通过消息发送命令和接收服务器更新。</li><li id="ee3f" class="le lf iq kb b kc ln kg lo kk lp ko lq ks lr kw lj lk ll lm bi translated">公开一些API来支持web客户端或移动应用程序。</li><li id="1a98" class="le lf iq kb b kc ln kg lo kk lp ko lq ks lr kw lj lk ll lm bi translated">创建一个网页挂钩，通过机器人或电子邮件获得通知。</li></ul><p id="ac31" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">以下是一些著名的垃圾:</p><div class="ls lt gp gr lu lv"><a href="https://minecraftservers.gamepedia.com/Server_wrappers" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">服务器包装</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">从《我的世界》服务器Wiki服务器包装器是不修改《我的世界》服务器或其数据文件的系统，但是…</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">minecraftservers.gamepedia.com</p></div></div><div class="me l"><div class="mf l mg mh mi me mj js lv"/></div></div></a></div><p id="d4c1" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated"><em class="kx"> PS:如果想直接钻研代码，可以在</em><a class="ae jy" href="https://github.com/wlwanpan/medium/tree/master/minecraft-server-wrapper" rel="noopener ugc nofollow" target="_blank"><em class="kx">Github</em></a><em class="kx">上找到。</em></p><h1 id="4e84" class="mk ml iq bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">要求</h1><p id="68f3" class="pw-post-body-paragraph jz ka iq kb b kc ni ke kf kg nj ki kj kk nk km kn ko nl kq kr ks nm ku kv kw ij bi translated">在我们开始之前，您需要:</p><ul class=""><li id="5ae1" class="le lf iq kb b kc kd kg kh kk lg ko lh ks li kw lj lk ll lm bi translated">可以从<a class="ae jy" href="https://www.minecraft.net/en-us/download/server" rel="noopener ugc nofollow" target="_blank">官网</a>免费下载的《我的世界》服务器<code class="fe nn no np nq b">.jar</code>文件。任何版本都可以工作，因为《我的世界》命令和日志都相当一致。</li><li id="1fc2" class="le lf iq kb b kc ln kg lo kk lp ko lq ks lr kw lj lk ll lm bi translated">而且，很明显，<a class="ae jy" href="https://golang.org/doc/install" rel="noopener ugc nofollow" target="_blank">转</a>安装在本地。</li></ul><p id="20dd" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">您可以通过在终端中运行以下命令来直接启动服务器:</p><pre class="nr ns nt nu gt nv nq nw nx aw ny bi"><span id="92ee" class="nz ml iq nq b gy oa ob l oc od">java -Xmx1024M -Xms1024M -jar server.jar nogui</span></pre><p id="26e1" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">第一次这样做时，您会看到以下消息:</p><pre class="nr ns nt nu gt nv nq nw nx aw ny bi"><span id="bfd0" class="nz ml iq nq b gy oa ob l oc od">You need to agree to the EULA in order to run the server. Go to eula.txt for more info.</span></pre><p id="71db" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">这是因为在使用服务器之前，您需要接受<a class="ae jy" href="https://account.mojang.com/documents/minecraft_eula" rel="noopener ugc nofollow" target="_blank">条款&amp;条件</a>，所以继续在<code class="fe nn no np nq b">eula.txt</code>文件中设置<code class="fe nn no np nq b">eula=true</code>，显然是在阅读了协议xD之后</p></div><div class="ab cl oe of hu og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="ij ik il im in"><h1 id="1f4e" class="mk ml iq bd mm mn ol mp mq mr om mt mu mv on mx my mz oo nb nc nd op nf ng nh bi translated">概观</h1><figure class="nr ns nt nu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="or os di ot bf ou"><div class="gh gi oq"><img src="../Images/4dc44ed0a819954b86636da466c71147.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*17ngjUwAq2uzLjtyIRfDIw.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">都市固体废物概述</figcaption></figure><p id="c9aa" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">都市固体废物由四个主要部分组成:</p><ol class=""><li id="84ba" class="le lf iq kb b kc kd kg kh kk lg ko lh ks li kw ov lk ll lm bi translated">Exec:运行《我的世界》服务器的可执行命令<code class="fe nn no np nq b">exec.Cmd</code>。</li><li id="67ac" class="le lf iq kb b kc ln kg lo kk lp ko lq ks lr kw ov lk ll lm bi translated">控制台:Java线程和主Goroutine之间的交互点。</li><li id="63c9" class="le lf iq kb b kc ln kg lo kk lp ko lq ks lr kw ov lk ll lm bi translated">LogParser:将服务器日志解析到服务器<code class="fe nn no np nq b">Event</code> ('starting '，' started '，' stopping '和' stopped ')。</li><li id="4dc6" class="le lf iq kb b kc ln kg lo kk lp ko lq ks lr kw ov lk ll lm bi translated">包装器:服务器的有限状态机(FSM)表示。</li></ol><h1 id="1a66" class="mk ml iq bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">1.高级管理人员</h1><p id="03f8" class="pw-post-body-paragraph jz ka iq kb b kc ni ke kf kg nj ki kj kk nk km kn ko nl kq kr ks nm ku kv kw ij bi translated">第一步是写一个函数<code class="fe nn no np nq b">JavaExecCmd</code>来配置Java可执行命令。我们将采用3个参数:</p><ul class=""><li id="d708" class="le lf iq kb b kc kd kg kh kk lg ko lh ks li kw lj lk ll lm bi translated"><code class="fe nn no np nq b">serverPath</code>:您的<code class="fe nn no np nq b">server.jar</code>文件的文件路径。</li><li id="fc0f" class="le lf iq kb b kc ln kg lo kk lp ko lq ks lr kw lj lk ll lm bi translated"><code class="fe nn no np nq b">initialHeapSize</code>:启动服务器时的初始内存量(Mb)。</li><li id="0010" class="le lf iq kb b kc ln kg lo kk lp ko lq ks lr kw lj lk ll lm bi translated"><code class="fe nn no np nq b">maxHeapSize</code>:服务器可以消耗的最大RAM (Mb)限制。</li></ul><figure class="nr ns nt nu gt jr"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="3b29" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">内存的使用会随着玩家的数量，使用的模式和世界的大小而变化。我在4gigs实例(<a class="ae jy" href="https://aws.amazon.com/ec2/instance-types/a1" rel="noopener ugc nofollow" target="_blank"> EC2 — a1.large </a>)上运行了一个私人香草《我的世界》服务器，我发现它足以支持大约2-4个玩家，没有明显的延迟或同步问题。</p><p id="bf50" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">在进入下一步之前，我们可以通过在主函数中启动输出<code class="fe nn no np nq b">exec.Cmd</code>来测试<code class="fe nn no np nq b">JavaExecCmd</code>:</p><figure class="nr ns nt nu gt jr"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="d8ce" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">注意，我们将默认的<code class="fe nn no np nq b">Stdout</code>设置为<code class="fe nn no np nq b">os.Stdout</code>，这允许我们在终端上查看从服务器线程返回的服务器日志。</p><h1 id="0bce" class="mk ml iq bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">2.安慰</h1><p id="8f3a" class="pw-post-body-paragraph jz ka iq kb b kc ni ke kf kg nj ki kj kk nk km kn ko nl kq kr ks nm ku kv kw ij bi translated">我们的下一步是处理<code class="fe nn no np nq b">Console</code>，它将包装上一步的<code class="fe nn no np nq b">exec.Cmd</code>，通过stdin/stdout管道管理并与服务器进程通信。</p><figure class="nr ns nt nu gt jr"><div class="bz fp l di"><div class="ow ox l"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">控制台结构</figcaption></figure><p id="9b9f" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">在设置了stdin/stdout管道之后，我们可以公开以下方法:</p><ul class=""><li id="67e8" class="le lf iq kb b kc kd kg kh kk lg ko lh ks li kw lj lk ll lm bi translated"><code class="fe nn no np nq b">WriteCmd</code>:向java线程的stdin写入一个字符串命令。</li><li id="a781" class="le lf iq kb b kc ln kg lo kk lp ko lq ks lr kw lj lk ll lm bi translated"><code class="fe nn no np nq b">ReadLine</code>:从java线程中逐行读取stdout。</li></ul><figure class="nr ns nt nu gt jr"><div class="bz fp l di"><div class="ow ox l"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">读取线和写入命令</figcaption></figure><p id="2130" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">我们现在有了读取服务器日志的方法。</p><h1 id="a165" class="mk ml iq bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">3.LogParser</h1><figure class="nr ns nt nu gt jr gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/a67f3f7da0b7b098657d52d4dc1e947a.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*EnON-E9uVLGovTizBg4IZw.gif"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">来源:<a class="ae jy" href="https://minecraft.gamepedia.com/File:Gear_(N).gif" rel="noopener ugc nofollow" target="_blank">游戏百科</a></figcaption></figure><p id="c76a" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">日志解析器用于将每个服务器日志转换为各自的服务器事件。我们将很快进入服务器事件的更多细节。</p><p id="b86f" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">让我们来看看问题中的日志的结构。以下是服务器日志的一小段:</p><pre class="nr ns nt nu gt nv nq nw nx aw ny bi"><span id="c977" class="nz ml iq nq b gy oa ob l oc od">[11:41:05] [Server thread/INFO]: Starting minecraft server version 1.14.4<br/>[11:41:05] [Server thread/INFO]: Loading properties<br/>[11:41:05] [Server thread/INFO]: Default game type: SURVIVAL<br/>[11:41:05] [Server thread/INFO]: Generating keypair<br/>[11:41:05] [Server thread/INFO]: Starting Minecraft server on *:25565<br/>[11:41:05] [Server thread/INFO]: Using epoll channel type<br/>[11:41:05] [Server thread/INFO]: Preparing level "world"</span></pre><p id="35f2" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">每行有4条主要信息:</p><ul class=""><li id="4fd3" class="le lf iq kb b kc kd kg kh kk lg ko lh ks li kw lj lk ll lm bi translated">格式为H:MM:SS的时间戳。</li><li id="762c" class="le lf iq kb b kc ln kg lo kk lp ko lq ks lr kw lj lk ll lm bi translated">线程名称，表示日志是来自主java线程还是工作线程。</li><li id="ce05" class="le lf iq kb b kc ln kg lo kk lp ko lq ks lr kw lj lk ll lm bi translated">日志级别—跟踪、调试、信息、致命和错误。</li><li id="400c" class="le lf iq kb b kc ln kg lo kk lp ko lq ks lr kw lj lk ll lm bi translated">输出——最重要的部分，因为这是我们可以根据某些关键字提取服务器正在做什么的地方。</li></ul><p id="72b9" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">酷！现在我们了解了日志结构，我们可以使用下面的正则表达式:</p><pre class="nr ns nt nu gt nv nq nw nx aw ny bi"><span id="3b3b" class="nz ml iq nq b gy oa ob l oc od">(\[[0-9:]*\]) \[([A-z(-| )#0-9]*)\/([A-z #]*)\]: (.*)</span></pre><p id="da7f" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">匹配上面提到的每条信息，并将其表示为Go结构<code class="fe nn no np nq b">LogLine</code>:</p><figure class="nr ns nt nu gt jr"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="a5d7" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated"><code class="fe nn no np nq b">ParseToLogLine</code>是一个助手函数，将服务器日志的一行分解成一个<code class="fe nn no np nq b">LogLine</code>实例。</p><p id="9f9b" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">例如，当《我的世界》服务器成功加载并准备好接受播放器时，会返回以下日志:</p><pre class="nr ns nt nu gt nv nq nw nx aw ny bi"><span id="6c22" class="nz ml iq nq b gy oa ob l oc od">[21:25:21] [Server thread/INFO]: Done (13.681s)! For help, type "help"</span></pre><p id="d8b0" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">相应的<code class="fe nn no np nq b">LogLine</code>实例是:</p><pre class="nr ns nt nu gt nv nq nw nx aw ny bi"><span id="9bad" class="nz ml iq nq b gy oa ob l oc od">&amp;LogLine{<br/>    timestamp: "[21:25:21]",<br/>    threadName: "Server thread",<br/>    level: "INFO",<br/>    output: `Done (13.681s)! For help, type "help"`,<br/>}</span></pre><p id="a2d4" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">在对<code class="fe nn no np nq b">LogLine</code>的服务器日志进行初步解析之后，我们可以使用其<code class="fe nn no np nq b">output</code>字符串字段将其转换为特定的服务器<code class="fe nn no np nq b">Event</code>，如下所示:</p><figure class="nr ns nt nu gt jr"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="ef12" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">这里我们定义了一个<code class="fe nn no np nq b">Event</code>到<code class="fe nn no np nq b">*regexp.Regexp</code>的映射，将任何给定的<code class="fe nn no np nq b">output</code>字符串匹配到一个预定义的<code class="fe nn no np nq b">Event</code>。然后在下一节中使用<code class="fe nn no np nq b">Event</code>来更新我们的<code class="fe nn no np nq b">Wrapper</code>的状态。</p><p id="184b" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">请注意，我们没有针对<code class="fe nn no np nq b">EventStopped</code>的<code class="fe nn no np nq b">regexp</code>，因为服务器日志没有提供可靠的消息来表明服务器已经成功停止。因此，我们将使用stdout管道关闭时返回的错误<code class="fe nn no np nq b">io.EOF</code>，这发生在服务器停止时。</p><h1 id="2e8f" class="mk ml iq bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">4.包装材料</h1><figure class="nr ns nt nu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="or os di ot bf ou"><div class="gh gi oz"><img src="../Images/dac130f83800f9895f4eb8ea3db11162.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YHRLV5JOWhwP9l4E3-9I3Q.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">包装器有限状态机</figcaption></figure><p id="f507" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">最后，<code class="fe nn no np nq b">Wrapper</code>！<code class="fe nn no np nq b">Wrapper</code>将利用<code class="fe nn no np nq b">Console</code>和<code class="fe nn no np nq b">LogParser</code>来协调FSM。我们将使用这个简洁的go包<a class="ae jy" href="https://github.com/looplab/fsm" rel="noopener ugc nofollow" target="_blank"> fsm </a>由<a class="ae jy" href="https://github.com/looplab" rel="noopener ugc nofollow" target="_blank"> looplab </a>定义我们的状态和转换，如概述图所示:</p><figure class="nr ns nt nu gt jr"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="fbaa" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">定义了我们的<code class="fe nn no np nq b">Wrapper</code>之后，下一步是通过添加我们的<code class="fe nn no np nq b">LogParser</code>函数来处理和更新我们的FSM，从而将这些点连接起来，所以让我们开始吧:</p><figure class="nr ns nt nu gt jr"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="4a2e" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated"><code class="fe nn no np nq b">processLogEvents</code>是一个私有方法，它运行一个<code class="fe nn no np nq b">for</code>循环，这个循环本来是要在<code class="fe nn no np nq b">goroutine</code>中运行的，一旦我们想要启动服务器，它就在后台处理和更新我们的状态转换。为了便于使用，我们可以在我们的<code class="fe nn no np nq b">Wrapper</code>中公开一个<code class="fe nn no np nq b">Start</code>和<code class="fe nn no np nq b">Stop</code>方法:</p><figure class="nr ns nt nu gt jr"><div class="bz fp l di"><div class="ow ox l"/></div></figure><h1 id="45ce" class="mk ml iq bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">最后试验</h1><p id="2487" class="pw-post-body-paragraph jz ka iq kb b kc ni ke kf kg nj ki kj kk nk km kn ko nl kq kr ks nm ku kv kw ij bi translated">最后，我们可以初始化<code class="fe nn no np nq b">Start</code>一个新的<code class="fe nn no np nq b">Wrapper</code>并在15秒后调用<code class="fe nn no np nq b">Stop</code>进行测试。在一些日志的帮助下，我们可以在日志被读取和处理后检查<code class="fe nn no np nq b">Wrapper</code>的当前状态:</p><figure class="nr ns nt nu gt jr"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="c9f8" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">输出:</p><figure class="nr ns nt nu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="or os di ot bf ou"><div class="gh gi pa"><img src="../Images/f7f299f159bfbcd404592a328738cbb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n-vITYRuDR3AN4oPM-vNWg.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">最终代码的控制台输出</figcaption></figure><p id="1e5f" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">我们完了。</p></div><div class="ab cl oe of hu og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="ij ik il im in"><p id="af8b" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">既然构建模块已经布置好了，那么就可以在城市固体废弃物的顶部建立各种各样的创造性系统。就个人而言，我想要一种友好的方式来打开和关闭我的《我的世界》服务器，在“克拉夫”之后不久，不和谐机器人就出现了。</p><figure class="nr ns nt nu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="or os di ot bf ou"><div class="gh gi pb"><img src="../Images/4f39768fded473a0506b0dceaf918b87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cPg0dGvc3fWy6_YBZWWPhw.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">和克拉夫聊天</figcaption></figure><p id="a2a8" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">感谢您阅读到最后:)我希望这篇文章是有启发性的，并激励您尝试一下！快乐建筑&amp;黑客！</p></div></div>    
</body>
</html>