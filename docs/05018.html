<html>
<head>
<title>Test Internet Speed using Python — Python Programming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python测试互联网速度——Python编程</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/test-internet-speed-using-python-python-programming-2b8b387b004f?source=collection_archive---------22-----------------------#2020-07-29">https://levelup.gitconnected.com/test-internet-speed-using-python-python-programming-2b8b387b004f?source=collection_archive---------22-----------------------#2020-07-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/89fa680ffe9da8ce4e36ab2550dcd4f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*FnER6Rdrbk-1Lrbgj5fp9Q.jpeg"/></div></figure><p id="b6c2" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在本文中，我们将讨论如何使用Python和speedtest-cli库来测试互联网速度。</p><p id="3401" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">目录</strong></p><ul class=""><li id="af1a" class="kv kw it jz b ka kb ke kf ki kx km ky kq kz ku la lb lc ld bi translated">介绍</li><li id="2cc0" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated">安装所需的库</li><li id="7497" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated">方法描述</li><li id="071c" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated">测试互联网速度</li><li id="6e87" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated">结论</li></ul><figure class="lj lk ll lm gt ju"><div class="bz fp l di"><div class="ln lo l"/></div></figure><h1 id="2e7d" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">介绍</h1><p id="ebf4" class="pw-post-body-paragraph jx jy it jz b ka mn kc kd ke mo kg kh ki mp kk kl km mq ko kp kq mr ks kt ku im bi translated">我们家中和办公室的互联网连接因互联网服务提供商(ISP)、允许的流量限制以及最重要的速度而异。</p><p id="a98a" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">那么，当我们想测试我们的连接速度时，我们该怎么做呢？正确，我们在谷歌上查找一些速度测试网站，然后继续进行。</p><p id="542e" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">试着用不到10行代码在你的电脑上用Python测试网速怎么样？我们来看看吧！</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="8787" class="lp lq it bd lr ls mz lu lv lw na ly lz ma nb mc md me nc mg mh mi nd mk ml mm bi translated">安装所需的库</h1><p id="c1a0" class="pw-post-body-paragraph jx jy it jz b ka mn kc kd ke mo kg kh ki mp kk kl km mq ko kp kq mr ks kt ku im bi translated">为了继续本文中的示例，您需要安装一个额外的库speedtest-cli。</p><p id="4c34" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果您没有安装它们，请打开“命令提示符”(在Windows上)并使用以下代码安装它们:</p><pre class="lj lk ll lm gt ne nf ng nh aw ni bi"><span id="be95" class="nj lq it nf b gy nk nl l nm nn">pip install speedtest-cli</span></pre><p id="2934" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">现在已经安装好了，让我们继续导入它:</p><figure class="lj lk ll lm gt ju"><div class="bz fp l di"><div class="no lo l"/></div></figure></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="155a" class="lp lq it bd lr ls mz lu lv lw na ly lz ma nb mc md me nc mg mh mi nd mk ml mm bi translated">方法描述</h1><p id="d2df" class="pw-post-body-paragraph jx jy it jz b ka mn kc kd ke mo kg kh ki mp kk kl km mq ko kp kq mr ks kt ku im bi translated">首先，我们需要创建一个<strong class="jz iu"> Speedtest() </strong>类的实例，然后检查它拥有的方法，并讨论每一个方法。</p><figure class="lj lk ll lm gt ju"><div class="bz fp l di"><div class="no lo l"/></div></figure><p id="e665" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这个库的<a class="ae np" href="https://github.com/sivel/speedtest-cli" rel="noopener ugc nofollow" target="_blank">源代码</a>目前没有很多关于每个方法及其用法的详细信息，所以我们将从头开始探索。</p><p id="55e2" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">下一步我们要做的是找出上述类中实际包含的内容。换句话说，我们想看看我们可以使用什么，我们可以检索什么信息。</p><p id="04d9" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">使用inspect库(Python中预先构建的)，让我们看看<strong class="jz iu">的</strong>对象有哪些方法:</p><figure class="lj lk ll lm gt ju"><div class="bz fp l di"><div class="no lo l"/></div></figure><p id="2e76" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我们应该得到以下列表作为输出:</p><p id="6675" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">太神奇了！现在我们找到了包含的内容，接下来我们将讨论这些方法各自执行的操作。</p><p id="c6c5" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">。下载()</strong></p><p id="38db" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">正如你可能从它的名字中猜到的，这个方法将测试你当前连接的下载速度(以字节为单位)。要查看它的运行情况:</p><figure class="lj lk ll lm gt ju"><div class="bz fp l di"><div class="no lo l"/></div></figure><p id="7139" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我得到的结果是:142857662.477676，相当于142.86 Mbps。</p><p id="d566" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">。上传()</strong></p><p id="5073" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这个方法类似于前一个，但是测试你当前连接的上传速度(以字节为单位)。要查看它的运行情况:</p><figure class="lj lk ll lm gt ju"><div class="bz fp l di"><div class="no lo l"/></div></figure><p id="8cb2" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我得到的结果是:235955606.655482，相当于235.96 Mbps。</p><p id="923f" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">。get_best_server() </strong></p><p id="03f8" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这种方法允许我们确定测试连接的最佳服务器。一般来说，这有助于找到您所在地区(城市)的最佳测试服务器。</p><p id="90bd" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">就格式而言，它将返回一个包含该服务器详细信息的字典。让我们来看看:</p><figure class="lj lk ll lm gt ju"><div class="bz fp l di"><div class="no lo l"/></div></figure><p id="e320" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在我的例子中，因为我住在多伦多，它在多伦多市区的某个地方找到了最好的服务器，信息如下:</p><pre class="lj lk ll lm gt ne nf ng nh aw ni bi"><span id="14f8" class="nj lq it nf b gy nk nl l nm nn">url : <a class="ae np" href="http://tor47spd01.srvr.bell.ca:8080/speedtest/upload.php" rel="noopener ugc nofollow" target="_blank">http://tor47spd01.srvr.bell.ca:8080/speedtest/upload.php</a><br/>lat : 43.6481<br/>lon : -79.4042<br/>name : Toronto, ON<br/>country : Canada<br/>cc : CA<br/>sponsor : Bell Canada<br/>id : 17394<br/>host : tor47spd01.srvr.bell.ca:8080<br/>d : 18.828394194894738<br/>latency : 8.424</span></pre><p id="56b9" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">。get_closest_servers() </strong></p><p id="1fdd" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这种方法允许我们使用一组离我们的位置很近的服务器，然后我们可以使用这些服务器在不同的服务器/地区进行速度测试。</p><p id="e942" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">类似于前面的方法，我们将得到一个字典，但不是一个详细的服务器，而是更多。</p><p id="2c57" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这里我们创建存储整个字典，但出于显示目的，只打印出字典中第一项的详细信息:</p><figure class="lj lk ll lm gt ju"><div class="bz fp l di"><div class="no lo l"/></div></figure><p id="ca6f" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">输出显示为:</p><pre class="lj lk ll lm gt ne nf ng nh aw ni bi"><span id="62f0" class="nj lq it nf b gy nk nl l nm nn">url : <a class="ae np" href="http://speedtest2-tor.teksavvy.com:8080/speedtest/upload.php" rel="noopener ugc nofollow" target="_blank">http://speedtest2-tor.teksavvy.com:8080/speedtest/upload.php</a><br/>lat : 43.6532<br/>lon : -79.3832<br/>name : Toronto, ON<br/>country : Canada<br/>cc : CA<br/>sponsor : Teksavvy Solutions Inc<br/>id : 32632<br/>host : speedtest2-tor.teksavvy.com:8080<br/>d : 18.709590075865655</span></pre><p id="7c3b" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">请注意，最好的服务器不一定是最近的服务器，但通常它们都在同一地区/城市。</p><p id="d869" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">。get_servers() </strong></p><p id="3361" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这种方法允许我们获得所有可用服务器的信息。它的工作方式与前面的方法非常相似，并返回一个包含每个服务器详细信息的字典。</p><p id="92df" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">注意:我遇到的唯一问题是它们使用的键值，并且不确定如何解释它们，因为它们不是连续的。但我确信造物主对此有一个内在的逻辑。</p><figure class="lj lk ll lm gt ju"><div class="bz fp l di"><div class="no lo l"/></div></figure><p id="da97" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这将返回一个大型数据集，因此为了直观显示它们，下面是一台服务器的示例输出:</p><pre class="lj lk ll lm gt ne nf ng nh aw ni bi"><span id="6878" class="nj lq it nf b gy nk nl l nm nn">url : <a class="ae np" href="http://24.224.127.172:8080/speedtest/upload.php" rel="noopener ugc nofollow" target="_blank">http://24.224.127.172:8080/speedtest/upload.php</a><br/>lat : 35.5847<br/>lon : -80.8103<br/>name : Mooresville, NC<br/>country : United States<br/>cc : US<br/>sponsor : Continuum<br/>id : 3383<br/>host : 22.224.127.172:8080<br/>d : 922.322219276907</span></pre><p id="658a" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">。set_mini_server() </strong></p><p id="f722" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这个方法允许我们通过传递一个URL来设置speedtest服务器，而不是查询服务器列表。</p><p id="bfc5" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">服务器URL可以从我们使用<strong class="jz iu">检索的任何服务器中选择。get_servers() </strong>方法，或者来自这个列表的<a class="ae np" href="https://gist.github.com/gxgani/11401911" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="5349" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">例如，我选择了“http://speedtest.oltv.ru/”,我可以这样集成它:</p><figure class="lj lk ll lm gt ju"><div class="bz fp l di"><div class="no lo l"/></div></figure><p id="9aeb" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我们得到了一台为我们的速度测试设置的服务器:</p><pre class="lj lk ll lm gt ne nf ng nh aw ni bi"><span id="9ae8" class="nj lq it nf b gy nk nl l nm nn">sponsor : Speedtest Mini<br/>name : speedtest.oltv.ru<br/>d: 0<br/>url : <a class="ae np" href="http://speedtest.oltv.ru/speedtest/upload.php" rel="noopener ugc nofollow" target="_blank">http://speedtest.oltv.ru/speedtest/upload.php</a><br/>latency : 0<br/>id : 0</span></pre><p id="d1bf" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">。get_config() </strong></p><p id="e4e4" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这个方法允许我们找出speedtest类的当前配置，并提供一些关于我们自己的连接的相关信息，包括IP、服务器的位置、internet服务器提供商(ISP)等等。</p><p id="b0b2" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">它的执行非常简单，只需要调用方法而不需要任何额外的参数:</p><figure class="lj lk ll lm gt ju"><div class="bz fp l di"><div class="no lo l"/></div></figure><p id="a413" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">它返回一个包含相关信息的字典词典。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="af16" class="lp lq it bd lr ls mz lu lv lw na ly lz ma nb mc md me nc mg mh mi nd mk ml mm bi translated">结论</h1><p id="6abc" class="pw-post-body-paragraph jx jy it jz b ka mn kc kd ke mo kg kh ki mp kk kl km mq ko kp kq mr ks kt ku im bi translated">在本文中，我们讨论了如何使用Python测试互联网速度，还介绍了speetest-cli库的特性，并展示了如何调整一些参数。</p><p id="3fd9" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果你有任何问题或者对编辑有任何建议，请在下面留下你的评论，并查看更多我的<a class="ae np" href="https://pyshark.com/category/python-programming/" rel="noopener ugc nofollow" target="_blank"> Python编程</a>文章。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="c013" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><em class="nq">原载于2020年7月29日https://pyshark.com</em><a class="ae np" href="https://pyshark.com/test-internet-speed-using-python/" rel="noopener ugc nofollow" target="_blank"><em class="nq"/></a><em class="nq">。</em></p></div></div>    
</body>
</html>