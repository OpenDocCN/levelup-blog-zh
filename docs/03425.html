<html>
<head>
<title>Build infinite pagination with ES6 async generators and iterables</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨ES6å¼‚æ­¥ç”Ÿæˆå™¨å’Œiterablesæ„å»ºæ— é™åˆ†é¡µ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/build-infinite-pagination-with-es6-async-generators-and-iterables-f29a46aac466?source=collection_archive---------14-----------------------#2020-05-07">https://levelup.gitconnected.com/build-infinite-pagination-with-es6-async-generators-and-iterables-f29a46aac466?source=collection_archive---------14-----------------------#2020-05-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a5110b7b7e10f27d114b0a37216e4be8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DNDuE_yuHcCi8-Jc.gif"/></div></div></figure><h1 id="b246" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">æä»€ä¹ˆğŸ æ˜¯ä¸€å°å‘ç”µæœºã€‚</h1><p id="6fbb" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">å—¯ï¼Œæ ¹æ®å®šä¹‰:</p><blockquote class="lu lv lw"><p id="a7a7" class="kw kx lx ky b kz ly lb lc ld lz lf lg ma mb lj lk mc md ln lo me mf lr ls lt ij bi translated"><em class="iq">å‘ç”µæœºæ˜¯å¯ä»¥é€€å‡ºå¹¶åœ¨ä»¥åé‡æ–°è¿›å…¥çš„åŠŸèƒ½ã€‚å®ƒä»¬çš„ä¸Šä¸‹æ–‡(å˜é‡ç»‘å®š)å°†åœ¨é‡å…¥æ—¶è¢«ä¿å­˜ã€‚</em></p></blockquote><h1 id="fc53" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">çœŸæƒ³ä¸åˆ°ï¼Œè¿™ä¼šå¸¦æ¥ä»€ä¹ˆï¼ŸğŸ’­</h1><p id="32ed" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">å•Šï¼Œå†æ¬¡å®šä¹‰..ğŸ’¤</p><blockquote class="lu lv lw"><p id="dd64" class="kw kx lx ky b kz ly lb lc ld lz lf lg ma mb lj lk mc md ln lo me mf lr ls lt ij bi translated"><em class="iq">JavaScriptä¸­çš„ç”Ÿæˆå™¨â€”â€”ç‰¹åˆ«æ˜¯å½“ä¸æ‰¿è¯ºç»“åˆä½¿ç”¨æ—¶â€”â€”æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·</em></p></blockquote><h1 id="3cfa" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">çœŸå®ä¸–ç•Œçš„åœºæ™¯ï¼Ÿ</h1><p id="612c" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">åœ¨é˜…è¯»äº†æ‰€æœ‰çš„å®šä¹‰ä¹‹åï¼Œè®©æˆ‘ä»¬è¿›å…¥å®ƒçš„æ ¸å¿ƒã€‚:octocat:</p><p id="070d" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">æˆ‘ä»¬æœ‰ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜è¦è§£å†³ã€‚è¿™æ˜¯ä¸ºäº†åœ¨å‘å³æ»‘åŠ¨æ—¶ä¸ºæˆ‘ä»¬çš„ä¸€ä¸ªç§»åŠ¨åº”ç”¨ç¨‹åºåˆ†é¡µã€‚</p><h1 id="5103" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">æ‰€ä»¥æˆ‘ä»¬ç”¨å‘ç”µæœºæ¥å‘ç”µï¼Ÿ</h1><p id="845f" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">è¿˜æœ‰å…¶ä»–å¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼Œå‘ç”µæœºåªæ˜¯ä¸€ä¸ªæ›´æ¸…æ´çš„è§£å†³æ–¹æ¡ˆã€‚</p><h1 id="6ec3" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">æ€ä¹ˆåšï¼Ÿ</h1><p id="3984" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">åˆ›å»ºå‘ç”Ÿå™¨</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="4906" class="mp jz iq ml b gy mq mr l ms mt">const asyncGetContent = async function* (){<br/>  const limit = 10; /* content per page */<br/>  let offset = 0; /* index of item to start from */<br/>  let totalCount = -1; /* -1 signifies failure */<br/>  while (offset === 0 || offset &lt; totalCount) {<br/>    try {<br/>      const response = await (await fetch(&lt;&lt;url&gt;&gt;)).json();<br/>      offset = offset + limit;<br/>      totalCount = response["total-count"];<br/>      console.log(`offset + totalCount`, offset, totalCount);<br/>      yield response;<br/>    } catch (e) {<br/>      console.warn(`exception during fetch`, e);<br/>      yield {<br/>        done: true,<br/>        value: "error"<br/>      };<br/>    }<br/>  }<br/><br/>}</span></pre><p id="3167" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">è¦ç†è§£çš„å†…å®¹å¤ªå¤šäº†ï¼Œè®©æˆ‘ä»¬ä»”ç»†é˜…è¯»æ¯ä¸€è¡Œã€‚</p><p id="451a" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">â›„:æˆ‘ä»¬å·²ç»å®šä¹‰äº†ä¸€ä¸ªå˜é‡æ¥é™åˆ¶ä½ é€‰æ‹©çš„ç»“æœ(ä¸ä¸€å®šæ˜¯å¸¸é‡)</p><p id="ffd8" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">â›„å‡†å¤‡ä¸€ä¸ªfetch/ axios/ some APIè°ƒç”¨ï¼Œç”¨ä¸€ä¸ª<code class="fe mu mv mw ml b">await</code>æ¥å¤„ç†å®ƒï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è§£æç»“æœæ‰¿è¯ºã€‚</p><p id="3bf1" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">â›„ <code class="fe mu mv mw ml b">yield</code>å›åº”ã€‚è¿”å›å°†æ˜¯ä¸€ä¸ªæ‰¿è¯ºï¼Œç”±å¼‚æ­¥è°ƒç”¨è€…ä½¿ç”¨<code class="fe mu mv mw ml b">.next()</code>(æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­è®¨è®º)</p><p id="0f8b" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">â›„ï¼Œæˆ‘ä»¬æ¥å¤„ç†æ¡çƒçš„äº‹å§</p><blockquote class="lu lv lw"><p id="fe0f" class="kw kx lx ky b kz ly lb lc ld lz lf lg ma mb lj lk mc md ln lo me mf lr ls lt ij bi translated">æˆ‘å¦‚ä½•ä½¿ç”¨è¿™ä¸ªï¼Ÿ</p></blockquote><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="8e68" class="mp jz iq ml b gy mq mr l ms mt">const contentGen = await asyncGetContent(); /* initate the generator */</span></pre><p id="14cf" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">å‰©ä¸‹è¦åšçš„å°±æ˜¯åœ¨å¼‚æ­¥å‡½æ•°ä¸­åˆå§‹åŒ–å’Œè°ƒç”¨å®ƒï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><p id="783b" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">å¯åŠ¨åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•éœ€è¦çš„åœ°æ–¹è°ƒç”¨(ä¾‹å¦‚:å³å‡»/ç‚¹å‡»æŒ‰é’®)æ¥äº§ç”Ÿç»“æœ</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="0fc2" class="mp jz iq ml b gy mq mr l ms mt">const content = await contentGen.next();</span></pre><p id="8fc3" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">å¿…è¦æ—¶ä½¿ç”¨<code class="fe mu mv mw ml b">content</code>ã€åœ¨è¿™ç§æƒ…å†µä¸‹æ¥è‡ªapiçš„å“åº”ã€‘</p><p id="4977" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ä»¬ï¼Œæˆ‘ä»¬æœŸå¾…æ‚¨çš„åé¦ˆğŸ»</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><p id="6411" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated"><em class="lx">åŸè½½äº2020å¹´5æœˆ7æ—¥</em><a class="ae ne" href="https://dev.to/jeevankishore/build-pagination-with-es6-async-generators-and-iterables-4l4p" rel="noopener ugc nofollow" target="_blank"><em class="lx">https://dev . to</em></a><em class="lx">ã€‚</em></p></div></div>    
</body>
</html>