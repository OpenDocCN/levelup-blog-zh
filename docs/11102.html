<html>
<head>
<title>Master The Art of Writing Xpath For Web Scraping</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">掌握为Web抓取编写Xpath的艺术</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/master-the-art-of-writing-xpath-for-web-scraping-c14e2f7ee130?source=collection_archive---------4-----------------------#2022-02-16">https://levelup.gitconnected.com/master-the-art-of-writing-xpath-for-web-scraping-c14e2f7ee130?source=collection_archive---------4-----------------------#2022-02-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3299" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">网络抓取规则的简单介绍</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/656b0f77418ff5e599509e70bb8844b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r5oS6G-n-x4otYneZLxWew.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@neonbrand?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> NeONBRAND </a>在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上用<a class="ae ky" href="http://Canva.com" rel="noopener ugc nofollow" target="_blank"> Canva </a>制作</figcaption></figure><p id="29e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">web抓取的关键部分是描述计算机应该如何在web上寻找元素。Xpath是一种编写模式的方法，这种模式可以与文档结构相匹配，用于抓取数据。它以树形结构的方式指定了文档的各个部分，其中在一个模式中，父节点写在子节点之前。</p><p id="18a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">XPath代表XML路径语言，是一种在XML文档中定位元素的工具。因此，HTML是XML的一种实现，它也可以用来定位HTML文档中的元素。</p><h2 id="6552" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">特征</h2><ul class=""><li id="92cf" class="mo mp it lb b lc mq lf mr li ms lm mt lq mu lu mv mw mx my bi translated">完美的目标元素。</li><li id="9ef5" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">有一个用于提取的内置浏览器工具。</li><li id="4539" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">没有合适的id或类时的最佳选择。</li><li id="708e" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">同时抓取多个页面的能力。</li><li id="5625" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">比CSS选择器更强大</li></ul><h2 id="d686" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">下降趋势</h2><ul class=""><li id="d0fa" class="mo mp it lb b lc mq lf mr li ms lm mt lq mu lu mv mw mx my bi translated">难以理解。</li><li id="1052" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">一点也不适合初学者。</li></ul><p id="e5c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有两个主要的python库大规模使用Xpath进行web抓取——selenium和scrapy。</p><p id="dd7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Selenium 是一个自动化&amp;测试库，也可以用于网页抓取。selenium的最大优势之一是，它可以非常容易地从web上抓取动态生成的数据。</p><p id="8961" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/web-scraping-2-0-6600abca37de"> Scrapy </a>是一个完整的web抓取python框架。它包含了多种大规模网络抓取工具。Xpath是scrapy中的主要选择器。</p><p id="60a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将在学习Xpath表达式时考虑这两者。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="8c13" class="lv lw it nf b gy nj nk l nl nm">&gt; Xpath Browser Essential<br/> - Finding Xpath<br/> - Testing Xpath</span><span id="aa6e" class="lv lw it nf b gy nn nk l nl nm">&gt; Xpath<br/> - Types of Xpath<br/> - Xpath Basic Functions<br/> - Xpath Advance Functions</span><span id="c7d5" class="lv lw it nf b gy nn nk l nl nm">&gt; Python Web Scraping Project Using Xpath</span></pre><h1 id="f18e" class="no lw it bd lx np nq nr ma ns nt nu md jz nv ka mg kc nw kd mj kf nx kg mm ny bi translated">查找Xpath</h1><p id="e48d" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nz lk ll lm oa lo lp lq ob ls lt lu im bi translated">大多数现代浏览器(如chrome、firefox)都提供了一个非常有用的特性，通过这个特性，只需点击几下鼠标就可以复制元素的Xpath。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/64886f1c8e6f16fa670d1ddbb125ef7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/1*77C2JHXgd98g_oQxN3cuRw.gif"/></div></figure><p id="41ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要获取XPath，右键单击要获取Xpath的元素，然后单击inspect。一旦源代码出现，点击复制&gt;复制Xpath。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/c03ab7dcf5ac9521043b3787e1ab36b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:368/format:webp/1*JlR6rTXTymTpnF4zods6BA.png"/></div></figure><p id="0517" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将看到两个Xpath选项，它们代表了两种类型的Xpath。</p><h2 id="ab83" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">Xpath的类型</h2><p id="4214" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nz lk ll lm oa lo lp lq ob ls lt lu im bi translated"><strong class="lb iu"> 1。绝对XPath (Full Xpath): </strong>它使用从根到我们的元素的完整路径。例如，它以一个<code class="fe oe of og nf b">/<br/></code>开始—</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="0f1b" class="lv lw it nf b gy nj nk l nl nm">/html/body/div/div[2]/div[1]/div[1]/span[2]/small</span></pre><p id="3035" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 2。</strong> <strong class="lb iu">相对Xpath: </strong>是对你要提取的元素的直接引用。例如，它以<code class="fe oe of og nf b">//<br/></code>开始—</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="7ec5" class="lv lw it nf b gy nj nk l nl nm">//*[@class='author']</span></pre><p id="b731" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相对Xpath总是选择在绝对Xpath之上，因为它们不是根元素的完整路径。此外，如果在不久的将来添加或删除一个新元素，那么绝对Xpath将变得无效并停止工作。所以相对Xpath更好。</p><p id="060b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Xpath遵循创建每个表达式所使用的语法。</p><h1 id="0117" class="no lw it bd lx np nq nr ma ns nt nu md jz nv ka mg kc nw kd mj kf nx kg mm ny bi translated">Xpath语法</h1><p id="51dc" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nz lk ll lm oa lo lp lq ob ls lt lu im bi translated">在查看语法之前，您应该理解HTML的节点结构和Xpath使用的术语</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/fc782217d503ba2298c1bef975674797.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9uzjxOKqvBI3ri5DvNAlwg.png"/></div></div></figure><ul class=""><li id="b797" class="mo mp it lb b lc ld lf lg li oi lm oj lq ok lu mv mw mx my bi translated">HTML主要分为四个不同的节点——根节点、元素节点、属性节点和包含值的文本节点。</li><li id="d3ca" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><strong class="lb iu">根节点</strong>是节点树中的顶层节点。除了根节点，每个节点都有一个父节点。一个根节点可以有n个子节点。</li><li id="c4b7" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">文档中除了根之外的每个元素都被认为是一个<strong class="lb iu">元素节点</strong>。每个元素节点都有一个父节点。</li><li id="22c4" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><strong class="lb iu">属性节点</strong>包含元素节点使用的所有属性的信息。</li><li id="fe2d" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><strong class="lb iu">文本节点</strong>包含元素节点的文本值。这些值对用户是可见的。</li><li id="90c2" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><strong class="lb iu">祖先节点</strong>是当前节点的父节点或父节点的父节点。</li><li id="11f1" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><strong class="lb iu">子孙节点</strong>是当前节点的子节点或子节点的chile节点。</li><li id="fc99" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><strong class="lb iu">兄弟节点</strong>是共享同一个父节点的节点。</li></ul><p id="52af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Xpath表达式的基本语法是—</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/be2d1fa6ebcc0ff5de9c66d1e46b321d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zyttym-dNoK9pICsD_WnuA.png"/></div></figure><p id="754e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有不同类型的函数和操作符组合在一起，帮助编写在web上选择元素的表达式。让我们一个一个来看看其中的一些。</p><p id="6893" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oe of og nf b">//</code>:选择任何匹配的后代节点</p><p id="f76f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oe of og nf b">/</code>:从根开始选择，用于写绝对路径。</p><p id="51d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oe of og nf b">nodename</code>:选择一个特定的节点ex: &lt; div &gt;选择所有的div。</p><p id="e6ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oe of og nf b">.</code>:从当前节点选择元素</p><p id="c1b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oe of og nf b">..</code>:从当前父节点中选择元素。</p><p id="c617" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oe of og nf b">@</code>:从元素中选择属性。</p><p id="b1cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oe of og nf b">*</code>:匹配任意节点的表达式。</p><p id="0136" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oe of og nf b">@*</code>:匹配任何属性节点</p><p id="6563" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">高级表达式</strong></p><ul class=""><li id="dcc2" class="mo mp it lb b lc ld lf lg li oi lm oj lq ok lu mv mw mx my bi translated"><code class="fe oe of og nf b">contains(A,B)</code>:在元素<code class="fe oe of og nf b">B</code>内搜索字符串<code class="fe oe of og nf b">A</code>。假设你想选择一个带有固定属性的标签，比如类型、名称等等，那么就可以使用它。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/53784bbd016c12eff8c157a0538049dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yd0LR-44ovaVPXETxoZIBQ.png"/></div></div></figure><ul class=""><li id="70f3" class="mo mp it lb b lc ld lf lg li oi lm oj lq ok lu mv mw mx my bi translated"><code class="fe oe of og nf b">not</code>:否定查询的某个部分。它可用于您想要从一组否定属性或标签的标签中选择一个标签的情况。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/6ed342087f90094c5830e88743a305e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*gdNfpHmSf72XEQlfg1JdGA.png"/></div></figure><ul class=""><li id="a012" class="mo mp it lb b lc ld lf lg li oi lm oj lq ok lu mv mw mx my bi translated"><code class="fe oe of og nf b">starts-with</code>:搜索以字符串<code class="fe oe of og nf b">A</code>开头的元素</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/49fb70307ef7adce462f515ec3c8f9f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*atBzaGfeKvU7fhBmM9A1nQ.png"/></div></div></figure><ul class=""><li id="6c5b" class="mo mp it lb b lc ld lf lg li oi lm oj lq ok lu mv mw mx my bi translated"><code class="fe oe of og nf b">ends-with</code>:搜索以字符串<code class="fe oe of og nf b">B</code>结尾的元素</li><li id="139a" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><code class="fe oe of og nf b">OR</code>:选择满足条件1或条件2的元素。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/1c5188a5be44543014d4103b58a15e8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*qRiUhZGBp8m2dwnJU0gY7A.png"/></div></figure><ul class=""><li id="ccab" class="mo mp it lb b lc ld lf lg li oi lm oj lq ok lu mv mw mx my bi translated"><code class="fe oe of og nf b">and</code>:选择同时满足两个条件的元素。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/7525a130f8609a57111eb35a29b8bf3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bg5DBj1oaSAQxTAF9nrjEg.png"/></div></div></figure><ul class=""><li id="abe4" class="mo mp it lb b lc ld lf lg li oi lm oj lq ok lu mv mw mx my bi translated"><code class="fe oe of og nf b">text()</code>:基于web元素的文本定位元素。它是selenium web驱动程序的内置函数。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/0afe8bda7dfaac68ce91ba5626440263.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*pXDLquMp1splQptiYEzzDQ.png"/></div></figure><ul class=""><li id="dd90" class="mo mp it lb b lc ld lf lg li oi lm oj lq ok lu mv mw mx my bi translated"><code class="fe oe of og nf b">following</code>:选择当前节点中某个标签后的所有元素。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/2087e8e30fd8722b6f547d5f18f8ac14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BA3RjuKsqmVBgbQODNXG3A.png"/></div></div></figure><p id="39a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的Xpath匹配当前节点(用户名)的以下两个输入标签(密码、提交)。</p><ul class=""><li id="0a13" class="mo mp it lb b lc ld lf lg li oi lm oj lq ok lu mv mw mx my bi translated"><code class="fe oe of og nf b">Child</code>:选择当前节点的所有子元素。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/fda99c60d62392c4c8e9c57b31bcd598.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/format:webp/1*S5r6U2kbCF5SUu_i95mQrQ.png"/></div></figure><ul class=""><li id="3a64" class="mo mp it lb b lc ld lf lg li oi lm oj lq ok lu mv mw mx my bi translated"><code class="fe oe of og nf b">preceding</code>:选择当前节点之前的所有节点。</li></ul><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="7d2e" class="lv lw it nf b gy nj nk l nl nm">//*[@name='submit']//preceding::input</span></pre><p id="96dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的Xpath将选择输入标记之前的所有输入标记，该输入标记的属性名称的值为submit。</p><ul class=""><li id="678d" class="mo mp it lb b lc ld lf lg li oi lm oj lq ok lu mv mw mx my bi translated"><code class="fe oe of og nf b">following-siblings</code>:选择当前选中节点的所有同级节点。你可以用它来选择卡片、按钮等。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/f75f3a9fa12c6ce3f583f987abb433cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*puMnWp1bJjCpff7XHYfBgA.png"/></div></figure><ul class=""><li id="ae50" class="mo mp it lb b lc ld lf lg li oi lm oj lq ok lu mv mw mx my bi translated"><code class="fe oe of og nf b">parent</code>:选择当前节点的所有父节点。您可以通过在方括号中指定索引来选择特定的父代。</li></ul><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="1575" class="lv lw it nf b gy nj nk l nl nm">//*[@id='data']//parent::div</span></pre><p id="bf89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的Xpath将选择一个元素的所有具有数据id的父div。</p><ul class=""><li id="b0d1" class="mo mp it lb b lc ld lf lg li oi lm oj lq ok lu mv mw mx my bi translated"><code class="fe oe of og nf b">descendant</code>:它类似于一个子选择器，但是不同之处在于它选择所有的HTML元素，或者是子元素、孙元素、曾孙元素等等。而子选择器只选择当前所选节点的直接子元素。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/644fc22c9661645e04e4bb22b3e269a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/1*gYM--ChAdrypLcNoEKcMuQ.png"/></div></figure><ul class=""><li id="ca6c" class="mo mp it lb b lc ld lf lg li oi lm oj lq ok lu mv mw mx my bi translated"><code class="fe oe of og nf b">Ancestor</code>:选择当前节点的所有祖先父节点、祖父节点、曾祖父节点等。</li></ul><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="d799" class="lv lw it nf b gy nj nk l nl nm">//*[@id='info']//ancestor::div</span></pre><p id="8f9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有这些函数只是Xpath函数的一部分。有很多可以从Xpath 中的MDN Web Docs <a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/XPath/Functions" rel="noopener ugc nofollow" target="_blank">函数中找到。</a></p><h1 id="2b98" class="no lw it bd lx np nq nr ma ns nt nu md jz nv ka mg kc nw kd mj kf nx kg mm ny bi translated">测试Xpath</h1><p id="3f84" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nz lk ll lm oa lo lp lq ob ls lt lu im bi translated">有时候Xpath会变得非常复杂，很难编写，所以最好在浏览器中测试所有的Xpath，然后在抓取脚本中使用它们。</p><p id="9e79" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们今天使用的大多数浏览器都提供了测试Xpath表达式的方法。为此，请打开一个网页，右键单击并选择inspect。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/fc8640f4eccc590e0f91f38304855747.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/1*Xr1ybXfB6g9Mp90VFQWBNg.gif"/></div></figure><p id="c708" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">源代码打开后，按<code class="fe oe of og nf b">ctrl+f</code>打开表达式测试字段。写下你想要的任何表达式，然后简单地按下回车键。</p></div><div class="ab cl ox oy hx oz" role="separator"><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc"/></div><div class="im in io ip iq"><h1 id="b81a" class="no lw it bd lx np pe nr ma ns pf nu md jz pg ka mg kc ph kd mj kf pi kg mm ny bi translated">使用Python的Xpath</h1><p id="6818" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nz lk ll lm oa lo lp lq ob ls lt lu im bi translated">让我们用我们学习的python结合scrapy从这个免费的刮书网站<a class="ae ky" href="https://books.toscrape.com/" rel="noopener ugc nofollow" target="_blank">https://books.toscrape.com/</a>刮下所有的书籍记录</p><p id="6a71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你对scrapy一无所知，我建议你去看看我在<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/web-scraping-2-0-6600abca37de">之前的博客</a>中关于使用scrapy进行网络抓取的内容。创建一个项目结构和一个蜘蛛抓取网页。</p><p id="1a6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看web抓取代码的主要部分，即使用Xpath选择元素。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pj"><img src="../Images/b8d032496ae45c488ca1134b6356392a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3F_iV3RqEEslW3CHxnuKwA.png"/></div></div></figure><p id="9181" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">书籍的标题在一个anchor标签中，该标签是heading 3标签的子标签。这个的Xpath将是</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="5388" class="lv lw it nf b gy nj nk l nl nm">//h3/a/<strong class="nf iu">text()</strong></span></pre><p id="b1c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来是价格，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/71cb055dce63f0412b6fa86c6bf32eb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:742/format:webp/1*TyD27zhuSl_f_UXUT0eKLw.png"/></div></figure><p id="a097" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">价格在具有价格颜色类的段落标记中。要访问该元素，我们有多个选项。比如我们可以直接用类名<code class="fe oe of og nf b">//*[@class='price_color']</code>或者用标签和类名<code class="fe oe of og nf b">//p[@class='price_color']</code>或者用父div <code class="fe oe of og nf b">//div[@class='product_price']//child::p[1]</code>等来访问它。你可以使用任何你想要的方法。为了简单起见，我将使用类名来访问它。</p><p id="ef73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一个链接，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/2c310a63c2be3d523383ceeaf981c247.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tgJ9yHlU8kAo0TZbdr7eGg.png"/></div></div></figure><p id="e679" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了提取链接，我们将在表达式的末尾使用<code class="fe oe of og nf b">@href()</code>。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="4595" class="lv lw it nf b gy nj nk l nl nm">Xpath : //h3/a/@href</span></pre><p id="624b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们有了所有的数据，让我们把它们结合起来，用Xpath抓取这个网站的每一页。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pm pn l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">“阅读我以前的博客以更好地理解代码，本书详细介绍了作者编写的代码”</figcaption></figure></div><div class="ab cl ox oy hx oz" role="separator"><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc"/></div><div class="im in io ip iq"><h2 id="eb9b" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">参考</h2><p id="a71b" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nz lk ll lm oa lo lp lq ob ls lt lu im bi translated">【1】<a class="ae ky" href="https://www.guru99.com/xpath-selenium.html" rel="noopener ugc nofollow" target="_blank">https://www.guru99.com/xpath-selenium.html</a><br/>【2】<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/XPath" rel="noopener ugc nofollow" target="_blank">https://developer.mozilla.org/en-US/docs/Web/XPath</a></p><h1 id="803b" class="no lw it bd lx np nq nr ma ns nt nu md jz nv ka mg kc nw kd mj kf nx kg mm ny bi translated">结论</h1><p id="287c" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nz lk ll lm oa lo lp lq ob ls lt lu im bi translated">在这篇博客中，我们学习了<br/> -什么是Xpath，<br/>-Xpath的特性，<br/> -如何在浏览器上找到Xpath，<br/>-Xpath的类型，<br/> -不同的Xpath函数，<br/> -在Web上测试Xpath。</p><p id="64dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我尽力包含了使用Xpath进行web抓取所需的大部分概念和功能。接下来，试着熟悉使用Xpath进行web抓取的库，比如<a class="ae ky" href="https://medium.com/pythoneers/web-scraping-using-selenium-python-6c511258ab50" rel="noopener"> selenium </a>和<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/web-scraping-2-0-6600abca37de"> scrapy </a>。</p><p id="ee80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就像奥斯卡·德·拉·霍亚说的“总有改进的空间”,如果你想在文章中增加什么，我随时欢迎你的建议和回应。</p></div><div class="ab cl ox oy hx oz" role="separator"><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc"/></div><div class="im in io ip iq"><p id="87b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="po">*文中使用的所有图片均为作者所有或以其他方式引用。</em></p><h1 id="f715" class="no lw it bd lx np nq nr ma ns nt nu md jz nv ka mg kc nw kd mj kf nx kg mm ny bi translated">推荐读物</h1><div class="pp pq gp gr pr ps"><a href="https://medium.com/pythoneers/master-web-scraping-completly-from-zero-to-hero-38051423256b" rel="noopener follow" target="_blank"><div class="pt ab fo"><div class="pu ab pv cl cj pw"><h2 class="bd iu gy z fp px fr fs py fu fw is bi translated">网络抓取大师从零到英雄🕸</h2><div class="pz l"><h3 class="bd b gy z fp px fr fs py fu fw dk translated">用美汤和请求库同一个项目</h3></div><div class="qa l"><p class="bd b dl z fp px fr fs py fu fw dk translated">medium.com</p></div></div><div class="qb l"><div class="qc l qd qe qf qb qg ks ps"/></div></div></a></div><div class="pp pq gp gr pr ps"><a rel="noopener  ugc nofollow" target="_blank" href="/web-scraping-2-0-6600abca37de"><div class="pt ab fo"><div class="pu ab pv cl cj pw"><h2 class="bd iu gy z fp px fr fs py fu fw is bi translated">网页抓取2.0</h2><div class="pz l"><h3 class="bd b gy z fp px fr fs py fu fw dk translated">使用Scrapy进行顶层网络刮擦</h3></div><div class="qa l"><p class="bd b dl z fp px fr fs py fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="qb l"><div class="qh l qd qe qf qb qg ks ps"/></div></div></a></div><div class="pp pq gp gr pr ps"><a href="https://medium.com/pythoneers/web-scraping-using-selenium-python-6c511258ab50" rel="noopener follow" target="_blank"><div class="pt ab fo"><div class="pu ab pv cl cj pw"><h2 class="bd iu gy z fp px fr fs py fu fw is bi translated">使用Selenium Python进行Web抓取</h2><div class="pz l"><h3 class="bd b gy z fp px fr fs py fu fw dk translated">一个项目的详细教程</h3></div><div class="qa l"><p class="bd b dl z fp px fr fs py fu fw dk translated">medium.com</p></div></div><div class="qb l"><div class="qi l qd qe qf qb qg ks ps"/></div></div></a></div></div><div class="ab cl ox oy hx oz" role="separator"><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc"/></div><div class="im in io ip iq"><p id="7df5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢你读到这里，如果你喜欢我的内容并想支持我，最好的方式是—</p><ol class=""><li id="953a" class="mo mp it lb b lc ld lf lg li oi lm oj lq ok lu qj mw mx my bi translated">跟我上<a class="ae ky" href="http://abhayparashar31.medium.com/" rel="noopener"> <em class="po">中</em> </a>。</li><li id="2e2f" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu qj mw mx my bi translated">在<a class="ae ky" href="https://www.linkedin.com/in/abhay-parashar-328488185/" rel="noopener ugc nofollow" target="_blank"> <em class="po"> LinkedIn </em> </a>上和我联系。</li><li id="2a2f" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu qj mw mx my bi translated">使用<a class="ae ky" href="https://abhayparashar31.medium.com/membership" rel="noopener"> <em class="po">我的推荐链接</em> </a>成为中等会员。你会费的一小部分会归我。</li><li id="8408" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu qj mw mx my bi translated">订阅<a class="ae ky" href="https://abhayparashar31.medium.com/subscribe" rel="noopener"> <em class="po">我的邮件列表</em> </a>永远不会错过我的一篇文章。</li></ol></div></div>    
</body>
</html>