<html>
<head>
<title>Building OpenJDK from GitHub Sources on 64-bit Raspberry Pi</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在64位Raspberry Pi上从GitHub源代码构建OpenJDK</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/building-openjdk-from-github-sources-on-64-bit-raspberry-pi-6d90b7842654?source=collection_archive---------11-----------------------#2020-10-21">https://levelup.gitconnected.com/building-openjdk-from-github-sources-on-64-bit-raspberry-pi-6d90b7842654?source=collection_archive---------11-----------------------#2020-10-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="7ad8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">作为<a class="ae kl" href="https://openjdk.java.net/projects/skara/" rel="noopener ugc nofollow" target="_blank">项目Skara </a>的结果，OpenJDK源代码现在<a class="ae kl" href="https://github.com/openjdk/jdk" rel="noopener ugc nofollow" target="_blank">完全可用并在GitHub </a>上开发。感谢社区所做的大量工作，完整的Java开发流程已经迁移到GitHub，同时保留了存储库历史。这个过程已经在GitHub博客上<a class="ae kl" href="https://github.blog/2020-09-30-github-welcomes-the-openjdk-project/?s=09" rel="noopener ugc nofollow" target="_blank">描述过了。</a></p><p id="c940" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这也意味着我们现在能够在任何想要使用最新的尚未发布版本的设备上，非常容易地从最新的源代码中构建OpenJDK。</p><blockquote class="km kn ko"><p id="23b5" class="jn jo kp jp b jq jr js jt ju jv jw jx kq jz ka kb kr kd ke kf ks kh ki kj kk ij bi translated">考虑将您的Raspberry Pi切换到USB启动，以获得更高的读取速度和更可靠的光盘写入。有关更多信息，请参见<br/> " <a class="ae kl" rel="noopener ugc nofollow" target="_blank" href="/improve-raspberry-pi-4-disc-read-speed-with-64-bit-raspbian-os-with-usb-mass-storage-boot-4a22ff2d34e1">更快&amp;更可靠的64位操作系统，在Raspberry Pi 4上使用USB启动</a></p></blockquote><p id="9c01" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">构建过程在源代码中有很好的解释。每次运行其中一个步骤时(例如“bash configure ”),如果需要额外的工具以及如何安装它们，您都会收到警告。通过运行给定的命令，缺失的工具将被安装，您可以再次运行该命令。这就是我最终得到这个命令列表的原因。</p><p id="aff4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我使用了正在开发的64位版本的Raspberry Pi操作系统<a class="ae kl" href="https://www.raspberrypi.org/forums/viewtopic.php?f=117&amp;t=275370" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="6a61" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了能够建立，你需要一个最近(发布)的JDK。所以我们从安装带有SDKMAN的Java JDK 15开始:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="2eae" class="lc ld iq ky b gy le lf l lg lh">$ sudo apt install zip <br/>$ curl -s "https://get.sdkman.io" | bash <br/>$ sdk install java 15.0.0.fx-librca</span></pre><p id="d2d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们已经准备好安装所有需要的工具，从GitHub获取源代码，并创建JDK构建配置。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="f426" class="lc ld iq ky b gy le lf l lg lh">$ sudo apt-get install autoconf<br/>$ sudo apt-get install libx11-dev libxext-dev libxrender-dev libxrandr-dev libxtst-dev libxt-dev<br/>$ sudo apt-get install libcups2-dev<br/>$ sudo apt-get install libfontconfig1-dev<br/>$ sudo apt-get install libasound2-dev<br/>$ git clone <a class="ae kl" href="https://github.com/openjdk/jdk.git" rel="noopener ugc nofollow" target="_blank">https://github.com/openjdk/jdk.git</a><br/>$ cd jdk<br/>$ bash configure</span><span id="616b" class="lc ld iq ky b gy li lf l lg lh">====================================================</span><span id="a70e" class="lc ld iq ky b gy li lf l lg lh">A new configuration has been successfully created in<br/>/home/pi/jdk/build/linux-aarch64-server-release<br/>using default settings.</span><span id="7114" class="lc ld iq ky b gy li lf l lg lh">Configuration summary:<br/>* Debug level:    release<br/>* HS debug level: product<br/>* JVM variants:   server<br/>* JVM features:   server: 'aot cds compiler1 compiler2 epsilongc g1gc graal jfr jni-check jvmci jvmti management nmt parallelgc serialgc services shenandoahgc vm-structs zgc'<br/>* OpenJDK target: OS: linux, CPU architecture: aarch64, address length: 64<br/>* Version string: 16-internal+0-adhoc.pi.jdk (16-internal)</span><span id="0ee4" class="lc ld iq ky b gy li lf l lg lh">Tools summary:<br/>* Boot JDK:       openjdk version "15" 2020-09-15 OpenJDK Runtime Environment (build 15+36) OpenJDK 64-Bit Server VM (build 15+36, mixed mode)  (at /home/pi/.sdkman/candidates/java/current)<br/>* Toolchain:      gcc (GNU Compiler Collection)<br/>* C Compiler:     Version 8.3.0 (at /usr/bin/gcc)<br/>* C++ Compiler:   Version 8.3.0 (at /usr/bin/g++)</span><span id="5ef5" class="lc ld iq ky b gy li lf l lg lh">Build performance summary:<br/>* Cores to use:   4<br/>* Memory limit:   7815 MB</span></pre><p id="e533" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在所有需要的工具都可用并配置好之后，我们可以从“制作映像”开始编译过程。这将运行更长的时间，编译JDK的所有组件。Raspberry Pi 4有足够的资源，因为内存使用量在1到3GB之间波动。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="1de0" class="lc ld iq ky b gy le lf l lg lh">$ make images</span></pre><figure class="kt ku kv kw gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lj"><img src="../Images/dba61cd48d1958d2cb415d6cd4abb4af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jPW0UwVVTRd2EkXI.png"/></div></div></figure><p id="d862" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我的例子中(8 GB内存和64位Raspbian操作系统的Raspberry Pi 4 ),这用了不到60分钟。作为参考，在配备英特尔酷睿i7和16GB内存的Ubuntu 20.04 PC上，大约需要15分钟。</p><p id="4700" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们试试我们的新JDK吧！</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="95f3" class="lc ld iq ky b gy le lf l lg lh">$ ./build/*/images/jdk/bin/java -version <br/>openjdk version "16-internal" 2021-03-16 <br/>OpenJDK Runtime Environment (build 16-internal+0-adhoc.pi.jdk)<br/>OpenJDK 64-Bit Server VM (build 16-internal+0-adhoc.pi.jdk, mixed mode, sharing)</span></pre><p id="931d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">没错，就是它:<strong class="jp ir">尚未发布的最新消息，直接来自原始资料，新鲜出炉的“爪哇JDK 16-内部”覆盆子酱</strong>！</p><figure class="kt ku kv kw gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lj"><img src="../Images/400353b158e779e63e8ba0dd77ea4e6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*W4euFQzMoMd5VYzX.png"/></div></div></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="d123" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kp">原载于2020年10月21日</em><a class="ae kl" href="https://foojay.io/blog/building-openjdk-from-github-sources-on-64-bit-raspberry-pi/" rel="noopener ugc nofollow" target="_blank"><em class="kp">https://foojay . io</em></a><em class="kp">。</em></p></div></div>    
</body>
</html>