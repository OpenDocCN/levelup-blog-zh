<html>
<head>
<title>4 ways to SSH on an EC2 instance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">EC2实例上SSH的4种方式</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/4-ways-to-ssh-on-an-ec2-instance-8d0078c76194?source=collection_archive---------13-----------------------#2022-02-27">https://levelup.gitconnected.com/4-ways-to-ssh-on-an-ec2-instance-8d0078c76194?source=collection_archive---------13-----------------------#2022-02-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="5704" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这些方法将适用于大多数基于Linux的服务器，但是对于本教程，我将在AWS的上下文中解释它</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/0e220e71503c0533f6060bf3a1c70aaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tp9VSulsSuy4mggb9AI2dQ.png"/></div></div></figure><p id="3450" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">什么是SSH？</strong></p><blockquote class="la lb lc"><p id="ff78" class="jq jr ld js b jt ju jv jw jx jy jz ka le kc kd ke lf kg kh ki lg kk kl km kn im bi translated"><strong class="js iu">安全外壳协议</strong> ( <strong class="js iu"> SSH </strong>)是一种<a class="ae lh" href="https://en.wikipedia.org/wiki/Cryptography" rel="noopener ugc nofollow" target="_blank">加密</a> <a class="ae lh" href="https://en.wikipedia.org/wiki/Network_protocol" rel="noopener ugc nofollow" target="_blank">网络协议</a>，用于在不安全的网络上安全地操作<a class="ae lh" href="https://en.wikipedia.org/wiki/Network_service" rel="noopener ugc nofollow" target="_blank">网络服务</a>。它最著名的应用是远程<a class="ae lh" href="https://en.wikipedia.org/wiki/Login" rel="noopener ugc nofollow" target="_blank">登录</a>和<a class="ae lh" href="https://en.wikipedia.org/wiki/Command-line_interface" rel="noopener ugc nofollow" target="_blank">命令行</a>执行。</p><p id="06df" class="jq jr ld js b jt ju jv jw jx jy jz ka le kc kd ke lf kg kh ki lg kk kl km kn im bi translated">SSH应用程序基于<a class="ae lh" href="https://en.wikipedia.org/wiki/Client%E2%80%93server_model" rel="noopener ugc nofollow" target="_blank">客户机-服务器</a>架构，将<a class="ae lh" href="https://en.wikipedia.org/wiki/SSH_client" rel="noopener ugc nofollow" target="_blank"> SSH客户机</a>实例与<a class="ae lh" href="https://en.wikipedia.org/wiki/SSH_server" rel="noopener ugc nofollow" target="_blank"> SSH服务器</a>连接起来。SSH作为一个分层的协议套件运行，包括三个主要的层次组件:<em class="it">传输层</em>提供服务器认证、机密性和完整性；<em class="it">用户认证协议</em>向服务器验证用户；并且<em class="it">连接协议</em>将加密隧道复用到多个逻辑通信信道中。</p><p id="b422" class="jq jr ld js b jt ju jv jw jx jy jz ka le kc kd ke lf kg kh ki lg kk kl km kn im bi translated">来自<a class="ae lh" href="https://en.wikipedia.org/wiki/Secure_Shell" rel="noopener ugc nofollow" target="_blank">维基</a></p></blockquote><p id="a3ed" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">简单地说，它是一种协议(就像传输超媒体文档的HTTP一样),使用它可以安全地与服务器通信。</p><p id="8daa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在AWS上，当您添加一个新的ec2实例时，它会被添加到一个VPC(虚拟专用云)中，VPC之外的任何人试图访问该机器(有时在VPC之内)都需要一个私钥。它有一个<em class="ld">。pem分机。为了连接，您必须随身携带私钥。如果您没有它，那么请询问您的系统管理员/DevOps或任何负责在AWS上管理这些机器/实例的人。</em></p><p id="9552" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">先决条件</p><ol class=""><li id="cbeb" class="li lj it js b jt ju jx jy kb lk kf ll kj lm kn ln lo lp lq bi translated">对私钥的访问</li><li id="a594" class="li lj it js b jt lr jx ls kb lt kf lu kj lv kn ln lo lp lq bi translated">AWS上机器的公共DNS或IP</li><li id="fca0" class="li lj it js b jt lr jx ls kb lt kf lu kj lv kn ln lo lp lq bi translated">端口22在ec2实例上是开放的。请签入分配给此实例的安全组。</li><li id="1836" class="li lj it js b jt lr jx ls kb lt kf lu kj lv kn ln lo lp lq bi translated">某种FTP客户端(<a class="ae lh" href="https://filezilla-project.org/" rel="noopener ugc nofollow" target="_blank"> FileZilla </a>、<a class="ae lh" href="https://cyberduck.io/" rel="noopener ugc nofollow" target="_blank"> CyberDuck </a>等等。)对于选项2 &amp; 3</li></ol></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="2751" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一旦您有了私钥，请确保您的密钥不会被公开。您可以通过在终端中运行该命令来确保</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="md me l"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">对密钥文件设置正确的权限</figcaption></figure><p id="1709" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通常有两种方式将ec2实例暴露给一般的公共网络。</p><blockquote class="la lb lc"><p id="d81e" class="jq jr ld js b jt ju jv jw jx jy jz ka le kc kd ke lf kg kh ki lg kk kl km kn im bi translated">第一种是通过ssh协议上的私钥直接访问</p></blockquote><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mj"><img src="../Images/036bc244f829679de6e1cd7211f701da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sNFlAIh4eb6_aSrzn060-g.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">使用私钥直接访问</figcaption></figure><p id="8d12" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用这种设置连接到ec2实例非常简单。</p><blockquote class="la lb lc"><p id="3cd6" class="jq jr ld js b jt ju jv jw jx jy jz ka le kc kd ke lf kg kh ki lg kk kl km kn im bi translated"><strong class="js iu">选项1，使用端子</strong></p></blockquote><p id="f511" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">只需在您的终端中运行这个命令(用您自己的值替换它)</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="c0a6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一旦连接上，您的终端将可以访问ec2实例。</p><blockquote class="la lb lc"><p id="323a" class="jq jr ld js b jt ju jv jw jx jy jz ka le kc kd ke lf kg kh ki lg kk kl km kn im bi translated"><strong class="js iu">选项2，使用sftp客户端</strong></p></blockquote><p id="5e57" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我将使用<a class="ae lh" href="https://filezilla-project.org/" rel="noopener ugc nofollow" target="_blank"> FileZilla </a>作为例子，但是它也适用于任何其他客户端</p><ul class=""><li id="4c63" class="li lj it js b jt ju jx jy kb lk kf ll kj lm kn mk lo lp lq bi translated"><strong class="js iu">打开FileZilla客户端，添加一个新站点，如下所示</strong></li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ml"><img src="../Images/8bffd1c886bc53d7980675aa40e5b6f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*89NtsUBNz2GTHVCLrnvzTA.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">FileZilla</figcaption></figure><ul class=""><li id="e39b" class="li lj it js b jt ju jx jy kb lk kf ll kj lm kn mk lo lp lq bi translated"><strong class="js iu">像这样将协议更改为ssh</strong></li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mm"><img src="../Images/d28ae15c6fa9c1f9ff5e1b3b6e8087ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rk-am9WUeimEmgwVByNXdg.png"/></div></div></figure><ul class=""><li id="cb5c" class="li lj it js b jt ju jx jy kb lk kf ll kj lm kn mk lo lp lq bi translated"><strong class="js iu">在主机字段添加ec2实例的公共DNS或IP地址</strong></li><li id="c3ec" class="li lj it js b jt lr jx ls kb lt kf lu kj lv kn mk lo lp lq bi translated"><strong class="js iu">像这样选择密钥文件作为登录类型</strong></li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mn"><img src="../Images/734ebf494875a0b8bcb01f0be9001d6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wp2Z676xR_lfCfmwUoYurA.png"/></div></div></figure><p id="e4f4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">就这样，现在只需点击connect按钮，您就可以访问ec2实例了。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><blockquote class="la lb lc"><p id="7eaf" class="jq jr ld js b jt ju jv jw jx jy jz ka le kc kd ke lf kg kh ki lg kk kl km kn im bi translated">第二种是通过<a class="ae lh" href="https://en.wikipedia.org/wiki/Jump_server" rel="noopener ugc nofollow" target="_blank">跳转</a>服务器(也称为堡垒箱、跳转箱、跳转主机等。)其中ec2实例被设置在VPC的私有子网内，对外界的访问非常有限，并且只能通过VPC的公共子网中的另一个服务器来访问。</p></blockquote><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mo"><img src="../Images/071749e31cb68bfe192f68d357aec728.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ubcW8TZ9U6vBAB0yvGdqZw.png"/></div></div></figure><blockquote class="la lb lc"><p id="73f2" class="jq jr ld js b jt ju jv jw jx jy jz ka le kc kd ke lf kg kh ki lg kk kl km kn im bi translated"><strong class="js iu">选项1，使用终端</strong></p></blockquote><ul class=""><li id="f903" class="li lj it js b jt ju jx jy kb lk kf ll kj lm kn mk lo lp lq bi translated">将跳转框的用户密钥添加到SSH代理中</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="md me l"/></div></figure><ul class=""><li id="6333" class="li lj it js b jt ju jx jy kb lk kf ll kj lm kn mk lo lp lq bi translated">将受保护服务器的密钥添加到您的SSH代理中</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="md me l"/></div></figure><ul class=""><li id="cfe8" class="li lj it js b jt ju jx jy kb lk kf ll kj lm kn mk lo lp lq bi translated">开始跳跃😆</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="md me l"/></div></figure><blockquote class="la lb lc"><p id="63bd" class="jq jr ld js b jt ju jv jw jx jy jz ka le kc kd ke lf kg kh ki lg kk kl km kn im bi translated"><strong class="js iu">选项2，使用sftp客户端</strong></p></blockquote><ul class=""><li id="7bba" class="li lj it js b jt ju jx jy kb lk kf ll kj lm kn mk lo lp lq bi translated">像这样使用ssh连接到服务器</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="md me l"/></div></figure><ul class=""><li id="de30" class="li lj it js b jt ju jx jy kb lk kf ll kj lm kn mk lo lp lq bi translated">现在，去FileZilla打开设置，然后像这样去“通用代理”</li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mp"><img src="../Images/ee0ef76d0e0772d7a97e515b207d14f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CKJzFKWytSAtIyLZDywuAw.png"/></div></div></figure><ul class=""><li id="6941" class="li lj it js b jt ju jx jy kb lk kf ll kj lm kn mk lo lp lq bi translated">然后选择SOCKS 5作为通用代理，并在代理端口字段中输入值8001</li><li id="2fcf" class="li lj it js b jt lr jx ls kb lt kf lu kj lv kn mk lo lp lq bi translated">然后像我们之前做的那样添加一个新站点，并执行以下操作<br/> -选择SFTP作为协议<br/> -添加受保护服务器的私有IP/DNS<br/>-选择“密钥文件”作为登录类型<br/> -添加受保护ec2实例的私有密钥</li><li id="6765" class="li lj it js b jt lr jx ls kb lt kf lu kj lv kn mk lo lp lq bi translated">单击connect，现在您就连接到了位于跳转服务器后面的ec2实例。</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="65ff" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请成为会员，支持我和其他在媒体上写作的人——<a class="ae lh" href="https://medium.com/@metacollective/membership" rel="noopener">https://medium.com/@metacollective/membership</a></p></div></div>    
</body>
</html>