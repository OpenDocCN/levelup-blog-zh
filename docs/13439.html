<html>
<head>
<title>Deploying a Two-Tier Structure with Terraform Cloud CI/CD</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Terraform Cloud CI/CD部署双层结构</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/deploying-a-two-tier-structure-with-terraform-cloud-ci-cd-b2dca3accfb?source=collection_archive---------8-----------------------#2022-09-04">https://levelup.gitconnected.com/deploying-a-two-tier-structure-with-terraform-cloud-ci-cd-b2dca3accfb?source=collection_archive---------8-----------------------#2022-09-04</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><figure class="gm go js jt ju jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj jr"><img src="../Images/13d13e3a6d7a00608623e71a0b25c7a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*udwdaCymrGh0g0AsA5WBMg.png"/></div></div></figure><p id="551a" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">该项目将展示一些有趣的Terraform概念和工具，如模块、通过Terraform Cloud的自动化CI/CD以及连接到GitHub！</p><h1 id="d109" class="la lb iu bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">让我们升级吧！</h1><h2 id="65dd" class="ly lb iu bd lc lz ma dn lg mb mc dp lk kn md me lo kr mf mg ls kv mh mi lw mj bi translated">目标。</h2><p id="d58b" class="pw-post-body-paragraph kc kd iu ke b kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv mo kx ky kz in bi translated">创建包含以下内容的高度可用的双层AWS体系结构:</p><ul class=""><li id="b293" class="mp mq iu ke b kf kg kj kk kn mr kr ms kv mt kz mu mv mw mx bi translated">3个公共子网</li><li id="ab0f" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated">3个私有子网</li><li id="ce81" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated">堡垒主机的自动扩展组</li><li id="4f4f" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated">Web服务器的自动扩展组(在专用子网中)</li><li id="d105" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated">面向Internet的应用程序负载平衡器，目标是Web服务器自动扩展组</li></ul><p id="b400" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">使用Terraform Cloud作为CI/CD工具部署所有这些，所有主要代码都应该在模块块中。</p><h2 id="1240" class="ly lb iu bd lc lz ma dn lg mb mc dp lk kn md me lo kr mf mg ls kv mh mi lw mj bi translated">先决条件。</h2><ul class=""><li id="1f52" class="mp mq iu ke b kf mk kj ml kn nd kr ne kv nf kz mu mv mw mx bi translated">您的首选IDE(我使用Cloud9)</li><li id="0b67" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated">GitHub帐户</li><li id="695d" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated">AWS帐户</li><li id="b7af" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated">Terraform云帐户</li><li id="99eb" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated">已安装地形</li><li id="641f" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated">亚马逊EC2密钥对</li></ul></div><div class="ab cl ng nh hy ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="in io ip iq ir"><h1 id="5b6d" class="la lb iu bd lc ld nn lf lg lh no lj lk ll np ln lo lp nq lr ls lt nr lv lw lx bi translated">让我们建立CI/CD渠道吧！</h1><h2 id="2742" class="ly lb iu bd lc lz ma dn lg mb mc dp lk kn md me lo kr mf mg ls kv mh mi lw mj bi translated">GitHub回购</h2><p id="193e" class="pw-post-body-paragraph kc kd iu ke b kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv mo kx ky kz in bi translated">我做的第一件事，是为这个项目创建一个新的GitHub库。</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj ns"><img src="../Images/ed908b56aefad7d06e99403d54e050b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GjVX_4OK62a2trqNFx_3Lg.png"/></div></div><figcaption class="nx ny gk gi gj nz oa bd b be z dk translated">自述文件和。gitignore文件在这里创建，为我们节省了一步。</figcaption></figure><p id="76db" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">这真的很简单，但这将是我们开发项目时的一个重要难题！</p><h2 id="d198" class="ly lb iu bd lc lz ma dn lg mb mc dp lk kn md me lo kr mf mg ls kv mh mi lw mj bi translated">或者:自己去叉…</h2><p id="76ff" class="pw-post-body-paragraph kc kd iu ke b kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv mo kx ky kz in bi translated">如果你不是从零开始建立这个，请随意为你自己叉一份我的回购<a class="ae ob" href="https://github.com/vypr907/LUIT_Terraform_Project_wk23.git" rel="noopener ugc nofollow" target="_blank">这里</a>！如果您需要复习GitHub，请查看我以前的一篇文章！</p><div class="oc od gq gs oe of"><a href="https://blog.devgenius.io/contributing-to-a-github-repository-748ad7874101" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fp"><div class="oh ab oi cl cj oj"><h2 class="bd iv gz z fq ok fs ft ol fv fx it bi translated">为GitHub库做贡献</h2><div class="om l"><h3 class="bd b gz z fq ok fs ft ol fv fx dk translated">也叫叉吧！克隆它！推它！拉它！</h3></div><div class="on l"><p class="bd b dl z fq ok fs ft ol fv fx dk translated">blog.devgenius.io</p></div></div><div class="oo l"><div class="op l oq or os oo ot ka of"/></div></div></a></div><p id="6767" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">继续，我们进入:</p><h2 id="c8f7" class="ly lb iu bd lc lz ma dn lg mb mc dp lk kn md me lo kr mf mg ls kv mh mi lw mj bi translated">Terraform云工作空间</h2><p id="35bc" class="pw-post-body-paragraph kc kd iu ke b kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv mo kx ky kz in bi translated">对于这篇文章，假设你不仅有一个TfC账户，而且你已经建立了一个组织。在Hashicorp的大量教程和演练中可以找到一个很好的演练:<a class="ae ob" href="https://learn.hashicorp.com/tutorials/terraform/cloud-sign-up" rel="noopener ugc nofollow" target="_blank">地形云介绍</a>。</p><p id="1c55" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">话虽如此，让我们创建一个工作区！</p><p id="482a" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">默认情况下，创建您的帐户(和组织)后，您的主页是工作区页面:</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj ou"><img src="../Images/003b205be2f7c5629aa74c03c2c507aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vkkRGBsH_oOMs_7c54V5pw.png"/></div></div><figcaption class="nx ny gk gi gj nz oa bd b be z dk translated">点击按钮！</figcaption></figure><p id="d8f6" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">接下来，我们将选择“版本控制工作流”,因为我们将把GitHub repo连接到此工作区。</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj ov"><img src="../Images/0fef5a83de9ca91ad7101b8383790a99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CS-42EWoh7eysQeXsvqR5A.png"/></div></div></figure><p id="f8f8" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">…如此处所示。</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj ow"><img src="../Images/9670e55d6e2bd801e082d22204587f12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qLV-vJuTuMsPDOedQrLrrA.png"/></div></div></figure><p id="9406" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">我忘记截图了，但在点击“GitHub”后的下拉菜单中，你会想要选择“Github.com (custom)”选项。</p><p id="71d3" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">之后，系统会提示您输入GitHub凭据，并授权GitHub和Terraform之间的连接。</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div class="gi gj ox"><img src="../Images/2e3ad837c8507765e70f1b419ff28a0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/1*wxUklTbwEDX_aZM9rT3erg.png"/></div></figure><p id="c6f2" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">下一个提示将是另一个授权类型窗口，但这里我们将选择我们的回购。只保留这个项目，我选择只选择我的项目repo，而不是GitHub中的所有存储库。</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div class="gi gj oy"><img src="../Images/f024333bed69614ccf8f89acde575bcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/format:webp/1*sk8H_FSFFYWQ01OM0sJQUg.png"/></div></figure><p id="1bc3" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">GitHub这边可能还有一个授权窗口，但除此之外，我们应该继续前进。</p><p id="d290" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">接下来，它将要求您为工作区选择repo，但是因为我们只“安装”了一个，所以它应该只显示我们选择的repo。</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj oz"><img src="../Images/f50d1101ce560197eef111e26bdc7de7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F94HK9zk076DFww53BoT9Q.png"/></div></div><figcaption class="nx ny gk gi gj nz oa bd b be z dk translated">如果我们之前选择了“所有存储库”，这将是我们选择项目回购的地方。</figcaption></figure><p id="c912" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">接下来，我们命名工作区，并创建！<br/> <em class="pa">不用担心这个项目的高级选项。</em></p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj pb"><img src="../Images/cb6bbe27df89bedcc98ee04bcdc409db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NcU_ZuU3gdTZcOYz0oMcdw.png"/></div></div></figure><p id="764d" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">因为我是用(除了。gitignore/README文件)一个空白的repo，Terraform Cloud不会找到任何变量来配置。因此，我们需要首先转到概述，然后我们可以单击建议的操作按钮，或者选择我们的变量选项卡。</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj pc"><img src="../Images/d3dd83954e2fd49c05d828ed5f11be3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wFyRBbaU5DxfzkvRFO3r2A.png"/></div></div></figure><p id="ed81" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">现在来看看环境变量的配置，这在使用AWS资源时非常重要。</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj pd"><img src="../Images/876d1d00db7a78cb4f1683a16c16688a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*2O9PinL-KoD2oCclRSC5Eg.png"/></div></div></figure><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj pe"><img src="../Images/2d68ce9d6d441a53d2810eead298a42d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ms5YC9dt0ap8AGrQRFWrgg.png"/></div></div><figcaption class="nx ny gk gi gj nz oa bd b be z dk translated">这一页没有火箭科学。单击按钮。</figcaption></figure><p id="082b" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">这里，我们需要创建以下变量:</p><ul class=""><li id="0da8" class="mp mq iu ke b kf kg kj kk kn mr kr ms kv mt kz mu mv mw mx bi translated">AWS_ACCESS_KEY_ID</li><li id="acb9" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated">AWS_SECRET_ACCESS_KEY</li><li id="855a" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated">访问_ip</li><li id="061d" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated">AWS_REGION</li></ul><p id="4e59" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">对于访问变量，我们希望使它们成为环境变量，并将它们标记为“敏感的”</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj pf"><img src="../Images/7403c86193e8f45555fb7f00b338ce04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zIuE4pONHdhiigDSbK3YfQ.png"/></div></div></figure><p id="7f4e" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">“access_ip”变量应该是“Terraform”变量，而不是“Environment”。</p><p id="b954" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">现在你知道了！Terraform Cloud已经设置好了，可以开始摇滚了！</p><figure class="nt nu nv nw gu jv"><div class="bz fq l di"><div class="pg ph l"/></div></figure><h2 id="4b7d" class="ly lb iu bd lc lz ma dn lg mb mc dp lk kn md me lo kr mf mg ls kv mh mi lw mj bi translated">IDE</h2><p id="d02d" class="pw-post-body-paragraph kc kd iu ke b kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv mo kx ky kz in bi translated">我们的最后一步很简单，那就是将我们的GitHub repo克隆到我们的IDE中。无论您选择创建自己的新回购，还是放弃现有项目，我们只需投入一点点<code class="fe pi pj pk pl b">git clone &lt;github url&gt;</code>，就可以开始比赛了！</p><p id="9d40" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">如果您正在构建自己的模块，我们需要创建一些文件和文件夹来正确地设置我们的根模块和子模块。下面是我的目录结构的快照，每个模块都有自己的<code class="fe pi pj pk pl b">main</code>、<code class="fe pi pj pk pl b">variables</code>和<code class="fe pi pj pk pl b">outputs</code>。“tf”文件。实际上，您可以随意命名这些文件，但是这些是便于阅读的最佳实践。</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div class="gi gj pm"><img src="../Images/1fbb8a1f63cb75208df6fef2e2f3a950.png" data-original-src="https://miro.medium.com/v2/resize:fit:426/format:webp/1*FiwFdgkkazNWfKNjSLnDEA.png"/></div></figure></div><div class="ab cl ng nh hy ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="in io ip iq ir"><h1 id="1815" class="la lb iu bd lc ld nn lf lg lh no lj lk ll np ln lo lp nq lr ls lt nr lv lw lx bi translated">让我们点燃这个火箭！</h1><p id="2668" class="pw-post-body-paragraph kc kd iu ke b kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv mo kx ky kz in bi translated">虽然我最初的计划是遍历模块和所有配置文件的实际开发，但我将把它作为设置CI/CD过程的遍历。上面是我的GitHub repo的链接，我鼓励你去看看，但是我们创建的CI/CD管道的美妙之处在于，你可以在任何Terraform/AWS项目中使用这个管道！</p><p id="49b5" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">说到这个，我们如何“点燃火箭”？</p><p id="93c2" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">在我们的IDE中，我们只是将我们的更改推送到我们的repo中。这将在我们的TfC工作区中触发一次运行。</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj pn"><img src="../Images/7dd8a028458c3ab9d5a6aeab7666cd57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BmrUwVfJ6pwr8G1Wf3nxnQ.png"/></div></div></figure><p id="4e5c" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">这个管道的美妙之处在于，当我在排除故障/开发功能/组件时，我可以进行小的、增量的更改，只需“推”到我的GitHub，我就可以立即看到结果。上面的截图可能是第20次运行，因为我处理了一些错误的配置和“凌晨3点编码”的错误。😂GitHub repo也将有提交的精彩历史，允许我跟踪我去过哪里，做了什么。</p><p id="860c" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">不过，让我们继续吧！“计划”成功完成后，我们将看到以下内容:</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj po"><img src="../Images/2cdf485949320fe16c4cbeb2859585cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Dy68F_tHHD0ZqOSQ4sppA.png"/></div></div></figure><p id="5e33" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">这是我们期待已久的时刻！我们睡眠不足，半疯了，但我们成功了！我们按下按钮，然后…</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj pp"><img src="../Images/e7adb8eb6b4e7c6c8d8a1fa68fcd70e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MNbmY2ZELXDzKJWcNOU6pQ.png"/></div></div></figure><p id="7ec1" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">耶，更多故障排除！！请不要认为这些项目第一次就成功了，:D，我没那么好！但只是为了搞笑，上面的错误用下面的方法解决了:</p><ul class=""><li id="fb67" class="mp mq iu ke b kf kg kj kk kn mr kr ms kv mt kz mu mv mw mx bi translated">将下划线改为破折号/连字符(我永远记不住哪些部分不喜欢下划线)</li><li id="8973" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated">阅读<a class="ae ob" href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/eip" rel="noopener ugc nofollow" target="_blank">文档</a>。在我的资源声明中发现了缺失的部分。</li><li id="d695" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated">我的自动cidr代码行不工作，所以我最后只能手动为不同的子网编写CIDR。不优雅，但在凌晨3点，它的工作。</li></ul><h1 id="5554" class="la lb iu bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">让我们离开这里！</h1><h2 id="69b2" class="ly lb iu bd lc lz ma dn lg mb mc dp lk kn md me lo kr mf mg ls kv mh mi lw mj bi translated">验证</h2><p id="b94e" class="pw-post-body-paragraph kc kd iu ke b kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv mo kx ky kz in bi translated">这个项目有点疯狂，但是我们可以通过验证AWS控制台中的资源以及我们输入的这个漂亮的输出来判断我们的项目是否成功:</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj pq"><img src="../Images/8291707cb64d95d9fe83991849a64ac4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C5WGkJOWNlA5ztnzMuQDiw.png"/></div></div></figure><p id="c8ab" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">把这个坏男孩放入浏览器窗口，我们将看到我们可信的测试页面，让我们知道一切都已正确配置！！</p><h2 id="65e6" class="ly lb iu bd lc lz ma dn lg mb mc dp lk kn md me lo kr mf mg ls kv mh mi lw mj bi translated">清理工作</h2><p id="91af" class="pw-post-body-paragraph kc kd iu ke b kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv mo kx ky kz in bi translated">现在，与所有优秀的云项目一样，资源管理和清理对于月底降低账单至关重要，所以让我们现在就行动起来吧！</p><p id="1e0a" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">以前，对于通过CLI的Terraform项目，我们可以运行一个<code class="fe pi pj pk pl b">terraform destroy</code>,然后就大功告成了。然而，由于我们使用的是Terraform Cloud，因此过程会有所不同。</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj pr"><img src="../Images/f944df50a3ab419b9bb62d193eaea40b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fIZXHG8bxoTVMAOxO2aR1A.png"/></div></div><figcaption class="nx ny gk gi gj nz oa bd b be z dk translated">如果你注意到菜单后面的运行，你可以看到我已经这样做了。:)</figcaption></figure><p id="e187" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">选择销毁和删除后，您会看到这个屏幕。请务必注意这两个选项之间的差异:</p><ul class=""><li id="895f" class="mp mq iu ke b kf kg kj kk kn mr kr ms kv mt kz mu mv mw mx bi translated"><strong class="ke iv">破坏基础设施</strong> <br/>这相当于CLI中的<code class="fe pi pj pk pl b">terraform destroy</code>。应该先运行<strong class="ke iv">再运行</strong>来关闭一切。</li><li id="6f32" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated"><strong class="ke iv">删除工作区<br/> </strong>这将删除整个工作区和配置。当你完成了整个项目，并想清理房子时，使用这个。删除所有连接、状态文件等。</li></ul><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj ps"><img src="../Images/2771233411b7dc6369266c36d4c0a678.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ojWswP_8H0mZxC_pwWZ14Q.png"/></div></div></figure><p id="a490" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">最后，您将看到一个确认屏幕。输入工作区名称并选择“队列销毁计划”后，Terraform Cloud将运行一个计划来销毁所有托管基础架构。</p><figure class="nt nu nv nw gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj pt"><img src="../Images/f06ab91b9909e84c02cfffcc0ba42378.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8-CJPbTaeDNBafPXAVrFFQ.png"/></div></div></figure><h2 id="5d61" class="ly lb iu bd lc lz ma dn lg mb mc dp lk kn md me lo kr mf mg ls kv mh mi lw mj bi translated">再见</h2><p id="a143" class="pw-post-body-paragraph kc kd iu ke b kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv mo kx ky kz in bi translated">就是这样，伙计们！感谢阅读，希望你学到了一些东西，或者找到了答案，或者只是喜欢阅读我在科技升级中的恶作剧！</p><p id="5360" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">直到下一次，</p><p id="f6ec" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">vypr完毕！</p></div><div class="ab cl ng nh hy ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="in io ip iq ir"><h1 id="5955" class="la lb iu bd lc ld nn lf lg lh no lj lk ll np ln lo lp nq lr ls lt nr lv lw lx bi translated">分级编码</h1><p id="9c63" class="pw-post-body-paragraph kc kd iu ke b kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv mo kx ky kz in bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="cbff" class="mp mq iu ke b kf kg kj kk kn mr kr ms kv mt kz mu mv mw mx bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="a7be" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated">📰查看<a class="ae ob" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="4511" class="mp mq iu ke b kf my kj mz kn na kr nb kv nc kz mu mv mw mx bi translated">🔔关注我们:<a class="ae ob" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae ob" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae ob" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="40a7" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">🚀👉<a class="ae ob" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="ke iv">加入升级达人集体，找到一份惊艳的工作</strong> </a></p></div></div>    
</body>
</html>