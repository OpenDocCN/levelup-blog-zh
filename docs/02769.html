<html>
<head>
<title>Several Ways to Fill a JavaScript Array with Values</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用值填充JavaScript数组的几种方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/several-ways-to-fill-a-javascript-array-with-values-91f52f09669?source=collection_archive---------12-----------------------#2020-04-03">https://levelup.gitconnected.com/several-ways-to-fill-a-javascript-array-with-values-91f52f09669?source=collection_archive---------12-----------------------#2020-04-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/a244ce5ce8ff4bf7ec616d83b9dfb063.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DVXbQqVyWQhtZ3Rd"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kf" href="https://unsplash.com/@louishansel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Louis Hansel @ shotsoflouis</a>拍摄</figcaption></figure><p id="9522" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">JavaScript数组可以通过多种方式创建。有一些用值填充数组的构造和方法。</p><p id="e86e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将看看如何用我们选择的内容填充一个新数组。</p><h1 id="eba6" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><code class="fe mc md me mf b">Array.prototype.fill()</code></h1><p id="711f" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">我们可以用array实例的<code class="fe mc md me mf b">fill</code>方法用值填充一个现有的数组。</p><p id="d2e8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它有以下签名:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="ae4e" class="mt lf it mf b gy mu mv l mw mx">Array.prototype.fill(value,<!-- --> <!-- -->start=0,<!-- --> <!-- -->end=this.length)</span></pre><p id="252c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mc md me mf b">fill</code>方法有以下参数:</p><ul class=""><li id="6a96" class="my mz it ki b kj kk kn ko kr na kv nb kz nc ld nd ne nf ng bi translated"><code class="fe mc md me mf b">value</code> —用于填充数组的值。</li><li id="9811" class="my mz it ki b kj nh kn ni kr nj kv nk kz nl ld nd ne nf ng bi translated"><code class="fe mc md me mf b">start</code> —可选参数，指示填充数组的起始索引。默认值为0</li><li id="d473" class="my mz it ki b kj nh kn ni kr nj kv nk kz nl ld nd ne nf ng bi translated"><code class="fe mc md me mf b">end</code> —可选参数，带有结束索引以填充值。默认为数组实例的<code class="fe mc md me mf b">length</code>。不包括指数本身</li></ul><p id="2fc0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它返回一个用<code class="fe mc md me mf b">value</code>填充的修改后的数组。</p><p id="8e01" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以如下使用它:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="2e3d" class="mt lf it mf b gy mu mv l mw mx">const arr = [1, 2, 3].fill(6, 1, 3);</span></pre><p id="0117" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么<code class="fe mc md me mf b">arr</code>就是<code class="fe mc md me mf b">[1, 6, 6]</code>，因为我们指定要从索引1开始填充值6，直到2。</p><p id="ce8b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mc md me mf b">fill</code>总是填充到结束索引减1。</p><p id="d1e9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们跳过可选参数，那么我们用条目覆盖<code class="fe mc md me mf b">value</code>:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="f3a3" class="mt lf it mf b gy mu mv l mw mx">const arr = [1, 2, 3].fill(6);</span></pre><p id="aa05" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们得到<code class="fe mc md me mf b">[6, 6, 6]</code>,因为我们忽略了可选参数，用6覆盖了所有条目。</p><h1 id="b150" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">用升序数字填充</h1><p id="6918" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">通过将spread操作符与数组实例的<code class="fe mc md me mf b">keys</code>方法结合起来，我们可以用从0开始的升序数字填充数组。</p><p id="7ee2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以这样写:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="e1db" class="mt lf it mf b gy mu mv l mw mx">const arr = [...new Array(5).keys()]</span></pre><p id="d9a0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后<code class="fe mc md me mf b">arr</code>的值为<code class="fe mc md me mf b">[0, 1, 2, 3, 4]</code>，因为我们创建了一个有5个条目的新数组，对其调用<code class="fe mc md me mf b">keys</code>，然后将其扩展到一个新数组中。</p><h1 id="7169" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">用计算值填充</h1><p id="bd8f" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">要用计算出的值填充数组，我们可以使用<code class="fe mc md me mf b">Array.from</code>方法，然后传入一个对第二个参数的回调，以将值映射到每个条目中我们想要的内容。</p><p id="bd61" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们想创建一个包含5个奇数的数组，我们可以写如下:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="6550" class="mt lf it mf b gy mu mv l mw mx">const arr = Array.from(new Array(5), (x,i) =&gt; i*2 + 1)</span></pre><p id="e346" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么<code class="fe mc md me mf b">arr</code>的值为<code class="fe mc md me mf b">[1, 3, 5, 7, 9]</code>，因为我们在第一个参数中调用了<code class="fe mc md me mf b">Array</code>构造函数，创建了一个新数组。然后在第二个参数中，我们传入一个函数来映射我们在第一个参数中创建的数组的索引<code class="fe mc md me mf b">i</code>，并返回<code class="fe mc md me mf b">i*2 + 1</code>。</p><p id="b4bb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们在数组中得到5个奇数。</p><h1 id="688a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">用<code class="fe mc md me mf b">undefined</code>填充</h1><p id="42df" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">要用<code class="fe mc md me mf b">undefined</code>填充，我们只需要用一个参数调用<code class="fe mc md me mf b">Array</code>构造函数，这个参数是0或更大的整数。</p><p id="03c7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们将新构造的数组扩展到一个新数组中，以转换从数组构造函数调用<code class="fe mc md me mf b">undefined</code>中创建的空值。</p><p id="3431" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="9d09" class="mt lf it mf b gy mu mv l mw mx">const arr = [...new Array(3)]</span></pre><p id="86f8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mc md me mf b">arr</code>有值<code class="fe mc md me mf b">[undefined, undefined, undefined]</code>，因为我们传播了这个值。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nm"><img src="../Images/b1c7e218fa78e2154de222af86181dcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fpq_kHLpZiJS686D"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@alevtakil?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Alev Takil </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><h1 id="b999" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用字符串<code class="fe mc md me mf b">repeat()</code></h1><p id="3813" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">我们可以调用<code class="fe mc md me mf b">repeat</code>来重复一个字符串，然后调用<code class="fe mc md me mf b">split</code>来将字符串拆分成数组条目。</p><p id="46bc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们想用<code class="fe mc md me mf b">'foo'</code>填充长度为5的数组，那么我们可以写:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="78a7" class="mt lf it mf b gy mu mv l mw mx">const arr = 'foo|'.repeat(5).split('|').filter(f =&gt; !!f);</span></pre><p id="e0f6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们使用了<code class="fe mc md me mf b">|</code>符号作为分隔符，在我们完成调用<code class="fe mc md me mf b">repeat</code>以重复<code class="fe mc md me mf b">'foo|'</code>之后，我们用它来调用<code class="fe mc md me mf b">split</code>。</p><p id="fc8f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们调用<code class="fe mc md me mf b">filter</code>删除<code class="fe mc md me mf b">split</code>返回的数组末尾的空字符串值。</p><p id="b27b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，<code class="fe mc md me mf b">arr</code>就有了<code class="fe mc md me mf b">[“foo”, “foo”, “foo”, “foo”, “foo”]</code>的价值。</p><h1 id="4f3f" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="3a7e" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">用值填充数组有几种方法。</p><p id="f4eb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用<code class="fe mc md me mf b">Array.from</code>方法创建一个新的数组。通过传入一个映射函数，这些值可以映射到我们想要的东西。</p><p id="2482" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另外，<code class="fe mc md me mf b">Array</code>有<code class="fe mc md me mf b">fill</code>静态方法来用值填充给定的数组。</p><p id="b92f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">与spread操作符结合使用的<code class="fe mc md me mf b">Array</code>构造函数也可以用来在数组中填充值。</p><p id="1520" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，我们可以在一个字符串上调用<code class="fe mc md me mf b">repeat</code>来重复它，然后调用<code class="fe mc md me mf b">split </code>来拆分成数组条目。</p><p id="20a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们调用<code class="fe mc md me mf b">repeat</code>时，我们可能需要调用<code class="fe mc md me mf b">filter</code>来删除不需要的值。</p></div></div>    
</body>
</html>