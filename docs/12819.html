<html>
<head>
<title>5 Programming Techniques to Avoid SSD Brick Catastrophic Failures</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">避免SSD Brick灾难性故障的5种编程技巧</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/5-programming-techniques-to-avoid-ssd-brick-catastrophic-failures-27f5a742be73?source=collection_archive---------24-----------------------#2022-07-11">https://levelup.gitconnected.com/5-programming-techniques-to-avoid-ssd-brick-catastrophic-failures-27f5a742be73?source=collection_archive---------24-----------------------#2022-07-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7066" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><em class="kf">防止严重故障触手可及</em></h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/485b87b1fa64c73fec4e99407a1f5fa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-lQogLtu4KT_8mwxcwBe6g.jpeg"/></div></div></figure><blockquote class="ks kt ku"><p id="b0c9" class="kv kw kx ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="iq">TL；DR:用成熟的工具做成熟的软件。</em></p></blockquote><h1 id="ffc7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">问题是</h1><p id="f05a" class="pw-post-body-paragraph kv kw iq ky b kz mk jr lb lc ml ju le mm mn lh li mo mp ll lm mq mr lp lq lr ij bi translated">2022年7月9日，<a class="ae ms" href="https://twitter.com/girlhacker/status/1545646297348050946" rel="noopener ugc nofollow" target="_blank">又一次硬件故障</a>瘫痪了几台服务器。</p><p id="8e08" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mm lg lh li mo lk ll lm mq lo lp lq lr ij bi translated">着眼于失败的根本原因，我们可以吸取教训。</p><p id="620b" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mm lg lh li mo lk ll lm mq lo lp lq lr ij bi translated">在<a class="ae ms" href="https://news.ycombinator.com/item?id=32028511" rel="noopener ugc nofollow" target="_blank">这个线程</a>上，我们可以发现发生了什么:</p><blockquote class="ks kt ku"><p id="7923" class="kv kw kx ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="iq">我曾经有一小组固态硬盘出现故障，因为它们的一些正常运行时间计数器在4.5年后溢出，并且不知何故持续破坏了一些内部数据结构。它把它们变成了不可回收的小砖块。看到一堆服务器按照我们最初启动的顺序变暗并不可怕。一点都不好玩。</em></p></blockquote><div class="mt mu gp gr mv mw"><a href="https://www.techradar.com/news/new-bug-destroys-hpe-ssds-after-40000-hours" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd ir gy z fp nb fr fs nc fu fw ip bi translated">新的bug在40，000小时后破坏HPE固态硬盘</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">(图片鸣谢:惠普企业)惠普企业(HPE)再次向其发出警告…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">www.techradar.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk kq mw"/></div></div></a></div><h1 id="bbec" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">原因</h1><p id="3155" class="pw-post-body-paragraph kv kw iq ky b kz mk jr lb lc ml ju le mm mn lh li mo mp ll lm mq mr lp lq lr ij bi translated">由<a class="ae ms" href="https://www.dell.com/support/home/es-ar/drivers/driversdetails?driverid=8h6hj&amp;oscode=w12r2" rel="noopener ugc nofollow" target="_blank">戴尔EMC固件</a>修复的故障与一个Assert函数有关，该函数具有验证循环缓冲区索引值的错误检查。不是检查最大值为N，而是检查N-1。修复程序更正了断言检查，将最大值用作n。</p><h1 id="00be" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">预防</h1><p id="0be7" class="pw-post-body-paragraph kv kw iq ky b kz mk jr lb lc ml ju le mm mn lh li mo mp ll lm mq mr lp lq lr ij bi translated">我们是严肃的软件工程师，我们有成熟的工具。</p><p id="3b5e" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mm lg lh li mo lk ll lm mq lo lp lq lr ij bi translated">我们如何防止这样的缺陷(它们不是<a class="ae ms" href="https://mcsee.medium.com/stop-calling-them-bugs-370db4691360" rel="noopener">bug</a>)</p><div class="mt mu gp gr mv mw"><a href="https://codeburst.io/stop-calling-them-bugs-370db4691360" rel="noopener follow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd ir gy z fp nb fr fs nc fu fw ip bi translated">别再叫他们“虫子”了</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">让我们正确地命名事物</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">codeburst.io</p></div></div><div class="nf l"><div class="nl l nh ni nj nf nk kq mw"/></div></div></a></div><h1 id="2fd0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">1 — TDD</h1><p id="1e72" class="pw-post-body-paragraph kv kw iq ky b kz mk jr lb lc ml ju le mm mn lh li mo mp ll lm mq mr lp lq lr ij bi translated">使用<a class="ae ms" href="https://blog.devgenius.io/tdd-conference-2021-all-talks-e1eeef89497e" rel="noopener ugc nofollow" target="_blank"> TDD </a>，我们只能在失败的测试后编写代码。</p><p id="9421" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mm lg lh li mo lk ll lm mq lo lp lq lr ij bi translated">这样，我们需要考虑N个场景，并显式检查案例。</p><p id="7caa" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mm lg lh li mo lk ll lm mq lo lp lq lr ij bi translated">否则，我们无法编写代码。</p><p id="ffc2" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mm lg lh li mo lk ll lm mq lo lp lq lr ij bi translated">TDD对于嵌入式系统来说非常好。</p><h1 id="b7b3" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">2 —僵尸</h1><p id="ff69" class="pw-post-body-paragraph kv kw iq ky b kz mk jr lb lc ml ju le mm mn lh li mo mp ll lm mq mr lp lq lr ij bi translated"><a class="ae ms" href="https://blog.devgenius.io/how-i-survived-the-zombie-apocalypse-19905db22043" rel="noopener ugc nofollow" target="_blank">僵尸</a>是一个伟大的测试工具，也是一个惊人的TDD伴侣。</p><p id="a396" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mm lg lh li mo lk ll lm mq lo lp lq lr ij bi translated">在<em class="kx">僵尸</em>中代表边界的“B”告诉我们要明确检查边界情况。</p><p id="0763" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mm lg lh li mo lk ll lm mq lo lp lq lr ij bi translated">在这种情况下是N-1、N和N +1。</p><div class="mt mu gp gr mv mw"><a href="https://blog.devgenius.io/how-i-survived-the-zombie-apocalypse-19905db22043" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd ir gy z fp nb fr fs nc fu fw ip bi translated">我是如何在僵尸启示录中幸存的</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">选择优秀的测试用例非常困难。除非你召唤亡灵。</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">blog.devgenius.io</p></div></div><div class="nf l"><div class="nm l nh ni nj nf nk kq mw"/></div></div></a></div><h1 id="4137" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">3 —突变测试</h1><p id="d1b2" class="pw-post-body-paragraph kv kw iq ky b kz mk jr lb lc ml ju le mm mn lh li mo mp ll lm mq mr lp lq lr ij bi translated">每当我们使用算术或<a class="ae ms" href="https://blog.devgenius.io/how-to-get-rid-of-annoying-ifs-forever-317033474484" rel="noopener ugc nofollow" target="_blank"> IF条件</a>时，我们可能会检查如果我们犯了一个错误(比如本文中的错误)会发生什么，并将&lt;改为&lt; =。</p><p id="7dd6" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mm lg lh li mo lk ll lm mq lo lp lq lr ij bi translated">突变测试是检查边界场景的一个非常强大的工具。</p><h1 id="7c54" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">4-模型循环缓冲器</h1><p id="7cab" class="pw-post-body-paragraph kv kw iq ky b kz mk jr lb lc ml ju le mm mn lh li mo mp ll lm mq mr lp lq lr ij bi translated">嵌入式系统和硬件系统经常被调优以获得最佳性能。</p><p id="de73" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mm lg lh li mo lk ll lm mq lo lp lq lr ij bi translated">它们跳过一些检查，用低级语言编程。</p><p id="a098" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mm lg lh li mo lk ll lm mq lo lp lq lr ij bi translated">他们大多避免映射真实世界，使用短整数作为索引。</p><p id="5a66" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mm lg lh li mo lk ll lm mq lo lp lq lr ij bi translated">根据我们的<a class="ae ms" href="https://medium.com/@mcsee/what-is-software-9a78c1172cf9" rel="noopener">映射器</a>，一个<em class="kx">整数</em>不是一个<em class="kx">短整型</em>(或<em class="kx">长整型</em>)<em class="kx">短整型</em>不是一个<em class="kx">整数</em>。</p><h1 id="839b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">5 —快速失败</h1><p id="eab0" class="pw-post-body-paragraph kv kw iq ky b kz mk jr lb lc ml ju le mm mn lh li mo mp ll lm mq mr lp lq lr ij bi translated">任务关键型软件有时具有恢复或容错例程。</p><p id="e16a" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mm lg lh li mo lk ll lm mq lo lp lq lr ij bi translated">遵循<a class="ae ms" href="https://codeburst.io/fail-fast-3f3f036032b0" rel="noopener" target="_blank">快速失败</a>原则，我们可以预见灾难，让另一段代码接管，而不是阻塞磁盘。</p><h1 id="3734" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论。</h1><p id="8990" class="pw-post-body-paragraph kv kw iq ky b kz mk jr lb lc ml ju le mm mn lh li mo mp ll lm mq mr lp lq lr ij bi translated">系统不会失败。</p><p id="7b2f" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mm lg lh li mo lk ll lm mq lo lp lq lr ij bi translated">作为软件工程师，我们失败了，并且一次又一次地犯同样的错误。</p><p id="50df" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mm lg lh li mo lk ll lm mq lo lp lq lr ij bi translated">我们需要谦虚，从过去的错误中吸取教训。</p><h1 id="1864" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">信用</h1><p id="c273" class="pw-post-body-paragraph kv kw iq ky b kz mk jr lb lc ml ju le mm mn lh li mo mp ll lm mq mr lp lq lr ij bi translated">帕特里克·帕金斯在<a class="ae ms" href="https://unsplash.com/s/photos/disaste" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></div></div>    
</body>
</html>