<html>
<head>
<title>How to Create an Image Lightbox in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Angular中创建图像灯箱</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-create-an-image-lightbox-in-angular-d7254e2c099?source=collection_archive---------4-----------------------#2019-12-10">https://levelup.gitconnected.com/how-to-create-an-image-lightbox-in-angular-d7254e2c099?source=collection_archive---------4-----------------------#2019-12-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/cec02add164252bd45857d48bf23854a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BnZc1WxCmhoWqmWKQH583A.jpeg"/></div></div></figure><p id="092b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">许多web项目，如列表网站、电子商务、文件夹网站和许多其他动态网站，都有一个名为“图像灯箱”的组件，用于全屏缩放图像，并以更大的尺寸浏览它们。有大量的第三方库可以为开发者解决这个问题，但是为什么要安装额外的包来获得这个简单的功能呢？在本教程中，我们将建立自己的图像灯箱，而不使用第三方库。让我们开始吧。</p><h2 id="565d" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated"><strong class="ak">创建新的角度项目</strong></h2><p id="2ac0" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">让我们创建一个新项目并运行它。</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="6b62" class="kw kx iq lz b gy md me l mf mg">ng new angular-lightbox</span><span id="7e64" class="kw kx iq lz b gy mh me l mf mg">cd angular-lightbox</span><span id="3860" class="kw kx iq lz b gy mh me l mf mg">ng serve</span></pre><p id="3680" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们生成<code class="fe mi mj mk lz b">ImageLightboxComponent</code>组件</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="777d" class="kw kx iq lz b gy md me l mf mg">ng generate component ./components/image-lightbox</span></pre><p id="7957" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们需要添加一些可以通过我们的<code class="fe mi mj mk lz b">ImageComponent</code>使用的数据。只需创建一个新的数据文件夹并创建<code class="fe mi mj mk lz b">image.data.ts</code></p><p id="c059" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后添加这些数据。图像已经放置在“资产”文件夹中。</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="2eb4" class="kw kx iq lz b gy md me l mf mg">export const images = [<br/>  {<br/>    id: 1,<br/>    url: "../../assets/img1.jpeg"<br/>  },<br/>  {<br/>    id: 2,<br/>    url: "../../assets/img2.jpeg"<br/>  },<br/>  {<br/>    id: 3,<br/>    url: "../../assets/img3.jpeg"<br/>  },<br/>  {<br/>    id: 4,<br/>    url: "../../assets/img4.jpeg"<br/>  }<br/>];</span></pre><h2 id="9c6f" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated"><strong class="ak">创建影像服务</strong></h2><p id="d65a" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">为了获取图像，我们需要使用observables，因此我们需要为此创建一个服务。</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="b655" class="kw kx iq lz b gy md me l mf mg">ng generate service image</span></pre><p id="5a30" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们更新我们的服务:</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="8d87" class="kw kx iq lz b gy md me l mf mg">import { Injectable } from "<a class="ae ml" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>";<br/>import { Observable, of } from "rxjs";<br/>import { images } from "../data/image.data";<br/><a class="ae ml" href="http://twitter.com/Injectable" rel="noopener ugc nofollow" target="_blank">@Injectable</a>()<br/>export class ImageService {<br/>  constructor() {}<br/>  fetchImages(): Observable&lt;any&gt; {<br/>    return of(images);<br/>  }<br/>}</span></pre><h2 id="ca26" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated"><strong class="ak">处理ImageLightbox组件</strong></h2><p id="9fed" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">是时候让我们的组件发挥作用了。</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="650e" class="kw kx iq lz b gy md me l mf mg">import {<br/> Component,<br/> OnInit,<br/> ViewEncapsulation<br/>} from '<a class="ae ml" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';</span><span id="52d8" class="kw kx iq lz b gy mh me l mf mg">import { ImageService } from '../../services/image.service';</span><span id="c53f" class="kw kx iq lz b gy mh me l mf mg"><a class="ae ml" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/> selector: 'app-image-lightbox',<br/> templateUrl: './image-lightbox.component.html',<br/> styleUrls: ['./image-lightbox.component.css'],<br/> encapsulation: ViewEncapsulation.None<br/>})</span><span id="2054" class="kw kx iq lz b gy mh me l mf mg">export class ImageLightboxComponent implements OnInit {<br/> images = [];<br/> slideIndex = 0;<br/> constructor(private imageService: ImageService) {}</span><span id="788a" class="kw kx iq lz b gy mh me l mf mg"> ngOnInit(): void {<br/>  this.loadImages();<br/> }</span><span id="1ad0" class="kw kx iq lz b gy mh me l mf mg"> loadImages(): void {<br/>  this.imageService.fetchImages()<br/>   .subscribe(images =&gt; this.images = images);<br/> }</span><span id="183c" class="kw kx iq lz b gy mh me l mf mg"> openModal() {<br/>  document.getElementById('imgModal').style.display = "block";<br/> }</span><span id="52f4" class="kw kx iq lz b gy mh me l mf mg"> closeModal() {<br/>  document.getElementById('imgModal').style.display = "none";<br/> }</span><span id="8bb0" class="kw kx iq lz b gy mh me l mf mg"> plusSlides(n) {<br/>  this.showSlides(this.slideIndex += n);<br/> }</span><span id="545d" class="kw kx iq lz b gy mh me l mf mg"> currentSlide(n) {<br/>  this.showSlides(this.slideIndex = n);<br/> }</span><span id="2476" class="kw kx iq lz b gy mh me l mf mg"> showSlides(slideIndex);</span><span id="8dd9" class="kw kx iq lz b gy mh me l mf mg"> showSlides(n) {<br/>  let i;<br/>  const slides = document.getElementsByClassName("img-slides") as HTMLCollectionOf &lt; HTMLElement &gt; ;<br/>  const dots = document.getElementsByClassName("images") as HTMLCollectionOf &lt; HTMLElement &gt; ;<br/>  if (n &gt; slides.length) {<br/>   this.slideIndex = 1<br/>  }<br/>  if (n &lt; 1) {<br/>   this.slideIndex = slides.length<br/>  }<br/>  for (i = 0; i &lt; slides.length; i++) {<br/>   slides[i].style.display = "none";<br/>  }<br/>  for (i = 0; i &lt; dots.length; i++) {<br/>   dots[i].className = dots[i].className.replace(" active", "");<br/>  }<br/>  slides[this.slideIndex - 1].style.display = "block";<br/>  if (dots &amp;&amp; dots.length &gt; 0) {<br/>   dots[this.slideIndex - 1].className += " active";<br/>  }<br/> }<br/>}</span></pre><p id="36f9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们通过上一节创建的服务获取图像，然后使用ID和类名来处理模态的打开、关闭和滑动。</p><p id="d320" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们需要在HTML模板中实现这些功能。</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="1088" class="kw kx iq lz b gy md me l mf mg">&lt;div class="image-row"&gt;<br/>    &lt;div class="image-column" *ngFor="let image of images; let i = index"&gt;<br/>        &lt;img src="{{image.url}}" (click)="openModal();currentSlide(i+1)" class="hover-shadow cursor"&gt;<br/>    &lt;/div&gt;<br/>&lt;/div&gt;<br/>&lt;div id="imgModal" class="slide-modal"&gt;<br/>    &lt;span class="close cursor" (click)="closeModal()"&gt;&amp;times;&lt;/span&gt;<br/>    &lt;div class="slide-modal-content"&gt;<br/>        &lt;div class="img-slides" *ngFor="let image of images; let i = index"&gt;<br/>            &lt;img src="{{image.url}}"&gt;<br/>        &lt;/div&gt;<br/>        &lt;a class="prev" (click)="plusSlides(-1)"&gt;&amp;#10094;&lt;/a&gt;<br/>        &lt;a class="next" (click)="plusSlides(1)"&gt;&amp;#10095;&lt;/a&gt;<br/>        &lt;div class="image-row"&gt;<br/>            &lt;div class="image-column" *ngFor="let image of images; let i = index"&gt;<br/>                &lt;img class="images" (click)="currentSlide(i+1)" src="{{image.url}}"&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="a7ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们遍历图像3次。</p><p id="ae07" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们第一次使用<code class="fe mi mj mk lz b">ngFor</code>时，它只显示缩略图。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mm"><img src="../Images/1ddb5475c7a0e4642077661aaf9d4103.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3QKgJn4DPGGOlX7imXjGzw.png"/></div></div></figure><p id="77fe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第二次，我们使用它来显示和滑动模态中的大图像。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/7d501910b6082651bc6910a4567130e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LaMmHgFJLPaJPyvdfw-pjw.png"/></div></div></figure><p id="d0e7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，我们最后一次使用它来显示模态主滑块下的小图像，这样你就可以立即选择你想要显示的大图像，而不是点击下一个或上一个按钮。下面是它的样子:</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/3d6d9c0e65fc2b86ae9cc10e459e48ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xVji2ml8uG-hhPBiSRrHcg.png"/></div></div></figure><p id="ec58" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了得到这个外观，我们需要使用一些CSS:</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="1313" class="kw kx iq lz b gy md me l mf mg">.image-row {<br/>  display: flex;<br/>  flex-wrap: wrap;<br/>}</span><span id="8d95" class="kw kx iq lz b gy mh me l mf mg">.image-row &gt; .image-column {<br/>  padding: 5px 10px;<br/>}</span><span id="9f24" class="kw kx iq lz b gy mh me l mf mg">.image-row:after {<br/>  content: "";<br/>  display: table;<br/>  clear: both;<br/>}</span><span id="2222" class="kw kx iq lz b gy mh me l mf mg">.image-column {<br/>  float: left;<br/>  width: 25%;<br/>}</span><span id="7c41" class="kw kx iq lz b gy mh me l mf mg">img {<br/>  width: 100%;<br/>}</span><span id="a9b5" class="kw kx iq lz b gy mh me l mf mg">.slide-modal {<br/>  display: none;<br/>  position: fixed;<br/>  z-index: 1;<br/>  padding-top: 10px;<br/>  left: 0;<br/>  top: 0;<br/>  width: 100%;<br/>  height: 100%;<br/>  overflow: auto;<br/>  background-color: #000000;<br/>}</span><span id="49ee" class="kw kx iq lz b gy mh me l mf mg">.slide-modal-content {<br/>  position: relative;<br/>  margin: auto;<br/>  padding: 0;<br/>  width: 100%;<br/>  max-width: 1200px;<br/>}</span><span id="e6e0" class="kw kx iq lz b gy mh me l mf mg">.slide-modal-content .image-column {<br/>  padding: 0;<br/>}</span><span id="4867" class="kw kx iq lz b gy mh me l mf mg">.close {<br/>  color: white;<br/>  position: absolute;<br/>  top: 10px;<br/>  right: 25px;<br/>  font-size: 35px;<br/>  font-weight: bold;<br/>}</span><span id="c141" class="kw kx iq lz b gy mh me l mf mg">.close:hover,<br/>.close:focus {<br/>  color: #888888;<br/>  text-decoration: none;<br/>  cursor: pointer;<br/>}</span><span id="ac8f" class="kw kx iq lz b gy mh me l mf mg">.img-slides {<br/>  display: none;<br/>}</span><span id="ffe5" class="kw kx iq lz b gy mh me l mf mg">.cursor {<br/>  cursor: pointer;<br/>}</span><span id="4adc" class="kw kx iq lz b gy mh me l mf mg">.prev,<br/>.next {<br/>  cursor: pointer;<br/>  position: absolute;<br/>  top: 35%;<br/>  width: auto;<br/>  padding: 18px;<br/>  margin-top: -50px;<br/>  color: white !important;<br/>  font-weight: bold;<br/>  font-size: 20px;<br/>  transition: 0.8s ease;<br/>  border-radius: 0 5px 5px 0;<br/>  user-select: none;<br/>  -webkit-user-select: none;<br/>}</span><span id="7a07" class="kw kx iq lz b gy mh me l mf mg">.next {<br/>  right: 0;<br/>  border-radius: 3px 0 0 3px;<br/>}</span><span id="e320" class="kw kx iq lz b gy mh me l mf mg">.prev:hover,<br/>.next:hover {<br/>  background-color: rgba(0, 0, 0, 0.8);<br/>}</span><span id="30fe" class="kw kx iq lz b gy mh me l mf mg">img {<br/>  margin-bottom: -4px;<br/>}</span><span id="2e37" class="kw kx iq lz b gy mh me l mf mg">.images {<br/>  opacity: 0.7;<br/>}</span><span id="ba09" class="kw kx iq lz b gy mh me l mf mg">.active,<br/>.images:hover {<br/>  opacity: 1;<br/>}</span><span id="6618" class="kw kx iq lz b gy mh me l mf mg">img.hover-shadow {<br/>  transition: 0.3s;<br/>}</span><span id="113c" class="kw kx iq lz b gy mh me l mf mg">.hover-shadow:hover {<br/>  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.2);<br/>}</span></pre><h2 id="5f90" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated"><strong class="ak">最后一步</strong></h2><p id="4739" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">最后一步，我们需要在<code class="fe mi mj mk lz b">app.component.html</code>中包含我们的组件</p><p id="cbf4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它将只包含这一行:<code class="fe mi mj mk lz b">&lt;app-image-lightbox&gt;&lt;/app-image-lightbox&gt;</code></p><p id="a161" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，确保<code class="fe mi mj mk lz b">ImageLightboxComponent</code>和<code class="fe mi mj mk lz b">ImageService</code>包含在<code class="fe mi mj mk lz b">app.module.ts</code>中</p><h2 id="86c3" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated"><strong class="ak">结论</strong></h2><p id="8c76" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">我们的图像灯箱已经准备好了。你可以在这里找到完整的源代码:<br/> <a class="ae ml" href="https://github.com/haykoyaghubyan/angular-image-lightbox" rel="noopener ugc nofollow" target="_blank"> Github </a></p></div></div>    
</body>
</html>