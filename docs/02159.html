<html>
<head>
<title>How to Collaborate Using Git Without Messing Things Up</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Git进行协作而不把事情弄糟</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-collaborate-using-git-without-messing-things-up-7111f6ae8285?source=collection_archive---------1-----------------------#2020-02-23">https://levelup.gitconnected.com/how-to-collaborate-using-git-without-messing-things-up-7111f6ae8285?source=collection_archive---------1-----------------------#2020-02-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="e8bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Git工作流是我在一起工作时经常使用的</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/a3cb957f8b8cf4401da8d4fe8606b930.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*C6JbaK2nwzxZeYPU"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">由<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash上的</a>制作者<a class="ae lb" href="https://unsplash.com/@nesabymakers?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> NESA拍摄</a></figcaption></figure><blockquote class="lc ld le"><p id="2508" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated"><strong class="jp ir"><em class="iq">TL；DR </em> </strong> <em class="iq">:当你和你的合作者在同一个分支工作时，总是使用:</em> <code class="fe lj lk ll lm b"><strong class="jp ir">git pull --rebase</strong></code>和<code class="fe lj lk ll lm b"><strong class="jp ir">git rebase master</strong></code></p></blockquote></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><p id="b71b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Git已经成为数百万公司、项目和开发者中使用最多的版本源代码控制。没什么好说的，Git的分支管理是<strong class="jp ir">“杀手级特性”</strong>，这无疑让Git在VCS社区中脱颖而出。</p><blockquote class="lu"><p id="48dc" class="lv lw iq bd lx ly lz ma mb mc md kk dk translated">“分支意味着你偏离了开发的主线，继续工作而不打乱主线。”—第三章。Git分支，Pro Git，斯科特·沙孔和本·施特劳布</p></blockquote><p id="6cd1" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk ij bi translated">如果您是git新手，我建议您阅读下面的链接，然后关注我的主题会更容易:</p><div class="mj mk gp gr ml mm"><a href="https://git-scm.com/book/en/v2/Getting-Started-What-is-Git%3F" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd ir gy z fp mr fr fs ms fu fw ip bi translated">Git——Git是什么？</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">简而言之，Git是什么？这是需要理解的一个重要部分，因为如果你理解了什么是Git和…</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">git-scm.com</p></div></div><div class="mv l"><div class="mw l mx my mz mv na kv mm"/></div></div></a></div><div class="mj mk gp gr ml mm"><a href="https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd ir gy z fp mr fr fs ms fu fw ip bi translated">Git —基本的分支和合并</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">切换到您的生产分支。创建一个分支来添加修补程序。测试完成后，合并热修复分支，然后…</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">git-scm.com</p></div></div><div class="mv l"><div class="nb l mx my mz mv na kv mm"/></div></div></a></div><div class="mj mk gp gr ml mm"><a href="https://git-scm.com/book/en/v2/Git-Branching-Rebasing" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd ir gy z fp mr fr fs ms fu fw ip bi translated">Git —重置基础</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">在Git中，将一个分支的变更集成到另一个分支有两种主要方式:合并和rebase。在这个…</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">git-scm.com</p></div></div><div class="mv l"><div class="nc l mx my mz mv na kv mm"/></div></div></a></div><p id="181c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天，我将向您展示git工作流，这是我在处理主题/功能分支时经常使用的工作流。无论我是独自工作还是与两个(包括我)或更多的团队成员一起工作。通过使用此工作流程，您将获得以下好处:</p><ul class=""><li id="5053" class="nd ne iq jp b jq jr ju jv jy nf kc ng kg nh kk ni nj nk nl bi translated">有一个干净的线性git历史</li><li id="6df1" class="nd ne iq jp b jq nm ju nn jy no kc np kg nq kk ni nj nk nl bi translated">重写历史更容易</li><li id="6b2e" class="nd ne iq jp b jq nm ju nn jy no kc np kg nq kk ni nj nk nl bi translated">让您的编码审查人员的生活更轻松</li></ul><p id="2987" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以让我们开始吧！</p><h1 id="209c" class="nr ns iq bd nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on oo bi translated">方案</h1><p id="2598" class="pw-post-body-paragraph jn jo iq jp b jq op js jt ju oq jw jx jy or ka kb kc os ke kf kg ot ki kj kk ij bi translated">假设我的项目有一个名为<strong class="jp ir"> master </strong>的主分支，它包含了所有的产品代码。一天，我的团队领导决定我和我的同事一起开发一个新功能。带着所有的渴望，我们中的一个人开始从master分支并创建一个新的<strong class="jp ir">功能</strong>分支，将其推到远程，我的同事将检查它。现在我们都在同一个页面上，<strong class="jp ir">“新鲜”</strong>特色分支。没有什么能阻止我们，我们开始工作，在我们自己的本地机器上提交更改。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ou"><img src="../Images/98c0bb272538da9a640a924a0e1e01bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e83emQWsUM-om3tq9ZHq7Q.jpeg"/></div></div></figure><p id="cf43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">哇，我太努力了，我需要把我的工作推到远程，让世界认识到“我有多辛苦！”。然后我使用命令<code class="fe lj lk ll lm b">git push origin feature</code>，并且:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/91955f26011c738d734d30ae7dd0a013.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/1*4qe5D4gyjkCy3j9fOi1e2g.gif"/></div></figure><pre class="km kn ko kp gt ow lm ox oy aw oz bi"><span id="b6ac" class="pa ns iq lm b gy pb pc l pd pe">$ git push origin feature<br/>To <a class="ae lb" href="https://github.com/phamducminh/test-git.git" rel="noopener ugc nofollow" target="_blank">[</a>...]<br/> ! [rejected]        feature -&gt; feature (non-fast-forward)<br/>error: failed to push some refs to [...]<br/>hint: Updates were rejected because the tip of your current branch is behind<br/>hint: its remote counterpart. Integrate the remote changes (e.g.<br/>hint: 'git pull ...') before pushing again.<br/>hint: See the 'Note about fast-forwards' in 'git push --help' for details.</span></pre><p id="a78a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">啊，有人在我之前推了一下，没关系，让我们通过键入<code class="fe lj lk ll lm b">git pull origin feature</code>来拉动:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/91955f26011c738d734d30ae7dd0a013.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/1*4qe5D4gyjkCy3j9fOi1e2g.gif"/></div></figure><pre class="km kn ko kp gt ow lm ox oy aw oz bi"><span id="2573" class="pa ns iq lm b gy pb pc l pd pe">Merge branch 'feature' of <a class="ae lb" href="https://github.com/phamducminh/test-git" rel="noopener ugc nofollow" target="_blank">[</a>...] into feature</span><span id="b864" class="pa ns iq lm b gy pf pc l pd pe"># Please enter a commit message to explain why this merge is necessary,<br/># especially if it merges an updated upstream into a topic branch.<br/>#<br/># Lines starting with '#' will be ignored, and an empty message aborts<br/># the commit.</span></pre><p id="006a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">再说一遍，这是什么，我应该关心。没关系，一切都很好。终于可以把工作推到远程了。</p><pre class="km kn ko kp gt ow lm ox oy aw oz bi"><span id="a480" class="pa ns iq lm b gy pb pc l pd pe">$ git push origin feature<br/>To <a class="ae lb" href="https://github.com/phamducminh/test-git.git" rel="noopener ugc nofollow" target="_blank">[</a>...]<br/>   d440b7a..393dedb  feature -&gt; feature</span></pre><p id="c0cc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是当我看着历史，我想知道“它是多么丑陋！”，有些提交像<strong class="jp ir">“添加我的. Java”</strong>或者<strong class="jp ir">“添加内容到我的. Java”</strong>是重复的。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pg"><img src="../Images/c28b83c80662d66df8139f212b54b2b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YboNNM6sbn3C-qwDV69RGg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">“将…的分支‘特征’合并成特征”太难看了</figcaption></figure><h2 id="f657" class="pa ns iq bd nt ph pi dn nx pj pk dp ob jy pl pm of kc pn po oj kg pp pq on pr bi translated">让事情变得更糟</h2><p id="54c0" class="pw-post-body-paragraph jn jo iq jp b jq op js jt ju oq jw jx jy or ka kb kc os ke kf kg ot ki kj kk ij bi translated">另一边，我的同事还在工作，当他决定将工作推到远程时，他遇到了和我一样的问题，这使他在<code class="fe lj lk ll lm b">git push</code>之前做了一个<code class="fe lj lk ll lm b">git pull</code>。以下是特征分支的历史:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ps"><img src="../Images/1728de7534f1dccd15cfc7dc7d53bb02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*heH8HfYYQ7u7wROku0M4uQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">多好的历史啊！</figcaption></figure><h2 id="d9ae" class="pa ns iq bd nt ph pi dn nx pj pk dp ob jy pl pm of kc pn po oj kg pp pq on pr bi translated">让事情变得更糟</h2><p id="7c5d" class="pw-post-body-paragraph jn jo iq jp b jq op js jt ju oq jw jx jy or ka kb kc os ke kf kg ot ki kj kk ij bi translated">假设我们需要将主分支的最新代码更新到我们的特征分支上。显然，我们<strong class="jp ir">通过使用<code class="fe lj lk ll lm b">git merge master</code>命令将</strong>主合并到特征分支中。git历史看起来像这样:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ps"><img src="../Images/e015c1754822c9b67933e4807f950eaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7lSS4U0W5myJwFyJYmkF5A.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">将主文件合并到特征分支后的历史记录</figcaption></figure><p id="e00b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看着这个历史，对于评审者来说很难，当然，我们自己也很难找出哪些提交属于我们正在工作的特性。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="7934" class="nr ns iq bd nt nu pt nw nx ny pu oa ob oc pv oe of og pw oi oj ok px om on oo bi translated">解决办法</h1><p id="e6fa" class="pw-post-body-paragraph jn jo iq jp b jq op js jt ju oq jw jx jy or ka kb kc os ke kf kg ot ki kj kk ij bi translated">为了解决我们上面遇到的问题，当我们被拒绝推送至远程时，我们不使用<code class="fe lj lk ll lm b">git pull</code>，而是使用<code class="fe lj lk ll lm b">git pull --rebase origin feature</code>。<code class="fe lj lk ll lm b">git pull</code>和<code class="fe lj lk ll lm b">git pull --rebase</code>的区别在于:</p><ul class=""><li id="f54b" class="nd ne iq jp b jq jr ju jv jy nf kc ng kg nh kk ni nj nk nl bi translated"><code class="fe lj lk ll lm b">git pull</code> = <code class="fe lj lk ll lm b">git fetch</code> + <code class="fe lj lk ll lm b">git merge</code></li><li id="19c9" class="nd ne iq jp b jq nm ju nn jy no kc np kg nq kk ni nj nk nl bi translated"><code class="fe lj lk ll lm b">git pull --rebase</code> = <code class="fe lj lk ll lm b">git fetch</code> + <code class="fe lj lk ll lm b">git rebase</code></li></ul><p id="63dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是<code class="fe lj lk ll lm b">git rebase</code>的工作原理:</p><blockquote class="lc ld le"><p id="e283" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">它的工作方式是转到两个分支的共同祖先(您所在的分支和您正在重新基础的分支)，获取您所在的分支的每次提交所引入的差异，将这些差异保存到临时文件中，将当前分支重置为与您正在重新基础的分支相同的提交，最后依次应用每个更改。</p></blockquote><p id="8165" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们开始吧:</p><pre class="km kn ko kp gt ow lm ox oy aw oz bi"><span id="5ac0" class="pa ns iq lm b gy pb pc l pd pe">$ git pull --rebase origin feature<br/>remote: Enumerating objects: 4, done.<br/>remote: Counting objects: 100% (4/4), done.<br/>remote: Compressing objects: 100% (2/2), done.<br/>remote: Total 3 (delta 0), reused 3 (delta 0), pack-reused 0<br/>Unpacking objects: 100% (3/3), done.<br/>From <a class="ae lb" href="https://github.com/phamducminh/test-git" rel="noopener ugc nofollow" target="_blank">https://github.com/phamducminh/test-git</a><br/> * branch            feature    -&gt; FETCH_HEAD<br/>   974b471..141f40e  feature    -&gt; origin/feature<br/><strong class="lm ir">First, rewinding head to replay your work on top of it...<br/>Applying: Add My.java<br/>Applying: Add content to My.java</strong></span></pre><p id="6763" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，它保存我的两个提交<strong class="jp ir">“添加我的. java”</strong>和<strong class="jp ir">“向我的. Java添加内容”</strong>，将我的当前特性分支重置为与远程分支相同的提交<strong class="jp ir">“我的朋友添加MyFriend.java文件”</strong>，然后依次重新应用我的两个提交。</p><p id="b650" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是我做<code class="fe lj lk ll lm b">git pull --rebase origin feature</code>后的结果。历史看起来比仅使用<code class="fe lj lk ll lm b">git pull</code>时更清晰。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi py"><img src="../Images/d99e73ace8411cf46b98e7930026df91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NHDcvNDGGjHu8Znowz8kQQ.png"/></div></div></figure><p id="71e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在另一边，我的同事发出同样的命令:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pz"><img src="../Images/191de2e7fdfceedcf30712b0ab55899f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_K-gVU3k3FnT8X_cjirHnA.png"/></div></div></figure><p id="a546" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，当我需要将主分支的最新代码更新到我们的特性分支时，我可以使用相同的策略。我不用<code class="fe lj lk ll lm b">git merge master</code>，而是用<code class="fe lj lk ll lm b">git rebase master</code>。</p><pre class="km kn ko kp gt ow lm ox oy aw oz bi"><span id="6e0a" class="pa ns iq lm b gy pb pc l pd pe">$ git rebase master<br/>First, rewinding head to replay your work on top of it...<br/>Applying: My friend add MyFriend.java file<br/>Applying: Add My.java<br/>Applying: Add content to My.java</span></pre><p id="7e06" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">线性历史看起来像这样:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi qa"><img src="../Images/26d6eaae03ae021b2d7b5625fe262b9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kkpR4qlpbb9l_Z0W14YuOQ.png"/></div></div></figure><p id="f74c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">注意:不要改变存储库之外的提交的基础。</strong>这意味着如果你的特征分支已经被合并到主分支中(通过<code class="fe lj lk ll lm b">git merge feature</code>命令)，那么就不要再改变它的基础。</p><h1 id="8ff5" class="nr ns iq bd nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on oo bi translated">结论</h1><p id="0d7c" class="pw-post-body-paragraph jn jo iq jp b jq op js jt ju oq jw jx jy or ka kb kc os ke kf kg ot ki kj kk ij bi translated">当你和你的同事仍然在同一个特性分支上工作时，总是做<code class="fe lj lk ll lm b">git pull --rebase.</code></p><p id="89fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当您需要将特征分支上的工作与主分支上的最新工作同步时，请务必执行<code class="fe lj lk ll lm b">git rebase master</code></p><p id="426e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢阅读到目前为止。我希望你能喜欢我的工作流程，并能在你的项目中明智地利用它。</p><p id="75a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">祝你快乐！</p></div></div>    
</body>
</html>