<html>
<head>
<title>Multi-String Replace in Golang with Replacer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用替换器替换Golang中的多字符串</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/multi-string-replace-in-golang-with-replacer-148d4173f439?source=collection_archive---------3-----------------------#2022-06-23">https://levelup.gitconnected.com/multi-string-replace-in-golang-with-replacer-148d4173f439?source=collection_archive---------3-----------------------#2022-06-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/60ebc91ddecd5947dab0979ec25cc2e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*N4ePzXiF_PJD7GZn431bSw.png"/></div></figure><p id="1b9a" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">使用<code class="fe kv kw kx ky b"><a class="ae kz" href="https://pkg.go.dev/strings" rel="noopener ugc nofollow" target="_blank">strings</a></code>包，Golang中的字符串替换非常容易。在他们的文档中:“包字符串实现了简单的函数来操作UTF-8编码的字符串”。拿下面这句话来说:</p><pre class="la lb lc ld gt le ky lf lg aw lh bi"><span id="a96a" class="li lj it ky b gy lk ll l lm ln">"Hello World!"</span></pre><p id="dde3" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">现在假设我的产品负责人认为用感叹号说“你好，世界”太多了，如果我发现我需要用一个<code class="fe kv kw kx ky b">.</code>替换<code class="fe kv kw kx ky b">!</code>，这在Golang中很容易做到:</p><pre class="la lb lc ld gt le ky lf lg aw lh bi"><span id="d298" class="li lj it ky b gy lk ll l lm ln">myString := "Hello World!"</span><span id="00bf" class="li lj it ky b gy lo ll l lm ln">myString = strings.ReplaceAll(myString, "!", ".")</span><span id="fe94" class="li lj it ky b gy lo ll l lm ln">fmt.Println(myString)</span></pre><p id="bca2" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这将导致<code class="fe kv kw kx ky b">Hello World.</code>被打印出来，你可以在这里<a class="ae kz" href="https://go.dev/play/p/bBlbOqCfSoE" rel="noopener ugc nofollow" target="_blank">测试</a>。如你所见，使用<code class="fe kv kw kx ky b">strings.ReplaceAll</code>非常简单:</p><ul class=""><li id="a08e" class="lp lq it jz b ka kb ke kf ki lr km ls kq lt ku lu lv lw lx bi translated">提供要操作的字符串</li><li id="b996" class="lp lq it jz b ka ly ke lz ki ma km mb kq mc ku lu lv lw lx bi translated">提供要替换的字符</li><li id="1eb3" class="lp lq it jz b ka ly ke lz ki ma km mb kq mc ku lu lv lw lx bi translated">提供替换价值</li></ul><p id="57ca" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">现在你知道如何用Golang替换字符串了，恭喜你！边注，还有一个<code class="fe kv kw kx ky b"><a class="ae kz" href="https://pkg.go.dev/strings#Replace" rel="noopener ugc nofollow" target="_blank">strings.Replace</a></code>，你可以控制在你的字符串中发生多少次替换。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="000e" class="mk lj it bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">当事情没那么简单的时候</h1><p id="9198" class="pw-post-body-paragraph jx jy it jz b ka nh kc kd ke ni kg kh ki nj kk kl km nk ko kp kq nl ks kt ku im bi translated">替换很好，但是如果你的字符串看起来像这样呢:</p><pre class="la lb lc ld gt le ky lf lg aw lh bi"><span id="451e" class="li lj it ky b gy lk ll l lm ln">"Hello_World!_This.sentence.has_chars_I.want_to.remove!"</span></pre><p id="494b" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我们产品负责人说这句话不会飞，需要用空格替换and <code class="fe kv kw kx ky b">_</code>和任何<code class="fe kv kw kx ky b">.</code>。既然我们知道如何使用<code class="fe kv kw kx ky b">strings.ReplaceAll</code>，我们可以很容易地做这样的事情:</p><pre class="la lb lc ld gt le ky lf lg aw lh bi"><span id="f67f" class="li lj it ky b gy lk ll l lm ln">myString := "Hello_World!_This.sentence.has_chars_I.want_to.remove!"</span><span id="dc03" class="li lj it ky b gy lo ll l lm ln">myString = strings.ReplaceAll(myString, "_", " ")<br/>myString = strings.ReplaceAll(myString, ".", " ")</span><span id="11d9" class="li lj it ky b gy lo ll l lm ln">fmt.Println(myString)</span></pre><p id="77b7" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这将导致<code class="fe kv kw kx ky b">Hello World! This sentence has chars I want to remove!</code>被打印出来，你可以在这里<a class="ae kz" href="https://go.dev/play/p/wN4ajNm6hJ8" rel="noopener ugc nofollow" target="_blank">测试</a>。在这个例子中，我们仍然有一个相当简单的句子，用两个不同的字符替换。这并不坏，我们可以很容易地使用两条<code class="fe kv kw kx ky b">strings.ReplaceAll</code>语句实现我们的目标。</p><p id="2349" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">但是，如果我们需要替换5个、10个或20个字符呢？我们可以有20个<code class="fe kv kw kx ky b">strings.ReplaceAll</code>语句，它会工作得很好，但是很麻烦。或者，如果我需要在多个函数中执行这种替换，该怎么办？这可能会很快变得一团糟。让我们看看更好的方法。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="0d34" class="mk lj it bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">使用替代品</h1><p id="e27f" class="pw-post-body-paragraph jx jy it jz b ka nh kc kd ke ni kg kh ki nj kk kl km nk ko kp kq nl ks kt ku im bi translated"><code class="fe kv kw kx ky b">strings</code>包包括一个<code class="fe kv kw kx ky b"><a class="ae kz" href="https://pkg.go.dev/strings#Replacer" rel="noopener ugc nofollow" target="_blank">strings.Replacer</a></code>选项。在他们的文档中:“Replacer用替换来替换字符串列表。多个goroutines同时使用是安全的”。基本上，您可以指定要执行的替换列表，然后针对您的目标字符串一次完成所有替换:</p><pre class="la lb lc ld gt le ky lf lg aw lh bi"><span id="3a3b" class="li lj it ky b gy lk ll l lm ln">myString := "Hello_World!_This.sentence.has_chars_I.want_to.remove!"</span><span id="2cbd" class="li lj it ky b gy lo ll l lm ln">replacer := strings.NewReplacer("_", " ", ".", " ")</span><span id="9b55" class="li lj it ky b gy lo ll l lm ln">myString = replacer.Replace(myString)</span><span id="28dc" class="li lj it ky b gy lo ll l lm ln">fmt.Println(myString)</span></pre><p id="5148" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这将导致<code class="fe kv kw kx ky b">Hello World! This sentence has chars I want to remove!</code>被打印出来，你可以<a class="ae kz" href="https://go.dev/play/p/Aehy-zlKdSp" rel="noopener ugc nofollow" target="_blank">在这里测试</a>。使用Replacer函数也非常简单:</p><ul class=""><li id="84ce" class="lp lq it jz b ka kb ke kf ki lr km ls kq lt ku lu lv lw lx bi translated">用您想要替换的所有字符创建一个新的替换符</li><li id="a5df" class="lp lq it jz b ka ly ke lz ki ma km mb kq mc ku lu lv lw lx bi translated">把它应用到你的弦上</li></ul><p id="70a3" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在这个例子中，它没有为我们节省任何代码行，但是没关系，这是一个简单的例子。但是这给我们设置了更复杂场景，比如:</p><ul class=""><li id="491b" class="lp lq it jz b ka kb ke kf ki lr km ls kq lt ku lu lv lw lx bi translated">需要替换5，10，20个不同的字符</li><li id="f855" class="lp lq it jz b ka ly ke lz ki ma km mb kq mc ku lu lv lw lx bi translated">需要将replacer传递给任何需要执行完全相同的替换的函数</li></ul></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="c11e" class="mk lj it bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">包扎</h1><p id="95ff" class="pw-post-body-paragraph jx jy it jz b ka nh kc kd ke ni kg kh ki nj kk kl km nk ko kp kq nl ks kt ku im bi translated">这篇文章展示了<code class="fe kv kw kx ky b">strings</code>包中Replacer功能的简单用法。使用它，你可以轻松快速地替换单个字符串中的多个字符。希望有帮助！</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h2 id="c6b1" class="li lj it bd ml nm nn dn mp no np dp mt ki nq nr mx km ns nt nb kq nu nv nf nw bi translated">参考</h2><ul class=""><li id="c4bd" class="lp lq it jz b ka nh ke ni ki nx km ny kq nz ku lu lv lw lx bi translated">弦包:<a class="ae kz" href="https://pkg.go.dev/strings#Replacer" rel="noopener ugc nofollow" target="_blank">https://pkg.go.dev/strings</a></li><li id="0f4f" class="lp lq it jz b ka ly ke lz ki ma km mb kq mc ku lu lv lw lx bi translated">replace all:<a class="ae kz" href="https://pkg.go.dev/strings#ReplaceAll" rel="noopener ugc nofollow" target="_blank">https://pkg.go.dev/strings#ReplaceAll</a></li><li id="f6de" class="lp lq it jz b ka ly ke lz ki ma km mb kq mc ku lu lv lw lx bi translated">更换:<a class="ae kz" href="https://pkg.go.dev/strings#ReplaceAll" rel="noopener ugc nofollow" target="_blank">https://pkg.go.dev/strings#Replace</a></li><li id="5da8" class="lp lq it jz b ka ly ke lz ki ma km mb kq mc ku lu lv lw lx bi translated">替换者:<a class="ae kz" href="https://pkg.go.dev/strings#Replacer" rel="noopener ugc nofollow" target="_blank">https://pkg.go.dev/strings#Replacer</a></li></ul></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="0ad9" class="mk lj it bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">分级编码</h1><p id="a425" class="pw-post-body-paragraph jx jy it jz b ka nh kc kd ke ni kg kh ki nj kk kl km nk ko kp kq nl ks kt ku im bi translated">感谢您成为我们社区的一员！更多内容见<a class="ae kz" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>。<br/>跟随:<a class="ae kz" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a>，<a class="ae kz" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">领英</a>，<a class="ae kz" href="https://newsletter.levelup.dev/" rel="noopener ugc nofollow" target="_blank">通迅</a> <br/> <strong class="jz iu">升一级正在转型理工大招聘➡️ </strong> <a class="ae kz" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="jz iu">加入我们的人才集体</strong> </a></p></div></div>    
</body>
</html>