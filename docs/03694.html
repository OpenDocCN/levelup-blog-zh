<html>
<head>
<title>WebVR: Simulating a 100 mph Fastball with A-Frame</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用A帧模拟一个100英里每小时的快速球</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/webvr-simulating-a-100-mph-fastball-with-a-frame-fbad3edaa782?source=collection_archive---------22-----------------------#2020-05-22">https://levelup.gitconnected.com/webvr-simulating-a-100-mph-fastball-with-a-frame-fbad3edaa782?source=collection_archive---------22-----------------------#2020-05-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1630" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过示例学习A-Frame</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1b6f3609ef4fe203410f7d505404e47e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*prqWV2ThgAYJl7txf90KRQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">【https://baseball-simulator.netlify.app/ T4】</figcaption></figure><h1 id="39a8" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">摘要</h1><p id="e1d4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在这篇文章中，我将通过构建一个100英里/小时的快速球模拟，带你通过一个叫做A-Frame 的<a class="ae ky" href="https://aframe.io/" rel="noopener ugc nofollow" target="_blank">网络虚拟现实框架。我不会费神去探究这次经历的每一个细节，但我会强调我发现有教育意义的几个方面。我们将从建造一个基本的棒球场开始。然后，我们将探索从投手丘到本垒板的棒球动画。这篇文章仅仅是为了补充官方文件。强烈建议您在阅读本文之前/之后通读这些文档，以便更全面地了解该框架及其所有特性。</a></p><h1 id="f3e0" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">基元</h1><p id="8af8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在A-Frame中，“基本体”是框架附带的基本形状。例如一个<a class="ae ky" href="https://aframe.io/docs/master/primitives/a-sphere.html" rel="noopener ugc nofollow" target="_blank">球体</a>、<a class="ae ky" href="https://aframe.io/docs/master/primitives/a-cylinder.html" rel="noopener ugc nofollow" target="_blank">圆柱体</a>、<a class="ae ky" href="https://aframe.io/docs/master/primitives/a-plane.html" rel="noopener ugc nofollow" target="_blank">平面</a>、<a class="ae ky" href="https://aframe.io/docs/master/primitives/a-box.html" rel="noopener ugc nofollow" target="_blank">盒子</a>等。利用这些基本形状，我们可以建造几乎任何结构。例如，为了构建这个模拟，我们将只使用两个:球体和平面。球体将用于土墩和棒球，而平面用于其他一切:基地，内场和外场。为了说明，让我们看看球是如何构成的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="5b61" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated"><code class="fe mu mv mw mx b">a-sphere</code>是A形框架附带的组件。它支持许多属性，但是在这种情况下，我们只需要指定<code class="fe mu mv mw mx b">radius</code>、<code class="fe mu mv mw mx b">color</code>和<code class="fe mu mv mw mx b">position</code>。请注意，在A形框架中，所有测量单位均为<strong class="lt iu">米</strong>。在很多情况下，知道测量单位可能不是很重要，但在构建精确的音高模拟时，知道准确的尺寸和距离是至关重要的。</p><h1 id="bc7b" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">右手坐标系</h1><p id="eb5a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">对我来说，在虚拟现实开发中最困难的一个方面是三维思考。x轴和y轴很直观，但z轴证明有点棘手。当我被介绍到“右手坐标系”时，我终于明白了。这是A形框架用来定位物体的系统。只需在脸前伸出右手，用中指指着自己，同时用拇指和食指形成一个“L”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi my"><img src="../Images/3f617764acedc624e2f4222f489a10bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*WKZNAUbOA1DUVvs3Mv2PNw.jpeg"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">右手坐标系</figcaption></figure><p id="f125" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">中指代表z轴、食指、y轴，拇指代表x轴。此外，请注意手指指向的方向。他们所指的方向代表轴上的正值。因此，正的z值会将物体拉向你，而负值会将物体放得离你更远。在球的情况下，我们想从投手丘开始，向上大约7英尺8英寸，或兰迪·约翰逊在投手丘上的高度。从上面的例子中检查球的位置:</p><pre class="kj kk kl km gt mz mx na nb aw nc bi"><span id="1ee1" class="nd la it mx b gy ne nf l ng nh">position="0 2.34 -18.4404"</span></pre><p id="c4c8" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">这个位置值意味着:将球定位在x轴上的0，y轴上的2.34米，并且在z轴上远离本垒板(位于0，0，0)60英尺6英寸或18.4404米。现在我们对基本体和定位有了足够的了解，可以创建一个球，并将其放在站在投手丘上的Randy Johnson的手中。</p><h1 id="c7ab" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">检查员</h1><p id="7dbc" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在这一点上，后退一步，简单地谈谈检查员是有意义的。inspector是A-Frame附带的开发工具。可以用<code class="fe mu mv mw mx b">control + option + i</code>访问。除此之外，检查器允许您切换视角和实体值，以及通过收缩来放大/缩小和右键单击拖动来移动来遍历场景。这是可视化实体在整个场景中的位置并试验不同值的非常有用的方法。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/b69d95c2fa609249b964bc8382f71c42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xdXMH58X3y-Y5CjrPI1yEg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">场地的俯视透视图</figcaption></figure><h1 id="ffd7" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">动画片</h1><p id="a9e2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">下一步是动画球从土墩到本垒板。为了做到这一点，我们想将球的位置从<code class="fe mu mv mw mx b">0 2.34 -18.4404</code>移动到<code class="fe mu mv mw mx b">0 0.9144 0</code>(离家3英尺)。幸运的是，A-Frame有一个动画组件使这变得非常容易:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="9c16" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">请注意，我们只是将position属性设置为一个新值。我们还以毫秒为单位指定持续时间。显然，一个时速100英里的棒球需要大约375毫秒才能到家。</p><h1 id="fe43" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">控制器</h1><p id="0f39" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">接下来，我们需要添加一些控制器到场景中。这将允许我们利用控制器上的触发器来启动投掷动画。我构建了这个模拟来与我的Oculus Quest一起工作，因此，我添加了<a class="ae ky" href="https://aframe.io/docs/master/components/oculus-touch-controls.html" rel="noopener ugc nofollow" target="_blank"> oculus-touch-controls </a>，这是一个带有A-Frame的组件。一旦这些控制器被添加到场景中，当您在耳机中观看体验时，您将实际上能够看到它们。我们也将能够监听它们产生的事件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure><h1 id="2460" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">事件</h1><p id="0e34" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">A-Frame中的事件与任何普通的JS事件没有什么不同。因为我们的组件只是DOM元素，所以我们可以在我们想要关注的实体上使用<code class="fe mu mv mw mx b">addEventListener</code>来设置监听器。在这种情况下，我们希望球监听控制器发出的触发事件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="6348" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">在上面的例子中，我们只是注册了一个新的组件，并将其作为一个属性附加到主hand控制器上。该组件所做的就是为<code class="fe mu mv mw mx b">triggerdown</code>事件添加一个监听器，然后它在球实体上发出一个<code class="fe mu mv mw mx b">throw</code>事件，我给了它一个<code class="fe mu mv mw mx b">ball</code>的<code class="fe mu mv mw mx b">id</code>。最后一步是在<code class="fe mu mv mw mx b">throw</code>上启动动画。</p><pre class="kj kk kl km gt mz mx na nb aw nc bi"><span id="7eb7" class="nd la it mx b gy ne nf l ng nh">animation="property: position; to: 0 0.9144 0; dur: 375; startEvents: throw"</span></pre><p id="0278" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">如您所见，要做到这一点，只需在球的动画属性上添加一个<code class="fe mu mv mw mx b">startEvents</code>定义，并指定<code class="fe mu mv mw mx b">throw</code>的事件！</p><h1 id="4398" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">后续步骤</h1><p id="a597" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在<a class="ae ky" href="https://baseball-simulator.netlify.app/" rel="noopener ugc nofollow" target="_blank">https://baseball-simulator.netlify.app/</a>体验一下。随意追加？如果您想在浏览器中而不是在VR设备上测试抛出，则debug=true to the URL。使用<code class="fe mu mv mw mx b">shift + spacebar</code>在浏览器中进行测试。另外，请随时在https://github.com/bretmorris/baseball-simulator<a class="ae ky" href="https://github.com/bretmorris/baseball-simulator" rel="noopener ugc nofollow" target="_blank">查看代码。很明显，这些代码还没有准备好投入生产，但是希望看到完整的代码可以帮助澄清一些我可能已经忽略或者完全忽略的事情。</a></p></div></div>    
</body>
</html>