<html>
<head>
<title>Python lambda to the rescue</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python lambda拯救世界</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/python-lambda-to-the-rescue-5eb9f30a595a?source=collection_archive---------12-----------------------#2020-04-30">https://levelup.gitconnected.com/python-lambda-to-the-rescue-5eb9f30a595a?source=collection_archive---------12-----------------------#2020-04-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/cd2b77ddceeccfd8f383f761e377d904.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fIosq7ElnqiFJuMj"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@maxcodes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">麦克斯韦·纳尔逊</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="e6a6" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">一点历史</h1><p id="9cc5" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">Python和其他编程语言中的Lambda表达式源于lambda calculus，一种由阿隆佐·邱奇发明的计算模型。阿隆佐·邱奇在20世纪30年代形式化了λ演算T21，一种基于纯抽象的语言。Lambda函数也被称为lambda抽象，直接引用阿隆佐·邱奇最初创造的抽象模型。</p><p id="c562" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">函数式语言直接继承了lambda演算哲学，采用强调抽象、数据转换、组合和纯度(无状态和无副作用)的声明式编程方法。虽然python本质上不是一种函数式编程语言，但它很早就采用了一些函数式概念。1994年1月，语言中增加了<code class="fe me mf mg mh b">map()</code>、<code class="fe me mf mg mh b">filter()</code>、<code class="fe me mf mg mh b">reduce()</code>和<code class="fe me mf mg mh b">lambda</code>运算符。</p><h1 id="e5f2" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">λ函数</h1><p id="8f81" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">Python中的<code class="fe me mf mg mh b">lambda</code>表达式只是一个匿名函数。由于语法的原因，它比常规函数稍微受限一些，但是通过它可以做很多事情。一个<code class="fe me mf mg mh b">lambda</code>函数可以带<strong class="ld ir">任意</strong>个参数，但只能有<strong class="ld ir">一个</strong>表达式。</p><p id="ad73" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">因为<code class="fe me mf mg mh b">lambda</code>是一个表达式，而不是一个语句，所以它可以用在<code class="fe me mf mg mh b">def</code>不能用的地方(例如，在字典文字表达式或函数调用的参数列表中)。因为lambda计算单个表达式而不是运行语句，所以它不适合复杂函数(使用<code class="fe me mf mg mh b">def</code>)</p><p id="5a45" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">首先让我们看看<code class="fe me mf mg mh b">lambda</code>函数的语法，然后我们将在一个简单的例子中使用它。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1ee8" class="mq ke iq mh b gy mr ms l mt mu">lambda arguments: expression</span></pre><p id="d8ce" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在让我们实现第一个使用lambda函数的例子。在这个例子中，我们将使用python的<code class="fe me mf mg mh b">sorted</code>函数。下面是<code class="fe me mf mg mh b">sorted</code>函数的语法:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0df8" class="mq ke iq mh b gy mr ms l mt mu">sorted(iterable, key=None, reverse=False)</span></pre><p id="e366" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">因此，我们将使用lambda函数作为<code class="fe me mf mg mh b">sorted</code>函数中的<code class="fe me mf mg mh b">key</code>。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="e0f0" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">看看我们如何将lambda参数定义为<code class="fe me mf mg mh b">t</code>，将expression定义为<code class="fe me mf mg mh b">t.value</code>。虽然该函数可以单独编写，但这是获得您想要的快速排序函数的一种简单方法。这并不是说常规函数会很冗长，但是通过使用匿名函数，您有一个小小的优势；你没有用额外的函数污染你的局部作用域。该示例的输出是:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5253" class="mq ke iq mh b gy mr ms l mt mu">[Test: 1, Test: 5, Test: 15, Test: 55, Test: 62]</span></pre><h1 id="fded" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">一些漂亮的例子</h1><p id="ab95" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><code class="fe me mf mg mh b">lambda</code>主要用于内置函数<code class="fe me mf mg mh b">map</code>和<code class="fe me mf mg mh b">filter</code>。与<code class="fe me mf mg mh b">lambda</code>一起使用，这些函数提供了紧凑的方式来执行一些伟大的操作，同时避免了对循环的需要。</p><h2 id="b2ca" class="mq ke iq bd kf mx my dn kj mz na dp kn lm nb nc kr lq nd ne kv lu nf ng kz nh bi translated">旁边有地图</h2><p id="5d4b" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在第一个例子中，我们将使用<code class="fe me mf mg mh b">map</code>函数和<code class="fe me mf mg mh b">lambda</code>创建一个范围为<code class="fe me mf mg mh b">0</code>到<code class="fe me mf mg mh b">8</code>的平方数列表。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="fdad" class="mq ke iq mh b gy mr ms l mt mu">&gt;&gt;&gt; list(map(lambda x: x ** 2, range(8)))<br/>[0, 1, 4, 9, 16, 25, 36, 49]</span></pre><p id="39aa" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在第二个例子中，我们将使用<code class="fe me mf mg mh b">map</code>和<code class="fe me mf mg mh b">lambda</code>大写<code class="fe me mf mg mh b">string</code>中的所有单词。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b7e6" class="mq ke iq mh b gy mr ms l mt mu">&gt;&gt;&gt; message = "we are going to capitalize all words in this sentence"<br/>&gt;&gt;&gt; " ".join(list(map(lambda x: x.capitalize(), message.split(" "))))<br/>'We Are Going To Capitalize All Words In This Sentence'</span></pre><h2 id="ae76" class="mq ke iq bd kf mx my dn kj mz na dp kn lm nb nc kr lq nd ne kv lu nf ng kz nh bi translated">与过滤器并排</h2><p id="7417" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在第一个例子中，我们将过滤所有符合条件<code class="fe me mf mg mh b">number%3==0.</code>的数字</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c4c3" class="mq ke iq mh b gy mr ms l mt mu">&gt;&gt;&gt; filter_me = [1, 2, 3, 4, 6,7 ,8, 11, 12, 14, 15, 19, 22, 33, 51, 62, 75]<br/>&gt;&gt;&gt; list(filter(lambda x: x%3==0, filter_me))<br/>[3, 6, 12, 15, 33, 51, 75]</span></pre><p id="af8f" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在第二个例子中，我们将过滤所有包含<code class="fe me mf mg mh b">find</code>和<code class="fe me mf mg mh b">me</code>序列的字符串。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4288" class="mq ke iq mh b gy mr ms l mt mu">&gt;&gt;&gt; import re<br/>&gt;&gt;&gt; filter_me = ["Ok", "maybe this", "find not me", "find me", "test find", "test me", "test find me"]<br/>&gt;&gt;&gt; list(filter(lambda x: re.match("^.*find.*me.*$", x), filter_me))<br/>['find not me', 'find me', 'test find me']</span></pre><h1 id="60a3" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">告诉我这件事</h1><p id="8525" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">至于样式，请注意<code class="fe me mf mg mh b">PEP8</code>表明将lambda赋给变量是一个坏主意。从逻辑上来说，是的。匿名函数的思想就是它就是匿名的。如果你给它一个身份，你应该把它定义为一个普通的函数。如果你想保持简短，它真的不会太长。请注意，以下语句被视为不良风格，仅用于示例目的:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0cb3" class="mq ke iq mh b gy mr ms l mt mu"># Bad style (Do not assign lambda to a variable)<br/>key = lambda spam: spam.value</span></pre><blockquote class="ni nj nk"><p id="ed7a" class="lb lc nl ld b le lz lg lh li ma lk ll nm mb lo lp nn mc ls lt no md lw lx ly ij bi translated">lambda函数唯一有效的用例是作为函数参数使用的匿名函数，并且最好是在它们足够短以适合单行的情况下。(<a class="ae kc" href="https://www.amazon.com/Mastering-Python-beautiful-powerful-features/dp/1785289721" rel="noopener ugc nofollow" target="_blank">精通Python </a>，<strong class="ld ir">瑞克·范·哈特姆</strong>)</p></blockquote><h1 id="8a24" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">结论</h1><p id="cf2a" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">虽然在Python中，lambda函数非常有限，但是有一些使用它们的有趣用例。记住<strong class="ld ir">简单比复杂好。因此，如果你想写简单的代码，lambda函数可以帮你。</strong></p></div></div>    
</body>
</html>