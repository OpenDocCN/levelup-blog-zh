<html>
<head>
<title>Unleash the potential of your unrooted Android phone</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">释放你的无根安卓手机的潜力</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/unleash-the-potential-of-your-unrooted-android-phone-ae835c4af633?source=collection_archive---------1-----------------------#2020-10-11">https://levelup.gitconnected.com/unleash-the-potential-of-your-unrooted-android-phone-ae835c4af633?source=collection_archive---------1-----------------------#2020-10-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/aa8558a9bb7d7b001a66759bd16afcf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tV9I-KdiE0xwheTf"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae kc" href="https://unsplash.com/@geekyshots?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">极客镜头</a>拍摄的照片</figcaption></figure><p id="5a91" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">据估计，全球85%的智能手机用户使用安卓系统。不管你是被这个生态系统的实惠价格、高度可定制的特性所吸引，还是对水果的彻底蔑视，你都很有可能没有探索过你的(非root)Android设备可以做的惊人事情。</p><p id="40a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Android操作系统的核心是建立在Linux内核之上的。Android和其他发行版的一个主要区别是，它没有打包许多Linux中常见的GNU库。因此，大多数应用程序无法在Android中运行。相反，Android运行时(ART)执行从Java编译的dex文件和字节码——我们都太熟悉的play store应用程序。</p><p id="7611" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">找出一种访问Linux外壳的便捷方式是释放手机潜力的关键。令人欣慰的是，终端的大门一直敞开着，今天，我们可以在各种开源项目做出的巨大贡献的基础上再接再厉……进入Termux。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="d390" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">安装Termux</h1><blockquote class="mg"><p id="0441" class="mh mi iq bd mj mk ml mm mn mo mp la dk translated">Termux是一个<strong class="ak"> Android终端模拟器</strong>和Linux环境应用程序，无需启动或设置即可直接工作。一个<strong class="ak">最小基本系统</strong>被自动安装，额外的软件包可以使用软件包管理器获得。</p></blockquote><p id="014c" class="pw-post-body-paragraph kd ke iq kf b kg mq ki kj kk mr km kn ko ms kq kr ks mt ku kv kw mu ky kz la ij bi translated">这就是官方文档<a class="ae kc" href="https://wiki.termux.com/wiki/Main_Page" rel="noopener ugc nofollow" target="_blank">对这个漂亮工具的定义。Termux提供的体验类似于从Alpine base映像创建docker映像时获得的体验——一个最小的轻量级环境。从</a><a class="ae kc" href="https://play.google.com/store/apps/details?id=com.termux" rel="noopener ugc nofollow" target="_blank"> play store </a>安装Termux后，遵循以下简单的步骤，让它为你更努力地工作:</p><figure class="mv mw mx my gt jr"><div class="bz fp l di"><div class="mz na l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">安装Termux和基本依赖项</figcaption></figure><p id="bf65" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，在Termux中可以安装的内容是有限制的。例如，我让<code class="fe nb nc nd ne b">nvm</code>工作的尝试从未成功过(这里是<a class="ae kc" href="https://github.com/nvm-sh/nvm/issues/1645" rel="noopener ugc nofollow" target="_blank">线程，这里是</a>)，这就是为什么我依赖于<code class="fe nb nc nd ne b">nodejs-lts</code>包的原因。安装依赖项可能有点碰运气，但至少根据我的经验，只要稍加调整，就可以让大多数东西正常运行。</p><p id="b65c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个时代，如果你认为Termux bland很无聊，那是情有可原的。毕竟，这是一个没有炫丽色彩的终端，而且它看起来不会增强个人的1337开发者能力。接下来让我们解决这个问题！</p><h1 id="7fe4" class="li lj iq bd lk ll nf ln lo lp ng lr ls lt nh lv lw lx ni lz ma mb nj md me mf bi translated">安装Oh-My-Termux</h1><p id="9c29" class="pw-post-body-paragraph kd ke iq kf b kg nk ki kj kk nl km kn ko nm kq kr ks nn ku kv kw no ky kz la ij bi translated">如果您是从Linux或OSX机器上开发的，那么您很可能在某个时候使用过或看到过有人使用Oh-My-Zsh。这一切的核心是Zsh，它很像Bash，但增加了一些功能，如通过插件和主题进行内置定制(查看<a class="ae kc" href="https://github.com/ohmyzsh/ohmyzsh/wiki/Themes" rel="noopener ugc nofollow" target="_blank">这里</a>的官方主题列表)。为了以最少的努力让事情运转起来，我建议设置Oh-My-Termux。它为您设置了最流行的主题，<a class="ae kc" href="https://github.com/Powerlevel9k/powerlevel9k" rel="noopener ugc nofollow" target="_blank"> Powerlevel9k </a>，并为您安装了必要的电力线字体:</p><figure class="mv mw mx my gt jr"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="21d4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要在Bash或Zsh之间切换您的shell，您可以分别键入<code class="fe nb nc nd ne b">chsh</code>后跟<code class="fe nb nc nd ne b">bash</code>或<code class="fe nb nc nd ne b">zsh</code>，然后重启您的shell。下面是安装Oh-My-Termux后，默认Bash shell与Zsh的对比。在Bash中，我必须键入我想要执行的完整git命令。然而，使用Oh-My Termux，我只需要键入<code class="fe nb nc nd ne b">git a</code>并按下<code class="fe nb nc nd ne b">TAB</code>键，这就为我提供了一个可以使用的匹配git命令列表。下面是他们整容前后的样子:</p><figure class="mv mw mx my gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/3c9c8e8e9ac74871f54a5c6fe91fb6b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r8JorRPR6oqyFAKT968fNg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">(左)普通Bash终端与(右)包含大量有用信息的Zsh终端的对比图</figcaption></figure><p id="1b14" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用Bash，每当我们打开一个shell时，我们想要初始化的任何东西(比如脚本或环境变量)通常都会添加到<code class="fe nb nc nd ne b">~/.bashrc</code>。对于Zsh，同样的概念也适用，但是我们现在看的是<code class="fe nb nc nd ne b">~/.zshrc</code>。这也是Zsh可以根据您的需求进行定制的地方:</p><figure class="mv mw mx my gt jr"><div class="bz fp l di"><div class="mz na l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">~/中的可用自定义。zshrc</figcaption></figure><p id="c551" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，在撰写本文时，Powerlevel9k已被弃用。您可能希望更新您的配置以使用其继任者<a class="ae kc" href="https://github.com/romkatv/powerlevel10k" rel="noopener ugc nofollow" target="_blank"> Powerlevel10k </a>。它提供了一些物质和美学上的增强，比如让插件以非阻塞的方式加载，以及一个新的CLI向导来进一步定制界面。</p><h1 id="ddf8" class="li lj iq bd lk ll nf ln lo lp ng lr ls lt nh lv lw lx ni lz ma mb nj md me mf bi translated">那么我们现在能做什么呢？</h1><p id="89c8" class="pw-post-body-paragraph kd ke iq kf b kg nk ki kj kk nl km kn ko nm kq kr ks nn ku kv kw no ky kz la ij bi translated">用NodeJS设置Termux和Oh-My-Termux理论上允许你承担web开发任务……但是如果你问我的话，我会说这有点难。我盯着6英寸的屏幕不会超过15分钟；用我肥胖的手指敲击软键盘只会加速我的屏幕在<code class="fe nb nc nd ne b">BACKSPACE</code>键周围的退化。但是，嘿，也许视野狭窄是你的特殊能力，或者你是那些维姆大师中的一个，在这种情况下，去争取吧！如果不是为了全面的开发，那么我使用Termux做什么呢？</p><ul class=""><li id="4cc5" class="nq nr iq kf b kg kh kk kl ko ns ks nt kw nu la nv nw nx ny bi translated"><strong class="kf ir">使用它来控制我的Heroku服务</strong>:当我需要它们更可靠地运行时，将项目升级到<code class="fe nb nc nd ne b">Hobby</code>层，然后当我想要它们隐藏时，将它们切换回<code class="fe nb nc nd ne b">Free</code>层&amp;将web dynos缩放到0。最简单的方法是通过<code class="fe nb nc nd ne b">npm i -g heroku</code>在特穆克斯找到Heroku。将下面的脚本放在<code class="fe nb nc nd ne b">~/toggleHeroku.sh</code>中，我们可以使用<code class="fe nb nc nd ne b">~/toggleHeroku.sh start</code>或<code class="fe nb nc nd ne b">~/toggleHeroku.sh stop</code>来启动或停止我们的服务。</li></ul><figure class="mv mw mx my gt jr"><div class="bz fp l di"><div class="mz na l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">用于切换Heroku服务的层级和可见性的脚本</figcaption></figure><ul class=""><li id="9620" class="nq nr iq kf b kg kh kk kl ko ns ks nt kw nu la nv nw nx ny bi translated"><strong class="kf ir">为移动应用运行一个模拟服务器</strong>:在开发移动应用时，拥有一个可以为应用提供模拟响应的后端是一个好主意。这使得前端开发人员可以专注于客户端UI和逻辑，而不必担心服务器就绪或网络不稳定。有什么比在同一部手机上运行模拟服务器更好的方法呢？</li><li id="624b" class="nq nr iq kf b kg nz kk oa ko ob ks oc kw od la nv nw nx ny bi translated"><strong class="kf ir">获得关于WIP项目的意见</strong>:如果你有一个仍在进行中或包含敏感信息的项目，控制其分布将是你的首要任务之一。但是如果你需要别人的意见，但又不想带着你的笔记本电脑到处跑，该怎么办呢？对我来说，一种方法是将项目克隆到Termux中，运行它，然后从我手机的浏览器中查看它。为了说服自己这是可行的，用一个<code class="fe nb nc nd ne b">create-react-app</code>项目来尝试一下:</li></ul><figure class="mv mw mx my gt jr"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="956f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你在平板电脑上，更大的屏幕尺寸为你提供了更多的选择，让你创造出一个明智的开发者体验。你可以为Termux和你的浏览器使用Android的分屏功能，你甚至可以安装<code class="fe nb nc nd ne b">Tmux</code>在同一个Termux屏幕上创建多个会话。但只是为了证明像热模块重载这样的特性仍然有效…</p><figure class="mv mw mx my gt jr gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/02f02031aa16158a05e1c77f2b13fbad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*l9Tnqgqy5R965cVUOqIpHw.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">使用Termux和Firefox为create-react-app项目重新加载热模块</figcaption></figure><h1 id="590d" class="li lj iq bd lk ll nf ln lo lp ng lr ls lt nh lv lw lx ni lz ma mb nj md me mf bi translated">与AnLinux一起更进一步</h1><p id="d164" class="pw-post-body-paragraph kd ke iq kf b kg nk ki kj kk nl km kn ko nm kq kr ks nn ku kv kw no ky kz la ij bi translated">到目前为止，我们所取得的任何成就都可以让你看到你的web项目在手机上的表现。在某种程度上，如果你使用一个提供切换到<code class="fe nb nc nd ne b">Desktop site</code>的浏览器(比如Firefox，Chrome ),你也可以测试桌面上的东西是如何呈现的。然而这并不总是可行的，而且像<code class="fe nb nc nd ne b">:hover</code>这样的鼠标相关事件是不可测试的。</p><p id="1314" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果拥有这种能力对您来说很重要，那么您会很高兴听到AnLinux提供了什么。AnLinux可以在<a class="ae kc" href="https://play.google.com/store/apps/details?id=exa.lnx.a&amp;hl=en_IN" rel="noopener ugc nofollow" target="_blank"> play store这里</a>下载。正如该应用程序的全名所示，它基本上允许你在没有Root权限的情况下在Android上运行Linux。在引擎盖下，它使用了<a class="ae kc" href="https://wiki.termux.com/wiki/PRoot" rel="noopener ugc nofollow" target="_blank"> PRoot </a>，它是:</p><blockquote class="mg"><p id="a1b7" class="mh mi iq bd mj mk ml mm mn mo mp la dk translated">…一个<code class="fe nb nc nd ne b">chroot</code>、<code class="fe nb nc nd ne b">mount --bind</code>和<code class="fe nb nc nd ne b">binfmt_misc</code>的用户空间实现。这意味着用户不需要任何特权或设置来做一些事情，例如使用任意目录作为新的根文件系统，使文件在文件系统层次结构中的其他地方可以访问，或者通过QEMU用户模式透明地执行为另一个CPU架构构建的程序。</p></blockquote><figure class="oh oi oj ok ol jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi og"><img src="../Images/19f5ed0a2a3d7f92866b75dada9fb4f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VggyzlzatAYZ9QWsWDlM5g.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">(左)我们将使用的AnLinux菜单中的特性，(中)Linux发行版的安装和(右)桌面GUI的设置。</figcaption></figure><p id="d519" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本指南中，我们将经历一个Linux发行版的安装过程(在上图中直观地称为<code class="fe nb nc nd ne b">Dashboard</code>)，然后安装一个<code class="fe nb nc nd ne b">Desktop Environment</code>。为什么是两步？安装一个发行版服务器会为您提供一个shell环境，允许您执行与sysadmin相关的操作。可选地，在我们的例子中，我们希望有一个GUI来分析我们的应用程序如何在桌面上响应。因此，我们也需要安装一个桌面环境。</p><p id="1ab6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">1安装Linux发行版(Dashboard) </strong>:到目前为止，我只尝试过使用Ubuntu，强烈建议你将它作为你的主发行版。从AnLinux复制命令，并在Termux中执行它——这应该只需要一两分钟。安装完成后，您会看到在<code class="fe nb nc nd ne b">~/start-ubuntu.sh</code>中创建了一个文件。</p><p id="5872" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">2安装桌面环境</strong>:我强烈推荐Xfce4，因为当我尝试Mate、LXQt或LXDE时，桌面环境没有正确呈现。首先，确保您执行了<code class="fe nb nc nd ne b">~/start-ubuntu.sh</code>，这将激活您的shell中的Ubuntu实例。通过观察你漂亮的Oh-My-Termux界面是如何消失的，你可以确定你在Ubuntu shell中(你可以在以后为Ubuntu实例设置它)。执行从AnLinux复制过来的命令。去喝咖啡——在我被提示选择键盘布局之前，安装花了大约<strong class="kf ir"> 23分钟</strong>。它又继续运行了15分钟，然后提示我设置VNC密码，最后完成了。</p><p id="7422" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此时，Ubuntu实例应该已经安装了TigerVNC服务器。几个VNC命令现在象征性地链接到你的<code class="fe nb nc nd ne b">bin</code>文件夹:</p><ul class=""><li id="96b7" class="nq nr iq kf b kg kh kk kl ko ns ks nt kw nu la nv nw nx ny bi translated"><strong class="kf ir"> vncpasswd </strong>:执行这个来改变你的VNC密码。</li><li id="d44d" class="nq nr iq kf b kg nz kk oa ko ob ks oc kw od la nv nw nx ny bi translated"><strong class="kf ir"> vncserver-stop </strong>:关闭VNC服务器。默认情况下，它将运行<code class="fe nb nc nd ne b">vncserver -kill :1</code>，阻止进一步连接到显示器1。</li><li id="10ee" class="nq nr iq kf b kg nz kk oa ko ob ks oc kw od la nv nw nx ny bi translated">vncserver-start :启动VNC服务器。默认情况下，它将运行<code class="fe nb nc nd ne b">vncserver -geometry 1028x768 -depth 24 -name remote-desktop :1</code>，允许客户端连接通过端口<code class="fe nb nc nd ne b">5901</code>显示1。注意服务器如何以<code class="fe nb nc nd ne b">1028x768</code>的分辨率运行。为了修改它以适合您的客户机的屏幕分辨率，我们需要修改<strong class="kf ir"> vncserver-start </strong>脚本:</li></ul><figure class="mv mw mx my gt jr"><div class="bz fp l di"><div class="mz na l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">修改vncserver-start脚本以匹配客户端屏幕分辨率</figcaption></figure><p id="b3bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过运行<code class="fe nb nc nd ne b">vncserver-stop</code>，然后运行<code class="fe nb nc nd ne b">vncserver-start</code>，重启VNC服务器。</p><h1 id="7281" class="li lj iq bd lk ll nf ln lo lp ng lr ls lt nh lv lw lx ni lz ma mb nj md me mf bi translated">连接VNC浏览器</h1><p id="dc73" class="pw-post-body-paragraph kd ke iq kf b kg nk ki kj kk nl km kn ko nm kq kr ks nn ku kv kw no ky kz la ij bi translated">剩下的工作就是连接一个客户端来查看Ubuntu Xfce4 GUI。您可以使用RealVNC over <code class="fe nb nc nd ne b">http://[phone-lan-ip]:5901</code>等客户端从台式机或笔记本电脑进行连接。然而，假设我们通过这些额外的步骤从我们的手机上看到GUI，从play store下载<a class="ae kc" href="https://play.google.com/store/apps/details?id=com.realvnc.viewer.android" rel="noopener ugc nofollow" target="_blank"> RealVNC </a>，并连接到<code class="fe nb nc nd ne b">127.0.01:5901</code>。出现提示时输入您的VNC密码—您现在应该能够与您的桌面GUI进行交互了！</p><p id="c899" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">出于某种原因，互联网浏览器对我不起作用，直到我通过打开终端并执行<code class="fe nb nc nd ne b">apt install firefox</code>安装了Firefox。根据你的喜好/需求，你可以随意安装chrome或任何其他浏览器。</p><figure class="mv mw mx my gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi om"><img src="../Images/f259c2853bd1abd3dbef0c16fb956726.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dhkVQaMSKGDFgwR-gKzG-g.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Android手机上的VNC浏览器图片，连接到同一部手机上Termux的Ubuntu实例的TigerVNC服务器。</figcaption></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="70fc" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">结论</h1><p id="450d" class="pw-post-body-paragraph kd ke iq kf b kg nk ki kj kk nl km kn ko nm kq kr ks nn ku kv kw no ky kz la ij bi translated">我们探讨了Termux、Oh-My-Termux和AnLinux如何相互补充，将您的Android手机变成开发机器。当您试图安装您需要的依赖项时，由于Termux的设计方式，您可能会偶尔遇到困难；来自PRoot的伪根访问；或者缺乏对ARM架构的支持。然而，它让我们可以用手机做更多的事情，这里的限制不是因为技术挑战，而是因为我们缺乏想象力。</p></div></div>    
</body>
</html>