<html>
<head>
<title>Practical Introduction to Web Scraping in R — NBA Players</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NBA球员网络抓取实用介绍</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/practical-introduction-to-web-scraping-in-r-nba-players-15393a3a0f78?source=collection_archive---------3-----------------------#2022-09-24">https://levelup.gitconnected.com/practical-introduction-to-web-scraping-in-r-nba-players-15393a3a0f78?source=collection_archive---------3-----------------------#2022-09-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6045" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">理解web抓取的基础知识，它在什么时候以及为什么有用，以及如何用R实现它</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a6ca7d07ce86893da007a64858f4926c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mBX4oXTax6c5wPOg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">奥利维尔·科莱在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="0641" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据并不总是以一种简洁的表格形式出现，我们可以很容易地用它来分析和获得洞见。有时，我们可能会发现自己需要从其他来源提取数据，例如互联网。</p><p id="5242" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一些公司甚至使用网络抓取，通过访问大多数人忽略的数据来获得对竞争对手的优势。如果使用得当，网络抓取使我们能够从任何网站获取数据，并将其转换为可用的形式，以补充分析或项目。</p><blockquote class="lv lw lx"><p id="5bb0" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">网络抓取是一种自动从网站提取数据的方法。它省去了手动下载或复制数据的麻烦，而是从头到尾自动完成整个过程。</p></blockquote><p id="6c88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">web抓取的一些有趣的使用案例包括分析客户或产品评论、获取航班或酒店的实时票价，甚至是汇总公开招聘信息。</p><p id="6d5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通用编程语言中有许多现有的包是为了解析HTML文档而构建的。例如，Python中的Beautiful Soup被广泛用于网络抓取。</p><p id="6454" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，在今天的练习中，我们将使用<a class="ae ky" href="https://rvest.tidyverse.org/" rel="noopener ugc nofollow" target="_blank"> rvest </a>，一个R中用于从网页中获取数据的包。此外，我们将学习如何应用网络搜集技术从ESPN <a class="ae ky" href="https://www.espn.com/nba/teams" rel="noopener ugc nofollow" target="_blank">网站</a>获取关于国家篮球协会(NBA)当前球员的信息。</p></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="9580" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">玩家档案</h1><p id="5019" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">执行web抓取时要记住的一件重要事情是检查您打算抓取的网页的一致性。具体来说，我们可以跨多个页面自动抓取的唯一方法是，数据的结构是否存在某种模式。</p><p id="53a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，让我们仔细看看<a class="ae ky" href="https://www.espn.com/nba/team/roster/_/name/bos/boston-celtics" rel="noopener ugc nofollow" target="_blank">波士顿凯尔特人</a>和<a class="ae ky" href="https://www.espn.com/nba/team/roster/_/name/ny/new-york-knicks" rel="noopener ugc nofollow" target="_blank">纽约尼克斯</a>的名册页面。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/c2350a8e398ceca2c4af54d3cd698132.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h1U8wU2mHOtdmmH6_lQEaQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">波士顿凯尔特人队的队员名单。</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/94f2352e16f63b06e1526f4bcdb8576d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p1m56JtRfcN8geZnc6AC3w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">纽约尼克斯队的队员名单。</figcaption></figure><p id="8dc0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您所看到的，两个队都以表格格式设置了他们的花名册，其中包含每个球员的姓名、位置、年龄、身高、体重、大学和年薪等信息。此外，您可能还会注意到URL的结尾根据球队名称的变化:<code class="fe ni nj nk nl b">../bos/boston-celtics</code>代表波士顿凯尔特人队，<code class="fe ni nj nk nl b">../ny/new-york-knicks</code>代表纽约尼克斯队。这个以后会派上用场的。</p><p id="9742" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们了解如何收集每个NBA球队的数据之前，让我们暂时只关注一个球队。一旦我们成功了，我们可以很容易地编写一个for循环来为其他团队重复整个过程。</p><p id="df2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">传统上，为了抓取网页，你最好对HTML和CSS有一些基本的了解，这是构建和设计网页的两种基本技术。</p><p id="25b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">HTML用于创建内容并为网页提供结构。另一方面，CSS用于设计、布局和样式，以使网页看起来更光滑、更美观。</p><p id="c867" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将通过一个名为<a class="ae ky" href="https://chrome.google.com/webstore/detail/selectorgadget/mhjhnkcfbdhnjickkkdbjoemdmbfginb?hl=en" rel="noopener ugc nofollow" target="_blank"> SelectorGadget </a>的Chrome扩展来稍微欺骗一下这个过程，你可以将它添加到你的浏览器中并立即开始使用。它有助于在网页上生成元素的CSS选择器，只需突出显示您感兴趣的元素。</p><p id="792d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我们将突出显示包含波士顿凯尔特人队每个球员的姓名、职位、年龄、身高、体重、大学和工资的元素，并随后将它们存储在各自的变量中。然后，我们将整理它们以创建数据框。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/daeec2e93c2d50cef33c1a92cfc8eb96.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/format:webp/1*MRns1QbfiWenI54gM9l1Rg.png"/></div></figure></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="274d" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">球员常规赛统计</h1><p id="5144" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">让我们更进一步，好吗？</p><p id="b6ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能已经注意到了每个球员名字上的超链接，点击它会把你带到一个单独的网页，里面有每个球员在最近NBA常规赛中的表现。</p><p id="9e75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比如我们来看看<a class="ae ky" href="https://www.espn.com/nba/player/_/id/4065648/jayson-tatum" rel="noopener ugc nofollow" target="_blank">杰森·塔图姆</a>和<a class="ae ky" href="https://www.espn.com/nba/player/_/id/3456/derrick-rose" rel="noopener ugc nofollow" target="_blank">德里克·罗斯</a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/12de25ccbf3ab6db6224bb5cfae012f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cnl3mFZ0rp9sAUAEWI6nOg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">杰森·塔图姆场均26.9分，8.0个篮板，4.4次助攻，在2021-22赛季的效率评分为21.87。</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/51e7919858f0eeaf2145fa7df96c8416.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*srWkmsmGoPEYWkoyoUBM-A.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">德里克·罗斯场均得到12.0分，3.0个篮板，4.0次助攻，在2021-22赛季的NBA赛季中，他的效率为16.93。</figcaption></figure><p id="be86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为本练习的一部分，假设我们希望将这些信息与之前的原始数据框相结合。</p><p id="661c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，我们必须编写一个函数来获取球队花名册上每个球员的赛季统计数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/9cf24b7fd742d4e3f1364a26cc50b028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CQFIYvvvx7XC7kXGLu3AWw.png"/></div></div></figure></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="6057" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">为所有NBA球队实现自动化</h1><p id="4ac3" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">既然我们已经了解了波士顿凯尔特人队的运作过程，我们可以对所有30支NBA球队重复这一过程。</p><p id="4a63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们只需要使用for循环来改变每个团队的URL名称的结尾。整个过程花了我的电脑将近9分钟来完成。还不错。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/4b72c4d725ca7799cc6c57698322afef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k1a72GtAfdj-rvtfE6_AWQ.png"/></div></div></figure><p id="afcd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在一些进一步的数据清理之后，比如将球员身高和体重分别改为厘米和千克(我不是英制的最大粉丝)，数据类型，以及重命名值，我们得到了一个最终的数据框，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/4b7a312a642b1dbe16527e3bdfe6ee34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TMuI55kRsozYWHA_NowY4A.png"/></div></div></figure></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="6cd7" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">额外收获:探索性数据分析</h1><p id="62e6" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">博客文章的这一部分更多的是为了我自己的娱乐，而不是关于网络抓取。实际上，我已经使用了一些基本的数据可视化来从我们准备的关于当前NBA球员的数据中收集见解。</p><p id="6f7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然这不是最突破性的分析，但我还是在下面每个图表的标题中加入了我的评论。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/a3b04af2a77fe300c7c8540a3494a4b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1O7y4MzAP792RaJKcMWvPA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">控卫是最矮的球员，中锋是最高的球员。</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/adab8219e08002b0d370cabd4169a032.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RWxO0KN_ZNgeOhF6bmod_w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">控卫最轻，中锋最重。</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/991bf120d7e18ae5943b35b10ee06200.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8G4k2HPbrGwepramUkOesA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">场均得分与薪资高度正相关。身高和场均篮板负相关。</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/8515d4568cf87cde4d3a8efc8d5ab98e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6d6EapKf_2i45UuP6f4Spg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">平均每场得分越高，球员的薪水越高。</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/bb346b56de538cf0356ae3165ab98fb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JAu0TvttQKzMY9B6QOTcMA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">肯塔基大学和杜克大学是目前为止最受NBA前景的大学。</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/98dad53393d0140032a573fae57446d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7BweBrnnaMQEHszhDM_fSw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">收入最高的前10名球员的年薪总和约为4.38亿美元。这太疯狂了。</figcaption></figure></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><p id="474f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读，我希望您在r中带走了一些关于web抓取基础的新知识。我还鼓励您在我的GitHub <a class="ae ky" href="https://github.com/chongjason914/nba-web-scraping" rel="noopener ugc nofollow" target="_blank">这里</a>看一下这个练习的练习册。它包含了这个项目从头到尾的所有代码。</p><p id="8e44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你从这篇文章中发现了任何价值，并且还不是一个媒体会员，如果你使用下面的链接注册会员，这对我和这个平台上的其他作者来说意义重大。它鼓励我们继续推出像这样的高质量和信息丰富的内容——提前感谢您！</p><div class="oa ob gp gr oc od"><a href="https://chongjason.medium.com/membership" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">通过我的推荐链接-杰森·庄加入媒体</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">阅读杰森·庄的每一个故事(以及媒体上成千上万的其他作家)。您的会员费直接支持…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">chongjason.medium.com</p></div></div><div class="om l"><div class="on l oo op oq om or ks od"/></div></div></a></div></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><p id="3d56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不知道接下来要读什么？这里有一些建议。</p><div class="oa ob gp gr oc od"><a href="https://towardsdatascience.com/10-most-important-sql-commands-every-data-analyst-needs-to-know-f0f568914b98" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">每个数据分析师都需要知道的10个最重要的SQL命令</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">从数据库中查询数据并不复杂</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">towardsdatascience.com</p></div></div><div class="om l"><div class="os l oo op oq om or ks od"/></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://towardsdatascience.com/addressing-the-issue-of-black-boxes-in-machine-learning-f86429acbb2a" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">解决机器学习中的“黑箱”问题</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">在模型预测中创造更多透明度和可解释性的4个必须知道的技术</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">towardsdatascience.com</p></div></div><div class="om l"><div class="ot l oo op oq om or ks od"/></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://towardsdatascience.com/what-does-the-career-progression-look-like-for-a-data-scientist-70bdd27f3fab" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">数据科学家的职业发展是什么样的？</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">理解大公司中初级与高级数据科学家角色的指南</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">towardsdatascience.com</p></div></div><div class="om l"><div class="ou l oo op oq om or ks od"/></div></div></a></div></div></div>    
</body>
</html>