<html>
<head>
<title>You Don’t Have To Use Observables In Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你不必在角度上使用可观测量</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/you-dont-have-to-use-observables-in-angular-4eac6372dd0?source=collection_archive---------2-----------------------#2021-09-01">https://levelup.gitconnected.com/you-dont-have-to-use-observables-in-angular-4eac6372dd0?source=collection_archive---------2-----------------------#2021-09-01</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="b421" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">没人告诉你的可观测量和承诺</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/7faefb87a08d3d768a1705e4e1f264cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6EdSCuXPdUq7TvdhYx5jRA.jpeg"/></div></div></figure><p id="e55b" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在Angular中，你可以用两种不同的方式执行异步动作，Observables和Promises。</p><p id="a183" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">大多数人选择可观察的事物是因为博客和文档中的每个例子都告诉你要这样做。但是为什么呢？承诺有那么糟糕吗？或者有这么好的观察点？</p><p id="df50" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在这篇文章中，我想和你一起探究为什么！为什么和什么时候我们应该使用可观的，什么时候承诺就可以了。</p><p id="7388" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">我们先来对比一下这两者。</p></div><div class="ab cl lr ls hy lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="in io ip iq ir"><h1 id="eaeb" class="ly lz iu bd ma mb mc md me mf mg mh mi ka mj kb mk kd ml ke mm kg mn kh mo mp bi translated">可观察到的与承诺</h1><p id="77d6" class="pw-post-body-paragraph kv kw iu kx b ky mq jv la lb mr jy ld le ms lg lh li mt lk ll lm mu lo lp lq in bi translated">让我们从可观察到的开始。</p><h2 id="5183" class="mv lz iu bd ma mw mx dn me my mz dp mi le na nb mk li nc nd mm lm ne nf mo ng bi translated">看得见的</h2><p id="48ca" class="pw-post-body-paragraph kv kw iu kx b ky mq jv la lb mr jy ld le ms lg lh li mt lk ll lm mu lo lp lq in bi translated">Angular正在引擎盖下使用RxJS。RxJS附带了一组很棒的特性，比如Observables。</p><p id="fdb1" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">与承诺相比，可观察对象可以执行异步和同步操作。承诺只能执行异步操作。</p><p id="9d40" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">当可观测量被创建时，它什么也不做，直到一段代码决定订阅它。你可以取消订阅Observables，或者当错误发生时，它会自动退订。</p><p id="7e32" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">可观测量处理一串值。它在稍后的时间点更新得非常快。</p><p id="e53f" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><strong class="kx iv">可观察到的行为</strong></p><ul class=""><li id="f78f" class="nh ni iu kx b ky kz lb lc le nj li nk lm nl lq nm nn no np bi translated">多重值</li><li id="73a1" class="nh ni iu kx b ky nq lb nr le ns li nt lm nu lq nm nn no np bi translated">可以取消</li><li id="f819" class="nh ni iu kx b ky nq lb nr le ns li nt lm nu lq nm nn no np bi translated">非常适合实时信息</li><li id="0b74" class="nh ni iu kx b ky nq lb nr le ns li nt lm nu lq nm nn no np bi translated">可以从多个地方订阅</li><li id="2586" class="nh ni iu kx b ky nq lb nr le ns li nt lm nu lq nm nn no np bi translated">错误自动退订</li><li id="2692" class="nh ni iu kx b ky nq lb nr le ns li nt lm nu lq nm nn no np bi translated">可观测量是说明性的。它们只有在订阅了某个内容时才会执行。</li><li id="469f" class="nh ni iu kx b ky nq lb nr le ns li nt lm nu lq nm nn no np bi translated">有一个内置的机制来执行数据转换(map、forEach、filter、reduce、retry和retryWhen操作符)</li><li id="cf12" class="nh ni iu kx b ky nq lb nr le ns li nt lm nu lq nm nn no np bi translated">可以是异步的，也可以是同步的</li></ul><h2 id="a6db" class="mv lz iu bd ma mw mx dn me my mz dp mi le na nb mk li nc nd mm lm ne nf mo ng bi translated">承诺</h2><p id="ad0d" class="pw-post-body-paragraph kv kw iu kx b ky mq jv la lb mr jy ld le ms lg lh li mt lk ll lm mu lo lp lq in bi translated">承诺是自ES2015 (ES6)以来引入的一个通用JavaScript概念。它非常适合执行异步操作。它没有Observables这样的订户。</p><p id="166b" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">承诺不能像可观察的那样被取消。可以解决，也可以拒绝，不多也不少。它可以处理单个值，而不是一串值。</p><p id="bc20" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">承诺是在创造时履行的，而不是像可观察物那样的订阅。</p><p id="0fb9" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><strong class="kx iv">承诺行为</strong></p><ul class=""><li id="2ccf" class="nh ni iu kx b ky kz lb lc le nj li nk lm nl lq nm nn no np bi translated">单一值</li><li id="bfee" class="nh ni iu kx b ky nq lb nr le ns li nt lm nu lq nm nn no np bi translated">不能取消</li><li id="dbc5" class="nh ni iu kx b ky nq lb nr le ns li nt lm nu lq nm nn no np bi translated">非常适合单次信息</li><li id="79bf" class="nh ni iu kx b ky nq lb nr le ns li nt lm nu lq nm nn no np bi translated">不能重复使用或分发信息</li><li id="0743" class="nh ni iu kx b ky nq lb nr le ns li nt lm nu lq nm nn no np bi translated">承诺是在创世时实现的</li><li id="e606" class="nh ni iu kx b ky nq lb nr le ns li nt lm nu lq nm nn no np bi translated">总是异步的</li></ul></div><div class="ab cl lr ls hy lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="in io ip iq ir"><blockquote class="nv nw nx"><p id="a8d6" class="kv kw ny kx b ky kz jv la lb lc jy ld nz lf lg lh oa lj lk ll ob ln lo lp lq in bi translated">如果你想了解更多关于承诺的信息，查看<a class="ae oc" href="https://hasnode.byrayray.dev/how-promises-actually-work-in-javascript-1c80b1af7193" rel="noopener ugc nofollow" target="_blank">我之前写的一篇更详细的文章</a></p></blockquote></div><div class="ab cl lr ls hy lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="in io ip iq ir"><h1 id="12f6" class="ly lz iu bd ma mb mc md me mf mg mh mi ka mj kb mk kd ml ke mm kg mn kh mo mp bi translated">何时使用承诺或可观察的？</h1><p id="6449" class="pw-post-body-paragraph kv kw iu kx b ky mq jv la lb mr jy ld le ms lg lh li mt lk ll lm mu lo lp lq in bi translated">正如我们前面看到的，承诺和可观察到的之间最显著的区别是处理单个值和一系列值。</p><h2 id="5c3c" class="mv lz iu bd ma mw mx dn me my mz dp mi le na nb mk li nc nd mm lm ne nf mo ng bi translated">使用可观察的</h2><p id="5ae7" class="pw-post-body-paragraph kv kw iu kx b ky mq jv la lb mr jy ld le ms lg lh li mt lk ll lm mu lo lp lq in bi translated">对于数据在其生命周期内发生变化的情况，可观察值是理想的。</p><p id="e106" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">要使用的情况</p><ul class=""><li id="c6d2" class="nh ni iu kx b ky kz lb lc le nj li nk lm nl lq nm nn no np bi translated">例如，来自WebSocket的实时数据。想想仪表盘、聊天信息、通知、视频字幕、声音可视化。</li><li id="f894" class="nh ni iu kx b ky nq lb nr le ns li nt lm nu lq nm nn no np bi translated">或者用户经常执行的动作。例如，想想可折叠的菜单，黑暗和光明的模式。</li></ul><p id="438e" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这些情况要求数据在短时间内更新，至少在订阅的生命周期内更新。</p><h2 id="83b3" class="mv lz iu bd ma mw mx dn me my mz dp mi le na nb mk li nc nd mm lm ne nf mo ng bi translated">使用承诺</h2><p id="57be" class="pw-post-body-paragraph kv kw iu kx b ky mq jv la lb mr jy ld le ms lg lh li mt lk ll lm mu lo lp lq in bi translated">因为承诺可以处理单个值，所以有很多情况可以使用它。</p><p id="8fad" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">要使用的情况</p><ul class=""><li id="9cec" class="nh ni iu kx b ky kz lb lc le nj li nk lm nl lq nm nn no np bi translated">表单提交:创建、编辑和删除数据实体不需要不断更新的数据流。表单数据被发送到API成功与否。</li><li id="aabf" class="nh ni iu kx b ky nq lb nr le ns li nt lm nu lq nm nn no np bi translated">API对不实时变化的数据的请求:显示概览页面或详细页面的大量数据</li></ul><p id="33f9" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">所有这些情况都不需要数据经常改变。数据由API调用收集、显示和处理。就这么简单。</p></div><div class="ab cl lr ls hy lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="in io ip iq ir"><h1 id="b062" class="ly lz iu bd ma mb mc md me mf mg mh mi ka mj kb mk kd ml ke mm kg mn kh mo mp bi translated">为什么每个人都用Observables做任何事情？</h1><p id="d3e6" class="pw-post-body-paragraph kv kw iu kx b ky mq jv la lb mr jy ld le ms lg lh li mt lk ll lm mu lo lp lq in bi translated">这给我提出了一个问题。"为什么每个人都用Observables做任何事情？"</p><p id="8705" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">是的，这个话题我自己也有罪！我用一个可观察的。需要吗？不要！</p><p id="1310" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">保持订阅开放，而数据在可观察的生命周期内没有变化，这不是正确使用浏览器的能力。除此之外，大多数开发者(包括我自己)经常会忘记取消订阅他们的Observable。</p><p id="4bab" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">我的经验主要是:"<em class="ny">如果你不需要它，就不要包含或使用它！</em></p><p id="f8e6" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">让我们不要浪费我们的资源，而是让每样东西都达到它的目的。</p></div><div class="ab cl lr ls hy lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="in io ip iq ir"><h1 id="9f5f" class="ly lz iu bd ma mb mc md me mf mg mh mi ka mj kb mk kd ml ke mm kg mn kh mo mp bi translated">总结</h1><p id="9087" class="pw-post-body-paragraph kv kw iu kx b ky mq jv la lb mr jy ld le ms lg lh li mt lk ll lm mu lo lp lq in bi translated">好吧，大家都简单点。</p><blockquote class="od"><p id="1e02" class="oe of iu bd og oh oi oj ok ol om lq dk translated">对实时变化或在其生命周期内更频繁变化的数据使用可观测值。不要浪费资源！如果数据在一个组件的生命周期内没有改变，就使用承诺！</p></blockquote></div><div class="ab cl lr ls hy lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="in io ip iq ir"><p id="25a2" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><a class="ae oc" href="https://blog.byrayray.dev/subscribe" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iv">通过电子邮件获取我的文章点击这里</strong> </a> <strong class="kx iv"> | </strong> <a class="ae oc" href="https://blog.byrayray.dev/membership" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iv">购买5美元中等会员资格</strong> </a></p></div><div class="ab cl lr ls hy lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="in io ip iq ir"><h1 id="8404" class="ly lz iu bd ma mb mc md me mf mg mh mi ka mj kb mk kd ml ke mm kg mn kh mo mp bi translated">谢谢！</h1><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj on"><img src="../Images/a3f6aefd6b24bb02460d5a7ce468835f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Staf1ivDUV4iFxkA.png"/></div></div></figure><p id="2815" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">我希望你在读完这个故事后学到了新的东西，或者受到了启发去创造新的东西！如果我给你留下了问题或一些要说的话作为回应，向下滚动并给我键入一条消息。想保密的话请在Twitter @ DevByRayRay<em class="ny">给我发个</em> <a class="ae oc" href="https://twitter.com/@devbyrayray" rel="noopener ugc nofollow" target="_blank"> <em class="ny"> DM。我的DM永远是开放的😁</em></a></p></div></div>    
</body>
</html>