<html>
<head>
<title>Running your first Docker container in WSL 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在WSL 2中运行您的第一个Docker容器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/running-your-first-docker-container-in-wsl-2-22c71b24038?source=collection_archive---------11-----------------------#2020-07-12">https://levelup.gitconnected.com/running-your-first-docker-container-in-wsl-2-22c71b24038?source=collection_archive---------11-----------------------#2020-07-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b8b643f9715dd1cc49f3437d561a3297.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p0tclXfapso7-DNNIvuKOg.png"/></div></div></figure><p id="eeea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是第2部分，我将指导您如何在WSL 2中创建和构建您的第一个Docker容器。如果你还没有安装Docker和WSL 2，请浏览我之前的博客<a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/i-ran-a-docker-container-inside-windows-subsystem-for-linux-fce0b6e28c08">这里</a>。</p><p id="3326" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">前面我们学习了如何安装WSL 2和docker，但是掌握如何在docker中构建应用程序的基础知识是很重要的</p><p id="276a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，创建Docker容器有两种方法:</p><ol class=""><li id="b1db" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">我们创建我们的项目，然后通过添加Dockerfile来“Dockerize”应用程序。</li><li id="673a" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">在第二种方法中，我们首先使用一个标准的Docker容器，然后在容器内部创建应用程序。</li></ol><p id="dc75" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在今天的教程中，我将向您介绍在容器中直接创建应用程序的步骤。现在，假设我想创建一个Python应用程序，我需要一个已经安装了Python的容器。</p><p id="fde2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你在理解下面的步骤时遇到任何问题，你可以去这个博客的知识库<a class="ae kw" href="https://github.com/madhuresh97/pythonDocker" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="0588" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们今天将运行一个简单的应用程序，以便您熟悉Docker的工作方式，然后您可以继续运行任何大型应用程序。</p><p id="fdbb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本教程的目的是创建一个在控制台中显示句子的Python程序。这个程序必须通过docker文件启动。</p><p id="3ac5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你会发现，一旦你理解了这个过程，它并不复杂。</p><p id="1494" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们必须创建一个项目文件夹，其中主要包含两个文件:</p><ol class=""><li id="4a51" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">main.py</li><li id="b455" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">Dockerfile文件</li></ol><figure class="lm ln lo lp gt jr gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/012b5db637cbe2533c2246e33abf97a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*yWzaF7KAxsJJrwTAkVEAIw.png"/></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">创建的两个文件的屏幕截图</figcaption></figure><blockquote class="lu lv lw"><p id="42da" class="jy jz lx ka b kb kc kd ke kf kg kh ki ly kk kl km lz ko kp kq ma ks kt ku kv ij bi translated">注意:“Dockerfile”没有任何扩展名，重要的是，该文件的名称必须与Docker engine所提到的名称完全相同，以获取要构建的映像的依赖关系。</p></blockquote><p id="7c21" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我在main.py中写了一个最简单的语句</p><pre class="lm ln lo lp gt mb mc md me aw mf bi"><span id="147f" class="mg mh iq mc b gy mi mj l mk ml">print("Hello world from Docker!")</span></pre><p id="b289" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将在控制台上打印，但不使用安装在操作系统中的python，而是使用安装在Docker容器中的python。</p><p id="43e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们的目标是发布Python代码。</p><p id="42c4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为此，我们的Docker必须包含启动Python所需的所有依赖项。</p><p id="8832" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建Docker文件的第一步是访问DockerHub网站。这个网站包含了许多预先设计好的图像来节省你的时间(例如:所有用于linux或代码语言的图像)。</p><p id="714c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们需要设置Docker容器，在Docker文件中为其编写指令。</p><p id="f356" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，我们从docker hub(托管所有官方Docker图像的在线市场)获取最新的python docker图像。为了从Docker hub获取最新的图像，我们需要在Docker文件中声明以下内容。</p><pre class="lm ln lo lp gt mb mc md me aw mf bi"><span id="db1d" class="mg mh iq mc b gy mi mj l mk ml">FROM python:latest<br/></span><span id="23ac" class="mg mh iq mc b gy mm mj l mk ml">COPY main.py /</span><span id="e5d4" class="mg mh iq mc b gy mm mj l mk ml"><br/>CMD [ "python", "./main.py" ]</span></pre><p id="753c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以让我解释一下docker文件中的3行代码</p><p id="85e2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里，我们使用一个基本映像启动Dockerfile文件。关键字是“FROM ”,然后是您想要从Docker Hub中提取的图像名称。在我们的例子中，我们想要导入python图像。所以我们写‘python’作为图像名，而‘latest’是版本的标签。</p><p id="462c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们需要将我们的python文件复制到我们刚刚提取的图像中。我们使用关键字“COPY”来完成这项工作，后跟我们想要复制的文件的名称。第二个参数“/”是将文件放在图像上的路径。这个“/”表示我们将把文件复制到映像的根目录(Docker容器)。</p><p id="0e2a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，我们定义了运行映像时要启动的命令。我们使用的关键字是“CMD”。该命令将执行“python。/main.py "。</p><p id="e50f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">总之，我们定义了Docker容器要遵循的步骤。</p><h1 id="7ac7" class="mn mh iq bd mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj bi translated">最后步骤:</h1><p id="6ff2" class="pw-post-body-paragraph jy jz iq ka b kb nk kd ke kf nl kh ki kj nm kl km kn nn kp kq kr no kt ku kv ij bi translated">一旦您的代码准备好了，docker文件也写好了，您所要做的就是创建您的映像来包含您的应用程序。</p><pre class="lm ln lo lp gt mb mc md me aw mf bi"><span id="0daa" class="mg mh iq mc b gy mi mj l mk ml">docker build -t python-test .</span></pre><p id="a365" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">'-t '选项允许您定义图像的名称。在我们的例子中，我们选择了“python-test ”,但是您可以放置您想要的内容。</p><p id="a4ab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，映像已经创建好了，代码可以开始运行了。我们将使用docker run命令。</p><pre class="lm ln lo lp gt mb mc md me aw mf bi"><span id="fadf" class="mg mh iq mc b gy mi mj l mk ml"> docker run python-test</span></pre><p id="47df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您需要在“docker run”命令后输入图像的名称。</p><p id="c361" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就这样，就这样！您通常会看到“Docker的Hello world！”显示在您的终端上。😁</p><p id="0ede" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">至此，我们结束了2部分系列教程，您可以开始使用WSL 2中的Docker容器。希望你现在对我们如何使用Docker容器有一个基本的概念。</p></div></div>    
</body>
</html>