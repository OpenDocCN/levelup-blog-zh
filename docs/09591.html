<html>
<head>
<title>How to Program a Two Button Step Menu for Arduino Projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为Arduino项目设计两个按钮的步骤菜单</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-program-a-two-button-step-menu-for-arduino-projects-ab7305a16492?source=collection_archive---------11-----------------------#2021-08-24">https://levelup.gitconnected.com/how-to-program-a-two-button-step-menu-for-arduino-projects-ab7305a16492?source=collection_archive---------11-----------------------#2021-08-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1d43" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">只需轻按一个按钮，即可轻松记录任何重复发生的事件</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7909d3f4e507778139abbc622e8ec371.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uiCWUcgJs-AzrPPT3zzcFA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://medium.com/@the_tech_maker" rel="noopener">作者</a>拍摄</figcaption></figure><p id="5475" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我有很多经常需要更换电池或给电池充电的设备和小配件。为了跟踪电池寿命，我开始在一张纸上写下日期和时间，大多数时候我会忘记或找不到这张纸。然后我试着在电脑上用txt文件记录时间，但是我也忘记了。</p><p id="3841" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以我决定用一个ESP32构建一个数据记录器，用Arduino IDE和一个小TFT显示器编程。我的想法是在我的桌子上放一个小装置，当更换电池时，我可以按下按钮。<br/>然后，日志记录器使用Wifi连接到我的网络服务器，并将日志事件的日期和时间写入一个. txt文件。这让我可以完整地统计我的小工具的电池寿命，而不用手动记录任何东西</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="f187" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">我需要多少个按钮？</h1><p id="1cde" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">我开始记录三种电池寿命，一种是我的电脑鼠标，一种是屋外的气象站，一种是客厅里的时钟。首先，我评估了我是否需要两个或三个按钮来方便地浏览我的菜单，以及如果我将来想登录更多的话，什么是必要的？</p><p id="85ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想出了使用多步菜单的想法，一个按钮一步一步通过三个要记录的电池，另一个按钮进行记录。是的，还有第四个动作:进入睡眠模式，以保存能量，使记录器方便和移动，并由狮子电池供电。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="3f6a" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">带2个按钮的记录器</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/4a652756d64c3430aecc8bd3a61e0413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YpdHqYfjamQR8rzlvFnSIw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://medium.com/@the_tech_maker" rel="noopener">作者</a></figcaption></figure><p id="eded" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在正常模式下，记录器显示来自时间服务器的日期和时间，如果您按下步进按钮，它会显示第一个记录选项，再按下一个，依此类推。过了一会儿，它应该会再次显示日期和时间。</p><p id="f9d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面你会发现2个按钮(步骤按钮和执行按钮)的样本代码编程3个菜单项。</p><ul class=""><li id="543d" class="mx my iq ky b kz la lc ld lf mz lj na ln nb lr nc nd ne nf bi translated">首先，我们定义一个名为“menuIdx”的变量，它最初被设置为-1，这意味着没有菜单被选中。</li><li id="3d09" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">当按下“步骤”按钮时，“menuIdx”设置为0，我们开始一个while循环，5秒钟后有一个中断条件。</li><li id="8e34" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">在循环中，我们检查“步骤”按钮和“执行”按钮。</li><li id="5fb9" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">通过步进按钮，我们增加了“menuIdx”。</li><li id="be89" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">使用Execute按钮，我们调用执行当前菜单项代码的函数，并退出循环。</li></ul><p id="e425" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了在显示器上或通过串行输出显示所选菜单，有一个包含菜单标题的文本数组“menuText”。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">菜单代码两个(或三个)按钮步骤菜单，用于Arduino项目</figcaption></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="eec2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个例子中，我们只需要两个按钮，<strong class="ky ir">,如果我们有更多的菜单项或者想要浏览一个大的项目列表，我们也可以这样做。</strong> <br/>你可能已经注意到了，这里有注释代码。如果您注释掉这些行，您可以添加第三个按钮来退出。<br/>这样我们就可以上下浏览我们的菜单项。</p><p id="e58d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望您喜欢这个代码，并可以将其用于您自己的Maker项目。<br/>快乐制造！</p></div></div>    
</body>
</html>