<html>
<head>
<title>When, why, and how to use React Context</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">何时、为何以及如何使用React上下文</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/when-why-and-how-to-use-react-context-2f9832a3ebc4?source=collection_archive---------7-----------------------#2021-10-14">https://levelup.gitconnected.com/when-why-and-how-to-use-react-context-2f9832a3ebc4?source=collection_archive---------7-----------------------#2021-10-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8125" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">React中的上下文是什么？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/aedf303083713a012c8d26767e05140b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1rn4fxsw5otNZ2p4xRTF2w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者:FAM</figcaption></figure><h1 id="1295" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">什么是反应上下文？</h1><blockquote class="lq"><p id="d404" class="lr ls it bd lt lu lv lw lx ly lz ma dk translated">“上下文提供了一种通过组件树传递数据的方式，而不必在每一级手动向下传递属性。”—做出反应</p></blockquote><h2 id="a70b" class="mb kz it bd la mc md dn le me mf dp li mg mh mi lk mj mk ml lm mm mn mo lo mp bi translated">没有反应上下文…</h2><p id="8fbb" class="pw-post-body-paragraph mq mr it ms b mt mu ju mv mw mx jx my mg mz na nb mj nc nd ne mm nf ng nh ma im bi translated">当您需要告诉一个子组件由主体和根组件通知的状态变化时，我们将状态从一个组件传递到另一个组件，直到到达子组件。我们需要通知它这一变化。</p><ul class=""><li id="dcf3" class="ni nj it ms b mt nk mw nl mg nm mj nn mm no ma np nq nr ns bi translated"><strong class="ms iu">这个的问题:</strong></li></ul><p id="17cd" class="pw-post-body-paragraph mq mr it ms b mt nk ju mv mw nl jx my mg nt na nb mj nu nd ne mm nv ng nh ma im bi translated">在某些时候，当我们从一个组件传递到另一个组件时，等等。我们有一种现象叫做道具训练。我们在改变状态的组件和需要知道的组件之间使用的组件本身不使用道具。他们只是传递它，直到它到达我们想要通知的子组件。</p><p id="5933" class="pw-post-body-paragraph mq mr it ms b mt nk ju mv mw nl jx my mg nt na nb mj nu nd ne mm nv ng nh ma im bi translated">这些部件最终就像一座桥梁，通过React props传递数据。</p><h2 id="097a" class="mb kz it bd la mc nw dn le me nx dp li mg ny mi lk mj nz ml lm mm oa mo lo mp bi translated">使用React上下文挂钩…</h2><p id="f53b" class="pw-post-body-paragraph mq mr it ms b mt mu ju mv mw mx jx my mg mz na nb mj nc nd ne mm nf ng nh ma im bi translated">Context在React中的工作是在所有应用程序组件之间共享数据或应用程序状态。这意味着可以从任何组件访问道具。因此，不需要通过其他组件将它发送到我们的目标组件。更少的代码，更少的调试麻烦，以及更多的代码可见性。</p></div><div class="ab cl ob oc hx od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="im in io ip iq"><h1 id="f76c" class="ky kz it bd la lb oi ld le lf oj lh li jz ok ka lk kc ol kd lm kf om kg lo lp bi translated">何时使用React上下文</h1><p id="084f" class="pw-post-body-paragraph mq mr it ms b mt mu ju mv mw mx jx my mg mz na nb mj nc nd ne mm nf ng nh ma im bi translated">上下文旨在共享可被视为整个应用程序“全局”的数据。一个例子是<strong class="ms iu"> <em class="on">认证用户</em> </strong>，一个<strong class="ms iu"> <em class="on">主题</em> </strong>，或者<strong class="ms iu"> <em class="on">用户偏好</em> </strong>。</p><p id="eca8" class="pw-post-body-paragraph mq mr it ms b mt nk ju mv mw nl jx my mg nt na nb mj nu nd ne mm nv ng nh ma im bi translated">我已经在构建黑暗模式切换的实践指南中使用了上下文。如果您对我如何用React上下文实现这一点感兴趣，这里是:</p><div class="oo op gp gr oq or"><a href="https://famzil.medium.com/dark-mode-in-react-533faaee3c6e" rel="noopener follow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd iu gy z fp ow fr fs ox fu fw is bi translated">React中的黑暗模式</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">如何在react JS中制作黑暗主题？</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">famzil.medium.com</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf ks or"/></div></div></a></div><p id="1595" class="pw-post-body-paragraph mq mr it ms b mt nk ju mv mw nl jx my mg nt na nb mj nu nd ne mm nv ng nh ma im bi translated"><strong class="ms iu">什么时候用语境好？标志:</strong></p><ul class=""><li id="9ac0" class="ni nj it ms b mt nk mw nl mg nm mj nn mm no ma np nq nr ns bi translated">你想与不同嵌套层次的许多组件共享数据。(就像一个主题，例如，当您从白色变为黑色时，所有组件都需要切换它们的颜色、图标等等)</li><li id="0f5a" class="ni nj it ms b mt pg mw ph mg pi mj pj mm pk ma np nq nr ns bi translated">当同一个道具(数据)作为中间物通过几个组件传递时:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pl pm l"/></div></figure><ul class=""><li id="e525" class="ni nj it ms b mt nk mw nl mg nm mj nn mm no ma np nq nr ns bi translated">当状态被许多组件更改时，在这种情况下，每次更改都要手动将新数据传递给其他组件，这很复杂。将它们连接到同一个全局状态(一个真实的来源)会使代码更干净，更容易维护和调试。</li></ul><blockquote class="pn po pp"><p id="6b98" class="mq mr on ms b mt nk ju mv mw nl jx my pq nt na nb pr nu nd ne ps nv ng nh ma im bi translated"><a class="ae pt" href="https://reactjs.org/docs/context.html#before-you-use-context" rel="noopener ugc nofollow" target="_blank">来源</a></p></blockquote></div><div class="ab cl ob oc hx od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="im in io ip iq"><h1 id="38dd" class="ky kz it bd la lb oi ld le lf oj lh li jz ok ka lk kc ol kd lm kf om kg lo lp bi translated">如何使用React上下文？</h1><ul class=""><li id="67ed" class="ni nj it ms b mt mu mw mx mg pu mj pv mm pw ma np nq nr ns bi translated"><code class="fe px py pz qa b">createContext()</code> API</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pl pm l"/></div></figure><ul class=""><li id="4664" class="ni nj it ms b mt nk mw nl mg nm mj nn mm no ma np nq nr ns bi translated">将应用程序的主要组件包装在上下文中。<code class="fe px py pz qa b">Provider</code>关键字是必不可少的。它表明这是我们道具和状态的全球供应商。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pl pm l"/></div></figure><p id="48c2" class="pw-post-body-paragraph mq mr it ms b mt nk ju mv mw nl jx my mg nt na nb mj nu nd ne mm nv ng nh ma im bi translated">状态、道具数据在<code class="fe px py pz qa b">value</code>属性中传递。我可以只发送<code class="fe px py pz qa b">myTitle</code>道具，但是我想展示我们可以为多个道具传入字符串和对象。</p><ul class=""><li id="92a5" class="ni nj it ms b mt nk mw nl mg nm mj nn mm no ma np nq nr ns bi translated">访问共享状态和属性:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pl pm l"/></div></figure><p id="b8e8" class="pw-post-body-paragraph mq mr it ms b mt nk ju mv mw nl jx my mg nt na nb mj nu nd ne mm nv ng nh ma im bi translated">注意，我们这次使用了<code class="fe px py pz qa b">useContext()</code>钩子来访问道具。这个钩子需要我们到目前为止创建的上下文来获取共享数据。</p></div><div class="ab cl ob oc hx od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="im in io ip iq"><h1 id="3a6a" class="ky kz it bd la lb oi ld le lf oj lh li jz ok ka lk kc ol kd lm kf om kg lo lp bi translated">主题示例</h1><p id="f8a6" class="pw-post-body-paragraph mq mr it ms b mt mu ju mv mw mx jx my mg mz na nb mj nc nd ne mm nf ng nh ma im bi translated">如果你读过关于黑暗模式的文章，你可能已经注意到我用了<code class="fe px py pz qa b">MyContext.Consumer</code>。</p><p id="b439" class="pw-post-body-paragraph mq mr it ms b mt nk ju mv mw nl jx my mg nt na nb mj nu nd ne mm nv ng nh ma im bi translated">这是因为，在每次按钮切换之后，我需要更新上下文。该动作由组件树中某处的嵌套组件(本例中的ToggleDark组件)触发。在这种情况下，您可以通过上下文向下传递一个函数，以允许使用者更新上下文。</p><p id="5ded" class="pw-post-body-paragraph mq mr it ms b mt nk ju mv mw nl jx my mg nt na nb mj nu nd ne mm nv ng nh ma im bi translated">黑暗主题示例中传递的函数是<code class="fe px py pz qa b">changeTheme</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pl pm l"/></div></figure></div><div class="ab cl ob oc hx od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="im in io ip iq"><p id="2466" class="pw-post-body-paragraph mq mr it ms b mt nk ju mv mw nl jx my mg nt na nb mj nu nd ne mm nv ng nh ma im bi translated">如果你喜欢这篇文章，并希望我介绍其他的React挂钩，请在评论中告诉我👇</p><div class="oo op gp gr oq or"><a href="https://famzil.medium.com/subscribe" rel="noopener follow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd iu gy z fp ow fr fs ox fu fw is bi translated">如果你喜欢看我的文章...♥️</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">如果你喜欢看我的文章...♥️，当我的文章发表时，欢迎你第一个得到通知…</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">famzil.medium.com</p></div></div><div class="pa l"><div class="qb l pc pd pe pa pf ks or"/></div></div></a></div><blockquote class="lq"><p id="aa96" class="lr ls it bd lt lu qc qd qe qf qg ma dk translated">谢谢你，❤</p></blockquote><p id="65e3" class="pw-post-body-paragraph mq mr it ms b mt qh ju mv mw qi jx my mg qj na nb mj qk nd ne mm ql ng nh ma im bi translated">如果你有兴趣成为付费会员，你可以使用我的推荐链接。下次见</p><p id="e567" class="pw-post-body-paragraph mq mr it ms b mt nk ju mv mw nl jx my mg nt na nb mj nu nd ne mm nv ng nh ma im bi translated">亲爱的读者，感谢你在我生命中的存在。</p><p id="0d8c" class="pw-post-body-paragraph mq mr it ms b mt nk ju mv mw nl jx my mg nt na nb mj nu nd ne mm nv ng nh ma im bi translated"><strong class="ms iu">让我们在</strong> <a class="ae pt" href="https://medium.com/@famzil/" rel="noopener"> <strong class="ms iu">中</strong></a><strong class="ms iu"/><a class="ae pt" href="https://www.linkedin.com/in/fatima-amzil-9031ba95/" rel="noopener ugc nofollow" target="_blank"><strong class="ms iu">Linkedin</strong></a><strong class="ms iu"/><a class="ae pt" href="https://www.facebook.com/The-Front-End-World" rel="noopener ugc nofollow" target="_blank"><strong class="ms iu">脸书</strong></a><strong class="ms iu"/><a class="ae pt" href="https://www.instagram.com/the_frontend_world/" rel="noopener ugc nofollow" target="_blank"><strong class="ms iu">insta gram</strong></a><strong class="ms iu"/><a class="ae pt" href="https://www.youtube.com/channel/UCaxr-f9r6P1u7Y7SKFHi12g" rel="noopener ugc nofollow" target="_blank"><strong class="ms iu">YouTube</strong></a><strong class="ms iu">或<strong class="ms iu">上取得联系</strong></strong></p><p id="1622" class="pw-post-body-paragraph mq mr it ms b mt nk ju mv mw nl jx my mg nt na nb mj nu nd ne mm nv ng nh ma im bi translated">参见我的关于网络要素和一般文化的电子书。</p></div></div>    
</body>
</html>