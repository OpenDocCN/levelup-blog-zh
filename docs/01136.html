<html>
<head>
<title>Qlik Sense Extension: An Inline Date Range Picker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Qlik Sense扩展:内联日期范围选择器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/qlik-sense-extension-an-inline-date-range-picker-7cc688738379?source=collection_archive---------1-----------------------#2019-11-14">https://levelup.gitconnected.com/qlik-sense-extension-an-inline-date-range-picker-7cc688738379?source=collection_archive---------1-----------------------#2019-11-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/c6c73d2945d26bc3d42f484fa9d876ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aCLb4WTa7Pb82rDrsp2N4g.png"/></div></div></figure><div class=""/><p id="c5e2" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当您希望在Qlik Sense报告中有一个“日期范围选择器”时，几乎总是建议使用已经添加到<code class="fe kz la lb lc b">qlik-dashboard-bundle</code>中的扩展<code class="fe kz la lb lc b">qlik-date-picker</code>。</p><p id="41f5" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然而，在某些情况下，这种扩展并不能很好地满足客户的需求。例如，客户想要一个Qlik Sense Mashup，其中日期范围选择器是页面上的主要过滤器之一，因此它应该总是可见的。具体来说，不要让用户多次单击弹出日历视图的按钮(假设报告的目的是经常检查不同日期范围的度量)，它应该内联显示，它总是在那里选择不同的日期范围。</p><p id="5c8d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">不幸的是，对于捆绑包中当前的<code class="fe kz la lb lc b">qlik-date-picker</code>，这几乎是不可能的。事实上，它是一个流行的JavaScript库<code class="fe kz la lb lc b">daterangepicker.js</code>的定制版本。我参观过它的GitHub repo。许多开发人员要求在问题跟踪器中添加内嵌显示功能，但看起来作者对此并不感兴趣。</p><p id="9c8c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因此，我必须“侵入”包含的JS库来进行这样的更改。几个回合后，我发现这样做不值得，原因有几个:</p><ul class=""><li id="6852" class="ld le je kd b ke kf ki kj km lf kq lg ku lh ky li lj lk ll bi translated">这个Qlik Sense扩展包含的JS文件被完全定制以采用Qlik Sense，并且整个结构被改变并且与其原始JS库完全不同。</li><li id="8f7c" class="ld le je kd b ke lm ki ln km lo kq lp ku lq ky li lj lk ll bi translated">JS文件被缩小了，这使得它更难被修改，因为可读性很差。</li><li id="2d26" class="ld le je kd b ke lm ki ln km lo kq lp ku lq ky li lj lk ll bi translated">该库从未被设计为能够显示内嵌日历。所以，这不是几行代码就能解决的问题。</li><li id="e4ce" class="ld le je kd b ke lm ki ln km lo kq lp ku lq ky li lj lk ll bi translated"><code class="fe kz la lb lc b">show</code>和<code class="fe kz la lb lc b">hide</code>事件是高度定制的，即使它被修改为内嵌显示，也可能会导致问题。例如，如果在网页的模型视图或弹出视图中使用选择器，那么嵌套的回调函数对于调试和维护来说确实很难。</li></ul><p id="f8cc" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">基于以上所有需求和现有限制，我决定开发一个独立的Qlik Sense扩展来实现这个功能。姑且称之为<code class="fe kz la lb lc b">qlik-date-picker-inline</code>。</p><h1 id="a6d4" class="lr ls je bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">创建Qlik感知扩展</h1><p id="d5d4" class="pw-post-body-paragraph kb kc je kd b ke mp kg kh ki mq kk kl km mr ko kp kq ms ks kt ku mt kw kx ky im bi translated">转到Qlik Sense桌面或服务器的<code class="fe kz la lb lc b">dev-hub</code>，单击左侧导航栏上的“扩展编辑器”或主视图上的“创建新扩展”。</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mu"><img src="../Images/dd04731348c3169211b421f5dd55d70e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0AFG1F0yI4weD6paoV8Xhw.png"/></div></div></figure><p id="2cfa" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">输入扩展名，并选择“基本可视化模板”。然后，点击“创建和编辑”</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/2fb45f75e41e011c215204bbf5761b1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*pctNubM8DhZqGDQoQL9arw.png"/></div></figure><p id="4970" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以选择使用您喜欢的IDE工具，或者只使用dev-hub中的web编辑器。个人比较喜欢微软VS代码。因此，我将从我的VS代码中打开扩展文件夹。</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi na"><img src="../Images/f1cd5c71ebfb6aad3ada89937293ec5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*13I3GebyOX7TDbToAdRT7Q.png"/></div></div></figure><p id="251a" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然而，重要的是要记住，添加引用的文件(JS、CSS等。)直接通过IDE工具或复制/移动到扩展文件夹将<strong class="kd jf">不能</strong>工作！当我们添加所需的依赖项(如库JS文件)时，我们必须在Qlik Sense Extension Editor中创建该文件，然后将代码粘贴到创建的文件中。</p><p id="133d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里，我们选择的名为“<a class="ae nb" href="https://wakirin.github.io/Lightpick/" rel="noopener ugc nofollow" target="_blank"> Lightpick </a>的库包含3个文件。一个JS文件，一个CSS文件及其自身的依赖项“<a class="ae nb" href="https://momentjs.com" rel="noopener ugc nofollow" target="_blank"> moment.js </a>”。下面的截图展示了一个添加lightpicker.js的例子，对于另外两个文件，步骤完全相同。</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nc"><img src="../Images/237bbf409e6c213e2069cdbda88d82c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qa67S6kRCWMwDCgHmfvhcg.png"/></div></div></figure><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nd"><img src="../Images/a45a450757aa0d479b116a582d6140dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JPYCflQQaFxEnRkH2Q0F9Q.png"/></div></div></figure><p id="6b59" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于要复制粘贴的库的源代码，请访问原始GitHub repo。</p><h1 id="52e7" class="lr ls je bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">采用带有Qlik Sense的JS库</h1><p id="fa3d" class="pw-post-body-paragraph kb kc je kd b ke mp kg kh ki mq kk kl km mr ko kp kq ms ks kt ku mt kw kx ky im bi translated">Qlik Sense使用<code class="fe kz la lb lc b">define</code>和<code class="fe kz la lb lc b">require</code>模块来包含依赖关系。我们需要添加库的正确路径，如果需要自己的依赖项，有时甚至需要修改库本身。在我们的例子中，它确实需要moment.js，所以我们需要修改它。</p><p id="efc2" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，让我们去<code class="fe kz la lb lc b">qlik-date-picker-inline.js</code>添加库文件</p><pre class="mv mw mx my gt ne lc nf ng aw nh bi"><span id="216e" class="ni ls je lc b gy nj nk l nl nm">define( [ "qlik", "./lightpick", "./moment", "css!./lightpick.css"],<br/>function (qlik, Lightpick, moment) {<br/>...</span></pre><p id="a5e3" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">注意，当使用<code class="fe kz la lb lc b">define</code>包含<code class="fe kz la lb lc b">.js</code>扩展时，我们需要忽略它们。同样，我们使用<code class="fe kz la lb lc b">css!</code>前缀告诉Qlik Sense这是一个CSS文件而不是JS文件。</p><p id="cc26" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，我们去<code class="fe kz la lb lc b">lightpick.js</code>改变它的依赖引用。</p><p id="1764" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最初，工厂函数是这样的</p><pre class="mv mw mx my gt ne lc nf ng aw nh bi"><span id="de3b" class="ni ls je lc b gy nj nk l nl nm">(function (root, factory) {<br/>    if (typeof define === 'function' &amp;&amp; define.amd) {<br/>        // AMD. Make globaly available as well<br/>        define(['moment'], function (moment) {<br/>            return factory(moment);<br/>        });<br/>    }<br/>...</span></pre><p id="dc9d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe kz la lb lc b">define(['moment']...</code>在Qlik意义上不起作用。我们把它改成<code class="fe kz la lb lc b">define(['./moment']</code>吧，这是一个相对路径。因此，如果您喜欢在您的扩展中创建一个<code class="fe kz la lb lc b">lib</code>文件夹，那么您也可以将相对路径更改为<code class="fe kz la lb lc b">./lib/moment</code>。但在这里，我只是将它放在根文件夹中。</p><h1 id="365c" class="lr ls je bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">测试内嵌日期范围选择器</h1><p id="d48a" class="pw-post-body-paragraph kb kc je kd b ke mp kg kh ki mq kk kl km mr ko kp kq ms ks kt ku mt kw kx ky im bi translated">这个lightpick库的作者准备了关于如何使用这个库的很好的文档。请参考它的<a class="ae nb" href="https://wakirin.github.io/Lightpick/" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>有很多演示。</p><p id="6274" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们转到<code class="fe kz la lb lc b">qlik-date-picker-inline.js</code>，将下面的代码放到<code class="fe kz la lb lc b">paint</code>函数中。</p><pre class="mv mw mx my gt ne lc nf ng aw nh bi"><span id="cecc" class="ni ls je lc b gy nj nk l nl nm">paint: function ($element) {</span><span id="cf06" class="ni ls je lc b gy nn nk l nl nm">    console.log('in paint')</span><span id="351d" class="ni ls je lc b gy nn nk l nl nm">    //add your rendering code here<br/>    $element.html( '&lt;input type="hidden" id="datepicker"/&gt;' );<br/> <br/>    var picker = new Lightpick({<br/>        <!-- -->inline: true,<br/>        singleDate: false,<br/>        numberOfMonths: 2,<br/>        field: document.getElementById('datepicker'),<br/>        onSel<!-- -->ect: function(start, end){}<br/>    });</span><span id="1eea" class="ni ls je lc b gy nn nk l nl nm">    //needed for export<br/>    return qlik.Promise.resolve();<br/>}</span></pre><p id="6593" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里，我们需要一个<code class="fe kz la lb lc b">input</code>标签来让<code class="fe kz la lb lc b">lightpick</code>工作。然而，我们实际上并不希望Qlik Sense显示这种输入。所以，我们可以把<code class="fe kz la lb lc b">type</code>设为<code class="fe kz la lb lc b">hidden</code>。</p><p id="49bd" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">此外，我们希望将<code class="fe kz la lb lc b">inline</code>设置为<code class="fe kz la lb lc b">true</code>以便内嵌显示选取器，并将<code class="fe kz la lb lc b">singleDate</code>设置为<code class="fe kz la lb lc b">false</code>以确保它选取的是一个范围而不是单个日期。有关可配置项目的列表，请参考GitHub repo自述文件。</p><p id="580a" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们将扩展添加到Qlik Sense dashboard</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi no"><img src="../Images/0d444a73817b89d3a492ec6a4df2a606.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RAGyQDkPhxum6QPLnEs_8A.png"/></div></div></figure><p id="62f6" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">有用！</p><h1 id="301c" class="lr ls je bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">向扩展小部件添加日期字段</h1><p id="b1cc" class="pw-post-body-paragraph kb kc je kd b ke mp kg kh ki mq kk kl km mr ko kp kq ms ks kt ku mt kw kx ky im bi translated">为了使日期选择器实际上与Qlik Sense一起工作，我们需要添加一个输入字段，以便用户可以填写日期维度。</p><p id="5d41" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在扩展函数的<code class="fe kz la lb lc b">return</code>块中，我们需要先定义<code class="fe kz la lb lc b">initialProperties</code>。这里我们只是用<code class="fe kz la lb lc b">qInitialDateFetch</code>定义了一个<code class="fe kz la lb lc b">qListObjectDef</code>，因为我们只需要一个字段。此外，我们给列表赋予了<code class="fe kz la lb lc b">1e4</code>高度，这实际上允许在日期维度中有大约110年的连续天数。</p><pre class="mv mw mx my gt ne lc nf ng aw nh bi"><span id="6643" class="ni ls je lc b gy nj nk l nl nm">initialProperties: {<br/>    version: 1.0,  <br/>    qListObjectDef: {<br/>        qInitialDataFetch: [{  <br/>            qWidth: 1,  <br/>            qHeight: 1e4  <br/>        }]  <br/>    }<br/>},</span></pre><p id="cd1e" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，我们定义<code class="fe kz la lb lc b">definition object</code>中的<code class="fe kz la lb lc b">items object</code>只包含一个日期字段的输入字段。Qlik Sense扩展中的<code class="fe kz la lb lc b">definition object</code>可用于定义右侧的<code class="fe kz la lb lc b">accordion</code>菜单。</p><pre class="mv mw mx my gt ne lc nf ng aw nh bi"><span id="c5ff" class="ni ls je lc b gy nj nk l nl nm">definition: {<br/>    type: "items",<br/>    component: "accordion",<br/>    items: {<br/>        dimension: {<br/>            type: "items",<br/>            label: "Date Field",<br/>            ref: "qListObjectDef",<br/>            min: 1,<br/>            max: 1,<br/>            items: {<br/>                dimension: {<br/>                    type: "string",<br/>                    expression: "optional",<br/>                    expressionType: "dimension",<br/>                    ref: "qListObjectDef.qDef.qFieldDefs.0",<br/>                    label: "Input Date Field"<br/>                }<br/>            }<br/>        },<br/>        appearance: {<br/>            uses: "settings"<br/>        }<br/>    }<br/>},</span></pre><p id="c564" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在此之后，我们应该能够输入扩展的日期字段。</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div class="gh gi np"><img src="../Images/9e22ea9a0f8ef774420dac2b3344c058.png" data-original-src="https://miro.medium.com/v2/resize:fit:496/format:webp/1*yJSMkkMX8QT2oWE4WoYR9Q.png"/></div></figure><p id="eb7a" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您愿意，现在可以尝试输出<code class="fe kz la lb lc b">layout</code>对象来查看获取的日期。</p><pre class="mv mw mx my gt ne lc nf ng aw nh bi"><span id="e137" class="ni ls je lc b gy nj nk l nl nm">paint: function ($element, layout) {<br/>    console.log(layout)<br/>    ....</span></pre><h1 id="1982" class="lr ls je bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">实施选择日期功能</h1><p id="18a7" class="pw-post-body-paragraph kb kc je kd b ke mp kg kh ki mq kk kl km mr ko kp kq ms ks kt ku mt kw kx ky im bi translated">现在，我们需要让Qlik Sense知道用户已经选择了日期范围，而实际上日期范围是在选取器上选择的。在<code class="fe kz la lb lc b">Lightpick</code>定义中，我们需要实现<code class="fe kz la lb lc b">onSelect</code>对象。</p><pre class="mv mw mx my gt ne lc nf ng aw nh bi"><span id="85ef" class="ni ls je lc b gy nj nk l nl nm">var self = this<br/>var allDates = layout.qListObject.qDataPages[0].qMatrix</span><span id="7439" class="ni ls je lc b gy nn nk l nl nm">onSelect: function(start, end){<br/>    if (start &amp;&amp; end) {</span><span id="480d" class="ni ls je lc b gy nn nk l nl nm">        // Convert start &amp; end moment to date string<br/>        var startDateString = start.format('D/M/YYYY')<br/>        var endDateString = end.format('D/M/YYYY')<br/>        <br/>        // Populate all the dates in between of the range<br/>        toBeSelected = []<br/>        allDates.forEach(qDate =&gt; {<br/>            if (checkDateInBetween(moment(qDate[0].qText, 'D/M/YYYY'), startDateString, endDateString)) {<br/>                toBeSelected.push(qDate[0].qElemNumber)<br/>            }<br/>        });<br/>        console.log(toBeSelected)</span><span id="01ae" class="ni ls je lc b gy nn nk l nl nm">        // Select the dates<br/>        if (toBeSelected.length &gt; 0) {<br/>            self.backendApi.selectValues(0, toBeSelected, false)<br/>        }<br/>    }<br/>}</span></pre><p id="eee7" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里，我们首先从<code class="fe kz la lb lc b">layout</code>对象中获取所有的日期。然后，循环所有日期以测试它是否在所选范围内。如果是，就把它推进<code class="fe kz la lb lc b">toBeSelected</code>数组。</p><p id="964c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，如果我们选择一个范围<code class="fe kz la lb lc b">1/1/2014</code> — <code class="fe kz la lb lc b">12/1/2014</code>，Qlik后端API应该会更新，我们可以从选择栏中看到选择</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/89a1df849aae08e1ba31345e484e85d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/format:webp/1*oZb3wc0lL_AbV_nZD38ycg.png"/></div></figure><h1 id="91cb" class="lr ls je bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">基于现有选择实现“setDateRange”</h1><p id="5b26" class="pw-post-body-paragraph kb kc je kd b ke mp kg kh ki mq kk kl km mr ko kp kq ms ks kt ku mt kw kx ky im bi translated">现在，我们还有一个问题。选择日期范围后，它不会保留在选取器上。此外，如果我们已经在Qlik意义上选择了日期范围，它不会反映在选取器上。这是因为每次用户进行更改后，Qlik Sense都会刷新扩展。因此，我们需要让扩展检测是否有选定的范围，并以编程方式在选择器上设置它。</p><pre class="mv mw mx my gt ne lc nf ng aw nh bi"><span id="3795" class="ni ls je lc b gy nj nk l nl nm">// Get current selection if there are any<br/>var selectedDates = []<br/>allDates.forEach(qDate =&gt; {<br/>    if (qDate[0].qState == "S") {<br/>        selectedDates.push(moment(qDate[0].qText, "D/M/YYYY"))<br/>    }<br/>});<br/><br/>if (selectedDates.length &gt; 0) {<br/>    selectedDates = selectedDates.sort((a,b) =&gt; a-b)<br/>    minSelectDate = selectedDates[0]<br/>    maxSelectDate = selectedDates[selectedDates.length - 1]<br/>    picker.setDateRange(minSelectDate, maxSelectDate, true)<br/>    picker.gotoDate(maxSelectDate.subtract(1, 'month'))<br/>}</span></pre><p id="2696" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里，将第3个参数<code class="fe kz la lb lc b">setDateRange</code>设置为<code class="fe kz la lb lc b">false</code>很重要。这是为了防止<code class="fe kz la lb lc b">setDateRange</code>功能触发<code class="fe kz la lb lc b">onSelect</code>事件。如果我们不这样做，<code class="fe kz la lb lc b">setDateRange</code>将触发picker的<code class="fe kz la lb lc b">onSelect</code>事件，picker中有<code class="fe kz la lb lc b">backendApi.selectValues()</code>，这将导致整个扩展被刷新，并且<code class="fe kz la lb lc b">setDateRange</code>将被再次调用。</p><p id="57c0" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">另外，不要忘记在最后调用<code class="fe kz la lb lc b">gotoDate</code>函数，以确保选取器将交互地转到选定的日期。如果您有其他可以选择日期的小部件，这是非常重要的。</p><p id="5487" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">好吧！现在我们已经完成了Qlik意义上的扩展。代码的片段可能很难连接在一起以获得完整的画面。但是不要担心，您可以在我的GitHub repo上找到完整的源代码:</p><div class="is it gp gr iu nr"><a href="https://github.com/qiuyujx/qlik-date-picker-inline" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd jf gy z fp nw fr fs nx fu fw jd bi translated">qiuyujx/qlik-日期选择器-内联</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">github.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of ja nr"/></div></div></a></div><div class="is it gp gr iu nr"><a href="https://medium.com/@qiuyujx/membership" rel="noopener follow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd jf gy z fp nw fr fs nx fu fw jd bi translated">通过我的推荐链接加入灵媒-陶</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">medium.com</p></div></div><div class="oa l"><div class="og l oc od oe oa of ja nr"/></div></div></a></div><p id="17ad" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你觉得我的文章有帮助，请考虑加入Medium会员来支持我和成千上万的其他作者！(点击上面的链接)</p><h1 id="bd0b" class="lr ls je bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">资源:</h1><p id="d490" class="pw-post-body-paragraph kb kc je kd b ke mp kg kh ki mq kk kl km mr ko kp kq ms ks kt ku mt kw kx ky im bi translated">采光:<a class="ae nb" href="https://wakirin.github.io/Lightpick/" rel="noopener ugc nofollow" target="_blank">https://wakirin.github.io/Lightpick/</a></p><p id="67a1" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">moment . js:<a class="ae nb" href="https://momentjs.com" rel="noopener ugc nofollow" target="_blank">https://momentjs.com</a></p><p id="7063" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Qlik Sense开发者文档:<a class="ae nb" href="https://help.qlik.com/en-US/sense-developer/April2019" rel="noopener ugc nofollow" target="_blank">https://help.qlik.com/en-US/sense-developer/April2019</a></p><p id="c68d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">GitHub回购:<a class="ae nb" href="https://github.com/qiuyujx/qlik-date-picker-inline" rel="noopener ugc nofollow" target="_blank">https://github.com/qiuyujx/qlik-date-picker-inline</a></p></div></div>    
</body>
</html>