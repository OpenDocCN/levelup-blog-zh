<html>
<head>
<title>How to detect and handle offline mode in Angular without adding any third party</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在不添加任何第三方的情况下，在Angular中检测和处理离线模式</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-detect-and-handle-offline-mode-in-angular-without-using-any-library-36a108d015b9?source=collection_archive---------1-----------------------#2020-10-28">https://levelup.gitconnected.com/how-to-detect-and-handle-offline-mode-in-angular-without-using-any-library-36a108d015b9?source=collection_archive---------1-----------------------#2020-10-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2eee9224144d0e58fac072ef58e3243b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*toDgr8F5l8RUeyny7QIusw.png"/></div></div></figure><p id="3d10" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本文中，我将带您了解如何检测离线模式，以及在Angular应用程序中处理离线模式的可能方法</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="ad72" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">如何检测离线模式？</h1><p id="29a1" class="pw-post-body-paragraph jy jz iq ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">为了检测浏览器的离线模式，我们可以使用Javascript窗口的在线和离线事件。</p><p id="79a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">来自<a class="ae mg" href="https://developer.mozilla.org/en-US/docs/Web/API/Window" rel="noopener ugc nofollow" target="_blank"> Mozilla MDN文档</a>:</p><blockquote class="mh mi mj"><p id="b79e" class="jy jz mk ka b kb kc kd ke kf kg kh ki ml kk kl km mm ko kp kq mn ks kt ku kv ij bi translated">当浏览器失去对网络的访问时，触发<code class="fe mo mp mq mr b"><a class="ae mg" href="https://developer.mozilla.org/en-US/docs/Web/API/Window" rel="noopener ugc nofollow" target="_blank">Window</a></code>界面的<code class="fe mo mp mq mr b"><strong class="ka ir">offline</strong></code>事件</p><p id="c5dc" class="jy jz mk ka b kb kc kd ke kf kg kh ki ml kk kl km mm ko kp kq mn ks kt ku kv ij bi translated">当浏览器访问网络时，触发<code class="fe mo mp mq mr b"><a class="ae mg" href="https://developer.mozilla.org/en-US/docs/Web/API/Window" rel="noopener ugc nofollow" target="_blank">Window</a></code>界面的<code class="fe mo mp mq mr b"><strong class="ka ir">online</strong></code>事件</p></blockquote><h1 id="b0ed" class="ld le iq bd lf lg ms li lj lk mt lm ln lo mu lq lr ls mv lu lv lw mw ly lz ma bi translated">如何在应用程序中处理脱机模式？</h1><p id="7c92" class="pw-post-body-paragraph jy jz iq ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">当失去与网络的连接时，我们可能想要做两种用例——在模型中进行更改或者对UI元素进行更改。</p><h2 id="a7c8" class="mx le iq bd lf my mz dn lj na nb dp ln kj nc nd lr kn ne nf lv kr ng nh lz ni bi translated">1.在连接模式更改后对模型进行更改</h2><p id="fdc7" class="pw-post-body-paragraph jy jz iq ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">有时我们想改变组件，比如显示警告，更新逻辑等等..</p><p id="b4f8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了实现这个功能，我们将使用<code class="fe mo mp mq mr b">fromEvent</code>来监听window离线和在线事件</p><figure class="nj nk nl nm gt jr"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="d930" class="mx le iq bd lf my mz dn lj na nb dp ln kj nc nd lr kn ne nf lv kr ng nh lz ni bi translated">2.在连接模式更改后对用户界面进行更改</h2><p id="2d1c" class="pw-post-body-paragraph jy jz iq ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">有时我们想在UI中做一些改变，比如在没有连接时禁用元素。为了实现这一功能，我们可以使用一个指令，通过将它添加到元素中，当没有连接时，它会将其禁用。</p><p id="fd66" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本例中:</p><p id="c5fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在选择器中，我们只选择按钮元素。</p><p id="2f12" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们使用<code class="fe mo mp mq mr b">HostListener</code>来监听窗口离线和在线事件，并更新<code class="fe mo mp mq mr b">isOffline</code>变量。</p><p id="3142" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们使用<code class="fe mo mp mq mr b">HostBinding</code>将按钮元素的禁用属性绑定到<code class="fe mo mp mq mr b">isOffline</code>变量。</p><figure class="nj nk nl nm gt jr"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="a876" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要使用它，我们只需将指令添加到<code class="fe mo mp mq mr b">button</code>元素中</p><figure class="nj nk nl nm gt jr"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="19b0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了简单起见，我只使用该指令来更新按钮元素的disabled属性，但是它可以用于更新任何元素中的任何属性。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="570a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> Github源代码链接</strong>:<a class="ae mg" href="https://github.com/saifabusaleh/angular-detect-connectivity-status" rel="noopener ugc nofollow" target="_blank">https://Github . com/saifabusaleh/angular-detect-connectivity-status</a></p><p id="2869" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">其他有用资源</strong>:</p><p id="587f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae mg" href="https://angular.io/api/core/HostBinding" rel="noopener ugc nofollow" target="_blank">主机绑定文档</a></p><p id="285c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae mg" href="https://angular.io/api/core/HostListener" rel="noopener ugc nofollow" target="_blank">主机监听器文档</a></p><p id="4ecb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">希望这篇文章对你有帮助:)，有什么反馈请告诉我。</p><p id="f6b7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mk">跟我上</em> <a class="ae mg" href="https://medium.com/@saif.as" rel="noopener"> <em class="mk">中</em> </a> <em class="mk">求更多！</em></p></div></div>    
</body>
</html>