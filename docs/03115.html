<html>
<head>
<title>Building a Snake Game using Canvas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用画布构建一个贪吃蛇游戏</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/building-a-snake-game-using-canvas-260a738edcec?source=collection_archive---------4-----------------------#2020-04-20">https://levelup.gitconnected.com/building-a-snake-game-using-canvas-260a738edcec?source=collection_archive---------4-----------------------#2020-04-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/e9d48a31ca14fddb52f7cfbc7e2d2c0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*os5aQl-NfyQLQl3YfbAQtA.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">使用画布构建一个贪吃蛇游戏</figcaption></figure><p id="391a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">HTML“canvas”元素是HTML5中添加的新元素之一。它是一个固定大小的容器，允许您使用JavaScript在其中绘制图形。<strong class="kd iu"> <em class="kz"> Canvas有几种绘制路径、框、圆、文本、添加图像的方法。</em> </strong>还可以制作互动动画和游戏。</p><p id="129c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> <em class="kz"> &lt; canvas &gt; </em> </strong>元素是HTML代码中定义的可绘制区域，其高度和宽度属性如下:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="f3ac" class="lj lk it lf b gy ll lm l ln lo">&lt;canvas id=”firstCanvas” width=”500" height=”500"&gt;&lt;/canvas&gt;</span></pre><p id="d1b7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里的<strong class="kd iu"><em class="kz">【id】</em></strong>很重要，因为它用于使用文档对象模型(DOM)  在JavaScript <strong class="kd iu"> <em class="kz">中定位该元素，如下所示:</em></strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="f4c9" class="lj lk it lf b gy ll lm l ln lo">var canvas = document.getElementById(“firstCanvas”);</span></pre><p id="9e10" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在JavaScript中，绘图方法不是在canvas元素上调用，而是在通过调用<strong class="kd iu"> <em class="kz">获得的绘图上下文上调用。getContext('2d') </em> </strong>如下:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="a90c" class="lj lk it lf b gy ll lm l ln lo">var context = canvas.getContext(“2d”);</span></pre><p id="a9f8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">该方法识别目标canvas元素的上下文，这意味着用户可以访问canvas drawing API，该API提供了在canvas上进行绘制的方法和属性。例如，如果我们想在画布上画一个矩形，我们可以使用<strong class="kd iu"><em class="kz">context . rect()</em></strong>方法如下:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="bbbc" class="lj lk it lf b gy ll lm l ln lo">context.rect(20, 20, 100, 100);</span></pre><p id="1fe5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">该方法取四个参数:矩形左上角的x和y坐标以及矩形的宽度和高度:<strong class="kd iu"> <em class="kz"> rect(x，y，width，height) </em> </strong>。需要调用方法<strong class="kd iu"><em class="kz">context . stroke()</em></strong>在画布上显示形状。它看起来会像这样:</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/aca061a222f912681ad30e39801f62a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*2GBE6R3e1LvQfJqgTphgUA.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">使用画布创建的矩形</figcaption></figure><p id="9dab" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">类似地，可以使用<strong class="kd iu"> <em class="kz">绘制填充矩形。接受相同参数的fillRect() </em> </strong>方法。在调用<strong class="kd iu"> <em class="kz">之前，可以使用<strong class="kd iu"><em class="kz">context . fill style</em></strong>方法定义填充颜色。</em>fill rect</strong>方法:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="7f32" class="lj lk it lf b gy ll lm l ln lo">context.fillStyle= "#6c2c3a";</span><span id="95e8" class="lj lk it lf b gy lq lm l ln lo">context.fillRect(20, 20, 100, 100);</span></pre><p id="6400" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">下图显示了由上述代码行创建的矩形:</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/0049c1c2c68a49447ebcccc63f11450f.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/1*pJXXjgxyDk_kQjKFG-HdSQ.png"/></div></figure><p id="8258" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要画一个圆，可以使用方法<strong class="kd iu"><em class="kz">context . arc()</em></strong>来获取圆心坐标、圆的半径以及以弧度表示的开始和结束角度，在圆的情况下是0到2*Math。圆周率(360弧度)。也可以通过使用<strong class="kd iu"> <em class="kz"> lineTo() </em> </strong>方法为每条边绘制一条线来绘制其他形状，如三角形。除了形状，我们还可以绘制文本、插入图像和添加变换，如<strong class="kd iu"><em class="kz">【scale】、rotate()、translate() </em> </strong>等。</p><p id="309a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">制作交互式动画也很容易(对鼠标点击、键盘按键、按钮点击、触摸屏上的手指移动等做出反应的动画)。例如，下面的贪吃蛇游戏是基于点击按钮和按箭头键(用于改变蛇的方向)。</p><p id="4691" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">构建基本贪吃蛇游戏的步骤:</p><h2 id="4464" class="lj lk it bd ls lt lu dn lv lw lx dp ly km lz ma mb kq mc md me ku mf mg mh mi bi translated"><strong class="ak">制作画布</strong></h2><p id="76e2" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">第一步是制作一个<strong class="kd iu"> <em class="kz"> &lt;画布&gt; </em> </strong>元素并设置其尺寸。绘图表面的背景，即<strong class="kd iu"> <em class="kz"> &lt; canvas &gt; </em> </strong>元素，可以使用CSS或JavaScript方法设置。</p><h2 id="daa3" class="lj lk it bd ls lt lu dn lv lw lx dp ly km lz ma mb kq mc md me ku mf mg mh mi bi translated"><strong class="ak">设置移动</strong></h2><p id="e6fd" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">在这一步中，画布被设置为在游戏中进行移动。为此，我们在显示元素(蛇、水果等)的下一个位置之前清空画布区域，更新它们的坐标，然后再次显示它们，这个过程一直重复到游戏结束。通过使用JavaScript方法window.setInterval( <em class="kz">函数</em>，<em class="kz">毫秒</em>)来实现。该方法在每个指定的时间间隔重复一个给定的函数。时间以毫秒为单位。</p><p id="cb8f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这个游戏中，<strong class="kd iu"><em class="kz">window . setinterval</em></strong>中定义的函数基本上做了三件事。首先，它在某个位置绘制水果。其次，更新蛇的位置并显示出来。然后它检查蛇是否吃了水果，并根据它更新水果位置和分数。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="c1d9" class="lj lk it lf b gy ll lm l ln lo">function main() {</span><span id="71bf" class="lj lk it lf b gy lq lm l ln lo">//update state of game and display changes after specified interval</span><span id="415b" class="lj lk it lf b gy lq lm l ln lo">interval = window.setInterval(() =&gt; {</span><span id="d3cf" class="lj lk it lf b gy lq lm l ln lo">context.clearRect(0, 0, 500, 500);</span><span id="8057" class="lj lk it lf b gy lq lm l ln lo">drawFruit();</span><span id="acee" class="lj lk it lf b gy lq lm l ln lo">moveSnakeForward();</span><span id="d0a4" class="lj lk it lf b gy lq lm l ln lo">drawSnake();</span><span id="c77f" class="lj lk it lf b gy lq lm l ln lo">//check if snake eats the fruit - increase size of its tail</span><span id="5be8" class="lj lk it lf b gy lq lm l ln lo">and find new fruit position</span><span id="173c" class="lj lk it lf b gy lq lm l ln lo">if (snakeHeadX === fruitX &amp;&amp; snakeHeadY === fruitY) {</span><span id="434f" class="lj lk it lf b gy lq lm l ln lo">totalTail++;</span><span id="a189" class="lj lk it lf b gy lq lm l ln lo">fruitPosition();</span><span id="0111" class="lj lk it lf b gy lq lm l ln lo">}</span><span id="8e5d" class="lj lk it lf b gy lq lm l ln lo">}, 200);</span><span id="ad3b" class="lj lk it lf b gy lq lm l ln lo">}</span></pre><h2 id="59b3" class="lj lk it bd ls lt lu dn lv lw lx dp ly km lz ma mb kq mc md me ku mf mg mh mi bi translated"><strong class="ak">创造画蛇的方法</strong></h2><p id="4001" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">这是通过创建两个函数来实现的，<strong class="kd iu"><em class="kz">draw snakehead()</em></strong>和<strong class="kd iu"><em class="kz">draw snakebody()</em></strong>。使用蛇身体每个部分的x和y坐标来绘制蛇，其中x和y表示该部分的左上角。</p><p id="3760" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在方法<strong class="kd iu"><em class="kz">draw snakehead()</em></strong>中，变量<strong class="kd iu"><em class="kz">snakeheax</em></strong>和<strong class="kd iu"><em class="kz">snakeheay</em></strong>分别存储蛇头的x和y值。这里使用context.arc方法为头部绘制一个圆。选择适当的坐标，蛇的眼睛也可以类似的画出来。变量“scale”存储了蛇身体每一部分的像素数。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="b0bc" class="lj lk it lf b gy ll lm l ln lo">function drawSnakeHead(color) {</span><span id="e307" class="lj lk it lf b gy lq lm l ln lo">context.beginPath();</span><span id="dff0" class="lj lk it lf b gy lq lm l ln lo">context.arc(snakeHeadX+scale/2, snakeHeadY+scale/2, scale/2,</span><span id="784e" class="lj lk it lf b gy lq lm l ln lo">0, 2 * Math.PI);</span><span id="de6a" class="lj lk it lf b gy lq lm l ln lo">context.fillStyle = color;</span><span id="bd02" class="lj lk it lf b gy lq lm l ln lo">context.fill();</span><span id="fc17" class="lj lk it lf b gy lq lm l ln lo">}</span></pre><p id="680a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> <em class="kz">数组tail[] </em> </strong>存储尾部各部分的坐标。函数<strong class="kd iu"><em class="kz">drawswangebody()</em></strong>包含一个循环，使用“tail”数组迭代绘制尾部的每个部分。在这里，变量“tailRadius”只是用来从后向前增加蛇尾的大小。所以，如果尾巴长度是4，这条蛇看起来像这样:</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/72b23dbc068c48969be84a448a4278f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:410/0*nP-C-kxms0h2YpTG"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">使用画布创建的蛇身</figcaption></figure><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="b1f1" class="lj lk it lf b gy ll lm l ln lo">function drawSnakeTail() {</span><span id="a9a4" class="lj lk it lf b gy lq lm l ln lo">let tailRadius = scale/4;</span><span id="fbc6" class="lj lk it lf b gy lq lm l ln lo">for (i = 0; i &lt; tail.length; i++) {</span><span id="35bd" class="lj lk it lf b gy lq lm l ln lo">tailRadius=tailRadius+((scale/2-scale/4)/tail.length);</span><span id="0576" class="lj lk it lf b gy lq lm l ln lo">context.beginPath();</span><span id="22dc" class="lj lk it lf b gy lq lm l ln lo">context.fillStyle = "#6c2c3a";</span><span id="a902" class="lj lk it lf b gy lq lm l ln lo">context.arc((tail[i].tailX+scale/2), (tail[i].tailY+scale/2), tailRadius, 0, 2 * Math.PI);</span><span id="d6d9" class="lj lk it lf b gy lq lm l ln lo">context.fill();</span><span id="f21b" class="lj lk it lf b gy lq lm l ln lo">}</span><span id="9eb4" class="lj lk it lf b gy lq lm l ln lo">}</span></pre><p id="e8a3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后在<strong class="kd iu"><em class="kz">window . setinterval()</em></strong>函数中执行的<strong class="kd iu"> <em class="kz"> drawSnake() </em> </strong>方法中调用上述两个函数。</p><p id="cbdd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">函数<strong class="kd iu"><em class="kz">moveSnakeForward()</em></strong>将蛇尾和蛇头的坐标移动到下一个位置。变量<strong class="kd iu"> <em class="kz"> xSpeed </em> </strong>和<strong class="kd iu"> <em class="kz"> ySpeed </em> </strong>代表特定方向的运动，即如果蛇水平运动，<strong class="kd iu"> <em class="kz"> xSpeed </em> </strong>将等于“scale”(向右为正，向左为负)<strong class="kd iu"> <em class="kz"> ySpeed </em> </strong>将为零，反之亦然。因此，蛇头的新值是使用这些变量赋值的。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="6c90" class="lj lk it lf b gy ll lm l ln lo">function moveSnakeForward() {</span><span id="a681" class="lj lk it lf b gy lq lm l ln lo">tail0=tail[0];</span><span id="3600" class="lj lk it lf b gy lq lm l ln lo">for (let i = 0; i &lt; tail.length - 1; i++) {</span><span id="6ea1" class="lj lk it lf b gy lq lm l ln lo">tail[i] = tail[i + 1];</span><span id="e506" class="lj lk it lf b gy lq lm l ln lo">}</span><span id="d6e6" class="lj lk it lf b gy lq lm l ln lo">tail[totalTail - 1] = { tailX: snakeHeadX, tailY: snakeHeadY };</span><span id="9f73" class="lj lk it lf b gy lq lm l ln lo">snakeHeadX += xSpeed;</span><span id="4916" class="lj lk it lf b gy lq lm l ln lo">snakeHeadY += ySpeed;</span><span id="ce1f" class="lj lk it lf b gy lq lm l ln lo">}</span></pre><h2 id="30b1" class="lj lk it bd ls lt lu dn lv lw lx dp ly km lz ma mb kq mc md me ku mf mg mh mi bi translated"><strong class="ak">根据方向移动蛇</strong></h2><p id="2fb5" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">创建了一个方法，根据玩家按下的键来改变蛇头的方向。函数<strong class="kd iu"><em class="kz">change direction()</em></strong>使用一个开关盒，并获取使用“keydown”事件按下的箭头键的详细信息，以更改方向。例如，如果按下向上箭头键:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="2f7c" class="lj lk it lf b gy ll lm l ln lo">switch (directionVar) {</span><span id="68f5" class="lj lk it lf b gy lq lm l ln lo">case "Up":</span><span id="7c30" class="lj lk it lf b gy lq lm l ln lo">//move "up" only when previous direction is not "down"</span><span id="6c41" class="lj lk it lf b gy lq lm l ln lo">if (previousDir !== "Down") {</span><span id="17b3" class="lj lk it lf b gy lq lm l ln lo">direction=directionVar;</span><span id="ac71" class="lj lk it lf b gy lq lm l ln lo">xSpeed = 0;</span><span id="3e57" class="lj lk it lf b gy lq lm l ln lo">ySpeed = scale * -1;</span><span id="2d72" class="lj lk it lf b gy lq lm l ln lo">}</span><span id="055a" class="lj lk it lf b gy lq lm l ln lo">Break;</span><span id="023e" class="lj lk it lf b gy lq lm l ln lo">//similar cases for other directions</span><span id="a7c2" class="lj lk it lf b gy lq lm l ln lo">}</span></pre><p id="3700" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">变量<strong class="kd iu"> <em class="kz"> directionVar </em> </strong>包含玩家按下的键的细节。前一个方向存储在变量<strong class="kd iu"> <em class="kz"> previousDir </em> </strong>中。随着蛇向上移动(垂直方向)，<strong class="kd iu"> <em class="kz"> xSpeed </em> </strong>转到0(无水平移动)，y speed<strong class="kd iu"><em class="kz">转到负。通过为<strong class="kd iu"> <em class="kz"> xSpeed </em> </strong>和<strong class="kd iu"> <em class="kz"> ySpeed </em> </strong>选择适当的值，可以为其他方向定义类似的情况。</em></strong></p><h2 id="beeb" class="lj lk it bd ls lt lu dn lv lw lx dp ly km lz ma mb kq mc md me ku mf mg mh mi bi translated"><strong class="ak">创造果实</strong></h2><p id="19ad" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">方法<strong class="kd iu"><em class="kz">generate coordinates()</em></strong>在画布的高度和宽度范围内生成随机的x和y值，可用于水果的位置。使用<strong class="kd iu"> <em class="kz"> fillRect() </em> </strong>方法可以在这个位置制作一个正方形。或者，可以使用<strong class="kd iu"> <em class="kz"> drawImage() </em> </strong>内部方法在此位置插入水果的图像。</p><h2 id="4ce1" class="lj lk it bd ls lt lu dn lv lw lx dp ly km lz ma mb kq mc md me ku mf mg mh mi bi translated"><strong class="ak">检查碰撞</strong></h2><p id="a3ee" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">在每一个间隔，都需要检查蛇是与曲面的边界发生了碰撞，还是与它的尾巴本身发生了碰撞(如下面的代码所示)。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="5bad" class="lj lk it lf b gy ll lm l ln lo">//check snake's collision</span><span id="d4e7" class="lj lk it lf b gy lq lm l ln lo">function checkCollision() {</span><span id="62c1" class="lj lk it lf b gy lq lm l ln lo">let tailCollision=false, boundaryCollision=false;</span><span id="d938" class="lj lk it lf b gy lq lm l ln lo">//with its own tail</span><span id="2ca8" class="lj lk it lf b gy lq lm l ln lo">for (let i = 0; i &lt; tail.length; i++) {</span><span id="c119" class="lj lk it lf b gy lq lm l ln lo">if (snakeHeadX == tail[i].tailX &amp;&amp; snakeHeadY == tail[i].tailY) {</span><span id="ddc5" class="lj lk it lf b gy lq lm l ln lo">tailCollision=true;</span><span id="2ac3" class="lj lk it lf b gy lq lm l ln lo">}</span><span id="883f" class="lj lk it lf b gy lq lm l ln lo">}</span><span id="eebd" class="lj lk it lf b gy lq lm l ln lo">//with boundaries</span><span id="1cbc" class="lj lk it lf b gy lq lm l ln lo">if(snakeHeadX &gt;= canvas.width || snakeHeadX &lt; 0 || snakeHeadY &gt;= canvas.height || snakeHeadY &lt; 0){</span><span id="97b7" class="lj lk it lf b gy lq lm l ln lo">boundaryCollision=true;</span><span id="2bbb" class="lj lk it lf b gy lq lm l ln lo">}</span><span id="1f62" class="lj lk it lf b gy lq lm l ln lo">return (tailCollision || boundaryCollision);</span><span id="9bb7" class="lj lk it lf b gy lq lm l ln lo">}</span></pre><p id="bfa9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">上述方法在函数<strong class="kd iu"> <em class="kz"> drawSnake() </em> </strong>中调用如下:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="667a" class="lj lk it lf b gy ll lm l ln lo">//display snake</span><span id="946a" class="lj lk it lf b gy lq lm l ln lo">function drawSnake() {</span><span id="f39f" class="lj lk it lf b gy lq lm l ln lo">drawSnakeHead("#7d4350");</span><span id="babe" class="lj lk it lf b gy lq lm l ln lo">drawSnakeTail();</span><span id="aa0f" class="lj lk it lf b gy lq lm l ln lo">if (checkCollision()) {</span><span id="8220" class="lj lk it lf b gy lq lm l ln lo">clearInterval(gameInterval);</span><span id="f0d9" class="lj lk it lf b gy lq lm l ln lo">setTimeout(()=&gt;{</span><span id="d720" class="lj lk it lf b gy lq lm l ln lo">scoreModal.textContent = totalTail;</span><span id="9160" class="lj lk it lf b gy lq lm l ln lo">$('#alertModal').modal('show');</span><span id="420b" class="lj lk it lf b gy lq lm l ln lo">modalBtn.addEventListener("click", ()=&gt;{</span><span id="7a11" class="lj lk it lf b gy lq lm l ln lo">context.clearRect(0, 0, 500, 500);</span><span id="ac32" class="lj lk it lf b gy lq lm l ln lo">score.innerText = 0;</span><span id="3f04" class="lj lk it lf b gy lq lm l ln lo">   });</span><span id="179e" class="lj lk it lf b gy lq lm l ln lo">  }, 1000);</span><span id="54df" class="lj lk it lf b gy lq lm l ln lo"> }</span><span id="3528" class="lj lk it lf b gy lq lm l ln lo">}</span></pre><p id="c2d0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果发生碰撞，将向玩家显示一条消息，其中包含文本“游戏结束”以及最终得分。这里，自举模型用于此目的。文本的<strong class="kd iu"> <em class="kz"> &lt; span &gt; </em> </strong>元素(在模态体中)id为<strong class="kd iu"><em class="kz">‘score modal’</em></strong>被设置为最终得分如下:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="57e7" class="lj lk it lf b gy ll lm l ln lo">scoreModal.textContent = totalTail;</span></pre><p id="8022" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后使用jQuery在屏幕上显示这个模态。方法<strong class="kd iu"><em class="kz">clearInterval()</em></strong>停止更新画布(蛇、水果等的位置)的已定义间隔。</p><p id="5c36" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这篇文章回顾了创建一个基本的贪吃蛇游戏的方法。</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/1192b72f732816ca49a44300e5b0ddaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*770oJtOFP1eqxvQgwqAT_A.png"/></div></figure><p id="015b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了增加游戏的难度，蛇的关卡也可以用类似的方法设置。通过使用<strong class="kd iu"><em class="kz">clearInterval()</em></strong>暂停游戏并再次调用<strong class="kd iu"> <em class="kz"> main() </em> </strong>方法在交替按空格键时恢复游戏，也可以在按空格键时添加暂停和恢复游戏等功能。</p><p id="2f1c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">完整代码请前往<a class="ae mq" href="https://github.com/dev-catalyst/snake-game" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu"><em class="kz">GitHub</em></strong></a><strong class="kd iu"><em class="kz">。</em>T29】</strong></p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/af506977a8fe0dd53d03bbd04b811d45.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/1*9bYUmcF4wcnjHBpjlRsP5w.gif"/></div></figure><p id="f332" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这里，病毒在特定的时间间隔后被抽取到随机的位置。当蛇吃掉它时，游戏结束。创建您自己的游戏并享受。🤗</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="eadb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">通过<a class="ae mq" href="https://www.instagram.com/ctsolutions.sh/" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu"><em class="kz">insta gram</em></strong></a><strong class="kd iu"><em class="kz"/></strong><a class="ae mq" href="https://twitter.com/catalyst_sh" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu"><em class="kz">推特</em></strong></a><strong class="kd iu"><em class="kz"/></strong><a class="ae mq" href="https://www.linkedin.com/company/13707239/admin/" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu"><em class="kz">LinkedIn</em></strong></a>联系我们</p><p id="119e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">或者给我们发电子邮件✉️在<strong class="kd iu"> admin@catalyst.sh. </strong></p><p id="cad1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">点击查看我们的其他博客<a class="ae mq" href="https://medium.com/@alka.jha_87549" rel="noopener">。</a></p><div class="mz na gp gr nb nc"><a href="https://medium.com/@alka.jha_87549/the-importance-of-email-design-e2daddffeca9" rel="noopener follow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">电子邮件设计的重要性</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">好的邮件设计能吸引读者的眼球，并诱使他们在打开邮件后继续阅读。</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">medium.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq jv nc"/></div></div></a></div><div class="mz na gp gr nb nc"><a href="https://medium.com/@alka.jha_87549/how-to-make-your-website-seo-friendly-b3bb7db44c87" rel="noopener follow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">如何让你的网站SEO友好？</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">搜索引擎优化是在谷歌搜索结果上提高网站索引的方法。在制作过程中…</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">medium.com</p></div></div><div class="nl l"><div class="nr l nn no np nl nq jv nc"/></div></div></a></div></div></div>    
</body>
</html>