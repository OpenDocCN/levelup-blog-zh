<html>
<head>
<title>Send Array of Query Parameters Using http4k and Kotlin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用http4k和Kotlin发送查询参数数组</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/send-array-of-query-parameters-using-http4k-and-kotlin-970032a134ee?source=collection_archive---------11-----------------------#2022-08-16">https://levelup.gitconnected.com/send-array-of-query-parameters-using-http4k-and-kotlin-970032a134ee?source=collection_archive---------11-----------------------#2022-08-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="59ac" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我使用http4k和Kotlin处理了一些请求调用，但是没有从文档或更广泛的互联网上找到发送一组查询参数的好例子。这里有一个例子可以帮助其他可能需要它的人，也展示了我从一个同事那里学到的一个很酷的Kotlin重构(谢谢David！).</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/e14c95370b6bc5905d51f22b1d0319f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*liVXgshmQPrhSfEz"/></div></div></figure><p id="6877" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以看到构建<code class="fe la lb lc ld b">Request</code>的初始状态，我们正在执行一个<code class="fe la lb lc ld b">GET</code>请求并传入一个<code class="fe la lb lc ld b">uri</code>，但是我们需要修改这个调用，以便也传递一个邮政编码数组。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi le"><img src="../Images/cd6fbe38a46af76fd689553bff852378.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R_usXlHd5mBy6oQLQ_pcdg.png"/></div></div></figure><p id="424e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我的第一个实现简单地使用了所需的邮政编码列表，并使用带有块语法的<code class="fe la lb lc ld b">forEach</code>遍历它们，并将每个邮政编码添加为查询参数。以下是url的最终外观:</p><pre class="kp kq kr ks gt lf ld lg lh aw li bi"><span id="35a2" class="lj lk it ld b gy ll lm l ln lo">http://example.com?zipCodes=80205&amp;zipCodes79707</span></pre><p id="3be4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">万岁！这是可行的，但是它引入了可变性，我们希望避免让<code class="fe la lb lc ld b">httpRequest</code>发生变异，即使只是在这一点上。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lp"><img src="../Images/53f2b8c8f0b0757fe37fe2ae699bc42a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T34qesEFTFGwb8d1FBTZBg.png"/></div></div></figure><p id="a27c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了实现这一点，我们可以利用<code class="fe la lb lc ld b">run</code>，它是一个<a class="ae lq" href="https://kotlinlang.org/docs/scope-functions.html" rel="noopener ugc nofollow" target="_blank">作用域函数</a>，来传递我们的httpRequest，然后使用<code class="fe la lb lc ld b">fold</code>来遍历邮政编码列表，并将它们添加到查询参数中。最后<code class="fe la lb lc ld b">fold</code>将返回我们的最终结果，这样它就可以被赋给原始的httpRequest变量。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lr"><img src="../Images/78fb6397a0dc112a47ee0ade68a43ff3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aFG8ctB2pdfxS5RHNVrPyQ.png"/></div></div></figure><h1 id="955b" class="ls lk it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">结论</h1><p id="02bb" class="pw-post-body-paragraph jq jr it js b jt mp jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj mt kl km kn im bi translated">我希望这对其他人有所帮助，并展示一些使用Kotlin可以完成的很酷的函数式编程。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><p id="b044" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你喜欢这篇文章，考虑一下<a class="ae lq" href="https://medium.com/@ascourter/membership" rel="noopener">订阅Medium </a>！</p><p id="95ac" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你或你的公司有兴趣找人进行技术面试，那么请在Twitter ( <a class="ae lq" href="http://twitter.com/Exosyphon" rel="noopener ugc nofollow" target="_blank"> @Exosyphon </a>)上给我发DM，或者访问我的<a class="ae lq" href="https://andrewcourter.com/" rel="noopener ugc nofollow" target="_blank">网站</a>。如果你喜欢这样的话题，那么你可能也会喜欢我的Youtube频道。如果你想支持更多这样的内容<a class="ae lq" href="https://www.buymeacoffee.com/andrewcourter" rel="noopener ugc nofollow" target="_blank"> buymeacoffee </a>。祝您愉快！</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="6868" class="ls lk it bd lt lu nb lw lx ly nc ma mb mc nd me mf mg ne mi mj mk nf mm mn mo bi translated">分级编码</h1><p id="c2ee" class="pw-post-body-paragraph jq jr it js b jt mp jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj mt kl km kn im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="3139" class="ng nh it js b jt ju jx jy kb ni kf nj kj nk kn nl nm nn no bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="1f47" class="ng nh it js b jt np jx nq kb nr kf ns kj nt kn nl nm nn no bi translated">📰查看<a class="ae lq" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="71cc" class="ng nh it js b jt np jx nq kb nr kf ns kj nt kn nl nm nn no bi translated">🔔关注我们:<a class="ae lq" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae lq" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae lq" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="c16a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">🚀👉<a class="ae lq" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">加入升级达人集体，找到一份惊艳的工作</strong> </a></p></div></div>    
</body>
</html>