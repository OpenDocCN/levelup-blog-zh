<html>
<head>
<title>Opensource 5G Core With Service Mesh</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有服务网格的开源5G核心</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/opensource-5g-core-with-service-mesh-bba4ded044fa?source=collection_archive---------4-----------------------#2021-03-21">https://levelup.gitconnected.com/opensource-5g-core-with-service-mesh-bba4ded044fa?source=collection_archive---------4-----------------------#2021-03-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="acb2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这篇博客文章展示了如何在Kubernetes上部署带有服务网格的开源5G核心。</p><p id="26f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">注意——假设对kubernetes和电信有所了解。</em></p><h1 id="e53c" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">组件:</h1><ul class=""><li id="acff" class="lk ll iq jp b jq lm ju ln jy lo kc lp kg lq kk lr ls lt lu bi translated">Kubernetes v1.21版</li><li id="2ed8" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">印花布CNI</li><li id="750f" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">Open5gs 5G内核</li><li id="ef9b" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">Linkerd稳定版-2.10.0</li><li id="0355" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">头盔v3</li><li id="8479" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">UERANSIM v3.1.4 (gNB和UE模拟器)</li></ul><p id="1f3c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">服务网格使这变得有趣，因为5G组件SBI是http2流量，以便它们可以像任何其他http应用一样被处理(服务路由、电路中断等)。唯一的例外是UPF，它只使用GTP大学和PFCP大学。这意味着UPF将不会有一个链接代理侧车。</p><p id="b5dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">部署步骤:</p><ol class=""><li id="2fd5" class="lk ll iq jp b jq jr ju jv jy ma kc mb kg mc kk md ls lt lu bi translated">创建一个kubernetes集群(kubespray、rancher、eks、gke等)。</li><li id="6b9c" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk md ls lt lu bi translated">在kubernetes集群中安装Linkerd:</li></ol><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="df45" class="mn kn iq mj b gy mo mp l mq mr">linkerd install | kubectl apply -f -</span><span id="7a02" class="mn kn iq mj b gy ms mp l mq mr">linkerd viz install | kubectl apply -f - # on-cluster metrics stack</span></pre><p id="6f22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.克隆git repo:<a class="ae mt" href="https://bitbucket.org/infinitydon/opensource-5g-core-service-mesh/src/main/" rel="noopener ugc nofollow" target="_blank">https://bit bucket . org/infinity don/open source-5g-core-service-mesh . git</a></p><p id="70d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.舵图很简单，你可以保持默认值不变，或者改变一些参数，如mnc，mcc等。</p><p id="2f3d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">5.安装open5gs 5G内核:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="bc33" class="mn kn iq mj b gy mo mp l mq mr">## Create the namespace with linkerd auto injection<br/>kubectl create -f namespace.yaml</span><span id="dbf5" class="mn kn iq mj b gy ms mp l mq mr">## Install open5gs 5G helm chart<br/>helm -n open5gs install -f values.yaml 5gcore ./</span></pre><p id="60c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">6.一些组件的状态:</p><figure class="me mf mg mh gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi mu"><img src="../Images/93fef9a8323c9a05f797a1f515d1865f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CQxq45mp5papsDOoKkVfmg.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk translated">除UPF外，5G Pods采用Linkerd侧车代理</figcaption></figure><figure class="me mf mg mh gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi ng"><img src="../Images/b3941d6eaa150adec983c4d70e51d070.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OWXwHG4mucrZ6WZej6ixqQ.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk translated">AMF吊舱</figcaption></figure><figure class="me mf mg mh gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi ng"><img src="../Images/996abbfd74ffc687ce4e7ad1510e1237.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IF83LbU_eW8I4_15_J1zwg.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk translated">SMF吊舱</figcaption></figure><figure class="me mf mg mh gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi ng"><img src="../Images/9e04e7f4e0fc9ca417b9b2e096bdab2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c_YaeK3xrdRoqOMMz03PdA.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk translated">UPF吊舱</figcaption></figure><p id="ebbc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="kl"> UE和gNB测试:</em> </strong></p><ol class=""><li id="2651" class="lk ll iq jp b jq jr ju jv jy ma kc mb kg mc kk md ls lt lu bi translated">在open5gs web-ui中创建一个订户，您可以使用端口转发来访问pod</li><li id="ccfd" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk md ls lt lu bi translated">在单独的虚拟机中安装UERANSIM，并配置必要的参数。</li><li id="af9e" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk md ls lt lu bi translated">gNB和UE状态的输出:</li></ol><figure class="me mf mg mh gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi nh"><img src="../Images/76b389e60b513c3574def90ad7d04c0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L206Aj0Krl8ZQqJlcVe7pg.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk translated">gNB状态</figcaption></figure><figure class="me mf mg mh gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi ng"><img src="../Images/fb835dbfc20426e33608585ee373e970.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uMsU-S91PCbLhLn5MYZzjg.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk translated">UE状态</figcaption></figure><p id="8b03" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">UE已经能够成功地向5G核心注册。</p><p id="3a88" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们看看Linkerd服务网格统计的状态:</p><figure class="me mf mg mh gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi ni"><img src="../Images/9c790b3f7377dffca984c08095a97e10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4uE4u2byz5z1xzbhcxkOeA.png"/></div></div></figure><figure class="me mf mg mh gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi nj"><img src="../Images/aac0489680ba8cc0f8e84153b3184011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9bmNIXVwXi9rQu0g723ZPQ.png"/></div></div></figure><figure class="me mf mg mh gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi nk"><img src="../Images/b819159614366399df22d76d1129dca2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*FwJPbHGqTHw640kgxevsCA.png"/></div></div></figure><figure class="me mf mg mh gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi nl"><img src="../Images/743dba9c491719c2e8bc0323d1ec7143.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EpnTH2uVGVE7UEKQylPtEg.png"/></div></div></figure><figure class="me mf mg mh gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi nm"><img src="../Images/2bb2fbab22a93bf6133a42958b9b1be8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oPk4_HM_bv40G3LGjT19tQ.png"/></div></div></figure><p id="3d4f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">总之，我很高兴看到电信堆栈有可能使用企业技术堆栈。有了像Linkerd这样的服务网状网络，就可以使用SBI来完成像服务路由这样的进一步配置。当我们开始看到服务通信代理(本质上是服务网格所做的)的实现时，这将是非常有趣的。</p><p id="8bde" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">参考资料:</p><ul class=""><li id="b74d" class="lk ll iq jp b jq jr ju jv jy ma kc mb kg mc kk lr ls lt lu bi translated"><a class="ae mt" href="https://github.com/open5gs/open5gs" rel="noopener ugc nofollow" target="_blank">https://github.com/open5gs/open5gs</a></li><li id="edef" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated"><a class="ae mt" href="https://linkerd.io/2.10/getting-started/" rel="noopener ugc nofollow" target="_blank">https://linkerd.io/2.10/getting-started/</a></li><li id="142a" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated"><a class="ae mt" href="https://github.com/aligungr/UERANSIM/wiki/Installation" rel="noopener ugc nofollow" target="_blank">https://github.com/aligungr/UERANSIM/wiki/Installation</a></li></ul><p id="dcaa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">页（page的缩写）S —如果您想深入了解使用Multus、SR-IOV、pods中的多个网络接口等技术的裸机/本地kubernetes网络，那么您可以在Udemy上查看我的课程(您可以使用课程页面上的优惠券代码获得折扣):</p><p id="d2ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae mt" href="https://www.udemy.com/course/kubernetes-baremetal-networking-using-gns3/?referralCode=99D5F4AAFCF769E8DEB6" rel="noopener ugc nofollow" target="_blank">https://www . udemy . com/course/kubernetes-bare metal-networking-using-GNS 3/？referral code = 99 D5 F4 aafcf 769 E8 deb 6</a></p></div></div>    
</body>
</html>