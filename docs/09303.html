<html>
<head>
<title>AWS multi-account architecture with AWS Single Sign-On</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有AWS单点登录的AWS多帐户体系结构</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/aws-multi-account-architecture-with-aws-single-sign-on-f70af7d7663?source=collection_archive---------10-----------------------#2021-07-25">https://levelup.gitconnected.com/aws-multi-account-architecture-with-aws-single-sign-on-f70af7d7663?source=collection_archive---------10-----------------------#2021-07-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="57b0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">多帐户体系结构为客户提供了全面的治理、安全性、成本优化以及对其AWS环境和资源的控制。</p><p id="e487" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有了<strong class="js iu"> AWS控制塔</strong>，我们就有了<strong class="js iu"> </strong> <em class="ko">登陆区</em>，通过它我们可以使用<em class="ko"> AWS组织</em>轻松创建一个安全的多账户AWS环境。</p><p id="9c69" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">自动气象站控制塔为我们提供:-</p><ol class=""><li id="28db" class="kp kq it js b jt ju jx jy kb kr kf ks kj kt kn ku kv kw kx bi translated"><strong class="js iu">防护栏</strong> —既<em class="ko">预防性</em> &amp; <em class="ko">检测性</em>防护栏，用于对注册的AWS帐户实施策略</li><li id="dd61" class="kp kq it js b jt ky jx kz kb la kf lb kj lc kn ku kv kw kx bi translated"><strong class="js iu">帐户工厂</strong> —提供新的AWS帐户，并使用管理的网络配置注册现有帐户</li></ol><p id="a80c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">前往AWS控制台和AWS控制塔服务，并按照指示建立着陆区。</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi ld"><img src="../Images/97130aa94cc8c54cd76ddfa11908ab9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aQ-bbcMeoWwQ-kuLe3jkjQ.png"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk translated">自动气象站控制塔</figcaption></figure><p id="3e06" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">默认情况下，AWS会将<strong class="js iu"> <em class="ko">日志归档</em> </strong>和<strong class="js iu"> <em class="ko">审计</em> </strong>账户作为基础OU的一部分。作为组织治理的一部分，您可以根据需要添加额外的ou。</p><p id="2823" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下架构描述了一个典型的多账户AWS环境，其中包含不同的<em class="ko">组织单位(ou)和账户</em> :-</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi lt"><img src="../Images/f7d6a27b375bfd2eb02b4751162ae4dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LK9QZkIpl_VQPI8GpUxexg.jpeg"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk translated">AWS多账户架构</figcaption></figure><p id="2851" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">设置完成后，通常AWS控制塔仪表板看起来与下图相似，其中包含OU、注册帐户和护栏的摘要:-</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi lu"><img src="../Images/bb0bbd9b81cad32be6ab89ea229f56b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XBiuX9uGuXgWycDIVfr34g.png"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk translated">AWS控制塔仪表板</figcaption></figure><p id="d45c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果有一个帐户不符合预防性护栏，那么它也会在这里提醒那些。</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi lv"><img src="../Images/0cccbafa83623645c5e547d34bfab077.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t_uVwo2_Kepx-ssU5joJzA.png"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk translated">AWS控制塔仪表板</figcaption></figure><p id="79ca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要注册一个新帐户，请单击“<strong class="js iu">帐户工厂</strong>”链接(在仪表板菜单链接上)，然后单击“<strong class="js iu">注册帐户</strong>”。</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi lw"><img src="../Images/bc3d833bdfc2ed566d4436d487f3770f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UUEfVz5YugUMoxUr3mdugw.png"/></div></div></figure><p id="eb85" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用(新帐户的)管理电子邮件地址和SSO电子邮件详细信息填写详细信息，并选择新帐户所属的适当OU:-</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi lx"><img src="../Images/a8738c41805c94e60218f8a063f8c362.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PtzXKuDFXOqoNvkuBD-JGA.png"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk translated">帐户工厂—新帐户注册</figcaption></figure><p id="0e0c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您还可以使用AWS CloudFormation StackSets和StackSet实例，通过CLI或CI/CD实现资源部署的自动化。</p><p id="5664" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">与新帐户关联的用户将收到来自AWS控制塔的电子邮件，其中包含使用AWS SSO登录的用户门户URL(单点登录)。</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi ly"><img src="../Images/b5931e3855d1c8510d2417252d59344c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Je-tOZbcwIoSUZdxENRvyg.png"/></div></div></figure><p id="2c2f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，默认情况下，用户注册为AWS SSO本地目录的一部分，并获得相关的权限集(角色)来访问他们的帐户。像Google G-Suite或Okta这样的外部第三方身份提供商也可以利用这一点。</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi lz"><img src="../Images/93f09f70fbcce353ab122f9e258bf58f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qxstI82LR67O8L_N2wJnfA.png"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk translated">AWS SSO</figcaption></figure><p id="d4aa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">用户现在可以使用给定的权限登录各自的帐户。</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi ma"><img src="../Images/481ab1f2a67475ff31ff2833a668cb25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3qr39kcSbDvpbecNjjZxog.png"/></div></div></figure><h1 id="8e0c" class="mb mc it bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">总结:</h1><p id="14c6" class="pw-post-body-paragraph jq jr it js b jt mz jv jw jx na jz ka kb nb kd ke kf nc kh ki kj nd kl km kn im bi translated">有了AWS控制塔，您可以轻松地建立一个安全、完全受控的多帐户架构。默认情况下，用户在AWS SSO中注册为本机目录，但是我们也可以将它用于作为外部身份提供者(如Okta)一部分的联合用户。</p><p id="fcb5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">希望你喜欢这篇文章:)</p><p id="0761" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在下一篇博客中，我将向您展示如何轻松集成像Okta这样的外部身份提供者和AWS控制塔。</p></div></div>    
</body>
</html>