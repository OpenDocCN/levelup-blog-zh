<html>
<head>
<title>useViewport custom hook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用视口自定义挂钩</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/useviewport-custom-hook-575f385fdf9e?source=collection_archive---------10-----------------------#2022-03-24">https://levelup.gitconnected.com/useviewport-custom-hook-575f385fdf9e?source=collection_archive---------10-----------------------#2022-03-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="01a5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个简单的自定义钩子来访问屏幕尺寸类型。有用的获取isMobile，isTablet和isDesktop布尔值。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a3da640b39224381b8f3d8846ee1a11b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XYrKKlO80XBJ4-iN"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">以赛亚·贝克斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h2 id="d1af" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">为什么我们需要关于视窗的信息？</h2><p id="bd28" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">使用web应用程序，我们希望为页面用户提供最佳体验。这意味着要认识到在桌面模式下呈现一个元素是否比在移动设备上更好，反之亦然。</p><p id="b309" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries" rel="noopener ugc nofollow" target="_blank"> CSS媒体查询</a>非常擅长处理这些场景，帮助根据屏幕大小应用合适的样式。</p><p id="d9ed" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">但是有时，为了在不同的视窗上呈现正确的内容，我们需要使用JavaScript在脚本级别管理这个逻辑。</p><p id="1be0" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">一个简单的例子是根据屏幕大小呈现不同的文本:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/1be989833c75fc6def586ba058a168c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y6oW6_dtZxbpOevSZnRzJA.png"/></div></div></figure><p id="fd0f" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">幸运的是，React自定义挂钩“useMediaQuery”有助于实现这一目的，它提供了从React编写的组件直接访问媒体查询结果的功能。</p><h2 id="3a4d" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">那我为什么需要useViewport？</h2><p id="7373" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">“useMediaQuery”自定义挂钩对于检索传递的媒体查询的布尔值非常有用，但是当在代码库中多次使用它时，它可能会使代码变得有点不可读和难以理解。</p><p id="692a" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">这就是为什么，利用钩子的可组合性，我们可以将这种重复的逻辑抽象成“useViewport”自定义钩子。</p><h2 id="8cff" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">useViewport技术实现</h2><p id="cfc4" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">React开发人员通常使用一些布尔标志来了解当前设备是否具有典型的移动、平板或桌面视口大小。</p><p id="bc08" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">这意味着我们的定制钩子必须至少返回这三个值，我们将记为:</p><ul class=""><li id="184a" class="mu mv it lx b ly mo mb mp li mw lm mx lq my mn mz na nb nc bi translated"><strong class="lx iu"> isMobile </strong></li><li id="0e38" class="mu mv it lx b ly nd mb ne li nf lm ng lq nh mn mz na nb nc bi translated"><strong class="lx iu">istatable t</strong></li><li id="ab24" class="mu mv it lx b ly nd mb ne li nf lm ng lq nh mn mz na nb nc bi translated"><strong class="lx iu"> isDesktop </strong></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/448c76fd1509d5ee815b3acae6dedc4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aZ-LG-sXcYlChiLDQYJvhg.png"/></div></div></figure><p id="601b" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">在这个实现中，我使用<a class="ae ky" href="https://github.com/tonyghiani/mountain-ui/blob/master/packages/react-hooks/src/useMediaQuery/useMediaQuery.ts" rel="noopener ugc nofollow" target="_blank"> useMediaQuery钩子</a>来检索设备是移动设备还是平板设备，并且使用这两个布尔值，我可以直接将所有其他设备分类为桌面模式。</p><p id="e397" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">显然，您可以为您的应用程序定义您喜欢的媒体断点，实现中使用的那些只是可能传递媒体查询以使用media query的示例。</p><h2 id="79af" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">包扎</h2><p id="b015" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">现在我们已经准备好了钩子，我们终于可以完成之前未完成的用例实现了:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/c8a335ec1f316ba295df69a390e08375.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a4QowOLBoB2wNzbXJ65Ang.png"/></div></div></figure></div></div>    
</body>
</html>