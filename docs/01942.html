<html>
<head>
<title>The Quick Overview of AWS Organizations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS组织的快速概述</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/the-quick-lowdown-on-aws-organizations-c55775bf45f9?source=collection_archive---------13-----------------------#2020-02-07">https://levelup.gitconnected.com/the-quick-lowdown-on-aws-organizations-c55775bf45f9?source=collection_archive---------13-----------------------#2020-02-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/eb55586c780ba2c5c55e96c201793cb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*47wDYCTLRpEbOwo5.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">图:AWS组织层次结构。来源:<a class="ae kc" href="https://docs.aws.amazon.com/organizations/latest/userguide/images/BasicOrganization.png" rel="noopener ugc nofollow" target="_blank">亚马逊</a>。</figcaption></figure><p id="fc03" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">几年前，亚马逊将他们的VPC ( <a class="ae kc" href="https://docs.aws.amazon.com/vpc/latest/userguide/what-is-amazon-vpc.html" rel="noopener ugc nofollow" target="_blank">虚拟私有云</a>)服务宣传为顶级隔离，他们没有为多账户配置提供很多支持。更大、更复杂的客户没有这种能力，他们开始使用多账户架构来实现计费、安全性和弹性的隔离。Amazon顺应用户需求，逐渐支持帐户的管理合并和跨帐户通信。<a class="ae kc" href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_introduction.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> AWS组织</strong> </a>现在是支持多账户策略的正式架构。</p><p id="7943" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于我们这些在多账户策略成为(受支持的)事物之前就开始使用AWS的人来说，或者对于任何还没有跟上这种新的多账户范例的人来说，这篇文章将很快触及重要的概念。</p><h2 id="b186" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">I .仅仅通过设置会破坏任何东西吗？</h2><p id="1884" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">在一个帐户中，您创建一个组织，然后该帐户成为主帐户。主帐户<strong class="kf ir">中的所有内容都继续像您通常预期的那样运行</strong>。</p><p id="4280" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">主账户现在将正式拥有所有<strong class="kf ir">成员账户</strong>和成员账户资源。<a class="ae kc" href="https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/consolidated-billing.html" rel="noopener ugc nofollow" target="_blank">所有开票合并</a>至主账户(注意:您可以创建一个<a class="ae kc" href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_getting-started_concepts.html#feature-set-cb-only" rel="noopener ugc nofollow" target="_blank"> <em class="lz">开票合并，仅限</em> </a>组织)。</p><p id="ac36" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">主账户可以<strong class="kf ir">以编程方式提供新成员账户</strong>或<strong class="kf ir">向现有账户发送邀请</strong>加入组织。当一个帐户加入一个组织时，它将受该组织的政策约束。你能把一个账户拆回来吗？是的，从主账户。</p><p id="d413" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">主帐户获得了许多控制成员帐户中的操作的新方法，但是新组织的默认配置不包括限制性策略，因此成员帐户将继续正常运行<strong class="kf ir">直到您有目的地从主帐户配置策略。</strong></p><p id="b830" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以不，如果你创建一个组织，它可能不会破坏任何东西！</p><h2 id="b7eb" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">二。它提供什么？</h2><p id="eb82" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">除了合并计费之外，以下是您可能希望使用AWS组织的一些原因:</p><ol class=""><li id="83ca" class="ma mb iq kf b kg kh kk kl ko mc ks md kw me la mf mg mh mi bi translated"><strong class="kf ir">可见性</strong> —组织提供跨所有成员帐户的<a class="ae kc" href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_integrated-services-list.html" rel="noopener ugc nofollow" target="_blank">服务汇总视图</a>，提供有用的管理、监控和合规性统计数据。这主要是通过<a class="ae kc" href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_integrate_services.html" rel="noopener ugc nofollow" target="_blank">可信访问</a>概念实现的。</li><li id="2179" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated"><strong class="kf ir">控制</strong> — <a class="ae kc" href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scp.html" rel="noopener ugc nofollow" target="_blank">服务控制策略</a>(scp)提供了一个按帐户进行权限管理的集中控制层——想象一下<a class="ae kc" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction.html" rel="noopener ugc nofollow" target="_blank"> IAM </a>应用于整个帐户。当然，这里讨论的其他项目也有控制含义；需要特别注意的是，新的架构(参见第4 / V节)使得对网络/VPC的控制与对部署到其中的内容的控制分离开来。</li><li id="c8dd" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated"><strong class="kf ir">标记合规性</strong> — <a class="ae kc" href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_tag-policies.html" rel="noopener ugc nofollow" target="_blank">标记策略</a>提供了一种集中审核标记策略合规性的方法，并且可以选择强制执行。(一个急需的能力！)</li><li id="d5b7" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated"><strong class="kf ir">新架构</strong> —组织支持共享VPC和更强大地使用<a class="ae kc" href="https://docs.aws.amazon.com/ram/latest/userguide/what-is.html" rel="noopener ugc nofollow" target="_blank">资源访问管理</a> (RAM)服务。</li></ol><h2 id="ae30" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">三。更多关于控制。</h2><p id="7081" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">组织为成员帐户引入了分组概念(见上图)。单个<strong class="kf ir">根</strong>包含<strong class="kf ir">账户</strong>和<strong class="kf ir">组织单位</strong>。组织单位是对客户进行分组的一种方式，最多可嵌套5层。</p><p id="526f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">主帐户可以创建服务控制策略(scp ),并将其应用于任何帐户或OU。该模型是这样工作的:</p><ol class=""><li id="c97a" class="ma mb iq kf b kg kh kk kl ko mc ks md kw me la mf mg mh mi bi translated">一切都被禁用了。</li><li id="306d" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated"><strong class="kf ir">白名单</strong>中的策略支持访问服务和操作。默认策略提供所有访问权限。</li><li id="3e1e" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">然后<strong class="kf ir">黑名单</strong>中的策略移除对服务和动作的访问。默认不应用任何限制。</li></ol><p id="b7f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">明确地说，SCP充当IAM前的过滤器，因此如果成员帐户上的SCP禁用所有S3活动，该成员帐户中的完全访问管理员将根本无法使用S3。SCP可以基于应用于不同帐户和OU级别的策略进行分层，因此一个帐户将有一个<strong class="kf ir">有效SCP </strong>。scp的<a class="ae kc" href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_reference_scp-syntax.html" rel="noopener ugc nofollow" target="_blank">语法</a>类似于IAM，AWS提供了大量<a class="ae kc" href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_example-scps.html" rel="noopener ugc nofollow" target="_blank">有用的示例</a>。</p><h2 id="dc52" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">四。有关标记合规性的更多信息。</h2><p id="9354" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">AWS组织支持创建标记策略，这些策略规定了大小写、允许的标记键、标记键的允许值等。可以运行符合性报告来显示所有成员帐户中的不符合资源。</p><p id="a087" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，标记策略和合规性报告仅包括已标记的资源，完全未标记的资源不在此功能范围内！有些不直观的是，您可以强制资源获得某些标记，但是您必须使用scp而不是标记策略，如这个<a class="ae kc" href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_example-scps.html#example-require-tag-on-create" rel="noopener ugc nofollow" target="_blank">示例</a>所示。</p><p id="c2a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上述SCP策略和使用<a class="ae kc" href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_tag-policies-enforcement.html" rel="noopener ugc nofollow" target="_blank">标记策略</a>之间，相当完整的标记实施是可能的。请注意，强制将阻止相关操作的发生，有时是以不明显的方式(例如，当一个资源向另一个资源传播标记时)。事实上，AWS反复建议按照这里的步骤<a class="ae kc" href="https://docs.aws.amazon.com/organizations/latest/userguide/tag-policies-getting-started.html" rel="noopener ugc nofollow" target="_blank">来逐步理解标签策略是如何工作的。</a></p><h2 id="1ad7" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">动词 （verb的缩写）更多关于新架构的信息。</h2><p id="2488" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">AWS资源访问管理器(RAM)是在帐户之间共享资源的一种方式；AWS组织让它变得更好。使用RAM，您可以创建一个受<a class="ae kc" href="https://docs.aws.amazon.com/ram/latest/userguide/shareable.html" rel="noopener ugc nofollow" target="_blank">支持的</a> <strong class="kf ir">资源共享</strong>和一个<strong class="kf ir">主体</strong>(另一个您想要共享的帐户)。主体收到邀请，必须接受邀请才能创建共享。对于AWS组织，邀请过程消失了，主体可以是ou或整个组织，从而实现更简单和更灵活的共享(例如，您与“开发”OU共享访问权限，当您添加新的开发帐户时，他们会自动接收共享)。</p><p id="f418" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最关键的是，AWS在re:Invent 2018上发布了<a class="ae kc" href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-sharing.html" rel="noopener ugc nofollow" target="_blank"> VPC分享</a>，仅在组织内部提供。添加共享VPC是一件非常大的事情，我推荐最近的<a class="ae kc" href="https://aws.amazon.com/blogs/networking-and-content-delivery/vpc-sharing-a-new-approach-to-multiple-accounts-and-vpc-management/" rel="noopener ugc nofollow" target="_blank">帖子</a>和<a class="ae kc" href="https://youtu.be/ar6sLmJ45xs?t=1361" rel="noopener ugc nofollow" target="_blank"> 2018演讲</a>的部分内容(注意:链接将带您进入最相关部分的开头)，以了解如何在您的架构设计中使用它。</p><p id="859d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">特别值得一提的是，VPC共享意味着你可以做一些新的事情，例如:</p><ul class=""><li id="b6a0" class="ma mb iq kf b kg kh kk kl ko mc ks md kw me la mo mg mh mi bi translated">您的网络团队可以拥有贵公司其他人使用的VPC上的网络配置，但不能更改，</li><li id="1c37" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mo mg mh mi bi translated">通过将跨帐户流量保持在更少的VPC中，您可以更灵活地避免支付AWS数据传输费用，并且</li><li id="17d3" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mo mg mh mi bi translated">您可以在设计时考虑单独的帐户(用于计费、安全性或弹性隔离)，而不必与单独的VPC相对应。</li></ul><h2 id="86f0" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">TL；速度三角形定位法(dead reckoning)</h2><p id="ee14" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">除非您要求，否则AWS组织可能不会破坏您的设置！它支持VPC共享和标记执行功能。它在帐户层启用了一个新的类似IAM的层。此外，它还提供了很好的工具，可以在跨客户级别汇总和管理大量可见性、合规性和监控内容。因此，如果其中任何一个看起来像相关的用例，可能都值得你花时间深入挖掘<a class="ae kc" href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_introduction.html" rel="noopener ugc nofollow" target="_blank"> AWS组织</a>。</p><p id="48a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<a class="ae kc" href="https://www.linkedin.com/pulse/quick-lowdown-aws-organizations-matt-lievertz/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上交叉发布。</p></div></div>    
</body>
</html>