<html>
<head>
<title>Using Python/Nodejs to Remove Background from Image</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python/Nodejs去除图像背景</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/using-python-nodejs-to-remove-background-from-image-3953504082c6?source=collection_archive---------1-----------------------#2022-10-31">https://levelup.gitconnected.com/using-python-nodejs-to-remove-background-from-image-3953504082c6?source=collection_archive---------1-----------------------#2022-10-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="f4e8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">每天都有很多来自各种来源的照片在各种网站上传播。有些时候，你想只提取照片的主要部分。本文旨在指导您如何使用和不使用简单的python编程来修剪背景表单图像。</p><p id="4784" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是一张漂亮女孩的照片。除了背景模糊之外，一切看起来都很好！</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/94779aaea16c5745de4e989eb1d1621e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*dEZfmRzzOKxdEVpXOUptWQ.jpeg"/></div></div></figure><p id="7929" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">经过潜水和挖掘，我终于在这里得到了一个干净纯粹的版本</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi la"><img src="../Images/0e858472c0437b18cb4d7f9b820b1ade.png" data-original-src="https://miro.medium.com/v2/resize:fit:678/format:webp/1*X22Lb95ZvJhIETKsIcC7kw.png"/></div></figure><h1 id="5ae1" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">首先，没有代码的方式</h1><p id="a661" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">这个网站可以帮你<a class="ae me" href="https://www.remove.bg/" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">去除背景</strong> </a></p><p id="a03a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它看起来像下面</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mf"><img src="../Images/cabbc275d8df2a383274fe77af634c8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D7oduEsqCQEDbHu0sBXeZw.jpeg"/></div></div></figure><p id="4d7b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如它所描述的，它可以(接近)100%自动和免费(在一定条件下)去除图像背景，能够识别人与背景，产品与背景。据称，这一切都在不到5秒的时间内完成。</p><p id="db70" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它也有Python，Ruby和深度学习工具的服务，用API实现从图像中修剪背景。</p><h1 id="9e7f" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">然后，编程方式</h1><p id="9dfa" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">首先，我们需要在这个网站注册一个帐户。这很简单，只需要你自己的邮箱。</p><p id="69c8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在开始的时候，有了API访问，你每个月只能处理50张图片。如果使用website，使用次数没有限制。</p><p id="e798" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">预备步骤:抓取你的样本图像并知道它的路径</p><h2 id="027c" class="mg lc it bd ld mh mi dn lh mj mk dp ll kb ml mm lp kf mn mo lt kj mp mq lx mr bi translated"><strong class="ak">第一章</strong></h2><p id="4f06" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">登录后，</p><ul class=""><li id="d9a5" class="ms mt it js b jt ju jx jy kb mu kf mv kj mw kn mx my mz na bi translated">第1步“工具和API”</li><li id="af9f" class="ms mt it js b jt nb jx nc kb nd kf ne kj nf kn mx my mz na bi translated">步骤2 'API文档'</li><li id="a12f" class="ms mt it js b jt nb jx nc kb nd kf ne kj nf kn mx my mz na bi translated">步骤3“获取API密钥”:</li><li id="39ad" class="ms mt it js b jt nb jx nc kb nd kf ne kj nf kn mx my mz na bi translated">第四步“展示”</li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mf"><img src="../Images/d061b45cd65012badda16b86b6159f58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3mSmpy2Dumg54F7HayQ1Sw.jpeg"/></div></div></figure><p id="bd31" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">第二章Python </strong></p><p id="b044" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.1准备好您的环境并构建python控制台应用程序。</p><p id="d535" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">依赖:<code class="fe ng nh ni nj b">requests</code>，<code class="fe ng nh ni nj b">removebg</code></p><pre class="kp kq kr ks gt nk nj nl nm aw nn bi"><span id="358d" class="mg lc it nj b gy no np l nq nr">pip install -i requests removebg</span></pre><h2 id="debd" class="mg lc it bd ld mh mi dn lh mj mk dp ll kb ml mm lp kf mn mo lt kj mp mq lx mr bi translated">2.2.1带web api的Python代码</h2><pre class="kp kq kr ks gt nk nj nl nm aw nn bi"><span id="8c84" class="mg lc it nj b gy no np l nq nr"># Requires "requests" to be installed (see python-requests.org)<br/>import requests<br/><br/>response = requests.post(<br/>    'https://api.remove.bg/v1.0/removebg',<br/>    files={'image_file': open('/path/to/file.jpg', 'rb')},<br/>    data={'size': 'auto'},<br/>    headers={'X-Api-Key': 'INSERT_YOUR_API_KEY_HERE'},<br/>)<br/>if response.status_code == requests.codes.ok:<br/>    with open('no-bg.png', 'wb') as out:<br/>        out.write(response.content)<br/>else:<br/>    print("Error:", response.status_code, response.text)</span></pre><h2 id="976a" class="mg lc it bd ld mh mi dn lh mj mk dp ll kb ml mm lp kf mn mo lt kj mp mq lx mr bi translated">2.2.2带库的Python代码</h2><p id="8748" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">2.2.1准备好您的环境并构建一个简单的节点控制台应用程序。</p><pre class="kp kq kr ks gt nk nj nl nm aw nn bi"><span id="7000" class="mg lc it nj b gy no np l nq nr">from removebg import RemoveBg<br/><br/>rmbg = RemoveBg("YOUR-API-KEY", "error.log")<br/>rmbg.remove_background_from_img_file("joker.jpg")</span></pre><h2 id="f2ba" class="mg lc it bd ld mh mi dn lh mj mk dp ll kb ml mm lp kf mn mo lt kj mp mq lx mr bi translated">第三章节点</h2><p id="a851" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">3.1准备好您的环境并构建一个python控制台应用程序。</p><p id="9160" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">依赖:<code class="fe ng nh ni nj b">axios</code>、<code class="fe ng nh ni nj b">form-data</code>、<code class="fe ng nh ni nj b">remove.bg</code></p><pre class="kp kq kr ks gt nk nj nl nm aw nn bi"><span id="44a2" class="mg lc it nj b gy no np l nq nr">npm i <!-- -->axios form-data <!-- -->remove.bg</span></pre><p id="0551" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.2.1通过web API的节点代码</p><pre class="kp kq kr ks gt nk nj nl nm aw nn bi"><span id="c5e8" class="mg lc it nj b gy no np l nq nr">// Requires "axios" and "form-data" to be installed (see https://www.npmjs.com/package/axios and https://www.npmjs.com/package/form-data)<br/>const axios = require('axios');<br/>const FormData = require('form-data');<br/>const fs = require('fs');<br/>const path = require('path');<br/><br/>const inputPath = '/path/to/file.jpg';<br/>const formData = new FormData();<br/>formData.append('size', 'auto');<br/>formData.append('image_file', fs.createReadStream(inputPath), path.basename(inputPath));<br/><br/>axios({<br/>  method: 'post',<br/>  url: 'https://api.remove.bg/v1.0/removebg',<br/>  data: formData,<br/>  responseType: 'arraybuffer',<br/>  headers: {<br/>    ...formData.getHeaders(),<br/>    'X-Api-Key': 'INSERT_YOUR_API_KEY_HERE',<br/>  },<br/>  encoding: null<br/>})<br/>.then((response) =&gt; {<br/>  if(response.status != 200) return console.error('Error:', response.status, response.statusText);<br/>  fs.writeFileSync("no-bg.png", response.data);<br/>})<br/>.catch((error) =&gt; {<br/>    return console.error('Request failed:', error);<br/>});<!-- --> </span></pre><p id="731a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.2.2带库的节点代码</p><pre class="kp kq kr ks gt nk nj nl nm aw nn bi"><span id="d20b" class="mg lc it nj b gy no np l nq nr">import { RemoveBgResult, RemoveBgError, removeBackgroundFromImageFile } from "remove.bg";<br/> <br/>const localFile = "./local/file/name.jpg";<br/>const outputFile = `${__dirname}/out/img-removed-from-file.png`;<br/> <br/>removeBackgroundFromImageFile({<br/>  path: localFile,<br/>  apiKey: "YOUR-API-KEY",<br/>  size: "regular",<br/>  type: "auto",<br/>  scale: "50%",<br/>  outputFile <br/>}).then((result: RemoveBgResult) =&gt; {<br/> console.log(`File saved to ${outputFile}`);<br/>  const base64img = result.base64img;<br/>}).catch((errors: Array&lt;RemoveBgError&gt;) =&gt; {<br/> console.log(JSON.stringify(errors));<br/>});</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/408f57fc932938fffd56b2dc7777d1bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*tNiVsJC4fhoFr_uxIMphlg.jpeg"/></div></figure><p id="bfc5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢您通读。如果你想建造一个电报机器人，并开始向人们收费，赚取被动收入，请随意查看我的<a class="ae me" href="https://medium.com/@caopengau/a-step-by-step-guide-on-building-a-passive-income-stream-from-telegram-bot-69f3e85e14f7" rel="noopener">分步指南</a></p><p id="c365" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">行动呼吁</strong></p><p id="de5c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你觉得这个指南有帮助，请鼓掌并跟我来。通过<a class="ae me" href="https://medium.com/@caopengau/membership" rel="noopener">链接</a>加入medium，获取我和所有其他优秀作家在medium上发表的所有优质文章。</p></div></div>    
</body>
</html>