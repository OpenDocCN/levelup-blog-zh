<html>
<head>
<title>A Literate Programming Environment For Existing Repositories</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于现有知识库的有文化的编程环境</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-literate-programming-environment-for-existing-repositories-9e3cd7b47e1e?source=collection_archive---------7-----------------------#2021-08-11">https://levelup.gitconnected.com/a-literate-programming-environment-for-existing-repositories-9e3cd7b47e1e?source=collection_archive---------7-----------------------#2021-08-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="7632" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">文化编程是DevOps或变更集成/变更部署(CI/CD)的超集。我详述了如何通过为现有的Github库定制nbdev来实现有文化的编程。示例代码可以用于其他供应商的存储库，如Gitlab和Bitbucket。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ko"><img src="../Images/c69f796b3cea48fa4d577482020a3b96.png" data-original-src="https://miro.medium.com/v2/resize:fit:736/format:webp/1*MMMOtOqle0xdrUp_8CBGIw.png"/></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">图一。唐纳德的《有文化的编程》的书皮。来源:作者截图。</figcaption></figure><h1 id="49c4" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">什么是识字编程？</h1><blockquote class="ly"><p id="9bd3" class="lz ma it bd mb mc md me mf mg mh kn dk translated">识字编程是由<a class="ae mi" href="https://en.wikipedia.org/wiki/Donald_Knuth" rel="noopener ugc nofollow" target="_blank">唐纳德·克努特</a>引入的<a class="ae mi" href="https://en.wikipedia.org/wiki/Programming_paradigm" rel="noopener ugc nofollow" target="_blank">编程范式</a>，其中用<a class="ae mi" href="https://en.wikipedia.org/wiki/Natural_language" rel="noopener ugc nofollow" target="_blank">自然语言</a>如英语给<a class="ae mi" href="https://en.wikipedia.org/wiki/Computer_program" rel="noopener ugc nofollow" target="_blank">计算机程序</a>解释其逻辑，穿插<a class="ae mi" href="https://en.wikipedia.org/wiki/Macro_(computer_science)" rel="noopener ugc nofollow" target="_blank">宏</a>的<a class="ae mi" href="https://en.wikipedia.org/wiki/Snippet_(programming)" rel="noopener ugc nofollow" target="_blank">片段</a>和传统<a class="ae mi" href="https://en.wikipedia.org/wiki/Source_code" rel="noopener ugc nofollow" target="_blank">源代码</a>，从中可以生成<a class="ae mi" href="https://en.wikipedia.org/wiki/Compiler" rel="noopener ugc nofollow" target="_blank">可编译的</a>源代码— <a class="ae mi" href="https://en.wikipedia.org/wiki/Literate_programming" rel="noopener ugc nofollow" target="_blank">维基百科</a></p></blockquote><p id="e9f5" class="pw-post-body-paragraph jq jr it js b jt mj jv jw jx mk jz ka kb ml kd ke kf mm kh ki kj mn kl km kn im bi translated">按照最初的设想，文化编程将文档、代码和测试放在一个媒体中。</p><h1 id="f26e" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">nbdev是什么？</h1><blockquote class="ly"><p id="f309" class="lz ma it bd mb mc md me mf mg mh kn dk translated"><code class="fe mo mp mq mr b">nbdev</code>是一个允许你在<a class="ae mi" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> Jupyter Notebooks </a>中开发python库的库，把你所有的代码、测试和文档放在一个地方。— <a class="ae mi" href="https://github.com/fastai/nbdev" rel="noopener ugc nofollow" target="_blank"> nbdev项目</a>。</p></blockquote><p id="d494" class="pw-post-body-paragraph jq jr it js b jt mj jv jw jx mk jz ka kb ml kd ke kf mm kh ki kj mn kl km kn im bi translated">由<a class="ae mi" href="https://nbdev.fast.ai/tutorial.html" rel="noopener ugc nofollow" target="_blank"> nbdev </a>实施的识字编程使您的Jupyter笔记本媒体能够:</p><ol class=""><li id="fd2a" class="ms mt it js b jt ju jx jy kb mu kf mv kj mw kn mx my mz na bi translated">文档，然后为web生成一个完整的、带索引的、超链接的、可搜索的文档集；</li></ol><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nb"><img src="../Images/954e0343027caff5a0e7dcc2d6c62084.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_nrpAseF5EX3E_k3-PmqTw.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">图二。由nbdev自动生成的Web文档。来源:作者截图。</figcaption></figure><p id="70a0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.可选地，将文档自动部署到<a class="ae mi" href="https://readthedocs.org/" rel="noopener ugc nofollow" target="_blank">readthedocs.org。</a></p><p id="ac75" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.Jupyter笔记本版本控制；</p><p id="8a1f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4.从Jupyter笔记本媒体自动执行测试或组测试。您决定如何显示测试结果以及测试结果所需的任何后续行动；</p><p id="c44d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">5.将代码自动部署为PyPI包。；</p><p id="d1e6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">6.PyPI包的自动版本号管理；</p><p id="b4b1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">7.<a class="ae mi" href="https://nbdev.fast.ai/" rel="noopener ugc nofollow" target="_blank">还有更多……</a></p><p id="b48f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">文化编程及其实现作为nbdev作为DevOps或变更集成/变更部署(CI/CD)的超集。</p><h1 id="300f" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">新项目回购或现有项目回购</h1><p id="70e8" class="pw-post-body-paragraph jq jr it js b jt ng jv jw jx nh jz ka kb ni kd ke kf nj kh ki kj nk kl km kn im bi translated">你有两个选择:</p><ol class=""><li id="4ae6" class="ms mt it js b jt ju jx jy kb mu kf mv kj mw kn mx my mz na bi translated">您还没有为您的项目创建Github repo。您希望项目包括nbdev。[原始路径步骤不适用]详细介绍了这种情况。</li><li id="6c1d" class="ms mt it js b jt nl jx nm kb nn kf no kj np kn mx my mz na bi translated">您已经为项目创建了一个Github repo。您希望项目包括nbdev。[定制路径步骤注意]详细描述了这种情况。</li></ol><p id="f3bd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nq">注</em> </strong> <em class="nq"> : n为1，2，…n中的整数变量</em></p><h2 id="b8ad" class="nr lb it bd lc ns nt dn lg nu nv dp lk kb nw nx lo kf ny nz ls kj oa ob lw oc bi translated">[原步骤1a。]为新的Github Repo完成nbdev设置。</h2><ol class=""><li id="3313" class="ms mt it js b jt ng jx nh kb od kf oe kj of kn mx my mz na bi translated">遵循“<a class="ae mi" href="https://nbdev.fast.ai/tutorial.html" rel="noopener ugc nofollow" target="_blank"> nbdev通用教程”</a>中的说明，直到<a class="ae mi" href="https://nbdev.fast.ai/tutorial.html#Edit-settings.ini" rel="noopener ugc nofollow" target="_blank">编辑settings.ini </a>。</li><li id="fde0" class="ms mt it js b jt nl jx nm kb nn kf no kj np kn mx my mz na bi translated">创建了包含所有必需的nbdev文件的整个存储库。您可以继续nbdev设置的[原始步骤2]。</li></ol><p id="4190" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您想通过点击<a class="ae mi" href="https://github.com/fastai/nbdev_template/generate" rel="noopener ugc nofollow" target="_blank"> nbdev模板</a>为一个新的项目repo创建一个新的GitHub repo，那么步骤1a可以正常工作。</p><p id="e745" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nq">注意</em> </strong> <em class="nq">:如果你有一个Github的登录会话，新的repo被创建。</em></p><h2 id="d9c8" class="nr lb it bd lc ns nt dn lg nu nv dp lk kb nw nx lo kf ny nz ls kj oa ob lw oc bi translated">【定制步骤1b。]为现有Github Repo完成nbdev设置。</h2><p id="2829" class="pw-post-body-paragraph jq jr it js b jt ng jv jw jx nh jz ka kb ni kd ke kf nj kh ki kj nk kl km kn im bi translated">如果你已经有一个现有的Github repo，并希望该项目添加nbdev的功能，那么这些是我遵循的步骤。</p><ol class=""><li id="a7df" class="ms mt it js b jt ju jx jy kb mu kf mv kj mw kn mx my mz na bi translated">我完成了步骤1a。，但是我用了<repo-name> = <code class="fe mo mp mq mr b">nbdevtmp .</code></repo-name></li></ol><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi og"><img src="../Images/ff4888e51468af51f37ee6f572969e77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WBrYPa_iJ38IgvgAHALM8A.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">图3。点击“从模板创建存储库以重命名您的存储库——来源:作者截图。</figcaption></figure><p id="7aad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nq">注</em> </strong> <em class="nq">:您知道可以用模板创建回购吗？我现在知道了！</em></p><p id="689e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.你必须更新(推送)所有本地回购，每个本地开发沙箱到<existing-project-repo>。</existing-project-repo></p><p id="f06f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nq">注意</em> </strong> <em class="nq">:如果它们存在，在你的本地repo&lt;existing-project-repo&gt;重命名CONTRIBUTING.md，LICENSE，MANIFEST.in，README.md通过在名称字符串末尾打上x，例如，CONTRIBUTINGx.md、LICENSEx、MANIFESTx.in、READMEx.md。在步骤3之后，将这些文件中的任何冲突与来自</em> <code class="fe mo mp mq mr b"><em class="nq">nbdevtmp .</em></code>的合并文件进行协调</p><pre class="kp kq kr ks gt oh mr oi oj aw ok bi"><span id="0044" class="nr lb it mr b gy ol om l on oo">#<!-- -->git push -u origin &lt;branch-name&gt;<br/># what I did was...<br/>git push -u origin branch-ccce48bb-f718–4f68-b742–615886313f2a</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi op"><img src="../Images/90075cd487ae7173857d82db77d2654b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BSSxrgLUqdqWiIhwnRmYMQ.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">图4。一个来自本地存储库的请求合并。可能有几个本地的回购——来源:作者截图。</figcaption></figure><p id="f976" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.接下来，我将<code class="fe mo mp mq mr b">nbdevtmp</code>与&lt;现有项目回购&gt;合并。</p><pre class="kp kq kr ks gt oh mr oi oj aw ok bi"><span id="1c89" class="nr lb it mr b gy ol om l on oo">#credit for following <a class="ae mi" href="https://stackoverflow.com/questions/1425892/how-do-you-merge-two-git-repositories" rel="noopener ugc nofollow" target="_blank">aidus</a><br/># what I did was...</span><span id="034b" class="nr lb it mr b gy oq om l on oo">cd <!-- -->&lt;project-parent-directory&gt;<br/># git remote add &lt;<!-- -->nbdevtmp-<!-- -->project-name&gt; &lt;gthub-url-path-nbdevtmp&gt;<br/>git remote add <!-- -->nbdevtmp <a class="ae mi" href="https://github.com/bcottman/nbdevtmp" rel="noopener ugc nofollow" target="_blank">https://github.com/bcottman/nbdevtmp</a></span><span id="2a28" class="nr lb it mr b gy oq om l on oo">git fetch <!-- -->nbdevtmp<!-- --> --tags<br/>git merge --allow-unrelated-histories <!-- -->nbdevtmp<!-- -->/master</span></pre><p id="b1fe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果没有完成第2步，推送所有本地回购；在第3步之前，您会得到关于合并的错误:</p><pre class="kp kq kr ks gt oh mr oi oj aw ok bi"><span id="baeb" class="nr lb it mr b gy ol om l on oo">error: Your local changes to the following files would be overwritten by merge: &lt;list of files that would be overwritten&gt;</span></pre><p id="57a1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4.在两个回购合并的最后一步，我删除了回购<code class="fe mo mp mq mr b">nbdevtmp.</code></p><pre class="kp kq kr ks gt oh mr oi oj aw ok bi"><span id="d1d4" class="nr lb it mr b gy ol om l on oo">git remote remove <!-- -->nbdevtmp</span></pre><h1 id="4ca3" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">【标准步骤2。]启用Github页面</h1><p id="2dce" class="pw-post-body-paragraph jq jr it js b jt ng jv jw jx nh jz ka kb ni kd ke kf nj kh ki kj nk kl km kn im bi translated">你可以把你的文档放在<code class="fe mo mp mq mr b">https://&lt;gituhb-id&gt;.github.io/&lt;project-name&gt;/</code>或者readthedoc.io</p><blockquote class="or os ot"><p id="2bcb" class="jq jr nq js b jt ju jv jw jx jy jz ka ou kc kd ke ov kg kh ki ow kk kl km kn im bi translated">nbdev系统使用<a class="ae mi" href="https://jekyllrb.com/" rel="noopener ugc nofollow" target="_blank"> jekyll </a>进行文档化。因为<a class="ae mi" href="https://help.github.com/en/github/working-with-github-pages/setting-up-a-github-pages-site-with-jekyll" rel="noopener ugc nofollow" target="_blank"> GitHub Pages支持Jekyll </a>，你可以在<a class="ae mi" href="https://pages.github.com/" rel="noopener ugc nofollow" target="_blank"> Github Pages </a>上免费托管你的站点，不需要任何额外的设置，所以这是我们推荐的方法(但不是必须的；任何jekyll主机都可以)。— <a class="ae mi" href="https://nbdev.fast.ai/tutorial.html#Github-pages" rel="noopener ugc nofollow" target="_blank"> nbdev项目</a></p></blockquote><p id="db29" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下面三个截图展示了如何为nbdev设置Github页面。</p><ol class=""><li id="5028" class="ms mt it js b jt ju jx jy kb mu kf mv kj mw kn mx my mz na bi translated">转到您的项目-例如回购<code class="fe mo mp mq mr b"><a class="ae mi" href="https://github.com/bcottman/pyprobasic." rel="noopener ugc nofollow" target="_blank">https://github.com/bcottman/pyprobasic.</a></code></li><li id="f136" class="ms mt it js b jt nl jx nm kb nn kf no kj np kn mx my mz na bi translated">点击<code class="fe mo mp mq mr b">Settings,</code>，然后点击<code class="fe mo mp mq mr b">Pages,</code>，如图5中红色箭头所示。</li><li id="1d1a" class="ms mt it js b jt nl jx nm kb nn kf no kj np kn mx my mz na bi translated">其他红色箭头显示设置<code class="fe mo mp mq mr b">Source, </code>和<code class="fe mo mp mq mr b">Change theme.</code></li></ol><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ox"><img src="../Images/768d52f56d78b25423646d371acce9b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JmVGt1b_y387yUvtdlcEfw.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">图5。设置Github页面。来源:作者截图。</figcaption></figure><p id="781a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4.返回到顶部的project-repo页面，单击“齿轮”图标，如图6中的红色箭头所示。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi oy"><img src="../Images/9161a37b1dcc186d3d10fa541794c292.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d3dFhazrOuv1hlYFpte7LA.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">图6。Github项目-回购页面。来源:作者截图。</figcaption></figure><p id="b314" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">5.将Github Pages URL粘贴到<code class="fe mo mp mq mr b">Website</code>文本框中，位置如图7中的红色箭头所示。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi oz"><img src="../Images/2691143c88e3ef1f2e456da16d27fcb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EkhxnoVgxazDscg1Px2Y3g.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">图7。“存储库详细信息”页面。来源:作者截图。</figcaption></figure><h1 id="5c7f" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">【标准步骤3。]编辑setting.ini</h1><p id="d8fa" class="pw-post-body-paragraph jq jr it js b jt ng jv jw jx nh jz ka kb ni kd ke kf nj kh ki kj nk kl km kn im bi translated">编辑setting.ini的方法有很多，我可以告诉你我是怎么做的。</p><p id="7db9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nq">注意</em> </strong> <em class="nq">:我用标记</em> <code class="fe mo mp mq mr b"><em class="nq">{constant} </em></code> <em class="nq">来表示你的定制值中的一个替换，通常是文本。</em></p><p id="4529" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我在笔记本上从文件<code class="fe mo mp mq mr b"><a class="ae mi" href="https://github.com/fastai/nbdev_template/blob/master/settings.ini" rel="noopener ugc nofollow" target="_blank">nbdev_template/settings.ini</a></code>到<code class="fe mo mp mq mr b">{local repo dir path}/setting.ini</code>的内容。</p><p id="7b4e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我在图8中举例说明。我设置的值，如图8中的红色箭头所示。也请熟悉<a class="ae mi" href="https://nbdev.fast.ai/tutorial.html#Edit-settings.ini" rel="noopener ugc nofollow" target="_blank"> nbdev说明</a>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi pa"><img src="../Images/b1f04d2254502ceda35e1bf757200b42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WXmB0L8rhv6RC3cceBJI4A.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">图8。setting.ini中的改动用红色箭头标出—来源:作者截图。</figcaption></figure><p id="a9d6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，我完成了:</p><pre class="kp kq kr ks gt oh mr oi oj aw ok bi"><span id="3d8f" class="nr lb it mr b gy ol om l on oo">cd .... /Projects/pyprobasic<br/>mkdir nbs<br/>cd nbs</span><span id="ac94" class="nr lb it mr b gy oq om l on oo"># link -s &lt;local project directory path&gt; to (path/lib_name)<br/># Example</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi pb"><img src="../Images/4915f3cf94fd08e6c4b1a34d0540f2de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IXnj7F7xqExz2W4lWJYygg.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">图9。link -s示例。来源:作者截图。</figcaption></figure><p id="6ded" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我把这个项目的任何<code class="fe mo mp mq mr b">*.ipynb </code>文件都复制到了<code class="fe mo mp mq mr b">… /Projects/pyprobasic/nbs.</code></p><p id="6d74" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另一种方法是将<code class="fe mo mp mq mr b">nbs_path</code>设置为<code class="fe mo mp mq mr b">.</code>并将<code class="fe mo mp mq mr b">*.ipynb </code>文件放在<code class="fe mo mp mq mr b">… /Projects/pyprobasic/.</code>的项目顶层目录中，这不是我推荐的选择。</p><h1 id="ea8b" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">【标准步骤4。]安装git挂钩</h1><p id="578d" class="pw-post-body-paragraph jq jr it js b jt ng jv jw jx nh jz ka kb ni kd ke kf nj kh ki kj nk kl km kn im bi translated"><strong class="js iu"> <em class="nq">注意</em> </strong> <em class="nq"> : </em> <a class="ae mi" href="https://www.howtogeek.com/444596/how-to-change-the-default-shell-to-bash-in-macos-catalina/" rel="noopener ugc nofollow" target="_blank"> <em class="nq">你大概想把默认shell改成bash on MAC OS Catalina</em></a><em class="nq">from zsh。我需要改用bash shell，因为在过去的12年里，我所有的脚本都在bash中。在任意终端</em>和<code class="fe mo mp mq mr b">cshsh -s /bin/bash</code>上重启终端会话. h</p><p id="12db" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我在这一步使用了<a class="ae mi" href="https://nbdev.fast.ai/tutorial.html#Install-git-hooks-to-avoid-and-handle-conflicts" rel="noopener ugc nofollow" target="_blank"> nbdev项目安装说明</a>。</p><h1 id="590a" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">【标准步骤5。]每。ipynb文件必须有# default_exp <file-name/></h1><p id="cf34" class="pw-post-body-paragraph jq jr it js b jt ng jv jw jx nh jz ka kb ni kd ke kf nj kh ki kj nk kl km kn im bi translated">每个<code class="fe mo mp mq mr b">.ipynb</code>文件的第一行必须有<code class="fe mo mp mq mr b"># default_exp &lt;file-name-of-generated&gt;.py.</code>例如:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi pc"><img src="../Images/0ec422cd6c2ffa4723fd4ef13359cea0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-BkJP9Uxy62kZAb9evqzhQ.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">图10。<code class="fe mo mp mq mr b"># default_exp logging generated logging.py from logging.ipynb</code>。来源:作者截图。</figcaption></figure><p id="6d8c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nq">注意</em> </strong> <em class="nq">:如果不把</em> <code class="fe mo mp mq mr b"><em class="nq"> default_exp …</em></code> <em class="nq">放在每个</em> <code class="fe mo mp mq mr b"><em class="nq">.ipynb</em></code> <em class="nq">文件的第一行，就会产生类似于</em>的错误</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi pb"><img src="../Images/ac68b02df2b0619cf630815b19104181.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YVF3Z-LK2-Ks_w8fGLq0rA.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">图11。由<code class="fe mo mp mq mr b"># default_exp &lt;file-name-of-generated .py&gt; </code>示例产生的错误消息。来源:作者截图。</figcaption></figure><h1 id="cc1a" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">【标准步骤6。] nbdev命令</h1><p id="c328" class="pw-post-body-paragraph jq jr it js b jt ng jv jw jx nh jz ka kb ni kd ke kf nj kh ki kj nk kl km kn im bi translated">我将运行一系列nbdev命令来测试在现有回购上使用nbdev。</p><h2 id="7670" class="nr lb it bd lc ns nt dn lg nu nv dp lk kb nw nx lo kf ny nz ls kj oa ob lw oc bi translated">nbdev_build_lib</h2><p id="c0e8" class="pw-post-body-paragraph jq jr it js b jt ng jv jw jx nh jz ka kb ni kd ke kf nj kh ki kj nk kl km kn im bi translated">在我的项目文件夹中<code class="fe mo mp mq mr b">˜/Documents/PROJECTS/pyprobasic</code> n <a class="ae mi" href="https://nbdev.fast.ai/tutorial.html#Edit-00_core.ipynb" rel="noopener ugc nofollow" target="_blank">我试着</a>:</p><pre class="kp kq kr ks gt oh mr oi oj aw ok bi"><span id="d830" class="nr lb it mr b gy ol om l on oo">$ nbdev_build_lib</span></pre><p id="5751" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">输出是:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi pd"><img src="../Images/ad217186f045916681d109ebb1b741f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O8zatEnWkDyC1K3EEmmbfg.png"/></div></div></figure><p id="d913" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">输出看起来没问题，但是我们应该检查<code class="fe mo mp mq mr b">˜/Documents/PROJECTS/pyprobasic/pyprobasic/logging.py</code>:</p><pre class="kp kq kr ks gt oh mr oi oj aw ok bi"><span id="e096" class="nr lb it mr b gy ol om l on oo"># AUTOGENERATED! DO NOT EDIT! File to edit: nbs/logging.ipynb (unless otherwise specified).</span><span id="c3e7" class="nr lb it mr b gy oq om l on oo">__all__ = ['LoggingState', 'LogInfo', 'LogInfoDebug', 'LogDebugOn', 'LogDebugOff', 'LogWarning', 'LogCritical']</span><span id="1137" class="nr lb it mr b gy oq om l on oo"># Cell<br/>from dataclasses import dataclass<br/>from loguru import logger</span><span id="68c0" class="nr lb it mr b gy oq om l on oo"><a class="ae mi" href="http://twitter.com/dataclass" rel="noopener ugc nofollow" target="_blank">@dataclass</a><br/>class LoggingState:<br/>    states =  ['debug', 'info', 'success', 'warning', 'critical']<br/>    debug: bool  = False<br/>    info: bool = False<br/>    success: bool  = False<br/>    warning: bool  = False<br/>    error: bool = True<br/>    critical: bool  = False</span><span id="39cb" class="nr lb it mr b gy oq om l on oo"># Cell<br/>LogInfo = LoggingState(info=True)<br/>LogInfoDebug = LoggingState(info=True,debug=True)<br/>LogDebugOn = LoggingState(debug=True)<br/>LogDebugOff = LoggingState(debug=False)<br/>LogWarning = LoggingState(warning=True)<br/>LogCritical = LoggingState(critical=True)</span></pre><p id="df1a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">不错！由我的logging.ipynb笔记本生成。</p><h2 id="d694" class="nr lb it bd lc ns nt dn lg nu nv dp lk kb nw nx lo kf ny nz ls kj oa ob lw oc bi translated">nbdev_build_docs</h2><p id="040b" class="pw-post-body-paragraph jq jr it js b jt ng jv jw jx nh jz ka kb ni kd ke kf nj kh ki kj nk kl km kn im bi translated">接下来，在我的项目文件夹<code class="fe mo mp mq mr b">˜/Documents/PROJECTS/pyprobasic</code> n <a class="ae mi" href="https://nbdev.fast.ai/tutorial.html#Edit-00_core.ipynb" rel="noopener ugc nofollow" target="_blank">中，我尝试</a>:</p><pre class="kp kq kr ks gt oh mr oi oj aw ok bi"><span id="73e1" class="nr lb it mr b gy ol om l on oo">nbdev_build_docs</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi pe"><img src="../Images/1da58f4f1414770b00d18198c421efa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z9at3mhTEdKQbLKZDFO_7g.png"/></div></div></figure><p id="ea9f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">输出看起来没问题，但是我们应该检查<code class="fe mo mp mq mr b">˜/Documents/PROJECTS/pyprobasic/pyprobasic/README.md</code>:</p><pre class="kp kq kr ks gt oh mr oi oj aw ok bi"><span id="9330" class="nr lb it mr b gy ol om l on oo"># Welcome to pyprobasic<br/>&gt; Create yal (yet another logger)</span></pre><p id="6ce6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">不错！由我的index.ipynb笔记本生成。</p><p id="0bbd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">然而</strong></p><p id="308d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我在这里退出是因为当我在端口4000上查看生成的文档时:</p><pre class="kp kq kr ks gt oh mr oi oj aw ok bi"><span id="ef71" class="nr lb it mr b gy ol om l on oo">make docs_serve</span></pre><p id="bec5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">结果输出是:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi pf"><img src="../Images/e7ba06282c16565998fe98c47e7cd24b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YcUbqDCrbDVc1qs_o7jxDw.png"/></div></div></figure><p id="a7d2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">哎哟！我将在下一篇博客文章中修复它。暂时够了。我需要去睡觉。</p></div><div class="ab cl pg ph hx pi" role="separator"><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl"/></div><div class="im in io ip iq"><h1 id="506b" class="la lb it bd lc ld pn lf lg lh po lj lk ll pp ln lo lp pq lr ls lt pr lv lw lx bi translated">摘要</h1><p id="87de" class="pw-post-body-paragraph jq jr it js b jt ng jv jw jx nh jz ka kb ni kd ke kf nj kh ki kj nk kl km kn im bi translated">我展示了如何针对以下情况为Jupyter笔记本定制nbdev(识字编程):</p><ul class=""><li id="c64e" class="ms mt it js b jt ju jx jy kb mu kf mv kj mw kn ps my mz na bi translated">你已经有了一个Github项目库；</li><li id="2220" class="ms mt it js b jt nl jx nm kb nn kf no kj np kn ps my mz na bi translated">您希望将笔记本放在项目的子目录中；</li></ul><p id="7402" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">目前，nbdev在Ubuntu 20.04上工作，安装了ruby、bundle、<a class="ae mi" href="https://jekyllrb.com/" rel="noopener ugc nofollow" target="_blank"> Jekyll </a>、gem和其他gem。在这篇博客文章的更新中，我详细介绍了如何使用MacOS。祝我好运，因为我希望我不必接触nbdev的源代码。</p><p id="fa97" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在另一篇博客文章中，我展示了如何使用docker为任何环境制作一个可移植的nbdev。</p><p id="c42e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">作为nbdev替代DevOps或变更集成/变更部署(CI/CD)的识字编程及其实施。</p><p id="2d8c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">识字编程是DevOps、DataOps、MLOps和任何其他XOP之后的下一步。</p><p id="60ef" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">快乐编码是高效的工程。</p></div></div>    
</body>
</html>