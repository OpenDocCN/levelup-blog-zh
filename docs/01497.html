<html>
<head>
<title>Creating a Simple Music Player with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript创建一个简单的音乐播放器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-a-simple-music-player-with-javascript-e825d93adff3?source=collection_archive---------1-----------------------#2020-01-08">https://levelup.gitconnected.com/creating-a-simple-music-player-with-javascript-e825d93adff3?source=collection_archive---------1-----------------------#2020-01-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="0e33" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们没有意识到我们对媒体的体验在多大程度上受到其界面设计的影响。每天，我们通过各种播放器来体验音频和视频媒体。您的电视机需要导航播放器界面才能观看您喜爱的节目和电影。您的手机通过其音乐播放器界面将您连接到一个音乐世界。今天，我们将通过用JavaScript创建一个简单的音乐播放器来挖掘播放器界面的强大功能。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/94568416516c216845e9506cc19912c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5r2csOaa6045C9_JwBfrfA.gif"/></div></div></figure><p id="2c9d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">作为一名新的JavaScript开发人员，我倾向于构建应用程序的功能，但是如果没有基本的视觉和架构，设计和用户体验决策会变得更加困难。因此，让我们从构建基本架构开始，重点关注三个主题:</p><ol class=""><li id="5045" class="la lb it js b jt ju jx jy kb lc kf ld kj le kn lf lg lh li bi translated">HTML(为音频、播放器按钮和音乐信息添加元素)</li><li id="bdbb" class="la lb it js b jt lj jx lk kb ll kf lm kj ln kn lf lg lh li bi translated">CSS(为HTML文件中定义的每个元素添加样式)</li><li id="76ab" class="la lb it js b jt lj jx lk kb ll kf lm kj ln kn lf lg lh li bi translated">JavaScript(点击HTML元素时添加功能)</li></ol></div><div class="ab cl lo lp hx lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="im in io ip iq"><p id="9835" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，我们需要写出代表简单音乐播放器初始状态的HTML代码。当想到播放器时，脑海中浮现的主要组件有:</p><p id="aedf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">音轨<br/> </strong>可以通过在音频标签的src属性中提供路径来加载音轨。我们将分配一个ID，允许我们通过JavaScript更改曲目。</p><pre class="kp kq kr ks gt lv lw lx ly aw lz bi"><span id="d459" class="ma mb it lw b gy mc md l me mf">&lt;audio src="./assets/music/beyonce.mp3" id="song"&gt;&lt;/audio&gt;</span></pre><p id="5e9c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">专辑封面<br/> </strong>专辑封面将有一个“缩略图”的ID，我们将通过CSS修改专辑封面的大小和位置。我们稍后将通过JavaScript更改专辑封面。</p><pre class="kp kq kr ks gt lv lw lx ly aw lz bi"><span id="b8bf" class="ma mb it lw b gy mc md l me mf">&lt;img src="./assets/images/lemonade.png" id="thumbnail" /&gt;</span></pre><p id="670c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">播放/暂停按钮</strong></p><ul class=""><li id="64d8" class="la lb it js b jt ju jx jy kb lc kf ld kj le kn mg lg lh li bi translated">按钮是一个带有ID的图像，允许我们通过CSS改变它在页面上的位置。</li><li id="ca46" class="la lb it js b jt lj jx lk kb ll kf lm kj ln kn mg lg lh li bi translated"><strong class="js iu"> <em class="mh"> onclick </em> </strong>事件是一个JavaScript事件，当点击Play按钮图像时将执行playPause()函数。当点击播放按钮时，playPause()函数将交换图像(play.png-&gt;pause.png)。</li></ul><pre class="kp kq kr ks gt lv lw lx ly aw lz bi"><span id="4014" class="ma mb it lw b gy mc md l me mf">&lt;img src="./assets/icons/play.png" onclick="playPause()" id="play-pause" /&gt;</span></pre><p id="dfb8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">下一个/上一个按钮</strong></p><ul class=""><li id="5373" class="la lb it js b jt ju jx jy kb lc kf ld kj le kn mg lg lh li bi translated">按钮是带有ID的图像，允许我们通过CSS改变它在页面上的位置。</li><li id="6106" class="la lb it js b jt lj jx lk kb ll kf lm kj ln kn mg lg lh li bi translated"><strong class="js iu"> <em class="mh"> onclick </em> </strong>事件是一个JavaScript事件，当图像被点击时，它将执行next- and previousSong()函数。</li></ul><pre class="kp kq kr ks gt lv lw lx ly aw lz bi"><span id="93a3" class="ma mb it lw b gy mc md l me mf">&lt;img src="./assets/icons/forward.png" onclick="nextSong()" id="next-song" /&gt;<br/>&lt;img src="./assets/icons/backward.png" onclick="previousSong()" id="previous-song" /&gt;</span></pre><p id="2f6b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">进度条(能够改变轨道位置)</strong></p><ul class=""><li id="729f" class="la lb it js b jt ju jx jy kb lc kf ld kj le kn mg lg lh li bi translated">音轨的进度条本质上是一个线性标尺，对应于音频的元数据。</li><li id="a226" class="la lb it js b jt lj jx lk kb ll kf lm kj ln kn mg lg lh li bi translated">元数据本身包含有关音频对象的信息，如轨道的当前时间和持续时间。</li><li id="f0ea" class="la lb it js b jt lj jx lk kb ll kf lm kj ln kn mg lg lh li bi translated"><strong class="js iu"> <em class="mh"> onchange </em> </strong>事件是一个JavaScript事件，当用户拖动音乐拇指改变音轨的<strong class="js iu"> currentTime </strong>时，调用<strong class="js iu"> changeProgressBar </strong>函数。</li></ul><pre class="kp kq kr ks gt lv lw lx ly aw lz bi"><span id="63ac" class="ma mb it lw b gy mc md l me mf">&lt;input<br/>  type="range"<br/>  id="progress-bar"<br/>  min="0"<br/>  max=""<br/>  value="0"<br/>  onchange="changeProgressBar()"<br/>/&gt;</span></pre><p id="f1f2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">从结构的角度来看，我们需要DIV元素来封装播放器的特定部分，以使不同组件的样式和排列更加容易。下面加粗的项目是通过DIV元素和音轨信息添加到我们的音乐播放器中的。</p><pre class="kp kq kr ks gt lv lw lx ly aw lz bi"><span id="b45f" class="ma mb it lw b gy mc md l me mf">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;head&gt;<br/>  &lt;title&gt;Music Player&lt;/title&gt;<br/>&lt;/head&gt;</span><span id="ea4b" class="ma mb it lw b gy mi md l me mf">&lt;body&gt;<br/>  <strong class="lw iu">&lt;img src="./assets/images/lemonade.png" id="background" /&gt;</strong><br/>  &lt;audio src="./assets/music/beyonce.mp3" id="song"&gt;&lt;/audio&gt;</span><span id="0e0f" class="ma mb it lw b gy mi md l me mf">  <strong class="lw iu">&lt;div class="container"&gt;<br/>    &lt;div class="box"&gt;&lt;/div&gt;</strong></span><span id="f3f7" class="ma mb it lw b gy mi md l me mf">    &lt;img src="./assets/images/lemonade.png" id="thumbnail" /&gt;<br/>    &lt;img src="./assets/icons/play.png" onclick="playPause()"     <br/>    id="play-pause" /&gt;<br/>    &lt;img src="./assets/icons/forward.png" onclick="nextSong()"<br/>    id="next-song" /&gt;<br/>    &lt;img src="./assets/icons/backward.png" onclick="previousSong()" <br/>    id="previous-song" /&gt;</span><span id="fa63" class="ma mb it lw b gy mi md l me mf">    <strong class="lw iu">&lt;div class="song-artist"&gt;Beyonce&lt;/div&gt;<br/>    &lt;div class="song-title"&gt;Don't Hurt Yourself&lt;/div&gt;</strong></span><span id="79c1" class="ma mb it lw b gy mi md l me mf">    &lt;!-- Input element for progress bar - min=0 starting value of  <br/>    every song - max length will change per song so leave empty --&gt;<br/>    &lt;input<br/>      type="range"<br/>      id="progress-bar"<br/>      min="0"<br/>      max=""<br/>      value="0"<br/>      onchange="changeProgressBar()"<br/>    /&gt;</span><span id="66b4" class="ma mb it lw b gy mi md l me mf">    <strong class="lw iu">&lt;div class="currentTime"&gt;&lt;/div&gt;<br/>    &lt;div class="durationTime"&gt;&lt;/div&gt;<br/>  &lt;/div&gt;<br/></strong>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="9f74" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">除了“容器”和“盒子”之外，上述DIV元素中的每个类都描述了将出现在元素中的数据类型。容器是将捕获音乐播放器的每个组件的桶。框是播放/暂停、下一个和上一个按钮以及音轨信息的容器。见<a class="ae mj" href="https://github.com/hdp2112/Simple-Music-Player/blob/master/player.html" rel="noopener ugc nofollow" target="_blank"> HTML文件此处</a>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mk"><img src="../Images/3213894431afd94bf3e8cdd634087363.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qNl5JnjSlkFwKwPtX58lNA.gif"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">步骤1后音乐播放器的浏览器呈现</figcaption></figure></div><div class="ab cl lo lp hx lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="im in io ip iq"><p id="d485" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">其次，我们需要将所有与我们简单的音乐播放器相对应的组件放在一起，让它们看起来对我们的用户来说更美观。让我们使用以下代码将样式表链接到HTML文件:</p><pre class="kp kq kr ks gt lv lw lx ly aw lz bi"><span id="6925" class="ma mb it lw b gy mc md l me mf">&lt;head&gt;<br/>  &lt;title&gt;Music Player&lt;/title&gt;<br/>  <strong class="lw iu">&lt;link rel="stylesheet" href="player.css"&gt;</strong><br/>&lt;/head&gt;</span></pre><p id="c9c7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了简洁起见，您可以在这里访问<a class="ae mj" href="https://github.com/hdp2112/Simple-Music-Player/blob/master/player.css" rel="noopener ugc nofollow" target="_blank"> CSS文件</a>，创建您自己的CSS文件，并修改每个选择器的属性来定制您的音乐播放器。刷新页面后，你的应用程序现在看起来很干净，很有风格，但单击按钮不会产生任何结果。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mp"><img src="../Images/34bdb41fe0b3c0e93deaf1646a787f75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*sfhkEqcMT2rLyxO4kRMBLg.gif"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">步骤2后音乐播放器的浏览器呈现</figcaption></figure></div><div class="ab cl lo lp hx lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="im in io ip iq"><p id="5809" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">第三，我们最后将添加功能，让您的音乐播放器执行编写在HTML文件中的<strong class="js iu"> <em class="mh"> onClick </em> </strong>和<strong class="js iu"> <em class="mh"> onChange </em> </strong>事件。</p><pre class="kp kq kr ks gt lv lw lx ly aw lz bi"><span id="a46d" class="ma mb it lw b gy mc md l me mf">&lt;script src="player.js"&gt;&lt;/script&gt; <strong class="lw iu">//add at the bottom of the &lt;body&gt; tag</strong></span></pre><p id="0a7b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将上面的脚本标签添加到您的HTML文件中，让我们在这里开始分解<a class="ae mj" href="https://github.com/hdp2112/Simple-Music-Player/blob/master/player.js" rel="noopener ugc nofollow" target="_blank"> JavaScript文件中的函数</a>。</p><p id="800e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">播放和暂停功能</strong></p><ul class=""><li id="3b25" class="la lb it js b jt ju jx jy kb lc kf ld kj le kn mg lg lh li bi translated">我们正在创建一个名为<strong class="js iu"> <em class="mh"> playing </em> </strong>的变量来帮助我们创建一个“真”和“假”状态，以指示在playPause() if/else语句中运行哪个逻辑。</li><li id="935d" class="la lb it js b jt lj jx lk kb ll kf lm kj ln kn mg lg lh li bi translated">如果点击播放按钮，HTML元素将运行playPause()，If语句中的逻辑将被执行，<strong class="js iu"> <em class="mh">播放</em> </strong>变量将被设置为false。</li><li id="a5fe" class="la lb it js b jt lj jx lk kb ll kf lm kj ln kn mg lg lh li bi translated">如果点击暂停按钮，HTML元素将运行playPause()，执行ELSE语句中的逻辑，<strong class="js iu"> <em class="mh">播放</em> </strong>变量为真。</li></ul><pre class="kp kq kr ks gt lv lw lx ly aw lz bi"><span id="20d6" class="ma mb it lw b gy mc md l me mf">// If play button clicked, change pp.src to pause button and call song.play(). If pause button clicked, change pp.src to play button and call song.pause().</span><span id="076c" class="ma mb it lw b gy mi md l me mf">let playing = true;</span><span id="7c06" class="ma mb it lw b gy mi md l me mf">function playPause() {<br/>  if (playing) {<br/>    const song = document.querySelector('#song'),<br/>    thumbnail = document.querySelector('#thumbnail');</span><span id="b7bc" class="ma mb it lw b gy mi md l me mf">    <strong class="lw iu">pPause.src = "./assets/icons/pause.png"; //this will change the <br/>    Play button to a Pause button</strong><br/>    thumbnail.style.transform = "scale(1.15)"; <strong class="lw iu">//this will slightly <br/>    zoom in the album cover for a cool effect</strong></span><span id="0ea3" class="ma mb it lw b gy mi md l me mf"><strong class="lw iu">    song.play(); //this will play the audio track</strong><br/>    playing = false;<br/>  } else {<br/>    pPause.src = "./assets/icons/play.png"<br/>    thumbnail.style.transform = "scale(1)" <strong class="lw iu">//this will slightly <br/>    zoom in the album cover for a cool effect</strong><br/> <br/>    song.pause();<br/>    playing = true;<br/>  }<br/>}</span></pre><p id="25e6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">下一首歌曲功能</strong></p><ul class=""><li id="9147" class="la lb it js b jt ju jx jy kb lc kf ld kj le kn mg lg lh li bi translated">在这个<a class="ae mj" href="https://github.com/hdp2112/Simple-Music-Player/blob/master/player.js" rel="noopener ugc nofollow" target="_blank"> JavaScript文件</a>中，第10–13行有四个数组，分别指向存储在我本地机器上的音轨路径、专辑图片路径、艺术家姓名路径和歌曲名称路径。<strong class="js iu">注:</strong> <strong class="js iu">阵中只有两首歌。</strong></li><li id="f0eb" class="la lb it js b jt lj jx lk kb ll kf lm kj ln kn mg lg lh li bi translated">如果单击Next按钮，HTML元素将运行<strong class="js iu"> nextSong() </strong>，<strong class="js iu"> songIndex </strong>值将增加，<strong class="js iu"> <em class="mh"> song </em> </strong>，<strong class="js iu"> <em class="mh"> thumbnail </em> </strong>，<strong class="js iu"> <em class="mh"> songArtist </em> </strong>和<strong class="js iu"> <em class="mh"> songTitle </em> </strong>的属性将更改为下一个索引值。</li><li id="a6a0" class="la lb it js b jt lj jx lk kb ll kf lm kj ln kn mg lg lh li bi translated">最后，在运行<strong class="js iu"> playPause() </strong>之前，将<strong class="js iu"> <em class="mh"> playing </em> </strong>变量设置为true，以确保IF语句中的逻辑运行(这会运行song.play()并显示暂停按钮)。</li></ul><pre class="kp kq kr ks gt lv lw lx ly aw lz bi"><span id="6473" class="ma mb it lw b gy mc md l me mf">// function where songIndex is incremented, song/thumbnail image/background image/song artist/song title changes to next index value, and playPause() runs to play next track</span><span id="5a50" class="ma mb it lw b gy mi md l me mf">songIndex = 0;</span><span id="5f20" class="ma mb it lw b gy mi md l me mf">function nextSong() {<br/>  songIndex++;<br/>  if (songIndex &gt; 1) {<br/>    songIndex = 0;<br/>  };</span><span id="275c" class="ma mb it lw b gy mi md l me mf">  song.src = songs[songIndex];<br/>  thumbnail.src = thumbnails[songIndex];<br/>  background.src = thumbnails[songIndex];</span><span id="8455" class="ma mb it lw b gy mi md l me mf">  songArtist.innerHTML = songArtists[songIndex];<br/>  songTitle.innerHTML = songTitles[songIndex];</span><span id="5699" class="ma mb it lw b gy mi md l me mf">  playing = true;<br/>  playPause();<br/>}</span></pre><p id="111f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">上一首歌曲功能</strong></p><ul class=""><li id="631b" class="la lb it js b jt ju jx jy kb lc kf ld kj le kn mg lg lh li bi translated">如果单击Previous按钮，HTML元素将运行<strong class="js iu"> previousSong() </strong>，<strong class="js iu"> songIndex </strong>值将减少，<strong class="js iu"> <em class="mh"> song </em> </strong>，<strong class="js iu"> <em class="mh"> thumbnail </em> </strong>，<strong class="js iu"> <em class="mh"> songArtist </em> </strong>和<strong class="js iu"> <em class="mh"> songTitle </em> </strong>的属性将更改为之前的索引值。</li></ul><pre class="kp kq kr ks gt lv lw lx ly aw lz bi"><span id="9942" class="ma mb it lw b gy mc md l me mf">// function where songIndex is decremented, song/thumbnail image/background image/song artist/song title changes to previous index value, and playPause() runs to play previous track</span><span id="f1bd" class="ma mb it lw b gy mi md l me mf">function previousSong() {<br/>  songIndex--;<br/>  if (songIndex &lt; 0) {<br/>    songIndex = 1;<br/>  };</span><span id="8957" class="ma mb it lw b gy mi md l me mf">  song.src = songs[songIndex];<br/>  thumbnail.src = thumbnails[songIndex];<br/>  background.src = thumbnails[songIndex];</span><span id="91ce" class="ma mb it lw b gy mi md l me mf">  songArtist.innerHTML = songArtists[songIndex];<br/>  songTitle.innerHTML = songTitles[songIndex];</span><span id="1f28" class="ma mb it lw b gy mi md l me mf">  playing = true;<br/>  playPause();</span><span id="9dc8" class="ma mb it lw b gy mi md l me mf">}</span></pre><p id="77c6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">进度条功能</strong></p><p id="ca5a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您还记得，进度条是音频轨道的<strong class="js iu"> <em class="mh">持续时间</em> </strong>(长度)的可视化表示，并允许我们单击它来更改轨道的<strong class="js iu"> <em class="mh">当前时间</em> </strong>属性。</p><ul class=""><li id="9d89" class="la lb it js b jt ju jx jy kb lc kf ld kj le kn mg lg lh li bi translated"><strong class="js iu"> updateProgressValue() </strong>函数允许我们在播放音轨时，在页面中显示音轨的当前时间和持续时间。<br/> <strong class="js iu">注意:currentTime和duration的值是以秒为单位的，所以需要通过一个函数将这些值转换成MM:SS格式。</strong></li></ul><pre class="kp kq kr ks gt lv lw lx ly aw lz bi"><span id="f01c" class="ma mb it lw b gy mc md l me mf">// update progressBar.max to song object's duration, same for progressBar.value, update currentTime/duration on the DOM</span><span id="6b0f" class="ma mb it lw b gy mi md l me mf">function updateProgressValue() {<br/>  progressBar.max = song.duration;<br/>  progressBar.value = song.currentTime;</span><span id="31c9" class="ma mb it lw b gy mi md l me mf">  document.querySelector('.currentTime').innerHTML =  <br/>  <strong class="lw iu">formatTime(song.currentTime)</strong>;<strong class="lw iu"> // See lines 85-92 for MM:SS formatting</strong></span><span id="007c" class="ma mb it lw b gy mi md l me mf">  document.querySelector('.durationTime').innerHTML =  <br/>  <strong class="lw iu">formatTime(song.duration)</strong>; <strong class="lw iu">// See lines 85-92 for MM:SS formatting</strong><br/>};</span></pre><ul class=""><li id="907d" class="la lb it js b jt ju jx jy kb lc kf ld kj le kn mg lg lh li bi translated"><strong class="js iu"> updateProgressValue() </strong>函数很棒，但是它只在被调用时更新我们的页面，所以我们需要一个<strong class="js iu"> setInterval </strong>方法来确保它被定期调用，以创建轨迹运行时间的平滑假象。</li></ul><pre class="kp kq kr ks gt lv lw lx ly aw lz bi"><span id="2bbb" class="ma mb it lw b gy mc md l me mf">// run updateProgressValue function every 1/2 second to show change in progressBar and song.currentTime on the DOM</span><span id="40ed" class="ma mb it lw b gy mi md l me mf">setInterval(updateProgressValue, 500);</span></pre><ul class=""><li id="3e78" class="la lb it js b jt ju jx jy kb lc kf ld kj le kn mg lg lh li bi translated">最后，我们需要添加一个功能，允许用户单击并拖动滑块来前进或后退音轨。当在&lt;输入&gt;元素中触发onchange事件时，运行<strong class="js iu"> changeProgressBar() </strong>函数。</li><li id="68cb" class="la lb it js b jt lj jx lk kb ll kf lm kj ln kn mg lg lh li bi translated">只有当用户单击缩略图并将其拖动到标尺的左侧或右侧时，才会触发该事件。</li><li id="1fdc" class="la lb it js b jt lj jx lk kb ll kf lm kj ln kn mg lg lh li bi translated">当thumb被更改时，setInterval运行updateProgressValue来更新音频的currentTime并更新音乐播放器以显示更改。</li></ul><pre class="kp kq kr ks gt lv lw lx ly aw lz bi"><span id="294f" class="ma mb it lw b gy mc md l me mf">function changeProgressBar() {<br/>  song.currentTime = progressBar.value;<br/>};</span></pre><p id="2255" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">刷新页面后，你的应用现在看起来很干净，点击按钮会导致你希望你的用户体验的行为。呜！</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mq"><img src="../Images/843fa5976c8a281a361bc43ecf2ce0d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3V7f30LaDzWCC-OwU6E5UA.gif"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">步骤3后音乐播放器的浏览器呈现</figcaption></figure></div><div class="ab cl lo lp hx lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="im in io ip iq"><p id="ff24" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="mh">恭喜恭喜！</em> </strong>你已经用JavaScript创建了一个简单的音乐播放器。完成上述步骤后，你会惊讶地发现大部分工作都是在音乐播放器的样式上。然后，就是将正确的HTML元素与正确的JavaScript事件耦合起来，以运行控制音频回放的功能。</p><p id="2806" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你在制作音乐播放器时有什么不同的做法吗？请随意查看这里的<a class="ae mj" href="https://github.com/hdp2112/Simple-Music-Player" rel="noopener ugc nofollow" target="_blank">简单音乐播放器回购</a>，并在下面的评论中告诉我你的想法！</p><p id="ed08" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">谢谢！</p><p id="5993" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">来源:<br/> </strong> <a class="ae mj" href="https://www.youtube.com/watch?v=Hd-0vZ4edYM&amp;t=1248s" rel="noopener ugc nofollow" target="_blank">制作音乐播放器</a></p></div></div>    
</body>
</html>