<html>
<head>
<title>Adding a Form to React-Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向React-Native添加表单</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/adding-a-form-to-react-native-2f41b1dc0857?source=collection_archive---------1-----------------------#2020-05-17">https://levelup.gitconnected.com/adding-a-form-to-react-native-2f41b1dc0857?source=collection_archive---------1-----------------------#2020-05-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ec55" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何使用Formik将表单添加到React-Native项目中</h2></div><p id="5865" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然react native是一个快速构建移动应用程序的出色工具，但它也有一些缺点。与React不同，React-Native不能访问HTML来获取其元素。例如，与HTML相反，react native中没有form元素。虽然仍然可以在react native中创建和管理表单，但开发人员可以使用几个库来创建和控制他们应用程序中的表单。在这篇博文中，我将解释如何通过构建一个登录表单来使用npm包“Formik”。</p><h2 id="8c47" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">什么是福米克</h2><p id="3b46" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">Formik是一个npm库，它帮助处理大量的表单逻辑。官方<a class="ae lz" href="https://jaredpalmer.com/formik/help" rel="noopener ugc nofollow" target="_blank">文件</a>声明:</p><p id="23d1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Formik会处理重复和烦人的事情——跟踪值/错误/访问过的字段、编排验证和处理提交——所以您不必这样做。这意味着您花更少的时间连接状态和更改处理程序，而花更多的时间关注您的业务逻辑。</p><p id="ce45" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它打包了处理事件、捕获表单值和处理表单提交所需的所有逻辑。它在<a class="ae lz" href="https://jaredpalmer.com/formik/docs/overview" rel="noopener ugc nofollow" target="_blank"> React </a>和<a class="ae lz" href="https://jaredpalmer.com/formik/docs/guides/react-native" rel="noopener ugc nofollow" target="_blank"> React-Native </a>应用中都有效。</p><h2 id="4cc1" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">装置</h2><p id="e6ec" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">要在我们的终端中添加Formik包，首先运行:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="a674" class="lb lc iq mf b gy mj mk l ml mm">$ npm install formik</span></pre><p id="9adc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于这个示例，我创建了一个FormScreen组件，并添加了一个静态呈现来启动:</p><figure class="ma mb mc md gt mo gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/001e48d60f919c8a21fb77eeedfebf29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*HReU5N3ku9eXZ1e0k9b4fQ.png"/></div></figure><p id="b570" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以访问Formik了，我们需要做的就是将它导入到我们的表单屏幕中:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="aa04" class="lb lc iq mf b gy mj mk l ml mm">import React from 'react'<br/>import { View, Text, StyleSheet } from 'react-native'<br/>import { Formik } from 'formik'</span><span id="bd8e" class="lb lc iq mf b gy mr mk l ml mm">const FormScreen = () =&gt; {<br/>  return (<br/>    &lt;View&gt;<br/>      &lt;Text&gt;Hello!&lt;/Text&gt;<br/>    &lt;/View&gt;<br/>  )<br/>}</span><span id="f6a3" class="lb lc iq mf b gy mr mk l ml mm">const styles = StyleSheet.create({<br/>})</span><span id="1b45" class="lb lc iq mf b gy mr mk l ml mm">export default FormScreen</span></pre><p id="b492" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了这个，我们可以开始建立我们的形式。</p><h2 id="ce53" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">创建表单</h2><p id="fd7d" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">现在我们已经添加并导入了Formik，我们可以将“Formik”包装器添加到我们的FormScreen中。因为我们正在构建一个登录表单，所以我们也可以更新我们的组件来添加用户名和密码的输入:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="7f71" class="lb lc iq mf b gy mj mk l ml mm">import React from 'react'<br/>import { View, Text, StyleSheet } from 'react-native'<br/>import { Formik } from 'formik'</span><span id="04c6" class="lb lc iq mf b gy mr mk l ml mm">const FormScreen = () =&gt; {<br/>  return (<br/>    &lt;Formik&gt;<br/>      &lt;View&gt;<br/>        &lt;Text&gt;Username&lt;/Text&gt;<br/>        &lt;TextInput style={styles.input}/&gt;<br/>        &lt;Text&gt;Password&lt;/Text&gt;<br/>        &lt;TextInput style={styles.input}/&gt;<br/>        &lt;Button title="Submit"/&gt;<br/>      &lt;/View&gt;<br/>    &lt;/Formik&gt;<br/>  )<br/>}<br/></span><span id="b847" class="lb lc iq mf b gy mr mk l ml mm">const styles = StyleSheet.create({<br/>  input: {<br/>    margin: 15,<br/>    borderColor: 'black';<br/>    borderWidth: 1<br/>  }<br/>})</span></pre><p id="f6db" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当我们加载组件时，我们应该看到:</p><figure class="ma mb mc md gt mo gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/21b5fb910af773daba9f98f1ff91d985.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*CACuAoTGYyBcFNySTeYpJg.png"/></div></figure><p id="2fba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们就为表单设置了用户名和密码字段，并添加了一个提交按钮。接下来，我们需要向表单中添加一些属性，以便我们可以跟踪和提交它。</p><h2 id="99a2" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">添加Formik逻辑</h2><p id="1fe4" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">对于任何表单，我们仍然需要在提交之前控制我们的输入。为了做到这一点，而不是创建一个钩子或状态值，我们将在开始的“Formik”标记中添加一个“initailValues”属性。</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="fb53" class="lb lc iq mf b gy mj mk l ml mm">const FormScreen = () =&gt; {<br/>  return (<br/>    &lt;Formik<br/>      initialValues={{username:'', password:''}}<br/>    &gt;<br/>      &lt;View&gt;<br/>        &lt;Text&gt;Username&lt;/Text&gt;<br/>        &lt;TextInput style={styles.input}/&gt;<br/>        &lt;Text&gt;Password&lt;/Text&gt;<br/>        &lt;TextInput style={styles.input}/&gt;<br/>        &lt;Button title="Submit"/&gt;<br/>      &lt;/View&gt;<br/>    &lt;/Formik&gt;<br/>  )<br/>}</span></pre><p id="4ab1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了实际控制我们的from，我们需要稍微重组一下component，以便使用Formik语法:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="4250" class="lb lc iq mf b gy mj mk l ml mm">const FormScreen = () =&gt; {<br/>  return (<br/>    &lt;Formik<br/>      initialValues={{username:'', password:''}}<br/>    &gt;<br/>      {({})}=&gt;(<br/>        &lt;View&gt;<br/>          &lt;Text&gt;Username&lt;/Text&gt;<br/>          &lt;TextInput style={styles.input}/&gt;<br/>          &lt;Text&gt;Password&lt;/Text&gt;<br/>          &lt;TextInput style={styles.input}/&gt;<br/>          &lt;Button title="Submit"/&gt;<br/>        &lt;/View&gt;<br/>      )}<br/>    &lt;/Formik&gt;<br/>  )<br/>}</span></pre><p id="33e2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">包装在“视图标签”中的所有东西都在“Formik标签”中，这是JSX回调函数的结果。“Formik”为我们提供了几个新东西，然后我们可以将它们传递给回调函数，比如我们的事件处理程序和一个values变量(它从initialValues prop继承其值)。现在我们可以在适当的地方传递这些属性。</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="6167" class="lb lc iq mf b gy mj mk l ml mm">const FormScreen = () =&gt; {<br/>  return (<br/>    &lt;Formik<br/>      initialValues={{username:'', password:''}}<br/>    &gt;<br/>      {({handleChange, handleSubmit, values})=&gt;(<br/>        &lt;View&gt;<br/>          &lt;Text&gt;Username&lt;/Text&gt;<br/>          &lt;TextInput<br/>            style={styles.input}<br/>            value={values.username}<br/>            onChangeText={handleChange('username')}<br/>          /&gt;<br/>          &lt;Text&gt;Password&lt;/Text&gt;<br/>           &lt;TextInput<br/>            style={styles.input}<br/>            value={values.password}<br/>            onChangeText={handleChange('password')}<br/>            <!-- -->secureTextEntry={true}<br/>          /&gt;<br/>          &lt;Button title="Submit"/&gt;<br/>        &lt;/View&gt;<br/>      )}<br/>    &lt;/Formik&gt;<br/>  )<br/>}</span></pre><p id="398d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当我们键入输入内容时，我们会看到:</p><figure class="ma mb mc md gt mo gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/bc93fd03583bd75438564079a5a32d5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/1*Uk1wFS4gTfLhbaXc6REDpg.gif"/></div></figure><p id="0d49" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在下一节中，我们将使用我们的handleSubmit。</p><h2 id="c14e" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">提交表单</h2><p id="133b" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">为了实际提交我们的表单，我们必须添加两个事件。首先在我们的开始“Formik tag”中有一个带有回调的“onSubmit event”，然后在我们的按钮上有一个“onPress event”。出于本教程的目的，我们的“onSubmit”事件将简单地“console.log”一个字符串，我们的values对象和“onPress”将指向我们的handleSubmit事件处理程序。</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="6d33" class="lb lc iq mf b gy mj mk l ml mm">const FormScreen = () =&gt; {<br/>  return (<br/>    &lt;Formik<br/>      initialValues={{username:'', password:''}}<br/>      onSubmit={(values) =&gt; console.log('submitted', values}</span><span id="297f" class="lb lc iq mf b gy mr mk l ml mm">    &gt;<br/>      {({handleChange, handleSubmit, values})}=&gt;(<br/>        &lt;View&gt;<br/>          &lt;Text&gt;Username&lt;/Text&gt;<br/>          &lt;TextInput<br/>            style={styles.input}<br/>            value={values.username}<br/>            onChangeText={handleChange('username')}<br/>          /&gt;<br/>          &lt;Text&gt;Password&lt;/Text&gt;<br/>          &lt;TextInput<br/>            style={styles.input}<br/>            value={values.password}<br/>            onChangeText={handleChange('password')}<br/>            <!-- -->secureTextEntry={true}<br/>          /&gt;<br/>          &lt;Button onPress={handleSubmit} title="Submit"/&gt;<br/>        &lt;/View&gt;<br/>      )}<br/>    &lt;/Formik&gt;<br/>  )<br/>}</span></pre><p id="9b7d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当我们提交表单时，我们将看到:</p><figure class="ma mb mc md gt mo gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/aeb0378eb7ddd818a7e68e56a55052a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/1*xyGwj71g0S0ji6TzC6I5xQ.gif"/></div></figure><p id="b557" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样我们就成功地完成了一份表格！</p><h2 id="a6bf" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">结论</h2><p id="a619" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">这样，我们就可以添加更多的样式，使我们的表单更加突出，并且我们可以向我们的提交事件添加一个获取请求，这样我们就可以从后端访问信息或向后端发送信息。祝您在自己的项目中添加表单时好运！</p></div></div>    
</body>
</html>