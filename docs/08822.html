<html>
<head>
<title>Space Shooter Challenge: Thruster UI and Cooldown</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">太空射击挑战:推进器界面和冷却</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/space-shooter-challenge-thruster-ui-and-cooldown-5a544e118e99?source=collection_archive---------29-----------------------#2021-06-07">https://levelup.gitconnected.com/space-shooter-challenge-thruster-ui-and-cooldown-5a544e118e99?source=collection_archive---------29-----------------------#2021-06-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/6b762a72d43f6e8fc385e496aa3fe284.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*i_cWKS2t4SV3FWrq-BmvFw.gif"/></div></figure><p id="806e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">以前，我创造了一个推进器，可以在按住shift键时提高玩家的速度。目前，这可以无限期地持有，我想创建一个系统，用户必须考虑什么时候节约使用它。</p><p id="7bf6" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为此，我将创建一个<strong class="jw ir"> UI滑块</strong>来可视化<strong class="jw ir">推进器水平的值。</strong>然后在代码中，我需要创建一个方法来消耗这个值，但也是一个基于计时器的充值功能。</p><p id="af71" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">首先，我创建了一个<strong class="jw ir"> UI滑块</strong>并删除了<strong class="jw ir">句柄对象</strong>，因为我不想让它被用户控制。我在上面添加了一些文字，并将背景<strong class="jw ir">设置为红色，填充<strong class="jw ir">为黄色。</strong></strong></p><p id="6593" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为了更新<strong class="jw ir"> UI，</strong>我需要将<strong class="jw ir">滑块</strong>添加到我的<strong class="jw ir"> UIManager中。</strong>然后我可以创建一个<strong class="jw ir">公共方法</strong>，它基于剩余时间内传入的一个<strong class="jw ir">浮点变量</strong>来设置值。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ks"><img src="../Images/b81bf52aef7b6d705697f1f1d820c58a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uh-9L-sG5IOpEe1SX7oofg.png"/></div></div></figure><p id="90c6" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在我的<strong class="jw ir">玩家脚本</strong>中，我需要一些新的变量。我创建了一个<strong class="jw ir">私有浮动</strong>来存储<strong class="jw ir">推进器水平，</strong>一个<strong class="jw ir">序列化</strong> <strong class="jw ir">私有浮动</strong>来存储和调整<strong class="jw ir">冷却时间，</strong>和一个<strong class="jw ir">私有浮动</strong>来检查<strong class="jw ir">推进器</strong>在我将要创建的循环中是开还是关。</p><p id="ee1d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我现在需要将我原来的<strong class="jw ir">画眉程序</strong>和<strong class="jw ir">画眉程序方法</strong>转换成<strong class="jw ir">协程。</strong>我一开始只是让<strong class="jw ir">推进器水平</strong>开始下降。我的<strong class="jw ir">推力器检查方法</strong>现在检查<strong class="jw ir">左移位</strong>是否被按下，<strong class="jw ir">和</strong>是否<strong class="jw ir">推力器水平</strong>高于0，如果是，则<strong class="jw ir">协同程序启动。</strong></p><p id="848f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">画眉协程</strong>包含了之前的速度、视觉和音频功能，但也将新的<strong class="jw ir">布尔</strong>设置为<strong class="jw ir">真。然后我跳转到一个循环中。</strong>我不希望其他所有东西都持续更新，因此只需要初始按下<strong class="jw ir">左移位键</strong>来启动<strong class="jw ir">协程。</strong>创建一个<strong class="jw ir"> while循环</strong>允许我现在检查<strong class="jw ir">左移键</strong>是否被按住，以及<strong class="jw ir">推进器水平</strong>是否高于0，因为这将是<strong class="jw ir">循环的两个退出功能。</strong></p><p id="f01d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在循环中，我可以使用<strong class="jw ir"> yield return null </strong>,这样我们就可以没有任何形式的延迟地循环。然后我将<strong class="jw ir">推进器水平</strong>降低<strong class="jw ir">时间δ时间，</strong>并同时更新<strong class="jw ir"> UI。</strong></p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ks"><img src="../Images/9512c55c860e929c55e5ca262a50f1e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L55nx5V-_9f1kcTDtSbbEg.png"/></div></div></figure><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/5512b8efe204f3e2e10b6b34e864bed0.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/1*kf0srM7IDN7ieN1gfIDIJQ.gif"/></div></figure><p id="9029" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在按住shift键，<strong class="jw ir">推进器UI滑块减小，</strong>我们的<strong class="jw ir">推进器水平</strong>达到0。但是速度、视觉和音频继续。从<strong class="jw ir"> while循环中出来后</strong>就是可以调用<strong class="jw ir">推力器协程</strong>的地方。</p><p id="d5c5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这个<strong class="jw ir">协程</strong>保存所有先前的<strong class="jw ir">推力函数</strong>，但也将<strong class="jw ir">布尔函数</strong>设置为假。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ks"><img src="../Images/4e930eb7c36d9e6ddb009a46d93f1169.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CENe1RCVCRiS3uu9hdDLeA.png"/></div></div></figure><p id="9d27" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在这个<strong class="jw ir">协程</strong>中，我想在将<strong class="jw ir"> Time.deltaTime </strong>添加到我的<strong class="jw ir">推进器等级之前等待一段时间。</strong>如果bool上的<strong class="jw ir">推进器设置为<strong class="jw ir">假，我只希望这个运行。</strong>否则，如果<strong class="jw ir">推进器</strong>在开和关之间交替，我们最终会多次要求给<strong class="jw ir">推进器充电。</strong>因此我需要一个<strong class="jw ir"> if语句</strong>，然后在最终创建一个<strong class="jw ir"> while循环之前，我可以等待我之前设置的<strong class="jw ir">冷却变量</strong>。</strong></strong></p><p id="32b9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在这个<strong class="jw ir">循环中，</strong>我希望它只在<strong class="jw ir">推进器水平</strong>低于5时运行，这样我们就不会以超过5秒的使用结束。它也应该只在<strong class="jw ir">布尔值</strong>为<strong class="jw ir">假时运行。因此，如果<strong class="jw ir">推力协程</strong>再次启动，充电将停止。<strong class="jw ir"> while循环</strong>的内容是<strong class="jw ir"> ThrusterOn while循环的逆循环。</strong></strong></p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ks"><img src="../Images/e4390b0e2c29e0717796ad17a94290b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*goDx5ZZp3efiyQy_lr3dUw.png"/></div></div></figure><p id="501f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">回到最初的<strong class="jw ir"> if语句</strong>中，我想确认当shift键被按下时<strong class="jw ir">推力器协同程序</strong>停止，所以我在启动<strong class="jw ir">推力器协同程序之前调用<strong class="jw ir">停止协同程序</strong>。</strong></p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ks"><img src="../Images/a06bde6c8f6f135268a6d1d1ca08474e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0KOpcdsp3BG1FDxlD6pflw.png"/></div></div></figure></div></div>    
</body>
</html>