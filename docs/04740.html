<html>
<head>
<title>How to consume APIs In React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中使用API</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/get-your-daily-dose-of-inspiration-with-reactjs-fa529940326d?source=collection_archive---------9-----------------------#2020-07-12">https://levelup.gitconnected.com/get-your-daily-dose-of-inspiration-with-reactjs-fa529940326d?source=collection_archive---------9-----------------------#2020-07-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="928d" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">循序渐进教程</h2><div class=""/><div class=""><h2 id="e920" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用React获取数据的指南</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/547cf8d8aa19ec3767bb09e1e5beb938.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NO_sUPVJEYLWVYzV"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">来源:<a class="ae lh" href="https://unsplash.com/photos/9idqIGrLuTE" rel="noopener ugc nofollow" target="_blank">约书亚·厄尔在Unsplash </a></figcaption></figure><p id="d8ac" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">初学者在学习框架时可以做的最有趣的项目之一是构建一个随机报价生成器。在本教程中，我们将构建一个web应用程序，当我们运行该程序时，它会向我们发送当天的励志名言。在这个过程中，我们还将了解ReactJS中的<code class="fe me mf mg mh b">fetch</code>方法。</p><p id="bb7a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最终，这将是我们程序的结果:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/b5772df66a7fcaf556f72c106dac721f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2-QjY_NYCWNVwnw4XnayGw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">今日引语。这将是我们的目标</figcaption></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="6242" class="mq mr it bd ms mt mu mv mw mx my mz na ki nb kj nc kl nd km ne ko nf kp ng nh bi translated">入门指南</h1><p id="680b" class="pw-post-body-paragraph li lj it lk b ll ni kd ln lo nj kg lq lr nk lt lu lv nl lx ly lz nm mb mc md im bi translated">就像创建任何React应用一样，让我们运行<code class="fe me mf mg mh b">create-react-app</code>。</p><pre class="ks kt ku kv gt nn mh no np aw nq bi"><span id="45c4" class="nr mr it mh b gy ns nt l nu nv">npx create-react-app quotes-app</span></pre><p id="5aed" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们不会安装任何其他模块。然而，我们将使用<a class="ae lh" href="https://theysaidso.com/api/#qod" rel="noopener ugc nofollow" target="_blank">今日API </a>来获取我们的金玉良言。</p><p id="eb1f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">他们引用了包括<code class="fe me mf mg mh b">inspire</code>在内的几个类别的内容。顾名思义，这个<code class="fe me mf mg mh b">inspire</code>类别会给我们励志的说法。根据他们的服务条款，我们也要对网站进行归属。</p><p id="beff" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">对于归属，这将是API网站提供的模板:</p><pre class="ks kt ku kv gt nn mh no np aw nq bi"><span id="28a1" class="nr mr it mh b gy ns nt l nu nv">&lt;span style="font-weight: bold;"&gt;<br/>      &lt;img src="https://theysaidso.com/branding/theysaidso.png" /&gt;<br/>      &lt;a href="https://theysaidso.com" title="Powered by quotes from theysaidso.com" style="color: #ccc;"&gt;<br/>        They Said So®<br/>      &lt;/a&gt;<br/>&lt;/span&gt;</span></pre><p id="8b69" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在让我们从我们的应用程序开始吧！</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="a9cb" class="mq mr it bd ms mt mu mv mw mx my mz na ki nb kj nc kl nd km ne ko nf kp ng nh bi translated">获取报价</h1><h2 id="8ef2" class="nr mr it bd ms nw nx dn mw ny nz dp na lr oa ob nc lv oc od ne lz oe of ng iz bi translated">定义FetchQuote函数</h2><p id="131c" class="pw-post-body-paragraph li lj it lk b ll ni kd ln lo nj kg lq lr nk lt lu lv nl lx ly lz nm mb mc md im bi translated">在你的项目的根目录下，创建一个名为<code class="fe me mf mg mh b">quotesFetcher</code>的新文件。</p><p id="a5c8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们从导入<code class="fe me mf mg mh b">react</code>开始，从<code class="fe me mf mg mh b">react</code>导入<code class="fe me mf mg mh b">useState</code>和<code class="fe me mf mg mh b">useEffect</code>函数:</p><p id="5597" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在<code class="fe me mf mg mh b"><strong class="lk jd">quotesFetcher.js</strong></code></p><pre class="ks kt ku kv gt nn mh no np aw nq bi"><span id="f245" class="nr mr it mh b gy ns nt l nu nv">import React,{useState,useEffect} from "react"</span></pre><p id="3e8f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们将使用<code class="fe me mf mg mh b">useState</code>来分配几个钩子。这些钩子的值将显示在页面上。如果我们要使用基于类的组件，<code class="fe me mf mg mh b">useEffect</code>将是<code class="fe me mf mg mh b">onComponentMount</code>的等价物。</p><p id="ce1a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们定义<code class="fe me mf mg mh b">FetchQuote</code>函数，然后像这样导出它:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="822a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在转到根目录中的<code class="fe me mf mg mh b">App.js</code>,将所有代码替换为:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="og oh l"/></div></figure><ul class=""><li id="6324" class="oi oj it lk b ll lm lo lp lr ok lv ol lz om md on oo op oq bi translated"><code class="fe me mf mg mh b">Line 3</code>:导入我们刚刚从<code class="fe me mf mg mh b">quotesFetcher</code>文件中导出的<code class="fe me mf mg mh b">FetchQuote</code>函数。</li><li id="5757" class="oi oj it lk b ll or lo os lr ot lv ou lz ov md on oo op oq bi translated"><code class="fe me mf mg mh b">Line 7</code>:将<code class="fe me mf mg mh b">FetchQuote</code>组件渲染到DOM中。</li></ul><p id="c3cb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这将是代码的输出:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/fe9a1b304352056fdf379d29b116de1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*97c3FYk1RX65ZRxhAWsdyg.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">代码的输出</figcaption></figure><p id="9def" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这和预期的一样有效。我们需要挂钩来显示网页的报价和作者。</p><h2 id="05db" class="nr mr it bd ms nw nx dn mw ny nz dp na lr oa ob nc lv oc od ne lz oe of ng iz bi translated">声明挂钩</h2><p id="8a82" class="pw-post-body-paragraph li lj it lk b ll ni kd ln lo nj kg lq lr nk lt lu lv nl lx ly lz nm mb mc md im bi translated">我们将在我们的<code class="fe me mf mg mh b">FetchQuote</code>函数中声明一些钩子。</p><ul class=""><li id="f00b" class="oi oj it lk b ll lm lo lp lr ok lv ol lz om md on oo op oq bi translated"><code class="fe me mf mg mh b">quote</code>:会包含实际的说法。</li><li id="e99b" class="oi oj it lk b ll or lo os lr ot lv ou lz ov md on oo op oq bi translated"><code class="fe me mf mg mh b">author</code>:包含说话人的价值。</li><li id="a99f" class="oi oj it lk b ll or lo os lr ot lv ou lz ov md on oo op oq bi translated"><code class="fe me mf mg mh b">loading</code>:包含一个布尔值(默认为<code class="fe me mf mg mh b">true</code>，当我们成功从服务器获取数据时，该值将变为<code class="fe me mf mg mh b">false</code>。这个钩子改成<code class="fe me mf mg mh b">false</code>后，我们就会显示相关数据。</li></ul><p id="790d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在<code class="fe me mf mg mh b">FetchQuote</code>函数中，像这样声明你的钩子:</p><pre class="ks kt ku kv gt nn mh no np aw nq bi"><span id="4d15" class="nr mr it mh b gy ns nt l nu nv">const [quote,setQuote] = useState(‘’);<br/>const [loading,setLoading] = useState(true);<br/>const [author,setAuthor]= useState(‘’);</span></pre><h2 id="b168" class="nr mr it bd ms nw nx dn mw ny nz dp na lr oa ob nc lv oc od ne lz oe of ng iz bi translated">获取数据</h2><p id="5681" class="pw-post-body-paragraph li lj it lk b ll ni kd ln lo nj kg lq lr nk lt lu lv nl lx ly lz nm mb mc md im bi translated">现在我们有了钩子，是时候获取数据了。</p><p id="6088" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在<code class="fe me mf mg mh b">FetchQuote</code>函数中，找到<code class="fe me mf mg mh b">useEffect</code>函数:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/cf42985f8aea80458951d216853baa86.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*BWPnj9EN6-DrKQf7wiDHiA.png"/></div></figure><p id="3edc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在此函数中，编写以下代码:</p><pre class="ks kt ku kv gt nn mh no np aw nq bi"><span id="b7b2" class="nr mr it mh b gy ns nt l nu nv">fetch('http://quotes.rest/qod.json?category=inspire')<br/>.then(res=&gt; res.json())<br/>.then(data=&gt;{<br/>console.log(data);<br/>})</span></pre><p id="ed0a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这基本上意味着每当应用程序第一次启动时，我们将对Quotes API执行<code class="fe me mf mg mh b">fetch</code>函数。<br/><code class="fe me mf mg mh b">fetch()</code>功能基本上是向网站发送一个请求，然后以<code class="fe me mf mg mh b">Promise</code>的形式将收到的数据返回给我们。我们将把这些数据转换成<code class="fe me mf mg mh b">json</code>，然后输出到控制台。</p><p id="5a3d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">重新运行程序，查看控制台输出。这将是结果:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/a210f737fba472514550022822d6e95b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*LD0fzY8ju9ou1dITcw8ryw.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">显示JSON数据的控制台输出</figcaption></figure><p id="df23" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们现在有了JSON数据。让我们将这些数据分配给我们的钩子。</p><ul class=""><li id="f880" class="oi oj it lk b ll lm lo lp lr ok lv ol lz om md on oo op oq bi translated"><code class="fe me mf mg mh b">quote</code>钩子将被赋予<code class="fe me mf mg mh b">contents.quotes[0].quote</code>的值。这与实际报价相符。</li><li id="a684" class="oi oj it lk b ll or lo os lr ot lv ou lz ov md on oo op oq bi translated"><code class="fe me mf mg mh b">author</code>钩子将被赋予<code class="fe me mf mg mh b">contents.quotes[0].author</code>的值。这对应于位于JSON数组中的作者姓名。</li></ul><p id="119f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在是时候给钩子赋值了。</p><h2 id="f2df" class="nr mr it bd ms nw nx dn mw ny nz dp na lr oa ob nc lv oc od ne lz oe of ng iz bi translated">给挂钩赋值</h2><p id="98f0" class="pw-post-body-paragraph li lj it lk b ll ni kd ln lo nj kg lq lr nk lt lu lv nl lx ly lz nm mb mc md im bi translated">在您的useEffect()方法中，在您的<code class="fe me mf mg mh b">fetch()</code>调用中，编写以下代码:</p><pre class="ks kt ku kv gt nn mh no np aw nq bi"><span id="8ae3" class="nr mr it mh b gy ns nt l nu nv">setQuote(data.contents.quotes[0].quote);<br/>setAuthor(data.contents.quotes[0].author);</span></pre><p id="3a83" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这段代码意味着我们现在已经将<code class="fe me mf mg mh b">quote</code>和<code class="fe me mf mg mh b">author</code>钩子赋予了它们适当的值。</p><h2 id="adbe" class="nr mr it bd ms nw nx dn mw ny nz dp na lr oa ob nc lv oc od ne lz oe of ng iz bi translated">显示数据</h2><p id="5d4f" class="pw-post-body-paragraph li lj it lk b ll ni kd ln lo nj kg lq lr nk lt lu lv nl lx ly lz nm mb mc md im bi translated">这可能是这篇文章中最简单的一步。在<code class="fe me mf mg mh b">return</code>块中使用简单的JSX来显示钩子的值。为此，请修改以下代码:</p><pre class="ks kt ku kv gt nn mh no np aw nq bi"><span id="40ef" class="nr mr it mh b gy ns nt l nu nv">return(<br/>&lt;&gt;<br/>&lt;h1&gt;{quote}&lt;/h1&gt;<br/>&lt;p&gt;- {author}&lt;/p&gt;<br/>&lt;/&gt;<br/>)</span></pre><p id="db7b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们现在已经在<code class="fe me mf mg mh b">h1</code>标签中显示了<code class="fe me mf mg mh b">quote</code>钩子的值，在<code class="fe me mf mg mh b">p</code>标签中显示了<code class="fe me mf mg mh b">author</code>钩子的值。</p><p id="f285" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这将是代码的输出:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oz"><img src="../Images/d082aad971841e0080775ab729af4fc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4izW63hgoY0qh1ZVyLacOg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">本杰明·富兰克林今日励志名言！</figcaption></figure><p id="b973" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">那是一句相当激励人心的话！</p><p id="b0cc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这就是制作报价生成器的全部内容。但是有办法让这个应用程序变得更好。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="6686" class="mq mr it bd ms mt mu mv mw mx my mz na ki nb kj nc kl nd km ne ko nf kp ng nh bi translated">如何让我们的应用变得更好</h1><h2 id="37b6" class="nr mr it bd ms nw nx dn mw ny nz dp na lr oa ob nc lv oc od ne lz oe of ng iz bi translated">使用背景图像</h2><p id="0310" class="pw-post-body-paragraph li lj it lk b ll ni kd ln lo nj kg lq lr nk lt lu lv nl lx ly lz nm mb mc md im bi translated">让我们回溯到JSON数组的截图。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/be30e2bd2a8fad2cdc5b4bc1cd8a2ff8.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*sBD6TWlqMyWR2eGlePCa1w.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">我们的JSON数组</figcaption></figure><p id="af41" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">注意，我们在<code class="fe me mf mg mh b">contents.quotes[0]</code>属性中也有一个<code class="fe me mf mg mh b">background</code>值。这个值是图像的来源，所以我们可以在页面上显示它和报价。</p><p id="12e1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们这样声明它:</p><pre class="ks kt ku kv gt nn mh no np aw nq bi"><span id="cfd8" class="nr mr it mh b gy ns nt l nu nv">const [imgSrc,setImgSrc] = useState('');</span></pre><p id="5272" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在<code class="fe me mf mg mh b">fetch()</code>调用内，</p><pre class="ks kt ku kv gt nn mh no np aw nq bi"><span id="3c6b" class="nr mr it mh b gy ns nt l nu nv">setImgSrc(data.contents.quote[0].background)</span></pre><p id="269c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在返回块中，呈现一个<code class="fe me mf mg mh b">img</code>元素:</p><pre class="ks kt ku kv gt nn mh no np aw nq bi"><span id="aaa0" class="nr mr it mh b gy ns nt l nu nv">&lt;img src={imgSrc} /&gt;</span></pre><p id="6cc2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这将是输出:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pb"><img src="../Images/a50b25e815dc229b9d0a2f0b21d5b9dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CzvppmjSFXbCpE4BllFSaw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">代码的输出</figcaption></figure><p id="acb6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">看起来太棒了！</p><p id="678f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">或者，您可以使用由<a class="ae lh" href="http://api.unsplash.com" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>提供的图像。</p><h2 id="7a1e" class="nr mr it bd ms nw nx dn mw ny nz dp na lr oa ob nc lv oc od ne lz oe of ng iz bi translated">按时间间隔提取报价</h2><p id="3980" class="pw-post-body-paragraph li lj it lk b ll ni kd ln lo nj kg lq lr nk lt lu lv nl lx ly lz nm mb mc md im bi translated">让我们假设你在一台24/7开机的显示器上运行这个网站。你显然不会每天刷新页面。相反。我们可以使用一个间隔来获取每24小时的数据。</p><p id="76bc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为此，让我们将这个<code class="fe me mf mg mh b">fetch</code>调用放在一个方法中。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="d7e4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在让我们在一个<code class="fe me mf mg mh b">setInterval</code>方法中调用这个函数，这样它可以每24小时运行一次。</p><pre class="ks kt ku kv gt nn mh no np aw nq bi"><span id="4160" class="nr mr it mh b gy ns nt l nu nv">useEffect(()=&gt;{<br/>getQuote();<br/>const intervalID = setInterval(()=&gt;{<br/>getQuote()<br/>}, 24 * 60 * 60 * 1000);<br/>return ()=&gt;{<br/>clearInterval(intervalID);<br/>}<br/>},[])</span></pre><p id="8773" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最后，我们运行<code class="fe me mf mg mh b">clearInterval</code>方法来防止内存泄漏，以防用户终止应用程序。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="c417" class="mq mr it bd ms mt mu mv mw mx my mz na ki nb kj nc kl nd km ne ko nf kp ng nh bi translated">概述</h1><p id="a369" class="pw-post-body-paragraph li lj it lk b ll ni kd ln lo nj kg lq lr nk lt lu lv nl lx ly lz nm mb mc md im bi translated">这是<code class="fe me mf mg mh b">quoteFetcher.js</code></p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="3db2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这是<code class="fe me mf mg mh b">App.js</code></p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="og oh l"/></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="ca6a" class="mq mr it bd ms mt mu mv mw mx my mz na ki nb kj nc kl nd km ne ko nf kp ng nh bi translated">链接</h1><ul class=""><li id="dfdd" class="oi oj it lk b ll ni lo nj lr pc lv pd lz pe md on oo op oq bi translated"><a class="ae lh" href="https://github.com/HussainArif12/Inspirational-Quote-Generator" rel="noopener ugc nofollow" target="_blank">该项目的Github回购</a></li><li id="882e" class="oi oj it lk b ll or lo os lr ot lv ou lz ov md on oo op oq bi translated"><a class="ae lh" href="https://pusher.com/tutorials/consume-restful-api-react" rel="noopener ugc nofollow" target="_blank">如何在React中使用RESTful API</a></li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="51bc" class="mq mr it bd ms mt mu mv mw mx my mz na ki nb kj nc kl nd km ne ko nf kp ng nh bi translated">结论</h1><p id="8f1a" class="pw-post-body-paragraph li lj it lk b ll ni kd ln lo nj kg lq lr nk lt lu lv nl lx ly lz nm mb mc md im bi translated">这是一个非常简单的教程，但是如果你有一些困惑，我建议你学习一下钩子和React的其他核心特性。此外，我们也鼓励你玩代码，解构上面给出的程序。</p><p id="1e19" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">非常感谢你坚持到最后，祝你有美好的一天！</p><p id="7208" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">下篇:<a class="ae lh" href="https://medium.com/better-programming/build-a-login-system-in-node-js-f1ba2abd19a?source=your_stories_page---------------------------" rel="noopener">用Node搭建一个登录系统。Js </a> <br/>上一篇:<a class="ae lh" href="https://medium.com/better-programming/build-a-chat-app-in-node-js-with-room-functionality-6ebbd4b19133?source=your_stories_page---------------------------" rel="noopener">在Node.js中搭建一个带有房间功能的聊天App</a></p></div></div>    
</body>
</html>