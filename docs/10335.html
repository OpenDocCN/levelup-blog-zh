<html>
<head>
<title>Building Truth and Dare Game with Python | Beginner Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python构建真实而大胆的游戏|初学者指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/building-truth-and-dare-game-with-python-80a8e83bbc1b?source=collection_archive---------1-----------------------#2021-11-23">https://levelup.gitconnected.com/building-truth-and-dare-game-with-python-80a8e83bbc1b?source=collection_archive---------1-----------------------#2021-11-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/f8019c844f6ee936c18a910084d2d0d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qTwJw1f-ltG6qSnfJYC9Bg.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated"><a class="ae jg" href="https://www.fanpop.com/clubs/truth-or-dare-about-anything/images/35525557/title/truth-dare-photo" rel="noopener ugc nofollow" target="_blank">https://www . fanpop . com/clubs/truth-or-dare-about any/images/35525557/title/truth-dare-photo</a></figcaption></figure><div class=""/><p id="2ff7" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我将解释如何使用一个循环，基本的错误处理，并提出一个HTTP请求。我还将在本文中解释如何处理数据列表，即JSON数据。</p><h2 id="8375" class="le lf jj bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated"><strong class="ak">先决条件</strong></h2><ol class=""><li id="cc8b" class="lx ly jj ki b kj lz kn ma kr mb kv mc kz md ld me mf mg mh bi translated">命令行应用的基本了解:如果没有基本了解，请阅读<a class="ae jg" href="https://medium.com/geekculture/building-a-cli-tool-love-calculator-flames-using-python-39419e7f1f64" rel="noopener">building-a-CLI-tool-love-calculator-flames-using-python</a></li><li id="174f" class="lx ly jj ki b kj mi kn mj kr mk kv ml kz mm ld me mf mg mh bi translated">python的基本语法，列表，变量。</li></ol><h2 id="87ab" class="le lf jj bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">目录</h2><ol class=""><li id="118d" class="lx ly jj ki b kj lz kn ma kr mb kv mc kz md ld me mf mg mh bi translated">创建运行脚本</li><li id="322e" class="lx ly jj ki b kj mi kn mj kr mk kv ml kz mm ld me mf mg mh bi translated">使用<a class="ae jg" href="https://docs.python.org/3/library/urllib.html" rel="noopener ugc nofollow" target="_blank"> urllib </a>请求HTTP API</li><li id="ea4a" class="lx ly jj ki b kj mi kn mj kr mk kv ml kz mm ld me mf mg mh bi translated">解析和操作JSON数据</li><li id="e4ab" class="lx ly jj ki b kj mi kn mj kr mk kv ml kz mm ld me mf mg mh bi translated">游戏逻辑:接受输入(选择)并为玩家生成问题</li><li id="58f1" class="lx ly jj ki b kj mi kn mj kr mk kv ml kz mm ld me mf mg mh bi translated">重复选择</li></ol><h2 id="b1ab" class="le lf jj bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">1.创建运行脚本</h2><p id="ad57" class="pw-post-body-paragraph kg kh jj ki b kj lz kl km kn ma kp kq kr mn kt ku kv mo kx ky kz mp lb lc ld im bi translated">作为开发人员，你必须做的第一件事就是从工作脚本开始。首先，创建一个文件名<strong class="ki jk">“truth-dare . py”</strong>，并赋予其执行权限。您可以添加以下代码并运行脚本。要了解更多信息，请阅读…<a class="ae jg" href="https://medium.com/geekculture/building-a-cli-tool-love-calculator-flames-using-python-39419e7f1f64" rel="noopener">building-a-CLI-tool-love-calculator-flames-using-python</a></p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="8f3d" class="le lf jj mv b gy mz na l nb nc">#!/usr/bin/python3</span><span id="1484" class="le lf jj mv b gy nd na l nb nc">def printline(msg): print(f"\n{msg}\n")</span><span id="28d3" class="le lf jj mv b gy nd na l nb nc">def print_logo(): printline("""<br/> _________  __  __________ __<br/>/_  __/ _ \/ / / /_  __/ // /<br/> / / / , _/ /_/ / / / / _  / <br/>/_/ /_/|_|\____/ /_/ /_//_/  <br/>     / __/___                <br/>     &gt; _/_ _/                <br/>   _|_____/   ___  ____      <br/>  / _ \/ _ | / _ \/ __/      <br/> / // / __ |/ , _/ _/        <br/>/____/_/ |_/_/|_/___/""")</span><span id="1507" class="le lf jj mv b gy nd na l nb nc">def main():<br/>    print_logo()</span><span id="2e98" class="le lf jj mv b gy nd na l nb nc">if __name__ == "__main__":<br/>    main()</span></pre><p id="3ded" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦你运行上面的脚本，你会在你的终端上看到ASCII字符艺术。</p><h2 id="b2f8" class="le lf jj bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated"><strong class="ak"> 2。请求HTTP API </strong></h2><p id="713d" class="pw-post-body-paragraph kg kh jj ki b kj lz kl km kn ma kp kq kr mn kt ku kv mo kx ky kz mp lb lc ld im bi translated">一旦你可以运行脚本，你需要游戏的问题。您可以使用列表对问题列表进行硬编码。然而，最好的选择是，您可以使用任何服务器将您的问题保存为JSON格式，并且您可以使用<strong class="ki jk"> urllib </strong>库获取数据。对于本文，我将JSON放在了我的gist页面上。你可以在<a class="ae jg" href="https://gist.github.com/deepakshrma/9498a19a3ed460fc662c536d138c29b1/" rel="noopener ugc nofollow" target="_blank">gist.github.com/</a><a class="ae jg" href="https://gist.github.com/deepakshrma/9498a19a3ed460fc662c536d138c29b1" rel="noopener ugc nofollow" target="_blank">truth-n-dare . JSON</a>上下载并使用JSON数据</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="c17d" class="le lf jj mv b gy mz na l nb nc">import json<br/>from urllib.request import urlopen</span><span id="55ee" class="le lf jj mv b gy nd na l nb nc">def requestJson(url, default=[]):<br/>    data = default<br/>    try:<br/>        data = json.load(urlopen(truth_dare_url))<br/>    except:<br/>        print("Error while fetching data...")<br/>    return data</span></pre><p id="ffe8" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里的<strong class="ki jk"> requestJson </strong>是util函数。这需要<strong class="ki jk"> url </strong>来请求和获取数据。<strong class="ki jk"> json.load </strong>加载数据并解析成json对象。在获取或解析的过程中，如果出现错误，<strong class="ki jk"> requestJson </strong>函数将返回<strong class="ki jk">默认值</strong>。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="5016" class="le lf jj mv b gy mz na l nb nc">def main():<br/>    print_logo()</span><span id="be73" class="le lf jj mv b gy nd na l nb nc"># Request truth_dare json data<br/>    truth_dare_list = requestJson(truth_dare_url)</span><span id="f157" class="le lf jj mv b gy nd na l nb nc">print(truth_dare_list[0]["summary"])</span><span id="3bb7" class="le lf jj mv b gy nd na l nb nc">if __name__ == "__main__":<br/>    main()</span></pre><p id="84f0" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦你运行了上面的脚本，你将会看到输出<strong class="ki jk">`我谅你也不敢站起来转2圈`。</strong>这里我们取了一个问题列表，得到了第一项的摘要。</p><h2 id="d995" class="le lf jj bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">3.解析和操作JSON数据</h2><p id="0ef1" class="pw-post-body-paragraph kg kh jj ki b kj lz kl km kn ma kp kq kr mn kt ku kv mo kx ky kz mp lb lc ld im bi translated">现在，既然我们有了JSON数据，我们可以将数据分成<strong class="ki jk">真相列表</strong>和<strong class="ki jk">挑战列表</strong>。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="c2ee" class="le lf jj mv b gy mz na l nb nc">def main():<br/>  print_logo()<br/>  # Request truth_dare json data<br/>  truth_dare_list = requestJson(truth_dare_url)<br/>  <br/>  <strong class="mv jk"># Parse and create list of truth and dare</strong><br/>  <strong class="mv jk">truth_list = [<br/>      item<br/>      for item in truth_dare_list<br/>      if item["type"] == "Truth"<br/>  ]</strong><br/>  <strong class="mv jk">dare_list = [<br/>      item<br/>      for item in truth_dare_list<br/>      if item["type"] == "Dare"<br/>  ]</strong></span><span id="8ee9" class="le lf jj mv b gy nd na l nb nc">  print(dare_list[0])<br/>  print(truth_list[0])</span><span id="5668" class="le lf jj mv b gy nd na l nb nc">if __name__ == "__main__":<br/>    main()</span></pre><p id="29b8" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里，在上面的例子中，我使用了两个单独的来平分列表。但是，您可以使用相同的for循环来对分。</p><h2 id="373f" class="le lf jj bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">4.接受玩家的输入(选择)</h2><p id="5dc3" class="pw-post-body-paragraph kg kh jj ki b kj lz kl km kn ma kp kq kr mn kt ku kv mo kx ky kz mp lb lc ld im bi translated">我们还没有决定运动员的人数。玩这个游戏，我们最少需要两个玩家。不过这个游戏很多玩家都可以玩。我们可以接受用户输入来开始玩家的数量。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="65b7" class="le lf jj mv b gy mz na l nb nc">class Color:<br/>    def colors_256(color_, msg=""):<br/>        return(f"\033[38;5;{str(color_)}m {msg} \033[0;0m")</span><span id="ac01" class="le lf jj mv b gy nd na l nb nc">    def red(msg):<br/>        return Color.colors_256(9, msg)</span><span id="d402" class="le lf jj mv b gy nd na l nb nc">    def blue(msg):<br/>        return Color.colors_256(6, msg)</span><span id="b8ab" class="le lf jj mv b gy nd na l nb nc">    def yellow(msg):<br/>        return Color.colors_256(11, msg)</span><span id="00dc" class="le lf jj mv b gy nd na l nb nc">    def green(msg):<br/>        return Color.colors_256(10, msg)</span><span id="ac96" class="le lf jj mv b gy nd na l nb nc">def main():</span><span id="1bb1" class="le lf jj mv b gy nd na l nb nc"><strong class="mv jk">  # Take number of players<br/>  number_of_player = int(input(Color.blue("Enter number of players: ")))</strong></span><span id="af1c" class="le lf jj mv b gy nd na l nb nc"><strong class="mv jk">  print(Color.green(<br/>        f"{number_of_player} players are playing this game"))</strong></span><span id="44dc" class="le lf jj mv b gy nd na l nb nc">if __name__ == "__main__":<br/>    main()</span></pre><p id="9539" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以使用python提供的<strong class="ki jk"> input </strong>方法从用户那里获取输入。颜色<strong class="ki jk">是处理颜色的实用类。</strong></p><p id="61d9" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">每次用户玩这个游戏时，他/她需要从<strong class="ki jk">【真相】</strong><strong class="ki jk">【挑战】</strong>中选择一个选项。我们可以用同样的输入法要求选择作为提示。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="97f2" class="le lf jj mv b gy mz na l nb nc">#!/usr/bin/python3</span><span id="13f9" class="le lf jj mv b gy nd na l nb nc">import json<br/>from urllib.request import urlopen<br/><strong class="mv jk">import random</strong></span><span id="05b5" class="le lf jj mv b gy nd na l nb nc"># Rest of the code</span><span id="e2c5" class="le lf jj mv b gy nd na l nb nc">def main():<br/>  # Rest of the code<br/>  # Take User input(choice)<br/>  <strong class="mv jk">command = int(input(Color.blue("""\nPlease enter your choice\n1) Truth \n2) Dare \n9) Restart Game\n0) End Game\n&gt;""")))<br/>  choice_list = truth_list</strong><br/>  <br/>  # On user select TRUTH<br/>  <strong class="mv jk">if command == 1:<br/>    # do nothing<br/>    pass</strong></span><span id="7125" class="le lf jj mv b gy nd na l nb nc">  # On user select Dare<br/>  <strong class="mv jk">elif command == 2:<br/>    choice_list = dare_list</strong></span><span id="a79d" class="le lf jj mv b gy nd na l nb nc">  # Guess question from list<br/>  <strong class="mv jk">ran = random.randint(0, len(choice_list)-1)<br/>  question = choice_list[ran]["summary"]<br/>  print(Color.green(f"\n{question}\n\n"))</strong></span><span id="c899" class="le lf jj mv b gy nd na l nb nc">if __name__ == "__main__":<br/>    main()</span></pre><p id="adb5" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">基于用户的选择，我们将选择<strong class="ki jk">真实列表或冒险列表。</strong>一旦列表被选中，我们将从选中的选项列表中随机抽取问题。</p><h2 id="4c8a" class="le lf jj bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated"><strong class="ak"> 5。重复选择</strong></h2><p id="7258" class="pw-post-body-paragraph kg kh jj ki b kj lz kl km kn ma kp kq kr mn kt ku kv mo kx ky kz mp lb lc ld im bi translated">到目前为止，我们已经根据用户的选择生成了问题。如果我们想对多个用户重复这个过程呢？我们需要运行一个无限循环。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="4255" class="le lf jj mv b gy mz na l nb nc">def main():<br/>  #Rest of the code</span><span id="7846" class="le lf jj mv b gy nd na l nb nc">  # Infinte loop<br/>  <strong class="mv jk">while True:</strong><br/>    # Take User input(choice)<br/>    command = int(input(Color.blue("""\nPlease enter your choice\n1) Truth \n2) Dare \n9) Restart Game\n0) End Game\n&gt;""")))</span><span id="aeb9" class="le lf jj mv b gy nd na l nb nc">    <strong class="mv jk"># If exit, end the game<br/>    if command == 0:<br/>       break</strong></span><span id="443d" class="le lf jj mv b gy nd na l nb nc">    # Rest of the code<br/>    print(Color.green(f"\n{question}\n\n"))</span><span id="2193" class="le lf jj mv b gy nd na l nb nc">if __name__ == "__main__":<br/>    main()</span></pre><h2 id="b55b" class="le lf jj bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">奖金:清理</h2><p id="da19" class="pw-post-body-paragraph kg kh jj ki b kj lz kl km kn ma kp kq kr mn kt ku kv mo kx ky kz mp lb lc ld im bi translated">现在，由于我们有了一个工作应用程序，我们可以清理一些东西。我们可以将所有消息移动到一个<strong class="ki jk">字典</strong>中。我们将用户输入解析为num，如果输入无效，我们可以返回零(0)。</p><p id="95a3" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki jk">完整的例子:</strong></p><figure class="mq mr ms mt gt iv"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="2c12" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">运行上面的示例后，您可能会看到如下示例。</p><figure class="mq mr ms mt gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ng"><img src="../Images/673740164b0dfe0be3244cd4376ca5b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*09tpFa0xT6MRgvr9yucGEg.png"/></div></div></figure><h2 id="be69" class="le lf jj bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated"><strong class="ak">结论</strong></h2><p id="5bbe" class="pw-post-body-paragraph kg kh jj ki b kj lz kl km kn ma kp kq kr mn kt ku kv mo kx ky kz mp lb lc ld im bi translated">如您所见，用python构建CLI应用程序相当容易。在给定的文章中，我们学习了像urllib，random这样的模块，以及如何使用列表。希望你会这篇文章。</p></div></div>    
</body>
</html>