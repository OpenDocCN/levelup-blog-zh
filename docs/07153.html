<html>
<head>
<title>JavaScript Web Synth From Scratch — Adding a Keyboard to The Sine Wave Oscillator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript Web Synth向正弦波振荡器添加键盘</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/web-synth-from-scratch-adding-virtual-keyboard-to-a-sine-wave-oscillator-e4dd6cb8f3fd?source=collection_archive---------3-----------------------#2021-01-27">https://levelup.gitconnected.com/web-synth-from-scratch-adding-virtual-keyboard-to-a-sine-wave-oscillator-e4dd6cb8f3fd?source=collection_archive---------3-----------------------#2021-01-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9261" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在前面的<a class="ae kl" href="https://alexjilkin.medium.com/modular-javascript-web-synth-a726d8e937b6" rel="noopener">部分</a>中，我们创建了一个简单的正弦波并播放了它。</p><p id="2b3f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这次我们将使用浏览器和React创建一个简单的虚拟键盘来播放我们的正弦波。你可以在这里找到完整的源代码<a class="ae kl" href="https://github.com/alexjilkin/jsynth-steps" rel="noopener ugc nofollow" target="_blank"/></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/f07b9673d550dd889ecba855f70c8fcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JKcBh-JMkqed9HTfJXImjw.png"/></div></div></figure><p id="7037" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">演奏与音高标准440赫兹有半音差的不同音符的基本方法是将<em class="ky"> 440 </em>乘以<em class="ky"> 2^(n/12) </em> <br/>当<em class="ky"> n </em>是a以上或以下多少个半音时</p><h1 id="ae91" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">履行</h1><p id="82c4" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">我不会详细介绍React应用程序是如何工作的，但我们的基础将是一个键盘组件，你可以在input/Keyboard.jsx中看到，它的工作是绘制一个漂亮的键盘，并捕捉用户按下的键。</p><p id="99fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当input/KeyboardManager.js在triggers对象中记录所有这些触发器时。</p><p id="06b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的<strong class="jp ir">引擎</strong>将是synth模块，它获取这些触发器并从中生成一个“波”,我们稍后可以播放它</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="9c82" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我们有主时钟变量，和一个产生下一个播放值的波形发生器。</p><p id="9c44" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于每一次触发，发生器都会累积一个不同频率的正弦波，这样我们就可以同时弹奏不同的音符(用synth行话来说就是<em class="ky">复调</em>)</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><p id="a658" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在播放这个，我们将有我们的browserPlayer模块</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="852c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">浏览器允许我们从值中创建一个缓冲区，并播放它们。<br/>不知道创建此输出流的最佳实践是什么(也许您可以写下并建议一些不同的内容？)<br/>但是这种方式对我来说非常有效，它从我们之前的波形发生器中获取下一个值，并将其发送到输出端。</p><h1 id="7f3e" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">我们得到了什么？</h1><p id="e595" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">简而言之，这个项目的结果——我们得到了一个简单的合成器，我们可以用键盘演奏，从头开始创造声音，我们可以很容易地操纵它的值。<br/>添加扭曲？没问题，只要通过一个失真模拟方程来传递数值就行了。<br/>添加延迟？没问题，只需保存先前状态的值，并再次将它们添加到当前值中。</p><p id="1f4a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查看<a class="ae kl" href="https://alexjilkin.github.io/jsynth-steps" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">演示</strong> </a> <strong class="jp ir"> <br/>阅读下一步我们在这里添加一个</strong> <a class="ae kl" href="https://alexjilkin.medium.com/javascript-web-synth-from-scratch-delay-module-5975d059ca83" rel="noopener"> <strong class="jp ir">延迟模块</strong> </a></p></div></div>    
</body>
</html>