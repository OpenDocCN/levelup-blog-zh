<html>
<head>
<title>7 practical examples of bitwise operation in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中位运算的7个实际例子</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/7-practical-examples-of-bitwise-operation-in-javascript-342216522674?source=collection_archive---------9-----------------------#2022-12-31">https://levelup.gitconnected.com/7-practical-examples-of-bitwise-operation-in-javascript-342216522674?source=collection_archive---------9-----------------------#2022-12-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="fe13" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi ko translated">itwise操作对每个程序员来说都是一个强大的工具，因为它们允许你操作一个值中的单个位。这在各种情况下都很有用。例如，操作通常更快，但它也带来了难以理解的代价。所以，了解JavaScript中的位运算是如何工作的很重要。也知道按位运算应该属于每个软件开发人员的技能。</p><p id="ada4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通常情况下，这些例子是相当“学术”的，像掩盖一点，设置，或清除一点。这些例子太抽象了，至少在我们看来是这样。尽管我们认识到首先理解位运算的基础很重要。因此，我们在前面的中发表了一篇关于位运算的<a class="ae lg" href="https://medium.com/gitconnected/basics-of-bitwise-operations-in-javascript-with-practical-examples-6197b4d391b3" rel="noopener">基础的文章。然而，在这篇文章中，我们希望收集实际的例子，使按位更容易理解。</a></p><p id="84fc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这只是众多关于JavaScript和软件开发的文章中的一篇。欢迎关注我们，获取更多关于JavaScript和软件开发的精彩内容。我们尝试一周发布多次。请确保不要错过我们的任何精彩内容。</p><figure class="li lj lk ll gt lm gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi lh"><img src="../Images/f4e50e99e9a01458656f77db63dbfed5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IgUymPA-HxnHxhA0"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">马特·阿特兹在<a class="ae lg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="1727" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过利用按位运算对数字的二进制表示进行操作，可以在JavaScript中以意想不到的方式使用按位运算。下面是一些在实际应用中使用按位运算的例子:</p><h2 id="078e" class="lw lx it bd ly lz ma dn mb mc md dp me kb mf mg mh kf mi mj mk kj ml mm mn mo bi translated">实现“穷人的”模运算符</h2><p id="e29e" class="pw-post-body-paragraph jq jr it js b jt mp jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj mt kl km kn im bi translated">您可能已经使用了模运算符。使用按位AND运算符(&amp;)，您可以实现一个适用于2的幂除数的“穷人”模运算符。例如，要使用按位AND运算符计算x % 8，可以执行以下操作:</p><pre class="li lj lk ll gt mu mv mw bn mx my bi"><span id="bdaa" class="mz lx it mv b be na nb l nc nd">let result = x &amp; 7;</span></pre><p id="a358" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这比使用%运算符更快，尤其是对于大数，因为它避免了除法运算。但是，它仅适用于2的幂的约数，并且结果可能与对其他约数使用%运算符不同。</p><h2 id="c6e6" class="lw lx it bd ly lz ma dn mb mc md dp me kb mf mg mh kf mi mj mk kj ml mm mn mo bi translated">不使用临时变量交换值</h2><p id="c893" class="pw-post-body-paragraph jq jr it js b jt mp jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj mt kl km kn im bi translated">您可以使用按位XOR运算符(^)来交换两个变量x和y的值，而无需使用临时变量。例如:</p><pre class="li lj lk ll gt mu mv mw bn mx my bi"><span id="cc6f" class="mz lx it mv b be na nb l nc nd">let x = 42;<br/>let y = 13;<br/><br/>x ^= y;<br/>y ^= x;<br/>x ^= y;<br/>console.log(x); // Output: 13<br/>console.log(y); // Output: 42</span></pre><h2 id="5b2f" class="lw lx it bd ly lz ma dn mb mc md dp me kb mf mg mh kf mi mj mk kj ml mm mn mo bi translated">寻找两个值的最小值或最大值</h2><p id="2efe" class="pw-post-body-paragraph jq jr it js b jt mp jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj mt kl km kn im bi translated">您可以使用按位OR (|)和按位AND (&amp;)来查找两个值的最小值或最大值，而无需使用比较运算符。这是可行的，因为对两个值进行“或”运算将导致在每个比特位置具有1的值，其中至少一个原始值具有1，而对两个值进行“与”运算将导致在每个比特位置具有1的值，其中两个原始值都具有1。这里有一个例子:</p><pre class="li lj lk ll gt mu mv mw bn mx my bi"><span id="c214" class="mz lx it mv b be na nb l nc nd">function min(x, y) {<br/> return y &amp; ((x - y) &gt;&gt; 31) | x &amp; (~(x - y) &gt;&gt; 31);<br/>}<br/>function max(x, y) {<br/> return x &amp; ((x - y) &gt;&gt; 31) | y &amp; (~(x - y) &gt;&gt; 31);<br/>}<br/>console.log(min(10, 20)); // Output: 10<br/>console.log(max(10, 20)); // Output: 20</span></pre><h2 id="84f7" class="lw lx it bd ly lz ma dn mb mc md dp me kb mf mg mh kf mi mj mk kj ml mm mn mo bi translated">确定一个数是奇数还是偶数</h2><p id="1241" class="pw-post-body-paragraph jq jr it js b jt mp jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj mt kl km kn im bi translated">要在JavaScript中使用按位运算来确定一个数字是奇数还是偶数，可以使用按位AND运算符(&amp;)来检查数字的最低有效位(LSB)的值。LSB是数字的二进制表示中最右边的位，它代表数字的模2值。例如:</p><pre class="li lj lk ll gt mu mv mw bn mx my bi"><span id="17d3" class="mz lx it mv b be na nb l nc nd">function isOdd(num) {<br/>  return (num &amp; 1) === 1;<br/>}<br/><br/>function isEven(num) {<br/>  return (num &amp; 1) === 0;<br/>}<br/><br/>console.log(isOdd(5));  // Output: true<br/>console.log(isEven(5)); // Output: false<br/>console.log(isOdd(6));  // Output: false<br/>console.log(isEven(6)); // Output: true</span></pre><p id="45c6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在此示例中，isOdd函数使用按位AND运算符检查数字的最低有效位是否为1。如果是，这个数是奇数。isEven函数做同样的事情，但是检查最低有效位是否为0。</p><p id="50b9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">值得注意的是，这种方法只适用于整数。如果您需要检查浮点数是奇数还是偶数，您将需要使用不同的方法。</p><h2 id="09d9" class="lw lx it bd ly lz ma dn mb mc md dp me kb mf mg mh kf mi mj mk kj ml mm mn mo bi translated">检查一个数是否是2的幂</h2><p id="c1bf" class="pw-post-body-paragraph jq jr it js b jt mp jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj mt kl km kn im bi translated">您可以使用按位AND运算符(&amp;)来检查数字n是否是2的幂。如果n是2的幂，那么n &amp;(n-1)将是0。例如:</p><pre class="li lj lk ll gt mu mv mw bn mx my bi"><span id="de84" class="mz lx it mv b be na nb l nc nd">if ((n &amp; (n - 1)) === 0) {<br/> console.log(`${n} is a power of 2`);<br/>} else {<br/> console.log(`${n} is not a power of 2`);<br/>}</span></pre><p id="654e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望这些例子能给你一些在JavaScript中以意想不到的方式使用位运算的想法。关于这个话题你还有其他问题吗？</p><h2 id="7eff" class="lw lx it bd ly lz ma dn mb mc md dp me kb mf mg mh kf mi mj mk kj ml mm mn mo bi translated">计算一个数x是否能被数y整除</h2><p id="dcb5" class="pw-post-body-paragraph jq jr it js b jt mp jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj mt kl km kn im bi translated">一种方法是使用按位AND运算符(&amp;)和移位来检查x除以y的余数是否为0。</p><p id="a91c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，假设您想检查x是否能被4整除。您可以执行以下操作:</p><pre class="li lj lk ll gt mu mv mw bn mx my bi"><span id="e5da" class="mz lx it mv b be na nb l nc nd">if ((x &amp; 3) === 0) {<br/> console.log(`${x} is divisible by 4`);<br/>} else {<br/> console.log(`${x} is not divisible by 4`);<br/>}</span></pre><p id="6e79" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">表达式(x &amp; 3)将计算x除以4的余数，因为4等于2，而2 — 1 = 3。如果余数是0，那么x可以被4整除。</p><p id="9f5b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这种方法只适用于2的幂的除数，因为按位AND运算符只适用于数字的二进制表示。对于其他除数，您需要使用不同的方法，例如使用模运算符(%)或整数除法(/)。</p><p id="e9f7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下面是一个更通用的实现，您可以用它来通过位运算检查数字x是否能被数字y整除:</p><pre class="li lj lk ll gt mu mv mw bn mx my bi"><span id="206f" class="mz lx it mv b be na nb l nc nd">function isDivisible(x, y) {<br/> let t = y;<br/> let s = 0;<br/>// Calculate t = y * 2^s such that t is a power of 2<br/> while ((t &amp; (t - 1)) !== 0) {<br/> t &amp;= (t - 1);<br/> s++;<br/> }<br/>// Check if x is divisible by t<br/> return (x &amp; (t - 1)) === 0;<br/>}</span></pre><p id="00de" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该函数的工作方式是首先找到大于或等于y的2的最小幂，然后使用按位and运算符检查x是否能被2的幂整除。</p><p id="548b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，要检查x是否能被3整除，可以调用isDivisible(x，3)。如果x能被3整除，则返回true，否则返回false。</p><h2 id="5707" class="lw lx it bd ly lz ma dn mb mc md dp me kb mf mg mh kf mi mj mk kj ml mm mn mo bi translated">实现布隆过滤器</h2><p id="6e16" class="pw-post-body-paragraph jq jr it js b jt mp jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj mt kl km kn im bi translated">我们之前发表了一篇关于bloom filter 的<a class="ae lg" href="https://medium.com/@pandaquests/bloom-filter-in-javascript-24c64b48f8d2" rel="noopener">文章。布隆过滤器是用于确定元素是否是集合成员的概率数据结构。它要么返回一个元素肯定不在集合中(意味着没有假阴性)，要么可能在一个集合中(可能是假阳性)。它可能会返回误报，这使得它成为一个概率数据结构。</a></p><pre class="li lj lk ll gt mu mv mw bn mx my bi"><span id="7c0c" class="mz lx it mv b be na nb l nc nd">class BloomFilter {<br/> constructor(size, hashFunctions) {<br/>   this.size = size;<br/>   this.hashFunctions = hashFunctions;<br/>   this.bits = new Array(size).fill(0);<br/> }<br/> add(item) {<br/>  for (let i = 0; i &lt; this.hashFunctions.length; i++) {<br/>   const hashValue = this.hashFunctions[i](item);<br/>   const index = hashValue % this.size;<br/>   this.bits[index] |= 1 &lt;&lt; hashValue;<br/>  }<br/> }<br/> contains(item) {<br/>  for (let i = 0; i &lt; this.hashFunctions.length; i++) {<br/>   const hashValue = this.hashFunctions[i](item);<br/>   const index = hashValue % this.size;<br/>   if ((this.bits[index] &amp; 1 &lt;&lt; hashValue) === 0) {<br/>    return false;<br/>   }<br/>  }<br/>  return true;<br/> }<br/>}</span></pre><p id="6d25" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它使用不同位运算的组合，即位运算或和左移。基本上，它通过应用| (OR)操作符来计算散列值并设置位。钻头的位置由&lt;&lt; (left shift) operator and the value of the hash .</p><p id="cb48" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">It has many applications, e.g. network traffic filtering, spell checking, cache invalidation, password checker, and so on. <a class="ae lg" href="https://pandaquests.medium.com/bloom-filter-in-javascript-24c64b48f8d2" rel="noopener">设定，更多细节参见本文</a>。我们还<a class="ae lg" href="https://github.com/pandaquests/passwordChecker/blob/main/passwordChecker.js" rel="noopener ugc nofollow" target="_blank">在这里实现了一个密码检查器</a>来举例说明布隆过滤器。</p><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/5c7fdb823e2c7f4190f716ff6bed224c.png" data-original-src="https://miro.medium.com/v2/resize:fit:304/format:webp/1*M96Lw3t2ZV4F3S-tD-N27Q.png"/></div></figure><p id="adef" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你知道更多使用位运算的实际例子吗？我们一直在寻找更实用的按位运算的例子，因为我们认为这是一个有趣的话题，将提高你作为软件开发人员的技能。请随时联系我们。我们喜欢收到你的来信。</p><p id="d14d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你喜欢这个内容，那么别忘了关注我们。我们每周发表多篇文章。所以，不要错过任何一个。再见</p></div></div>    
</body>
</html>