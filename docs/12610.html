<html>
<head>
<title>Understand, Visualize, and Lower CloudWatch Costs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解、可视化和降低云监控成本</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/understand-visualize-and-lower-cloudwatch-costs-440e0717078c?source=collection_archive---------12-----------------------#2022-06-22">https://levelup.gitconnected.com/understand-visualize-and-lower-cloudwatch-costs-440e0717078c?source=collection_archive---------12-----------------------#2022-06-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7d10" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">AWS CloudWatch成本及其原因</h2></div><p id="18a0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lb">作者:格特·伦德斯，企业安全开发部负责人</em></p><h1 id="0c24" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">日志和指标</h1><p id="687c" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">为了获得洞察力，在构建服务或应用程序时，日志和指标在设置中是至关重要的。如果遇到麻烦，首先要查看日志。指标使您能够预测事件，并在数字开始偏离时得到通知。</p><p id="d3cf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通常从小事做起，随着服务的增加，日志和指标的数量也会增加。在AWS中，指标和日志是AWS CloudWatch的一部分。</p><h1 id="96e7" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">捉迷藏</h1><p id="5c1b" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">这些年来，我注意到很好地理解你的CloudWatch成本是很棘手的。大多数时候，AWS CloudWatch并不是AWS账单上最贵的服务。通常情况下，CloudWatch的成本甚至都排不到前三。<strong class="kh ir">那个地方</strong><strong class="kh ir"><em class="lb">——就在前三名之外——</em></strong><strong class="kh ir">看起来是吃掉你一大部分预算的完美地点，而不会成为下一轮节约成本的通常嫌疑人</strong>。😓</p><p id="6baf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请务必检查您的默认设置。以日志组保留为例。我认为日志组永不过期的默认值可能是不必要的。<strong class="kh ir">获得有用的成本信息也非常困难(几乎不可能)</strong>。</p><h1 id="186a" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">CloudWatch日志组成本分布</h1><p id="97ca" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">首先，关于CloudWatch日志，<strong class="kh ir">请注意，昂贵的不是数据存储。数据摄取会产生成本</strong>。你关于日志的第一个问题:<code class="fe lz ma mb mc b">which log groups generate the highest cost?</code>一个好的洞察力不是现成的，但是我想出了一个很好的方法。<strong class="kh ir">我构建了一个图表，显示了日志组数据摄取分布。该图从左到右显示了吃钱最多的原木组</strong>。</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi md"><img src="../Images/9ded660ba09da0229ae77afc0a765c56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZoK81eZSq72oteN-.png"/></div></div></figure><p id="0c0c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您会立即注意到图表最左侧有一个显著的异常值。不是什么大惊喜；在这种情况下，明显的赢家是AWS CloudTrail。像这样的异常值很难放大其他元素。要进一步深入图表，请开始禁用图表图例右侧的异常值。</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mp"><img src="../Images/2fc421a8ffa06b88f6f15e50903e0aed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*U6x0ZhZI1uqUTEZq.png"/></div></div></figure><p id="4139" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">自己设置日志组数据摄取分布图很容易。在CloudWatch中，创建一个新的仪表板并添加一个新的小部件。<strong class="kh ir">最重要的是填写下面的查询来构建图形</strong>:</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mq"><img src="../Images/932566fec9b6c83382a363a0813de559.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Qkp0jxKNtGx3Pppz.png"/></div></div></figure><p id="2be2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了增强组大小之间的对比，您可以调整图表周期:</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mr"><img src="../Images/83cdf2c03d5c4dfc8c9a741723b72a13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kBkom2VUsatZGAk5.png"/></div></div></figure><p id="9a3e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">向右移动图例有助于选择某些组。</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi ms"><img src="../Images/8fbb938ab85c20be2b8e44e3b1aa7d3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8E4ayA2XTTn29Vhj.png"/></div></div></figure><p id="944c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">图形可视化允许您对日志组的优化进行优先级排序。</strong>最终，优化可能会降低您的日志数量:</p><ul class=""><li id="b485" class="mt mu iq kh b ki kj kl km ko mv ks mw kw mx la my mz na nb bi translated">您需要那么多日志语句吗？挑战自我！</li><li id="dff3" class="mt mu iq kh b ki nc kl nd ko ne ks nf kw ng la my mz na nb bi translated">质疑日志级别。拥有一个调试级别有时很好，但是总是在任何地方使用这个日志级别可能有些过头了。</li><li id="e23d" class="mt mu iq kh b ki nc kl nd ko ne ks nf kw ng la my mz na nb bi translated">CloudWatch日志代理可以生成大量的日志/成本。</li></ul><p id="c7f7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我知道，这是在踢开一扇门😄</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/dd719d23088983aa7e7a287f623a07c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*5lQzuJVMwFWbW_mK.gif"/></div></figure><h1 id="68da" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">云观察指标</h1><p id="2596" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">如果说获取日志洞察很复杂，那么获取度量数据就更加棘手了。<strong class="kh ir">更糟糕的是，目前没有办法深入了解CloudWatch指标</strong>。我联系了支持人员询问方法，但他们告诉我这是不可能的。😟</p><p id="f0b1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我现在能做的就是让人们意识到CloudWatch的度量成本。<strong class="kh ir">记住公制成本会很快变得昂贵</strong>。例如，在某个时候，我在一些定制指标的帮助下，在一系列实例上创建了<a class="ae ni" href="https://aws.amazon.com/builders-library/implementing-health-checks/" rel="noopener ugc nofollow" target="_blank">深度健康检查</a>。我原以为费用可以忽略不计，结果却发现这些深度健康检查每月花费约900美元。我可以告诉你，现在健康早就没了。😉</p><h1 id="8e40" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">总结</h1><p id="7779" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">我的建议是至少每月检查一下你的CloudWatch费用。请注意，CloudWatch成本往往不为人所知，并尝试找到一种方法来深入了解您的CloudWatch成本。</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="e58b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lb">原载于2022年6月22日</em><a class="ae ni" href="https://www.element7.io/2022/06/understand-visualize-and-lower-cloudwatch-costs/" rel="noopener ugc nofollow" target="_blank"><em class="lb">https://www . element 7 . io</em></a><em class="lb">。</em></p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="b2f8" class="lc ld iq bd le lf nq lh li lj nr ll lm jw ns jx lo jz nt ka lq kc nu kd ls lt bi translated">分级编码</h1><p id="cb65" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">感谢您成为我们社区的一员！更多内容见<a class="ae ni" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>。<br/>跟随:<a class="ae ni" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a>，<a class="ae ni" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">领英</a>，<a class="ae ni" href="https://newsletter.levelup.dev/" rel="noopener ugc nofollow" target="_blank">通迅</a> <br/> <strong class="kh ir">升一级正在转型理工大招聘➡️ </strong> <a class="ae ni" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir">加入我们的人才集体</strong> </a></p></div></div>    
</body>
</html>