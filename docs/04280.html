<html>
<head>
<title>Android Dialogflow Chatbot Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android Dialogflow聊天机器人库</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/android-dialogflow-chatbot-library-6b7b3822e7bc?source=collection_archive---------4-----------------------#2020-06-18">https://levelup.gitconnected.com/android-dialogflow-chatbot-library-6b7b3822e7bc?source=collection_archive---------4-----------------------#2020-06-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/c025a447151eb0134296a680e59cb613.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zGfGzAupJqxE2TSoSZagPA.png"/></div></div></figure><p id="a541" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">大约两年前，我写了一篇关于如何将基于聊天机器人的对话流集成到你的Android项目中的文章，并分享了T2的样本项目库，供其他人参考。它解释了将基于Dialogflow的聊天机器人集成到Android应用程序中的两种方式——使用Api.ai和新的谷歌云的Java V2库。我收到了来自开发者社区的大量回复，我的文章现在是“Android Dialogflow Integration”的顶级搜索结果</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi la"><img src="../Images/7f04d46394fbedc54afd4cfec630f5a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WlygzuWL88d8LVB6IZPBvw.jpeg"/></div></div></figure><p id="a231" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">考虑到我从世界各地的开发人员那里收到的查询以及我在集成过程中面临的一些挑战，我决定开发一个可以轻松集成到Android项目中的库，以便不仅显示基本的聊天窗口和轻松集成，还允许开发人员将交互式按钮和复选框等Android UI组件添加到聊天窗口中，并通过Dialogflow代理的webhook代码控制它们。这种方式将类似于从webhook代码在Google Assistant应用程序中控制UI的方式。</p><p id="0d42" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里的优势将是减少Android本机端的代码更改，因为与基于NodeJS的webhook代码相比，这需要更多的时间，以及chatbot bot在前端和后端的整体开发时间。我现在将向您解释如何轻松地将该库集成到您的Android应用程序中，以添加基于Google Cloud Dialogflow Java V2的聊天机器人</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><ol class=""><li id="c11c" class="lm ln it kd b ke kf ki kj km lo kq lp ku lq ky lr ls lt lu bi translated">因此，第一步是将依赖项添加到应用程序的gradle文件中。(如果可能，请使用最新版本)</li></ol><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="06b6" class="ma mb it lw b gy mc md l me mf">implementation 'com.tyagiabhinav:androiddialogflowchatbot:0.1.9'<br/>implementation 'com.google.cloud:google-cloud-dialogflow:2.2.0'<br/>implementation 'io.grpc:grpc-okhttp:1.31.1'</span></pre><p id="b7c6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">2.现在，在同一个应用程序的gradle文件中的android部分下添加包选项。</p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="fa60" class="ma mb it lw b gy mc md l me mf">packagingOptions <strong class="lw iu">{<br/>    </strong>exclude 'META-INF/LICENSE'<br/>    exclude 'META-INF/DEPENDENCIES'<br/>    exclude 'META-INF/INDEX.LIST'<br/><strong class="lw iu">}</strong></span></pre><p id="c62b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">3.现在，在清单文件中，我们应该从库中添加ChatbotActivity的条目</p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="9ae0" class="ma mb it lw b gy mc md l me mf">&lt;activity android:name="com.tyagiabhinav.dialogflowchatlibrary.ChatbotActivity"<br/>android:launchMode="singleTask"<br/>android:theme="@style/Theme.AppCompat.Light.NoActionBar" /&gt;</span></pre><p id="b6a9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">4.正如我在<a class="ae kz" href="https://medium.com/@abhi007tyagi/android-chatbot-with-dialogflow-8c0dcc8d8018" rel="noopener">的上一篇文章</a>中所解释的，我们需要一个Google Credential JSON文件作为我们的Dialogflow代理。为您的Dialogflow代理生成一个Google Credential JSON文件，并将其保存在RES-&gt;raw-&gt;&lt;Credential _ file . JSON&gt;下</p><p id="6af4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">5.现在，根据您在应用程序中的用例，打开聊天机器人活动。</p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="9c8e" class="ma mb it lw b gy mc md l me mf">public void openChatbot() {<br/>// provide your Dialogflow's Google Credential JSON saved under RAW folder in resources<br/>DialogflowCredentials.getInstance().setInputStream(getResources().openRawResource(R.raw.test_agent_credentials));<br/><br/>ChatbotSettings.getInstance().setChatbot( new Chatbot.ChatbotBuilder().build());<br/>Intent intent = new Intent(&lt;CALLING ACTIVITY&gt;.this,ChatbotActivity.class);<br/>Bundle bundle = new Bundle();<br/><br/>// provide a UUID for your session with the Dialogflow agent<br/>bundle.putString(ChatbotActivity.SESSION_ID, UUID.randomUUID().toString());<br/>intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_NO_HISTORY);<br/>intent.putExtras(bundle);<br/>startActivity(intent);<br/>}</span></pre><p id="0f5f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">6.如果需要，将以下颜色添加到您的项目中，以替换库中的默认设置</p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="0432" class="ma mb it lw b gy mc md l me mf">Default Colours<br/>&lt;color name="userAvatarBG"&gt;#666666&lt;/color&gt;<br/>&lt;color name="chatPrimary"&gt;#CC0000&lt;/color&gt;<br/>&lt;color name="chatPrimaryFocus"&gt;#DD0000&lt;/color&gt;<br/>&lt;color name="chatPrimaryPressed"&gt;#A60000&lt;/color&gt;<br/>&lt;color name="chatPrimaryDisabled"&gt;#66cc0000&lt;/color&gt;<br/>&lt;color name="chatBGnText"&gt;#FFFFFF&lt;/color&gt;<br/>&lt;color name="chatSecondary"&gt;#FFFFFF&lt;/color&gt;<br/>&lt;color name="chatSecondaryFocus"&gt;#F1F1F1&lt;/color&gt;<br/>&lt;color name="chatSecondaryPressed"&gt;#E9E9E9&lt;/color&gt;<br/>&lt;color name="chatSecondaryDisabled"&gt;#66FFFFFF&lt;/color&gt;<br/>&lt;color name="botBGBubbleStroke"&gt;#FFCCCC&lt;/color&gt;<br/>&lt;color name="botBGBubble"&gt;#FFCCCC&lt;/color&gt;<br/>&lt;color name="userBGBubbleStroke"&gt;#CAE4F5&lt;/color&gt;<br/>&lt;color name="userBGBubble"&gt;#CAE4F5&lt;/color&gt;<br/>&lt;color name="checkbox"&gt;#161616&lt;/color&gt;<br/>&lt;color name="statusBarColor"&gt;@color/chatPrimaryPressed&lt;/color&gt;</span></pre><p id="9df1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">7.构建您的项目并运行。基本的聊天机器人已经准备好了所有的聊天界面。如果发布版本没有给出任何聊天响应，您可能需要添加下面的Progurad规则。当我们缩小时会发生这种情况，一些用于创建会话的文件在执行过程中被缩小并且找不到。</p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="5faa" class="ma mb it lw b gy mc md l me mf">-keep public class com.google.a** {<br/>  public protected *;<br/>}</span></pre><p id="55b7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">到目前为止，这个库将帮助所有开发人员使用Google Cloud的Dialogflow Java V2构建一个简单的聊天机器人，我在之前的文章中已经解释过了。现在我将解释如何使用这个库来显示交互式按钮和小部件，并直接从Dialogflow代理的webhook代码中控制它们。</p><p id="07fe" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">8.创建一个共同的意图，使用事件将所有Android交互捕获到其中，并分配一个事件名称，例如“android_event”。您可以有多个事件捕获意图，但是要确保为意图提供不同的事件名称，并在本文后面解释的参数中发送相应的事件名称</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/91f4003960529020653a9d5502a568a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*82zmXAZgLOCdRUbbkQNpwA.jpeg"/></div></figure><p id="416f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">9.为意向启用webhook实现</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/43067a28f2aaa9c91e626794c4abb778.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*2yWCIHnKeyIm7ZlX9FOL9g.jpeg"/></div></figure><p id="9148" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">10.现在，对于需要从机器人端向Android聊天窗口发送UI控件的意图，像上面为事件捕获意图所做的那样，为所有意图启用webhook实现。记住，这些是您的代理的常规意图，您可能需要发送一些动作给用户来执行。它可以是一个按钮、复选框或导航到应用程序中的任何其他活动，甚至是一个在浏览器中打开的URL。用户操作将在事件捕获中被捕获</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/0b3961b26d856994baf6613c321716e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*Wcs4_kZUwZjUB4PjSUqahA.jpeg"/></div></figure><p id="3e37" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">11.在意图中，代码看起来类似于下面的代码片段。在这里，我们在参数中设置一些规则，并在“param_context”内将这些规则发送到Android库，在那里它将被读取，相应的UI将被触发到聊天窗口。仅更改params值来更改UI。短信是从agent.add( <text message="">)传过来的</text></p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="5d1d" class="ma mb it lw b gy mc md l me mf">const params = &lt;Depending on Interaction Type Change params here&gt;;<br/>const param_context = {name: "param_context", lifespan: 10, parameters: params};<br/>agent.context.set(param_context);<br/>agent.add('This is a message section for showing text'); // Text message to be shown to the user</span></pre><p id="2c6b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">12.要从webhook显示一个简单的文本，请使用下面的代码。这也是webhook未启用时的默认参数</p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="bece" class="ma mb it lw b gy mc md l me mf">const params = {"template": "text"};</span></pre><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/2dbf078e1f31981958ccfd740392f7e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*vWMa1eY_E-7fnH_-T8G0PQ.jpeg"/></div></figure><p id="b987" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">13.用按钮显示文本消息。单击该按钮后，它将被禁用，因此用户无法向上滚动并再次单击它。</p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="8877" class="ma mb it lw b gy mc md l me mf">const params = {"template": "button", "buttonItems":[{"uiText":"Action 1", "actionText":"action 1 selected", "isPositive": true},{"uiText":"Action 2", "actionText":"action 2 selected", "isPositive": false}], "align": "h", "size":"l", "eventToCall":"android_event" };</span></pre><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/b8048c69bdd23e1db4f2069a44b49059.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*AzGModqv-9Xu_DPVHqTEKQ.jpeg"/></div></figure><p id="2735" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">点击的按钮信息可以从webhook端捕获的事件中提取出来</p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="a716" class="ma mb it lw b gy mc md l me mf">{<br/>    "name": "projects/&lt;project name&gt;/agent/sessions/&lt;sessionID&gt;/contexts/android_event",<br/>    "parameters": {<br/>        "selectedButton": {<br/>            "isPositive": true,<br/>            "actionText": "action 1 selected",<br/>            "uiText": "Action 1"<br/>        }<br/>    }<br/>}</span></pre><p id="1da6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">14.复选框也是如此</p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="2726" class="ma mb it lw b gy mc md l me mf">const params = {"template": "checkbox", "checkboxItems":[{"uiText":"item 1&lt;br&gt; this item is best", "id":"1"},{"uiText":"item 2&lt;br&gt; this item is OK", "id":"2"},{"uiText":"item 3", "id":"3"}], "buttonItems":[{"uiText":"Yes", "actionText":"process selected", "isPositive": true},{"uiText":"No", "actionText":"cancel", "isPositive": false}], "align": "h", "size":"l", "eventToCall":"android_event" };</span></pre><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/86a191c45860b83363384a784c5ba1fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*YMJJARIy96gtIngPu5YFyA.jpeg"/></div></figure><p id="91d7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">并且所选项目被捕获为</p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="fabe" class="ma mb it lw b gy mc md l me mf">{<br/>    "name": "projects/&lt;project name&gt;/agent/sessions/&lt;sessionID&gt;/contexts/android_event",<br/>    "parameters": {<br/>        "selectedButton": {<br/>            "uiText": "Yes",<br/>            "isPositive": true,<br/>            "actionText": "process selected"<br/>        },<br/>        "template": "checkbox",<br/>        "selectedItems": [<br/>            {<br/>                "id": "1",<br/>                "uiText": "item 1&lt;br&gt; this item is best"<br/>            }<br/>        ]<br/>    }<br/>}</span></pre><p id="e013" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">15.如果您想要导航到应用程序中的一些内部活动或Google.com的外部URL，请使用以下参数规则。在这里，将向用户显示一个弹出窗口，表明他们正在聊天窗口之外导航，会话将结束</p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="7707" class="ma mb it lw b gy mc md l me mf">const params = {"template": "hyperlink", "linkItems":[{"uiText":"Next Activity", "linkType":"internal", "navigateAndroid":"com.tyagiabhinav.dialogflowchat.NavTestActivity", "navigateIOS":"", "isPositive": true},{"uiText":"Google", "linkType":"external", "navigateAndroid":"http://www.google.com", "navigateIOS":"http://www.google.com", "isPositive": false}], "align": "v", "size":"l", "eventToCall":"android_event" };</span></pre><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/d24c09bbca7ffb0cf9b5858d626a4f0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:610/format:webp/1*0N8L_YLICwRkUsAzE5W2Yw.jpeg"/></div></figure><p id="b317" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">16.你也可以展示卡片，并从webhook本身控制它。它将有文本消息作为其他模板以及图像，图像标题和图像描述。下面将提供按钮来接受用户输入。要显示卡片视图，参数看起来应该是这样的</p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="f1ca" class="ma mb it lw b gy mc md l me mf">const params = {"template": "card", "cardItems":{"imgUrl":"https://picsum.photos/seed/picsum/900/500", "title":"&lt;b&gt;Image Title&lt;/b&gt;&lt;i&gt;(optional)&lt;/i&gt;", "description":"&lt;i&gt;Image description. (optional)&lt;/i&gt;"}, "buttonItems":[{"uiText":"Yes", "actionText":"process selected", "isPositive": true},{"uiText":"No", "actionText":"cancel", "isPositive": false}], "align": "h", "size":"l", "eventToCall":"android_event" };</span></pre><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/d2fbf6faf9aab745bfc7cd0cefca75e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/format:webp/1*_r0GzbCmA_N-XpZ8x92fYg.jpeg"/></div></figure><p id="a3e8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">17.与卡片类似，您可以显示旋转木马，当选择任何项目时，每个图像都有自己的标题、描述、id和toast视图消息。</p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="037b" class="ma mb it lw b gy mc md l me mf">const params = {"template": "carousel", "carouselItems":[{"id":"1","imgUrl":"https://loremflickr.com/900/500/dog", "title":"&lt;b&gt;Image Title&lt;/b&gt;&lt;i&gt;(optional)&lt;/i&gt;", "description":"&lt;i&gt;Image description. (optional)&lt;/i&gt;","toast":"selected Dog (optional)"},{"id":"2","imgUrl":"https://loremflickr.com/900/500/cat", "title":"&lt;b&gt;Image Title&lt;/b&gt;&lt;i&gt;(optional)&lt;/i&gt;","toast":"selected Cat (optional)", "description":"&lt;i&gt;Image description. (optional)&lt;/i&gt;"},{"id":"3","imgUrl":"https://loremflickr.com/900/500/owl", "title":"&lt;b&gt;Image Title&lt;/b&gt;&lt;i&gt;(optional)&lt;/i&gt;", "description":"&lt;i&gt;Image description. (optional)&lt;/i&gt;","toast":"selected Owl (optional)"}], "buttonItems":[{"uiText":"Select", "actionText":"process selected", "isPositive": true},{"uiText":"Cancel", "actionText":"cancel", "isPositive": false}], "align": "h", "size":"l", "eventToCall":"android_event" }</span></pre><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/b6b9fde99f41d3c436a552f5bd2325be.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/1*UZwnhz90-aiJR9Kh7QhlHw.gif"/></div></figure><p id="6b34" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">所选项目在selected items中捕获，类似于上面的selected复选框。</p><p id="d230" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">18.请确保重置事件捕获响应中的参数，以便在param_context的生命周期设置为10次交互时，不会触发早期的模板。</p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="09d9" class="ma mb it lw b gy mc md l me mf">const androidEvent = (agent) =&gt; {<br/>    const params = {"template": "text"};<br/>    const param_context = {name: "param_context", lifespan: 10, parameters: params};<br/>    agent.context.set(param_context);<br/>    agent.add('Event captured successfully!');<br/>};</span></pre><p id="2ac2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">下面是用于构造param对象的属性的详细信息</p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="35a8" class="ma mb it lw b gy mc md l me mf">- template - to show what UI you want on Android chat<br/>- *items - list of interactable UI components  <br/>- uiText - text shown for the item on Android like Button text, Text for checkbox. Simple HTML formatting will work for Checkboxes<br/>- actionText - text to be shown when a button is clicked as input from user in the chat<br/>- isPositive - for colour scheme<br/>- align - for horzontal or vertical layout of buttons. takes values h/v<br/>- size - text size for button. takes values s,m,l (s=10, m=14, l=18)  <br/>- eventToCall - event name provided in the Dialogflow Intent to capture user interaction result from Android like "android_event"<br/>- id - unique number for identification<br/>- linkType - within app or outside app navigation. takes value internal/external<br/>- navigateAndroid - complete class name or URL to navigate<br/>- imgUrl - image URL for the card/carousel<br/>- title - image title for the image(optional)<br/>- description - image description for the image(optional)<br/>- toast - message to be shown in toast when user selects the image</span></pre><p id="5de8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">开发人员在构建聊天机器人对象时还可以使用其他UI/UX特性，例如</p><pre class="lb lc ld le gt lv lw lx ly aw lz bi"><span id="5582" class="ma mb it lw b gy mc md l me mf">- setShowMic(true) - to show a mic icon for user to speak into instead of typing<br/>- setDoAutoWelcome(false) - to stop auto welcome message from the bot (by default this is True and requires Default Welcome Intent to be present in the agent with training phrase "hi"<br/>- setChatBotAvatar(getDrawable(R.drawable.avatarBot)) - to set custom bot avatar<br/>- setChatUserAvatar(getDrawable(R.drawable.avatarUser)) - to set custom user avatar</span></pre><p id="dc3a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">该库和webhook的完整代码在Apache 2.0许可下在GitHub - <a class="ae kz" href="https://github.com/abhi007tyagi/Android_Dialogflow_Chatbot_Library" rel="noopener ugc nofollow" target="_blank"> Android Dialogflow聊天机器人库</a>、<a class="ae kz" href="https://github.com/abhi007tyagi/Android_Dialogflow_Chatbot_Library" rel="noopener ugc nofollow" target="_blank"> </a>上共享。探索图书馆并与我分享您的反馈。</p></div></div>    
</body>
</html>