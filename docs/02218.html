<html>
<head>
<title>10 Programming Code Smells That Affect Your Codebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">影响代码库的10种编程代码味道</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/10-programming-code-smells-that-affect-your-codebase-e66104e0341d?source=collection_archive---------4-----------------------#2020-02-27">https://levelup.gitconnected.com/10-programming-code-smells-that-affect-your-codebase-e66104e0341d?source=collection_archive---------4-----------------------#2020-02-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e862" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为了成为干净的代码忍者，我们在编程时应该认识到一些最常见的代码味道。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f7bba5b8b74a24ae076bbf608d8bec59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZI9r4X4FR_IuUTsE"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">艾莎·阿斯哈多娃在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="bf79" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated"><span class="l lw lx ly bm lz ma mb mc md di"> H </span>在阅读代码时，你有没有感觉到有什么地方出错了？那种“嗯，有些东西看起来不太好”的感觉，但你仍然没有确切地了解问题是什么？</p><p id="3360" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种怪异的感觉是，你从你的代码中得到的是正确的直觉。这些都是不好的实践，更好的说法是<strong class="lb iu">代码味道</strong>。</p><p id="6441" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">能够发现气味并实现更干净的解决方案将帮助你在编程生涯中向前迈进一大步，帮助你自学如何编写<em class="me">干净的代码</em>。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="d857" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">长函数</h2><p id="3992" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">在我看来，为人类编写代码是成为一名优秀程序员的黄金法则。长函数是这种思维模式最大的敌人之一，因为它们降低了代码的可读性。</p><p id="087a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">功能需要描述它们做什么，并且应该集中在一个单独的任务上，这样我们就可以在必要的时候重用它们。通常，随着函数变得越来越长，它的复杂性也会增加，代码的可维护性也会降低。</p><blockquote class="nk nl nm"><p id="fef4" class="kz la me lb b lc ld ju le lf lg jx lh nn lj lk ll no ln lo lp np lr ls lt lu im bi translated">在大多数情况下，解决这个问题的方法是将一部分代码提取到一个新函数中(<strong class="lb iu"> <em class="it">提取函数</em> </strong>)并在必要时重用它。</p></blockquote></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="2ab2" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">重复代码</h2><p id="b84a" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">代码重复是非常专业的代码库中存在的另一种常见的反模式，我们应该尽可能地减少它，以保持代码的整洁，并避免在某个特性发生变化时在不同的地方更改相同的代码。</p><p id="a599" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有不同的场景可以帮助删除重复的代码，但最常见的解决方案是创建一个新的函数来封装该逻辑，或者在代码不完全相同的情况下，您可以重新排列代码，以便将相似的项目放在一起以便于提取(<strong class="lb iu">幻灯片声明</strong>)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/ebf69bf8a955f51928d563d7ef395698.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XHXXLmMjXw4U3ogF"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@danielkcheung?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">张家瑜</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="78df" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">长参数列表</h2><p id="b5b5" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">你认为一个需要6-7个(或更多)参数的有序列表的函数没有混乱吗？拥有这么长的列表更容易出现错误，降低可读性。</p><p id="9129" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们通常可以通过<strong class="lb iu"> <em class="me">引入一个参数对象</em> </strong> <em class="me">来解决这个问题。</em>这样做包括将一长串合适的参数组合成一个新对象，并将其作为唯一参数传递。这有很多好处，因为我们可以在函数调用之前定义参数对象，并且属性顺序无关紧要。这是我们在任何参数列表中都应该考虑的事情。</p><blockquote class="nk nl nm"><p id="9137" class="kz la me lb b lc ld ju le lf lg jx lh nn lj lk ll no ln lo lp np lr ls lt lu im bi translated">另一个选择是<strong class="lb iu">将函数组合成一个类</strong>，但是这通常在一些函数共享相同的参数值时使用，以便我们可以捕获它们。</p></blockquote></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="befa" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">评论太多</h2><p id="ed4e" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">我并不是说注释你自己的代码不好，但是如果你写的程序有好的命名并遵循干净的代码模式，你的代码将是不言自明的，减少你的文件的样板文件并增加你的代码库的可维护性。</p><blockquote class="nr"><p id="aff3" class="ns nt it bd nu nv nw nx ny nz oa lu dk translated">当你觉得需要写注释时，首先尝试重构代码，这样任何注释都变得多余。马丁·福勒。</p></blockquote></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="009a" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">全局数据</h2><p id="107d" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">这是每个开发人员在编码时都应该记住的事情，因为从任何地方都可以访问的代码，尤其是可变的代码，如果被修改，可能会产生意想不到的行为。</p><p id="7cc9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">全局数据最常见的例子是全局变量。我们可以使用的第一种防御机制是<strong class="lb iu"> <em class="me">用函数封装变量</em> </strong> <em class="me"> </em>，因为这至少提供了一种更好的方法来控制它的访问并查看它在哪里被修改。</p><p id="339d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，我建议总是避免全局变量和全局数据。总有不同的方法来实现一个可行的解决方案😁</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="616b" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">神秘的名字</h2><p id="3702" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">根据菲尔·卡尔顿的说法:</p><blockquote class="nr"><p id="9ecc" class="ns nt it bd nu nv nw nx ny nz oa lu dk translated"><em class="ob">计算机科学只有两个硬东西:缓存失效和事物命名。</em></p></blockquote><p id="cc43" class="pw-post-body-paragraph kz la it lb b lc oc ju le lf od jx lh li oe lk ll lm of lo lp lq og ls lt lu im bi translated">我完全同意他的观点。正确命名变量、函数和类可以极大地提高代码的整洁度！它保证了更多的描述性代码，减少了注释的使用，并使未来的开发人员在阅读您的代码时更加轻松！</p><p id="c984" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请记住，机器理解0和1，我们的代码稍后会被翻译成那种语言。 <strong class="lb iu"> <em class="me">但是我们写的是给人类看的，所以写你的代码就像你给一个6岁的孩子解释一样。</em> </strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/33cd90222765667bbb29d7dbb1eb8261.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uehnDir6z0J11jkP"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@benwhitephotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Ben White </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="8663" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">懒惰元素</h2><p id="0ddb" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">有时候，我们实现一个新的结构，目的是为了以后重用它，或者使我们的代码更干净、更具描述性，但最终，我们意识到它是无用的，我们从未在代码库中使用过它😅我们应该认识到我们的错误，并准备牺牲这部分代码！</p><p id="c040" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以实现这个结果，例如，使用函数和类的内联技术。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="760c" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">环</h2><p id="5ee8" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">即使它们已经成为编程的核心很长一段时间了，而且仍然很有用，但是还有许多替代方法可以帮助我们的代码更具描述性，让我们一眼就能明白它是做什么的。</p><p id="7201" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用像<code class="fe oi oj ok ol b">.map</code>或<code class="fe oi oj ok ol b">.filter</code>这样的管道方法有助于立即理解结构是如何被操作的，减少了由更强制性的代码所强加的抽象。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="caa7" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">大班</h2><p id="956b" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">当一个类开始增长并且有太多的字段时，重复的代码就会消失。我们讨厌重复的代码！所以我们应该注意让它们尽可能的小。</p><p id="3b81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能会发现自己正在重构一个无限类，因为它负责不相关的操作，第一种解决方案是使用类提取来分离代码。</p><p id="df73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是因为我们喜欢简单的解决方案，最快的解决方案可能是移除类本身内部的冗余。例如，要做到这一点，您可以将包含大量共享代码的长方法拆分成较小的方法，这样您就可以随心所欲地组合它们，避免任何类型的重复。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="1898" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">临时字段</h2><p id="93a3" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">即使试图避免，拥有一个我们有条件设置的类字段也是常见的情况。这可能会降低代码的清晰度，因为您希望使用一个类中的所有字段。</p><p id="41bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好的解决方案是提取一个新的类来为这个字段创建一个位置，并移动相关的函数。或者，引入一个特例也很好，这个特例在变量无效时创建另一个类。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="be92" class="mm mn it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">包扎</h2><p id="6967" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">关心你的代码并努力理解如何改进它是让我热爱代码和编程的原因。我希望你能分享我的感受，并喜欢这篇文章。这种学习大部分归功于<strong class="lb iu"> <em class="me">马丁·福勒</em> </strong>和他的<a class="ae ky" href="https://martinfowler.com/books/refactoring.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> <em class="me">重构</em> </strong> </a>这本书，在我看来是必读书！</p><p id="26b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于这个话题的评论、分享和讨论总是很受欢迎。我很乐意回答你的任何问题！</p><blockquote class="nk nl nm"><p id="7149" class="kz la me lb b lc ld ju le lf lg jx lh nn lj lk ll no ln lo lp np lr ls lt lu im bi translated"><strong class="lb iu">随时联系我</strong><a class="ae ky" href="https://www.linkedin.com/in/marcoantonioghiani/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">Linkedin</strong></a></p></blockquote><div class="om on gp gr oo op"><a href="https://marcoghiani.com/blog/refactoring-a-react-component" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd iu gy z fp ou fr fs ov fu fw is bi translated">重构一个反应组件</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">使用最佳实践编写高效可读的React组件的5条规则React.js已经成为最流行的观点…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">marcoghiani.com</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd ks op"/></div></div></a></div><div class="om on gp gr oo op"><a href="https://marcoghiani.com/blog/how-to-use-component-composition-in-react" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd iu gy z fp ou fr fs ov fu fw is bi translated">如何在React中使用组件组合</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">按照组合模式创建坚固而灵活的react组件。当我开始使用React时，我…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">marcoghiani.com</p></div></div><div class="oy l"><div class="pe l pa pb pc oy pd ks op"/></div></div></a></div><div class="om on gp gr oo op"><a href="https://marcoghiani.com/blog/how-i-became-a-fast-learner-changing-my-habits" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd iu gy z fp ou fr fs ov fu fw is bi translated">我是如何通过改变习惯快速学习的。</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">9个有效的习惯可以让你学得更快，提高工作效率。一年多前，在我25岁的时候，我离开了我的…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">marcoghiani.com</p></div></div><div class="oy l"><div class="pf l pa pb pc oy pd ks op"/></div></div></a></div></div></div>    
</body>
</html>