<html>
<head>
<title>Pixel Sorting in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的像素排序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/pixel-sorting-in-python-62337c078118?source=collection_archive---------11-----------------------#2021-01-25">https://levelup.gitconnected.com/pixel-sorting-in-python-62337c078118?source=collection_archive---------11-----------------------#2021-01-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="dcef" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">用枕头释放你的艺术才华</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/869f4946f3f61fb427f3bfef0d40c70b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jCsvO_wkYrHrNxfZwyCDbA.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">像素排序技术的一个例子。</figcaption></figure><p id="8c7f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">随着技术在我们生活中占据中心位置，我们转向媒体来表达自己。了解像Python这样的编程语言可以打开许多大门，包括那些向内打开的大门。</p><p id="f086" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">编码是开启创造过程的机会。像谷歌的<a class="ae le" href="http://processing" rel="noopener ugc nofollow" target="_blank"> DevArt </a>和<a class="ae le" href="https://processing.org/" rel="noopener ugc nofollow" target="_blank">Processing.org</a>这样的项目正在让艺术家和工程师更容易创新新的、引人入胜的体验。</p><p id="eaa8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有了Python，利用像素的力量制作激动人心的数字艺术成为可能。有了<a class="ae le" href="https://pillow.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank">枕库</a>，Python可以读写图像数据，让创造无尽的新艺术作品成为可能</p><p id="7726" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">我将向你展示如何使用Python创建一个流行的</strong> <a class="ae le" href="https://en.wikipedia.org/wiki/Glitch_art" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">毛刺艺术</strong> </a> <strong class="js iu">技术，称为像素排序。</strong></p><p id="24a6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">像素排序是指重新排列图像中的像素，通常是通过对图像数据的行或列进行排序。记住，电脑上的图像是由成千上万个像素组成的。每个像素有三个值，分别对应用于在显示器上绘制图像的三种颜色:红色、绿色和蓝色。</p><p id="a5e3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这种“RGB”数据被组合起来，以呈现你看到的每个像素的最终颜色。</p><p id="5918" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">枕头图书馆让我们可以使用工具来处理图像。它提供了各种图像处理功能，包括但不限于颜色增强和其他图像过滤器。</p><p id="052b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在使用Pillow之前，您需要将它安装在您的电脑上。使用pip安装库是最简单的。</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="1404" class="lk ll it lg b gy lm ln l lo lp">pip install Pillow</span></pre><p id="45e8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">安装Pillow后，我们可以通过以下方式访问PIL图像库:</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="6b1c" class="lk ll it lg b gy lm ln l lo lp">from PIL import Image</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lq"><img src="../Images/d64cfefbd8b6949c8cdb03a477e5d580.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YeGzyIRmPE0HQbrMygX7gw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">枕头库可用于读取和写入图像数据。</figcaption></figure><p id="c380" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在开始分类之前，我们需要一张参考图片。请记住，图像越大，程序完成排序过程的时间就越长。我的图像大约700像素宽，400像素高。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/38b8d2adecfb1767b33bcf2e89143027.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*isgoF16GEhjCsnScdnZsKA.jpeg"/></div></figure><p id="efdd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将图像保存在与您正在使用的Python文件相同的文件夹中。我把我的命名为pixel_sort.py。</p><p id="d028" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">访问图像的单个像素相当容易，存储图像的尺寸也是如此。</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="21e0" class="lk ll it lg b gy lm ln l lo lp">img = Image.open(“red_rock.jpg”)</span><span id="7255" class="lk ll it lg b gy ls ln l lo lp">width, height = img.size</span><span id="1dec" class="lk ll it lg b gy ls ln l lo lp">pixels = img.load()</span></pre><p id="27e3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这就是我们开始分类过程所需要的一切。Image.load()返回一个字典或键/值对，其中每个键指向一个RBG值。</p><p id="b87c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，如果像素[0，0]的值是亮红色，则该像素可能等于(255，0，0)。</p><p id="5800" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用嵌套的for循环，我们将遍历图像的行，然后对每一行进行排序。对像素进行排序的方法有很多种。色调、亮度、对比度等。这些都可以作为进行分类的标准。</p><p id="8c49" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了简单起见，我们将关注每个像素的整体价值。由于每个像素都由三种颜色(RGB)组成，我们可以将它们相加，得到一个单一的值。</p><p id="1aa5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于图像中的每一行，我们将找到具有最高整体值的像素。这将作为排序的突破点，意味着我们将只对该像素的数组进行排序。</p><p id="acf0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这样做会产生一些有趣的艺术效果，但这只是像素排序的一种方法。这项技术的发明者肯·阿森多夫受到了启发。</p><p id="e1e6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将把排序代码包装在它自己的函数中。这将为图像中的每一行调用，返回一个排序的行。</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="7468" class="lk ll it lg b gy lm ln l lo lp">def sort_row(row):<br/>    min = 255*3<br/>    min_index = 0<br/>    #find the darkest pixel in the row<br/>    for i in range(len(row)):<br/>        # each pixel has an RPG value, for instance (255, 255, 255)<br/>        temp = row[i][0] + row[i][1] + row[i][2]<br/>        if temp &lt; min:<br/>            min = temp<br/>            min_index = i</span><span id="7122" class="lk ll it lg b gy ls ln l lo lp"># sort the row up the brightest pixel<br/>    sorted_row = row[:min_index]<br/>    sorted_row.sort()</span><span id="e54a" class="lk ll it lg b gy ls ln l lo lp">return sorted_row + row[min_index:]</span></pre><p id="c731" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">枕头库允许我们使用<em class="lt"> new() </em>方法从头开始创建图像。我们需要指定图像模式(RGB)并提供所需的宽度和高度。</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="5d3e" class="lk ll it lg b gy lm ln l lo lp">new_img = Image.new(‘RGB’,(width, height))</span></pre><p id="4095" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一旦创建了新图像，我们就可以使用<em class="lt"> putdata() </em>方法给它添加像素数据。这个方法需要一个Python <a class="ae le" href="https://docs.python.org/3/tutorial/datastructures.html" rel="noopener ugc nofollow" target="_blank">列表</a>，所以我们需要将我们的像素数据转换成一个列表才能工作。</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="2f33" class="lk ll it lg b gy lm ln l lo lp"># to make a new image, we'll need to conver the data to a list<br/>sorted_pixels = []</span><span id="453b" class="lk ll it lg b gy ls ln l lo lp">for y in range(height):<br/>       for x in range(width):<br/>           sorted_pixels.append(pixels[x,y])</span><span id="cf70" class="lk ll it lg b gy ls ln l lo lp">new_img.putdata(sorted_pixels)</span></pre><p id="0d8c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用<em class="lt"> show() </em>方法显示图像。</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="0071" class="lk ll it lg b gy lm ln l lo lp">new_img.show()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/b257939574c8409bd028a1ff428c77f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9stnZmDaeD2vj441QAGjtQ.jpeg"/></div></figure><p id="b2ad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，我们可以使用<em class="lt"> save() </em>方法保存新图像。</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="0b8e" class="lk ll it lg b gy lm ln l lo lp">new_img.save(“sorted_red_rock.jpg”)</span></pre><p id="c450" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我试图用一种基本的排序技术使这个练习尽可能简单，但是这个程序可以有很多扩展的方式。</p><p id="0ad5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，<a class="ae le" href="https://github.com/kimasendorf/ASDFPixelSort/blob/master/ASDFPixelSort.pde" rel="noopener ugc nofollow" target="_blank"> Asendorf的原始代码</a>合并了水平和垂直排序，选择其他排序方法可以产生有趣的结果。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lu"><img src="../Images/0c1a7ce1448c2658121b7b800d9221d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fdzfRPh_EOv9APw_TTyd6Q.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">《山地之旅》作者:金·阿森多夫。</figcaption></figure><p id="87ca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请随意修改这段代码，扩展它的潜力并添加您自己的方法。谁知道呢，你可能会做出一些美丽的东西。下面是完整的代码:</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="30d6" class="lk ll it lg b gy lm ln l lo lp">from PIL import Image</span><span id="3d59" class="lk ll it lg b gy ls ln l lo lp">“””<br/>To pixel sort, we first need to load all the pixels in an image file.<br/>We’ll then loop through each row of the image data, record the color value of<br/>each pixel in the row, then sort the row based on those values.<br/>“””<br/>def sort_row(row):<br/> min = 255*3<br/> min_index = 0<br/> #find the darkest pixel in the row<br/> for i in range(len(row)):<br/> # each pixel has an RPG value, for instance (255, 255, 255)<br/> temp = row[i][0] + row[i][1] + row[i][2]<br/> if temp &lt; min:<br/> min = temp<br/> min_index = i</span><span id="d09d" class="lk ll it lg b gy ls ln l lo lp"># sort the row up the brightest pixel<br/> sorted_row = row[:min_index]<br/> sorted_row.sort()</span><span id="857f" class="lk ll it lg b gy ls ln l lo lp">return sorted_row + row[min_index:]</span><span id="031a" class="lk ll it lg b gy ls ln l lo lp">def pixel_sort():<br/> print(“loading the image…”)<br/> # load the image data<br/> img = Image.open(“motorboat.jpg”)</span><span id="6de5" class="lk ll it lg b gy ls ln l lo lp"># load the pixel data from the file.<br/> pixels = img.load()</span><span id="0c23" class="lk ll it lg b gy ls ln l lo lp">width, height = img.size</span><span id="b5da" class="lk ll it lg b gy ls ln l lo lp">print(“sorting the image…”)<br/> # loop through each row and sort the pixels in that row<br/> for y in range(height):<br/> # get a row<br/> row = []<br/> for x in range(width):<br/> row.append(pixels[x,y])</span><span id="0026" class="lk ll it lg b gy ls ln l lo lp"># sort the row<br/> row = sort_row(row)</span><span id="1f3a" class="lk ll it lg b gy ls ln l lo lp"># record the sorted data<br/> for x in range(width):<br/> pixels[x,y] = row[x]</span><span id="fb49" class="lk ll it lg b gy ls ln l lo lp"># to make a new image, we’ll need to conver the data to a list<br/> sorted_pixels = []</span><span id="a631" class="lk ll it lg b gy ls ln l lo lp">for y in range(height):<br/> for x in range(width):<br/> sorted_pixels.append(pixels[x,y])</span><span id="d90c" class="lk ll it lg b gy ls ln l lo lp">new_img = Image.new(‘RGB’,(width, height))<br/> new_img.putdata(sorted_pixels)</span><span id="c312" class="lk ll it lg b gy ls ln l lo lp">print(“image preview…”)<br/> # preview the sorted image.<br/> new_img.show()<br/> print(“saving image…”)<br/> # save the file with a new name.<br/> new_img.save(“motorboat_sorted.jpg”)</span><span id="2d9a" class="lk ll it lg b gy ls ln l lo lp">pixel_sort()</span></pre></div></div>    
</body>
</html>