<html>
<head>
<title>Creating a Modular Powerup System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建模块化加电系统</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-a-modular-powerup-system-b523ec15aed9?source=collection_archive---------5-----------------------#2021-05-22">https://levelup.gitconnected.com/creating-a-modular-powerup-system-b523ec15aed9?source=collection_archive---------5-----------------------#2021-05-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/ce8a3157f7d1bd784111677e4ac82f77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P66Jn_07DVByhGWeZp6SoA.png"/></div></div></figure><div class=""/><p id="9ba9" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在我之前的文章中，我给我的游戏增加了一个能量，给玩家五秒钟的三次射击能力。我知道我至少会在游戏中加入一些新的技能，比如速度提升和盾牌。随着我在游戏开发中的深入，我可能会决定增加大量的能量。让<strong class="ke jf">单独的</strong>脚本用于每次加电是没有意义的，因为它们都有一个<strong class="ke jf">共享的</strong>动作和死亡碰撞行为。我所需要做的就是<strong class="ke jf">区分</strong>不同的能量赋予玩家什么能力。这可以通过使加电系统<strong class="ke jf">模块化</strong>来实现。这是一条有效的路线，所以让我们开始吧。</p><p id="8ea4" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">我将会用一些简单的游戏对象和调试命令来制作这些新功能的原型，以便在我带来最终的游戏资产之前进行测试。我想准备新的速度和护盾增强，所以我创建了两个新的<strong class="ke jf">空的</strong>游戏对象，并将<strong class="ke jf">精灵渲染器</strong>组件附加到这两个对象上。我选择左边图片上的<strong class="ke jf">旋钮</strong>默认为2D <strong class="ke jf">圆形</strong>形状，右边图片上的<strong class="ke jf"> UI精灵</strong>为圆角<strong class="ke jf">方形</strong>形状。这些只是像3D图元一样的虚拟资产，所以我真的只是在寻找一些东西来直观地告诉这些对象之间的区别。颜色的变化也会一样好。我还在检查器中增加了这些物体的尺寸，因为这些精灵在默认情况下很小。</p><div class="la lb lc ld gt ab cb"><figure class="le iv lf lg lh li lj paragraph-image"><img src="../Images/6fca8c9c45bd2f6f920bf2e8895f459e.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*jwL6Q1wVjIhuRz-u0vGs6A.png"/></figure><figure class="le iv lk lg lh li lj paragraph-image"><img src="../Images/e89f7fd2bbc2352442101dfbf08677a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:662/format:webp/1*xHwtrE9apTR33_e9Z_Y3LA.png"/></figure></div><p id="e503" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">两个精灵都需要一个<strong class="ke jf">盒子碰撞器2D </strong>和一个<strong class="ke jf">刚性体2D </strong>才能与玩家正确互动。现有的加电<strong class="ke jf">脚本</strong>组件也被添加以完成设置。</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/9f2875f8ad092144070ede57797668e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:658/format:webp/1*kDlgzE-31S76NXrgMzBvNQ.png"/></div></figure><p id="1c9b" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">为了使这个加电系统模块化，我打开我的加电<strong class="ke jf">脚本</strong>，并从一个<strong class="ke jf"> int </strong>变量开始保存我的<strong class="ke jf">加电</strong>，并将其命名为<strong class="ke jf">加电ID </strong>。之后的注释作为<strong class="ke jf">引用</strong>存在，表示哪些功率将由哪些数字表示。计数从<strong class="ke jf">零</strong>开始，这是<strong class="ke jf">三连拍</strong>被分配的位置。然后<strong class="ke jf">一个</strong>用于<strong class="ke jf">增速</strong>，两个<strong class="ke jf">用于<strong class="ke jf">护罩</strong>。现在三个电源中的每一个都将有一个ID号，可以用来分别引用它们<strong class="ke jf"/>！</strong></p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lm"><img src="../Images/f19bf7dbccda8e737ba25cfbb7b0a3b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yB_QCOqY06ETAJMQxyPWlw.png"/></div></div></figure><p id="9f19" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在<strong class="ke jf">序列化</strong>字段<strong class="ke jf">和</strong>保存之后，检查器中的每个加电脚本组件将有一个地方<strong class="ke jf">分配</strong>其各自的ID号。我在检查器中改变了三倍拍摄的速度，这就是为什么它的速度是2，而其他的是3。这里重要的方面是加电ID分配号<strong class="ke jf">引用</strong>。</p><div class="la lb lc ld gt ab cb"><figure class="le iv ln lg lh li lj paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/425939c25ef6d9ddc3609dd11a17e2e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/format:webp/1*gMA3DXtm80onVNbUOnKipA.png"/></div></figure><figure class="le iv lo lg lh li lj paragraph-image"><img src="../Images/e181e1ad3b55121f8aeac6c3c3ef6b70.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*p6eTDGYPiY3bhNhAUSXnWA.png"/></figure><figure class="le iv lp lg lh li lj paragraph-image"><img src="../Images/6f21a5f1783139049c38c9f858135a35.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*zl3iPer53CrejV-4Yqb3AQ.png"/><figcaption class="lq lr gj gh gi ls lt bd b be z dk lu di lv lw translated">三连击(左)，速度提升(中)，盾牌(右)</figcaption></figure></div><p id="62a0" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">我把这些虚拟道具做成<strong class="ke jf">预置</strong>，因为我想让我的产卵管理器在我的最终艺术资产之前玩玩它们。</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/89c96e393389d0d6b708ca0285d10221.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*B-JNZqZrWuQ2fRnatPwiYQ.png"/></div></figure><p id="467b" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在我的更新方法中，所有加电<strong class="ke jf">共享</strong>相同的移动和边界行为。它们都在与玩家碰撞后被摧毁。这就是模块化的意义所在。一个脚本就能统治所有人！</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ly"><img src="../Images/73eff21ab2cbc68879b496b22049e836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hrp56OD7NTm3nEpspxX_Ag.png"/></div></div></figure><p id="ba9e" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在这里，我将第一个ID添加到我的三连击中，这是目前我游戏中一个完整且功能齐全的加电。在这两次加电之间最主要的变化是<strong class="ke jf">脚本与<strong class="ke jf">玩家</strong>的通信</strong>，以及它的作用。这些都可以在玩家脚本中处理，所以这里重要的事情是确保我发送了三个消息，每个都来自<strong class="ke jf">正确的</strong>加电。</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lz"><img src="../Images/1e73ae204e2f6f7a10117707e3cc9bb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*19gHJwONRHUlZB1teuP7mA.png"/></div></div></figure><p id="ebf3" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这最初是在一个小系列的'<strong class="ke jf"> if else </strong>'语句中处理的，我将在下一篇文章中将其整理成一个更精简的<strong class="ke jf"> switch </strong>语句。这里说的是，如果新分配的加电<strong class="ke jf">等于</strong> (==)零，调用玩家脚本<strong class="ke jf">激活</strong>三连拍。如果<strong class="ke jf">不是</strong>零，而是1，<strong class="ke jf">激活</strong>加速。由于我还没有在我的玩家脚本中设置这方面的东西，我将使用一个<strong class="ke jf"> Debug </strong>命令向控制台发送一个<strong class="ke jf">消息</strong>，让我知道一切都<strong class="ke jf">正常工作</strong>。我对三的powerup ID也是这样做的，属于盾powerup。</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ma"><img src="../Images/f35c8ce8e8d39761459da8ade07eb66b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wyQsuNJPxSpJPxKtKb0dgg.png"/></div></div></figure><p id="a1ad" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">我已经有了一个全功能的三重射击，所以我<strong class="ke jf">把预置分配给我的产卵管理器，这样我就可以<strong class="ke jf">像我的敌人一样定期实例化</strong>。</strong></p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/496d935f393974b54a42bcce2af19060.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/1*d0jxjwKMv0pj0yX_-gap8A.png"/></div></figure><p id="cf29" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这里的问题是，我只是<strong class="ke jf">实例化了三重镜头。在我的下一篇文章中，我将介绍如何转换我的实例化方法，以匹配加电系统的新模块化。我只是先<strong class="ke jf">测试</strong>加电脚本，以确保<strong class="ke jf">功能正常</strong>，所以现在没问题。</strong></p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mc"><img src="../Images/86f9501bbba78a2264e887b891c55522.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AihVR4gsQt6kk8d8cK-uMg.png"/></div></div></figure><p id="8604" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">我将每个新的虚拟加电拖到我的场景视图中，以测试我的加电ID分配和发送的调试消息。</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi md"><img src="../Images/fc5d1a0574d54ab3baad6133ce0c863f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*vJgtjsMvL_NfmJHimfwR5w.gif"/></div></div></figure><p id="fecc" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">如下图所示，玩家激活了脚蹼助推。我还包括了一些其他信息，只是为了好玩，来展示通过碰撞器从另一个对象获取数据是多么容易。看来盔甲也被激活了，所以这是我开始实施下一步的绿灯！在我的下一篇文章中再见，我将完成这些增强并优化脚本。感谢阅读！</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi me"><img src="../Images/b036541dd876b674194e4ba16f36f09e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ciV5BpesM7yk5PhVvyS7mA.png"/></div></div></figure></div></div>    
</body>
</html>