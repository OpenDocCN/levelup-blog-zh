<html>
<head>
<title>Sign In with Google OAuth in Angular 8</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Angular 8中登录Google OAuth</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/sign-in-with-google-oauth-in-angular-8-e716ed7f3b2f?source=collection_archive---------1-----------------------#2020-01-05">https://levelup.gitconnected.com/sign-in-with-google-oauth-in-angular-8-e716ed7f3b2f?source=collection_archive---------1-----------------------#2020-01-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5260" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">只需点击一下鼠标，就可以在Angular应用程序中使用Google进行登录。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7f16c955da604d57171598ed29df05cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kPrsz5T77CDCwoqbRXEraA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">登录脸书和谷歌OAuth</figcaption></figure><p id="6b0f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我之前的帖子中，已经一步一步地解释了如何登录脸书。你可以点击查看链接<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/sign-in-with-facebook-oauth-in-angular-8-3a1625eceab2">。现在，我们将添加另一个按钮来使用Google帐户登录。我们将使用与我之前的帖子相同的角度模块，即<strong class="la iu"> angularx-social-login </strong>。唯一的区别是我们需要从Google API控制台获取OAuth客户端id。</a></p><h1 id="5a73" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">创建一个谷歌应用</h1><p id="d13a" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">首先，我们需要导航到<a class="ae lu" href="https://console.developers.google.com/apis/credentials" rel="noopener ugc nofollow" target="_blank"> Google API控制台</a>并创建凭证。选择OAuth客户端ID。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/e3a47f914d073e79720b4d511e7b37f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f7QLkYGNBdUUxK6JYa6Nxg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Google API控制台</figcaption></figure><p id="b288" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，选择Web应用程序，输入我们的项目名称、项目URL，然后单击Create按钮。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/e3b3d18c5030cee800b175c2b4a72625.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Am3EM47hdVVyBJ8RSUtrA.png"/></div></div></figure><p id="033e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将使用https而不是http，因为来自Google API的方法只能从https页面调用。您可以查看这篇文章，为Angular应用程序在localhost中创建一个有效的SSL。</p><p id="3def" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在下一个屏幕中，复制客户端ID并将其保存在记事本中。</p><p id="591c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，按照我在<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/sign-in-with-facebook-oauth-in-angular-8-3a1625eceab2">上一篇文章</a>中的副标题<strong class="la iu">设置Angular应用</strong>的步骤，创建一个新的Angular应用并安装angularx-social-login模块。</p><h1 id="5c2e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">用谷歌按钮显示一个登录表单</h1><p id="1e05" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我们将在我们的登录表单中添加一个带有Google 按钮的<strong class="la iu">登录。为此，我们需要如下更新这3个文件。</strong></p><p id="66fd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">app.component.html</strong></p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="acd2" class="mz lw it mv b gy na nb l nc nd">&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="UTF-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;  <br/>    &lt;title&gt;Document&lt;/title&gt;<br/>  &lt;/head&gt;&lt;body class="bg-light"&gt;<br/>  &lt;div class="container"&gt;<br/>    &lt;div class="row py-5 justify-content-center"&gt;<br/>      &lt;div class="col-md-8"&gt;<br/>        &lt;h1 class="text-center py-4"&gt;Sign In with Facebook in Angular 8&lt;/h1&gt;        &lt;div *ngIf="loggedIn===false"&gt;<br/>          &lt;form [formGroup]="signinForm"&gt;<br/>            &lt;div class="form-group"&gt;<br/>              &lt;label for="email"&gt;Email&lt;/label&gt;<br/>              &lt;input type="text" class="form-control" id="email" formControlName="email"&gt;<br/>            &lt;/div&gt;<br/>     <br/>            &lt;div class="form-group"&gt;<br/>              &lt;label for="password"&gt;Password&lt;/label&gt;<br/>              &lt;input type="password" class="form-control" id="password" formControlName="password" &gt;<br/>            &lt;/div&gt;<br/>          &lt;/form&gt;<br/>          &lt;div&gt;<br/>            &lt;p&gt;Or&lt;/p&gt;<br/>          &lt;/div&gt;<br/>          &lt;div&gt;<br/>            &lt;button type="button" (click)="signInWithFB()" class="btn btn-primary"&gt;Sign In With Facebook&lt;/button&gt;<br/>            &lt;button type="button" (click)="signInWithGoogle()" class="btn btn-primary"&gt;Sign In With Google&lt;/button&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;        &lt;div *ngIf="loggedIn===true"&gt;<br/>          &lt;div class="form-group"&gt;<br/>            &lt;label for="firstname"&gt;First Name&lt;/label&gt;<br/>            &lt;input type="text" class="form-control" id="firstname" [value]="user.firstName" readonly &gt;<br/>          &lt;/div&gt;          &lt;div class="form-group"&gt;<br/>            &lt;label for="lastname"&gt;Last Name&lt;/label&gt;<br/>            &lt;input type="text" class="form-control" id="lastname" [value]="user.lastName" readonly &gt;<br/>          &lt;/div&gt;          &lt;div class="form-group"&gt;<br/>            &lt;label for="email2"&gt;Email&lt;/label&gt;<br/>            &lt;input type="text" class="form-control" id="email2" [value]="user.email" readonly &gt;<br/>          &lt;/div&gt;<br/>        <br/>          &lt;button type="button" (click)="signOut()" class="btn btn-primary"&gt;Sign Out&lt;/button&gt;         &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="4553" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">应用组件</strong></p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="bf31" class="mz lw it mv b gy na nb l nc nd">import { Component, OnInit } from '@angular/core';<br/>import { FormGroup, FormBuilder, Validators } from '@angular/forms';<br/>import { AuthService, FacebookLoginProvider,GoogleLoginProvider, SocialUser } from 'angularx-social-login';</span><span id="7eab" class="mz lw it mv b gy ne nb l nc nd">@Component({<br/>  selector: 'app-root',<br/>  templateUrl: './app.component.html',<br/>  styleUrls: ['./app.component.scss']<br/>})</span><span id="59b4" class="mz lw it mv b gy ne nb l nc nd">export class AppComponent implements OnInit {<br/>  signinForm: FormGroup;<br/>  user: SocialUser;<br/>  loggedIn: boolean;  </span><span id="ebbe" class="mz lw it mv b gy ne nb l nc nd">  constructor(private fb: FormBuilder, private authService: AuthService) { }  </span><span id="df12" class="mz lw it mv b gy ne nb l nc nd">  ngOnInit() {<br/>    this.signinForm = this.fb.group({<br/>      email: ['', Validators.required],<br/>      password: ['', Validators.required]<br/>    });    this.authService.authState.subscribe((user) =&gt; {<br/>      this.user = user;<br/>      this.loggedIn = (user != null);<br/>      console.log(this.user);<br/>    });<br/>  }  </span><span id="1e7d" class="mz lw it mv b gy ne nb l nc nd">  signInWithFB(): void {<br/>    this.authService.signIn(FacebookLoginProvider.PROVIDER_ID);<br/>  }</span><span id="854b" class="mz lw it mv b gy ne nb l nc nd">  signInWithGoogle(): void {<br/>    this.authService.signIn(GoogleLoginProvider.PROVIDER_ID);<br/>  }</span><span id="b81d" class="mz lw it mv b gy ne nb l nc nd">  signOut(): void {<br/>    this.authService.signOut();<br/>  }<br/>}</span></pre><p id="401e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> app.module.ts </strong></p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="d087" class="mz lw it mv b gy na nb l nc nd">import { BrowserModule } from '@angular/platform-browser';<br/>import { NgModule } from '@angular/core';<br/>import { AppRoutingModule } from './app-routing.module';<br/>import { AppComponent } from './app.component';<br/>import { ReactiveFormsModule } from '@angular/forms';<br/>import { SocialLoginModule, AuthServiceConfig, FacebookLoginProvider } from 'angularx-social-login';</span><span id="6561" class="mz lw it mv b gy ne nb l nc nd">const config = new AuthServiceConfig([<br/>  {<br/>    id: GoogleLoginProvider.PROVIDER_ID,<br/>    provider: new GoogleLoginProvider("YOUR-GOOGLE-CLIENT-ID")<br/>  },<br/>  {<br/>    id: FacebookLoginProvider.PROVIDER_ID,<br/>    provider: new FacebookLoginProvider('YOUR-APP-ID')<br/>  }<br/>]);</span><span id="508c" class="mz lw it mv b gy ne nb l nc nd">export function provideConfig() {<br/>  return config;<br/>}</span><span id="498b" class="mz lw it mv b gy ne nb l nc nd">@NgModule({<br/>  declarations: [<br/>    AppComponent<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    AppRoutingModule,<br/>    ReactiveFormsModule,<br/>    SocialLoginModule<br/>  ],<br/>  providers: [<br/>    {<br/>      provide: AuthServiceConfig,<br/>      useFactory: provideConfig<br/>    }<br/>  ],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule { }</span></pre><p id="f682" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是你点击“用谷歌登录”按钮后的样子。您的Google帐户信息将显示在表单中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/67f4b7b66a081cd2244a6ea9728f1437.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DdnIQqhVyRNnNtPJSc5iIA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">使用Google帐户登录后</figcaption></figure><h1 id="465b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="70a7" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">在本文中，我们学习了如何使用angularx-social-login Angular模块登录到我们的Angular应用程序。</p><p id="13c7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你认为这篇文章是有帮助的，不要忘记与你的朋友分享。</p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="b399" class="lv lw it bd lx ly nn ma mb mc no me mf jz np ka mh kc nq kd mj kf nr kg ml mm bi translated">资源</h1><ol class=""><li id="a1bd" class="ns nt it la b lb mn le mo lh nu ll nv lp nw lt nx ny nz oa bi translated">https://dzone . com/articles/log in-with-Facebook-and-Google-using-angular-8</li></ol></div></div>    
</body>
</html>