<html>
<head>
<title>Build an RPM using Maven and Spring Boot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Maven和Spring Boot构建一个RPM</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/build-an-rpm-using-maven-and-spring-boot-643aee7d2a4f?source=collection_archive---------2-----------------------#2020-06-15">https://levelup.gitconnected.com/build-an-rpm-using-maven-and-spring-boot-643aee7d2a4f?source=collection_archive---------2-----------------------#2020-06-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/620819c33bf8449a45d73f10db62e9fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pIDTvsW1UqiYaIT0qDYQVQ.png"/></div></div></figure><div class=""/><div class=""><h2 id="2028" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">本教程将介绍一种使用Maven将Spring Boot java应用程序构建到RPM包中的技术。</h2></div><p id="6564" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">本文的目标是使用<strong class="kv jf"> rpm-maven-plugin </strong>将Spring Boot应用程序打包成RPM。我们不仅会介绍创建RPM的基础知识，还会包括安装前和安装后脚本，以确保您已经准备好构建自己的应用程序。</p><p id="778c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">如果你对通过Docker打包感兴趣，看看下面的帖子。</p><div class="is it gp gr iu lp"><a href="https://medium.com/swlh/build-a-docker-image-using-maven-and-spring-boot-58147045a400" rel="noopener follow" target="_blank"><div class="lq ab fo"><div class="lr ab ls cl cj lt"><h2 class="bd jf gy z fp lu fr fs lv fu fw jd bi translated">使用Maven和Spring Boot构建Docker映像</h2><div class="lw l"><h3 class="bd b gy z fp lu fr fs lv fu fw dk translated">使用Maven为您的Spring Boot应用程序构建Docker映像的三种技术。</h3></div><div class="lx l"><p class="bd b dl z fp lu fr fs lv fu fw dk translated">medium.com</p></div></div><div class="ly l"><div class="lz l ma mb mc ly md ja lp"/></div></div></a></div><p id="4931" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我们开始吧。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="d164" class="ml mm je bd mn mo mp mq mr ms mt mu mv kk mw kl mx kn my ko mz kq na kr nb nc bi translated">Spring Boot应用</h1><p id="3f41" class="pw-post-body-paragraph kt ku je kv b kw nd kf ky kz ne ki lb lc nf le lf lg ng li lj lk nh lm ln lo im bi translated">出于演示目的，我们将使用<a class="ae ni" href="https://spring.io/quickstart" rel="noopener ugc nofollow" target="_blank"> Spring Boot快速入门</a>中详细介绍的Hello World示例。您可以自带应用程序，或者使用为本文准备的源代码开始使用，这些源代码可以从<a class="ae ni" href="https://github.com/davelms/medium-articles/tree/master/spring-maven-rpm" rel="noopener ugc nofollow" target="_blank"> GitHub </a>中克隆。</p><p id="f173" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我用Java 11和Maven 3.6.3在CentOS 7上运行。我还在我的服务器上安装了<em class="nj"> rpm-build </em>包。</p><p id="6282" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">使用<code class="fe nk nl nm nn b">mvn package</code>构建，并使用<code class="fe nk nl nm nn b">java -jar target/demo-application-0.0.1-SNAPSHOT.jar</code>验证应用程序是否按预期运行(如果您愿意，也可以使用<code class="fe nk nl nm nn b">mvn spring-boot:run</code>)。</p><p id="228c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">假设一切顺利，您应该能够在浏览器中点击<a class="ae ni" href="http://localhost:8080/hello" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/hello</a>来查看您正在运行的Spring Boot应用程序。</p><figure class="np nq nr ns gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi no"><img src="../Images/a3ec7e55a7413755076e0e4e45495d3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*t0khLjJ0IvZnNtle.png"/></div></div></figure><p id="6f82" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">现在让我们将这个应用程序打包成一个RPM。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="b910" class="ml mm je bd mn mo mp mq mr ms mt mu mv kk mw kl mx kn my ko mz kq na kr nb nc bi translated">多模块项目结构</h1><p id="cf57" class="pw-post-body-paragraph kt ku je kv b kw nd kf ky kz ne ki lb lc nf le lf lg ng li lj lk nh lm ln lo im bi translated">个人喜好在此；我喜欢保持单独的pom.xml，因为我不喜欢副作用或创建多个工件的pom(如果pom.xml说它创建了一个jar，那是我个人期望它做的)。我的源代码结构将由两个模块组成— <code class="fe nk nl nm nn b">app</code>(用于Java代码，构建Spring Boot可执行jar)和<code class="fe nk nl nm nn b">rpm</code>(用于打包成RPM)。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="5c9d" class="nx mm je nn b gy ny nz l oa ob">my-project/app<br/>my-project/app/src/main/java/com/example/demo/<strong class="nn jf">DemoApplication.java</strong><br/>my-project/app/<strong class="nn jf">pom.xml</strong><br/>my-project/rpm<br/>my-project/rpm/<strong class="nn jf">pom.xml<br/></strong>my-project/<strong class="nn jf">pom.xml</strong></span></pre><p id="8e88" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">父pom.xml只是将app和rpm指定为模块。app pom.xml是一个普通的Spring Boot示例，下面的配置被添加到了<strong class="kv jf">spring-boot-maven-plugin</strong>中。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="7e28" class="nx mm je nn b gy ny nz l oa ob">&lt;configuration&gt;<br/>  &lt;executable&gt;true&lt;/executable&gt;<br/>&lt;/configuration&gt;</span></pre><p id="e2f3" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">使用这个选项允许您直接运行jar，即不使用<code class="fe nk nl nm nn b">java -jar</code>，并且稍后在使用yum/rpm部署应用程序时只需要保存一点点配置。</p><p id="e688" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">从现在开始，我将专注于设置RPM包。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="ebb3" class="ml mm je bd mn mo mp mq mr ms mt mu mv kk mw kl mx kn my ko mz kq na kr nb nc bi translated">设置RPM包</h1><p id="f163" class="pw-post-body-paragraph kt ku je kv b kw nd kf ky kz ne ki lb lc nf le lf lg ng li lj lk nh lm ln lo im bi translated">当我们开始配置<code class="fe nk nl nm nn b">rpm/pom.xml</code>时，第一步是指定包装。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="d32f" class="nx mm je nn b gy ny nz l oa ob">&lt;packaging&gt;rpm&lt;/packaging&gt;</span></pre><p id="5f60" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">接下来，我们需要确保我们定义了我们依赖于应用程序jar的构建，我们将它分离到了<code class="fe nk nl nm nn b">app</code>模块中。在这里，我引用了demo-application-app <strong class="kv jf"> </strong>并使用了其他值的属性。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="5e83" class="nx mm je nn b gy ny nz l oa ob">&lt;dependencies&gt;<br/>...</span><span id="a84b" class="nx mm je nn b gy oc nz l oa ob">  &lt;dependency&gt;<br/>    &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;<br/>    &lt;artifactId&gt;demo-application-app&lt;/artifactId&gt;<br/>    &lt;version&gt;${project.version}&lt;/version&gt;<br/>  &lt;/dependency&gt;</span><span id="a587" class="nx mm je nn b gy oc nz l oa ob">...<br/>&lt;/dependencies&gt;</span></pre><p id="470c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">现在我们可以设置和配置<strong class="kv jf"> rpm-maven-plugin </strong>本身了。接下来我们将介绍配置条目。确保您显式地将<strong class="kv jf"> extensions=true </strong>设置为高亮显示，因为这允许我们更早地将打包设置为“rpm”。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="af1b" class="nx mm je nn b gy ny nz l oa ob">&lt;build&gt;<br/>  &lt;plugins&gt;<br/>  ...<br/> <br/>    &lt;plugin&gt;<br/>      &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;<br/>      &lt;artifactId&gt;rpm-maven-plugin&lt;/artifactId&gt;<br/>      &lt;version&gt;2.2.0&lt;/version&gt;<br/><strong class="nn jf">      &lt;extensions&gt;true&lt;/extensions&gt;</strong><br/>      &lt;configuration&gt;<br/>      ...<br/>      &lt;/configuration&gt;<br/>    &lt;/plugin&gt;</span><span id="fd6a" class="nx mm je nn b gy oc nz l oa ob">  ...<br/>  &lt;/plugins&gt;<br/>&lt;/build&gt;</span></pre><h2 id="8080" class="nx mm je bd mn od oe dn mr of og dp mv lc oh oi mx lg oj ok mz lk ol om nb on bi translated">配置rpm-maven插件</h2><p id="a7f0" class="pw-post-body-paragraph kt ku je kv b kw nd kf ky kz ne ki lb lc nf le lf lg ng li lj lk nh lm ln lo im bi translated">接下来的所有更改都将进入<code class="fe nk nl nm nn b">&lt;configuration&gt;</code>部分。</p><p id="987f" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们可以对大多数属性使用默认值；但是，您需要为<code class="fe nk nl nm nn b">&lt;group&gt;</code>设置一个值，因为它是强制的，没有默认值。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="aaf1" class="nx mm je nn b gy ny nz l oa ob">&lt;group&gt;${project.groupId}&lt;/group&gt;</span></pre><p id="77ac" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这样一来，我们就可以进行文件映射，并设置安装前和安装后的scriptlets。有趣的东西。</p><p id="8160" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">出于本演示的目的，我将应用程序安装目录配置为<code class="fe nk nl nm nn b">/var/demo-application</code>，用户/组将为<code class="fe nk nl nm nn b">demo-application</code>。因为这个用户在默认情况下不存在，所以我们必须在预安装的scriptlet中创建它——我们稍后会谈到这个问题。</p><p id="a329" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">所有文件映射在<code class="fe nk nl nm nn b">&lt;mappings&gt;</code>中被定义为一系列<code class="fe nk nl nm nn b">&lt;mapping&gt;</code>条目。这些可以采用单个源到目标文件拷贝的形式，也可以采用整个目录的形式。我们的第一个文件将是应用程序jar本身，它来自我们的构建依赖项。格式应该是不言自明的，包含<strong class="kv jf"> stripVersion=true </strong>将确保jar名称的一致性。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="e640" class="nx mm je nn b gy ny nz l oa ob">&lt;mapping&gt;<br/>  &lt;directory&gt;/var/demo-application/&lt;/directory&gt;<br/>  &lt;filemode&gt;755&lt;/filemode&gt;<br/>  &lt;username&gt;demo-application&lt;/username&gt;<br/>  &lt;groupname&gt;demo-application&lt;/groupname&gt;<br/>  &lt;dependency&gt;<br/>    <strong class="nn jf">&lt;stripVersion&gt;true&lt;/stripVersion&gt;</strong><br/>    &lt;includes&gt;<br/>      &lt;include&gt;${project.groupId}:demo-application-app&lt;/include&gt;<br/>    &lt;/includes&gt;<br/>  &lt;/dependency&gt;<br/>&lt;/mapping&gt;</span></pre><p id="7deb" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在这个阶段，你有了基本的结构。我们现在甚至可以测试它；运行<code class="fe nk nl nm nn b">mvn package</code>，您应该会看到生成的初始RPM。</p><figure class="np nq nr ns gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oo"><img src="../Images/c0dd6fdc7b9ee53ae029315eb034a59f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vuvfMFEOsB-wzWy_T3V2Zg.png"/></div></div></figure><p id="5e28" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">使用<code class="fe nk nl nm nn b">rpm -qpl</code>验证其当前内容，您将看到基本的文件系统结构正在形成。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="690a" class="nx mm je nn b gy ny nz l oa ob">/var/demo-application<br/>/var/demo-application/demo-application-app.jar</span></pre><p id="1368" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">安装这个RPM肯定可以工作，但是我们仍然缺少一些东西；</p><ol class=""><li id="92df" class="op oq je kv b kw kx kz la lc or lg os lk ot lo ou ov ow ox bi translated">我们的用户/组不存在——所以在这个阶段安装会将目录和jar默认为<em class="nj"> root </em>用户。</li><li id="9469" class="op oq je kv b kw oy kz oz lc pa lg pb lk pc lo ou ov ow ox bi translated">我们的应用程序目前不会作为服务运行，它不会在服务器重启时自动启动，等等。</li></ol><p id="c664" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">接下来，我们将演示如何分别使用安装前和安装后脚本来实现这两个步骤。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="9313" class="nx mm je bd mn od oe dn mr of og dp mv lc oh oi mx lg oj ok mz lk ol om nb on bi translated">Scriptlets</h2><p id="786d" class="pw-post-body-paragraph kt ku je kv b kw nd kf ky kz ne ki lb lc nf le lf lg ng li lj lk nh lm ln lo im bi translated">RPM包中可以包含许多脚本，这些脚本作为包的安装、删除或验证的一部分来执行。</p><p id="d9a2" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们将重点关注<strong class="kv jf">pre script let</strong>，它在软件包安装之前运行，对应于spec文件中的<code class="fe nk nl nm nn b">%pre</code>标签，以及<strong class="kv jf"> postinstallScriptlet </strong>，它在软件包安装之后运行，对应于<code class="fe nk nl nm nn b">%post</code>标签。</p><p id="9032" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我们将这些引用添加到配置中，并编写两个shell脚本<strong class="kv jf">。</strong></p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="2127" class="nx mm je nn b gy ny nz l oa ob">&lt;preinstallScriptlet&gt;<br/>  &lt;scriptFile&gt;<strong class="nn jf">src/main/resources/preinstall.sh</strong>&lt;/scriptFile&gt;<br/>  &lt;fileEncoding&gt;utf-8&lt;/fileEncoding&gt;<br/>  &lt;filter&gt;true&lt;/filter&gt;<br/>&lt;/preinstallScriptlet&gt;</span><span id="a355" class="nx mm je nn b gy oc nz l oa ob">&lt;postinstallScriptlet&gt;<br/>  &lt;scriptFile&gt;<strong class="nn jf">src/main/resources/postinstall.sh</strong>&lt;/scriptFile&gt;<br/>  &lt;fileEncoding&gt;utf-8&lt;/fileEncoding&gt;<br/>  &lt;filter&gt;true&lt;/filter&gt;<br/>&lt;/postinstallScriptlet&gt;</span></pre><p id="c53a" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">从我们的<strong class="kv jf">预安装</strong>脚本开始，我们希望确保用户和组已经创建，因此我们将使用<code class="fe nk nl nm nn b">useradd</code>命令。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="6a4e" class="nx mm je nn b gy ny nz l oa ob">/usr/sbin/useradd -c "Demo Application" -U \<br/>  -s /sbin/nologin -r \<br/>  -d /var/demo-application demo-application 2&gt; /dev/null || :</span></pre><p id="0f37" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">使用我们的<strong class="kv jf"> postinstall </strong>脚本，我们希望确保在第一次安装RPM时启用服务。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="015f" class="nx mm je nn b gy ny nz l oa ob">if [ $1 -eq 1 ] ; then <br/>  # Initial installation <br/>  systemctl enable demo-application.service &gt;/dev/null 2&gt;&amp;1 || : <br/>fi</span></pre><p id="e956" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">说到这里，我们再来看看服务本身。因为我的目标是CentOS 7，所以这个演示包括使用<code class="fe nk nl nm nn b">systemd</code>的步骤。我们将把<strong class="kv jf">demo-application . service</strong>文件包含在我们的源存储库和映射中。</p><p id="9479" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在目录<code class="fe nk nl nm nn b">src/main/resources/systemd</code>下的源代码库中创建<code class="fe nk nl nm nn b">demo-application.service</code>文件。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="492c" class="nx mm je nn b gy ny nz l oa ob">[Unit]<br/>Description=demo-application<br/>After=syslog.target</span><span id="e91a" class="nx mm je nn b gy oc nz l oa ob">[Service]<br/>User=demo-application<br/>ExecStart=/var/demo-application/demo-application-app.jar<br/>SuccessExitStatus=143</span><span id="e034" class="nx mm je nn b gy oc nz l oa ob">[Install]<br/>WantedBy=multi-user.target</span></pre><p id="1790" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">添加一个新的映射，定义我们希望在安装RPM时将这个文件复制到<code class="fe nk nl nm nn b">/etc/systemd/system</code>目录。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="7b19" class="nx mm je nn b gy ny nz l oa ob">&lt;mapping&gt;<br/>  &lt;directory&gt;/etc/systemd/system&lt;/directory&gt;<br/>  &lt;filemode&gt;755&lt;/filemode&gt;<br/>  &lt;username&gt;root&lt;/username&gt;<br/>  &lt;groupname&gt;root&lt;/groupname&gt;<br/>  &lt;sources&gt;<br/>    &lt;source&gt;<br/>      &lt;location&gt;src/main/resources/systemd&lt;/location&gt;<br/>    &lt;/source&gt;<br/>  &lt;/sources&gt;<br/>&lt;/mapping&gt;</span></pre></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="a5f2" class="ml mm je bd mn mo mp mq mr ms mt mu mv kk mw kl mx kn my ko mz kq na kr nb nc bi translated">构建、打包和安装</h1><p id="a5a1" class="pw-post-body-paragraph kt ku je kv b kw nd kf ky kz ne ki lb lc nf le lf lg ng li lj lk nh lm ln lo im bi translated">现在，我们已经准备好对Spring Boot应用程序(jar)进行测试构建，并将应用程序打包成一个RPM以备安装。</p><p id="e59b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">通过运行<code class="fe nk nl nm nn b">mvn package</code>构建并打包应用程序。您可以运行mvn部署来分发RPM，例如分发到Nexus或Artifactory。</p><p id="e0cc" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">成功完成后，您将在目标目录中拥有一个RPM。如下所示，通过运行<code class="fe nk nl nm nn b">yum localinstall</code>进行本地测试。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="2bf1" class="nx mm je nn b gy ny nz l oa ob">yum localinstall rpm/target/rpm/demo-application-package/RPMS/noarch/demo-application-package-0.0.1-SNAPSHOT20200614204300.noarch.rpm</span></pre><p id="3523" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">一旦RPM安装到您的服务器上，让我们使用<code class="fe nk nl nm nn b">systemctl start demo-application</code>(适用于CentOS、RHEL、亚马逊Linux 2)启动应用程序，并使用<code class="fe nk nl nm nn b">systemctl status demo-application</code>检查它是否正在运行。一旦运行，我们可以测试应用程序的工作。</p><p id="7227" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">使用curl的本地命令。</p><pre class="np nq nr ns gt nt nn nu nv aw nw bi"><span id="a1d1" class="nx mm je nn b gy ny nz l oa ob"># curl <a class="ae ni" href="http://localhost:8080/hello" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/hello</a><br/>Hello World!</span></pre><p id="f617" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">最后在浏览器中使用公共IP地址。</p><figure class="np nq nr ns gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pd"><img src="../Images/525f7f3d1d2a8c4264265551bb72cb20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U98xmQ3aMoO3WVkJPIN9XQ.png"/></div></div></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="12ec" class="ml mm je bd mn mo mp mq mr ms mt mu mv kk mw kl mx kn my ko mz kq na kr nb nc bi translated">结论</h1><p id="3476" class="pw-post-body-paragraph kt ku je kv b kw nd kf ky kz ne ki lb lc nf le lf lg ng li lj lk nh lm ln lo im bi translated">在这篇文章中，我们提到了使用<strong class="kv jf"> rpm-maven-plugin </strong>为Spring Boot应用程序构建rpm并安装到服务器的技术。</p><p id="a53f" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们仅仅触及了表面，使用相同的模式，您可以继续探索配置、日志记录和包括更多资源、脚本和安装命令的技术。</p><p id="deb6" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">祝你申请顺利。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="f2f9" class="ml mm je bd mn mo mp mq mr ms mt mu mv kk mw kl mx kn my ko mz kq na kr nb nc bi translated">参考</h1><ul class=""><li id="51e6" class="op oq je kv b kw nd kz ne lc pe lg pf lk pg lo ph ov ow ox bi translated"><a class="ae ni" href="https://docs.spring.io/spring-boot/docs/current/reference/html/deployment.html#deployment-service" rel="noopener ugc nofollow" target="_blank"> Spring Boot安装文件</a></li><li id="49c3" class="op oq je kv b kw oy kz oz lc pa lg pb lk pc lo ph ov ow ox bi translated"><a class="ae ni" href="https://www.mojohaus.org/rpm-maven-plugin/" rel="noopener ugc nofollow" target="_blank"> rpm-maven-plugin文档</a></li></ul></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="f5c2" class="ml mm je bd mn mo mp mq mr ms mt mu mv kk mw kl mx kn my ko mz kq na kr nb nc bi translated">作者的笔记</h1><p id="cc0e" class="pw-post-body-paragraph kt ku je kv b kw nd kf ky kz ne ki lb lc nf le lf lg ng li lj lk nh lm ln lo im bi translated">感谢您阅读本文——我希望这篇文章对您有用，并期待您的评论和反馈。</p><p id="194b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">源代码可从<a class="ae ni" href="https://github.com/davelms/medium-articles/tree/master/spring-maven-rpm" rel="noopener ugc nofollow" target="_blank"> GitHub </a>获得。</p><p id="a6d9" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">你可以在<a class="ae ni" href="https://twitter.com/davelms" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我，在<a class="ae ni" href="https://www.linkedin.com/in/davelms/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系。</p></div></div>    
</body>
</html>