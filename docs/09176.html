<html>
<head>
<title>Deploy a Postgres, Express, React and Nodejs Fullstack App on Heroku and Netlify</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Heroku和Netlify上部署Postgres、Express、React和Nodejs Fullstack应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/deploy-pern-fullstack-app-on-heroku-and-netlify-automatic-deploy-9b61ac6a254e?source=collection_archive---------3-----------------------#2021-07-14">https://levelup.gitconnected.com/deploy-pern-fullstack-app-on-heroku-and-netlify-automatic-deploy-9b61ac6a254e?source=collection_archive---------3-----------------------#2021-07-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/5f23574799f34dc8ba9c4378ae354b7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ePv-q6-x4IPpO4yL"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">丹尼尔·麦金尼斯在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><div class=""/><p id="c72d" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文将带您了解如何部署具有自动部署功能的PERN全栈应用。</p><h1 id="1034" class="lb lc jg bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">先决条件</h1><ul class=""><li id="97d6" class="lz ma jg kf b kg mb kk mc ko md ks me kw mf la mg mh mi mj bi translated"><a class="ae jd" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>账号</li><li id="0f4e" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">Heroku  CLI</li><li id="b064" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">净收益账户</li><li id="af56" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated"><a class="ae jd" href="https://www.postgresql.org/" rel="noopener ugc nofollow" target="_blank"> PostgreSQL </a>数据库</li></ul><h1 id="aadb" class="lb lc jg bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">PERN是什么？</h1><p id="62a0" class="pw-post-body-paragraph kd ke jg kf b kg mb ki kj kk mc km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">PERN堆栈由<strong class="kf jh"> P </strong> ostgreSQL、<strong class="kf jh"> E </strong> xpress、<strong class="kf jh"> R </strong> eact和<strong class="kf jh"> N </strong> ode组成。借助Express.js框架，PostgreSQL被用作后端数据库。React.js作为前端，Node.js作为后端服务器。</p><h1 id="b3c2" class="lb lc jg bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">部署流程</h1><p id="f5b4" class="pw-post-body-paragraph kd ke jg kf b kg mb ki kj kk mc km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">叉此<a class="ae jd" href="https://github.com/dhatGuy/yelp-clone-PERN" rel="noopener ugc nofollow" target="_blank">库</a>上手。</p><p id="a84d" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">看一看提供的代码。有两个文件夹:</p><ul class=""><li id="6799" class="lz ma jg kf b kg kh kk kl ko ms ks mt kw mu la mg mh mi mj bi translated">客户端—包含用React.js构建的前端代码，以及</li><li id="eded" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">服务器——使用Express.js开发后端</li></ul><p id="df49" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们确保应用程序在本地运行良好。</p><p id="64b6" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将目录更改到服务器并安装依赖项</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="4323" class="ne lc jg na b gy nf ng l nh ni">cd server</span><span id="1f80" class="ne lc jg na b gy nj ng l nh ni">npm install</span></pre><p id="cd4b" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开新的终端。将目录更改为客户端并安装依赖项</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="99b0" class="ne lc jg na b gy nf ng l nh ni">cd client</span><span id="555f" class="ne lc jg na b gy nj ng l nh ni">npm install </span></pre><h2 id="ea61" class="ne lc jg bd ld nk nl dn lh nm nn dp ll ko no np lp ks nq nr lt kw ns nt lx nu bi translated">创建数据库</h2><p id="9882" class="pw-post-body-paragraph kd ke jg kf b kg mb ki kj kk mc km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">由于我们使用PostgreSQL作为数据库，请确保您已经安装了<a class="ae jd" href="https://www.postgresql.org/download/" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="1439" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开您的终端并登录Postgres</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="84c9" class="ne lc jg na b gy nf ng l nh ni">psql -U postgres</span></pre><p id="99e0" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输入<code class="fe nv nw nx na b">postgres</code>作为密码。</p><p id="23a8" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建一个名为<code class="fe nv nw nx na b">yelp</code>的数据库并连接到它。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="d8d8" class="ne lc jg na b gy nf ng l nh ni">create database yelp;</span><span id="f8aa" class="ne lc jg na b gy nj ng l nh ni">\c yelp</span></pre><p id="64c0" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只需要两个应用程序表。</p><p id="1a89" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建<code class="fe nv nw nx na b">restaurants</code>表</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="92d2" class="ne lc jg na b gy nf ng l nh ni">CREATE TABLE restaurants (</span><span id="a894" class="ne lc jg na b gy nj ng l nh ni">  id BIGSERIAL NOT NULL PRIMARY KEY,</span><span id="eccc" class="ne lc jg na b gy nj ng l nh ni">  name VARCHAR(50) NOT NULL,</span><span id="a9fe" class="ne lc jg na b gy nj ng l nh ni">  location VARCHAR(50) NOT NULL,</span><span id="9df6" class="ne lc jg na b gy nj ng l nh ni">  price_range INT NOT NULL check(</span><span id="0887" class="ne lc jg na b gy nj ng l nh ni">    price_range &gt;= 1</span><span id="62af" class="ne lc jg na b gy nj ng l nh ni">    AND price_range &lt;= 5</span><span id="cff1" class="ne lc jg na b gy nj ng l nh ni">  )</span><span id="f680" class="ne lc jg na b gy nj ng l nh ni">);</span></pre><p id="bea0" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建第二个表，<code class="fe nv nw nx na b">reviews</code></p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="7b38" class="ne lc jg na b gy nf ng l nh ni">CREATE TABLE reviews (</span><span id="747d" class="ne lc jg na b gy nj ng l nh ni">  id BIGSERIAL NOT NULL PRIMARY KEY,</span><span id="b539" class="ne lc jg na b gy nj ng l nh ni">  restaurant_id BIGINT REFERENCES restaurants(id) ON DELETE CASCADE,</span><span id="69d3" class="ne lc jg na b gy nj ng l nh ni">  name VARCHAR(50) NOT NULL,</span><span id="b4ac" class="ne lc jg na b gy nj ng l nh ni">  review TEXT NOT NULL,</span><span id="7864" class="ne lc jg na b gy nj ng l nh ni">  rating INT NOT NULL check(</span><span id="e8c2" class="ne lc jg na b gy nj ng l nh ni">    rating &gt;= 1</span><span id="115c" class="ne lc jg na b gy nj ng l nh ni">    AND rating &lt;= 5</span><span id="ec2b" class="ne lc jg na b gy nj ng l nh ni">  )</span><span id="0597" class="ne lc jg na b gy nj ng l nh ni">);</span></pre><p id="62e5" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe nv nw nx na b">restaurants</code>表中填充一行。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="d6f4" class="ne lc jg na b gy nf ng l nh ni">INSERT INTO restaurants(name, location, price_range)</span><span id="2849" class="ne lc jg na b gy nj ng l nh ni">VALUES ('Iya Toyosi Canteen', 'Sagamu', 3);</span></pre><h2 id="7c0d" class="ne lc jg bd ld nk nl dn lh nm nn dp ll ko no np lp ks nq nr lt kw ns nt lx nu bi translated">设置环境变量</h2><p id="3f44" class="pw-post-body-paragraph kd ke jg kf b kg mb ki kj kk mc km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">将目录切换到服务器文件夹并创建一个<code class="fe nv nw nx na b">.env</code>文件。增加以下内容。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="d2a0" class="ne lc jg na b gy nf ng l nh ni">PG_USER=postgres</span><span id="cf41" class="ne lc jg na b gy nj ng l nh ni">PG_PASSWORD=postgres</span><span id="df12" class="ne lc jg na b gy nj ng l nh ni">PG_HOST=localhost</span><span id="ee0f" class="ne lc jg na b gy nj ng l nh ni">PG_PORT=5432</span><span id="372e" class="ne lc jg na b gy nj ng l nh ni">PG_DATABASE=yelp</span><span id="5d16" class="ne lc jg na b gy nj ng l nh ni">PORT=7000</span></pre><h2 id="6412" class="ne lc jg bd ld nk nl dn lh nm nn dp ll ko no np lp ks nq nr lt kw ns nt lx nu bi translated">启动应用程序</h2><p id="1bcb" class="pw-post-body-paragraph kd ke jg kf b kg mb ki kj kk mc km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">打开您的终端并导航到客户端文件夹。启动客户端。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="455c" class="ne lc jg na b gy nf ng l nh ni">npm start</span></pre><p id="a0ef" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开一个新终端，导航到服务器文件夹并启动服务器。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="0cf6" class="ne lc jg na b gy nf ng l nh ni">npm start</span></pre><p id="54fe" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开你的浏览器，进入<a class="ae jd" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>查看应用程序运行情况，如下图所示。你可以拿着它到处玩。</p><figure class="mv mw mx my gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ny"><img src="../Images/63c97a4b15053391406a6a4e0a72dbb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6ITDgp_7UedIio1fS0WdyA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">应用程序正在运行</figcaption></figure><h1 id="477b" class="lb lc jg bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">服务器部署流程</h1><p id="b100" class="pw-post-body-paragraph kd ke jg kf b kg mb ki kj kk mc km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">让我们从在Heroku上部署服务器开始。</p><ol class=""><li id="882c" class="lz ma jg kf b kg kh kk kl ko ms ks mt kw mu la nz mh mi mj bi translated">如果您没有帐户，请访问Heroku并创建一个帐户。</li><li id="d525" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la nz mh mi mj bi translated">安装<a class="ae jd" href="https://cli.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku CLI </a>。</li><li id="3d53" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la nz mh mi mj bi translated">安装CLI后，打开您的终端并运行<code class="fe nv nw nx na b">heroku login</code>命令。要完成登录，系统会提示您输入任意键来导航您的web浏览器。然后，CLI会自动让您登录。</li><li id="2c92" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la nz mh mi mj bi translated">创建新的Heroku应用程序</li></ol><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="c18f" class="ne lc jg na b gy nf ng l nh ni">heroku create</span></pre><p id="e54e" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Heroku将为您的应用程序生成一个随机名称，或者传递一个参数来指定您自己的应用程序名称。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="ac45" class="ne lc jg na b gy nf ng l nh ni">heroku create your-app-name</span></pre><p id="467e" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输出</p><figure class="mv mw mx my gt is gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/3467528e728f86489dd52a9f82c20fa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*q3Li1-BPffVMXua3bqnRNQ.png"/></div></figure><p id="e791" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">应用名称为<strong class="kf jh">诱惑-布莱斯-峡谷-75245，</strong>，查看应用的网址为<a class="ae jd" href="https://alluring-bryce-canyon-75245.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"><strong class="kf jh">https://alluring-bryce-canyon-75245.herokuapp.com/</strong></a><strong class="kf jh">。</strong>放松，还不行。</p><h2 id="b14c" class="ne lc jg bd ld nk nl dn lh nm nn dp ll ko no np lp ks nq nr lt kw ns nt lx nu bi translated">设置Heroku Postgres数据库</h2><p id="4528" class="pw-post-body-paragraph kd ke jg kf b kg mb ki kj kk mc km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">要创建Postgres数据库，请在终端中运行以下命令</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="0ff7" class="ne lc jg na b gy nf ng l nh ni">heroku addons:create heroku-postgresql:hobby-dev --app your-app-name</span></pre><p id="102a" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将创建一个数据库并设置一个<code class="fe nv nw nx na b">DATABASE_URL</code>环境变量。</p><figure class="mv mw mx my gt is gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/8632db2716aaf4faca112a84e78ef7ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1394/format:webp/1*TRozHh6sMpRhizpW9H_0ww.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">创建数据库后的输出</figcaption></figure><p id="b3df" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运行命令<code class="fe nv nw nx na b">heroku addons</code>来检查你刚刚创建的新插件。您将看到创建的Postgres数据库带有自动生成的名称，例如<code class="fe nv nw nx na b">postgresql-pointy-04867</code></p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="b9d6" class="ne lc jg na b gy nf ng l nh ni">nameless-journey-88760  postgresql-pointy-04867  heroku-postgresql:hobby-dev  free   created</span></pre><p id="67e8" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要在Postgres数据库中创建表，请登录Heroku数据库</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="c39a" class="ne lc jg na b gy nf ng l nh ni">heroku pg:psql <!-- -->database-name <!-- --> --app your-app-name</span></pre><p id="b308" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">复制并粘贴<code class="fe nv nw nx na b">server/config/db.sql</code>中的内容，创建两个表格并插入一行。</p><figure class="mv mw mx my gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oc"><img src="../Images/32e13301dc62cae7cbc9b1d5ad270f57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CCjuyh86Q7BLCyw1B4DFGA.png"/></div></div></figure><blockquote class="od oe of"><p id="c680" class="kd ke og kf b kg kh ki kj kk kl km kn oh kp kq kr oi kt ku kv oj kx ky kz la ij bi translated">不要忘记用你自己的Heroku信息替换数据库名称和应用程序名称。</p></blockquote><h2 id="7ace" class="ne lc jg bd ld nk nl dn lh nm nn dp ll ko no np lp ks nq nr lt kw ns nt lx nu bi translated">在本地测试应用程序。</h2><p id="deec" class="pw-post-body-paragraph kd ke jg kf b kg mb ki kj kk mc km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">奔跑</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="c595" class="ne lc jg na b gy nf ng l nh ni">heroku local web</span></pre><p id="f95e" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运行这个将向您展示它将如何在Heroku上运行。打开<a class="ae jd" href="http://localhost:7000/api/v1/restaurants" rel="noopener ugc nofollow" target="_blank">http://localhost:7000/API/v1/restaurants</a>查看本地运行的app。</p><h2 id="f117" class="ne lc jg bd ld nk nl dn lh nm nn dp ll ko no np lp ks nq nr lt kw ns nt lx nu bi translated">部署服务器</h2><p id="2a6c" class="pw-post-body-paragraph kd ke jg kf b kg mb ki kj kk mc km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">最后，是时候在Heroku上部署服务器了。</p><p id="0ffc" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开你的终端。从项目的根文件夹中，运行以下命令</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="370d" class="ne lc jg na b gy nf ng l nh ni">heroku git:remote -a alluring-bryce-canyon-75245</span></pre><p id="d857" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以用任何东西代替<code class="fe nv nw nx na b">alluring-bryce-canyon-75245</code>，最好是你的Heroku应用名称。</p><p id="3c90" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要推送代码，特别是服务器文件夹，运行</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="cc36" class="ne lc jg na b gy nf ng l nh ni">git subtree push --prefix server heroku main</span></pre><p id="aa4b" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">服务器现在应该已经启动并运行了。访问<a class="ae jd" href="https://alluring-bryce-canyon-75245.herokuapp.com/api/v1/restaurants" rel="noopener ugc nofollow" target="_blank">https://your-heroku-app-name/API/v1/restaurants</a></p><h2 id="d668" class="ne lc jg bd ld nk nl dn lh nm nn dp ll ko no np lp ks nq nr lt kw ns nt lx nu bi translated">从子文件夹自动部署服务器</h2><p id="34d1" class="pw-post-body-paragraph kd ke jg kf b kg mb ki kj kk mc km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">由于我们的项目有两个文件夹，服务器和客户端，我们可以让Heroku知道通向服务器文件夹的路径。我们不必每次想要部署服务器时都运行上面的命令。</p><ul class=""><li id="1901" class="lz ma jg kf b kg kh kk kl ko ms ks mt kw mu la mg mh mi mj bi translated">进入Heroku仪表盘并选择你正在使用的应用程序</li><li id="1e0c" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">单击设置选项卡。您将看到配置变量部分。点击显示变量。</li></ul><figure class="mv mw mx my gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ok"><img src="../Images/fccfb576e542fc87fc7178b7021f928d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FDYDdrhIIu9fuN_tH8zX4A.png"/></div></div></figure><ul class=""><li id="1885" class="lz ma jg kf b kg kh kk kl ko ms ks mt kw mu la mg mh mi mj bi translated">用<code class="fe nv nw nx na b">PROJECT_PATH</code>设置带有占位符键的输入，用<code class="fe nv nw nx na b">server</code>设置带有占位符值的输入，并点击添加。</li><li id="10f8" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">仍然在Settings选项卡上，您必须添加一个Buildpack来指示Heroku定位您的文件夹。</li><li id="4d72" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">在Config Vars部分下，您将看到Buildpack部分。点击add Buildpack并输入<a class="ae jd" href="https://github.com/timanovsky/subdir-heroku-buildpack.git" rel="noopener ugc nofollow" target="_blank">https://github.com/timanovsky/subdir-heroku-buildpack.git</a>作为URL。保存更改。</li></ul><p id="33bd" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">确保它位于构建包链的顶部(拖动左边的线，将其移动到您添加的任何其他构建包之上)。</p><figure class="mv mw mx my gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ol"><img src="../Images/e528f2f72d1584066c3b522bf7e29806.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*lU9CkAFmppxDmIRrw_1JEg.gif"/></div></div></figure><p id="f2a4" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们将启用自动部署。要启用它，您必须连接项目的GitHub存储库。</p><ol class=""><li id="0839" class="lz ma jg kf b kg kh kk kl ko ms ks mt kw mu la nz mh mi mj bi translated">转到部署选项卡。从部署方法中，选择GitHub。</li><li id="245c" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la nz mh mi mj bi translated">搜索并连接Github repo。</li><li id="f926" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la nz mh mi mj bi translated">最后，启用自动部署。</li></ol><p id="4422" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只要你运行<code class="fe nv nw nx na b">git push</code>，服务器就会自动部署。您不必再运行下面的命令。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="705b" class="ne lc jg na b gy nf ng l nh ni">git subtree push --prefix server heroku main</span></pre><figure class="mv mw mx my gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ol"><img src="../Images/4154f686cc5ec50d6175b6683be8aa3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-AgOClMcwLnaTJDTXR5Bew.gif"/></div></div></figure></div><div class="ab cl om on hu oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="ij ik il im in"><h1 id="a4cd" class="lb lc jg bd ld le ot lg lh li ou lk ll lm ov lo lp lq ow ls lt lu ox lw lx ly bi translated">客户端部署流程</h1><p id="5ba0" class="pw-post-body-paragraph kd ke jg kf b kg mb ki kj kk mc km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">在部署之前，打开项目文件夹并导航到<code class="fe nv nw nx na b">client/src/apis.</code>打开<code class="fe nv nw nx na b">RestaurantFinder.js</code>文件。</p><p id="6607" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将“https://alluringbrycecanyon 75245 . heroku app . com/API/v1/restaurants”替换为“https://your-heroku-app-URL/API/v1/restaurants”</p><p id="6601" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">提交更改并推动。</p><h2 id="4c01" class="ne lc jg bd ld nk nl dn lh nm nn dp ll ko no np lp ks nq nr lt kw ns nt lx nu bi translated">我们开始吧</h2><ul class=""><li id="949e" class="lz ma jg kf b kg mb kk mc ko md ks me kw mf la mg mh mi mj bi translated">进入<a class="ae jd" href="https://netlify.com" rel="noopener ugc nofollow" target="_blank">网络生活</a>并登录您的账户。如果没有，请创建。</li><li id="754d" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">登录后，点击按钮<code class="fe nv nw nx na b">new site from git</code></li><li id="29e3" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">选择您的git提供商。</li><li id="3027" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">选择要部署的存储库。</li><li id="4ed3" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">在基本构建设置下，填写如下输入。</li></ul><figure class="mv mw mx my gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oy"><img src="../Images/c01e6afdd23ea8df9a29305462866af5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IIMrfpb8sb2rpKTqOv-_kQ.png"/></div></div></figure><ul class=""><li id="fb8a" class="lz ma jg kf b kg kh kk kl ko ms ks mt kw mu la mg mh mi mj bi translated">单击部署站点。</li><li id="152c" class="lz ma jg kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">部署成功后，您将看到一个预览应用程序的链接。</li></ul><p id="cc8a" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Netlify还支持自动部署。默认情况下，它是启用的。</p><p id="6c9d" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无论何时运行<code class="fe nv nw nx na b">git push</code>，Heroku和Netlify都将开始自动部署。</p><p id="30c6" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">仅此而已！您刚刚成功部署了一个全栈PERN web应用。</p><h1 id="708f" class="lb lc jg bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">参考</h1><div class="ip iq gp gr ir oz"><a href="https://stackoverflow.com/a/53221996/11885780" rel="noopener  ugc nofollow" target="_blank"><div class="pa ab fo"><div class="pb ab pc cl cj pd"><h2 class="bd jh gy z fp pe fr fs pf fu fw jf bi translated">从子文件夹自动部署heroku</h2><div class="pg l"><h3 class="bd b gy z fp pe fr fs pf fu fw dk translated">2018更新！要使用heroku实现自动化部署，您需要对您想要的github repo拥有管理员权限…</h3></div><div class="ph l"><p class="bd b dl z fp pe fr fs pf fu fw dk translated">stackoverflow.com</p></div></div><div class="pi l"><div class="pj l pk pl pm pi pn ix oz"/></div></div></a></div><p id="0cd7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae jd" href="https://dev.to/stlnick/how-to-deploy-a-full-stack-mern-app-with-heroku-netlify-ncb" rel="noopener ugc nofollow" target="_blank">如何使用Heroku/Netlify开发社区部署全栈MERN应用👩‍💻👨‍💻</a></p></div></div>    
</body>
</html>