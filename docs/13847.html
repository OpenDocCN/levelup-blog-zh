<html>
<head>
<title>4 Different Ways To Upload Images In AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在AWS中上传图像的4种不同方式</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/4-different-ways-to-upload-images-in-aws-6eebe01cef81?source=collection_archive---------6-----------------------#2022-10-11">https://levelup.gitconnected.com/4-different-ways-to-upload-images-in-aws-6eebe01cef81?source=collection_archive---------6-----------------------#2022-10-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/b709055dd744b6e1ee04d75905298a31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZCs5u-9GedlZkHxV"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">马库斯·温克勒在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><div class=""/><div class=""><h2 id="b979" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">有三种方法和AWS可以在本地和/或云端上传图像。</h2></div><p id="a498" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上传图片总是一件麻烦的事情，所以这里是我发现的每种方法的比较，以帮助你决定哪种方法最适合你。</p><p id="fbaf" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们马上开始吧！</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lu"><img src="../Images/b84728299d34b780368671856c3bbf23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*blmeNr2dmtqbobN7"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://unsplash.com/@jainath?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">杰纳特·蓬纳拉</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><h1 id="2448" class="lz ma jj bd mb mc md me mf mg mh mi mj kp mk kq ml ks mm kt mn kv mo kw mp mq bi translated">在服务器上存储图像</h1><p id="9c8d" class="pw-post-body-paragraph ky kz jj la b lb mr kk ld le ms kn lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">存储图像的传统方式。用户上传图像，服务器将其存储在本地磁盘上。</p><h1 id="400a" class="lz ma jj bd mb mc md me mf mg mh mi mj kp mk kq ml ks mm kt mn kv mo kw mp mq bi translated">小文件</h1><h2 id="d98d" class="mw ma jj bd mb mx my dn mf mz na dp mj lh nb nc ml ll nd ne mn lp nf ng mp nh bi translated">赞成的意见</h2><ul class=""><li id="c964" class="ni nj jj la b lb mr le ms lh nk ll nl lp nm lt nn no np nq bi translated">小文件上传一般不会给服务器带来太多负担，存储图像的过程也很简单。</li><li id="62a2" class="ni nj jj la b lb nr le ns lh nt ll nu lp nv lt nn no np nq bi translated">不依赖外部服务，完全控制图像处理和存储。</li></ul><h2 id="f6a7" class="mw ma jj bd mb mx my dn mf mz na dp mj lh nb nc ml ll nd ne mn lp nf ng mp nh bi translated">骗局</h2><ul class=""><li id="ad19" class="ni nj jj la b lb mr le ms lh nk ll nl lp nm lt nn no np nq bi translated">提供图像不是最佳的，因为单个服务器存储它们；如果不使用内部内容交付网络(CDN ),传输速度将取决于服务器带宽和位置。</li><li id="ade2" class="ni nj jj la b lb nr le ns lh nt ll nu lp nv lt nn no np nq bi translated">这种方法也为我们的系统创建了一个单点故障，因此它可能不是一个非常可伸缩的解决方案。</li></ul><p id="2c51" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，这是一个很好的起步方法，适用于规模不大的小型和本地项目。</p><h1 id="85f8" class="lz ma jj bd mb mc md me mf mg mh mi mj kp mk kq ml ks mm kt mn kv mo kw mp mq bi translated">大型文件</h1><p id="8cf6" class="pw-post-body-paragraph ky kz jj la b lb mr kk ld le ms kn lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">大文件通常会产生更多的问题，我不推荐这种存储100MB以上文件的方法。</p><h2 id="2127" class="mw ma jj bd mb mx my dn mf mz na dp mj lh nb nc ml ll nd ne mn lp nf ng mp nh bi translated">赞成的意见</h2><p id="7e9e" class="pw-post-body-paragraph ky kz jj la b lb mr kk ld le ms kn lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">我能想到的唯一好处是对您数据的完全访问和存储控制。在存储敏感数据时，控制可能会有所帮助，尽管如果处理得当，这可以很容易地在云中得到保护。</p><h2 id="f6c1" class="mw ma jj bd mb mx my dn mf mz na dp mj lh nb nc ml ll nd ne mn lp nf ng mp nh bi translated">骗局</h2><p id="8893" class="pw-post-body-paragraph ky kz jj la b lb mr kk ld le ms kn lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">服务器管理和扩展将是一场噩梦。考虑服务器成本、管理开销、故障保护、一般运营成本、备份等</p><p id="b01f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">网络带宽也会受到影响。</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nw"><img src="../Images/d2eaf23692ece7a8827e22db053b56ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*odC1QVrxWmhO6p7M"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated"><a class="ae jg" href="https://unsplash.com/@possessedphotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">附身摄影</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="9079" class="lz ma jj bd mb mc md me mf mg mh mi mj kp mk kq ml ks mm kt mn kv mo kw mp mq bi translated">临时存储在服务器中，进行处理，然后上传到AWS</h1><p id="2939" class="pw-post-body-paragraph ky kz jj la b lb mr kk ld le ms kn lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">云和本地的混合体。用户上传图像。服务器将图像临时存储在磁盘上，执行处理，然后上传到云</p><h1 id="5698" class="lz ma jj bd mb mc md me mf mg mh mi mj kp mk kq ml ks mm kt mn kv mo kw mp mq bi translated"><strong class="ak">小文件</strong></h1><h2 id="c408" class="mw ma jj bd mb mx my dn mf mz na dp mj lh nb nc ml ll nd ne mn lp nf ng mp nh bi translated">赞成的意见</h2><p id="b6af" class="pw-post-body-paragraph ky kz jj la b lb mr kk ld le ms kn lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">这种方法是小文件控制和可伸缩性之间的完美平衡。</p><p id="1cbc" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以控制上传前的图像处理，以及云存储的所有附加优势，如降低成本、可扩展性和轻松的CDN集成。</p><p id="4565" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">可以部署较小的服务器，仅在请求的生命周期内利用映像磁盘空间。(平均几秒钟)。</p><h2 id="e60c" class="mw ma jj bd mb mx my dn mf mz na dp mj lh nb nc ml ll nd ne mn lp nf ng mp nh bi translated">骗局</h2><p id="123d" class="pw-post-body-paragraph ky kz jj la b lb mr kk ld le ms kn lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">您必须小心使用这种方法，因为并发请求的流量峰值会很快消耗服务器的存储和内存。</p><p id="50f3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">流量峰值可能会导致您的请求因设备存储不足而失败。</p><p id="ff72" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过在特定的服务器参数上触发新的实例部署，这个问题可以用AWS中的自动伸缩组(ASG)很好地解决。例如，当服务器的存储或内存(或两者)利用率达到70%时，您可以触发启动新实例。</p><h1 id="ae9d" class="lz ma jj bd mb mc md me mf mg mh mi mj kp mk kq ml ks mm kt mn kv mo kw mp mq bi translated"><strong class="ak">大文件</strong></h1><h2 id="d3d5" class="mw ma jj bd mb mx my dn mf mz na dp mj lh nb nc ml ll nd ne mn lp nf ng mp nh bi translated">赞成的意见</h2><p id="dafe" class="pw-post-body-paragraph ky kz jj la b lb mr kk ld le ms kn lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">上传前完全控制图像处理。</p><h2 id="5614" class="mw ma jj bd mb mx my dn mf mz na dp mj lh nb nc ml ll nd ne mn lp nf ng mp nh bi translated">骗局</h2><p id="1a53" class="pw-post-body-paragraph ky kz jj la b lb mr kk ld le ms kn lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">除非您想自己维护存储、可扩展性和内容交付，否则存储大型图像会成为问题。</p><p id="342c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，如果您不在磁盘上存储图像，服务器的内存将成为瓶颈。因此，内存会很快耗尽。</p><p id="c427" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当接收大量并发请求时，磁盘空间也会成为一个问题，当然，网络带宽也会受到影响。</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nx"><img src="../Images/76b3985caa28b1650b384e94b82d5b05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mWQSfl1VTv69fmGt"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated"><a class="ae jg" href="https://unsplash.com/@sigmund?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">西格蒙德</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><h1 id="216f" class="lz ma jj bd mb mc md me mf mg mh mi mj kp mk kq ml ks mm kt mn kv mo kw mp mq bi translated">直接上传到S3桶</h1><p id="0f21" class="pw-post-body-paragraph ky kz jj la b lb mr kk ld le ms kn lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">无服务器或主要是客户端的方法。</p><p id="a982" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用户上传图像，服务器或无服务器的功能，为图像创建一个预先签署的S3网址，然后从客户端直接上传到S3桶。</p><h1 id="8900" class="lz ma jj bd mb mc md me mf mg mh mi mj kp mk kq ml ks mm kt mn kv mo kw mp mq bi translated"><strong class="ak">小文件</strong></h1><h2 id="ba47" class="mw ma jj bd mb mx my dn mf mz na dp mj lh nb nc ml ll nd ne mn lp nf ng mp nh bi translated"><strong class="ak">优点</strong></h2><p id="ed13" class="pw-post-body-paragraph ky kz jj la b lb mr kk ld le ms kn lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">这种方法的总体优势是无服务器方面。所以我们不需要担心服务器内存或存储限制。</p><p id="0b01" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">直接上传可以显著降低网络负载或完全消除网络负载。(lambda与后端预签名功能)</p><h2 id="aa58" class="mw ma jj bd mb mx my dn mf mz na dp mj lh nb nc ml ll nd ne mn lp nf ng mp nh bi translated"><strong class="ak">缺点</strong></h2><p id="f33b" class="pw-post-body-paragraph ky kz jj la b lb mr kk ld le ms kn lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">这种方法最大的缺点之一是我们失去了对工作流程的控制。例如，我们不再能够在上传图像之前执行处理或优化，因为用户可以直接这样做。</p><p id="3cf4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">点击冷无服务器功能可能导致长达10秒(甚至更长)的等待时间。</p><p id="751a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于小图像，这是不可接受的，并且会损害用户体验，因为使用以前的方法通常需要不到2秒的时间。(对于5MB或更小的图像)</p><h1 id="5ca1" class="lz ma jj bd mb mc md me mf mg mh mi mj kp mk kq ml ks mm kt mn kv mo kw mp mq bi translated"><strong class="ak">大文件</strong></h1><h2 id="2091" class="mw ma jj bd mb mx my dn mf mz na dp mj lh nb nc ml ll nd ne mn lp nf ng mp nh bi translated">赞成的意见</h2><p id="5bad" class="pw-post-body-paragraph ky kz jj la b lb mr kk ld le ms kn lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">这就是这种方法的亮点。即使发生了长时间的lambda等待，用户还是希望大文件需要更长的时间来上传。</p><p id="b74f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">直接上传消除了服务器限制和存储约束，并且服务器可以针对除上传图像或文件之外的实际服务器请求优化使用网络带宽。</p><h2 id="45b7" class="mw ma jj bd mb mx my dn mf mz na dp mj lh nb nc ml ll nd ne mn lp nf ng mp nh bi translated">骗局</h2><p id="5f7b" class="pw-post-body-paragraph ky kz jj la b lb mr kk ld le ms kn lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">这里不多说了除了上传之前我们会失控。然而，在我看来，好处远远大于这个问题。</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/74118f11639ad46d2c9e191fe74c71a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lWhoKYJ_L7WOMDBT"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated"><a class="ae jg" href="https://unsplash.com/@jan_huber?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">简·侯伯</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><h1 id="ab9f" class="lz ma jj bd mb mc md me mf mg mh mi mj kp mk kq ml ks mm kt mn kv mo kw mp mq bi translated">动态方法</h1><p id="6625" class="pw-post-body-paragraph ky kz jj la b lb mr kk ld le ms kn lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">到目前为止，我们已经分析并实现了图片上传的所有三种方法。</p><p id="6fa5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们了解到，根据文件大小、可伸缩性和控制，每种方法都有其优缺点。</p><p id="642d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，为什么不根据具体情况使用每种方法呢？在这种情况下，我认为第一种方法产生的问题比它的价值更多，但是我们可以动态地使用混合和无服务器的方法来获得两个世界的最佳效果。</p><p id="b6ea" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用混合方法(针对小文件)，我们可以保持对小图像和文件的控制和处理，同时受益于云的可扩展性和管理。</p><p id="9b45" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们为用户保持快速的上传速度，因为我们不需要依赖无服务器功能在执行前预热。</p><p id="b9c4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">实施“无服务器”方法(对于大文件)可以消除我们讨论过的所有令人头疼的问题，如带宽、内存和存储限制。</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nx"><img src="../Images/9e961c74f65945d43851bd12b3925ace.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oQIaQal9_y25kvva"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://unsplash.com/@socialcut?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">S O C I A L C U T</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><h1 id="a8e1" class="lz ma jj bd mb mc md me mf mg mh mi mj kp mk kq ml ks mm kt mn kv mo kw mp mq bi translated">奖金(动态CDN处理)</h1><p id="af2d" class="pw-post-body-paragraph ky kz jj la b lb mr kk ld le ms kn lg lh mt lj lk ll mu ln lo lp mv lr ls lt im bi translated">一些服务可以与现有的cdn集成，以提供动态图像转换、优化和调整大小。</p><p id="aec0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我们的例子中，一个名为ImageKit的服务可以很容易地与AWS的CloudFront CDN集成。</p><p id="99b9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这项服务使我们能够重新获得对所有文件大小的控制，至少对图像是如此。如果这是阻碍您实施云方法的唯一问题，那么您很幸运。</p><p id="a33a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这项服务超出了本文的讨论范围，但是我想提到它，这样您就可以了解整体情况并据此决定解决方案，所以我鼓励您对这些类型的服务进行研究。</p><p id="f3aa" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您认为哪种方法最适合您的用例？请在评论区告诉我！</p></div></div>    
</body>
</html>