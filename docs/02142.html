<html>
<head>
<title>EcmaScript vs TypeScript — Private Fields</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">EcmaScript与TypeScript —私有字段</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/ecmascript-vs-typescript-private-fields-640ae37aa162?source=collection_archive---------1-----------------------#2020-02-21">https://levelup.gitconnected.com/ecmascript-vs-typescript-private-fields-640ae37aa162?source=collection_archive---------1-----------------------#2020-02-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="276f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">TypeScript的private关键字和EcmaScript/JavaScript的#字符有什么区别</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/cc780afae2353fe89b7ef06bc678808e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vQZQMKh1xtagv-a6"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@yukato?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Yu Kato </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="e6ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在EcmaScript/JavaScript类中，不能将属性或方法定义为public或private，但幸运的是有一个<a class="ae ky" href="https://github.com/tc39/proposal-class-fields/" rel="noopener ugc nofollow" target="_blank">提案</a>引入了这一特性(阶段3，这意味着未来es版本的候选)。</p><p id="a630" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在TypeScript中，我们已经有了<code class="fe lv lw lx ly b">public</code>和<code class="fe lv lw lx ly b">private</code>关键字。但是现在在最近的3.8版本中，TypeScript已经引入了EcmaScript私有字段。让我们找出不同之处。</p><h2 id="7e55" class="lz ma it bd mb mc md dn me mf mg dp mh li mi mj mk lm ml mm mn lq mo mp mq mr bi translated">角度9</h2><p id="2a2c" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">Angular新版本刚刚发布，但是只支持TypeScript 3.6和3.7。因此，通过使用3.8，它将是实验性的。</p><h1 id="a695" class="mx ma it bd mb my mz na me nb nc nd mh jz ne ka mk kc nf kd mn kf ng kg mq nh bi translated">TypeScript private vs EcmaScript #</h1><p id="e798" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">根据<a class="ae ky" href="https://devblogs.microsoft.com/typescript/announcing-typescript-3-8/#ecmascript-private-fields" rel="noopener ugc nofollow" target="_blank"> TypeScript 3.8公告</a>我们可以说这些是主要的区别:</p><h2 id="1341" class="lz ma it bd mb mc md dn me mf mg dp mh li mi mj mk lm ml mm mn lq mo mp mq mr bi translated">1-语法</h2><pre class="kj kk kl km gt ni ly nj nk aw nl bi"><span id="63b4" class="lz ma it ly b gy nm nn l no np"><strong class="ly iu">// TypeScript<br/></strong>class Person {<br/>  private name;<br/>}</span><span id="c612" class="lz ma it ly b gy nq nn l no np"><strong class="ly iu">// EcmaScript proposal / TypeScript 3.8<br/></strong>class Person2 {<br/>  #name;<br/>}</span></pre><p id="cf48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很多人可能会认为行为是一样的，唯一的区别是语法。但显然不是，否则，我没有写这篇文章。纯粹看语法，我觉得<code class="fe lv lw lx ly b">private</code>看起来比用<code class="fe lv lw lx ly b">#</code>干净很多。在其他所有以类为特征的语言中，他们使用<code class="fe lv lw lx ly b">private</code>关键字。所以，如果你习惯了传统的关键字，看到代码中出现标签可能会有点奇怪。</p><h2 id="e60e" class="lz ma it bd mb mc md dn me mf mg dp mh li mi mj mk lm ml mm mn lq mo mp mq mr bi translated">2 —可访问性</h2><pre class="kj kk kl km gt ni ly nj nk aw nl bi"><span id="0bfb" class="lz ma it ly b gy nm nn l no np"><strong class="ly iu">// TypeScript<br/></strong>class Person {<br/>  private name = 'Jeroen';<br/>}</span><span id="b592" class="lz ma it ly b gy nq nn l no np">new Person().name     // compile error<br/>new Person()['name']  // works, but not 'really' private</span><span id="7308" class="lz ma it ly b gy nq nn l no np"><strong class="ly iu">// EcmaScript proposal / TypeScript 3.8<br/></strong>class Person2 {<br/>  #name = 'Jeroen';<br/>}</span><span id="a906" class="lz ma it ly b gy nq nn l no np">new Person2().#name     // syntax error<br/>new Person2()['#name']  // undefined</span></pre><p id="22ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以通过对比上面的结果，你可以看出新的<code class="fe lv lw lx ly b">#</code>关键词在任何时候都是隐私的(硬隐私)。所以这意味着你不能访问其类之外的属性，只能在内部使用。<code class="fe lv lw lx ly b">private</code>关键字不是，它只是使它不可用，除非你使用<code class="fe lv lw lx ly b">[]</code>括号(软隐私)。</p><h2 id="1673" class="lz ma it bd mb mc md dn me mf mg dp mh li mi mj mk lm ml mm mn lq mo mp mq mr bi translated">3 —性能</h2><p id="9d77" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated"><code class="fe lv lw lx ly b">private</code>属性和方法只是一个和<code class="fe lv lw lx ly b">public</code>一样快的字段。<code class="fe lv lw lx ly b">#</code>字符可能会有较慢的性能，因为它们被编译为<code class="fe lv lw lx ly b"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap" rel="noopener ugc nofollow" target="_blank">WeakMap</a></code>的下级。</p><h2 id="348f" class="lz ma it bd mb mc md dn me mf mg dp mh li mi mj mk lm ml mm mn lq mo mp mq mr bi translated">4 —打电话</h2><pre class="kj kk kl km gt ni ly nj nk aw nl bi"><span id="7f68" class="lz ma it ly b gy nm nn l no np"><strong class="ly iu">// TypeScript<br/></strong>class Person {<br/>  private name = 'Jeroen';</span><span id="27dc" class="lz ma it ly b gy nq nn l no np">  constructor() {<br/>    this.name; <br/>  }<br/>}</span><span id="cea7" class="lz ma it ly b gy nq nn l no np"><strong class="ly iu">// EcmaScript proposal / TypeScript 3.8<br/></strong>class Person2 {<br/>  #name = 'Jeroen';</span><span id="310b" class="lz ma it ly b gy nq nn l no np">  constructor() {<br/>    this.#name; <br/>  }<br/>}</span></pre><p id="e5ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能已经在可访问性(2)的例子中看到过它。但是要使用带有<code class="fe lv lw lx ly b">#</code>字符的属性，需要用hashtag: <code class="fe lv lw lx ly b">#name</code>调用它。专业就是你能立刻看出某样东西是不是私人的。用<code class="fe lv lw lx ly b">private</code>你就这样称呼物业:<code class="fe lv lw lx ly b">name</code>。有些人喜欢在它前面加一个下划线<code class="fe lv lw lx ly b">_name</code>，这样更直观。</p><h2 id="061f" class="lz ma it bd mb mc md dn me mf mg dp mh li mi mj mk lm ml mm mn lq mo mp mq mr bi translated">谁赢了？</h2><p id="2d92" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">我个人认为:</p><ul class=""><li id="b3bb" class="nr ns it lb b lc ld lf lg li nt lm nu lq nv lu nw nx ny nz bi translated"><strong class="lb iu"> 1 —语法</strong>T5】关键字</li><li id="83ea" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu"> 2 —无障碍</strong> <code class="fe lv lw lx ly b">#</code>字符</li><li id="8ed9" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu"> 3 —绩效</strong> <code class="fe lv lw lx ly b">private</code>关键字</li><li id="bf17" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu"> 4 —调用</strong> <code class="fe lv lw lx ly b">private</code>关键字</li></ul><p id="bc69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">人物的易接近性仅仅是因为硬隐私而变得更有意义，所有其他的只是个人喜好。</p></div><div class="ab cl of og hx oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="im in io ip iq"><h2 id="b42f" class="lz ma it bd mb mc md dn me mf mg dp mh li mi mj mk lm ml mm mn lq mo mp mq mr bi translated">感谢您的阅读！我的<a class="ae ky" href="https://github.com/jeroenouw/" rel="noopener ugc nofollow" target="_blank"> Github </a>或<a class="ae ky" href="https://twitter.com/jeroenouw" rel="noopener ugc nofollow" target="_blank"> Twitter </a>。如果你觉得这篇文章有用，请点击👏按钮，并考虑阅读我的其他一些文章:</h2><div class="om on gp gr oo op"><a href="https://medium.com/@jeroenouw/faster-testing-with-baretest-typescript-edition-5db12bd0beac" rel="noopener follow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd iu gy z fp ou fr fs ov fu fw is bi translated">使用barestest-TypeScript Edition进行更快速的测试</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">现在在TypeScript项目中使用这个极简的JavaScript测试运行器</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">medium.com</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd ks op"/></div></div></a></div><div class="om on gp gr oo op"><a href="https://medium.com/better-programming/javascript-prevent-objects-from-being-changed-d1ca82f02975" rel="noopener follow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd iu gy z fp ou fr fs ov fu fw is bi translated">防止对象在JavaScript中被更改</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">冻结、密封、防拉伸、isFrozen、isSealed、isExtendable和const的不变性</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">medium.com</p></div></div><div class="oy l"><div class="pe l pa pb pc oy pd ks op"/></div></div></a></div><div class="om on gp gr oo op"><a rel="noopener  ugc nofollow" target="_blank" href="/upgrade-to-angular-9-within-10-minutes-671c6fd6174b"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd iu gy z fp ou fr fs ov fu fw is bi translated">10分钟内升级到Angular 9</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">现在轻松地将您现有的项目更新到Angular的新版本</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oy l"><div class="pf l pa pb pc oy pd ks op"/></div></div></a></div></div></div>    
</body>
</html>