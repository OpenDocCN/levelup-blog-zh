<html>
<head>
<title>ELI5: Babel and the gang</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ELI5:巴别和那帮人</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/eli5-babel-and-the-gang-e5329313a107?source=collection_archive---------0-----------------------#2018-08-31">https://levelup.gitconnected.com/eli5-babel-and-the-gang-e5329313a107?source=collection_archive---------0-----------------------#2018-08-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="044c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用简单易懂的术语解释巴别塔(ELI5像我5岁一样解释)</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/9b42f1e7b04ac4809f30a292bcae1aba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*VYZ-7la45BwPscBsnC54mw.jpeg"/></div></figure><p id="091a" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">我撒了谎，我今天不会再说谎了。相反，我会试着和<em class="lj"> ELIN(解释得像我是新来的)</em>巴别塔。我只希望当我第一次听说巴别塔的时候，有人能和我进行这样的对话。我想永远都不会太晚:)。我们开始吧。</p><p id="eda9" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir">注意(2018年9月8日)</strong>:文章更新反映了巴别塔v7的一些变化。</p><p id="8557" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir">过去的我(PM) </strong>:阿发克，<code class="fe lk ll lm ln b">create-react-app</code>使用巴别塔。如果我想继续使用所有前沿JS特性，这似乎是一个有趣的工具。我需要什么样的<code class="fe lk ll lm ln b">npm</code>方案来启动项目？</p><p id="de13" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir">现在的我(CM) </strong>:别急先生！首先，我们来说说什么是巴别塔。根据<a class="ae lo" href="https://babeljs.io/" rel="noopener ugc nofollow" target="_blank">文件</a>:</p><blockquote class="lp lq lr"><p id="671f" class="kn ko lj kp b kq kr jr ks kt ku ju kv ls kx ky kz lt lb lc ld lu lf lg lh li ij bi translated">Babel是一个工具链，主要用于将ECMAScript 2015+代码转换为当前和旧版本浏览器或环境中向后兼容的JavaScript版本</p></blockquote><p id="e394" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir"> Past Me (PM): </strong>酷，所以我写的任何东西(TypeScript或者ES6+)都可以转换成浏览器能理解的ES5。太棒了，在我开始之前还有什么我需要知道的吗？</p><p id="1178" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir">现在的我(CM): </strong>是的，几件事。Babel，a.k.a. <code class="fe lk ll lm ln b">@babel/core,</code>本身就是一个外壳，它接受你的代码，然后按原样吐出来。你真正需要的是对你的代码进行处理和转换的<code class="fe lk ll lm ln b">plugins</code>。</p><p id="d896" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir"> PM: </strong>哦，好的。我如何得到<code class="fe lk ll lm ln b">plugins</code>？肯定有人创建了这些<code class="fe lk ll lm ln b">plugins</code>的库，对吗？</p><p id="7e9c" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir"> CM: </strong>没错，在<code class="fe lk ll lm ln b">npm</code>注册表上有很多<code class="fe lk ll lm ln b">plugins</code>，你可以根据你的项目来安装和使用。<code class="fe lk ll lm ln b">Plugins</code>的范围从简单的变换如箭头函数的<a class="ae lo" href="https://babeljs.io/docs/en/babel-plugin-transform-arrow-functions" rel="noopener ugc nofollow" target="_blank">变换</a>到更复杂和精密的<code class="fe lk ll lm ln b">plugins</code>如模块系统的<a class="ae lo" href="http://@babel/plugin-transform-modules-systemjs" rel="noopener ugc nofollow" target="_blank">变换</a>。</p><p id="432a" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">您需要确定您将需要的<code class="fe lk ll lm ln b">plugins</code>，并将它们作为<code class="fe lk ll lm ln b">devDependency</code>导入到您的项目中。</p><p id="9676" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir"> PM: </strong>所以作为<code class="fe lk ll lm ln b">devDependency</code>导入就足以让我的应用程序按预期工作了？</p><p id="255e" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir"> CM: </strong>是的。差不多了。您需要进一步告诉<code class="fe lk ll lm ln b">babel</code>您希望它挑选某些<code class="fe lk ll lm ln b">plugins</code>并将其应用到您的代码中。最简单也是推荐的方法是使用<code class="fe lk ll lm ln b">.babelrc</code>文件，可以在项目的根目录下创建，并在其中添加<code class="fe lk ll lm ln b">plugins</code>数组。</p><pre class="kg kh ki kj gt lv ln lw lx aw ly bi"><span id="5ba8" class="lz ma iq ln b gy mb mc l md me">{ <br/>    "plugins": ["@babel/plugin-transform-arrow-functions"] <br/>}</span></pre><p id="36e9" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">或者，您可以创建并添加您的自定义插件，并选择性地向其传递附加参数。</p><pre class="kg kh ki kj gt lv ln lw lx aw ly bi"><span id="c1a2" class="lz ma iq ln b gy mb mc l md me">{ <br/>    "plugins": [<br/>        ["name", {<br/>           "option1": "value1",<br/>           "option2": "value2"<br/>        }]<br/>    ] <br/>}</span></pre><p id="ce59" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">此外，不要忘记，您需要将babel本身包含在您的项目中。如果你使用webpack，你可以使用babel-loader，它可以通过规则应用<a class="ae lo" href="https://github.com/babel/babel-loader#usage" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="6200" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">PM: 尽管这听起来并不容易。我是否必须根据我想要使用的ES6+或TypeScript特性来添加这些<code class="fe lk ll lm ln b">plugins</code>中的每一个？</p><p id="9b92" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir"> CM: </strong>绝对不行！所以才有了<code class="fe lk ll lm ln b">presets</code>。开发者不应该为每个项目都列出插件列表。只需为您的项目使用最合理的<code class="fe lk ll lm ln b">preset</code>，并根据需要添加额外的<code class="fe lk ll lm ln b">plugins</code>或<code class="fe lk ll lm ln b">presets</code>。目前，只有少数<code class="fe lk ll lm ln b">presets</code>得到官方支持。虽然有<a class="ae lo" href="https://github.com/babel/babel/tree/master/packages" rel="noopener ugc nofollow" target="_blank">很多可用的插件</a>，但在大多数情况下你不太可能需要它们。</p><p id="49db" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir"> PM: </strong>官方有哪些预置？他们支持React吗？</p><p id="ff32" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">他们肯定会这么做，有四个主要的插件:</p><ol class=""><li id="8b53" class="mf mg iq kp b kq kr kt ku kw mh la mi le mj li mk ml mm mn bi translated"><a class="ae lo" href="https://babeljs.io/docs/en/babel-preset-env" rel="noopener ugc nofollow" target="_blank"> @babel/preset-env </a>:让你的代码兼容最新版本的JavaScript(截至目前为ES2017)。根据需要添加<em class="lj">多孔填料</em>。它可以接受过多的选择来支持你所有的愿望。此外，需要注意的是，v7.x.x的多孔填料不支持实验功能。</li><li id="7e68" class="mf mg iq kp b kq mo kt mp kw mq la mr le ms li mk ml mm mn bi translated"><a class="ae lo" href="https://babeljs.io/docs/en/babel-preset-flow" rel="noopener ugc nofollow" target="_blank"> @babel/preset-flow </a>:如果你在你的项目中使用<a class="ae lo" href="https://flow.org/" rel="noopener ugc nofollow" target="_blank"> flow </a>进行静态类型检查，你可以使用<a class="ae lo" href="https://babeljs.io/docs/plugins/transform-flow-strip-types/" rel="noopener ugc nofollow" target="_blank">@ babel/plugin-transform-flow-strip-types</a>附带的<code class="fe lk ll lm ln b">preset-flow</code>预置，它有助于去掉我们在代码中添加的类型检查。</li><li id="d370" class="mf mg iq kp b kq mo kt mp kw mq la mr le ms li mk ml mm mn bi translated"><a class="ae lo" href="https://babeljs.io/docs/en/babel-preset-react" rel="noopener ugc nofollow" target="_blank"> @babel/preset-react </a>:为您提供所有<a class="ae lo" href="https://babeljs.io/docs/en/babel-preset-react" rel="noopener ugc nofollow" target="_blank"> react特定插件</a>，最重要的一个是将<code class="fe lk ll lm ln b">JSX</code>转化为<code class="fe lk ll lm ln b">JS</code>。</li><li id="f0ce" class="mf mg iq kp b kq mo kt mp kw mq la mr le ms li mk ml mm mn bi translated">@babel/preset-typescript :使用所有必要的<a class="ae lo" href="https://babeljs.io/docs/en/babel-preset-typescript" rel="noopener ugc nofollow" target="_blank">插件将你的TS代码转换成JS。</a></li></ol><p id="cbc5" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">直到v7.x.x Babel还为JS的实验特性提供支持，这些特性在TC39 的<a class="ae lo" href="http://exploringjs.com/es2016-es2017/ch_tc39-process.html#_problem-ecmascript-2015-es6-was-too-large-a-release" rel="noopener ugc nofollow" target="_blank">标准化的<code class="fe lk ll lm ln b">stages</code>中提供。总共有5个阶段，最后一个阶段是特征的标准化。如果您愿意，在<code class="fe lk ll lm ln b">npm</code>中有名称为<code class="fe lk ll lm ln b">@babel/preset-stage-STAGE_NUMBER</code>的<code class="fe lk ll lm ln b">presets</code>，可以根据需要包含在您的项目中。明智地使用它们。</a></p><p id="d1b4" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">自从v7.x.x出现以来，舞台预置已经被弃用，取而代之的是带有<code class="fe lk ll lm ln b">plugin-proposal</code>前缀的显式插件。这样做是为了解决几个挑战，例如在生产中减少使用阶段0实验功能，以及<a class="ae lo" href="https://babeljs.io/blog/2018/07/27/removing-babels-stage-presets" rel="noopener ugc nofollow" target="_blank">更多的</a>。</p><p id="933f" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir"> PM: </strong>爽！最后一个问题——在我的基于create-react-app的应用程序中，我看到使用的巴别塔预置是<code class="fe lk ll lm ln b">react-app</code>。那和<code class="fe lk ll lm ln b">@babel/preset-react</code>有什么不同？</p><p id="4ae9" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir"> CM: </strong>很棒的问题！如果你看一下<code class="fe lk ll lm ln b">create-react-app</code>项目使用的所有插件和包的<a class="ae lo" href="https://github.com/facebook/create-react-app/blob/next/packages/babel-preset-react-app/package.json#L19-L34" rel="noopener ugc nofollow" target="_blank">描述，你会发现它们比相对简单的<code class="fe lk ll lm ln b">@babel/preset-react</code>预置使用了更多。他们结合了他们认为对任何使用<code class="fe lk ll lm ln b">create-react-app</code> CLI构建应用程序的人有用的东西。如果你没有使用CLI，那么你可以自由使用你认为合适的插件和预置。</a></p><p id="430e" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir"> PM: </strong>牛逼！我想我已经准备好开始使用<code class="fe lk ll lm ln b">babel</code>了。谢谢！你现在可以回到未来了。</p><p id="4977" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir"> CM: </strong>万无一失:d .别忘了仔细阅读<a class="ae lo" href="https://babeljs.io/docs/en/usage" rel="noopener ugc nofollow" target="_blank">文档</a> n、<a class="ae lo" href="https://babeljs.io/docs/en/faq" rel="noopener ugc nofollow" target="_blank">FAQ</a>和<a class="ae lo" href="https://babeljs.io/docs/en/caveats" rel="noopener ugc nofollow" target="_blank">了解<code class="fe lk ll lm ln b">babel</code>的注意事项</a>。</p><p id="d8cc" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">要深入了解巴别塔的内部运作，请参考<a class="ae lo" href="https://github.com/jamiebuilds/babel-handbook/blob/master/translations/en/plugin-handbook.md" rel="noopener ugc nofollow" target="_blank">建筑手册</a>。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><p id="dc50" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><em class="lj">如果你喜欢这个博客，一定要为它鼓掌，</em> <a class="ae lo" href="https://medium.com/@kashyap.mukkamala" rel="noopener"> <em class="lj">阅读更多</em> </a> <em class="lj">或者关注我的</em><a class="ae lo" href="https://www.linkedin.com/in/kashyap-mukkamala/" rel="noopener ugc nofollow" target="_blank"><em class="lj">LinkedIn</em></a><em class="lj">。</em></p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://levelup.gitconnected.com"><div class="gh gi na"><img src="../Images/ff5028ba5a0041d2d76d2a155f00f05e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JaoZbi7tTKJ5vL7i2OAYMQ.png"/></div></a></figure><div class="nb nc gp gr nd ne"><a href="https://gitconnected.com/learn/webpack" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd ir gy z fp nj fr fs nk fu fw ip bi translated">学习Webpack -最佳Webpack教程(2019) | gitconnected</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">8大Webpack教程。课程由开发者提交并投票，使您能够找到最好的Webpack…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">gitconnected.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns kl ne"/></div></div></a></div></div></div>    
</body>
</html>