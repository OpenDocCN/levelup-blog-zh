<html>
<head>
<title>React Native: Implementing Browser-Based Authentication using Expoâ€™s AuthSession Component</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Native:ä½¿ç”¨Expoçš„AuthSessionç»„ä»¶å®ç°åŸºäºæµè§ˆå™¨çš„è®¤è¯</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/react-native-implementing-browser-based-authentication-using-expos-authsession-component-ffee25b50ae8?source=collection_archive---------0-----------------------#2018-10-12">https://levelup.gitconnected.com/react-native-implementing-browser-based-authentication-using-expos-authsession-component-ffee25b50ae8?source=collection_archive---------0-----------------------#2018-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/194498d76a1d55d4fdde9e54f7a4ae05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Ve1W3XgzRLvSLRinmiFmA.jpeg"/></div></div></figure><p id="ec6b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™æ˜¯æˆ‘çš„ä¹¦ã€Šååº”æœ¬åœ°çƒ¹é¥ªä¹¦ã€‹çš„æ‘˜å½•ï¼Œç¬¬äºŒç‰ˆï¼Œç”±Packtå‡ºç‰ˆç¤¾å‡ºç‰ˆï¼Œå°†äºä»Šå¹´å†¬å¤©å‡ºç‰ˆã€‚</p><p id="39cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æœ¬æ•™ç¨‹å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨Expoçš„<code class="fe kx ky kz la b">AuthSession</code>ç»„ä»¶åœ¨Reactæœ¬åœ°åº”ç”¨ä¸­å®ç°èº«ä»½éªŒè¯ã€‚æœ‰å…³å¦‚ä½•ä½¿ç”¨Expoå¼€å‘åº”ç”¨ç¨‹åºçš„æ›´å¤šä¿¡æ¯ï¼Œæ‚¨å¯ä»¥é˜…è¯»æˆ‘ä»¥å‰çš„æ–‡ç« ï¼Œ<a class="ae lb" rel="noopener ugc nofollow" target="_blank" href="/expo-vs-react-native-cli-a-guide-to-bootstrapping-new-react-native-apps-6f0fcafee58f"> Expo vs React Native CLI:å¼•å¯¼æ–°React Nativeåº”ç”¨ç¨‹åºçš„æŒ‡å—</a>ã€‚</p><p id="2ac5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe kx ky kz la b">AuthSession</code>å»ºç«‹åœ¨Expoçš„<code class="fe kx ky kz la b">WebBrowser</code>ç»„ä»¶ä¹‹ä¸Šï¼Œè¯¥ç»„ä»¶å¯ç”¨äºé€šè¿‡åµŒå…¥åœ¨åº”ç”¨ç¨‹åºä¸­çš„æµè§ˆå™¨æ‰“å¼€ç½‘ç«™ã€‚å…¸å‹çš„ç™»å½•å·¥ä½œæµåŒ…æ‹¬å››ä¸ªæ­¥éª¤:</p><ol class=""><li id="aaa9" class="lc ld iq ka b kb kc kf kg kj le kn lf kr lg kv lh li lj lk bi translated">ç”¨æˆ·å‘èµ·</li><li id="a7ac" class="lc ld iq ka b kb ll kf lm kj ln kn lo kr lp kv lh li lj lk bi translated">Webæµè§ˆå™¨æ‰“å¼€ç™»å½•é¡µé¢</li><li id="03f7" class="lc ld iq ka b kb ll kf lm kj ln kn lo kr lp kv lh li lj lk bi translated">èº«ä»½éªŒè¯æä¾›ç¨‹åºåœ¨æˆåŠŸç™»å½•æ—¶æä¾›é‡å®šå‘</li><li id="aa29" class="lc ld iq ka b kb ll kf lm kj ln kn lo kr lp kv lh li lj lk bi translated">Reactæœ¬æœºåº”ç”¨ç¨‹åºå¤„ç†é‡å®šå‘</li></ol><p id="271f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨è¿™ä¸ªåº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Spotify APIé€šè¿‡ç”¨æˆ·ç™»å½•è·å–æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„Spotifyå¸æˆ·ä¿¡æ¯ã€‚å‰å¾€<a class="ae lb" href="https://beta.developer.spotify.com/dashboard/applications" rel="noopener ugc nofollow" target="_blank">https://beta.developer.spotify.com/dashboard/applications</a>åˆ›å»ºä¸€ä¸ªæ–°çš„Spotifyå¼€å‘å¸æˆ·(å¦‚æœä½ è¿˜æ²¡æœ‰çš„è¯)å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„Spotifyåº”ç”¨ç¨‹åºã€‚ä½ å¯ä»¥ç»™è¿™ä¸ªåº”ç”¨èµ·ä»»ä½•ä½ å–œæ¬¢çš„åå­—ã€‚ä¸€æ—¦ç”¨Spotifyåˆ›å»ºäº†åº”ç”¨ç¨‹åºï¼Œæ‚¨å°†ä¼šåœ¨åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ä¸­çœ‹åˆ°ä¸€ä¸ª<strong class="ka ir">å®¢æˆ·ç«¯ID </strong>å­—ç¬¦ä¸²ã€‚åœ¨æ„å»ºReactæœ¬æœºåº”ç”¨ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬å°†éœ€è¦è¿™ä¸ªIDã€‚</p><h1 id="da4e" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">åšå¥½å‡†å¤‡</h1><p id="ee93" class="pw-post-body-paragraph jy jz iq ka b kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">æˆ‘ä»¬å°†é€šè¿‡åœ¨Expoä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åºæ¥å¼€å§‹æ„å»ºè¿™ä¸ªé¡¹ç›®ã€‚æˆ‘å°†ä¸ºæˆ‘çš„åº”ç”¨ç¨‹åºä½¿ç”¨åç§°<code class="fe kx ky kz la b">browser-based-auth</code>ã€‚</p><p id="ebb9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é‡å®šå‘URIä¹Ÿéœ€è¦åœ¨æˆ‘ä»¬ä¸Šé¢åˆ›å»ºçš„Spotifyåº”ç”¨ç¨‹åºç™½åå•ã€‚é‡å®šå‘çš„urlåº”è¯¥æ˜¯<a class="ae lb" href="https://auth.expo.io/@YOUR_EXPO_USERNAME/YOUR_APP_SLUG." rel="noopener ugc nofollow" target="_blank">https://auth.expo.io/@YOUR_EXPO_USERNAME/YOUR_APP_SLUG.</a>çš„å½¢å¼ï¼Œå› ä¸ºæˆ‘çš„Expoç”¨æˆ·åæ˜¯<code class="fe kx ky kz la b">warlyware</code>ï¼Œå¹¶ä¸”å› ä¸ºæˆ‘ä»¬æ­£åœ¨æ„å»ºçš„è¿™ä¸ªReactåŸç”Ÿåº”ç”¨ç¨‹åºè¢«å‘½åä¸º<code class="fe kx ky kz la b">browser-based-auth</code>ï¼Œæ‰€ä»¥æˆ‘çš„é‡å®šå‘URIæ˜¯<a class="ae lb" href="https://auth.expo.io/@warlyware/browser-based-auth." rel="noopener ugc nofollow" target="_blank">https://auth.expo.io/@warlyware/browser-based-auth.</a>è¯·åŠ¡å¿…å°†å…¶æ·»åŠ åˆ°Spotifyåº”ç”¨ç¨‹åºè®¾ç½®ä¸­çš„é‡å®šå‘URIsåˆ—è¡¨ã€‚</p><figure class="mu mv mw mx gt jr gh gi paragraph-image"><a href="https://gitconnected.com"><div class="gh gi mt"><img src="../Images/26797da0642875dc5a034a11d5991f56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vLqV3O21wXUs-3CpOK9n9Q.png"/></div></a></figure><h1 id="4d15" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">æ€ä¹ˆåš</h1><p id="d9be" class="pw-post-body-paragraph jy jz iq ka b kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">1.æˆ‘ä»¬å°†ä»æ‰“å¼€Reactæœ¬åœ°é¡¹ç›®æ ¹ç›®å½•ä¸­çš„<code class="fe kx ky kz la b">App.js</code>æ–‡ä»¶å¼€å§‹ã€‚è®©æˆ‘ä»¬åˆ é™¤æ‰€æœ‰çš„æ ·æ¿ä»£ç ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ä¸€èµ·ä»å¤´å¼€å§‹ã€‚ç¬¬ä¸€æ­¥æ˜¯å¯¼å…¥æˆ‘ä»¬å°†ä½¿ç”¨çš„ä¾èµ–é¡¹ã€‚</p><pre class="mu mv mw mx gt my la mz na aw nb bi"><span id="b763" class="nc lr iq la b gy nd ne l nf ng">import React, { Component } from 'react';<br/>import { TouchableOpacity, StyleSheet, Text, View } from 'react-native';<br/>import { AuthSession } from 'expo';<br/>import { FontAwesome } from '@expo/vector-icons';</span></pre><p id="9bce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.è®©æˆ‘ä»¬ä¹Ÿå°†å®¢æˆ·æœºIDå£°æ˜ä¸ºä¸€ä¸ªå¸¸é‡ï¼Œä¾›ä»¥åä½¿ç”¨ã€‚å¤åˆ¶æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„Spotifyåº”ç”¨ç¨‹åºçš„å®¢æˆ·ç«¯IDï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥å°†å…¶ä¿å­˜åœ¨CLIENT_IDå¸¸é‡ä¸­ã€‚</p><pre class="mu mv mw mx gt my la mz na aw nb bi"><span id="8e4b" class="nc lr iq la b gy nd ne l nf ng">const CLIENT_ID = Your-Spotify-App-Client-ID;</span></pre><p id="b453" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3.è®©æˆ‘ä»¬åˆ›å»ºAppç±»å’Œåˆå§‹çš„<code class="fe kx ky kz la b">state</code>ã€‚<code class="fe kx ky kz la b">userInfo</code>å±æ€§å°†ä¿å­˜æˆ‘ä»¬ä»Spotify APIæ”¶åˆ°çš„ç”¨æˆ·ä¿¡æ¯ï¼Œ<code class="fe kx ky kz la b">didError</code>æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºè·Ÿè¸ªç™»å½•æœŸé—´æ˜¯å¦å‘ç”Ÿäº†é”™è¯¯ã€‚</p><pre class="mu mv mw mx gt my la mz na aw nb bi"><span id="bd26" class="nc lr iq la b gy nd ne l nf ng">export default class App extends React.Component {<br/>  state = {<br/>    userInfo: null,<br/>    didError: false<br/>  };</span><span id="5932" class="nc lr iq la b gy nh ne l nf ng">  // Defined in following steps<br/>}</span></pre><p id="93a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">4.æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å®šä¹‰ç”¨æˆ·ç™»å½•Spotifyçš„æ–¹æ³•ã€‚<code class="fe kx ky kz la b">AuthSession</code>ç»„ä»¶çš„<code class="fe kx ky kz la b">getRedirectUrl</code>æ–¹æ³•æä¾›äº†ç™»å½•åè¿”å›ReactåŸç”Ÿåº”ç”¨æ‰€éœ€çš„é‡å®šå‘URLï¼Œè¿™ä¸æˆ‘ä»¬åœ¨Spotifyåº”ç”¨çš„<em class="kw">å‡†å¤‡å°±ç»ª</em>éƒ¨åˆ†ä¿å­˜çš„é‡å®šå‘URIç›¸åŒã€‚ç„¶åï¼Œæˆ‘ä»¬å°†åœ¨ç™»å½•è¯·æ±‚ä¸­ä½¿ç”¨é‡å®šå‘ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<code class="fe kx ky kz la b">AuthSession.startAsync</code>æ–¹æ³•å¯åŠ¨è¯¥è¯·æ±‚ï¼Œå‘Spotifyç«¯ç‚¹ä¼ é€’ä¸€ä¸ªå±æ€§è®¾ç½®ä¸º<code class="fe kx ky kz la b">authUrl</code>çš„optionså¯¹è±¡ï¼Œä»¥ä¾¿é€šè¿‡åº”ç”¨ç¨‹åºæˆæƒç”¨æˆ·æ•°æ®ã€‚åœ¨æœ¬æ•™ç¨‹æœ«å°¾çš„<em class="kw">éƒ¨åˆ†æœ‰æ›´å¤šå…³äºè¿™ä¸ªç½‘å€çš„ä¿¡æ¯ã€‚</em></p><pre class="mu mv mw mx gt my la mz na aw nb bi"><span id="d9ca" class="nc lr iq la b gy nd ne l nf ng">handleSpotifyLogin = async () =&gt; {<br/>  let redirectUrl = AuthSession.getRedirectUrl();<br/>  let results = await AuthSession.startAsync({<br/>    authUrl:<br/>    `<a class="ae lb" href="https://accounts.spotify.com/authorize?client_id=${CLIENT_ID" rel="noopener ugc nofollow" target="_blank">https://accounts.spotify.com/authorize?client_id=${CLIENT_ID</a>}<br/>    &amp;redirect_uri=${encodeURIComponent(redirectUrl)}<br/>    &amp;scope=user-read-email&amp;response_type=token`<br/>  });</span><span id="c422" class="nc lr iq la b gy nh ne l nf ng">// Defined in next step<br/>};</span></pre><p id="5ae7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">5.æˆ‘ä»¬å°†ç‚¹å‡»Spotifyç«¯ç‚¹è¿›è¡Œç”¨æˆ·è®¤è¯çš„ç»“æœä¿å­˜åœ¨æœ¬åœ°å˜é‡<code class="fe kx ky kz la b">results</code>ä¸­ã€‚å¦‚æœresultså¯¹è±¡çš„typeå±æ€§è¿”å›é™¤äº†<code class="fe kx ky kz la b">â€˜successâ€™</code>ä¹‹å¤–çš„ä»»ä½•å†…å®¹ï¼Œé‚£ä¹ˆå°±ä¼šå‘ç”Ÿé”™è¯¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ç›¸åº”åœ°æ›´æ–°stateçš„<code class="fe kx ky kz la b">didError</code>å±æ€§ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»authorizationè·å¾—çš„è®¿é—®ä»¤ç‰Œæ¥è®¿é—®<code class="fe kx ky kz la b">/me</code>ç«¯ç‚¹ï¼Œä»¥è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†æŠŠè¿™äº›ä¿¡æ¯ä¿å­˜åˆ°<code class="fe kx ky kz la b">this.state.userInfo</code>ã€‚</p><pre class="mu mv mw mx gt my la mz na aw nb bi"><span id="c270" class="nc lr iq la b gy nd ne l nf ng">handleSpotifyLogin = async () =&gt; {<br/>  if (results.type !== 'success') {<br/>    this.setState({ didError: true });<br/>  } else {<br/>    const userInfo = await axios.get(`<a class="ae lb" href="https://api.spotify.com/v1/me`" rel="noopener ugc nofollow" target="_blank">https://api.spotify.com/v1/me`</a>, {<br/>      headers: {<br/>        "Authorization": `Bearer ${results.params.access_token}`<br/>      }<br/>    });<br/>    this.setState({ userInfo: userInfo.data });<br/>  }<br/>};</span></pre><p id="3af5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">6.æ—¢ç„¶å·²ç»å®šä¹‰äº†authç›¸å…³çš„æ–¹æ³•ï¼Œè®©æˆ‘ä»¬åˆ›å»º<code class="fe kx ky kz la b">render</code>å‡½æ•°ã€‚æˆ‘ä»¬å°†ä½¿ç”¨<code class="fe kx ky kz la b">FontAwesome</code> Expoå›¾æ ‡åº“æ¥æ˜¾ç¤ºSpotifyå¾½æ ‡ï¼Œæ·»åŠ ä¸€ä¸ªå…è®¸ç”¨æˆ·ç™»å½•çš„æŒ‰é’®ï¼Œå¹¶æ·»åŠ æ ¹æ®<code class="fe kx ky kz la b">this.state.didError</code>çš„å€¼å‘ˆç°é”™è¯¯æˆ–ç”¨æˆ·ä¿¡æ¯çš„æ–¹æ³•ã€‚ä¸€æ—¦åœ¨<code class="fe kx ky kz la b">state</code>çš„<code class="fe kx ky kz la b">userInfo</code>å±æ€§ä¸­ä¿å­˜äº†æ•°æ®ï¼Œæˆ‘ä»¬è¿˜å°†ç¦ç”¨ç™»å½•æŒ‰é’®ã€‚</p><pre class="mu mv mw mx gt my la mz na aw nb bi"><span id="b511" class="nc lr iq la b gy nd ne l nf ng">render() {<br/>  return (<br/>    &lt;View style={styles.container}&gt;<br/>      &lt;FontAwesome<br/>        name="spotify"<br/>        color="#2FD566"<br/>        size={128}<br/>      /&gt;<br/>      &lt;TouchableOpacity<br/>        style={styles.button}<br/>        onPress={this.handleSpotifyLogin}<br/>        disabled={this.state.userInfo ? true : false}<br/>      &gt;<br/>        &lt;Text style={styles.buttonText}&gt;<br/>          Login with Spotify<br/>        &lt;/Text&gt;<br/>      &lt;/TouchableOpacity&gt;<br/>      {this.state.didError ?<br/>        this.displayError() :<br/>        this.displayResults()<br/>      }<br/>    &lt;/View&gt;<br/>  );<br/>}</span></pre><p id="4d1d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">7.æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å®šä¹‰å¤„ç†é”™è¯¯çš„JSXã€‚è¯¥æ¨¡æ¿åªæ˜¯æ˜¾ç¤ºä¸€æ¡ä¸€èˆ¬æ€§çš„é”™è¯¯æ¶ˆæ¯ï¼ŒæŒ‡ç¤ºç”¨æˆ·åº”è¯¥å†è¯•ä¸€æ¬¡ã€‚</p><pre class="mu mv mw mx gt my la mz na aw nb bi"><span id="a832" class="nc lr iq la b gy nd ne l nf ng">displayError = () =&gt; {<br/>  return (<br/>    &lt;View style={styles.userInfo}&gt;<br/>      &lt;Text style={styles.errorText}&gt;<br/>        There was an error, please try again.<br/>      &lt;/Text&gt;<br/>    &lt;/View&gt;<br/>  );<br/>}</span></pre><p id="dba5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">8.<code class="fe kx ky kz la b">displayResults</code>å‡½æ•°å°†æ˜¯ä¸€ä¸ª<code class="fe kx ky kz la b">View</code>ç»„ä»¶ï¼Œå¦‚æœæœ‰userInfoä¿å­˜åˆ°stateï¼Œå®ƒå°†æ˜¾ç¤ºç”¨æˆ·çš„å›¾åƒã€ç”¨æˆ·åå’Œç”µå­é‚®ä»¶åœ°å€ï¼Œå¦åˆ™å°†æç¤ºç”¨æˆ·ç™»å½•ã€‚</p><pre class="mu mv mw mx gt my la mz na aw nb bi"><span id="b2ba" class="nc lr iq la b gy nd ne l nf ng">displayResults = () =&gt; {<br/>  { return this.state.userInfo ? (<br/>    &lt;View style={styles.userInfo}&gt;<br/>      &lt;Image<br/>        style={styles.profileImage}<br/>        source={ {'uri': this.state.userInfo.images[0].url} }<br/>      /&gt;<br/>      &lt;View&gt;<br/>        &lt;Text style={styles.userInfoText}&gt;<br/>          Username:<br/>        &lt;/Text&gt;<br/>        &lt;Text style={styles.userInfoText}&gt;<br/>          {this.state.userInfo.id}<br/>        &lt;/Text&gt;<br/>        &lt;Text style={styles.userInfoText}&gt;<br/>          Email:<br/>        &lt;/Text&gt;<br/>        &lt;Text style={styles.userInfoText}&gt;<br/>          {this.state.userInfo.email}<br/>        &lt;/Text&gt;<br/>      &lt;/View&gt;<br/>    &lt;/View&gt;<br/>  ) : (<br/>    &lt;View style={styles.userInfo}&gt;<br/>      &lt;Text style={styles.userInfoText}&gt;<br/>        Login to Spotify to see user data.<br/>      &lt;/Text&gt;<br/>    &lt;/View&gt;<br/>  )}<br/>}</span></pre><p id="db4b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">9.è¿™ä¸ªé£Ÿè°±çš„æ ·å¼å¾ˆç®€å•ã€‚å®ƒä½¿ç”¨äº†çµæ´»çš„åˆ†æ å¸ƒå±€ï¼Œåº”ç”¨äº†Spotifyçš„é»‘è‰²å’Œç»¿è‰²é…è‰²æ–¹æ¡ˆï¼Œå¹¶å¢åŠ äº†å­—ä½“å¤§å°å’Œè¾¹è·ã€‚</p><pre class="mu mv mw mx gt my la mz na aw nb bi"><span id="404d" class="nc lr iq la b gy nd ne l nf ng">const styles = StyleSheet.create({<br/>  container: {<br/>    flexDirection: 'column',<br/>    backgroundColor: '#000',<br/>    flex: 1,<br/>    alignItems: 'center',<br/>    justifyContent: 'space-evenly',<br/>  },<br/>  button: {<br/>    backgroundColor: '#2FD566',<br/>    padding: 20<br/>  },<br/>  buttonText: {<br/>    color: '#000',<br/>    fontSize: 20<br/>  },<br/>  userInfo: {<br/>    height: 250,<br/>    width: 200,<br/>    alignItems: 'center',<br/>  },<br/>  userInfoText: {<br/>    color: '#fff',<br/>    fontSize: 18<br/>  },<br/>  errorText: {<br/>    color: '#fff',<br/>    fontSize: 18<br/>  },<br/>  profileImage: {<br/>    height: 64,<br/>    width: 64,<br/>    marginBottom: 32<br/>  }<br/>});</span></pre><p id="318f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">10.ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬è¿è¡Œè¯¥åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿç™»å½•Spotifyï¼Œå¹¶çœ‹åˆ°ç”¨äºç™»å½•çš„å¸æˆ·çš„ç›¸å…³å›¾åƒã€ç”¨æˆ·åå’Œç”µå­é‚®ä»¶åœ°å€ï¼</p><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/283a807f38d80bb5497c723736c773b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*U4pEDDoALYYIc6k9.png"/></div></div></figure><h1 id="cfbc" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„</h1><p id="68c7" class="pw-post-body-paragraph jy jz iq ka b kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">åœ¨ç¬¬4æ­¥ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†å¤„ç†Spotifyç™»å½•è¿‡ç¨‹çš„æ–¹æ³•ã€‚<code class="fe kx ky kz la b">AuthSession.startAsync</code>æ–¹æ³•åªéœ€è¦ä¸€ä¸ªç”±Spotifyå¼€å‘è€…æ–‡æ¡£æä¾›çš„<code class="fe kx ky kz la b">authUrl</code>ã€‚æ‰€éœ€çš„å››ä¸ªéƒ¨åˆ†æ˜¯å®¢æˆ·ç«¯IDã€ç”¨äºå¤„ç†æ¥è‡ªSpotifyçš„å“åº”çš„é‡å®šå‘URIã€æŒ‡ç¤ºåº”ç”¨ç¨‹åºè¯·æ±‚çš„ç”¨æˆ·ä¿¡æ¯èŒƒå›´çš„èŒƒå›´å‚æ•°ï¼Œä»¥åŠ<code class="fe kx ky kz la b">token</code>çš„<code class="fe kx ky kz la b">response_type</code>å‚æ•°ã€‚æˆ‘ä»¬åªéœ€è¦æ¥è‡ªç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬è¯·æ±‚äº†ä¸€ä¸ªèŒƒå›´ç±»å‹<code class="fe kx ky kz la b">user-read-email</code>ã€‚æœ‰å…³æ‰€æœ‰å¯ç”¨èŒƒå›´çš„ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ä½äº<a class="ae lb" href="https://beta.developer.spotify.com/documentation/general/guides/scopes/" rel="noopener ugc nofollow" target="_blank">https://beta . developer . Spotify . com/documentation/general/guides/scopes/</a>çš„æ–‡æ¡£ã€‚</p><p id="5861" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨æ­¥éª¤5ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº†Spotifyç™»å½•å¤„ç†ç¨‹åºã€‚å¦‚æœç™»å½•ä¸æˆåŠŸï¼Œæˆ‘ä»¬ç›¸åº”åœ°æ›´æ–°<code class="fe kx ky kz la b">didError</code> onçŠ¶æ€ã€‚å¦‚æœæˆåŠŸäº†ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨è¿™ä¸ªå“åº”æ¥è®¿é—®Spotify APIç«¯ç‚¹ä»¥è·å–ç”¨æˆ·æ•°æ®[<a class="ae lb" href="https://api.spotify.com/v1/me" rel="noopener ugc nofollow" target="_blank">https://api.spotify.com/v1/me</a>]ã€‚æ ¹æ®Spotifyçš„æ–‡æ¡£ï¼Œæˆ‘ä»¬ç”¨<code class="fe kx ky kz la b">Bearer ${results.params.access_token}</code>å®šä¹‰äº†getè¯·æ±‚çš„æˆæƒå¤´æ¥éªŒè¯è¯·æ±‚ã€‚å½“è¿™ä¸ªè¯·æ±‚æˆåŠŸæ—¶ï¼Œæˆ‘ä»¬å°†è¿”å›çš„ç”¨æˆ·æ•°æ®å­˜å‚¨åœ¨<code class="fe kx ky kz la b">userInfo</code>çŠ¶æ€å¯¹è±¡ä¸­ï¼Œè¯¥å¯¹è±¡å°†é‡æ–°å‘ˆç°UIå¹¶æ˜¾ç¤ºç”¨æˆ·çš„ä¿¡æ¯ã€‚</p><p id="7340" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¦æ·±å…¥äº†è§£Spotifyçš„è®¤è¯æµç¨‹ï¼Œæ‚¨å¯ä»¥åœ¨<a class="ae lb" href="https://beta.developer.spotify.com/documentation/general/guides/authorization-guide/" rel="noopener ugc nofollow" target="_blank">https://beta . developer . Spotify . com/documentation/general/guides/authorization-guide/</a>æ‰¾åˆ°è¯¥æŒ‡å—ã€‚</p><p id="2687" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä½ ä¹Ÿå¯ä»¥åœ¨<a class="ae lb" href="https://github.com/warlyware/react-native-cookbook/tree/master/chapter-5/browser-based-auth" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/warlyware/react-native-cookbook/tree/master/chapter-5/browser-based-auth</a>çš„GitHubä¸Šçœ‹çœ‹è¿™ä¸ªæ•™ç¨‹çš„æºä»£ç ã€‚</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="58a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kw">å¦‚æœæ‚¨è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œè¯·èŠ±ç‚¹æ—¶é—´ğŸ‘ ğŸ‘ ğŸ‘ã€‚ä½ ä¹Ÿå¯ä»¥</em> <a class="ae lb" href="https://medium.com/@warlyware" rel="noopener"> <em class="kw">å…³æ³¨æˆ‘</em> </a> <em class="kw">è·å–æ›´å¤šå…³äºReact Nativeã€Vueã€JavaScriptå¼€å‘çš„æ–‡ç« ã€‚</em></p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><figure class="mu mv mw mx gt jr gh gi paragraph-image"><a href="http://levelup.gitconnected.com"><div class="ab gu cl nq"><img src="../Images/a5f9dfbe503d8543c6f72bdbef622101.png" data-original-src="https://miro.medium.com/v2/format:webp/1*E8lHUzxrIT5VDhu7fUS6gg.png"/></div></a></figure><div class="nr ns gp gr nt nu"><a href="https://gitconnected.com/learn/react-native" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd ir gy z fp nz fr fs oa fu fw ip bi translated">å­¦ä¹ React Native -æœ€ä½³React Nativeæ•™ç¨‹(2019) | gitconnected</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">10å¤§ReactåŸç”Ÿæ•™ç¨‹ã€‚è¯¾ç¨‹ç”±å¼€å‘è€…æäº¤å¹¶æŠ•ç¥¨ï¼Œä½¿æ‚¨èƒ½å¤Ÿæ‰¾åˆ°æœ€å¥½çš„â€¦</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">gitconnected.com</p></div></div><div class="od l"><div class="oe l of og oh od oi jw nu"/></div></div></a></div></div></div>    
</body>
</html>