<html>
<head>
<title>My new React workflow with Parcel</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我的新React包裹工作流程</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/my-new-react-workflow-with-parcel-a6fdaaf4846b?source=collection_archive---------11-----------------------#2020-04-03">https://levelup.gitconnected.com/my-new-react-workflow-with-parcel-a6fdaaf4846b?source=collection_archive---------11-----------------------#2020-04-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="adda" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">脱离创建-反应-应用程序，学习捆绑我自己的资产</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/626d945c958fb9a7cb3c5d594d72dca7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CPGVDRng2xLTJSzC5J7cpQ.jpeg"/></div></div></figure><p id="66f2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">大家好👋我希望你在这艰难的时刻能平安无事。由于这种情况，我已经有一段时间没有写任何东西了，但我想为什么不分享一下我的新React工作流，因为有些人可能会觉得它很有趣，所以我们开始吧。</p><p id="f3db" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我几乎总是使用create-react-app作为我的react starter，有时Gatsby或Next.js分别用于静态站点和服务器端渲染，但大多数情况下create-react-app用于我所有的单页面应用程序。然而，正如你们中的一些人可能知道的，create-react-app的内部是使用react-scripts包抽象出来的。这有助于像我这样的初学者轻松入门，而不必担心webpack。但是我很好奇它实际上是如何工作的，并决定从头开始制作一个React应用程序。</p><p id="246a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在学习捆扎机的过程中，我发现了<a class="ae ln" href="https://parceljs.org" rel="noopener ugc nofollow" target="_blank">package</a>，这是一款无需配置的捆扎机，开箱即可工作。这让我非常兴奋，几个步骤之后，我也用React做了一个包，下面是我如何设置它的。</p><p id="7737" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">另外，一定要坚持到最后，看看一个超级简单的方法，开始使用我做的一个小软件包。</p><h1 id="0272" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">步骤0</h1><p id="80c1" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">如果您还没有安装<a class="ae ln" href="https://nodejs.org" rel="noopener ugc nofollow" target="_blank"> node </a>和<a class="ae ln" href="https://npmjs.org" rel="noopener ugc nofollow" target="_blank"> npm </a>，那么请从前面的链接为您的系统下载它们的最新版本。</p><h1 id="ecf5" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">第一步</h1><p id="2597" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">为您的项目创建一个目录，在Windows上我使用了以下命令。我相信你可以把它们翻译到你的操作系统上。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="56a2" class="mq lp iq mm b gy mr ms l mt mu">mkdir react-with-parcel<br/>cd react-with-parcel</span></pre><h1 id="c5c1" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">第二步</h1><p id="5926" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">使用以下命令初始化npm项目并下载依赖项:</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="50d9" class="mq lp iq mm b gy mr ms l mt mu">npm init -y<br/>npm i -D parcel-bundler @babel/core @babel/preset-env @babel/preset-react<br/>npm i react react-dom</span></pre><p id="84d9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如你所见，我们使用<code class="fe mv mw mx mm b">npm init</code>初始化一个npm项目，而<code class="fe mv mw mx mm b">-y</code>标志就在那里，所以它不会问你默认的问题。然后我们安装package-bundler和一些babel包作为开发依赖项(这就是为什么使用了<code class="fe mv mw mx mm b">-D</code>标志)，还有<code class="fe mv mw mx mm b">react</code>和<code class="fe mv mw mx mm b">react-dom</code>作为常规依赖项。我目前仍在使用包裹v1(即包裹-bundler npm包裹而非包裹)。这是因为包裹v2仍在alpha中，还不稳定。然而，一旦它稳定了，它就承诺了一些惊人的特性，比如对jsx的开箱即用支持，所以我们甚至不必配置babel。</p><h1 id="c954" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">第三步</h1><p id="6e92" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">现在我们已经安装了所有的依赖项，我们可以实际创建我们的应用程序了。Parcel的工作原理是以一个HTML文件作为入口点(也可以有多个)，然后用它来捆绑所有的资产。所以让我们创建一个<code class="fe mv mw mx mm b">index.html</code>文件。就我个人而言，我把这个文件放在一个<code class="fe mv mw mx mm b">src</code>目录中，但是如果你愿意，你可以直接把它放在你的项目的根目录中。但是，请确保在以下步骤中更改路径。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="1896" class="mq lp iq mm b gy mr ms l mt mu">&lt;!--The src/index.html file--&gt;</span><span id="d75f" class="mq lp iq mm b gy my ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="UTF-8" /&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;<br/>    &lt;title&gt;Parcel &amp; React&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="root"&gt;&lt;/div&gt;<br/>    &lt;script src="./index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="7261" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如你所见，我们创建了一个id为“root”的<code class="fe mv mw mx mm b">div</code>，然后使用一个脚本标签链接到我们的JavaScript文件。因此，让我们创建JavaScript文件。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="2e94" class="mq lp iq mm b gy mr ms l mt mu">// The src/index.js file</span><span id="320c" class="mq lp iq mm b gy my ms l mt mu">import React from "react";<br/>import ReactDom from "react-dom";<br/>import "./index.css";</span><span id="0b94" class="mq lp iq mm b gy my ms l mt mu">const App = () =&gt; &lt;h1&gt;Hello World&lt;/h1&gt;;</span><span id="5617" class="mq lp iq mm b gy my ms l mt mu">ReactDom.render(&lt;App /&gt;, document.getElementById("root"));</span></pre><p id="fb6a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将文件保持得非常简单，但是您可以非常容易地从您的文件或npm包中导入其他组件和CSS文件。因为我已经进口了”。/index.css”，让我们继续创建该文件:</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="9813" class="mq lp iq mm b gy mr ms l mt mu">/* The src/index.css file */</span><span id="feff" class="mq lp iq mm b gy my ms l mt mu">* {<br/>  margin: 0;<br/>  padding: 0;<br/>  box-sizing: border-box;<br/>}</span><span id="d3a9" class="mq lp iq mm b gy my ms l mt mu">html {<br/>  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,<br/>    Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;<br/>}</span><span id="dfb2" class="mq lp iq mm b gy my ms l mt mu">code {<br/>  font-family: "Courier New", Courier, monospace;<br/>}</span></pre><p id="5356" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们保持它非常基本，只是一些小的重置和系统字体。</p><h1 id="ac52" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">第四步</h1><p id="edcf" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">我们快完成了！现在转到你的<code class="fe mv mw mx mm b">package.json</code>，添加<code class="fe mv mw mx mm b">start</code>和<code class="fe mv mw mx mm b">build</code>脚本。这是您的<code class="fe mv mw mx mm b">package.json</code>现在的样子:</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="5231" class="mq lp iq mm b gy mr ms l mt mu">{<br/>  "name": "react-with-parcel",<br/>  "version": "1.0.0",<br/>  "description": "",<br/>  "main": "index.js",<br/>  "scripts": {<br/>    "start": "parcel src/index.html",<br/>    "build": "parcel build src/index.html"<br/>  },<br/>  "keywords": [],<br/>  "author": "",<br/>  "license": "ISC",<br/>  "dependencies": {<br/>    "react": "^16.13.1",<br/>    "react-dom": "^16.13.1",<br/>  },<br/>  "devDependencies": {<br/>    "@babel/core": "^7.9.0",<br/>    "@babel/preset-env": "^7.9.0",<br/>    "@babel/preset-react": "^7.9.4",<br/>    "parcel-bundler": "^1.12.4"<br/>  }<br/>}</span></pre><p id="faf4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们所做的就是调用parcel并给它我们想要使用的HTML文件。为了构建一个生产构建，我们调用parcel build并再次给它HTML文件。宗地构建将输出到项目中的dist目录。</p><h1 id="13cc" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">你完了</h1><p id="1131" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">只需打开一个终端并运行<code class="fe mv mw mx mm b">npm start</code>，开发服务器应该在<a class="ae ln" href="https://localhost:1234" rel="noopener ugc nofollow" target="_blank"> https://localhost:1234 </a>上启动。惊人的正确！</p><h1 id="b395" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">让这变得更加容易</h1><p id="4bd4" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">因为我希望做更多次，所以我决定做一个小小的npm包来引导我的项目，这样它就像create-react-app一样简单。我终于完成了这个包——我把它叫做<code class="fe mv mw mx mm b">parcreate</code>,现在你可以在你的终端上运行它了。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="8fce" class="mq lp iq mm b gy mr ms l mt mu"># The recommended way: (so that you have the latest version)<br/>npx parcreate my-apps-name</span><span id="2226" class="mq lp iq mm b gy my ms l mt mu"># The old fashioned way:<br/>npm i -g parcreate<br/>parcreate my-apps-name</span></pre><p id="71fd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">创建<code class="fe mv mw mx mm b">parcreate</code>非常有趣，我将很快添加更多带有附加功能的模板，比如<code class="fe mv mw mx mm b">scss</code>，所以请保持关注。</p><p id="90d5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以在这里找到github repo for parcreate <a class="ae ln" href="https://github.com/kartiknair/parcreate" rel="noopener ugc nofollow" target="_blank">，如果你在运行它时遇到任何问题，请告诉我，因为我只在windows上测试过它。感谢大家阅读我的发现&amp;确保安全。再见！</a></p><p id="2bad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">又及:我正努力在社交媒体上更加活跃&amp;认识更多的人，所以请在我的推特(@nairkartik_)上给我留言。</p></div></div>    
</body>
</html>