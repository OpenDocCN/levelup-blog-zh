<html>
<head>
<title>Sharing Docker Images Without Docker Hub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在没有Docker Hub的情况下共享Docker图像</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/sharing-docker-images-without-dockerhub-6ac3908bee41?source=collection_archive---------13-----------------------#2021-09-14">https://levelup.gitconnected.com/sharing-docker-images-without-dockerhub-6ac3908bee41?source=collection_archive---------13-----------------------#2021-09-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/54cfe50be0d1f08786baa0be818db789.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*NqI5D9LJmjXEXouP1wQMfw.jpeg"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">DockerHub不是为我工作的！</figcaption></figure><p id="d292" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最近我在做一个兼职项目，需要换到另一台笔记本电脑上工作。我的项目需要一个Docker图像，不幸的是，笔记本#2还没有。我去做了一个简单的码头拉，得到了可怕的:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="7682" class="li lj it le b gy lk ll l lm ln">Error response from daemon: Get <a class="ae lo" href="https://registry-1.docker.io/v2/:" rel="noopener ugc nofollow" target="_blank">https://registry-1.docker.io/v2/:</a> EOF</span></pre><p id="4c68" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我尝试了几件事:</p><ul class=""><li id="8920" class="lp lq it kd b ke kf ki kj km lr kq ls ku lt ky lu lv lw lx bi translated">重启Docker桌面</li><li id="3964" class="lp lq it kd b ke ly ki lz km ma kq mb ku mc ky lu lv lw lx bi translated">检查了我的互联网</li><li id="ee47" class="lp lq it kd b ke ly ki lz km ma kq mb ku mc ky lu lv lw lx bi translated">重启对接机</li><li id="b6ea" class="lp lq it kd b ke ly ki lz km ma kq mb ku mc ky lu lv lw lx bi translated">已登录Docker Hub</li></ul><p id="1d83" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">似乎什么都不管用。就在挫败感达到最高点之前，我做了一个快速搜索，看看我是否有任何选择可以完全绕过Docker Hub。我在另一台机器上有这个图像，如果我可以把它上传到别的地方，然后下载到笔记本电脑#2上，会怎么样呢？事实证明这是非常容易做到的。感谢Sanket Meghani和<a class="ae lo" href="https://medium.com/@sanketmeghani/docker-transferring-docker-images-without-registry-2ed50726495f" rel="noopener">他伟大的帖子</a>让我继续下去。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="4979" class="mk lj it bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">码头工人拯救救援</h1><p id="54ad" class="pw-post-body-paragraph kb kc it kd b ke nh kg kh ki ni kk kl km nj ko kp kq nk ks kt ku nl kw kx ky im bi translated">为了避开Docker Hub，我的计划是将图像保存为某种格式，这样我就可以将它上传到GitHub，<em class="nm">将文件大小限制在25MB </em>。幸运的是<code class="fe nn no np le b">docker save</code>在紧要关头出现了。我需要移动的图像是我自己的repo 中的一个<a class="ae lo" href="https://github.com/atkinsonbg/simple-mock-server" rel="noopener ugc nofollow" target="_blank">，一个简单的模拟服务器，用于本地开发或在我的CI/CD管道中与</a><a class="ae lo" href="https://www.testcontainers.org/" rel="noopener ugc nofollow" target="_blank"> TestContainers </a>一起使用。</p><p id="01b6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在Docker Save documentation页面中，Save命令允许您“将一个或多个图像保存到tar归档文件(默认情况下，流传输到STDOUT)”。这听起来很完美，因为我可以毫无问题地上传一个TAR到GitHub。运行该命令非常简单。</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="8c09" class="li lj it le b gy lk ll l lm ln">docker save --output mock-server.tar atkinsonbg/mock-server:0.1</span></pre><p id="3466" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我在我的桌面上运行了这个命令，如果一切顺利，您应该会得到一个命令提示符。</p><figure class="kz la lb lc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nr ns di nt bf nu"><div class="gh gi nq"><img src="../Images/3f4bfc0c6ccf411a4a4dd7015b8d8d9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q4W3f8C0rG6IvEjEGTj5yg.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">docker保存命令</figcaption></figure><p id="a0f1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们可以运行一个简单的带有<code class="fe nn no np le b">grep</code>的<code class="fe nn no np le b">ls</code>命令来确保文件被创建。</p><figure class="kz la lb lc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nr ns di nt bf nu"><div class="gh gi nv"><img src="../Images/22334c514a7263c809a7cffad6beecf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zFozWMMZOOnT0bJhAA6rDw.png"/></div></div></figure><p id="53d0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这太完美了！我的Docker图像现在是一个TAR，我可以在没有Docker Hub的情况下将它移动到任何地方。让我们快速检查一下尺寸…</p><figure class="kz la lb lc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nr ns di nt bf nu"><div class="gh gi nv"><img src="../Images/59868c2eae4894ead1e3276c404182cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bzx__AFI_IPcJD8sZiFY-Q.png"/></div></div></figure><p id="36bd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">呸，63MB！这在GitHub上是行不通的，我们需要把这个拉上拉链。幸运的是，使用以下命令很容易做到这一点:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="fbcb" class="li lj it le b gy lk ll l lm ln">docker save atkinsonbg/mock-server:0.1 | gzip &gt; mock-server.tar.gz</span></pre><p id="c1c9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们简单地运行没有<code class="fe nn no np le b">--output</code>标志的相同命令，并将结果通过管道发送给<code class="fe nn no np le b">gzip</code>。现在我们可以再次检查尺寸:</p><figure class="kz la lb lc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nr ns di nt bf nu"><div class="gh gi nw"><img src="../Images/6ff0e4a97cd78d01f270720d6cb8f42a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7P__0Ja43yyVdmWQXMrA6Q.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">用gzip保存命令</figcaption></figure><p id="cf16" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对，24MB！我们不仅可以上传到GitHub，还可以通过Gmail发送邮件！</p><h1 id="c128" class="mk lj it bd ml mm nx mo mp mq ny ms mt mu nz mw mx my oa na nb nc ob ne nf ng bi translated"><strong class="ak">“码头装卸”包装完毕</strong></h1><p id="382b" class="pw-post-body-paragraph kb kc it kd b ke nh kg kh ki ni kk kl km nj ko kp kq nk ks kt ku nl kw kx ky im bi translated">现在我们已经压缩了我们的图像，我们可以将它移动到我们需要发送它的任何地方。一旦它到达目的地，我们可以运行一个<code class="fe nn no np le b">docker load</code>命令来导入它:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="50e8" class="li lj it le b gy lk ll l lm ln">docker load --input mock-server.tar.gz</span></pre><p id="4184" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果一切顺利，我们会收到一条确认消息:</p><figure class="kz la lb lc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nr ns di nt bf nu"><div class="gh gi nw"><img src="../Images/fde6a0c10878c7beb6dfb054158ca3a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yp_5xplrYdDFp0zs1yN24A.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">Docker图像已加载</figcaption></figure><h1 id="7720" class="mk lj it bd ml mm nx mo mp mq ny ms mt mu nz mw mx my oa na nb nc ob ne nf ng bi translated">包扎</h1><p id="3bea" class="pw-post-body-paragraph kb kc it kd b ke nh kg kh ki ni kk kl km nj ko kp kq nk ks kt ku nl kw kx ky im bi translated">这篇文章有几个要点。首先，我的图像并没有那么大，所以即使进行了压缩，你可能仍然无法将你的图像上传到GitHub。然而，Google Drive也是一个不错的选择。随着Docker的未来悬而未决，为了以防万一，也许值得把你特别热爱的任何东西都存起来。</p><h2 id="28e8" class="li lj it bd ml oc od dn mp oe of dp mt km og oh mx kq oi oj nb ku ok ol nf om bi translated">参考资料:</h2><ul class=""><li id="02cb" class="lp lq it kd b ke nh ki ni km on kq oo ku op ky lu lv lw lx bi translated"><a class="ae lo" href="https://docs.docker.com/engine/reference/commandline/save/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/engine/reference/commandline/save/</a></li><li id="df61" class="lp lq it kd b ke ly ki lz km ma kq mb ku mc ky lu lv lw lx bi translated">【https://docs.docker.com/engine/reference/commandline/load/ T2】号</li><li id="5d15" class="lp lq it kd b ke ly ki lz km ma kq mb ku mc ky lu lv lw lx bi translated"><a class="ae lo" href="https://medium.com/@sanketmeghani/docker-transferring-docker-images-without-registry-2ed50726495f" rel="noopener">https://medium . com/@ sanketmeghani/docker-transfering-docker-images-without-registry-2ed 50726495 f</a></li></ul></div></div>    
</body>
</html>