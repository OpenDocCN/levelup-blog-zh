<html>
<head>
<title>JavaScript Problems — Tab Focus State, UTC, String Characters, and More</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript问题—选项卡焦点状态、UTC、字符串字符等等</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-problems-tab-focus-state-utc-string-characters-and-more-fbd1c4bf7950?source=collection_archive---------38-----------------------#2020-06-29">https://levelup.gitconnected.com/javascript-problems-tab-focus-state-utc-string-characters-and-more-fbd1c4bf7950?source=collection_archive---------38-----------------------#2020-06-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/d23332cf7551bbc96f8185dc4e3b6d9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SNKX2SqoxZ7SnRkZ"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">你好，我是尼克🎞上<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">下</a></figcaption></figure><p id="306b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">像任何类型的应用程序一样，当我们编写JavaScript应用程序时，有一些困难的问题需要解决。</p><p id="96a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将研究一些常见JavaScript问题的解决方案。</p><h1 id="c8de" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">检查是否选中了复选框</h1><p id="1193" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用jQuery <code class="fe mh mi mj mk b">attr</code>或<code class="fe mh mi mj mk b">prop</code>方法检查复选框是否被选中。</p><p id="423f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="5080" class="mt lf it mk b gy mu mv l mw mx">$("#checkbox").attr('checked')</span></pre><p id="e666" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="ee3b" class="mt lf it mk b gy mu mv l mw mx">$("#checkbox").prop('checked')</span></pre><p id="8310" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">获取复选框的选中值。</p><p id="5c22" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我们可以使用<code class="fe mh mi mj mk b">is</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="3261" class="mt lf it mk b gy mu mv l mw mx">$("#checkbox").is(':checked')</span></pre><h1 id="8797" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将JavaScript日期转换为UTC</h1><p id="6f72" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">要将JavaScript日期转换成UTC，我们可以使用<code class="fe mh mi mj mk b">toIsoSytring</code>方法来完成。</p><p id="0160" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="dae9" class="mt lf it mk b gy mu mv l mw mx">const isoDate = new Date(2020, 0, 1).toISOString();</span></pre><p id="d917" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们得到<code class="fe mh mi mj mk b">“2020–01–01T08:00:00.000Z”</code>作为<code class="fe mh mi mj mk b">isoDate</code>的值。</p><p id="befa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">Z</code>表示时间为UTC。</p><h1 id="a4f0" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">如何取消设置JavaScript变量</h1><p id="226a" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">delete</code>操作符让我们删除全局变量，因为它是<code class="fe mh mi mj mk b">window</code>的属性。</p><p id="2748" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="53ea" class="mt lf it mk b gy mu mv l mw mx">delete foo;</span></pre><p id="102b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果声明<code class="fe mh mi mj mk b">foo</code>时没有像<code class="fe mh mi mj mk b">let</code>、<code class="fe mh mi mj mk b">var</code>或<code class="fe mh mi mj mk b">const</code>这样的关键字。</p><p id="fb52" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">否则，无法移除。</p><p id="efa8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们只是把它设置为<code class="fe mh mi mj mk b">undefined</code>。</p><h1 id="eb67" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">获取字符串的第一个字符</h1><p id="baea" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用<code class="fe mh mi mj mk b">charAt</code>或括号得到字符串的第一个字符。</p><p id="f031" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="13f8" class="mt lf it mk b gy mu mv l mw mx">const x = 'foo bar';<br/>const letter = x.charAt(0);</span></pre><p id="c3d0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么<code class="fe mh mi mj mk b">letter</code>就会是<code class="fe mh mi mj mk b">'f'</code>。</p><p id="c05b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="ec35" class="mt lf it mk b gy mu mv l mw mx">const x = 'foo bar';<br/>const letter = x[0];</span></pre><p id="7b3f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">得到同样的东西。</p><p id="fd53" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我们可以使用<code class="fe mh mi mj mk b">substring</code>方法。第一个参数是起始索引，它是包含性的，第二个参数是结束索引，它是排他性的。</p><p id="53d7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="2642" class="mt lf it mk b gy mu mv l mw mx">const x = 'foo bar';<br/>const letter = x.substring(0, 1);</span></pre><p id="132d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了得到<code class="fe mh mi mj mk b">'f'</code>。</p><h1 id="e6cc" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">删除文本中的所有空白</h1><p id="d81d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">从字符串中删除所有空格的更简单的方法是使用<code class="fe mh mi mj mk b">replace</code>方法。</p><p id="e0fb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="bf97" class="mt lf it mk b gy mu mv l mw mx">str.replace(/ /g,'')</span></pre><p id="8e6f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将删除<code class="fe mh mi mj mk b">str</code>中的空格字符。<code class="fe mh mi mj mk b">g</code>表示全局，将在整个字符串中搜索空格。</p><p id="ef53" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要删除所有空白字符，我们还可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="5a51" class="mt lf it mk b gy mu mv l mw mx">str.replace(/\s/g,'')</span></pre><p id="cfac" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">删除除空格字符之外的所有空格。</p><h1 id="36c8" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">检测浏览器窗口当前是否处于活动状态</h1><p id="b979" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以监听<code class="fe mh mi mj mk b">visibilitychange</code>事件来检查窗口是否是活动的。</p><p id="7c8c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="55c4" class="mt lf it mk b gy mu mv l mw mx">document.addEventListener("visibilitychange", onchange);</span></pre><p id="c2af" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果页面可见性API不可用，还有jQuery <code class="fe mh mi mj mk b">blur</code>和<code class="fe mh mi mj mk b">focus</code>方法:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="bfa6" class="mt lf it mk b gy mu mv l mw mx">$(window).blur(() =&gt; {<br/>  // ...<br/>});</span><span id="fd1a" class="mt lf it mk b gy my mv l mw mx">$(window).focus(() =&gt; {<br/>  // ...<br/>});</span></pre><p id="e8af" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果窗口不在焦点上，则运行<code class="fe mh mi mj mk b">blur</code>的回调。</p><p id="7d5d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果窗口获得焦点，就会运行<code class="fe mh mi mj mk b">focus</code>的回调函数。</p><h1 id="6411" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">在jQuery中使用正则表达式选择元素</h1><p id="2e56" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用来自<a class="ae kf" href="https://j11y.io/javascript/regex-selector-for-jquery/" rel="noopener ugc nofollow" target="_blank">https://j11y.io/javascript/regex-selector-for-jquery/</a>的jQuery <code class="fe mh mi mj mk b">:regex</code>过滤器来选择一个带有regex的元素。</p><p id="c199" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，使用它，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="b518" class="mt lf it mk b gy mu mv l mw mx">$("div:regex(class, .*foo.*)")</span></pre><p id="2ced" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">选择包含子字符串<code class="fe mh mi mj mk b">foo</code>的类的div。</p><h1 id="3d49" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">检查元素是否包含类</h1><p id="50e9" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">为了检查一个元素是否包含一个类，我们可以使用一个元素的<code class="fe mh mi mj mk b">classList</code>属性来检查它是否包含这个类。</p><p id="6890" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="c3c7" class="mt lf it mk b gy mu mv l mw mx">element.classList.contains('foo');</span></pre><p id="ac19" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将检查元素是否有<code class="fe mh mi mj mk b">foo</code>类。</p><h1 id="7471" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">用jQuery区分鼠标左键和右键点击</h1><p id="8ee6" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">使用jQuery，我们可以通过用<code class="fe mh mi mj mk b">mousedown</code>方法监听<code class="fe mh mi mj mk b">mousedown </code>事件来区分鼠标左键和右键点击。</p><p id="11af" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="4d1b" class="mt lf it mk b gy mu mv l mw mx">$('#element').mousedown(function(event) {<br/>  switch (event.which) {<br/>    case 1:<br/>      console.log('left button');<br/>      break;<br/>    case 2:<br/>      console.log('middle button');<br/>      break;<br/>    case 3:<br/>      console.log('right button.');<br/>      break;<br/>    default:<br/>      console.log('not a  button');<br/>    }<br/>});</span></pre><p id="2acd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们使用鼠标事件对象的<code class="fe mh mi mj mk b">event.which</code>属性来获取被点击的按钮。</p><p id="55fe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">1是左键。2是中间的按钮。3是右边的按钮。</p><h1 id="a57b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用Node.js选择元素</h1><p id="397d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">为了让我们在节点应用程序中选择DOM节点，我们可以使用<code class="fe mh mi mj mk b">jsdom</code>包来完成。</p><p id="9229" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要使用它，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="efb5" class="mt lf it mk b gy mu mv l mw mx">const jsdom = require("jsdom");<br/>const { JSDOM } = jsdom;<br/>const { window } = new JSDOM();<br/>const { document } = (new JSDOM('')).window;</span></pre><p id="7afd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们有由<code class="fe mh mi mj mk b">jsdom</code>包创建的<code class="fe mh mi mj mk b">window</code>和<code class="fe mh mi mj mk b">document</code>对象，而不是使用浏览器。</p><p id="5dad" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是我们可以选择节点，就像在浏览器中一样。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/f5cbeedc83ab63d6e0339afd1b44ad0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1wUkRZligj-Ajhsf"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">桑迪·米勒在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><h1 id="4cac" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="fa87" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以在节点应用中选择DOM节点。</p><p id="bad2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">变量不能被删除，除非它们是全局变量。</p><p id="013e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用页面可见性API来获取浏览器标签或窗口的焦点状态。</p></div></div>    
</body>
</html>