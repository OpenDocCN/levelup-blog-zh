<html>
<head>
<title>How To Create a Blog Inside Your Rails Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Rails应用程序中创建博客</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-create-a-blog-inside-your-rails-application-f805dbf0b6fc?source=collection_archive---------15-----------------------#2020-02-04">https://levelup.gitconnected.com/how-to-create-a-blog-inside-your-rails-application-f805dbf0b6fc?source=collection_archive---------15-----------------------#2020-02-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5c25" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在Ruby on Rails应用程序中定制开发的博客</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a04f056384c090194d15a2872e0df3c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z3D0V_AhydiUylWykz9tJw.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=744077" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae ky" href="https://pixabay.com/users/LaughingRaven-834173/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=744077" rel="noopener ugc nofollow" target="_blank"> Gerhard Lipold </a></figcaption></figure><p id="74da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你有没有一个Ruby on Rails (RoR)应用程序，你想在其中添加博客功能？</p><p id="a326" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">手头有各种选择。例如，有很多<a class="ae ky" href="https://www.ruby-toolbox.com/categories/Blog_Engines" rel="noopener ugc nofollow" target="_blank"> RoR博客引擎</a>可以嵌入(安装)到你的RoR应用中。但是，您也可以选择使用自己的定制编程来构建最基本的功能。</p><p id="a0ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看如何做到这一点。</p><h1 id="0f0e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">帖子内容</h1><p id="4995" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">首先，您可以将文章内容存储在一个<code class="fe ms mt mu mv b">Github</code>私有存储库中。将内容存储在<code class="fe ms mt mu mv b">Github</code> repo上有多种优势:</p><ol class=""><li id="7411" class="mw mx it lb b lc ld lf lg li my lm mz lq na lu nb nc nd ne bi translated">您可以使用<a class="ae ky" href="https://en.wikipedia.org/wiki/Markdown" rel="noopener ugc nofollow" target="_blank"> Markdown </a>来编写内容。Markdown是一种非常友好的编写技术文档或博客的语言。</li><li id="699e" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">你可以依靠<code class="fe ms mt mu mv b">git</code>的版本控制。所以，你可以有不同版本的文章内容。此外，您可以在内容上进行协作，直到您的团队中的所有人同时完成它，并处理“拉”请求。换句话说，在合并到<code class="fe ms mt mu mv b">master</code>分支并准备发布之前，内容正在由您团队的其他成员进行审查。</li><li id="91a1" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><code class="fe ms mt mu mv b">GitHub</code>提供了一个非常友好的API，可以用来轻松获取HTML格式的文档内容。然后，你只需要展示它。</li></ol><h1 id="5ab5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">路线</h1><p id="60de" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">准备好内容是不够的。您必须将其与您的RoR应用程序集成在一起。</p><p id="b7af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">整合从设置必要的路线开始。在应用程序的<code class="fe ms mt mu mv b">config/routes.rb</code>文件中，添加以下路线:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="390e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上述路由允许您发布以下URL:</p><ol class=""><li id="ca90" class="mw mx it lb b lc ld lf lg li my lm mz lq na lu nb nc nd ne bi translated"><code class="fe ms mt mu mv b">https://&lt;your-domain&gt;/blog</code>。这是显示可用博客文章列表的页面。</li><li id="7209" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><code class="fe ms mt mu mv b">https://&lt;your-domain&gt;/blog/:title</code>。这是特定博客文章的页面。</li></ol><h1 id="d15a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">模型</h1><p id="1ce3" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">为了能够列出博客文章并显示博客文章，您必须定义一个表示博客文章的数据模型。因此，在您的数据库中，您使用以下模式结构定义表<code class="fe ms mt mu mv b">blog_posts</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="272e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于上表，需要注意以下几点:</p><ol class=""><li id="5078" class="mw mx it lb b lc ld lf lg li my lm mz lq na lu nb nc nd ne bi translated">它也可能有一个<code class="fe ms mt mu mv b">subtitle</code>，但这是可选的。</li><li id="c69e" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">有一个重要的<code class="fe ms mt mu mv b">state</code>属性接受值<code class="fe ms mt mu mv b">draft</code>或<code class="fe ms mt mu mv b">published</code>。您将在公共页面上显示<code class="fe ms mt mu mv b">published</code>博客文章。</li><li id="7203" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><code class="fe ms mt mu mv b">content_url</code>是一个指向<code class="fe ms mt mu mv b">GitHub</code>文档的URL字符串。</li><li id="52d3" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><code class="fe ms mt mu mv b">image_path</code>指向一个图像，它将被用作博客文章页面标题的背景图像。</li><li id="b8e5" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><code class="fe ms mt mu mv b">publisher</code>是作者的名字。</li><li id="a875" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><code class="fe ms mt mu mv b">published_at</code>是文章发表的日期和时间。</li></ol><p id="6d7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，你必须定义相应的<code class="fe ms mt mu mv b">ActiveRecord</code>模型。这是在文件<code class="fe ms mt mu mv b">blog_post.rb</code>内的<code class="fe ms mt mu mv b">app/models</code>文件夹内定义的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="44d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的代码:</p><ol class=""><li id="0ec9" class="mw mx it lb b lc ld lf lg li my lm mz lq na lu nb nc nd ne bi translated">通过应用一系列验证来确保模型是有效的。</li><li id="c342" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">使用<code class="fe ms mt mu mv b"><a class="ae ky" href="https://github.com/norman/friendly_id" rel="noopener ugc nofollow" target="_blank">friendly_id</a></code>为博客文章创建SEO友好的公共URL。</li><li id="9b32" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">使用<code class="fe ms mt mu mv b"><a class="ae ky" href="https://github.com/octokit/octokit.rb" rel="noopener ugc nofollow" target="_blank">GitHub API gem</a></code>获取文件内容。</li></ol><h1 id="d2ae" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">控制器</h1><p id="523c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><code class="fe ms mt mu mv b">blog_posts_controller</code>负责<code class="fe ms mt mu mv b">index</code>和<code class="fe ms mt mu mv b">show</code>的动作。</p><h2 id="333d" class="nm lw it bd lx nn no dn mb np nq dp mf li nr ns mh lm nt nu mj lq nv nw ml nx bi translated">索引操作</h2><p id="35be" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这个<code class="fe ms mt mu mv b">index</code>动作很简单:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="fc6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它实例化了一个变量<code class="fe ms mt mu mv b">@blog_posts</code>。它保存了一个分页查询，该查询按照发布日期的降序获取<code class="fe ms mt mu mv b">published</code>的博客文章。</p><h2 id="8e5b" class="nm lw it bd lx nn no dn mb np nq dp mf li nr ns mh lm nt nu mj lq nv nw ml nx bi translated">显示动作</h2><p id="73be" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这个<code class="fe ms mt mu mv b">show</code>动作也很简单:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="8929" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它通过<code class="fe ms mt mu mv b">title</code>查找请求的博客文章。</p><h1 id="6fc9" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">视图</h1><p id="236c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">你必须有两个与博客文章相关的视图，一个用于列出所有博客文章的<code class="fe ms mt mu mv b">index</code>动作。另一个用于显示特定博客文章内容的<code class="fe ms mt mu mv b">show</code>动作。</p><h2 id="ad60" class="nm lw it bd lx nn no dn mb np nq dp mf li nr ns mh lm nt nu mj lq nv nw ml nx bi translated">布局</h2><p id="487b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">两个视图应该使用相同的布局。你可以调用这个布局<code class="fe ms mt mu mv b">blog</code>，它应该存储在<code class="fe ms mt mu mv b">app/views/layouts</code>文件夹中(文件:<code class="fe ms mt mu mv b">blog.html.haml</code>)。<br/>基本上，对于布局你也可以从<a class="ae ky" href="http://blackrockdigital.github.io/startbootstrap-clean-blog/" rel="noopener ugc nofollow" target="_blank">这个</a>中得到一些思路。</p><p id="43b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ms mt mu mv b">blog.html.haml</code>的一个基本例子可以是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><h2 id="c19f" class="nm lw it bd lx nn no dn mb np nq dp mf li nr ns mh lm nt nu mj lq nv nw ml nx bi translated">索引视图</h2><p id="866c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这个视图依赖于上面的布局，基本上遍历了<code class="fe ms mt mu mv b">@blog_posts</code>实例变量，并打印了每一篇博文的摘要细节。</p><p id="43dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是部分代码片段，可以让您了解<code class="fe ms mt mu mv b">index</code>视图应该如何或多或少地编码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><h2 id="2ffa" class="nm lw it bd lx nn no dn mb np nq dp mf li nr ns mh lm nt nu mj lq nv nw ml nx bi translated">显示视图</h2><p id="2e76" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">与<code class="fe ms mt mu mv b">index</code>视图相同，它依赖于布局并打印<code class="fe ms mt mu mv b">@blog_post</code>实例变量的内容。</p><h1 id="9a56" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">迪斯克斯</h1><p id="f94e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">为了让访问者在你的博客文章上留下评论，你可以集成<a class="ae ky" href="https://disqus.com" rel="noopener ugc nofollow" target="_blank"> Disqus </a>。在每个博客文章展示页面的底部，你必须呈现必要的JavaScript代码片段(由Disqus提供)，这样就完成了。</p><h1 id="3dfa" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结束语</h1><p id="e166" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">将博客功能引入您的RoR应用程序可能需要许多不同的技术方法。你可以使用自己的代码，而不是依赖第三方博客引擎。您可以使用的工具有:</p><ol class=""><li id="9722" class="mw mx it lb b lc ld lf lg li my lm mz lq na lu nb nc nd ne bi translated"><code class="fe ms mt mu mv b">GitHub</code>存储博文内容的私有回购。</li><li id="aa8c" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><a class="ae ky" href="https://github.com/octokit/octokit.rb" rel="noopener ugc nofollow" target="_blank"> GitHub API Octokit gem </a>使用Ruby访问<code class="fe ms mt mu mv b">GitHub</code>内容。</li><li id="bcc4" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">一个适合博客帖子的<a class="ae ky" href="http://blackrockdigital.github.io/startbootstrap-clean-blog/" rel="noopener ugc nofollow" target="_blank"> Twitter自举布局</a>。</li><li id="2a8d" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">集成用户对你的博客文章发表评论的能力。</li></ol><h1 id="35cc" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">您的反馈</h1><p id="3e5f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">你能告诉我们你是如何将博客与你的RoR应用整合在一起的吗？我们很高兴在这里听到您的评论。</p><p id="36e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我知道你的想法。我喜欢向你学习。</p></div></div>    
</body>
</html>