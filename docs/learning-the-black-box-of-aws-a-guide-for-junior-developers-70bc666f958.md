# 学习 AWS 的黑盒——初级开发人员指南

> 原文：<https://levelup.gitconnected.com/learning-the-black-box-of-aws-a-guide-for-junior-developers-70bc666f958>

![](img/9dbd8b9927f17bcc5327ff35ed36ba2a.png)

劳拉·乔伊特在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

因为我是一名初出茅庐的软件工程师，之前没有接触过这个行业，所以在我职业生涯的前六个月，学习曲线非常陡峭。

一年过去了，我认为我已经提高了作为一名软件工程师应该具备的基本知识。然而，仅仅通过监视警报和数据库连接，我就意识到我实际上还有很长的路要走。

*警戒监视怎么会让我怀疑自己的知识？*

我没有详细描述 CloudWatch 是什么，EC2 是什么，尽管它实际上无处不在。在我的脑海中，有一个挥之不去的疑问，那就是我对系统或基础设施了解甚少。

由于我公司的 AWS 认证项目，我偶然发现了它们。花了 20 多个小时的视频，几个小时的时间研究备忘单，做笔记，用 AWS 试用帐户亲自编写代码，以了解运行应用程序的幕后实际发生的事情。

实际上，应用程序是如何运行的。

现在，要全面了解 AWS 服务，没有比准备 AWS 认证更好的方法了。即使是最简单的认证(如果存在的话)也需要长达一个月的强化培训。每个人都很难从繁忙的生活中挤出这么多时间。如果没有首先理解 AWS 是什么，并不是每个人都有动力去做。

以下是我试图揭开一些 AWS 术语/服务的神秘面纱，这些术语/服务即使在技术职业生涯的六个月中没有使用过，也一定会遇到。

# **首先，什么是 AWS？**

它是一个云平台，提供处理软件中基础方面的服务(这是众多事物中的一个)。什么方面？计算、存储、网络、安全等等。根据 AWS 的说法，他们的目标是*为我们消除无差别的繁重任务*。想到 DB 存储或者在云端运行你的应用，最受欢迎的选择是 [AWS](https://aws.amazon.com/) 。它提供 200 多种不同的服务，提供基础设施(IAAS)、软件(SAAS)和平台(PAAS)即服务。

# 可用性区域，看起来很熟悉，它到底是什么？

它们是数据中心的集合，承载着实际的计算、存储、网络和数据库资源，为我们提供服务。每个 AZ 通常通过低延迟连接与一个或多个 AZ 分组在一个地理区域(称为 AWS 区域)内。然而，他们有独立的电力和网络，以尽量减少单个 AZ 故障的影响。低延迟连接确保数据在所有这些 AZ 中复制，以便在一个 AZ 的数据中心发生故障时，您的数据仍然可用。

# 科技界每天都在讨论 EC2 实例，这是怎么回事？

**弹性计算云(EC2)** 实例是可以按需供应的虚拟服务器。我们可以根据我们的需求定制服务器，从操作系统、实例类型和大小，最终归结为我们想要的计算量、内存和网络容量。

我们可以调整这些实例的大小，为要启动的服务器类型准备一个模板，并选择何时启动或关闭它们。

根据 EC2 实例的计算、内存、网络容量，我们可以从[通用、计算优化、存储优化、内存优化、加速计算实例、](https://aws.amazon.com/ec2/instance-types/)等中进行选择。

基于这些实例的定价(这实质上影响了应用的可用性)，我们可以从 [OnDemand、Spot 实例、Savings Plan 和 Reserved 实例](https://aws.amazon.com/ec2/pricing/)中进行选择。

# 注意你的问题！

**简单排队服务(SQS)** 是云中完全托管的排队服务。我们可以让一个服务将消息推送到 SQS，这是云中的一个队列，让另一个服务(消费者)从队列中读取，这样这些服务在延迟方面是隔离和独立的。因此队列*充当消息*的临时存储库。

SQS 删除消费过的信息。此外，并不是所有的 SQS 都是先进先出，因为 SQS 本质上是一个幕后队列列表。这也意味着信息可能被复制，消费者应该为此做好准备。

它并不是严格意义上的实时，因为消费者必须在 SQS 投票获取信息。轮询是我们从队列中检索消息的方式。默认情况下，SQS 使用短轮询，即使正在读取的队列为空，也会返回消息，而不是长轮询，等待队列中的消息到达或直到长轮询超时。

SQS 的消息大小为 1 字节到 256KB，SQS Java 扩展客户端库(仅限)的扩展为 2GB。消息保留时间，即消息在 SQS 保留的时间，可定制为 1 分钟到 14 天，默认为 4 天。

SQS 提供的最受欢迎的队列类型是标准队列和 FIFO 队列。

[**标准队列**](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/standard-queues.html) 允许每秒无限制的事务，同时确保每条消息至少传递一次。但是，它也有自己的局限性，消息可以无序传递，并且可以多次传递。

[**另一方面，FIFO 队列**](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/FIFO-queues.html) 维持消息的排序，但是，被限制为每秒 300 个事务。

还有其他类型的队列，包括[死信队列](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-dead-letter-queues.html)和[延迟队列](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-delay-queues.html)。

# 厌倦了随机通知？但是它们是如何工作的呢？

**简单通知服务(SNS)** 让我们通过短信、网页挂钩、电子邮件、lambdas、SQS、移动通知发送通知。SNS 是*云中高度可用、持久且安全的发布/订阅消息服务，使我们能够分离微服务、无服务器应用和分布式系统*。

众所周知，发布/订阅(publish/sub)是一个消息传递系统，在该系统中，消息发送者或发布者将消息传递到一个主题，该主题是一个通信通道。订阅者或接收者可以加入特定的主题。因此，当一条消息出现在一个主题中时，它会被立即转发给该主题的所有订阅者。

因此，在这种情况下，订户不必轮询消息，一旦消息可用，就会立即发送给他们。

SNS 主题将多个订阅组合在一起，并根据订阅的协议格式化消息。

SQS 和 SNS 都是服务间异步通信的一种方式。

# **对于** NoSQL， **DynamoDB 来说，这是显而易见的！**

DynamoDB 是一个键值对和文档 NoSQL DB，保证在任何规模下一致的读写。NoSQL 不使用关系数据库中使用的表格关系，也不使用 SQL 查询结果。相反，数据是用许多不同的方法存储的，包括面向列的、面向文档的、基于图形的和在键值存储中。

DynamoDB 支持各种[特性](https://aws.amazon.com/dynamodb/features/)，如内存缓存、备份和恢复、完全管理、多区域、多主、内置安全性、耐用性和高可用性。

它支持强一致性读取。每秒的读/写操作是由我们指定的。数据分布在至少三个区域，以确保高可用性。代价是当数据更新时，它会更新到所有副本(跨 AZs ),因此如果从尚未更新的副本中读取数据，数据可能会不一致。您可以通过指定读取一致性来解决这一问题。

**最终一致读取**:读取速度更快，因为在更新副本(到不同的 az)时，仍然可以读取，但不能保证一致性。1 秒钟后，所有副本最终变得一致。

**强一致读取**:当副本被更新，我们试图读取它们时，直到所有副本都一致才会返回。一致性得到保证。读取需要更长的等待时间。

# 使用 AWS Lambda 在云中运行您的函数，但它实际上意味着什么呢？

有了一个 **WS Lambda** ，你可以在不提供服务器的情况下运行你的代码。要运行您的代码，您不需要设置任何虚拟机(如 EC2)。服务器会在需要时自动启动和停止。这些函数本质上是无服务器的(因为您不需要管理服务器),并且按每次调用计费。它们会根据流量自动缩放。Lambda 附带了对 Java、Go、PowerShell、Node.js、C#、Python 和 Ruby 代码的支持。Lambda 现在的内存限制为 10GB，高于自 12 月 20 日以来的 3008MB 的上限。

Lambdas 是云中的代码运行器，通常被用作其他服务的扩展/插件。例如，我们可以定义一个 lambda 来在存储 S3 对象(比如调整图像大小)之前处理它们。

然而，对于 lambdas，有一些相关的限制，限制了它的使用情况。Lambda 的超时时间是 15 分钟，这是 lambda 允许函数运行的时间。此外，lambda 具有冷启动(函数调用开销)，这意味着 Lambda 需要时间来提供和启动服务器、复制代码和运行函数。

将额外的代码和内容放到 lambda 上的一种方式是使用 Lamda 层。它支持压缩包含库和运行时依赖项的档案。Lambda 最多可以有 5 层，但是解压缩后的大小有一个 250MB 的硬限制。

# CloudWatch 正在监视你，呃，你的服务！

**CloudWatch** 收集日志和指标，以及 AWS 云资源和 AWS 托管的应用程序的事件，并将其显示为基础架构的统计数据。

这些统计数据可用于发现见解和创建警报，然后可用于触发自动操作来响应 AWS 资源的变化。

您可以使用 CloudWatch 集中管理从基于云的基础设施中收集的所有数据。例如，当 CPU 使用超过一定水平时，您可以设置 CloudWatch 发送通知或启动一个新实例。

CloudWatch 集成了 70 多种 AWS 服务，如 CloudWatch 日志、CloudWatch 事件、CloudWatch 警报等。

# 是时候谈谈 3 的问题了

**简单存储服务(S3)** ，是云中基于对象的存储服务，专为耐用性和可扩展性而打造。它将数据存储为对象(在称为存储桶的资源中)，而不是文件或块存储。在上传数据(图像、视频、文档等)之前，我们需要在其中一个 AWS 区域创建一个 S3 桶。).S3 拥有无限的存储空间，我们可以在任何时间、任何地点从存储桶中存储、检索和删除数据。

我们可以管理谁有权访问 bucket 及其对象(例如，谁可以创建、删除和检索项目)，以及查看 bucket 及其对象的访问日志。我们还可以选择保存存储桶的 AWS 区域，以减少延迟、节省开支或满足监管要求。

所有 S3 物体通常都有

1.  **键**:该物体的名称
2.  **值**:字节
3.  **元数据**:附加信息
4.  **版本 Id** :对象的版本

对象的大小可以高达 5 TB，但是一次，对于单个文件上传，支持高达 5GB，要上传更多，我们需要多部分文件上传。S3 存储桶可以存储对象或存储其他对象的文件夹。所有 S3 时段名称在所有地区都必须是唯一的。

S3 支持多种类型的存储类别- [标准、智能分层、标准 IA、One Zone、Glacier、Glacier Deep Archive](https://aws.amazon.com/s3/storage-classes/)

默认情况下，所有 S3 存储桶都是私有的。我们可以为 S3 桶设置默认的加密行为，这样所有新对象**在存储到桶中时都会被加密。这些对象使用服务器端加密进行加密，使用亚马逊 S3 管理的密钥(SSE-S3)或存储在 AWS 密钥管理服务(AWS KMS) (SSE-KMS)中的 AWS KMS 密钥。**

S3 支持预签名的 URL，该 URL 授予对对象的临时访问权限，以便上传或下载对象数据。它提供对私有数据的临时访问。

为了防止在 S3 删除文件，我们可以打开版本控制并让 MFA 删除，这需要一个 MFA 代码，以便从存储桶中删除对象。在这种情况下，只有以 root 用户身份登录 AWS 的 bucket 所有者才能删除对象。

# 你是谁，我是谁，那就是我

身份访问管理(IAM)用于管理 AWS 用户和资源的访问。它通过身份验证(登录)和授权(颁发权限)来控制谁可以使用资源。

## 但是为什么需要我呢？

IAM 具有以下优点:

*共享 AWS 账户访问:*不需要共享密码或访问密钥来允许其他人使用你的 AWS 账户。您可以通过 IAM 角色实现这一点。

*单独的权限级别:*不同的用户对不同的资源可以有不同的权限。一些用户可能被授予对 EC2 和 AWS 提供的其他服务的完全访问权。其他用户可以对一些 S3 存储桶进行只读访问，但不能对其他存储桶进行只读访问。

*有了身份联盟，*你可以向在其他地方 *—* 已经有密码的用户授予临时访问权限，例如，在你的公司网络中，或者通过互联网身份提供商*。*

*与* [*众多 AWS 服务集成*](https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_aws-services-that-work-with-iam.html) *:* IAM 与 EC2、CloudTrail、CloudWatch、AutoScaling、Lambda、S3、DynamoDB 等服务集成。

*免费:*如果免费，为什么不用？

## **IAM 术语:**

[**用户**](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users.html) 是 AWS 用户，可以登录控制台或者通过编程与 AWS 资源进行交互。用户由名称和凭证组成。

[**用户组**](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_groups.html) 只是将 IAM 用户分组，并给他们分配共同的权限，所以他们共享该组的权限级别。如管理小组等。

[**角色**](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html) 将权限/策略关联到角色，并将其分配给用户/组。

[**策略**](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_create.html) 是授予用户、组、角色访问服务权限的 JSON 文档。策略附加到 IAM 身份。

# 红外线的一线希望:云的形成？

CloudFormation 提供了一种模板语言，允许通过代码提供 AWS 资源。这意味着我们可以供应我们的 EC2 实例、SQS 队列、数据库等。仅仅通过一段代码。它是 AWS [基础设施代码(IAC)](https://en.wikipedia.org/wiki/Infrastructure_as_code) 工具。对于 CloudFormation，模板是用 JSON 或 YAML 编写的。

## 模板由什么组成:

1.  **模板元数据:**关于模板的附加信息
2.  **描述**:描述模板的用途
3.  **参数**:运行时传递给模板的值(如实例类型)
4.  **映射**:将关键字映射到值的查找表，例如，对于每个区域，图像 id 字符串不同，将区域关键字映射到不同的图像 id
5.  **条件**:资源模板内的 if-else 语句
6.  **转换**:到自定义模板
7.  **资源**:(强制)我们要创建/供应 eg-IAM、EC2 实例的资源
8.  **输出**:返回的值，例如——新服务器的 IP 地址

[AWS 快速入门](https://aws.amazon.com/quickstart/?solutions-all.sort-by=item.additionalFields.sortDate&solutions-all.sort-order=desc&awsf.filter-tech-category=*all&awsf.filter-industry=*all&awsf.filter-content-type=*all)是一组预建的云形成模板。一旦我们创建并部署了云形成模板，就可以使用云形成来更新(构建的资源的)堆栈。如果对现有模板进行了更改并随后发布，则让云结构来调整、删除和重建资源。

这就是基本 AWS 服务的非详尽列表。我希望这篇文章有助于揭示 AWS 这个黑箱，尤其是对初级开发人员。

我建议前往[自由代码营](https://medium.com/u/8b318225c16a?source=post_page-----70bc666f958--------------------------------)并参加 [AWS 认证挑战](https://www.freecodecamp.org/news/awscertified-challenge-free-path-aws-cloud-certifications/)，如果这让你有足够的兴趣/动力为自己赢得一些认证！如果你还没有准备一个月，那么你可以在 [Coursera](https://medium.com/u/99c0fb464c1f?source=post_page-----70bc666f958--------------------------------) 上查看 [AWS 基础课程](https://www.coursera.org/specializations/aws-fundamentals)，按照你的进度学习 AWS。

另外，为你在整篇文章中遇到的糟糕双关语道歉。

再见，奈良！