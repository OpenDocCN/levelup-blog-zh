<html>
<head>
<title>Getting onto Node.js 18 Native Test + Node-Tap for Better Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">进入Node.js 18 Native Test + Node-Tap以获得更好的代码</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/getting-onto-node-js-18-native-test-node-tap-for-better-code-79d86f458a56?source=collection_archive---------3-----------------------#2022-05-27">https://levelup.gitconnected.com/getting-onto-node-js-18-native-test-node-tap-for-better-code-79d86f458a56?source=collection_archive---------3-----------------------#2022-05-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="e358" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">上个月Node.js 18的发布令人激动。有真正伟大的功能添加和一些突出的，如本地全局获取和核心测试运行模块。这两个不仅可以让你免于运行其他外部API库和测试库，而且在将来有一个更清晰和更稳定的维护。了解node官方网站上的时间线有助于避免遗留错误。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/7ace3929a44498f9e95a86bd17a760cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MhxeBzxpN0_c7EdBag4UDQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">节点发布和维护计划</figcaption></figure><h1 id="3507" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">概述</strong></h1><p id="d4f8" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">在这篇文章中，我将花一些时间和你一起讨论如何设置并充分利用<a class="ae mh" href="https://nodejs.org/api/test.html" rel="noopener ugc nofollow" target="_blank"> Node.js 18本地测试</a>。希望它能让你和你的组织受益。</p><p id="978b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Node.js 18的本地测试报告采用<a class="ae mh" href="https://testanything.org/" rel="noopener ugc nofollow" target="_blank"> TAP </a>格式，可以很好地用node-tap to进行增强处理。我们选择使用<a class="ae mh" href="https://node-tap.org/" rel="noopener ugc nofollow" target="_blank">节点点击</a>，这样我们可以更好地可视化报告。此外，<a class="ae mh" href="https://node-tap.org/" rel="noopener ugc nofollow" target="_blank"> node-tap </a>是一个非常活跃的维护库，具有简单的设置和易于遵循的文档设置。</p><h1 id="b092" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">步骤1:设置</strong></h1><p id="a8bb" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">从<a class="ae mh" href="https://nodejs.org/en/about/releases/" rel="noopener ugc nofollow" target="_blank">官方发布页面</a>或使用nvm获取您的node 18副本</p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="a480" class="mn lf it mj b gy mo mp l mq mr">nvm install 18</span></pre><p id="d685" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">用最少的配置创建一个项目目录并初始化一个节点项目。然后安装<a class="ae mh" href="https://node-tap.org/" rel="noopener ugc nofollow" target="_blank"> node-tap </a>，他们的npm页面是<a class="ae mh" href="https://www.npmjs.com/package/tap" rel="noopener ugc nofollow" target="_blank">这里是</a></p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="316e" class="mn lf it mj b gy mo mp l mq mr">mkdir node-18-node-tap &amp;&amp; cd node-18-node-tap</span><span id="d471" class="mn lf it mj b gy ms mp l mq mr">npm init -y</span><span id="7dd2" class="mn lf it mj b gy ms mp l mq mr">npm install tap --save-dev</span></pre><h1 id="56e3" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">步骤2:添加逻辑和测试代码</h1><p id="e409" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">添加逻辑代码，我将给出一个例子` awesome.js '</p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="cdf4" class="mn lf it mj b gy mo mp l mq mr">function add(a, b) {<br/>  return a + b;<br/>}<br/><br/>module.exports = add</span></pre><p id="ba96" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">添加测试代码，我将给出一个例子` awesome.test.js '</p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="924f" class="mn lf it mj b gy mo mp l mq mr">const awesome = require("../awesome");<br/>const test = require("node:test");<br/>const assert = require("assert/strict");<br/><br/>test("synchronous passing test", () =&gt; {<br/>  const sum = awesome(1, 2)<br/>  assert.strictEqual(sum, 3);<br/>});</span></pre><h1 id="7e1e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">步骤3:添加命令</h1><p id="e8ed" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">将该命令添加到package.json中的脚本块</p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="46d5" class="mn lf it mj b gy mo mp l mq mr">{<br/>  ...<br/>  "scripts": {<br/>    "test": "tap"<br/>  }<br/>  ...<br/>}</span></pre><p id="8491" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你想设置脚本做更多的事情，请参考详细的cli选项<a class="ae mh" href="https://node-tap.org/docs/cli/" rel="noopener ugc nofollow" target="_blank">这里</a></p><h1 id="9239" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">第四步:跑步并感受它</h1><p id="3cc9" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">运行by命令，然后您可以看到tap exporting很好地在命令行上显示覆盖率报告</p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="4258" class="mn lf it mj b gy mo mp l mq mr">npm run test</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mt"><img src="../Images/5cdb682ae2d88ec24325516e3da1f9b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jk0vgQ7dc6dSM99I1Bw7AQ.png"/></div></div></figure><h1 id="a7c5" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">第五步:总会有更多</h1><p id="8ad3" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">要了解更多示例，请访问https://nodejs.org/api/test.html</p><h1 id="f060" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">摘要</h1><p id="8246" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">在我的演示体验中，这个测试设置看起来非常好。虽然在现实世界中，升级现有项目的节点版本可能会导致一些严重的兼容性技术工作，特别是代码库很大而且很旧。希望每个人都将有一个顺利和有益的体验与此版本。我正在考虑写下一篇关于内部获取的文章，也许会和一些现有的流行工具进行比较，保持一致！</p><p id="d352" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">呼吁行动</strong></p><p id="cfe3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你觉得这个指南很有帮助，请鼓掌并跟我来。谢谢大家的支持！我也会跟着回去的！</p><p id="18d9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你想支持我，请随时加入medium，通过下面的链接阅读更多我的文章和所有其他优秀的作家:【https://medium.com/@caopengau/membership】T2</p></div></div>    
</body>
</html>