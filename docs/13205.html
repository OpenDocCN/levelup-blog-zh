<html>
<head>
<title>The Core of Kubernetes Security: Clusters</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes安全性的核心:集群</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/the-core-of-kubernetes-security-clusters-5d9a69f1dba4?source=collection_archive---------13-----------------------#2022-08-16">https://levelup.gitconnected.com/the-core-of-kubernetes-security-clusters-5d9a69f1dba4?source=collection_archive---------13-----------------------#2022-08-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/a88375974d04ad881d70ee82a4010d44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_t4K98E05ZBb-Ikg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">马库斯·斯皮斯克在<a class="ae kf" href="https://unsplash.com/s/photos/deploying-code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="25db" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Kubernetes集群是一组节点，最基本的形式是负责Docker等容器化应用程序的操作。容器化应用程序在很大程度上是自给自足的，因为它们将应用程序与其依赖项以及成功运行该应用程序所需的基本服务捆绑在一起。除了比虚拟机更轻量级和更通用之外，它们比虚拟机的资源密集程度低得多。</p><p id="57b8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过这种方式，Kubernetes集群使得应用程序的构建、传输和管理变得更加容易。Kubernetes集群使得容器可以在许多不同的机器和各种不同的环境中同时运行。这意味着您不仅可以在虚拟机上部署容器，还可以在云上部署容器。</p><p id="5af9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">与虚拟机不同，Kubernetes容器不局限于任何特定的操作系统。相反，它们能够在任何环境中运行，并在它们之间共享操作系统。</p><p id="bc85" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Kubernetes管理的集群由作为主节点的单个节点和作为工作节点的多个<strong class="ki iu"/><strong class="ki iu"/>节点组成。保护集群至关重要，因为集群处理运行容器化应用程序的所有节点。这意味着，如果一个群集受到威胁，那么由该群集管理的所有节点也会自动受到威胁。有必要保护群集免受未经授权的访问，并对群集中节点之间的数据流量进行加密。</p><p id="0953" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Kubernetes提供了一些安全指南和工具。Kubernetes准入控制器是Kubernetes安全框架的新成员。这个插件管理和强制集群的使用方式。因此，它可以用来保护集群。</p><h1 id="5c14" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">为什么我们需要保护Kubernetes集群</h1><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mc"><img src="../Images/7e54dfded340f0d4d0e5f0a99462d4af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yUI7XmowTV05J4-O"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://medium.com/@tomerf/so-you-want-to-configure-the-perfect-db-cluster-inside-a-kubernetes-cluster-a4d2c26aca7a" rel="noopener">来源</a></figcaption></figure><p id="fd52" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Kubernetes集群由许多链接在一起的节点或机器组成。这些是为集装箱提供动力的机器。如果集群运行在云上，组成集群的机器就是虚拟机；但是，如果集群在本地运行，服务器可能是物理的。这些机器和服务器可能拥有敏感信息。因此，有必要保护这些细节。</p><p id="dc69" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在大多数情况下，除了至少一个工作节点之外，一个集群至少包含一个主节点。Kubernetes控制平面是工作节点与主节点交互的环境。Kubernetes控制平面由主节点管理，它充当集群的主要控制单元。</p><p id="4d76" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Kubernetes应用程序编程接口(API)由控制平面提供，因此Kubernetes可以管理承载您的应用程序的节点和容器。因此，保护Kubernetes API是绝对必要的，因为可能会有大量敏感信息被传输。</p><p id="47b2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Kubernetes集群中有许多需要保护的附加组件，比如etcd、调度器和控制器管理器。这些组件都必须受到保护。如果这些组件中的任何一个暴露出来，都有可能破坏集群的安全性。因此，不仅需要保护群集，还需要保护其所有组件。</p><h1 id="13f9" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">如何保护Kubernetes中的集群</h1><p id="e71b" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">如前所述，一个集群由许多不同的内容组成。为了保护集群，有必要保护其每个组件以及组件之间的通信。这包括保护kube-api服务器、<a class="ae kf" href="https://www.ibm.com/cloud/learn/etcd" rel="noopener ugc nofollow" target="_blank"> etcd </a>等等。我们来谈谈这个。</p><h1 id="ddfe" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">实施适当的基于角色的访问控制</h1><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mm"><img src="../Images/4b5f8b946c8fc73ad39e1db845354227.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*G6NMeXgcFVomd0Ww"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://www.wallarm.com/what/what-exactly-is-role-based-access-control-rbac" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="889b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">身份验证是Kubernetes的一个关键组件，在访问任何系统资源之前，您首先需要通过身份验证过程来证明您是合法用户。</p><p id="62ff" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Kubernetes通过使用其API服务器来授权API请求，该服务器将所有请求属性与已经设置的策略进行比较。基于这种比较的结果，API服务器要么同意要么拒绝该请求。开始时，默认情况下不授予任何权限。我们能够通过使用一个叫做基于角色的访问控制(<a class="ae kf" href="https://www.upguard.com/blog/rbac" rel="noopener ugc nofollow" target="_blank"> RBAC </a>)的系统来控制谁可以访问组成集群的许多节点和机器。</p><p id="8dd6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">RBAC已经融入了Kubernetes。该组件将传入的用户或组请求与角色中定义的一组权限进行匹配。</p><p id="2839" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了做出许可决定，RBAC授权使用rbac.authorization.k8s.io API组。这使您能够通过Kubernetes API动态配置策略。使用这个简单的命令将使启用RBAC对您来说轻而易举。</p><p id="4ddf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">kube-API server-authorization-mode = Example，RBAC-其他选项-更多选项</p><h1 id="4770" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">限制访问etcd</h1><p id="f10b" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">Kubernetes集群还包括一个组件etcd，这也是必不可少的。etcd是一个保存状态信息和秘密的数据存储器。因此，它需要以不同于其他集群的方式进行保护。如果用户被授予对与API服务器相关联的etcd数据库的写访问权限，这仅仅表明该用户对该集群具有完全的管理权限。</p><p id="2998" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们总是建议您使用强凭据来访问etcd服务器。强证书的一些例子包括使用<a class="ae kf" href="https://medium.com/demystifying-security/understanding-tls-certificates-76bdd5815d95" rel="noopener"> TLS客户端证书</a>的相互授权，这是极难伪造或泄露的。将etcd服务器隔离在仅允许API服务器访问的防火墙之后，并禁止与API服务器的直接连接，是确保etcd安全的最有效措施。</p><h1 id="6a7a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="1d16" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">该集群是构成Kubernetes的众多组件之一。但是，由于它包含一组负责运行容器或机器的节点，这些容器或机器可能会传输或存储敏感数据，因此这些节点必须得到适当的保护。因为集群管理节点，所以它被称为Kubernetes安全系统的核心。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="27af" class="le lf it bd lg lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb bi translated">分级编码</h1><p id="656c" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="434b" class="mz na it ki b kj kk kn ko kr nb kv nc kz nd ld ne nf ng nh bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="32f2" class="mz na it ki b kj ni kn nj kr nk kv nl kz nm ld ne nf ng nh bi translated">📰更多内容请查看<a class="ae kf" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码刊物</a></li><li id="0123" class="mz na it ki b kj ni kn nj kr nk kv nl kz nm ld ne nf ng nh bi translated">🔔关注我们:<a class="ae kf" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a> | <a class="ae kf" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a> | <a class="ae kf" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="4846" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">🚀👉<a class="ae kf" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>