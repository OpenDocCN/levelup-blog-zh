<html>
<head>
<title>Text and Sentiment Analysis of WhatsApp Messages</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">WhatsApp消息的文本和情感分析</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/text-and-sentiment-analysis-of-whatsapp-messages-1eebc983a58?source=collection_archive---------11-----------------------#2020-02-04">https://levelup.gitconnected.com/text-and-sentiment-analysis-of-whatsapp-messages-1eebc983a58?source=collection_archive---------11-----------------------#2020-02-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="7dad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">WhatsApp是全球第三大社交媒体应用。随着用户群的持续增长，每天发送的邮件数量也在增加。这是一个WhatsApp群聊的文本和情感分析，使用的是<a class="ae ko" href="https://www.keaganstokoe.com/post/the-best-resources-for-r-rstudio" rel="noopener ugc nofollow" target="_blank"> R &amp; RStudio </a>中紧凑健壮的<a class="ae ko" href="https://cran.r-project.org/web/packages/rwhatsapp/vignettes/Text_Analysis_using_WhatsApp_data.html" rel="noopener ugc nofollow" target="_blank"> rwhatsapp </a>包。</p><p id="dcb9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此分析的完整脚本可从以下网址获得:</p><div class="kp kq gp gr kr ks"><a href="https://github.com/KeaganStokoe/WhatsApp-Text-Analysis/blob/master/WA_Analysis.R" rel="noopener  ugc nofollow" target="_blank"><div class="kt ab fo"><div class="ku ab kv cl cj kw"><h2 class="bd iu gy z fp kx fr fs ky fu fw is bi translated">KeaganStokoe/WhatsApp-文本分析</h2><div class="kz l"><h3 class="bd b gy z fp kx fr fs ky fu fw dk translated">WhatsApp聊天数据的文本和情感分析。通过以下方式为KeaganStokoe/WhatsApp文本分析开发做出贡献…</h3></div><div class="la l"><p class="bd b dl z fp kx fr fs ky fu fw dk translated">github.com</p></div></div><div class="lb l"><div class="lc l ld le lf lb lg lh ks"/></div></div></a></div><h2 id="40e8" class="li lj it bd lk ll lm dn ln lo lp dp lq kb lr ls lt kf lu lv lw kj lx ly lz ma bi translated">获取聊天数据</h2><p id="7303" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">从Android或iOS应用程序中检索聊天记录非常简单:只需在聊天菜单中选择<code class="fe mg mh mi mj b">More</code>，然后选择<code class="fe mg mh mi mj b">Export chat</code>，将历史记录导出到txt文件中。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi mk"><img src="../Images/d6675b6766498e4060e3ad6b65a3e987.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NS0wKYGfsghiWgkgrC_MPw.png"/></div></div></figure><p id="917b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一旦获得了txt文件，就需要将该文件加载到rwhatsapp包中。这个包可以直接处理txt和zip文件，所以只需提供文件路径名。</p><p id="d0cb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该软件包非常通用，允许您获取大量关于您的消息的信息。这是我过去一年和一群家伙的群聊，数据帧由1556条信息组成。在清理了数据并删除了脏话之后，让我们来看看结果:</p><h2 id="5b22" class="li lj it bd lk ll lm dn ln lo lp dp lq kb lr ls lt kf lu lv lw kj lx ly lz ma bi translated">每天的邮件数</h2><p id="f9e9" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">这使我们能够看到一年中邮件的流行时段。从下面可以看出，消息的最初峰值是在2019年1月，我们搬进这所房子的时候。7月份的下跌恰逢大学放假，我们都在世界各地的不同地方。</p><figure class="ml mm mn mo gt mp"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/4dad161fc335bf2aba6cbf5641072aeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*6EdBbiawbgCZaVVEZdVI6A.png"/></div></figure><h2 id="4265" class="li lj it bd lk ll lm dn ln lo lp dp lq kb lr ls lt kf lu lv lw kj lx ly lz ma bi translated">谁在发送这些信息？</h2><p id="45ef" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">这显示了一年中谁在聊天上发送的消息最多。有些人显然比其他人贡献更多。</p><figure class="ml mm mn mo gt mp"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="gh gi my"><img src="../Images/b5e7409149b7a76117f7e9b488b9a0f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*HCV-wvXUHjweRD2gGmK-ig.png"/></div></figure><h2 id="ced8" class="li lj it bd lk ll lm dn ln lo lp dp lq kb lr ls lt kf lu lv lw kj lx ly lz ma bi translated">最常用的表情符号</h2><p id="2521" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">这段代码出现了一些问题，主要是因为我在Mac OS上运行。在Windows &amp; Linux上，<a class="ae ko" href="https://cran.r-project.org/web/packages/rwhatsapp/vignettes/Text_Analysis_using_WhatsApp_data.html" rel="noopener ugc nofollow" target="_blank"> rwhatsapp包</a>中提供的代码看起来工作得很好。下面的代码使用了额外的库来获取表情数据，尽管所使用的表情的准确性值得怀疑。表情符号的使用量似乎是准确的。</p><figure class="ml mm mn mo gt mp"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi mz"><img src="../Images/3e55a1a60e95a566aa716702888a7401.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vVAE11rBJPV11CW-ic5--g.png"/></div></div></figure><h2 id="4464" class="li lj it bd lk ll lm dn ln lo lp dp lq kb lr ls lt kf lu lv lw kj lx ly lz ma bi translated">作者最常用的单词</h2><p id="6180" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">这显示了每个作者最常用的单词。当没有足够的单词可供分析运行时，输出会失败，例如作者“Richard Larsen”一个更大的数据框架将否定这个问题，尽管看看我们最喜欢的词很有趣。</p><figure class="ml mm mn mo gt mp"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi na"><img src="../Images/c480554c40214063692ac99bc3745576.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vX4diyr5BXGQpsdA9zZkdw.png"/></div></div></figure><h2 id="37ca" class="li lj it bd lk ll lm dn ln lo lp dp lq kb lr ls lt kf lu lv lw kj lx ly lz ma bi translated">每个作者使用的重要词汇</h2><p id="bf4b" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">这段代码找到了在一个作者的消息中常见但在其余消息中不常见的单词。它根据词频-逆文档频率(TF-IDF)分析结果，以确定每个作者使用的重要单词。</p><figure class="ml mm mn mo gt mp"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="gh gi my"><img src="../Images/51ccb488925d350b1f982977f1d6817e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*TPCocIIQEeWIxiQfvaJbdw.png"/></div></figure><h2 id="6cfe" class="li lj it bd lk ll lm dn ln lo lp dp lq kb lr ls lt kf lu lv lw kj lx ly lz ma bi translated">词汇多样性</h2><p id="21cf" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">我们来计算一下词汇多样性。基本上，你只是检查一个作者使用了多少独特的词。</p><figure class="ml mm mn mo gt mp"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="gh gi my"><img src="../Images/9d9c54fb43ee3c2351e1ace7482b181a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*UCWLnIZTLAw1w2MpW7HoyQ.png"/></div></figure><h2 id="388d" class="li lj it bd lk ll lm dn ln lo lp dp lq kb lr ls lt kf lu lv lw kj lx ly lz ma bi translated">约翰的独特话语</h2><p id="497d" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">词汇多样性图表明约翰使用了最独特的词。让我们来看看这些是什么单词:</p><figure class="ml mm mn mo gt mp"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi nb"><img src="../Images/3d8834e95f1c13372625a46e3ffebc58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hzc_L32m6PYkBQMi72u-Cg.png"/></div></div></figure><h1 id="e770" class="nc lj it bd lk nd ne nf ln ng nh ni lq nj nk nl lt nm nn no lw np nq nr lz ns bi translated">情感分析</h1><p id="5c98" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">接下来，我们看看每位作者在这一年中的情绪。这是使用<a class="ae ko" href="http://www2.imm.dtu.dk/pubdb/views/publication_details.php?id=6010" rel="noopener ugc nofollow" target="_blank"> AFINN词典</a>计算的，该词典给单词分配分数，分数在-5和5之间，负分表示消极情绪，正分表示积极情绪。</p><p id="b2fc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由此，我们可以看到每个作者全年的情绪。这与每个作者最常使用的词相关。由此，我们可以看出布莱克、约翰和迈克尔比小组中的其他人更消极。</p><figure class="ml mm mn mo gt mp"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi mz"><img src="../Images/709b0e475e3a270a6508da7b68726c47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vm1hhw_sl_Ych0bPCSH5Pg.png"/></div></div></figure><h2 id="d9dc" class="li lj it bd lk ll lm dn ln lo lp dp lq kb lr ls lt kf lu lv lw kj lx ly lz ma bi translated">字数</h2><p id="6a28" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">这些是聊天中最常用的正面和负面词汇。这是通过使用<a class="ae ko" href="https://www.cs.uic.edu/~liub/FBS/sentiment-analysis.html" rel="noopener ugc nofollow" target="_blank">必应词典</a>计算出来的，必应词典以二进制方式将单词分为积极和消极两类(旁注:“迪克”是理查德的昵称)。结果被用来创建接下来的单词云。</p><figure class="ml mm mn mo gt mp"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi nt"><img src="../Images/415d04e64e72f8ffb7aa7baa4a4fa049.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wSn3vtWRq9Us81o-C5CuzQ.png"/></div></div></figure><figure class="ml mm mn mo gt mp"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi nu"><img src="../Images/a4f91903525e206f702e947335faf5d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FuboJ88kUBQSYRltiux7OA.png"/></div></div></figure></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><p id="4376" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">总之，这是一个有趣的分析，而且当使用你自己的数据进行编译时，这个分析会更加有趣。尽管我相信更大的数据框架将显著提高准确性，但分析的某些部分的准确性仍值得怀疑。</p><p id="4093" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢<a class="ae ko" href="https://cran.r-project.org/web/packages/rwhatsapp/vignettes/Text_Analysis_using_WhatsApp_data.html" rel="noopener ugc nofollow" target="_blank"> rwhatsapp </a>的创造者，感谢<a class="ae ko" href="http://www.tidytextmining.com" rel="noopener ugc nofollow" target="_blank"> Tidy Text Mining </a>一书的作者激发了大部分的分析。</p></div></div>    
</body>
</html>