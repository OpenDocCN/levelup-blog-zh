<html>
<head>
<title>A Guide to Git Rebase with Practical Examples</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Git Rebase指南及实例</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-guide-to-git-rebase-with-practical-examples-2d9e1a3fb560?source=collection_archive---------6-----------------------#2022-06-07">https://levelup.gitconnected.com/a-guide-to-git-rebase-with-practical-examples-2d9e1a3fb560?source=collection_archive---------6-----------------------#2022-06-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="b3ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Git rebase是一个强大的工具，允许开发人员重写历史。此外，它还用于以git merge无法实现的方式更改提交顺序。</p><p id="9633" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">值得一提的是，这个工具不仅仅可以用来改写历史。它还有许多其他用例，例如</p><ol class=""><li id="d6bb" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">重新排序提交</li><li id="fdcc" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">更新提交</li><li id="c2c7" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">删除提交</li></ol><h1 id="0ba8" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">例子</h1><p id="0e18" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">克隆存储库(<a class="ae mc" href="https://github.com/facebook/react" rel="noopener ugc nofollow" target="_blank">https://github.com/facebook/react</a>)—为了避免获取所有提交，我们可以克隆我们示例中的最后10个提交:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="b345" class="mm la iq mi b gy mn mo l mp mq">git clone — depth=100 <a class="ae mc" href="https://github.com/facebook/react" rel="noopener ugc nofollow" target="_blank">https://github.com/facebook/react</a></span></pre><p id="0935" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每一个例子之后，你的历史都会和origin/main不一样。要对齐管路:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="2ca4" class="mm la iq mi b gy mn mo l mp mq">git reset — hard HEAD~10<br/>git clean -df<br/>git pull origin main — rebase</span></pre><h1 id="d296" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">。重新排序</h1><h1 id="ec2e" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">更改提交顺序</h1><p id="8479" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">让我们从一个简单的例子开始。您正在为代码评审准备您的分支。代码没问题，但是提交的顺序看起来不太好，可能只是提交的顺序。</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="c777" class="mm la iq mi b gy mn mo l mp mq">git log # find the commits you want to reorder<br/>git rebase -i HEAD~5 # swap commits<br/>git log # see the changes</span></pre><figure class="md me mf mg gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mr"><img src="../Images/94186542f828b0e387f0f26fd08dae59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cAvFJGZsJUAa-I8j"/></div></div></figure><h1 id="f508" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">避免“合并”提交</h1><p id="fb78" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">当处理一个新的特性分支时，通常在某个时间点它会落后于主分支。因此，我们希望获得所有最近的更改，大部分时间我们只是做git拉套管这个“合并”提交。Github拉请求视图看起来是这样的:</p><figure class="md me mf mg gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mz"><img src="../Images/ebfc9a89825353af786391192ee0c48c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KFNMW0mFOPFtdhwH"/></div></div></figure><p id="b601" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这很好，因为这正是pull所做的，git fetch，就在git merge之后。相反，我们可以使用rebase“git pull—rebase”来避免它。</p><h1 id="beb3" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">更新提交消息</h1><p id="3dfa" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">如果我们想要更新最后的提交消息，我们可以使用git commit-amend来更新它。</p><p id="c998" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当更新引用旧的提交时，最简单的方法是使用交互式rebase。</p><p id="7704" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，找到git sha git日志。</p><figure class="md me mf mg gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi na"><img src="../Images/b25cbaa710814dd4560dab7827612f7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BcHkaXMW4-5JEtQx"/></div></div></figure><p id="b657" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后重定基数</p><p id="3ac1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">git rebase -i 52c434b~并选择了使用“reword”命令提交消息更新。</p><figure class="md me mf mg gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nb"><img src="../Images/131dffd944c8aecde3fa76aa3d6176ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uAm5cI-SuSIQJQj7"/></div></div></figure><p id="f2fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一步是更新提交消息。</p><figure class="md me mf mg gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nc"><img src="../Images/073c3d6ab332f50d5dde1280c2e9688c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r3-CMiAK1HPLbRGe"/></div></div></figure><p id="e55c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">再次使用git log来查看变化</p><figure class="md me mf mg gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mz"><img src="../Images/273489a6155916fe64b0a7470995f3fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_bexlqOjb2SxE1Cu"/></div></div></figure><h1 id="454d" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">添加/更新要提交的文件</h1><p id="7aca" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">与上一节类似，当添加/更新应该添加到最后一次提交的文件时，git commit-amend-no-edit将更改添加到最后一次提交，而不进行任何消息编辑。</p><p id="bde2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当一个更改应该更新历史中的提交时，使用交互式rebase，git rebase -i 52c434b~，并使用edit命令。在修改完所有文件后，使用git commit-a-amend-no-edit。要完成这个过程，请运行git rebase —继续。</p><p id="f9a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">注意</strong> : <em class="nd">在某些情况下，进程会停止并请求解决冲突。</em></p><figure class="md me mf mg gt ms gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/2a0d66f0ae3dfb257602cbc0aaf0f536.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*Xp7dNsAvVvU6SxVI"/></div></figure><h1 id="1bc5" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">删除提交</h1><h1 id="eb69" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">合并两个提交</h1><p id="1441" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">使用squash命令合并两个或更多按顺序出现的提交。</p><figure class="md me mf mg gt ms gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/885c9d71ecd5dbf9337ed01de36361fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*dcizc6E6CwRKMUKR"/></div></figure><h1 id="fa06" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">放弃提交更改</h1><p id="f0ef" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">最后，有时删除错误的提交是唯一的选择。</p><p id="6eb9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从git rebase HEAD~3 -i开始，删除提交行(一个或多个)</p><figure class="md me mf mg gt ms gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/41604ba9b4345a4193a7e25f1ba5c7a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*Yln_YjHbYRHZ0fLP"/></div></figure><h1 id="d75e" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">摘要</h1><p id="78a4" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">Rebasing是一个git命令，它改变分支中的提交顺序。如果您想要将多个提交合并为一个，或者如果您想要在将提交推送到远程存储库之前编辑提交的消息，那么重新设置基础会特别有用。</p><p id="5cfb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当开发新功能或对代码库进行重大更改，然后与团队中的其他人共享时，通常会使用重新基础。这使得每个人都可以看到最新的变化，而不必将他们的工作与你的合并。</p><p id="f502" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">避免重定公共分支，如主分支或长期分支。请记住，推你的rebased分支后就没有回头路了。</p></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><h1 id="20a1" class="kz la iq bd lb lc nn le lf lg no li lj lk np lm ln lo nq lq lr ls nr lu lv lw bi translated">分级编码</h1><p id="7f03" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="d137" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk ns kr ks kt bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="dada" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk ns kr ks kt bi translated">📰查看<a class="ae mc" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">级编码出版物</a>中的更多内容</li><li id="d1ee" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk ns kr ks kt bi translated">🔔关注我们:<a class="ae mc" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a> | <a class="ae mc" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a> | <a class="ae mc" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="0793" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">🚀👉<a class="ae mc" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">加入升级人才集体，找到一份惊艳的工作</strong> </a></p></div></div>    
</body>
</html>