<html>
<head>
<title>My Code Stinks and That’s OK</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我的代码很糟糕，但没关系</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/my-code-stinks-and-thats-ok-6b15118bfdff?source=collection_archive---------11-----------------------#2021-06-01">https://levelup.gitconnected.com/my-code-stinks-and-thats-ok-6b15118bfdff?source=collection_archive---------11-----------------------#2021-06-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fcf7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">慷慨激昂地为“代码味道”辩护，以及为什么技术博客变得疯狂</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/360a6881ecaf8e172bed2577fd9503ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nL4sGn4XEb38WMbg-JAvXA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由Unsplash提供</figcaption></figure><p id="5dde" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们都看了那些文章。你知道我说的那些。<strong class="la iu">那些</strong>的。简单、简化的标题，如“递归不好”或“我们需要停止使用IF/ELSE ”,来自刚刚发现函数式编程的人。看，对事物有不同的看法是好的，包括代码风格，但是有一个从迂腐到教条的界限。老实说，这有点失控了。所以我决定，有人需要站出来捍卫“代码味道”，这是真实的、实际的产品代码如何工作的基本构件。</p><h1 id="ef37" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">If/Else可以</h1><p id="dc6f" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">我已经看到太多的文章鼓吹<code class="fe mr ms mt mu b">if/then </code>语句的邪恶，以及如何总是有更好的方法来做事，比如<code class="fe mr ms mt mu b">switch </code>语句之类的。是的，对某些事情来说，<code class="fe mr ms mt mu b">switch</code>或<code class="fe mr ms mt mu b">select</code>是合适的。例如，在Go中，当你想检查一个通道是否有任何东西在等待时，你应该使用一个<code class="fe mr ms mt mu b">select</code>，这样就不会阻塞主线程。</p><pre class="kj kk kl km gt mv mu mw mx aw my bi"><span id="7257" class="mz lv it mu b gy na nb l nc nd">ch := make(chan bool)<br/>select {<br/>  case x &lt;- ch:<br/>     // do something with the channel<br/>  default:<br/>     // do something else<br/>}</span></pre><p id="b26c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你有一个值，并且你想根据大量的条件检查这个值，那么一个<code class="fe mr ms mt mu b">switch</code>语句可能是最好的方法。在这种情况下，性能和可读性会更好(通常情况下)。但是像Python这样没有<code class="fe mr ms mt mu b">switch</code>或者<code class="fe mr ms mt mu b">select</code>的语言呢？嗯，你有点坚持使用<code class="fe mr ms mt mu b">if/else</code>了，不是吗？<strong class="la iu">你能编写或导入某种库来重新实现<code class="fe mr ms mt mu b">switch</code>或做一些其他类型的评估吗？当然可以。但是你可以很容易地使用<code class="fe mr ms mt mu b">if</code>。我认为:</strong></p><pre class="kj kk kl km gt mv mu mw mx aw my bi"><span id="236a" class="mz lv it mu b gy na nb l nc nd">def my_function(x):<br/>    if x == 0:<br/>       # do something<br/>    elif x == 1:<br/>       # do something<br/>    else:<br/>       # catch all</span></pre><p id="9e18" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">和这个一样易读(如果不是更易读的话):</p><pre class="kj kk kl km gt mv mu mw mx aw my bi"><span id="dea6" class="mz lv it mu b gy na nb l nc nd">function my_function(x) {<br/>    switch(x) {<br/>       case 0:<br/>          // do something<br/>       case 1:<br/>          // do something<br/>       default:<br/>          // catch all<br/>    }<br/>}</span></pre><p id="9920" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">是的，如果可能的话，你想避免使用嵌套的<code class="fe mr ms mt mu b">if</code>,但是有时候你就是需要这样做，这也没关系。重要的是你的代码是可读的，可跟踪的，并且只需要有多复杂就有多复杂。</p><h1 id="5a08" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">For循环是代码的基础，这没关系</h1><p id="7dd4" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">这大概是我最喜欢的，也是这次反驳的真正启发。我看过<a class="ae ne" href="https://medium.com/swlh/all-loops-are-a-code-smell-6416ac4865d6" rel="noopener">博客讨论</a>如何不应该使用<code class="fe mr ms mt mu b">for</code>，而应该使用像<code class="fe mr ms mt mu b">forEach</code>和<code class="fe mr ms mt mu b">map</code>这样的函数。如果你知道任何事情，这是相当可笑的，因为你只是把<code class="fe mr ms mt mu b">for</code>卸载到一个函数中。这些方法中没有魔法可以绕过一个基本的循环。事实上，循环是软件设计中最基本的部分之一。没有某种循环机制的编程语言不是真正的编程语言，否则它就不是图灵完整的。所有这些都没有解决一个简单的事实，即大多数语言没有类似<code class="fe mr ms mt mu b">forEach</code>的函数，但它们都有<code class="fe mr ms mt mu b">for</code>或<code class="fe mr ms mt mu b">while</code>。仅仅因为它对JavaScript有好处并不意味着它对其他任何东西都有好处——大多数东西<strong class="la iu">不能</strong>在JS上运行(感谢上帝)。</p><p id="1da6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在Python中，有几种循环方式，其中一些在不同的时候比其他的更合适。就我个人而言，我是理解的粉丝，但它们并不构成最可读的代码，在你编写的代码可能由别人而不是你自己来维护或改进的情况下，你必须考虑这一点。</p><pre class="kj kk kl km gt mv mu mw mx aw my bi"><span id="de51" class="mz lv it mu b gy na nb l nc nd">[{x: int(y)**2} for x,y in my_dict.items()]</span></pre><p id="d19f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与相同</p><pre class="kj kk kl km gt mv mu mw mx aw my bi"><span id="5b25" class="mz lv it mu b gy na nb l nc nd">result = []<br/>for x,y in my_dict.items():<br/>    result.append({x: y**2})</span></pre><p id="90a7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是第二种可能更容易让普通开发人员掌握，而不必钻研Python 3文档和参加理解速成班。理解起来可能有点快，但是CPU现在很便宜，除非你正在做一些实时的时钟-时间-是必要的类型的操作，那么你可以多花一毫秒或两毫秒，并有可维护的代码。</p><h1 id="701a" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">Switch语句也可以</h1><p id="2795" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">但是等等，你不是刚说完用<code class="fe mr ms mt mu b">if/else</code>代替switch就可以了吗？为什么我们又在说<code class="fe mr ms mt mu b">switch</code>了？嗯，<a class="ae ne" href="https://medium.com/swlh/factory-pattern-without-switch-this-is-how-it-should-be-done-cd895e356f44" rel="noopener">因为这堆代码存在</a>。</p><p id="6dd1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你不想冒险阅读链接的文章，TL；dr是用工厂代替交换机。哪个…呃。为什么？为什么？为什么YYYY？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/37e369d08a97ddb7753ef0bbf461174c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SPATlJtqTZP1R62L.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">这肯定比switch语句更容易阅读…..对吗？对吗？</figcaption></figure><p id="ff44" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为什么我们需要进行这些对话？为什么，出于对一切神圣事物的热爱，你会使用类和工厂来实现一个简单的<code class="fe mr ms mt mu b">switch</code>和一个复杂的OOP范例呢？如果你想从JavaScript中获得毫秒级的性能，那么也许是时候学习一种新的语言了，一种不是JIT编译和解释的语言，比如Rust或Go或C++或C#或Erlang，或者…你明白我的意思。需要在浏览器中运行？WASM支持你。</p><h1 id="61b8" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">我们都很好</h1><p id="c489" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">我可能开了点小玩笑，有时还会忘乎所以，但我们不都是这样吗？我的意思是，这篇文章的一些灵感肯定有。但是如果有一件事我想强调的话，那就是:代码风格和约定都是主观的(在某种程度上)。如果你不能让自己去写工厂而不是基本的流量控制，那么尽一切办法，做你能做的。我们很好。你的代码会很好，你也会很好，宇宙不会因为再多一个<code class="fe mr ms mt mu b">if/else</code>而崩溃。无论你在开发过程中处于哪个阶段——从刚刚学习什么是功能的菜鸟到寻找方法故意迷惑实习生并编写根本不存在的代码的老前辈——只要尽力而为，不断学习，忽略狂热者。因为说到底，就像飞行员和着陆一样，任何成功启动的应用都是好的。我会坚持我的臭码。</p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><p id="883f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">我错过了什么吗？请在评论中告诉我！</strong></p></div></div>    
</body>
</html>