<html>
<head>
<title>Using Angular ActivatedRoute to Send Objects and Arrays in Ionic</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Angular ActivatedRoute在Ionic中发送对象和数组</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/using-angular-activatedroute-to-send-objects-and-arrays-in-ionic-78ed2bde9210?source=collection_archive---------9-----------------------#2020-02-03">https://levelup.gitconnected.com/using-angular-activatedroute-to-send-objects-and-arrays-in-ionic-78ed2bde9210?source=collection_archive---------9-----------------------#2020-02-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/03ebfa8ac19a43ada7486796e6101daf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GeKbIBou8WVNoDyB1wn32A.png"/></div></div></figure><p id="f42d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">像你一样，我有时会怀念以前的Ionic 2/3，在那里使用一个叫做<code class="fe kz la lb lc b">NavParams</code>的神奇发明在页面之间发送对象和数组是非常容易的。</p><p id="b2dd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这在Ionic 4+中已经被否决(在我看来是有争议的),取而代之的是角路由器。使用角路由器，仍然可以在页面之间传送简单的变量(如字符串、数字),但不能传送对象和数组。</p><p id="abb9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是，有一个简单的方法。如果您希望将对象和数组从一个页面带到另一个页面— <em class="ld"> stringify </em>它！</p><p id="b706" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">假设我们有一个叫做人类的物体:</p><pre class="le lf lg lh gt li lc lj lk aw ll bi"><span id="312d" class="lm ln it lc b gy lo lp l lq lr">let human={name:'Bob',age:'22',hobby:'fishing'};</span></pre><ol class=""><li id="a821" class="ls lt it kd b ke kf ki kj km lu kq lv ku lw ky lx ly lz ma bi translated">第一步是<code class="fe kz la lb lc b">stringify</code>对象:</li></ol><pre class="le lf lg lh gt li lc lj lk aw ll bi"><span id="a4d1" class="lm ln it lc b gy lo lp l lq lr">let human={name:'Bob',age:'22',hobby:'fishing'};</span><span id="e72c" class="lm ln it lc b gy mb lp l lq lr">let humanStringify=JSON.stringify(human);<br/>//humanStringify is now a string variable with the following value: <br/>//'{"name":"bob","age":"22","hobby":"fishing"}'</span></pre><p id="06c8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">2.用激活的路线发送<code class="fe kz la lb lc b">humanStringify</code>。修改<strong class="kd iu"> app.routing.module.ts </strong>(我加的东西在<strong class="kd iu">粗体</strong>):</p><pre class="le lf lg lh gt li lc lj lk aw ll bi"><span id="5080" class="lm ln it lc b gy lo lp l lq lr">...</span><span id="690a" class="lm ln it lc b gy mb lp l lq lr">{</span><span id="9517" class="lm ln it lc b gy mb lp l lq lr">  path: 'first,<br/>  loadChildren: () =&gt; import('./first/first.module').then(m =&gt;  m.FirstPageModule)</span><span id="e002" class="lm ln it lc b gy mb lp l lq lr">},<br/>{</span><span id="b5a7" class="lm ln it lc b gy mb lp l lq lr">  path: 'second/<strong class="lc iu">:humanObject</strong>',<br/>  loadChildren: () =&gt; import('./second/second.module').then(m =&gt; m.SecondPageModule)</span><span id="0be3" class="lm ln it lc b gy mb lp l lq lr">},</span><span id="0d4a" class="lm ln it lc b gy mb lp l lq lr">...</span></pre><p id="3a30" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">3.在<strong class="kd iu"> first.page.ts </strong>中添加一个函数，将<code class="fe kz la lb lc b">humanStringify</code>发送到second.page.ts</p><pre class="le lf lg lh gt li lc lj lk aw ll bi"><span id="d96e" class="lm ln it lc b gy lo lp l lq lr">...</span><span id="a265" class="lm ln it lc b gy mb lp l lq lr">goToSecondPage()<br/>{<br/>    let human={name:'Bob',age:'22',hobby:'fishing'};</span><span id="2d21" class="lm ln it lc b gy mb lp l lq lr">    let humanStringify=JSON.stringify(human);</span><span id="3e15" class="lm ln it lc b gy mb lp l lq lr">    this.nav.navigateForward('second/'+humanStringify);</span><span id="42f0" class="lm ln it lc b gy mb lp l lq lr">}</span><span id="ce37" class="lm ln it lc b gy mb lp l lq lr">...</span></pre><p id="1a8d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">4.在<strong class="kd iu"> second.page.ts中，</strong>截取值并解析回一个对象。</p><pre class="le lf lg lh gt li lc lj lk aw ll bi"><span id="43fc" class="lm ln it lc b gy lo lp l lq lr">import {ActivatedRoute} from '@angular/router'<br/>...</span><span id="7fd4" class="lm ln it lc b gy mb lp l lq lr">constructor(public route:ActivatedRoute)<br/>{}</span><span id="7043" class="lm ln it lc b gy mb lp l lq lr">...<br/>ionViewWillEnter()<br/>{ <br/>  let human=JSON.parse(this.route.snapshot.paramMap.get('Object'));</span><span id="4110" class="lm ln it lc b gy mb lp l lq lr">  //By using JSON.parse, the variable is now successfully parsed as an Object. The object in variable human is:<br/>  //{name:'bob',age:'22',hobby:'fishing'}</span><span id="2def" class="lm ln it lc b gy mb lp l lq lr">}</span></pre><p id="3972" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这就对了，就这么简单。同样的事情也可以用数组来完成。你所需要做的就是<code class="fe kz la lb lc b">JSON.stringify</code>数组并发送<em class="ld">字符串化的</em>版本。</p><p id="6b9e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">有趣的附加事实:如果你把一个对象转换成一个字符串，而不是保持它的对象形式，它实际上会更小。字符串比对象和数组小。</p></div></div>    
</body>
</html>