# æ†ç»‘ä¸€ä¸ª CSS åº“

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/bundle-a-css-library-6e9ff1ff8a2c>

## å¦‚ä½•ç”¨ SASSã€postcss å’Œ clean-css æ„å»ºè‡ªå·±çš„è‡ªå®šä¹‰ CSS åº“

![](img/63a5193e8c1180a11265b825f9f73dbe.png)

ç…§ç‰‡ç”± [KOBU æœºæ„](https://unsplash.com/@kobuagency?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨ [Unsplash](/s/photos/css?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„

æˆ‘ä»¬ä»¥ç›¸å¯¹åˆ†æ•£çš„æ–¹å¼æ„å»ºäº† DeckDeckGoğŸ˜…ã€‚è¿™æ˜¯æˆ‘ä»¬çš„ç½‘ç»œç¼–è¾‘å™¨ï¼Œå¯ä»¥ç”¨æ¥åˆ›å»ºå’Œå±•ç¤ºå¹»ç¯ç‰‡ï¼Œè¿˜å¯ä»¥è‡ªåŠ¨ä¸æˆ‘ä»¬çš„é¥æ§å™¨åŒæ­¥ã€‚è¿˜æœ‰ä¸€ä¸ªå¼€å‘è€…å·¥å…·åŒ…ï¼Œå®ƒæ”¯æŒ HTML æˆ– markdownï¼Œç”šè‡³è¿˜æœ‰å¦ä¸€ä¸ªç‰ˆæœ¬ï¼Œæˆ‘ä»¬åªç”¨äºåœ¨çº¿éƒ¨ç½²æ‚¨çš„æ¼”ç¤ºæ–‡ç¨¿ä½œä¸ºæ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åºã€‚

æ‰€æœ‰è¿™äº›å¤šç§åº”ç”¨ç¨‹åºå’Œå¥—ä»¶éƒ½æœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼Œå³å®ƒä»¬å…±äº«å®Œå…¨ç›¸åŒçš„æ ¸å¿ƒå’ŒåŠŸèƒ½ï¼Œè€Œä¸ç®¡å®ƒä»¬çš„æŠ€æœ¯å¦‚ä½•ï¼Œè¿™è¦å½’åŠŸäºä½¿ç”¨[æ¨¡æ¿](https://stenciljs.com/)åˆ¶ä½œçš„ Web ç»„ä»¶ã€‚

è¿™äº›ä¹Ÿå¿…é¡»å…±äº«ç›¸åŒçš„å¸ƒå±€åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å…¨å±æ¨¡å¼ä¸‹å®šä¹‰äº†ä¸€ä¸ª 32px çš„æ ¹å­—ä½“å¤§å°ï¼Œå®ƒåº”è¯¥å¯ä»¥åº”ç”¨åˆ°ä»»ä½•åœ°æ–¹ï¼Œå› æ­¤ï¼Œåº”è¯¥å¯ä»¥åœ¨æˆ‘ä»¬çš„ eco ç³»ç»Ÿä¸­å®¹æ˜“ä¸”ä¸€è‡´åœ°ä¼ æ’­ã€‚

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¿…é¡»åˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„è‡ªå®šä¹‰ CSS åº“ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘è¦ä¸ä½ åˆ†äº«ï¼Œä½ å¦‚ä½•ä¹Ÿå¯ä»¥ä¸ºä½ è‡ªå·±çš„é¡¹ç›®æ†ç»‘è¿™æ ·ä¸€ä¸ªå®ç”¨ç¨‹åºã€‚

# ä¿¡ç”¨

è¿™ä¸ªæ–¹æ¡ˆæ˜¯ç”± CSS æ¡†æ¶[å¸ƒå°”ç›](https://bulma.io/)å®ç°çš„ã€‚æ²¡æœ‰å¿…è¦é‡æ–°å‘æ˜è½®å­ï¼Œå½“å®ƒå·²ç»è¢«å¥‡å¦™åœ°è§£å†³çš„æ—¶å€™ã€‚æ„Ÿè°¢å¸ƒå°”ç›[å¼€æº](https://github.com/jgthms/bulma)ğŸ™ã€‚

# å…¥é—¨æŒ‡å—

ä¸ºäº†åˆå§‹åŒ–æˆ‘ä»¬çš„åº“ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚`bundle-css`ï¼Œå¹¶ç”¨ä¸€ä¸ªæ–°çš„`package.json`æ–‡ä»¶æ¥æè¿°å®ƒã€‚å®ƒåº”è¯¥åŒ…å«åº“çš„åç§°ã€ç‰ˆæœ¬ã€ä¸»æ–‡ä»¶ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯ä¸€ä¸ª(å³å°†åˆ°æ¥çš„)`sass`å…¥å£æ–‡ä»¶ã€ä½œè€…å’Œè®¸å¯è¯ã€‚å½“ç„¶ï¼Œæ‚¨å¯ä»¥æ·»åŠ æ›´å¤šçš„ç»†èŠ‚ï¼Œä½†è¿™äº›ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå¿«é€Ÿçš„åŸºç¡€ã€‚

```
{
  "name": "bundle-css",
  "version": "1.0.0",
  "main": "index.scss",
  "author": "David",
  "license": "MIT"
}
```

åœ¨ä¸€ä¸ªæ–°æ–‡ä»¶å¤¹`src`ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†æ ·å¼è¡¨æ–‡ä»¶`index.scss`ã€‚æ­£å¦‚æˆ‘åœ¨ä»‹ç»ä¸­æåˆ°çš„`fullscreen`æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªå…¨å±æ ·å¼ï¼Œå°†è“è‰²èƒŒæ™¯åº”ç”¨åˆ°â€œmainâ€å…ƒç´ çš„å­æ®µè½ä¸­ã€‚

```
:fullscreen #main {
  p {
    background: #3880ff;
  }
}
```

# å¹²å‡€è¾“å‡º

æˆ‘ä»¬å¯èƒ½å¸Œæœ›ç¡®ä¿æ¯æ¬¡æ„å»ºåº“æ—¶ï¼Œç»“æœéƒ½ä¸åŒ…å«æˆ‘ä»¬ä¹‹å‰åˆ é™¤çš„ä»»ä½•æ ·å¼ã€‚

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬é¦–å…ˆå°† [rimraf](https://github.com/isaacs/rimraf) æ·»åŠ åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œä»¥ä¾¿åœ¨æ¯æ¬¡æ„å»ºå¼€å§‹æ—¶åˆ é™¤è¾“å‡ºæ–‡ä»¶å¤¹ã€‚

```
npm i rimraf -D
```

*è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æ·»åŠ åˆ°é¡¹ç›®ä¸­çš„æ‰€æœ‰ä¾èµ–é¡¹éƒ½å¿…é¡»ä½œä¸ºå¼€å‘ä¾èµ–é¡¹æ·»åŠ ï¼Œå› ä¸ºå®ƒä»¬éƒ½ä¸æ˜¯è¾“å‡ºçš„ä¸€éƒ¨åˆ†ã€‚*

ä¸€æ—¦å®‰è£…äº† rimrafï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç¼–è¾‘`package.json`ä¸­çš„`scripts`æ¥å¯åŠ¨æˆ‘ä»¬çš„`build`ã€‚

```
"scripts": {
  "build": "rimraf css"
}
```

æˆ‘é€‰æ‹©äº†`css`ä½œä¸ºåŒ…å« CSS è¾“å‡ºçš„è¾“å‡ºæ–‡ä»¶å¤¹çš„åç§°ã€‚ä½ å¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ªåå­—ï¼Œé‡è¦çš„æ˜¯å°†å®ƒæ·»åŠ åˆ°æ–‡ä»¶`package.json`ä¸­ï¼Œä»¥ä¾¿å°†å…¶åŒ…å«åœ¨æœ€ç»ˆçš„åŒ…ä¸­ï¼Œä½ å¯ä»¥ç¨åå®‰è£…åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­æˆ–å‘å¸ƒåˆ° [npm](http://npmjs.com/) ã€‚

```
"files": [
  "css"
]
```

è‡³æ­¤ï¼Œåˆèµ·æ¥ï¼Œæˆ‘ä»¬çš„`package.json`åº”è¯¥åŒ…å«ä»¥ä¸‹å†…å®¹:

```
{
  "name": "bundle-css",
  "version": "1.0.0",
  "main": "index.scss",
  "scripts": {
    "build": "rimraf css"
  },
  "files": [
    "css"
  ],
  "author": "David",
  "license": "MIT",
  "devDependencies": {
    "rimraf": "^3.0.2"
  }
}
```

# åšé¢œæ— è€»

æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ [SASS](https://sass-lang.com/) æ‰©å±•æ¥ç¼–è¾‘æ ·å¼ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦æŠŠå®ƒç¼–è¯‘æˆ CSSã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† [node-sass](https://github.com/sass/node-sass) ç¼–è¯‘å™¨ã€‚

```
npm i node-sass -D
```

æˆ‘ä»¬ç”¨ä¸€ä¸ªæ–°çš„è„šæœ¬å¢å¼ºäº†æˆ‘ä»¬çš„`package.json`,å®ƒåº”è¯¥è´Ÿè´£ç¼–è¯‘æˆ CSSï¼Œæˆ‘ä»¬ç”¨æˆ‘ä»¬çš„ä¸»`build`è„šæœ¬é“¾æ¥å®ƒã€‚

```
"scripts": {
  "build": "rimraf css && npm run build-sass",
  "build-sass": "node-sass --output-style expanded src/index.scss ./css/index.css"
}
```

æˆ‘ä»¬æä¾›è¾“å…¥æ–‡ä»¶ï¼Œå¹¶å°†è¾“å‡ºæŒ‡å®šä¸ºç¼–è¯‘å‚æ•°ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨é€‰é¡¹`expanded`æ¥ç¡®å®š CSS çš„è¾“å‡ºæ ¼å¼ã€‚å®ƒä½¿å®ƒå…·æœ‰å¯è¯»æ€§ï¼Œè€Œä¸”ï¼Œç”±äºæˆ‘ä»¬å°†åœ¨ç®¡é“çš„åæœŸç¼©å°å®ƒï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰å¤šä½™çš„æ–°è¡Œå¤§å°ã€‚

å¦‚æœæˆ‘ä»¬é€šè¿‡è¿è¡Œ`npm run build`æ¥å°è¯•æˆ‘ä»¬çš„æ„å»ºè„šæœ¬ï¼Œæˆ‘ä»¬åº”è¯¥ä¼šå‘ç°ä¸€ä¸ªä»`SASS`è½¬æ¢æˆ`CSS`çš„è¾“å‡ºæ–‡ä»¶`/css/index.css`ã€‚

```
:fullscreen #main p {
  background: #3880ff;
}
```

# è‡ªåŠ¨ä¿®å¤

ä¸ºäº†æ”¯æŒæ›´è€çš„æµè§ˆå™¨å’Œ Safariï¼Œæœ‰å¿…è¦ç»™é€‰æ‹©å™¨`:fullscreen`åŠ ä¸Šå‰ç¼€[ã€‚å…¶ä»–é€‰æ‹©å™¨ä¹Ÿå¯èƒ½æ˜¯è¿™ç§æƒ…å†µã€‚ä¸ºäº†è‡ªåŠ¨è§£æ CSS å¹¶å°†ä¾›åº”å•†å‰ç¼€æ·»åŠ åˆ° CSS è§„åˆ™ä¸­ï¼Œä½¿ç”¨æ¥è‡ª](https://caniuse.com/#search=fullscreen)[çš„å€¼ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨](https://caniuse.com/)å—ï¼Œæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ [autoprefixer](https://github.com/postcss/autoprefixer) ã€‚

```
npm i autoprefixer postcss-cli -D
```

æˆ‘ä»¬ç°åœ¨å†æ¬¡æ·»åŠ ä¸€ä¸ªæ–°çš„æ„å»ºè„šæœ¬åˆ°æˆ‘ä»¬çš„`package.json`ä¸­ï¼Œå¹¶ä¸”åœ¨æˆ‘ä»¬å·²ç»å£°æ˜çš„ä¸¤ä¸ªæ­¥éª¤ä¹‹åé“¾æ¥è¿™ä¸ªæ­¥éª¤ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä¸€æ—¦ CSS è¢«åˆ›å»ºï¼Œå°±åœ¨å€¼å‰é¢åŠ ä¸Šå‰ç¼€ã€‚

```
"scripts": {
  "build": "rimraf css && npm run build-sass && npm run build-autoprefix",
   ...
  "build-autoprefix": "postcss --use autoprefixer --map --output ./css/index.css ./css/index.css"
}
```

ä½¿ç”¨è¿™ä¸ªæ–°å‘½ä»¤ï¼Œæˆ‘ä»¬ç”¨æ–°å€¼è¦†ç›–äº† CSS æ–‡ä»¶ï¼Œå¹¶ç”Ÿæˆäº†ä¸€ä¸ª`map`æ–‡ä»¶ï¼Œè¿™å¯¹è°ƒè¯•éå¸¸æœ‰ç”¨ã€‚

å¦‚æœæˆ‘ä»¬è¿è¡Œæˆ‘ä»¬çš„æ„å»ºç®¡é“`npm run build`ï¼Œè¾“å‡º`css`æ–‡ä»¶å¤¹ç°åœ¨åº”è¯¥åŒ…å«ä¸€ä¸ª`map`æ–‡ä»¶å’Œæˆ‘ä»¬çš„`index.css`è¾“å‡ºï¼Œå…¶å‰ç¼€åº”è¯¥å¦‚ä¸‹:

```
:-webkit-full-screen #main p {
  background: #3880ff;
}
:-ms-fullscreen #main p {
  background: #3880ff;
}
:fullscreen #main p {
  background: #3880ff;
}

/*# sourceMappingURL=index.css.map */
```

# æœ€ä½³åŒ–

è¶Šå°‘è¶Šå¥½ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ [clean-css](https://github.com/jakubpawlowicz/clean-css) çš„å¸®åŠ©ä¸‹ä¼˜åŒ–æˆ‘ä»¬çš„ CSS åº“ã€‚

```
npm i clean-css-cli -D
```

é€šè¿‡å°†æœ€åä¸€ä¸ªè„šæœ¬æ·»åŠ åˆ°æˆ‘ä»¬çš„é“¾ä¸­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåˆ›å»ºä¸€ä¸ªç¼©å°ç‰ˆçš„ CSS æ–‡ä»¶ã€‚

```
"scripts": {
  "build": "rimraf css && npm run build-sass && npm run build-autoprefix && npm run build-cleancss",
  ...
  "build-cleancss": "cleancss -o ./css/index.min.css ./css/index.css"
}
```

å¦‚æœæˆ‘ä»¬æœ€åä¸€æ¬¡è¿è¡Œ`npm run build`ï¼Œæˆ‘ä»¬ç°åœ¨åº”è¯¥åœ¨è¾“å‡ºæ–‡ä»¶å¤¹`css`ä¸­å‘ç°è¾“å…¥ CSS çš„ç¼©å°ç‰ˆæœ¬ã€‚

```
:-webkit-full-screen #main p{background:#3880ff}:-ms-fullscreen #main p{background:#3880ff}:fullscreen #main p{background:#3880ff}
```

# æ€»å…±

æ¦‚æ‹¬æ¥è¯´ï¼Œè¿™é‡Œçš„`package.json`åŒ…å«äº†åˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„å®šåˆ¶ CSS åº“çš„æ‰€æœ‰ä¾èµ–é¡¹å’Œæ„å»ºæ­¥éª¤ã€‚

```
{
  "name": "bundle-css",
  "version": "1.0.0",
  "main": "index.scss",
  "scripts": {
    "build": "rimraf css && npm run build-sass && npm run build-autoprefix && npm run build-cleancss",
    "build-sass": "node-sass --output-style expanded src/index.scss ./css/index.css",
    "build-autoprefix": "postcss --use autoprefixer --map --output ./css/index.css ./css/index.css",
    "build-cleancss": "cleancss -o ./css/index.min.css ./css/index.css"
  },
  "files": [
    "css"
  ],
  "author": "David",
  "license": "MIT",
  "devDependencies": {
    "autoprefixer": "^9.8.4",
    "clean-css-cli": "^4.3.0",
    "node-sass": "^4.14.1",
    "postcss-cli": "^7.1.1",
    "rimraf": "^3.0.2"
  }
}
```

# æ‘˜è¦

å¤šäºäº†è®¸å¤šå¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿè½»æ¾åœ°ä¸ºè‡ªå®šä¹‰ CSS åˆ›å»ºä¸€ä¸ªåº“ï¼Œè¿™å¤ªæ£’äº†ã€‚

åœ¨æ‚¨çš„ä¸‹ä¸€æ¬¡æ¼”è®²ä¸­å°è¯•ä¸€ä¸‹ [DeckDeckGo](https://deckdeckgo.com) ï¼Œå¦‚æœæ‚¨å‡†å¤‡å¯¹æˆ‘ä»¬å¸¸è§çš„ [deck](https://github.com/deckgo/deckdeckgo/tree/master/utils/deck) é£æ ¼åšå‡ºä¸€äº›æ”¹è¿›ï¼Œæˆ‘ä»¬å°†éå¸¸æ¬¢è¿æ‚¨çš„å¸®åŠ©ğŸ˜ƒã€‚

åˆ°æ— é™å’Œæ›´è¿œçš„åœ°æ–¹ï¼å¤§å«