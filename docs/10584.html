<html>
<head>
<title>Getting Started With Axios: A Popular Promise-Based HTTP Client</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Axios入门:一个流行的基于Promise的HTTP客户端</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/getting-started-with-axios-a-popular-promise-based-http-client-9c4b65a9847a?source=collection_archive---------3-----------------------#2021-12-23">https://levelup.gitconnected.com/getting-started-with-axios-a-popular-promise-based-http-client-9c4b65a9847a?source=collection_archive---------3-----------------------#2021-12-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="01a2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解Axios提供的关键特性，以及如何在web应用程序中使用它们。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0e2a46deb2077c3d6524288914afd4b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QWWeN1MBPVz2Sb-w_MtEgQ.png"/></div></div></figure><p id="16a6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Axios是浏览器和Node.js的一个流行的基于promise的HTTP客户端，在服务器端(Node.js)使用原生Node.js HTTP模块，而在客户端(浏览器)使用XMLHttpRequests。</p><p id="8455" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我将详细演示Axios提供的关键特性，以便您能够轻松理解它们，并开始在您的项目中使用它们，改善您在web应用程序中进行API调用的体验。初学者和有经验的开发人员可以从这篇文章中受益。</p><h1 id="6a7a" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">使用Axios优于Fetch API的优势</h1><p id="f120" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">现代网络浏览器附带了Fetch API，但是有各种各样的原因让Axios具有优势。主要区别在于两个库处理HTTP错误的方式。使用Fetch API时，如果服务器返回4xx或5xx系列错误，则不会触发<code class="fe mk ml mm mn b">catch()</code>回调。您必须检查响应对象中的状态代码，以确定请求是否成功。另一方面，如果服务器返回这些错误代码中的一个，Axios将拒绝请求承诺。</p><p id="358d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第二个区别是，Fetch在执行请求时不会(默认情况下)将cookies发送回服务器。为了包含cookies，您必须明确提供一个选项。另一方面，Axios会在你的每个请求中自动发送cookies。</p><p id="b821" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第三个区别是，Fetch不提供任何对上传进度的监控支持，如果你处理多个文件上传，这可能会成为你的绊脚石。另一方面，Axios提供回调函数来监控上传和下载的进度。您可以使用<code class="fe mk ml mm mn b">onUploadProgress()</code>和<code class="fe mk ml mm mn b">onDownloadProgress()</code>在您的应用程序UI中显示进度。</p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="fbc6" class="ln lo iq bd lp lq mv ls lt lu mw lw lx jw mx jx lz jz my ka mb kc mz kd md me bi translated">安装Axios</h1><p id="f4f1" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">您可以通过以下方式安装Axios:</p><ul class=""><li id="36c9" class="na nb iq kt b ku kv kx ky la nc le nd li ne lm nf ng nh ni bi translated">使用NPM</li><li id="a8fb" class="na nb iq kt b ku nj kx nk la nl le nm li nn lm nf ng nh ni bi translated">使用纱线</li><li id="5c4d" class="na nb iq kt b ku nj kx nk la nl le nm li nn lm nf ng nh ni bi translated">使用凉亭</li><li id="d216" class="na nb iq kt b ku nj kx nk la nl le nm li nn lm nf ng nh ni bi translated">使用CDN</li></ul><h2 id="1bb3" class="no lo iq bd lp np nq dn lt nr ns dp lx la nt nu lz le nv nw mb li nx ny md nz bi translated">1.使用NPM</h2><p id="c844" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">执行以下命令安装Axios:</p><pre class="kg kh ki kj gt oa mn ob oc aw od bi"><span id="509b" class="no lo iq mn b gy oe of l og oh">npm install axios</span></pre><h2 id="cf95" class="no lo iq bd lp np nq dn lt nr ns dp lx la nt nu lz le nv nw mb li nx ny md nz bi translated">2.使用纱线</h2><p id="5623" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">执行以下命令安装Axios:</p><pre class="kg kh ki kj gt oa mn ob oc aw od bi"><span id="a47e" class="no lo iq mn b gy oe of l og oh">yarn add axios</span></pre><h2 id="dcdf" class="no lo iq bd lp np nq dn lt nr ns dp lx la nt nu lz le nv nw mb li nx ny md nz bi translated">3.使用凉亭</h2><p id="7e91" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">执行以下命令安装Axios:</p><pre class="kg kh ki kj gt oa mn ob oc aw od bi"><span id="c7d3" class="no lo iq mn b gy oe of l og oh">bower install axios</span></pre><h2 id="c99e" class="no lo iq bd lp np nq dn lt nr ns dp lx la nt nu lz le nv nw mb li nx ny md nz bi translated">4.使用CDN</h2><p id="2868" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">包含以下脚本以使用jsDelivr中的Axios:</p><pre class="kg kh ki kj gt oa mn ob oc aw od bi"><span id="6f67" class="no lo iq mn b gy oe of l og oh">&lt;script src="<a class="ae oi" href="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js</a>"&gt;&lt;/script&gt;</span></pre><p id="d148" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者，包含以下脚本来使用unpkg中的Axios:</p><pre class="kg kh ki kj gt oa mn ob oc aw od bi"><span id="07d5" class="no lo iq mn b gy oe of l og oh">&lt;script src="<a class="ae oi" href="https://unpkg.com/axios/dist/axios.min.js" rel="noopener ugc nofollow" target="_blank">https://unpkg.com/axios/dist/axios.min.js</a>"&gt;&lt;/script&gt;</span></pre></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="c4b0" class="ln lo iq bd lp lq mv ls lt lu mw lw lx jw mx jx lz jz my ka mb kc mz kd md me bi translated">请求Axios提供的方法</h1><p id="2038" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">下面是Axios中提供的用于发出HTTP请求的基本函数。</p><pre class="kg kh ki kj gt oa mn ob oc aw od bi"><span id="84d2" class="no lo iq mn b gy oe of l og oh">axios.request(config)<br/>axios.get(url[, config])<br/>axios.delete(url[, config])<br/>axios.head(url[, config])<br/>axios.options(url[, config])<br/>axios.post(url[, data[, config]])<br/>axios.put(url[, data[, config]])<br/>axios.patch(url[, data[, config]])</span></pre></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="4e23" class="ln lo iq bd lp lq mv ls lt lu mw lw lx jw mx jx lz jz my ka mb kc mz kd md me bi translated">请求Axios提供的选项</h1><p id="c67d" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">Axios提供了大量选项，您可以在发出请求时传递这些选项。以下是最常用选项的列表:</p><ul class=""><li id="7945" class="na nb iq kt b ku kv kx ky la nc le nd li ne lm nf ng nh ni bi translated">baseURL如果指定，将被添加到您使用的任何相对URL的前面。</li><li id="0d35" class="na nb iq kt b ku nj kx nk la nl le nm li nn lm nf ng nh ni bi translated">标题—具有键值对的对象。</li><li id="7e0f" class="na nb iq kt b ku nj kx nk la nl le nm li nn lm nf ng nh ni bi translated">params —随请求一起发送的具有键值对的对象。它应该是一个普通对象或一个URLSearchParams对象。</li><li id="794b" class="na nb iq kt b ku nj kx nk la nl le nm li nn lm nf ng nh ni bi translated">responseType —指示服务器将响应的数据类型。有效选项为“arraybuffer”、“document”、“json”、“text”、“stream”。</li><li id="d09b" class="na nb iq kt b ku nj kx nk la nl le nm li nn lm nf ng nh ni bi translated">auth —指示应通过提供必要的凭据(用户名和密码)使用HTTP基本身份验证来连接到代理。</li></ul></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="567a" class="ln lo iq bd lp lq mv ls lt lu mw lw lx jw mx jx lz jz my ka mb kc mz kd md me bi translated">Axios提供的响应对象</h1><p id="277d" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">当您向远程服务器发送一个HTTP请求时，您将得到一个包含特定信息的响应(如果请求被满足)。根据Axios文档，收到的响应包含以下信息。</p><ul class=""><li id="9839" class="na nb iq kt b ku kv kx ky la nc le nd li ne lm nf ng nh ni bi translated">数据—服务器提供的响应。</li><li id="ed83" class="na nb iq kt b ku nj kx nk la nl le nm li nn lm nf ng nh ni bi translated">状态—来自服务器响应的HTTP状态代码。</li><li id="252f" class="na nb iq kt b ku nj kx nk la nl le nm li nn lm nf ng nh ni bi translated">statusText —来自服务器响应的HTTP状态消息。</li><li id="cb4e" class="na nb iq kt b ku nj kx nk la nl le nm li nn lm nf ng nh ni bi translated">头-服务器响应的HTTP头。所有标题名称都是小写的，可以使用括号符号来访问。例子:<code class="fe mk ml mm mn b">response.headers['content-type']</code>。</li><li id="9447" class="na nb iq kt b ku nj kx nk la nl le nm li nn lm nf ng nh ni bi translated">配置—为请求提供给Axios的配置。</li><li id="788b" class="na nb iq kt b ku nj kx nk la nl le nm li nn lm nf ng nh ni bi translated">请求—生成此响应的请求。它是Node.js中的最后一个ClientRequest实例(在重定向中)，也是浏览器中的一个XMLHttpRequest实例。</li></ul></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="2f65" class="ln lo iq bd lp lq mv ls lt lu mw lw lx jw mx jx lz jz my ka mb kc mz kd md me bi translated">正在向服务器发送GET请求</h1><p id="ce4d" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">Axios提供了一个GET方法来向服务器发送HTTP请求。第一个参数接受目标URL(请求将被发送到该URL)。第二个参数接受多个键值对的对象(我们称之为选项)。在这个例子中，我们将使用<code class="fe mk ml mm mn b">params</code>选项向服务器发送一些数据。这个<code class="fe mk ml mm mn b">params</code>选项也可以包含多个键值对。</p><p id="2e72" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请参考下面的代码片段，了解如何向服务器发送GET请求、获取一些响应以及捕捉错误。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj ok l"/></div></figure></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="43c8" class="ln lo iq bd lp lq mv ls lt lu mw lw lx jw mx jx lz jz my ka mb kc mz kd md me bi translated">向服务器发送POST请求</h1><p id="2ce3" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">Axios提供了一个POST方法来向服务器发送HTTP请求。第一个参数接受目标URL(请求将被发送到该URL)。第二个参数接受多个键值对的对象。第三个参数接受一个对象(我们称之为选项)。在这个例子中，我们将使用第二个参数向服务器发送一些数据。</p><p id="7f72" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请参考下面的代码片段，了解如何向服务器发送POST请求、获取一些响应以及捕捉错误。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj ok l"/></div></figure></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="a86d" class="ln lo iq bd lp lq mv ls lt lu mw lw lx jw mx jx lz jz my ka mb kc mz kd md me bi translated">使用异步和等待代替承诺</h1><p id="13b2" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">如果您希望使用异步和等待功能而不是承诺(<code class="fe mk ml mm mn b">then()</code>和<code class="fe mk ml mm mn b">catch()</code>块)，您可以通过几个简单的步骤来实现。</p><p id="6277" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">参考下面的代码片段来理解如何使用async和await来处理HTTP请求。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj ok l"/></div></figure></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="748a" class="ln lo iq bd lp lq mv ls lt lu mw lw lx jw mx jx lz jz my ka mb kc mz kd md me bi translated">发送多个并发请求</h1><p id="0b2c" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">Axios提供了一个同时向服务器发送多个请求的功能。可以使用<code class="fe mk ml mm mn b">Promise.all()</code>函数传递一个HTTP请求数组。当所有请求都得到满足时，它将生成一个单一的承诺，其中将包含每个请求的响应对象。若要取得每个要求的回应，您可以使用要求阵列的索引。</p><p id="a67e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请参考下面的代码片段，了解如何使用<code class="fe mk ml mm mn b">Promise.all()</code>函数发送多个并发请求。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj ok l"/></div></figure></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="ee55" class="ln lo iq bd lp lq mv ls lt lu mw lw lx jw mx jx lz jz my ka mb kc mz kd md me bi translated">处理失败的HTTP请求</h1><p id="a4d0" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">如果提交的HTTP请求失败，Axios将捕获错误，并将其存储在错误对象中。该对象将包含一组详细信息，这些信息将帮助您找到错误的确切位置。</p><p id="3e28" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请参考下列程式码片段，瞭解如何使用error物件来处理错误。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj ok l"/></div></figure></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="0efa" class="ln lo iq bd lp lq mv ls lt lu mw lw lx jw mx jx lz jz my ka mb kc mz kd md me bi translated">转换请求和响应</h1><p id="4729" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">默认情况下，Axios将请求和响应转换为JSON格式。但仍然可以覆盖这种行为，并通过<code class="fe mk ml mm mn b">transformRequest()</code>和<code class="fe mk ml mm mn b">transformResponse()</code>函数应用自己的转换格式。当某些API只支持XML或CSV格式时，这些就变得很方便了。</p><blockquote class="ol om on"><p id="9d98" class="kr ks oo kt b ku kv jr kw kx ky ju kz op lb lc ld oq lf lg lh or lj lk ll lm ij bi translated"><code class="fe mk ml mm mn b">transformRequest()</code>功能仅适用于以下请求方式:“PUT”、“POST”、“PATCH”和“DELETE”。</p></blockquote><p id="1126" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请参考下面的代码片段，以了解如何转换请求和响应。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj ok l"/></div></figure></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><p id="6a4e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">赞。您已经完成了对Axios提供的关键功能的学习。现在，您可以开始在当前或即将开展的项目中集成Axios。</p><blockquote class="ol om on"><p id="101c" class="kr ks oo kt b ku kv jr kw kx ky ju kz op lb lc ld oq lf lg lh or lj lk ll lm ij bi translated">如果你喜欢阅读这篇文章，并且已经学到了一些新的东西，那么请鼓掌，与你的朋友分享它，并且跟随我来获得我即将发表的文章的更新。你可以通过<a class="ae oi" href="https://www.linkedin.com/in/tara-prasad-routray-b83027145/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和我联系。</p></blockquote></div></div>    
</body>
</html>