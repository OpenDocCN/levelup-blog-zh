<html>
<head>
<title>API Encryption Front End</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">API加密前端</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/api-encryption-front-end-9bbfedd8c45f?source=collection_archive---------17-----------------------#2021-03-29">https://levelup.gitconnected.com/api-encryption-front-end-9bbfedd8c45f?source=collection_archive---------17-----------------------#2021-03-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="f2ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我写了一个关于如何使用密码加密API密钥的程序。该密码的输出是一个包含加密字符串的. txt文件和一个包含解密密钥的. bin文件。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/c250520db9f51397a3b20b4b46592652.png" data-original-src="https://miro.medium.com/v2/resize:fit:534/format:webp/1*7jFQeibKmYcTTNgekWgphA.png"/></div></figure><p id="3aeb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望这个密码有一个图形化的前端，可以从主屏幕上的菜单栏调用。上面的图片是我最后得到的。完整的代码位于本文的末尾。</p><p id="5305" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们通过输入API代码(或密码等)来使用GUI。)输入“输入代码字符串:”下的文本框中。接下来，输入要用于的文件名。txt和。bin文件，然后点击“选择目录”。点击此按钮将打开操作系统文件对话窗口。</p><p id="d5cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下图中，我选择了“数据”子目录作为输出文件的目的地。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi gj"><img src="../Images/97872a3ac4e5b1aaec7b5102bd5de652.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8wI-9bxIE43XttIOxjA54Q.png"/></div></div></figure><p id="70fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当单击文件对话窗口上的“选择文件夹”时，目标文件夹会显示在GUI窗口上，如下所示。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ky"><img src="../Images/26e002d62d71e63814d62fa56c28ec4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:546/format:webp/1*nV4Ip2W65REW9m9N_ZxOJg.png"/></div></figure><p id="f506" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">单击“ENCODE”按钮，两个文本框将清除它们的条目，并为下一个API做好准备。要退出程序，请单击GUI黑色背景中的任意位置。输出显示如下。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi kz"><img src="../Images/dddaaaadee1b948d12f8f06f90301623.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/format:webp/1*2U3GpcfwhBcRjGLkCxWSng.png"/></div></figure><p id="14a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是“notaapi.txt”的内容。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi la"><img src="../Images/d6fbf2c23c8d3198c4414468c41dc4eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:432/format:webp/1*16ePOLnUhD9ycwYMnVBKjQ.png"/></div></figure><p id="70c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以及“notaapi.bin”的内容。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/bf46ad1e58d72ac3e6455d974dd53a02.png" data-original-src="https://miro.medium.com/v2/resize:fit:296/format:webp/1*IIIod8MmRuk9lm8_WUvRKA.png"/></div></figure><p id="6652" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">和往常一样，我使用的是Python 3.8和PyQt5。让我们从导入语句开始。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="4954" class="lh li iq ld b gy lj lk l ll lm">import sys<br/>from PyQt5.QtCore import <em class="ln">(<br/>    </em>QRect,<br/>    pyqtSignal,<br/>    QObject,<br/>    Qt,<br/>    QStringListModel,<br/><em class="ln">)<br/></em>from PyQt5.QtGui import QFont<br/>from PyQt5.QtWidgets import <em class="ln">(<br/>    </em>QApplication,<br/>    QMainWindow,<br/>    QLabel,<br/>    QLineEdit,<br/>    QFileDialog,<br/><em class="ln">)<br/></em>from qtpy_cfg import <em class="ln">(<br/>    </em>qblack,<br/>    qbutton_dim,<br/>    qtbutton,<br/>    qledit,<br/>    qbutton_calc,<br/><em class="ln">)</em></span></pre><p id="7899" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ln"> qtpy_cfg() </em>是我写的一个带有各种PyQt5支持函数的helper文件。我将提供五个导入函数的代码。</p><p id="fa67" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一行需要一些解释。我写了几个模块，保存在一个目录中。为了导入它们中的任何一个，目录路径通过被“插入”到系统路径中来初始化。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="a3c3" class="lh li iq ld b gy lj lk l ll lm">sys.path.insert<em class="ln">( </em>1, 'C:\\Users\\mount\\source\\repos\\MyDashboard\\MODULES\\'<em class="ln">)<br/></em>from ubEnigma import generate_key_and_code as gkc</span></pre><p id="46ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">其中一个模块是<a class="ae kl" href="https://github.com/zazen000/ubEnigma.py" rel="noopener ugc nofollow" target="_blank"> <em class="ln"> ubEnigma </em> </a>，它包含了这个过程工作所需的所有加密功能。一旦路径启动，<em class="ln"> generate_key_and_code() </em>从<em class="ln"> ubEnigma </em>导入。</p><p id="f6a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要一个类来将系统级文件对话窗口与我们的程序集成在一起。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="9108" class="lh li iq ld b gy lj lk l ll lm">class Dir_Dialog<em class="ln">(</em>QFileDialog<em class="ln">)</em>:<br/><br/>    def __init__<em class="ln">(</em>self, parent=None<em class="ln">)</em>:<br/>        super<em class="ln">( </em>Dir_Dialog, self <em class="ln">)</em>.__init__<em class="ln">( </em>parent <em class="ln">)<br/><br/><br/>    </em>def getfiles<em class="ln">(</em>self<em class="ln">)</em>:<br/>        dlg = QFileDialog<em class="ln">()<br/>        </em>dlg.setFileMode<em class="ln">( </em>QFileDialog.Directory <em class="ln">)<br/>        </em>paths = QStringListModel<em class="ln">()<br/><br/>        </em>if dlg.exec_<em class="ln">()</em>:<br/>            path = dlg.selectedFiles<em class="ln">()<br/>            </em>return path</span></pre><p id="9f49" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我想指出的一点是在<em class="ln"> getfiles(self) </em>函数中。中的第二行指示<em class="ln">QFileDialog()setFileMode()</em>到<em class="ln">。目录</em>。那行代码指示文件对话窗口只显示目录。<em class="ln"> if </em>语句返回选择的目录路径。</p><p id="d21e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在<a class="ae kl" href="https://www.tutorialspoint.com/pyqt5/pyqt5_qfiledialog_widget.htm" rel="noopener ugc nofollow" target="_blank">TutorialsPoint.com</a>上发现了这段代码，并根据我的情况做了一些修改，因为原始代码是用来查找和显示文件的。</p><p id="edd8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们编写可能是有史以来最短的python类。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="8326" class="lh li iq ld b gy lj lk l ll lm">class Communicate<em class="ln">(</em>QObject<em class="ln">)</em>:<br/>    closeApp = pyqtSignal<em class="ln">()</em></span></pre><p id="1a34" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如您所见，这个类使用<em class="ln"> pyqtSignal() </em>向PyQt5发送一个关闭应用程序的信号。我们称之为关闭应用程序。</p><p id="65c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后一个类是GUI类。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="a917" class="lh li iq ld b gy lj lk l ll lm">class Encode<em class="ln">(</em>QMainWindow<em class="ln">)</em>:<br/><br/>    def __init__<em class="ln">(</em>self<em class="ln">)</em>:<br/>        super<em class="ln">()</em>.__init__<em class="ln">()<br/>        </em>self.left   = 1222<br/>        self.top    = 23<br/>        self.width  = 270<br/>        self.height = 200<br/>        self.comm   = Communicate<em class="ln">()<br/>        </em>self.comm.closeApp.connect<em class="ln">( </em>self.close <em class="ln">)<br/>        </em>self.dirView = Dir_Dialog<em class="ln">()</em></span></pre><p id="3757" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们设置app的大小和位置，初始化<em class="ln">通信</em>类变量，<em class="ln"> self.comm()。</em>我们指定该变量连接到<em class="ln"> self.close() </em>，一个内部PyQt5函数。然后我们将<em class="ln"> Dir_Dialog </em>类分配给<em class="ln"> self.dirView() </em>。</p><p id="41a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们为我们想要的外观初始化样式变量。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="9272" class="lh li iq ld b gy lj lk l ll lm">qblack<em class="ln">(</em>self<em class="ln">)<br/></em>q_ledit  = qledit<em class="ln">(</em>self<em class="ln">)<br/></em>qcalc    = qbutton_calc<em class="ln">( </em>self <em class="ln">)</em></span></pre><p id="a944" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ln"> qblack() </em>是一个格式化GUI窗口的函数，它是全黑的，没有标题栏或正常显示窗口的任何其他部分。它的代码如下所示。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="99d2" class="lh li iq ld b gy lj lk l ll lm">def qblack(self):<br/>    self.setWindowFlags(Qt.FramelessWindowHint)<br/>    self.setGeometry(self.left,self.top,self.width,self.height)<br/>    self.setAutoFillBackground(True)<br/>    p = self.palette()<br/>    p.setColor(self.backgroundRole(), Qt.black)<br/>    self.setPalette(p)</span></pre><p id="b566" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一行是样式按钮的格式。它之所以这样命名，是因为我从事的一个计算器项目使用了这个样式表(发布日期TBD)。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="88b6" class="lh li iq ld b gy lj lk l ll lm">def qbutton_calc(self):<br/>    return "QPushButton {color: rgba(54, 136, 200, 250); " \<br/>           "background-color: rgba(29, 29, 29, 150); " \<br/>           "border: black; border-width: 2px;}"</span></pre><p id="fb6b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后三行初始化字体和字体大小。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="ff41" class="lh li iq ld b gy lj lk l ll lm">canda_10 = QFont<em class="ln">( </em>'Candalara', 10 <em class="ln">)<br/></em>canda_8  = QFont<em class="ln">( </em>'Candalara', 8 <em class="ln">)<br/></em>incon_10 = QFont<em class="ln">( </em>'Inconsolata', 10<em class="ln">)</em></span></pre><p id="a8ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该应用程序使用三个标签。下面是这些标签的代码。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="946b" class="lh li iq ld b gy lj lk l ll lm">self.code_lbl = QLabel<em class="ln">( </em>self<em class="ln">)<br/></em>self.code_lbl.setStyleSheet<em class="ln">(<br/>        </em>"QLabel {color: rgba(80,130,255,255); "<br/>        "background-color: black;}"<br/>    <em class="ln">)<br/></em>self.code_lbl.setFont<em class="ln">( </em>canda_10 <em class="ln">)<br/></em>self.code_lbl.setText<em class="ln">( </em>"Enter Code String:" <em class="ln">)<br/></em>self.code_lbl.setGeometry<em class="ln">( </em>5, 5, 105, 20 <em class="ln">)<br/><br/></em>self.file_lbl = QLabel<em class="ln">( </em>self<em class="ln">)<br/></em>self.file_lbl.setStyleSheet<em class="ln">(<br/>        </em>"QLabel {color: rgba(80,130,255,255); "<br/>        "background-color: black;}"<br/>    <em class="ln">)<br/></em>self.file_lbl.setFont<em class="ln">( </em>canda_10 <em class="ln">)<br/></em>self.file_lbl.setText<em class="ln">( </em>"Enter File Name: " <em class="ln">)<br/></em>self.file_lbl.setGeometry<em class="ln">( </em>5, 60, 110, 20 <em class="ln">)<br/><br/></em>self.dir_lbl = QLabel<em class="ln">( </em>self<em class="ln">)<br/></em>self.dir_lbl.setStyleSheet<em class="ln">(<br/>        </em>"QLabel {color: rgba(54, 136, 200, 250); "<br/>        "background-color: black; }"<br/>    <em class="ln">)<br/></em>self.dir_lbl.setFont<em class="ln">( </em>canda_8 <em class="ln">)<br/></em>self.dir_lbl.setAlignment<em class="ln">(</em>Qt.AlignCenter<em class="ln">)<br/></em>self.dir_lbl.setGeometry<em class="ln">( </em>0, 120, 270, 20 <em class="ln">)</em></span></pre><p id="d178" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来是文本框的代码，在PyQt5中称为“QLineEdit”。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="b194" class="lh li iq ld b gy lj lk l ll lm">self.code_txt = QLineEdit<em class="ln">( </em>self <em class="ln">)<br/></em>self.code_txt.setStyleSheet<em class="ln">(<br/>         </em>"QLineEdit {background-color: rgba(46, 46, 46, 240);"<br/>         "color: rgba(162,201,229,255); border: black;}"<br/>     )<em class="ln"><br/></em>self.code_txt.setFont<em class="ln">(</em>incon_10<em class="ln">)<br/></em>self.code_txt.setGeometry<em class="ln">( </em>QRect<em class="ln">( </em>5, 30, 260, 20 <em class="ln">) )<br/></em>self.code_txt.setFocus<em class="ln">()<br/><br/></em>self.file_txt = QLineEdit<em class="ln">( </em>self <em class="ln">)<br/></em>self.file_txt.setStyleSheet<em class="ln">(<br/>         </em>"QLineEdit {background-color: rgba(46, 46, 46, 240); "<br/>         "color: rgba(162,201,229,255); border: black;}"<br/>     )<em class="ln"><br/></em>self.file_txt.setFont<em class="ln">(</em>incon_10<em class="ln">)<br/></em>self.file_txt.setGeometry<em class="ln">( </em>QRect<em class="ln">( </em>5, 85, 100, 20 <em class="ln">) )</em></span></pre><p id="ff0f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">应用程序上有两个按钮。这是他们的代码。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="9745" class="lh li iq ld b gy lj lk l ll lm">qtbutton<em class="ln">(</em>self, 'encode', 110, 160, 50, 30, qcalc,<br/>         canda_10, 'ENCODE', self.encode,<br/>    <em class="ln">)<br/></em>qtbutton<em class="ln">(</em>self, 'dir', 145, 85, 110, 22, qcalc,<br/>         canda_10, 'Choose Directory', self.dir,<br/>    <em class="ln">)</em></span></pre><p id="3357" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ln"> qtbutton() </em>构建一个按钮。<em class="ln"> qtbutton() </em>的代码如下。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="f836" class="lh li iq ld b gy lj lk l ll lm">def qtbutton(self, name, x, y, w, h, style,<br/>             font, title, connection):<br/>    self.name = QPushButton(self)<br/>    self.name.setStyleSheet(style)<br/>    self.name.setFont(font)<br/>    self.name.setText(title)<br/>    self.name.setGeometry(x, y, w, h)<br/>    self.name.clicked.connect(connection)</span></pre><p id="822f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在是时候定义一些函数了。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="d38e" class="lh li iq ld b gy lj lk l ll lm">def mousePressEvent<em class="ln">(</em>self<em class="ln">)</em>:<br/>    self.comm.closeApp.emit<em class="ln">()</em></span></pre><p id="b8b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ln"> mousePressEvent() </em>是PyQt5的内部函数。在应用程序显示屏的黑色背景上点击鼠标左键，发出<em class="ln"> closeApp() </em>信号。</p><p id="04c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当点击“选择目录”时，下一个函数运行。目标路径被格式化，然后显示在<em class="ln"> dir_lbl() </em>中。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="fff3" class="lh li iq ld b gy lj lk l ll lm">def dir<em class="ln">(</em>self<em class="ln">)</em>:<br/>    path = self.dirView.getfiles<em class="ln">()[</em>0<em class="ln">] </em>+ r'/'<br/>    self.dir_lbl.setText<em class="ln">(</em>path<em class="ln">)</em></span></pre><p id="e9bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">“编码”按钮的功能收集来自两个文本框和目录标签的输入。以文件名为前缀的路径被分配给变量<em class="ln"> binn </em>和<em class="ln"> txxt </em>。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="67dd" class="lh li iq ld b gy lj lk l ll lm">def encode<em class="ln">(</em>self<em class="ln">)</em>:<br/>    path = self.dir_lbl.text<em class="ln">()<br/>    </em>data = self.code_txt.text<em class="ln">()<br/>    </em>file = self.file_txt.text<em class="ln">()<br/><br/>    </em>binn = f'<em class="ln">{</em>path<em class="ln">}{</em>file<em class="ln">}</em>.bin'<br/>    txxt = f'<em class="ln">{</em>path<em class="ln">}{</em>file<em class="ln">}</em>.txt'<br/>    gkc<em class="ln">( </em>binn, txxt, text=data <em class="ln">)<br/><br/>    </em>self.dir_lbl.clear<em class="ln">()<br/>    </em>self.code_txt.clear<em class="ln">()<br/>    </em>self.file_txt.clear<em class="ln">()<br/>    </em>self.code_txt.setFocus<em class="ln">()</em></span></pre><p id="b8da" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ln">generate _ key _ and _ code()</em>，(<em class="ln"> gkc() </em>)，生成API字符串的密钥和加密代码。标签和文本框被清除，光标重新定位到第一个文本框中。我在下面加入了<em class="ln">generate _ key _ and _ code()</em>的代码。ubEnigma可以从这个库获得。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="e743" class="lh li iq ld b gy lj lk l ll lm">def generate_key_and_code<em class="ln">(</em>bin_name, txt_name, text='api'<em class="ln">)</em>:<br/>    write_key<em class="ln">(</em>'i', bin_name, getRandomKey<em class="ln">())<br/><br/>    </em>myKey = read_key<em class="ln">(</em>'i', bin_name<em class="ln">)<br/>    </em>myMode = 'encrypt'<br/>    myMessage = text<br/><br/>    coded = main<em class="ln">(</em>myMode, myKey, myMessage<em class="ln">)<br/>    </em>write_txt_file<em class="ln">(</em>txt_name, coded<em class="ln">)</em></span></pre><p id="014b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，代码的最后一部分。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="6d0c" class="lh li iq ld b gy lj lk l ll lm">if __name__ == '__main__':<br/>    app = QApplication<em class="ln">([])<br/>    </em>ex  = Encode<em class="ln">()<br/>    </em>ex.show<em class="ln">()<br/>    </em>sys.exit<em class="ln">(</em>app.exec_<em class="ln">())</em></span></pre><p id="b8e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面的代码不是这个程序的一部分。我展示它是为了向您展示如何将加密的API代码合并到您的脚本中。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="febd" class="lh li iq ld b gy lj lk l ll lm">Key     = read_key('i','C:\data\notaapi.bin')<br/>Mode    = 'decrypt'<br/>Message = read_txt_file('C:\data\notaapi.txt')</span></pre><p id="86e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">函数<em class="ln"> read_key() </em>和<em class="ln"> read_txt_file() </em>是ubEnigma的一部分。</p><p id="68d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我只在我的系统上使用它。这个模块本身对于生产级加密来说不够健壮。我写这篇文章的时候还不知道什么是散列值。此外，键码在IDE的调试模式下是公开的。对我来说，这是一个有趣又有教育意义的项目。</p><p id="0924" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑每月5美元订阅Medium。作为会员，你可以无限制地访问媒体上的故事。如果你用我的<a class="ae kl" href="https://zenndogg-52643-medium.com/membership" rel="noopener ugc nofollow">链接</a>注册，我会赚一小笔佣金。</p><p id="8111" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完整代码:</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="a50d" class="lh li iq ld b gy lj lk l ll lm">import sys<br/>from PyQt5.QtCore import <em class="ln">(<br/>    </em>QRect,<br/>    pyqtSignal,<br/>    QObject,<br/>    Qt,<br/>    QStringListModel,<br/><em class="ln">)<br/></em>from PyQt5.QtGui import QFont<br/>from PyQt5.QtWidgets import <em class="ln">(<br/>    </em>QApplication,<br/>    QMainWindow,<br/>    QLabel,<br/>    QLineEdit,<br/>    QFileDialog,<br/><em class="ln">)<br/></em>from qtpy_cfg import <em class="ln">(<br/>    </em>qblack,<br/>    qbutton_dim,<br/>    qtbutton,<br/>    qbutton_calc,<br/><em class="ln">)<br/></em>sys.path.insert<em class="ln">( </em>1, 'C:\\Users\\mount\\source\\repos\\MyDashboard\\MODULES\\'<em class="ln">)<br/></em>from ubEnigma import generate_key_and_code as gkc<br/><br/><br/><br/>class Communicate<em class="ln">(</em>QObject<em class="ln">)</em>:<br/>    closeApp = pyqtSignal<em class="ln">()<br/><br/><br/><br/></em>class Dir_Dialog<em class="ln">(</em>QFileDialog<em class="ln">)</em>:<br/><br/>    def __init__<em class="ln">(</em>self, parent=None<em class="ln">)</em>:<br/>        super<em class="ln">( </em>Dir_Dialog, self <em class="ln">)</em>.__init__<em class="ln">( </em>parent <em class="ln">)<br/><br/><br/>    </em>def getfiles<em class="ln">(</em>self<em class="ln">)</em>:<br/>        dlg = QFileDialog<em class="ln">()<br/>        </em>dlg.setFileMode<em class="ln">( </em>QFileDialog.Directory <em class="ln">)<br/>        </em>paths = QStringListModel<em class="ln">()<br/><br/>        </em>if dlg.exec_<em class="ln">()</em>:<br/>            path = dlg.selectedFiles<em class="ln">()<br/>            </em>return path<br/><br/><br/><br/>class Encode<em class="ln">(</em>QMainWindow<em class="ln">)</em>:<br/><br/>    def __init__<em class="ln">(</em>self<em class="ln">)</em>:<br/>        super<em class="ln">()</em>.__init__<em class="ln">()<br/>        </em>self.left   = 1222<br/>        self.top    = 23<br/>        self.width  = 270<br/>        self.height = 200<br/>        self.comm   = Communicate<em class="ln">()<br/>        </em>self.comm.closeApp.connect<em class="ln">( </em>self.close <em class="ln">)<br/>        </em>self.dirView = Dir_Dialog<em class="ln">()<br/><br/>        </em>qblack<em class="ln">(</em>self<em class="ln">)<br/>        </em>qcalc    = qbutton_calc<em class="ln">( </em>self <em class="ln">)<br/>        </em>canda_10 = QFont<em class="ln">( </em>'Candalara', 10 <em class="ln">)<br/>        </em>canda_8  = QFont<em class="ln">( </em>'Candalara', 8 <em class="ln">)<br/>        </em>incon_10 = QFont<em class="ln">( </em>'Inconsolata', 10<em class="ln">)<br/><br/>        </em>self.code_lbl = QLabel<em class="ln">( </em>self<em class="ln">)<br/>        </em>self.code_lbl.setStyleSheet<em class="ln">(<br/>                </em>"QLabel {color: rgba(80,130,255,255); "<br/>                "background-color: black;}"<br/>            <em class="ln">)<br/>        </em>self.code_lbl.setFont<em class="ln">( </em>canda_10 <em class="ln">)<br/>        </em>self.code_lbl.setText<em class="ln">( </em>"Enter Code String:" <em class="ln">)<br/>        </em>self.code_lbl.setGeometry<em class="ln">( </em>5, 5, 105, 20 <em class="ln">)<br/><br/>        </em>self.file_lbl = QLabel<em class="ln">( </em>self<em class="ln">)<br/>        </em>self.file_lbl.setStyleSheet<em class="ln">(<br/>                </em>"QLabel {color: rgba(80,130,255,255); "<br/>                "background-color: black;}"<br/>            <em class="ln">)<br/>        </em>self.file_lbl.setFont<em class="ln">( </em>canda_10 <em class="ln">)<br/>        </em>self.file_lbl.setText<em class="ln">( </em>"Enter File Name: " <em class="ln">)<br/>        </em>self.file_lbl.setGeometry<em class="ln">( </em>5, 60, 110, 20 <em class="ln">)<br/><br/>        </em>self.dir_lbl = QLabel<em class="ln">( </em>self<em class="ln">)<br/>        </em>self.dir_lbl.setStyleSheet<em class="ln">(<br/>                </em>"QLabel {color: rgba(54, 136, 200, 250); "<br/>                "background-color: black; }"<br/>            <em class="ln">)<br/>        </em>self.dir_lbl.setFont<em class="ln">( </em>canda_8 <em class="ln">)<br/>        </em>self.dir_lbl.setAlignment<em class="ln">(</em>Qt.AlignCenter<em class="ln">)<br/>        </em>self.dir_lbl.setGeometry<em class="ln">( </em>0, 120, 270, 20 <em class="ln">)<br/><br/>        </em>self.code_txt = QLineEdit<em class="ln">( </em>self <em class="ln">)<br/>        </em>self.code_txt.setStyleSheet<em class="ln">(<br/>                </em>"QLineEdit {background-color: rgba(46,46,46,240); "<br/>                "color: rgba(162,201,229,255); border: black;}"<br/>            <em class="ln">)<br/>        </em>self.code_txt.setFont<em class="ln">(</em>incon_10<em class="ln">)<br/>        </em>self.code_txt.setGeometry<em class="ln">( </em>QRect<em class="ln">( </em>5, 30, 260, 20 <em class="ln">) )<br/>        </em>self.code_txt.setFocus<em class="ln">()<br/><br/>        </em>self.file_txt = QLineEdit<em class="ln">( </em>self <em class="ln">)<br/>        </em>self.file_txt.setStyleSheet<em class="ln">(<br/>                </em>"QLineEdit {background-color: rgba(46,46,46,240); "<br/>                "color: rgba(162,201,229,255); border: black;}"<br/>            <em class="ln">)<br/>        </em>self.file_txt.setFont<em class="ln">(</em>incon_10<em class="ln">)<br/>        </em>self.file_txt.setGeometry<em class="ln">( </em>QRect<em class="ln">( </em>5, 85, 100, 20 <em class="ln">))<br/><br/>        </em>qtbutton<em class="ln">(</em>self, 'encode', 110, 160, 50, 30, qcalc,<br/>                 canda_10, 'ENCODE', self.encode<em class="ln">)<br/>        </em>qtbutton<em class="ln">(</em>self, 'dir', 145, 85, 110, 22, qcalc,<br/>                 canda_10, 'Choose Directory', self.dir)<em class="ln"><br/><br/><br/>    </em>def mousePressEvent<em class="ln">(</em>self<em class="ln">)</em>:<br/>        self.comm.closeApp.emit<em class="ln">()<br/><br/>    </em>def dir<em class="ln">(</em>self<em class="ln">)</em>:<br/>        path = self.dirView.getfiles<em class="ln">()[</em>0<em class="ln">] </em>+ r'/'<br/>        self.dir_lbl.setText<em class="ln">(</em>path<em class="ln">)<br/><br/>    </em>def encode<em class="ln">(</em>self<em class="ln">)</em>:<br/>        path = self.dir_lbl.text<em class="ln">()<br/>        </em>data = self.code_txt.text<em class="ln">()<br/>        </em>file = self.file_txt.text<em class="ln">()<br/><br/>        </em>binn = f'<em class="ln">{</em>path<em class="ln">}{</em>file<em class="ln">}</em>.bin'<br/>        txxt = f'<em class="ln">{</em>path<em class="ln">}{</em>file<em class="ln">}</em>.txt'<br/>        gkc<em class="ln">( </em>binn, txxt, text=data <em class="ln">)<br/><br/>        </em>self.dir_lbl.clear<em class="ln">()<br/>        </em>self.code_txt.clear<em class="ln">()<br/>        </em>self.file_txt.clear<em class="ln">()<br/>        </em>self.code_txt.setFocus<em class="ln">()<br/><br/><br/><br/></em>if __name__ == '__main__':<br/>    app = QApplication<em class="ln">([])<br/>    </em>ex  = Encode<em class="ln">()<br/>    </em>ex.show<em class="ln">()<br/>    </em>sys.exit<em class="ln">(</em>app.exec_<em class="ln">())</em></span></pre><p id="74a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ln"> qtpy_cfg() </em>函数:</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="ceda" class="lh li iq ld b gy lj lk l ll lm">def qblack(self):<br/>    self.setWindowFlags(Qt.FramelessWindowHint)<br/>    self.setGeometry(self.left,self.top,self.width,self.height)<br/>    self.setAutoFillBackground(True)<br/>    p = self.palette()<br/>    p.setColor(self.backgroundRole(), Qt.black)<br/>    self.setPalette(p)<br/><br/><br/>def qtbutton(self, name, x, y, w, h, style,<br/>             font, title, connection):<br/>    self.name = QPushButton(self)<br/>    self.name.setStyleSheet(style)<br/>    self.name.setFont(font)<br/>    self.name.setText(title)<br/>    self.name.setGeometry(x, y, w, h)<br/>    self.name.clicked.connect(connection)<br/><br/><br/>def qbutton_calc(self):<br/>    return "QPushButton {color: rgba(54, 136, 200, 250); " \<br/>           "background-color: rgba(29, 29, 29, 150); " \<br/>           "border: black; border-width: 2px;}"<br/><br/><br/>def qbutton_dim(self):<br/>    return "QPushButton {color: rgba(54, 136, 200, 250); " \<br/>           "background-color: black; }"</span></pre><p id="afe1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望你喜欢阅读。请留言评论。我乐于接受赞美、批评和巧克力饼干。</p></div></div>    
</body>
</html>