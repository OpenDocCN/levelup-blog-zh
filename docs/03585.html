<html>
<head>
<title>ES6 Deep Dive: Iterables &amp; Iterators</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ES6深度探讨:可迭代程序和迭代器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/es6-deep-dive-iterables-iterators-fee729db692f?source=collection_archive---------16-----------------------#2020-05-17">https://levelup.gitconnected.com/es6-deep-dive-iterables-iterators-fee729db692f?source=collection_archive---------16-----------------------#2020-05-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8e29ce28a9095b9934d95d1431d816d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CgdwZ_Cceags89Mt"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@jeremybishop?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">杰瑞米·毕肖普</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><h1 id="1424" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">JavaScript ES6中的数据结构循环</h1><p id="35eb" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">今天，我将仔细看看ECMAScript标准第6版(通常称为ES6)中导航数据结构的新方法。在2015年JavaScript中增加的所有升级和语法糖中，现在也支持迭代器和可迭代对象。这些不仅在迭代数组和字符串时允许更少的代码，而且支持新的集合，比如映射和集合，以及为它们创建定制对象和迭代器。你可以认为这些类似于(但不相同于)类固醇上for-in循环中发生的循环。</p><p id="a880" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">好的，你可能想知道，迭代器和可迭代对象是什么？一个<strong class="ld ir">可迭代的</strong>是一个可以迭代的顺序数据结构。Iterables也可以有自己的访问方法，该方法定义了它的<strong class="ld ir">迭代器</strong>。这使得iterables可以公开访问。迭代器<strong class="ld ir"> </strong>就像一个指针，以特定的方式遍历集合。正如我们稍后将要讨论的，ES6中的这些新的自定义迭代器可以循环遍历不仅仅是一个简单的数组。</p><p id="1b55" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这是一大堆术语，我将用几分钟的时间用一个例子来解释。但是对于初学者来说，让我们看看for-of循环中ES6迭代器的默认用法。</p><h2 id="283f" class="me ke iq bd kf mf mg dn kj mh mi dp kn lm mj mk kr lq ml mm kv lu mn mo kz mp bi translated">for-of循环</h2><p id="ff3e" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在ES5和之前的版本中，我们习惯于看到for和while循环来迭代数组或字符串。现在，有了ES6，我们可以跳过一个数组或一个字符串，而不必为这些循环设置参数。默认情况下，for-of循环知道如何顺序迭代这些数据类型:</p><figure class="mq mr ms mt gt jr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="c30e" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在这些例子中，数组和字符串现在都是<em class="mw">可迭代的</em>数据结构，当我们使用for-of循环迭代集合时，我们为<em class="mw">迭代器</em>声明一个变量名，以使用<em class="mw"> — </em>，如<code class="fe mx my mz na b">x</code>或<code class="fe mx my mz na b">char</code>。</p><h2 id="8490" class="me ke iq bd kf mf mg dn kj mh mi dp kn lm mj mk kr lq ml mm kv lu mn mo kz mp bi translated">添加地图和集合</h2><p id="b928" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">除了快速导航数组和字符串之外，for-of循环还可以用在地图和集合上——这两者现在在ES6中都可以使用。两种数据结构都可以使用<code class="fe mx my mz na b">new</code>关键字初始化(遵循伪经典实例化模式)。</p><p id="25eb" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">除了它们的键值对是有序的之外，映射与标准对象没有太大区别。集合更像数组，即有序值的集合，但是每个值在一个集合中只能存在一次。在这篇文章中，我不会过多地讨论地图和集合，但是会展示一个在地图上使用for-of循环的快速示例:</p><figure class="mq mr ms mt gt jr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><h2 id="6d81" class="me ke iq bd kf mf mg dn kj mh mi dp kn lm mj mk kr lq ml mm kv lu mn mo kz mp bi translated">迭代还是…枚举？</h2><p id="0012" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">你可能已经注意到对象没有出现在这里，尽管我在开始的时候提到了iterable对象。原因是现成的<strong class="ld ir"> <em class="mw"> JavaScript对象不是可迭代的数据结构，而是可枚举的</em></strong>——它们不像数组、字符串以及现在的映射和集合那样具有内部顺序。对象包含一个无序的键值对集合。然而，我们仍然可以使用for-in循环来枚举对象的键和/或值。但是，正如我们将看到的，我们也可以在ES6中创建定制的可迭代对象和迭代器。</p><h2 id="23a4" class="me ke iq bd kf mf mg dn kj mh mi dp kn lm mj mk kr lq ml mm kv lu mn mo kz mp bi translated">符号迭代器</h2><p id="e6d0" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">虽然for-of循环默认情况下可以访问数组、字符串、集合和映射，但是ES6也允许使用<code class="fe mx my mz na b">Symbol.iterator</code>定制可迭代项和迭代器。符号是ES6中新的原始数据类型。它为任何规模和复杂度的集合定义了迭代器和迭代过程。它像一个对象上的方法一样工作，因此，<code class="fe mx my mz na b">Symbol.iterator</code>作为一个键存储在一个定制的可迭代对象上。它还可以用来定义在提供的JavaScript数据结构上使用的迭代模式。<code class="fe mx my mz na b">Symbol.iterator</code>也是在幕后发生的代码，使for-of循环默认地为上述数据结构工作。</p><p id="efdf" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">为了简单起见，并感受一下这个符号是如何工作的，让我们构建一个迭代器，它将反向遍历数组。在这个例子中，我们不会将这个符号作为一个键添加到一个自定义对象中，因为它将在数组中使用——所以这个是一个独立的迭代器。但是如果<code class="fe mx my mz na b">Symbol.iterator</code>是自定义iterable对象中的一个键，那么它的结构将是相似的。首先，我们将创建反向迭代器:</p><figure class="mq mr ms mt gt jr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="157d" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">类似于for循环，我们将跟踪索引并从集合的末尾开始(第3行)。<code class="fe mx my mz na b">Symbol.iterator</code>使用<code class="fe mx my mz na b">next</code>键定义何时以及如何迭代(第5行)。所有迭代器都依赖下一个方法来定义它的迭代模式。在我们的反向迭代器中，每次调用<code class="fe mx my mz na b">next()</code>时，它将反向遍历整个结构(第6行)，当<code class="fe mx my mz na b">i</code>小于零时停止(第7行)。</p><p id="aaeb" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在，我们可以在for-of循环中调用reverse，然后<em class="mw">瞧</em>！在数组上反向迭代:</p><figure class="mq mr ms mt gt jr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="9242" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">注意，在上面的例子中，迭代器并不局限于for-of循环:它们也可以和ES6中的spread操作符一起使用。在第8行，spread操作符将<code class="fe mx my mz na b">reverse</code>迭代器应用于我们的数组，将结果展开。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><p id="ef61" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">最后，我们看了一下ES6让我们使用for-of循环遍历大量数据类型的一些快捷方式——从数组到字符串，以及新提供的集合和映射。我们还接触了用<code class="fe mx my mz na b">Symbol.iterator</code>构建我们自己的迭代器的介绍。显而易见，熟悉JavaScript的ES6中的for-of循环、迭代器和可重复项不仅会缩短我们的代码，还会打开自定义数据结构和工具的另一个维度，我们可以使用它们来导航和访问它们存储的信息。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><p id="ce59" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">参考资料—更深入地了解ES6迭代:</p><ul class=""><li id="8aef" class="ni nj iq ld b le lz li ma lm nk lq nl lu nm ly nn no np nq bi translated"><a class="ae kc" href="https://www.digitalocean.com/community/tutorials/js-iterables" rel="noopener ugc nofollow" target="_blank">Vijay pra sanna介绍JavaScript </a>中的可迭代程序和迭代器</li><li id="3bdd" class="ni nj iq ld b le nr li ns lm nt lq nu lu nv ly nn no np nq bi translated"><a class="ae kc" href="https://hacks.mozilla.org/2015/04/es6-in-depth-iterators-and-the-for-of-loop/" rel="noopener ugc nofollow" target="_blank"> ES6深度:迭代器和for-of循环</a>杰森·奥伦多夫著</li><li id="adaa" class="ni nj iq ld b le nr li ns lm nt lq nu lu nv ly nn no np nq bi translated">蒂亚戈·洛佩斯·费雷拉的<a class="ae kc" href="https://www.freecodecamp.org/news/demystifying-es6-iterables-iterators-4bdd0b084082/" rel="noopener ugc nofollow" target="_blank">揭秘ES6可迭代程序&amp;迭代器</a></li><li id="16e9" class="ni nj iq ld b le nr li ns lm nt lq nu lu nv ly nn no np nq bi translated">Arfat Salman的《JavaScript中ES6迭代器的简单指南及示例》</li><li id="2afc" class="ni nj iq ld b le nr li ns lm nt lq nu lu nv ly nn no np nq bi translated">Deepak Gupta的Javascript ES6-Iterables和迭代器</li><li id="0e98" class="ni nj iq ld b le nr li ns lm nt lq nu lu nv ly nn no np nq bi translated"><a class="ae kc" href="https://medium.com/better-programming/what-is-the-difference-between-for-in-and-for-of-in-javascript-650952654e97" rel="noopener">JavaScript中的' for…in '和' for…of '有什么区别？</a>作者乔纳森·许</li></ul></div></div>    
</body>
</html>