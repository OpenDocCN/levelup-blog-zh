<html>
<head>
<title>How to Send WhatsApp Messages With Laravel</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ç”¨Laravelå‘é€WhatsAppæ¶ˆæ¯</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/how-to-send-whatsapp-messages-with-laravel-51b6dcca9369?source=collection_archive---------9-----------------------#2020-10-26">https://levelup.gitconnected.com/how-to-send-whatsapp-messages-with-laravel-51b6dcca9369?source=collection_archive---------9-----------------------#2020-10-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/894cd4affda5e3ec074b296866ee02df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OKl_dVt2hzUnRchH.png"/></div></div></figure><div class=""/><p id="9371" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸¾ä¸¤ä¸ªæˆ‘ä»¬å–œæ¬¢çš„ä¸œè¥¿:WhatsApp messageså’ŒLaravel frameworkã€‚å°†å®ƒä»¬æ··åˆåœ¨ä¸€èµ·ã€‚ä½ å¾—åˆ°äº†ä»€ä¹ˆï¼Ÿæ‰‹æœºçš„ä¹è¶£ï¼</p><p id="1805" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æœ¬æ•™ç¨‹å‘æ‚¨å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªå‘é€å’Œå“åº”WhatsAppæ¶ˆæ¯çš„Laravelåº”ç”¨ç¨‹åºã€‚</p><p id="d745" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‚¨å°†éœ€è¦:</p><ul class=""><li id="9418" class="kw kx jb ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">PHPå¼€å‘å¹³å°(Laravel 8éœ€è¦PHP 7.3æˆ–æ›´é«˜ç‰ˆæœ¬)</li><li id="d764" class="kw kx jb ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">ä½ æ‰‹æœºä¸Šçš„WhatsApp</li></ul><h1 id="c706" class="lk ll jb bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">Vonage APIå¸æˆ·</h1><p id="5ec0" class="pw-post-body-paragraph jy jz jb ka b kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">è¦å®Œæˆæœ¬æ•™ç¨‹ï¼Œæ‚¨å°†éœ€è¦ä¸€ä¸ª<a class="ae mn" href="http://developer.nexmo.com/ed?c=blog_text&amp;ct=2020-09-29-send-whatsapp-messages-with-laravel-8-dr" rel="noopener ugc nofollow" target="_blank"> Vonage APIå¸æˆ·</a>ã€‚å¦‚æœæ‚¨è¿˜æ²¡æœ‰ï¼Œæ‚¨å¯ä»¥ä»Šå¤©å°±<a class="ae mn" href="http://developer.nexmo.com/ed?c=blog_text&amp;ct=2020-09-29-send-whatsapp-messages-with-laravel-8-dr" rel="noopener ugc nofollow" target="_blank">æ³¨å†Œ</a>å¹¶å¼€å§‹ä½¿ç”¨å…è´¹ä¿¡ç”¨ç‚¹æ•°è¿›è¡Œæ„å»ºã€‚</p><p id="d6a2" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸€æ—¦ä½ æœ‰äº†ä¸€ä¸ªå¸æˆ·ï¼Œä½ å¯ä»¥åœ¨<a class="ae mn" href="http://developer.nexmo.com/ed?c=blog_text&amp;ct=2020-09-29-send-whatsapp-messages-with-laravel-8-dr" rel="noopener ugc nofollow" target="_blank"> Vonage APIä»ªè¡¨æ¿</a>çš„é¡¶éƒ¨æ‰¾åˆ°ä½ çš„APIå¯†åŒ™å’ŒAPIç§˜å¯†ã€‚</p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/e045d82a72618a4d0e4d93e195119ee1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KgRzX48ZZRBY6gq9.png"/></div></div></figure><h1 id="c63e" class="lk ll jb bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">è®©ä»£ç è¿è¡Œèµ·æ¥</h1><p id="fe1c" class="pw-post-body-paragraph jy jz jb ka b kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">è¿™ä¸ªé¡¹ç›®åœ¨GitHubçš„<a class="ae mn" href="https://github.com/nexmo-community/laravel-messages" rel="noopener ugc nofollow" target="_blank">nexmo-community/laravel-messages</a>ä¸Šï¼Œæ‰€ä»¥ç»§ç»­æŠŠè¿™ä¸ªåº“å…‹éš†åˆ°ä½ çš„è®¡ç®—æœºä¸Šã€‚</p><p id="517e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿è¡Œå‘½ä»¤<code class="fe ms mt mu mv b">composer install</code>æ¥è·å¾—è¿™ä¸ªé¡¹ç›®æ‰€éœ€çš„ä¾èµ–é¡¹ã€‚</p><p id="6193" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™ä¸ªåº”ç”¨ç¨‹åºä½¿ç”¨<code class="fe ms mt mu mv b">phpdotenv</code>åº“æ¥ç®¡ç†å®ƒåœ¨å¼€å‘å¹³å°ä¸Šçš„é…ç½®ã€‚å°†æ–‡ä»¶<code class="fe ms mt mu mv b">.env.example</code>å¤åˆ¶åˆ°<code class="fe ms mt mu mv b">.env</code>å¹¶æ ¹æ®éœ€è¦ç¼–è¾‘æ–‡ä»¶ã€‚ç‰¹åˆ«æ˜¯ä½ è¦æ›´æ–°æ–‡ä»¶æœ«å°¾çš„<code class="fe ms mt mu mv b">NEXMO_API_KEY</code>å’Œ<code class="fe ms mt mu mv b">NEXMO_API_SECRET</code>è¡Œæ¥è¿æ¥ä½ çš„Vonageè´¦å·(æˆ‘ä»¬ä»¥å‰å«Nexmoï¼Œæ—§ä¹ éš¾æ”¹ï¼)</p><p id="d348" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åº”ç”¨ç¨‹åºå·²ç»å‡†å¤‡å°±ç»ªï¼ä»ä»¥ä¸‹å†…å®¹å¼€å§‹:</p><pre class="mo mp mq mr gt mw mv mx my aw mz bi"><span id="42fa" class="na ll jb mv b gy nb nc l nd ne">php artisan serve</span></pre><p id="be43" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™å°†åœ¨ç«¯å£8000ä¸Šè¿è¡Œæ‚¨çš„åº”ç”¨ç¨‹åºã€‚åœ¨ç»§ç»­ä¹‹å‰ï¼Œæ£€æŸ¥ä¸€ä¸‹ä½ åœ¨<a class="ae mn" href="http://localhost:8000" rel="noopener ugc nofollow" target="_blank"> http://localhost:8000 </a>ä¸Šæ˜¯å¦æœ‰ä¸€ä¸ªLaravelä¸»é¡µã€‚</p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nf"><img src="../Images/3445521925cb3e2702481822148a901e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yLNCXpKITG5HtgiK.png"/></div></div></figure><h1 id="db93" class="lk ll jb bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">è®¾ç½®Ngrok</h1><p id="a7a3" class="pw-post-body-paragraph jy jz jb ka b kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">ç”±äºåº”ç”¨ç¨‹åºéœ€è¦èƒ½å¤Ÿæ¥æ”¶åŒå‘æ¶ˆæ¯é€šä¿¡çš„ä¼ å…¥webhooksï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§å…è®¸å…¬å…±URLè®¿é—®devå¹³å°çš„æ–¹æ³•ã€‚è¿™ä¸ªæˆ‘ä¸€èˆ¬ç”¨<a class="ae mn" href="https://ngrok.com" rel="noopener ugc nofollow" target="_blank">Ngrok</a>ï¼›è¿™æ˜¯ä¸€ä¸ªæå¥½çš„å·¥å…·ã€‚</p><p id="5399" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¯åŠ¨åˆ°ç«¯å£8000çš„Ngrokéš§é“(æˆ–è€…æ‚¨çš„åº”ç”¨ç¨‹åºè¿è¡Œçš„ä»»ä½•ç«¯å£):</p><pre class="mo mp mq mr gt mw mv mx my aw mz bi"><span id="06f0" class="na ll jb mv b gy nb nc l nd ne">ngrok http 8000</span></pre><p id="0bd4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™å°†å¯åŠ¨ä¸€ä¸ªç»ˆç«¯å†…æ§åˆ¶å°ï¼Œçœ‹èµ·æ¥å¦‚ä¸‹æ‰€ç¤º:</p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ng"><img src="../Images/ba11f507117fc44005cb58ea38a3aa2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WAaoHicquKsm4ltE.png"/></div></div></figure><p id="28d2" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¤åˆ¶â€œè½¬å‘â€https URLã€‚æˆ‘ä»¬å°†å¾ˆå¿«éœ€è¦å®ƒæ¥é…ç½®Vonageæ¶ˆæ¯APIæ²™ç®±ã€‚æ‚¨è¿˜å¯ä»¥é€šè¿‡åœ¨æµè§ˆå™¨ä¸­è¯·æ±‚æ­¤URLå¹¶çœ‹åˆ°ä¸ä»¥å‰ç›¸åŒçš„Laravelç™»å½•é¡µé¢æ¥æ£€æŸ¥ä¸€åˆ‡æ˜¯å¦æ­£å¸¸ã€‚</p><h1 id="2f35" class="lk ll jb bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">é…ç½®æ¶ˆæ¯æ²™ç®±</h1><p id="1873" class="pw-post-body-paragraph jy jz jb ka b kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">ä¸ºäº†å°†ä¼ å…¥çš„WhatsAppæ¶ˆæ¯å®šå‘åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦åœ¨<a class="ae mn" href="https://dashboard.nexmo.com" rel="noopener ugc nofollow" target="_blank">ä»ªè¡¨ç›˜</a>ä¸­åšä¸€ç‚¹é…ç½®ã€‚åœ¨â€œMessages and Dispatchâ€ä¸‹ï¼Œå•å‡»â€œSandboxâ€ï¼Œæˆ‘ä»¬ä»Šå¤©å°†ä½¿ç”¨Messages APIæ²™ç®±è¿›è¡Œæ¼”ç¤ºï¼Œä½†å¦‚æœæ‚¨æœ‰WhatsAppå•†ä¸šå¸æˆ·ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ–¹æ³•å‘ä»»ä½•ç”¨æˆ·å‘é€æ¶ˆæ¯ï¼Œè€Œæ— éœ€æ²™ç®±æˆ–ç™½åå•æµç¨‹ã€‚</p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nf"><img src="../Images/72c364b9aa145d8f0781ec843f7ae5a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1WjE9J1p35xnmRBF.png"/></div></div></figure><p id="5083" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é€šè¿‡æ‰«æäºŒç»´ç æˆ–å‘æ˜¾ç¤ºçš„å·ç å‘é€ç¥å¥‡çš„æ–‡å­—ï¼Œå°†æ‚¨çš„ç”µè¯å·ç æ·»åŠ åˆ°æ²™ç›’ä¸­ã€‚æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘è¿™ä¹ˆå–œæ¬¢â€œè®¤è¯æ–¹æ³•â€è¿™ä¸ªç¥å¥‡çš„è¯ï¼Œä½†å®ƒçœ‹èµ·æ¥çœŸçš„å¾ˆç¥å¥‡ï¼</p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nf"><img src="../Images/43ada0eeba3d561b0226e1c4aaafb46d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8yqTzkfOJF7I7KZv.png"/></div></div></figure><p id="780d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ˜¯æ—¶å€™é…ç½®webhooksäº†ï¼Œæ‚¨å°†éœ€è¦æ—©å…ˆä»ngrokæ§åˆ¶å°å¤åˆ¶çš„URLã€‚</p><ul class=""><li id="c2fe" class="kw kx jb ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">å…¥åº“åº”è¯¥æ˜¯<code class="fe ms mt mu mv b">[url you copied earlier]/webhooks/inbound</code></li><li id="6180" class="kw kx jb ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">çŠ¶æ€åº”è¯¥æ˜¯<code class="fe ms mt mu mv b">[url you copied earlier]/webhooks/status</code></li></ul><p id="c4f4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åˆ«å¿˜äº†åœ¨è¿™é‡ŒæŒ‰â€œä¿å­˜â€ï¼é‚£ä¼¼ä¹æ¯”å®ƒåº”è¯¥çš„æ›´ç»å¸¸åœ°ç»Šå€’æˆ‘ã€‚</p><h1 id="025d" class="lk ll jb bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">ä»£ç å†…éƒ¨</h1><p id="4750" class="pw-post-body-paragraph jy jz jb ka b kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªåº”ç”¨ç¨‹åºä¸­è®¾ç½®çš„å„ç§è·¯ç”±ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•ä¸Messages APIäº¤äº’ã€‚</p><h1 id="14ef" class="lk ll jb bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">ä»æ‹‰å‹’ç»´å°”å‘é€</h1><p id="d4d2" class="pw-post-body-paragraph jy jz jb ka b kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">å¼€å§‹ä½¿ç”¨è¿™ä¸ªåº”ç”¨ç¨‹åºçš„æœ€å¥½åœ°æ–¹æ˜¯åœ¨<a class="ae mn" href="http://localhost:8000/messages" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/messages</a>ï¼Œåœ¨é‚£é‡Œä½ å¯ä»¥æ·»åŠ ä½ çš„ç”µè¯å·ç å¹¶ç»™è‡ªå·±å‘é€æ¶ˆæ¯ã€‚</p><blockquote class="nh ni nj"><p id="ec30" class="jy jz nk ka b kb kc kd ke kf kg kh ki nl kk kl km nm ko kp kq nn ks kt ku kv ij bi translated"><em class="jb">è¯·æ³¨æ„ï¼Œè¯¥æ•°å­—éœ€è¦é‡‡ç”¨å›½é™…(E.164)æ ¼å¼ï¼Œä¸å¸¦å‰å¯¼+ã€‚æ‰€ä»¥å¯¹äºç¾å›½å·ç ï¼Œä»1å¼€å§‹ï¼Œç„¶ååŠ ä¸ŠåŒºå·ã€‚å¯¹äºè‹±å›½ï¼Œä»44å¼€å§‹ï¼Œç„¶ååŠ ä¸Šä¸å¸¦å‰å¯¼0çš„æ•´æ•°ã€‚</em></p></blockquote><p id="2ce2" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æäº¤è¡¨å•æ—¶ä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µ:</p><pre class="mo mp mq mr gt mw mv mx my aw mz bi"><span id="069f" class="na ll jb mv b gy nb nc l nd ne">// in routes/web.php</span><span id="598b" class="na ll jb mv b gy no nc l nd ne">Route::post('/message', function(Request $request) {<br/>    // TODO: validate incoming params first!</span><span id="cae2" class="na ll jb mv b gy no nc l nd ne">$url = "<a class="ae mn" href="https://messages-sandbox.nexmo.com/v0.1/messages" rel="noopener ugc nofollow" target="_blank">https://messages-sandbox.nexmo.com/v0.1/messages</a>";<br/>    $params = ["to" =&gt; ["type" =&gt; "whatsapp", "number" =&gt; $request-&gt;input('number')],<br/>        "from" =&gt; ["type" =&gt; "whatsapp", "number" =&gt; "14157386170"],<br/>        "message" =&gt; [<br/>            "content" =&gt; [<br/>                "type" =&gt; "text",<br/>                "text" =&gt; "Hello from Vonage and Laravel :) Please reply to this message with a number between 1 and 100"<br/>            ]<br/>        ]<br/>    ];<br/>    $headers = ["Authorization" =&gt; "Basic " . base64_encode(env('NEXMO_API_KEY') . ":" . env('NEXMO_API_SECRET'))];</span><span id="80f0" class="na ll jb mv b gy no nc l nd ne">$client = new \GuzzleHttp\Client();<br/>    $response = $client-&gt;request('POST', $url, ["headers" =&gt; $headers, "json" =&gt; $params]);<br/>    $data = $response-&gt;getBody();<br/>    Log::Info($data);</span><span id="9674" class="na ll jb mv b gy no nc l nd ne">return view('thanks');<br/>});</span></pre><p id="8cb5" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™ä¸ªè·¯ç”±ä½¿ç”¨Guzzleå‘Messagesæ²™ç®±å‘é€POSTè¯·æ±‚ï¼Œå¦‚æœå‡­è¯æ­£ç¡®å¹¶ä¸”æä¾›çš„ç”µè¯å·ç åœ¨åº”ç”¨ç¨‹åºçš„ç™½åå•ä¸­ï¼Œå®ƒå°†å‘é€æ‚¨å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°çš„æ¶ˆæ¯ã€‚è¯¥æ¶ˆæ¯æç¤ºç”¨æˆ·å›å¤ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ®µä»£ç ã€‚</p><h1 id="b516" class="lk ll jb bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">æ¥æ”¶å’Œå›å¤WhatsAppä¿¡æ¯</h1><p id="8bf8" class="pw-post-body-paragraph jy jz jb ka b kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">éšç€webhooksåœ¨ä»ªè¡¨æ¿ä¸­çš„é…ç½®å’ŒNgrokéš§é“çš„è¿è¡Œï¼Œæœ¬åœ°å¼€å‘åº”ç”¨ç¨‹åºå¯ä»¥æ¥æ”¶ä¼ å…¥çš„WhatsAppæ¶ˆæ¯ã€‚å¦‚æœæ‚¨å·²ç»å›ç­”äº†æä¾›ä¸€ä¸ªæ•°å­—çš„æŒ‘æˆ˜ï¼Œé‚£ä¹ˆæ‚¨çŸ¥é“æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆğŸ™‚</p><p id="6dff" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä»£ç å¦‚ä¸‹:</p><pre class="mo mp mq mr gt mw mv mx my aw mz bi"><span id="8d8b" class="na ll jb mv b gy nb nc l nd ne">// in routes/web.php</span><span id="8207" class="na ll jb mv b gy no nc l nd ne">Route::post('/webhooks/inbound', function(Request $request) {<br/>    $data = $request-&gt;all();</span><span id="57fa" class="na ll jb mv b gy no nc l nd ne">$text = $data['message']['content']['text'];<br/>    $number = intval($text);<br/>    Log::Info($number);<br/>    if($number &gt; 0) {<br/>        $random = rand(1, 8);<br/>        Log::Info($random);<br/>        $respond_number = $number * $random;<br/>        Log::Info($respond_number);<br/>        $url = "<a class="ae mn" href="https://messages-sandbox.nexmo.com/v0.1/messages" rel="noopener ugc nofollow" target="_blank">https://messages-sandbox.nexmo.com/v0.1/messages</a>";<br/>        $params = ["to" =&gt; ["type" =&gt; "whatsapp", "number" =&gt; $data['from']['number']],<br/>            "from" =&gt; ["type" =&gt; "whatsapp", "number" =&gt; "14157386170"],<br/>            "message" =&gt; [<br/>                "content" =&gt; [<br/>                    "type" =&gt; "text",<br/>                    "text" =&gt; "The answer is " . $respond_number . ", we multiplied by " . $random . "."<br/>                ]<br/>            ]<br/>        ];<br/>        $headers = ["Authorization" =&gt; "Basic " . base64_encode(env('NEXMO_API_KEY') . ":" . env('NEXMO_API_SECRET'))];</span><span id="e27c" class="na ll jb mv b gy no nc l nd ne">$client = new \GuzzleHttp\Client();<br/>        $response = $client-&gt;request('POST', $url, ["headers" =&gt; $headers, "json" =&gt; $params]);<br/>        $data = $response-&gt;getBody();<br/>    }<br/>    Log::Info($data);<br/>});</span></pre><p id="f1a9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™ä¸ªä¾‹å­å¯èƒ½ä¸å®Œå…¨æ˜¯æ‚¨å¸Œæœ›æ‚¨çš„åº”ç”¨ç¨‹åºåšçš„ï¼Œä½†æ˜¯å®ƒåŒ…æ‹¬äº†æ‚¨å¯èƒ½éœ€è¦çš„æ´»åŠ¨éƒ¨ä»¶ï¼ä¼ å…¥çš„webhookåˆ°è¾¾åï¼Œæˆ‘ä»¬è·å–æ•°æ®å¹¶å°è¯•å°†æ¶ˆæ¯å†…å®¹ä½œä¸ºä¸€ä¸ªæ•´æ•°è¯»å–ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªéšæœºç”Ÿæˆçš„æ•°å­—åšäº†ä¸€ä¸ªæœ‰è¶£çš„æ•°å­¦è¿ç®—ï¼Œå¹¶å‘ç”¨æˆ·å‘é€äº†ä¸€ä¸ªå›å¤ï¼Œå°±åƒæˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ªä»£ç ç¤ºä¾‹ä¸­åšçš„é‚£æ ·ã€‚</p><blockquote class="nh ni nj"><p id="80bc" class="jy jz nk ka b kb kc kd ke kf kg kh ki nl kk kl km nm ko kp kq nn ks kt ku kv ij bi translated"><em class="jb">å¦‚æœä½ æ›´ç†Ÿæ‚‰çš„è¯ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨</em> <a class="ae mn" href="https://laravel.com/docs/8.x/http-client" rel="noopener ugc nofollow" target="_blank"> <em class="jb"> Laravel HTTPå®¢æˆ·ç«¯</em> </a> <em class="jb">æ¥ä»£æ›¿Guzzleã€‚Laravel HTTPå®¢æˆ·ç«¯æ˜¯Guzzleçš„åŒ…è£…å™¨ã€‚</em></p></blockquote><h1 id="c96c" class="lk ll jb bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">çŠ¶æ€æ›´æ–°</h1><p id="efd0" class="pw-post-body-paragraph jy jz jb ka b kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰é…ç½®çš„çŠ¶æ€webhookå—ï¼Ÿå…³äºæ¶ˆæ¯çš„äº‹ä»¶ï¼Œä¾‹å¦‚æäº¤(ä»Vonageå‘é€åˆ°WhatsApp)ã€ä¼ é€’(åˆ°è¾¾ç”¨æˆ·è®¾å¤‡)å’Œé˜…è¯»(ç”¨æˆ·æ‰“å¼€æ¶ˆæ¯)çš„æ—¶é—´ï¼Œéƒ½è¢«ä¼ é€’åˆ°è¿™ä¸ªç«¯ç‚¹ã€‚è¿™ä¸ªåº”ç”¨ç¨‹åºå¹¶æ²¡æœ‰å¯¹ä»–ä»¬åšå¤ªå¤šçš„äº‹æƒ…ï¼Œä½†æ˜¯èƒ½å¤Ÿè®¿é—®ä»–ä»¬å¹¶ä¸”èƒ½å¤Ÿå›å¤ä»–ä»¬æ˜¯å¾ˆæ£’çš„ã€‚</p><p id="d851" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">çŠ¶æ€ç«¯ç‚¹å¯¹äºè°ƒè¯•æ¥è¯´ä¹Ÿéå¸¸æ–¹ä¾¿ã€‚ç¤ºä¾‹åº”ç”¨ç¨‹åºä¸­çš„è·¯çº¿å¦‚ä¸‹æ‰€ç¤º:</p><pre class="mo mp mq mr gt mw mv mx my aw mz bi"><span id="0bb4" class="na ll jb mv b gy nb nc l nd ne">// in routes/web.php</span><span id="5edd" class="na ll jb mv b gy no nc l nd ne">Route::post('/webhooks/status', function(Request $request) {<br/>    $data = $request-&gt;all();<br/>    Log::Info($data);<br/>});</span></pre><p id="fa58" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‰€ä»¥å®ƒåªè®°å½•å‘ç”Ÿçš„æ¯ä¸ªäº‹ä»¶ã€‚åœ¨è°ƒè¯•é—®é¢˜æ—¶ï¼Œæ—¥å¿—è®°å½•éå¸¸æœ‰ä»·å€¼ï¼é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥åœ¨<code class="fe ms mt mu mv b">storage/logs/laravel.log</code>ä¸­æ‰¾åˆ°è¿™äº›æ—¥å¿—ï¼Œå½“æ‚¨å¼€å‘åƒè¿™æ ·çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œå…³æ³¨è¯¥æ–‡ä»¶ä¸­å‘ç”Ÿçš„äº‹æƒ…æ˜¯éå¸¸å€¼å¾—çš„ï¼</p><h1 id="1a34" class="lk ll jb bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">æ‰‹æœºçš„ä¹è¶£</h1><p id="0c53" class="pw-post-body-paragraph jy jz jb ka b kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">å¦‚æœæ‚¨è¿˜æ²¡æœ‰å°è¯•è¿‡ï¼Œé‚£ä¹ˆè¯·ç»§ç»­ä½¿ç”¨æ‚¨çš„åº”ç”¨ç¨‹åºäº«å—WhatsAppèŠå¤©ã€‚</p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/71b2cbd7cca7e2122e6d21b40fa3f9f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oesEUJJB8owMrE3c.png"/></div></div></figure><p id="5648" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä»Šå¤©çš„ä¾‹å­å¾ˆç®€å•ï¼Œä½†å¸Œæœ›èƒ½å¸®åŠ©ä½ å¼€å§‹ä½¿ç”¨WhatsAppå’ŒLaravelã€‚æˆ‘ä»¬å¾ˆæƒ³çŸ¥é“æ‚¨æ„å»ºäº†ä»€ä¹ˆï¼Œæ‰€ä»¥è¯·è®©æˆ‘ä»¬çŸ¥é“ï¼Œå½“ç„¶ï¼Œå¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬ï¼</p><h1 id="2179" class="lk ll jb bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">æ›´å¤šèµ„æº</h1><ul class=""><li id="a8cf" class="kw kx jb ka b kb mi kf mj kj nq kn nr kr ns kv lb lc ld le bi translated">GitHubå›è´­:<a class="ae mn" href="https://github.com/nexmo-community/laravel-messages" rel="noopener ugc nofollow" target="_blank">https://github.com/nexmo-community/laravel-messages</a></li><li id="7f24" class="kw kx jb ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">æˆ‘ä»¬åœ¨Twitchæµä¸Šå»ºç«‹è¿™ä¸ªçš„é‚£å¤©:<a class="ae mn" href="https://youtu.be/aV4IW3v-CTw" rel="noopener ugc nofollow" target="_blank">https://youtu.be/aV4IW3v-CTw</a></li><li id="25ab" class="kw kx jb ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">æ¶ˆæ¯æ²™ç®±çš„æ–‡æ¡£:<a class="ae mn" href="https://developer.nexmo.com/messages/concepts/messages-api-sandbox" rel="noopener ugc nofollow" target="_blank">https://developer . NEX mo . com/Messages/concepts/Messages-API-Sandbox</a></li><li id="8f6c" class="kw kx jb ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">ç”¨äºå°†æ‚¨çš„Laravelåº”ç”¨ç¨‹åºä¸å…¶ä»–Vonage APIsé›†æˆçš„<code class="fe ms mt mu mv b">nexmo-laravel</code>åº“<a class="ae mn" href="https://github.com/Nexmo/nexmo-laravel" rel="noopener ugc nofollow" target="_blank">https://github.com/Nexmo/nexmo-laravel</a></li></ul></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><p id="d263" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nk">åŸè½½äº2020å¹´10æœˆ26æ—¥https://www.nexmo.com</em><em class="nk">T21</em><a class="ae mn" href="https://www.nexmo.com/blog/2020/10/26/send-whatsapp-messages-with-laravel-dr" rel="noopener ugc nofollow" target="_blank">ã€‚</a></p></div></div>    
</body>
</html>