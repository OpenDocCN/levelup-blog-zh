<html>
<head>
<title>Show push notifications in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中显示推送通知</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/show-push-notifications-in-react-449949e98e01?source=collection_archive---------2-----------------------#2021-07-28">https://levelup.gitconnected.com/show-push-notifications-in-react-449949e98e01?source=collection_archive---------2-----------------------#2021-07-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="9675" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">在React中显示推送通知</em></p><p id="8029" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">文章在此:</em><a class="ae kp" href="https://flatteredwithflutter.com/show-push-notifications-in-react/" rel="noopener ugc nofollow" target="_blank"><em class="ko">https://flatteredwithfutter . com/show-push-notifications-in-react/</em></a></p><blockquote class="kq kr ks"><p id="32ad" class="jq jr ko js b jt ju jv jw jx jy jz ka kt kc kd ke ku kg kh ki kv kk kl km kn im bi translated"><strong class="js iu">先决条件</strong>:这篇文章假设读者了解Firebase</p></blockquote><figure class="kw kx ky kz gt la"><div class="bz fp l di"><div class="lb lc l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">在React中显示推送通知</figcaption></figure><p id="43c6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将经历以下步骤</p><ol class=""><li id="4f79" class="lh li it js b jt ju jx jy kb lj kf lk kj ll kn lm ln lo lp bi translated">在Firebase中注册web应用程序</li><li id="e07a" class="lh li it js b jt lq jx lr kb ls kf lt kj lu kn lm ln lo lp bi translated">在React中设置Firebase配置</li><li id="c84c" class="lh li it js b jt lq jx lr kb ls kf lt kj lu kn lm ln lo lp bi translated">集成到用户界面</li><li id="5da5" class="lh li it js b jt lq jx lr kb ls kf lt kj lu kn lm ln lo lp bi translated">测试通知</li><li id="44ed" class="lh li it js b jt lq jx lr kb ls kf lt kj lu kn lm ln lo lp bi translated">(<strong class="js iu">可选</strong>)如果通知没有出现</li></ol><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lv"><img src="../Images/cdb853cdb874f53eedf0735533963967.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q0f5xh8iEc7VIhqZTLAYqQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">在React中显示推送通知</figcaption></figure><h1 id="b1c5" class="mc md it bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">在Firebase中注册web应用程序</h1><p id="8e11" class="pw-post-body-paragraph jq jr it js b jt na jv jw jx nb jz ka kb nc kd ke kf nd kh ki kj ne kl km kn im bi translated">登录Firebase <a class="ae kp" href="https://console.firebase.google.com/u/0/" rel="noopener ugc nofollow" target="_blank">控制台</a>，点击<strong class="js iu">添加项目</strong>。按照步骤添加项目。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi nf"><img src="../Images/3c03af3345085c5d8ab6ffdf090c0c3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1BSWqGwrl-scxtpEAweZyA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">向Firebase注册应用程序</figcaption></figure><p id="0d87" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">注册应用程序后，您会看到以下页面。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi ng"><img src="../Images/be2c599a98b5b1cfa095e995160c6e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2yweGd9rIxfyNubLZBaMcg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">配置页面</figcaption></figure><p id="37e4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将在下一步中需要这种配置。</p><h1 id="72db" class="mc md it bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">在React中设置Firebase配置</h1><p id="21fb" class="pw-post-body-paragraph jq jr it js b jt na jv jw jx nb jz ka kb nc kd ke kf nd kh ki kj ne kl km kn im bi translated"><strong class="js iu">该步骤分为以下子步骤。</strong></p><ol class=""><li id="532a" class="lh li it js b jt ju jx jy kb lj kf lk kj ll kn lm ln lo lp bi translated">使用以下命令在项目中安装firebase依赖项</li></ol><pre class="kw kx ky kz gt nh ni nj nk aw nl bi"><span id="e097" class="nm md it ni b gy nn no l np nq">npm install firebase</span></pre><p id="7f61" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.在我们的项目中，我们将配置firebase。创建一个名为<strong class="js iu"> firebaseInit.js的文件(</strong>名称可以是您想要的任何名称)。</p><p id="727b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在该文件中，添加以下几行</p><pre class="kw kx ky kz gt nh ni nj nk aw nl bi"><span id="bce8" class="nm md it ni b gy nn no l np nq">import firebase from 'firebase/app';<br/>import 'firebase/messaging';</span><span id="62ad" class="nm md it ni b gy nr no l np nq">// For Firebase JS SDK v7.20.0 and later, measurementId is optional<br/>const firebaseConfig = {<br/>  apiKey: "YOUR_API_KEY",<br/>  authDomain: "YOUR_AUTH_DOMAIN",<br/>  projectId: "YOUR_PROJECT_ID",<br/>  storageBucket: "YOUR_STORAGE_BUCKET",<br/>  messagingSenderId: "YOUR_MESSAGING_SENDER_ID",<br/>  appId: "YOUR_APP_ID",<br/>  measurementId: "YOUR MEASUREMENT ID"<br/>};</span><span id="da1f" class="nm md it ni b gy nr no l np nq">firebase.initializeApp(firebaseConfig);</span></pre><blockquote class="kq kr ks"><p id="56e4" class="jq jr ko js b jt ju jv jw jx jy jz ka kt kc kd ke ku kg kh ki kv kk kl km kn im bi translated">注意:上述配置可以在你的firebase项目中找到(在<strong class="js iu">项目设置</strong>下或者从<strong class="js iu">步骤1 </strong>中)</p></blockquote><p id="24d2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.在这个文件中，我们将集成云消息传递。但是在开始之前，我们需要一个名为<strong class="js iu">的乏味的键</strong></p><h2 id="0a20" class="nm md it bd me ns nt dn mi nu nv dp mm kb nw nx mq kf ny nz mu kj oa ob my oc bi translated">乏味的钥匙</h2><p id="5f27" class="pw-post-body-paragraph jq jr it js b jt na jv jw jx nb jz ka kb nc kd ke kf nd kh ki kj ne kl km kn im bi translated">根据文件记载</p><blockquote class="kq kr ks"><p id="1a86" class="jq jr ko js b jt ju jv jw jx jy jz ka kt kc kd ke ku kg kh ki kv kk kl km kn im bi translated">FCM Web界面使用名为“自愿应用服务器识别”或“VAPID”密钥的Web凭证来授权向支持的Web推送服务发送请求。</p></blockquote><p id="618e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个密钥可以通过Firebase控制台从现有的密钥对中生成或导入。</p><ol class=""><li id="c7ac" class="lh li it js b jt ju jx jy kb lj kf lk kj ll kn lm ln lo lp bi translated">打开Firebase控制台<strong class="js iu">设置</strong>窗格的<a class="ae kp" href="https://console.firebase.google.com/project/_/settings/cloudmessaging/" rel="noopener ugc nofollow" target="_blank">云消息</a>选项卡，滚动到<strong class="js iu"> Web配置</strong>部分。</li><li id="8213" class="lh li it js b jt lq jx lr kb ls kf lt kj lu kn lm ln lo lp bi translated">在<strong class="js iu"> Web推送证书</strong>选项卡中，复制<strong class="js iu">密钥对</strong>(下面截图中的LHS值)</li></ol><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi od"><img src="../Images/86120878126b2009c2d586d99834552e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GwbqGZhu_ATiVorUYUZgDw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">乏味的钥匙</figcaption></figure><blockquote class="kq kr ks"><p id="9fa9" class="jq jr ko js b jt ju jv jw jx jy jz ka kt kc kd ke ku kg kh ki kv kk kl km kn im bi translated">有关密钥格式以及如何生成密钥的更多信息，请参见<a class="ae kp" href="https://developers.google.com/web/fundamentals/push-notifications/web-push-protocol#application_server_keys" rel="noopener ugc nofollow" target="_blank">应用服务器密钥</a>。</p></blockquote><p id="1bd0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">回到我们的<strong class="js iu"> firebaseInit.js，</strong>添加这些行</p><pre class="kw kx ky kz gt nh ni nj nk aw nl bi"><span id="7e4e" class="nm md it ni b gy nn no l np nq">const messaging = firebase.messaging();</span><span id="9624" class="nm md it ni b gy nr no l np nq">const { REACT_APP_VAPID_KEY } = process.env<br/>const publicKey = REACT_APP_VAPID_KEY;</span></pre></div><div class="ab cl oe of hx og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="im in io ip iq"><h2 id="2b6c" class="nm md it bd me ns nt dn mi nu nv dp mm kb nw nx mq kf ny nz mu kj oa ob my oc bi translated">通知权限</h2><p id="c66c" class="pw-post-body-paragraph jq jr it js b jt na jv jw jx nb jz ka kb nc kd ke kf nd kh ki kj ne kl km kn im bi translated">在向浏览器发送推送通知之前，我们首先需要获得用户的许可。这由firebase提供的<code class="fe ol om on ni b">getToken</code>方法来处理。</p><pre class="kw kx ky kz gt nh ni nj nk aw nl bi"><span id="8680" class="nm md it ni b gy nn no l np nq">export const getToken = async (setTokenFound) =&gt; {<br/>  let currentToken = '';</span><span id="2d0f" class="nm md it ni b gy nr no l np nq">  try {<br/>    currentToken = await messaging.getToken({vapidKey: publicKey});</span><span id="b2da" class="nm md it ni b gy nr no l np nq">    if (currentToken) {<br/>      setTokenFound(true);<br/>    } else {<br/>      setTokenFound(false);<br/>    }<br/>  } catch (error) {<br/>    console.log('An error occurred while retrieving token.', error);<br/>  }</span><span id="356f" class="nm md it ni b gy nr no l np nq">  return currentToken;<br/>};</span></pre><ul class=""><li id="3ea3" class="lh li it js b jt ju jx jy kb lj kf lk kj ll kn oo ln lo lp bi translated">如果用户没有被授予通知权限，方法<code class="fe ol om on ni b"><a class="ae kp" href="https://firebase.google.com/docs/reference/js/firebase.messaging.Messaging#getToken" rel="noopener ugc nofollow" target="_blank">getToken</a> </code>将向用户请求通知权限。否则，它会返回一个令牌或由于错误而拒绝承诺。</li><li id="0c0b" class="lh li it js b jt lq jx lr kb ls kf lt kj lu kn oo ln lo lp bi translated">我们把上一步的无趣的密钥传给<code class="fe ol om on ni b">getToken</code></li></ul><blockquote class="kq kr ks"><p id="8260" class="jq jr ko js b jt ju jv jw jx jy jz ka kt kc kd ke ku kg kh ki kv kk kl km kn im bi translated">获得令牌后，使用您喜欢的方法存储它，在我们的例子中，<strong class="js iu">我们只需登录控制台</strong>。</p></blockquote></div><div class="ab cl oe of hx og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="im in io ip iq"><h2 id="9459" class="nm md it bd me ns nt dn mi nu nv dp mm kb nw nx mq kf ny nz mu kj oa ob my oc bi translated">设置监听器(前台和后台)</h2><p id="a189" class="pw-post-body-paragraph jq jr it js b jt na jv jw jx nb jz ka kb nc kd ke kf nd kh ki kj ne kl km kn im bi translated">当应用程序在<strong class="js iu">前台</strong>处于活动状态时，我们需要将这段代码添加到<code class="fe ol om on ni b">firebaseInit.js</code>文件中，这样我们就知道通知已经收到</p><pre class="kw kx ky kz gt nh ni nj nk aw nl bi"><span id="2aad" class="nm md it ni b gy nn no l np nq">export const onMessageListener = () =&gt;<br/>  new Promise((resolve) =&gt; {<br/>    messaging.onMessage((payload) =&gt; {<br/>      resolve(payload);<br/>    });<br/>  });</span></pre><h2 id="43d5" class="nm md it bd me ns nt dn mi nu nv dp mm kb nw nx mq kf ny nz mu kj oa ob my oc bi translated">后台监听器</h2><p id="c492" class="pw-post-body-paragraph jq jr it js b jt na jv jw jx nb jz ka kb nc kd ke kf nd kh ki kj ne kl km kn im bi translated">在页面在背景中或者隐藏在其他标签后面的场景中，我们需要处理<code class="fe ol om on ni b"><a class="ae kp" href="https://firebase.google.com/docs/reference/js/firebase.messaging.Messaging#onbackgroundmessage" rel="noopener ugc nofollow" target="_blank">onBackgroundMessage</a>.</code></p><ul class=""><li id="dd22" class="lh li it js b jt ju jx jy kb lj kf lk kj ll kn oo ln lo lp bi translated">我们通过在react应用程序的公共文件夹中添加一个<code class="fe ol om on ni b">firebase-messaging-sw.js</code> <strong class="js iu">服务人员</strong>文件来实现这一点。添加以下几行</li></ul><pre class="kw kx ky kz gt nh ni nj nk aw nl bi"><span id="9daa" class="nm md it ni b gy nn no l np nq">importScripts("<a class="ae kp" href="https://www.gstatic.com/firebasejs/8.2.0/firebase-app.js" rel="noopener ugc nofollow" target="_blank">https://www.gstatic.com/firebasejs/8.2.0/firebase-app.js</a>");<br/>importScripts("<a class="ae kp" href="https://www.gstatic.com/firebasejs/8.2.0/firebase-messaging.js" rel="noopener ugc nofollow" target="_blank">https://www.gstatic.com/firebasejs/8.2.0/firebase-messaging.js</a>");</span><span id="3824" class="nm md it ni b gy nr no l np nq">const firebaseConfig = {<br/>  apiKey: "YOUR_API_KEY",<br/>  authDomain: "YOUR_AUTH_DOMAIN",<br/>  projectId: "YOUR_PROJECT_ID",<br/>  storageBucket: "YOUR_STORAGE_BUCKET",<br/>  messagingSenderId: "YOUR_MESSAGING_SENDER_ID",<br/>  appId: "YOUR_APP_ID",<br/>  measurementId: "YOUR MEASUREMENT ID"<br/>};</span><span id="74e6" class="nm md it ni b gy nr no l np nq">firebase.initializeApp(firebaseConfig);</span></pre><ul class=""><li id="a8a3" class="lh li it js b jt ju jx jy kb lj kf lk kj ll kn oo ln lo lp bi translated">前两条import语句基本上下载了服务人员所需的firebase库。</li><li id="35bc" class="lh li it js b jt lq jx lr kb ls kf lt kj lu kn oo ln lo lp bi translated">接下来，我们使用firebase config配置我们的firebase应用程序(参见上面的步骤或您的firebase项目)</li><li id="c553" class="lh li it js b jt lq jx lr kb ls kf lt kj lu kn oo ln lo lp bi translated">最后，我们处理服务工作者文件中的<code class="fe ol om on ni b">onBackgroundMessage</code></li></ul><pre class="kw kx ky kz gt nh ni nj nk aw nl bi"><span id="7003" class="nm md it ni b gy nn no l np nq">const messaging = firebase.messaging();</span><span id="b623" class="nm md it ni b gy nr no l np nq">messaging.onBackgroundMessage(function (payload) {<br/>  console.log("Received background message ", payload);</span><span id="a84a" class="nm md it ni b gy nr no l np nq">  const notificationTitle = payload.notification.title;<br/>    const notificationOptions = {<br/>      body: payload.notification.body,<br/>      icon: "/logo192.png",<br/>  };</span><span id="7621" class="nm md it ni b gy nr no l np nq">return self.registration.showNotification(<br/>    notificationTitle,<br/>    notificationOptions<br/>  );<br/>});</span></pre></div><div class="ab cl oe of hx og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="im in io ip iq"><h1 id="164d" class="mc md it bd me mf op mh mi mj oq ml mm mn or mp mq mr os mt mu mv ot mx my mz bi translated">集成到用户界面中</h1><p id="5417" class="pw-post-body-paragraph jq jr it js b jt na jv jw jx nb jz ka kb nc kd ke kf nd kh ki kj ne kl km kn im bi translated">到目前为止，我们设法在react应用程序中配置了firebase。现在，我们将看到如何在我们的UI中集成消息传递。</p><ul class=""><li id="60cf" class="lh li it js b jt ju jx jy kb lj kf lk kj ll kn oo ln lo lp bi translated">在我们的<code class="fe ol om on ni b">App.js</code>中，我们导入文件<code class="fe ol om on ni b">firebaseInit.js</code>并实现<code class="fe ol om on ni b">onMessageListener</code></li></ul><pre class="kw kx ky kz gt nh ni nj nk aw nl bi"><span id="6792" class="nm md it ni b gy nn no l np nq">const [show, setShow] = useState(false);<br/>const [notification, setNotification]=useState({title:"",body:""});</span><span id="0fcd" class="nm md it ni b gy nr no l np nq">onMessageListener()<br/>   .then((payload) =&gt; {<br/>      setShow(true);<br/>      setNotification({<br/>        title: payload.notification.title,<br/>        body: payload.notification.body,<br/>      });<br/>      console.log(payload);<br/>   })<br/>.catch((err) =&gt; console.log("failed: ", err));</span></pre><blockquote class="kq kr ks"><p id="a113" class="jq jr ko js b jt ju jv jw jx jy jz ka kt kc kd ke ku kg kh ki kv kk kl km kn im bi translated">注意:我们使用<a class="ae kp" href="https://reactjs.org/docs/hooks-state.html" rel="noopener ugc nofollow" target="_blank"> useState </a>钩子，它决定何时显示通知。</p></blockquote><ul class=""><li id="e7ef" class="lh li it js b jt ju jx jy kb lj kf lk kj ll kn oo ln lo lp bi translated">接下来，我们创建一个名为<code class="fe ol om on ni b">Notifications.</code>的组件，这个组件主要负责从浏览器获取令牌。</li></ul><pre class="kw kx ky kz gt nh ni nj nk aw nl bi"><span id="6cc9" class="nm md it ni b gy nn no l np nq">const Notifications = (props) =&gt; {<br/>  const [isTokenFound, setTokenFound] = useState(false);                </span><span id="a36f" class="nm md it ni b gy nr no l np nq">  console.log("Token found", isTokenFound);</span><span id="824a" class="nm md it ni b gy nr no l np nq">  useEffect(() =&gt; {<br/>    let data;</span><span id="4003" class="nm md it ni b gy nr no l np nq">    async function tokenFunc() {<br/>      data = await getToken(setTokenFound);<br/>      if (data) {<br/>        console.log("Token is", data);<br/>      }<br/>      return data;<br/>    }</span><span id="9e9d" class="nm md it ni b gy nr no l np nq">    tokenFunc();<br/>  }, [setTokenFound]);</span><span id="5d3d" class="nm md it ni b gy nr no l np nq">  return &lt;&gt;&lt;/&gt;;<br/> };</span><span id="f994" class="nm md it ni b gy nr no l np nq">export default Notifications;</span></pre><p id="20aa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这里，我们调用<code class="fe ol om on ni b">getToken</code>函数，它是在<code class="fe ol om on ni b">firebaseInit.js</code>中定义的。一旦我们获得令牌，我们就将它记录在控制台中。</p><blockquote class="kq kr ks"><p id="2994" class="jq jr ko js b jt ju jv jw jx jy jz ka kt kc kd ke ku kg kh ki kv kk kl km kn im bi translated">注意:我们使用<a class="ae kp" href="https://reactjs.org/docs/hooks-effect.html" rel="noopener ugc nofollow" target="_blank"> useEffect </a>钩子，因为我们不想重复调用getToken。</p></blockquote><ul class=""><li id="a197" class="lh li it js b jt ju jx jy kb lj kf lk kj ll kn oo ln lo lp bi translated">最后，我们创建另一个名为<code class="fe ol om on ni b">ReactNotificationComponent</code>的组件，当应用程序在前台时，它基本上显示通知。</li></ul><pre class="kw kx ky kz gt nh ni nj nk aw nl bi"><span id="50fa" class="nm md it ni b gy nn no l np nq">import { ToastContainer, toast } from "react-toastify";<br/>import "react-toastify/dist/ReactToastify.css";</span><span id="4b9c" class="nm md it ni b gy nr no l np nq">const ReactNotificationComponent = ({ title, body }) =&gt; {<br/>  toast.info(&lt;Display /&gt;);</span><span id="af09" class="nm md it ni b gy nr no l np nq">  function Display() {<br/>    return (<br/>      &lt;div&gt;<br/>        &lt;h4&gt;{title}&lt;/h4&gt;<br/>        &lt;p&gt;{body}&lt;/p&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }</span><span id="585a" class="nm md it ni b gy nr no l np nq">  return (<br/>    &lt;ToastContainer /&gt;<br/>  );<br/>};</span></pre><p id="2040" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这基本上显示了使用库<a class="ae kp" href="https://www.npmjs.com/package/react-toastify" rel="noopener ugc nofollow" target="_blank"><strong class="js iu">react-toastify</strong></a><strong class="js iu">的通知。</strong>我们从<code class="fe ol om on ni b">App.js</code>传入参数、标题和正文</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/054f11ab013757cb44abb25ae5fca5dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*eEBFUjGoeFlyLSY8j3PWcQ.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">前台通知显示</figcaption></figure></div><div class="ab cl oe of hx og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="im in io ip iq"><h1 id="fbe4" class="mc md it bd me mf op mh mi mj oq ml mm mn or mp mq mr os mt mu mv ot mx my mz bi translated">测试通知</h1><p id="bf4b" class="pw-post-body-paragraph jq jr it js b jt na jv jw jx nb jz ka kb nc kd ke kf nd kh ki kj ne kl km kn im bi translated">通过以下方式开始您的react项目</p><pre class="kw kx ky kz gt nh ni nj nk aw nl bi"><span id="884f" class="nm md it ni b gy nn no l np nq">npm run start</span></pre><p id="db52" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在你的firebase控制台中，进入应用程序的<strong class="js iu">云消息</strong>部分</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/73a1cb80ef86dcf25946721439edba39.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*PUsnnBuI-VTwgx364AH_xA.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">云消息传递</figcaption></figure><ol class=""><li id="d359" class="lh li it js b jt ju jx jy kb lj kf lk kj ll kn lm ln lo lp bi translated">点击按钮<strong class="js iu">发送第一条消息</strong>。</li><li id="86de" class="lh li it js b jt lq jx lr kb ls kf lt kj lu kn lm ln lo lp bi translated">输入通知标题和文本。</li><li id="c42e" class="lh li it js b jt lq jx lr kb ls kf lt kj lu kn lm ln lo lp bi translated">选择<strong class="js iu">发送测试信息</strong>。</li><li id="dfcc" class="lh li it js b jt lq jx lr kb ls kf lt kj lu kn lm ln lo lp bi translated">在标记为<strong class="js iu">Add a FCM registration token</strong>的字段中，输入您从上一步获得的注册令牌。</li><li id="8ce6" class="lh li it js b jt lq jx lr kb ls kf lt kj lu kn lm ln lo lp bi translated">点击<strong class="js iu">测试</strong></li></ol><p id="ea95" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在你点击<strong class="js iu">测试</strong>之后，你的应用应该会在浏览器中收到通知。</p></div><div class="ab cl oe of hx og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="im in io ip iq"><h1 id="7689" class="mc md it bd me mf op mh mi mj oq ml mm mn or mp mq mr os mt mu mv ot mx my mz bi translated">如果通知没有出现</h1><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/405b7a89a9724ccdedbd14d64cfdee10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*bG3DHroCAljeG4VF.gif"/></div></figure><p id="42f5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有些时候，事情不工作，因此这部分存在。如果通知对您不起作用，您可以检查以下几点(<strong class="js iu">对于macOS </strong>):</p><ul class=""><li id="f7c8" class="lh li it js b jt ju jx jy kb lj kf lk kj ll kn oo ln lo lp bi translated">检查浏览器中的通知权限。通知应设置为<strong class="js iu">允许</strong></li></ul><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/ccfbd2de85dd2abdc61c3647c3b21262.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*x5ztvXkyAG2Yxu1yfnBjDQ.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">浏览器通知权限</figcaption></figure><ul class=""><li id="1bd2" class="lh li it js b jt ju jx jy kb lj kf lk kj ll kn oo ln lo lp bi translated">您的<strong class="js iu">请勿打扰</strong>应该关闭</li></ul><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/a0915463c8076057af1a3a383f583bb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*zit9eRyCTXXQZ-RhQ_Orzw.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">请勿打扰</figcaption></figure><ul class=""><li id="a2b8" class="lh li it js b jt ju jx jy kb lj kf lk kj ll kn oo ln lo lp bi translated">转到chrome设置，搜索通知，验证是否选择了选项<strong class="js iu">站点可以要求发送通知</strong>。</li></ul><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi oz"><img src="../Images/c01585021cfbcc71e2e1eea9ca278b08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dmwabf1TSwsyF_G0L0XtMA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">Chrome设置</figcaption></figure><ul class=""><li id="7388" class="lh li it js b jt ju jx jy kb lj kf lk kj ll kn oo ln lo lp bi translated">打开Spotlight搜索，进入<strong class="js iu">系统首选项- &gt;通知中心设置。</strong>检查Chrome的通知是否打开</li></ul><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi pa"><img src="../Images/58d12176384f7202f6c7b472d959f9e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YzKHwptbaCO3QPr9V1JByg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">通知中心设置</figcaption></figure><ul class=""><li id="0638" class="lh li it js b jt ju jx jy kb lj kf lk kj ll kn oo ln lo lp bi translated">通知显示两次，为此我们需要从我们的<code class="fe ol om on ni b">index.js</code>中移除React.strictMode。参考<a class="ae kp" href="https://stackoverflow.com/questions/66263996/react-app-my-alert-window-is-showing-up-twice" rel="noopener ugc nofollow" target="_blank">连杆</a>。</li></ul><blockquote class="kq kr ks"><p id="abd6" class="jq jr ko js b jt ju jv jw jx jy jz ka kt kc kd ke ku kg kh ki kv kk kl km kn im bi translated">如果有其他选择，请在评论区告诉我，我会更新这一部分。:)</p></blockquote><p id="4bf7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">其他文章:</p><div class="pb pc gp gr pd pe"><a rel="noopener  ugc nofollow" target="_blank" href="/i-tried-react-in-2021-here-are-my-thoughts-51256e6f595d"><div class="pf ab fo"><div class="pg ab ph cl cj pi"><h2 class="bd iu gy z fp pj fr fs pk fu fw is bi translated">我在2021年试过React。以下是我的想法</h2><div class="pl l"><h3 class="bd b gy z fp pj fr fs pk fu fw dk translated">以下是我从React中学到的5个要点。</h3></div><div class="pm l"><p class="bd b dl z fp pj fr fs pk fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pn l"><div class="po l pp pq pr pn ps ma pe"/></div></div></a></div><div class="pb pc gp gr pd pe"><a rel="noopener  ugc nofollow" target="_blank" href="/fade-in-out-text-in-react-fa8fc7a2a0b1"><div class="pf ab fo"><div class="pg ab ph cl cj pi"><h2 class="bd iu gy z fp pj fr fs pk fu fw is bi translated">React中的淡入淡出文本</h2><div class="pl l"><h3 class="bd b gy z fp pj fr fs pk fu fw dk translated">如何在react中淡入淡出文本</h3></div><div class="pm l"><p class="bd b dl z fp pj fr fs pk fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pn l"><div class="pt l pp pq pr pn ps ma pe"/></div></div></a></div><div class="pb pc gp gr pd pe"><a rel="noopener  ugc nofollow" target="_blank" href="/deploy-react-and-aws-amplify-1db36c625d73"><div class="pf ab fo"><div class="pg ab ph cl cj pi"><h2 class="bd iu gy z fp pj fr fs pk fu fw is bi translated">部署React和AWS Amplify</h2><div class="pl l"><h3 class="bd b gy z fp pj fr fs pk fu fw dk translated">部署React和AWS Amplify</h3></div><div class="pm l"><p class="bd b dl z fp pj fr fs pk fu fw dk translated">部署React和AWS Amplifylevelup.gitconnected.com</p></div></div><div class="pn l"><div class="pu l pp pq pr pn ps ma pe"/></div></div></a></div><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi pv"><img src="../Images/1403fcba8a129bf2738640e90fe4b786.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/0*Upet1UQhVx6bs6WU.gif"/></div></figure><pre class="kw kx ky kz gt nh ni nj nk aw nl bi"><span id="1ec1" class="nm md it ni b gy nn no l np nq"><em class="ko">Hosted URL: </em><a class="ae kp" href="https://funwithreact.web.app/" rel="noopener ugc nofollow" target="_blank"><em class="ko">https://funwithreact.web.app/</em></a></span><span id="32d4" class="nm md it ni b gy nr no l np nq"><a class="ae kp" href="https://github.com/AseemWangoo/expriments_with_react" rel="noopener ugc nofollow" target="_blank"><em class="ko">Source code</em></a></span></pre></div></div>    
</body>
</html>