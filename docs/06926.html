<html>
<head>
<title>i18n Without Pain Using This VS Code Extension</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">i18n毫无困难地使用这个VS代码扩展</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/i18n-without-pain-using-this-vs-code-extension-a6eb10e53772?source=collection_archive---------13-----------------------#2021-01-12">https://levelup.gitconnected.com/i18n-without-pain-using-this-vs-code-extension-a6eb10e53772?source=collection_archive---------13-----------------------#2021-01-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7c5b263dba11e35ff416b178fe5ee02d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T2B_Q80bUhAzEB_0"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">纳蕾塔·马丁在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="80c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你是一名网络开发者，你很有可能正在国际化你的应用或网站。如果你没有，原因是以下两个之一:要么你不需要，要么你注意到<strong class="kf ir">有多痛苦而放弃了。</strong></p><p id="636c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无论你使用什么框架或语言，你总是<strong class="kf ir">在文件</strong>之间来回穿梭，寻找翻译，并找出哪个键是哪个键。对于JSON i18n文件，你甚至不能复制你创建的整个键来粘贴到其他地方，<strong class="kf ir">简直一团糟</strong>。</p><h1 id="7c83" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">国际联盟</h1><p id="1f96" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">开箱即用，i18n Ally兼容<a class="ae kc" href="https://github.com/antfu/i18n-ally/wiki/Supported-Frameworks" rel="noopener ugc nofollow" target="_blank">很多流行的框架</a>。如果您正在使用其中的一个，那么为您配置<strong class="kf ir">将会非常简单，因为大部分工作将会由扩展的初始化例程自动完成。</strong></p><p id="2721" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你按照我下面给你的步骤去做，这个扩展也是与每个框架和定制代码兼容的。</p><h2 id="aa50" class="me lc iq bd ld mf mg dn lh mh mi dp ll ko mj mk lp ks ml mm lt kw mn mo lx mp bi translated">它的作用</h2><p id="4882" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">这个扩展做了很多工作，但这里有两个最基本和最有价值的特性:</p><ul class=""><li id="56b1" class="mq mr iq kf b kg kh kk kl ko ms ks mt kw mu la mv mw mx my bi translated">翻译的在线可视化</li><li id="43f6" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">在线创建和编辑翻译<strong class="kf ir">而不打开任何i18n文件</strong></li></ul><p id="34be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以在GitHub 上浏览其他(难以置信的)特性<a class="ae kc" href="https://github.com/antfu/i18n-ally" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="nf ng nh ni gt jr gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/ad2c0bd43abb9c36c5e5b4017d5cac76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*b5Sb-IS2KRP5eaV31hpo7A.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Vue文件中翻译的内联可视化和编辑示例(来自i18n Ally GitHub页面)。</figcaption></figure><p id="8276" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以在上面的图片中看到，在第3行和第4行,<strong class="kf ir">翻译键被所选语言的翻译替换为</strong>。除非您的光标在这一行代码上，否则它们就会显示出来，就像第12行的情况一样。悬停时，会出现一个简洁的翻译列表<strong class="kf ir">和一个铅笔图标</strong>来编辑它们。如果您键入一个不存在的密钥，您将能够<strong class="kf ir">创建它而无需打开任何翻译文件</strong>。</p><h2 id="8613" class="me lc iq bd ld mf mg dn lh mh mi dp ll ko mj mk lp ks ml mm lt kw mn mo lx mp bi translated">如何设置它</h2><p id="6348" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我第一次发现这个扩展时，它并不适合我和我们正在使用的定制框架，所以我只是把它放在一边几个月，然后进行手动国际化。</p><p id="7902" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我为此对自己很生气，因为实际上配置非常容易。</p><p id="9f4d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，当您<a class="ae kc" href="https://marketplace.visualstudio.com/items?itemName=antfu.i18n-ally" rel="noopener ugc nofollow" target="_blank">安装扩展</a>时，它会将键“i18n-ally.localesPaths”添加到“. vscode/settings.json”中的项目配置文件中。这是一个路径数组，扩展将在其中查找翻译文件。<strong class="kf ir">删除它们并粘贴你的i18n文件夹路径</strong>。我的看起来是这样的(使用JHipster的Angular项目):</p><pre class="nf ng nh ni gt nj nk nl nm aw nn bi"><span id="8ac3" class="me lc iq nk b gy no np l nq nr">"i18n-ally.localesPaths": [<br/>    "src/main/webapp/i18n"<br/>]</span></pre><p id="0af8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">然后检查你的输出标签</strong>，并<strong class="kf ir">选择i18n Ally </strong>看看是否有任何错误，但在快速加载后，你应该开始让扩展在你所有的文件中运行。</p><h2 id="9185" class="me lc iq bd ld mf mg dn lh mh mi dp ll ko mj mk lp ks ml mm lt kw mn mo lx mp bi translated">添加不支持的框架和自定义代码支持</h2><p id="af2c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果除了受支持的框架之外还需要其他东西，不要跳过这一步，因为这也相当容易，而且让扩展只在一半的代码中工作并没有真正的帮助。</p><p id="e34f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我的例子中，有两个问题:我们将JHipster与Angular一起使用，它附带了一个基于Angular默认翻译系统的<strong class="kf ir">自定义翻译系统</strong>，我创建了以i18n键作为参数的<strong class="kf ir">组件</strong>。</p><p id="c485" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这两种情况都可以通过创建一个基本的定制框架支持文件来解决。这个文件本质上是一个转义正则表达式列表，用来匹配你想要的每一个定制代码。</p><p id="820b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建一个新文件`. vs code/i18n-ally-custom-framework . yml`。从文档中，下面是要复制和粘贴的示例配置(包括有用的注释，您应该保留在那里以供以后使用):</p><pre class="nf ng nh ni gt nj nk nl nm aw nn bi"><span id="7b4d" class="me lc iq nk b gy no np l nq nr"># An array of strings which contain Language Ids defined by VS Code<br/># You can check avaliable language ids here: https://code.visualstudio.com/docs/languages/overview#_language-id<br/>languageIds:<br/>  - javascript<br/>  - typescript<br/>  - javascriptreact<br/>  - typescriptreact<br/><br/># An array of RegExes to find the key usage. **The key should be captured in the first match group**.<br/># You should unescape RegEx strings in order to fit in the YAML file<br/># To help with this, you can use https://www.freeformatter.com/json-escape.html<br/>usageMatchRegex:<br/>  # The following example shows how to detect `t("your.i18n.keys")`<br/>  # the `{key}` will be placed by a proper keypath matching regex,<br/>  # you can ignore it and use your own matching rules as well<br/>  - "[^\\w\\d]t\\(['\"`]({key})['\"`]"<br/><br/><br/># An array of strings containing refactor templates.<br/># The "$1" will be replaced by the keypath specified.<br/># Optional: uncomment the following two lines to use<br/><br/># refactorTemplates:<br/>#  - i18n.get("$1")<br/><br/><br/># If set to true, only enables this custom framework (will disable all built-in frameworks)<br/>monopoly: true</span></pre><p id="86c1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">根据你想要达到的目标，你必须做出一些改变:</p><ul class=""><li id="c5b8" class="mq mr iq kf b kg kh kk kl ko ms ks mt kw mu la mv mw mx my bi translated">` monopoly '定义该文件是唯一使用的配置，还是将与支持的框架配置一起使用。假设您想要Angular和您的自定义代码，您将需要“monopoly: false”。</li><li id="ab82" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">“languageIds”是您想要检测翻译的语言。语言id可以在这里找到<a class="ae kc" href="https://code.visualstudio.com/docs/languages/identifiers#_known-language-identifiers" rel="noopener ugc nofollow" target="_blank">。</a></li><li id="0426" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">“usageMatchRegex”是转义正则表达式，其中“{key}”是指要检测的i18n键。</li></ul><p id="7a4b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我想使用Angular默认配置，并在HTML文件中添加对“jhiTranslate”、“labelI18nKey”和“placeholderI18nKey”属性的支持。这是生成的配置文件:</p><pre class="nf ng nh ni gt nj nk nl nm aw nn bi"><span id="35e0" class="me lc iq nk b gy no np l nq nr">languageIds:<br/>- html</span><span id="0886" class="me lc iq nk b gy ns np l nq nr">usageMatchRegex:<br/>- "(?:translate|jhiTranslate|labelI18nKey|placeholderI18nKey)=['\"`]({key})['\"`]"</span><span id="9aab" class="me lc iq nk b gy ns np l nq nr">monopoly: false</span></pre><p id="0807" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您的配置文件应该在保存时被i18n Ally检测到。再次，<strong class="kf ir">检查您的输出选项卡</strong>，然后<strong class="kf ir">选择i18n Ally </strong>查看是否一切正常。</p><h2 id="12f4" class="me lc iq bd ld mf mg dn lh mh mi dp ll ko mj mk lp ks ml mm lt kw mn mo lx mp bi translated">在你离开之前</h2><p id="6e94" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">这篇文章的大部分内容是我让你通过<a class="ae kc" href="https://github.com/antfu/i18n-ally/wiki" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">扩展的文档</strong> </a>。如果您想做进一步的配置或发现其他功能，请查看它。这是有据可查的，易于阅读。</p><p id="4613" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望这对你和对我一样都是一个游戏规则的改变者。国际化愉快！</p></div></div>    
</body>
</html>