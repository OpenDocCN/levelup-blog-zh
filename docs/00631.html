<html>
<head>
<title>A Simple MapReduce in Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Go中一个简单的MapReduce</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-simple-mapreduce-in-go-42c929b000c5?source=collection_archive---------0-----------------------#2019-06-13">https://levelup.gitconnected.com/a-simple-mapreduce-in-go-42c929b000c5?source=collection_archive---------0-----------------------#2019-06-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="202d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Hadoop MapReduce是一个软件框架，用于轻松编写应用程序，以可靠、容错的方式在大型商用硬件集群(数千个节点)上并行处理大量数据(多TB数据集)。</p><p id="56a1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">MapReduce <em class="ko">作业</em>通常将输入数据集分割成独立的块，由<em class="ko">地图任务</em>以完全并行的方式处理。框架对映射的输出进行分类，然后输入到<em class="ko"> reduce任务</em>。通常，作业的输入和输出都存储在文件系统中。该框架负责调度任务、监控它们并重新执行失败的任务。</p></div><div class="ab cl kp kq hx kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="im in io ip iq"><p id="6916" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">今天，出于测试和学习的原因，我想在Go中编写一个简单的MapReduce作业。</p><h1 id="42b0" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">用例</h1><p id="0470" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">我们有一个包含大约18000名足球运动员信息的csv文件(我从<a class="ae lz" href="https://www.kaggle.com/" rel="noopener ugc nofollow" target="_blank">https://www.kaggle.com</a>下载的)。目标是按年龄或我们需要的任何其他属性排序。</p></div><div class="ab cl kp kq hx kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="im in io ip iq"><h2 id="0daf" class="ma kx it bd ky mb mc dn lc md me dp lg kb mf mg lk kf mh mi lo kj mj mk ls ml bi translated">演示的示例结构</h2><p id="32c1" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">我们只为演示创建了一个简单的结构，例如，我们将根据姓名或年龄进行过滤/减少，即使我们在原始csv中有大部分关键字或项目。</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mm"><img src="../Images/32c1187a58f42360f8d2f60f782807b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g963zeDpTI6N2ZWnAIeF5A.png"/></div></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated">示例PlayerInfo结构</figcaption></figure><h2 id="9f4f" class="ma kx it bd ky mb mc dn lc md me dp lg kb mf mg lk kf mh mi lo kj mj mk ls ml bi translated">打开文件</h2><p id="bd5e" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">使用标准Golang实现打开文件。</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nc"><img src="../Images/220e02d69da7be91bb0a4dea9b085bb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m-CAlJXzIV0ukH5tarFwQQ.png"/></div></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated">开文件</figcaption></figure><h2 id="b184" class="ma kx it bd ky mb mc dn lc md me dp lg kb mf mg lk kf mh mi lo kj mj mk ls ml bi translated">创建渠道</h2><blockquote class="nd"><p id="4501" class="ne nf it bd ng nh ni nj nk nl nm kn dk translated">不要通过共享内存来交流；相反，通过交流来分享记忆。</p></blockquote><p id="e0b6" class="pw-post-body-paragraph jq jr it js b jt nn jv jw jx no jz ka kb np kd ke kf nq kh ki kj nr kl km kn im bi translated">渠道是围棋的一个漂亮优势。</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi ns"><img src="../Images/af4bb838ae09665b3d87eca42e7d65e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ly-VXR5btYcYEn0ueF5dQw.png"/></div></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated">实施渠道</figcaption></figure><h2 id="4377" class="ma kx it bd ky mb mc dn lc md me dp lg kb mf mg lk kf mh mi lo kj mj mk ls ml bi translated">映射器实现</h2><p id="59c6" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">这里的映射函数是确保展平列表并返回我们想要处理的struct</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nt"><img src="../Images/3952fa3986b664ae5fc270cd4b6521b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0eH-6rtbc8SicuIMxJ7VEg.png"/></div></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated">制图人</figcaption></figure><h2 id="3608" class="ma kx it bd ky mb mc dn lc md me dp lg kb mf mg lk kf mh mi lo kj mj mk ls ml bi translated">减速器实施</h2><p id="04bf" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">这个实现就是您想要添加的过滤器。在这个例子中，我们将玩家的年龄减少到16岁或16岁以上。</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nu"><img src="../Images/d4b7ec47b62abe18b5335d76fd72767a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RKbT9VRm-kGfOkCWrYP2FQ.png"/></div></div></figure><h2 id="8144" class="ma kx it bd ky mb mc dn lc md me dp lg kb mf mg lk kf mh mi lo kj mj mk ls ml bi translated">使用goroutine调用映射器和缩减器</h2><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nv"><img src="../Images/35a96d7c6dcfabd32fc69e81d0725bc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1jBO5W-Xq6-3ekwno3_DcA.png"/></div></div></figure><p id="cf61" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">结果</strong></p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nw"><img src="../Images/686097315d98a6e87990c0525f07ddd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QqmZK2Pa8jYlEdB6Vn6M9g.png"/></div></div></figure></div><div class="ab cl kp kq hx kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="im in io ip iq"><h1 id="3f84" class="kw kx it bd ky kz nx lb lc ld ny lf lg lh nz lj lk ll oa ln lo lp ob lr ls lt bi translated">摘要</h1><p id="c05c" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">这只是一个简单的例子，演示了如何在Go中实现MapReduce。我没有为任何生产用例优化代码。这意味着我们错过了单元测试、基准测试等等。</p><p id="65e9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有关我的其他围棋文章，请访问:</p><p id="35e0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae lz" href="https://medium.com/@jayhuang75" rel="noopener">https://medium.com/@jayhuang75</a></p></div></div>    
</body>
</html>