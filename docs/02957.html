<html>
<head>
<title>Git: Interactive staging</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Git:交互式登台</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/git-interactive-staging-b86cdef7a275?source=collection_archive---------4-----------------------#2020-04-12">https://levelup.gitconnected.com/git-interactive-staging-b86cdef7a275?source=collection_archive---------4-----------------------#2020-04-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/584d24b4a50b4e9fcfb2fb1425eed17f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G8BKaLPSxICtp9GPczA2QA.jpeg"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated"><a class="ae jg" href="https://unsplash.com/@dollargill?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">美元吉尔</a>在<a class="ae jg" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><div class=""/><p id="7303" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有时简单地用<code class="fe le lf lg lh b">git add .</code>或<code class="fe le lf lg lh b">git commit -am</code>相加是不够的。您可能希望将更改划分到几个提交中，或者您还没有准备好添加所有内容。用户可以使用一种不同的暂存(添加)和提交功能:交互式暂存。此命令可以帮助您设计提交，使其仅包含文件的某些组合和/或部分。</p><p id="0271" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">--interactive</code>(或<code class="fe le lf lg lh b">-i</code>)是<code class="fe le lf lg lh b">--patch</code>的老大哥。<a class="ae jg" href="https://medium.com/@milan.brankovic/git-partial-staging-86eb01ea6b7d" rel="noopener">补丁</a>只能让你决定文件中的个体。<code class="fe le lf lg lh b">--interactive</code>进入交互模式，更强大一点。当您进入交互模式时，您将看到一个命令行界面，其中列出了各种文件和可用的分段函数，并为其分配了字母或数字。然后，您可以通过在交互式提示符下输入相应的选项来选择内容和执行操作。</p><p id="5f16" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们来看一个使用交互模式的例子。在项目中进行了一些更改，修改了一个文件并添加了一个新文件。执行<code class="fe le lf lg lh b">git add -i</code>命令可以显示索引的状态:</p><pre class="li lj lk ll gt lm lh ln lo aw lp bi"><span id="13ed" class="lq lr jj lh b gy ls lt l lu lv">           staged     unstaged path<br/>  1:    unchanged       +54/-7 file.txt<br/><br/>*** Commands ***<br/>  1: <strong class="lh jk">s</strong>tatus      2: <strong class="lh jk">u</strong>pdate      3: <strong class="lh jk">r</strong>evert      4: <strong class="lh jk">a</strong>dd untracked<br/>  5: <strong class="lh jk">p</strong>atch       6: <strong class="lh jk">d</strong>iff        7: <strong class="lh jk">q</strong>uit        8: <strong class="lh jk">h</strong>elp<br/>What now&gt;</span></pre><p id="7b73" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如您所见，我们可以使用很多命令:</p><ul class=""><li id="6e7a" class="lw lx jj ki b kj kk kn ko kr ly kv lz kz ma ld mb mc md me bi translated"><code class="fe le lf lg lh b">status</code>给出一个状态输出，显示每个文件中添加和删除了多少行(分为阶段化和非阶段化变更)</li><li id="df5e" class="lw lx jj ki b kj mf kn mg kr mh kv mi kz mj ld mb mc md me bi translated"><code class="fe le lf lg lh b">update</code>允许您将完整的文件存放到索引中</li><li id="44a4" class="lw lx jj ki b kj mf kn mg kr mh kv mi kz mj ld mb mc md me bi translated"><code class="fe le lf lg lh b">revert</code>允许您从索引中分离变更，再次操作整个文件</li><li id="8c5b" class="lw lx jj ki b kj mf kn mg kr mh kv mi kz mj ld mb mc md me bi translated"><code class="fe le lf lg lh b">add untracked</code>允许您添加未跟踪的文件</li><li id="b100" class="lw lx jj ki b kj mf kn mg kr mh kv mi kz mj ld mb mc md me bi translated"><code class="fe le lf lg lh b">patch</code>的功能与<code class="fe le lf lg lh b">--patch</code>相同</li><li id="5360" class="lw lx jj ki b kj mf kn mg kr mh kv mi kz mj ld mb mc md me bi translated"><code class="fe le lf lg lh b">diff</code>向您展示指数和头部之间的差异</li></ul><p id="64fb" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">quit</code>和<code class="fe le lf lg lh b">help</code>是不言自明的。</p><p id="fb0e" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，提示询问您希望下一步做什么。输入数字或命令的第一个字母，您将继续操作。</p><h2 id="5956" class="lq lr jj bd mk ml mm dn mn mo mp dp mq kr mr ms mt kv mu mv mw kz mx my mz na bi translated">状态</h2><p id="48da" class="pw-post-body-paragraph kg kh jj ki b kj nb kl km kn nc kp kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">键入<code class="fe le lf lg lh b">s</code>将简要显示您在暂存区中拥有的内容:</p><pre class="li lj lk ll gt lm lh ln lo aw lp bi"><span id="04cd" class="lq lr jj lh b gy ls lt l lu lv">           staged     unstaged path<br/>  1:    unchanged       +54/-7 file.txt<br/><br/>*** Commands ***<br/>  1: <strong class="lh jk">s</strong>tatus      2: <strong class="lh jk">u</strong>pdate      3: <strong class="lh jk">r</strong>evert      4: <strong class="lh jk">a</strong>dd untracked<br/>  5: <strong class="lh jk">p</strong>atch       6: <strong class="lh jk">d</strong>iff        7: <strong class="lh jk">q</strong>uit        8: <strong class="lh jk">h</strong>elp<br/>What now&gt;</span></pre><p id="001f" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">编号(<code class="fe le lf lg lh b">1</code>)只是一个标识符，可以作为暂存区中项目的参考，以便进一步使用该接口。<code class="fe le lf lg lh b">+/-</code>后面的数字代表文件名为<code class="fe le lf lg lh b">file.txt</code>的文件中增加/删除的行数。</p><p id="a5e3" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，此处看不到新文件(因为它尚未转移)。</p><h2 id="39d8" class="lq lr jj bd mk ml mm dn mn mo mp dp mq kr mr ms mt kv mu mv mw kz mx my mz na bi translated">更新</h2><p id="21f8" class="pw-post-body-paragraph kg kh jj ki b kj nb kl km kn nc kp kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">使用<code class="fe le lf lg lh b">update</code>命令，所有在所需文件中所做的更改将被添加。选择该命令后，我们将看到以下输出:</p><pre class="li lj lk ll gt lm lh ln lo aw lp bi"><span id="dff1" class="lq lr jj lh b gy ls lt l lu lv">           staged     unstaged path<br/>  1:    unchanged       +54/-7 file.txt<br/>Update&gt;&gt;</span></pre><p id="d6e2" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">选择1后，接口将通过在引用号前放置<code class="fe le lf lg lh b">*</code>来通知我们文件已准备提交。通过按回车键，我们将返回到主提示符。如果看现在的状态，可以看到<code class="fe le lf lg lh b">file.txt</code>已经上演妥当。</p><pre class="li lj lk ll gt lm lh ln lo aw lp bi"><span id="9bf2" class="lq lr jj lh b gy ls lt l lu lv">           staged     unstaged path<br/>  1:       +54/-7      nothing file.txt<br/><br/>*** Commands ***<br/>  1: <strong class="lh jk">s</strong>tatus      2: <strong class="lh jk">u</strong>pdate      3: <strong class="lh jk">r</strong>evert      4: <strong class="lh jk">a</strong>dd untracked<br/>  5: <strong class="lh jk">p</strong>atch       6: <strong class="lh jk">d</strong>iff        7: <strong class="lh jk">q</strong>uit        8: <strong class="lh jk">h</strong>elp<br/>What now&gt;</span></pre><h2 id="4d83" class="lq lr jj bd mk ml mm dn mn mo mp dp mq kr mr ms mt kv mu mv mw kz mx my mz na bi translated">归还</h2><p id="d72b" class="pw-post-body-paragraph kg kh jj ki b kj nb kl km kn nc kp kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">如果您决定要取消一组变更，您可以使用<code class="fe le lf lg lh b">revert</code>命令来完成。</p><pre class="li lj lk ll gt lm lh ln lo aw lp bi"><span id="031b" class="lq lr jj lh b gy ls lt l lu lv">           staged     unstaged path<br/>  1:       +54/-7      nothing file.txt<br/>Revert&gt;&gt;</span></pre><p id="504d" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们现在检查状态</p><pre class="li lj lk ll gt lm lh ln lo aw lp bi"><span id="9237" class="lq lr jj lh b gy ls lt l lu lv">              staged     unstaged path<br/>  1:       unchanged       +54/-7 file.txt</span><span id="5ddd" class="lq lr jj lh b gy ng lt l lu lv">*** Commands ***<br/>  1: <strong class="lh jk">s</strong>tatus      2: <strong class="lh jk">u</strong>pdate      3: <strong class="lh jk">r</strong>evert      4: <strong class="lh jk">a</strong>dd untracked<br/>  5: <strong class="lh jk">p</strong>atch       6: <strong class="lh jk">d</strong>iff        7: <strong class="lh jk">q</strong>uit        8: <strong class="lh jk">h</strong>elp<br/>What now&gt;</span></pre><h2 id="f027" class="lq lr jj bd mk ml mm dn mn mo mp dp mq kr mr ms mt kv mu mv mw kz mx my mz na bi translated">添加未跟踪的</h2><p id="05c2" class="pw-post-body-paragraph kg kh jj ki b kj nb kl km kn nc kp kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">正如我们之前看到的，新文件在命令输出中是不可见的。现在就来<code class="fe le lf lg lh b">add untracked</code>吧。</p><pre class="li lj lk ll gt lm lh ln lo aw lp bi"><span id="6602" class="lq lr jj lh b gy ls lt l lu lv">  1: file1.txt<br/>Add untracked&gt;&gt;</span></pre><p id="5984" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们现在检查状态</p><pre class="li lj lk ll gt lm lh ln lo aw lp bi"><span id="031f" class="lq lr jj lh b gy ls lt l lu lv">              staged     unstaged path<br/>  1:       unchanged       +54/-7 file.txt<br/>  2:        +1/-0         nothing file1.txt<br/><br/>*** Commands ***<br/>  1: <strong class="lh jk">s</strong>tatus      2: <strong class="lh jk">u</strong>pdate      3: <strong class="lh jk">r</strong>evert      4: <strong class="lh jk">a</strong>dd untracked<br/>  5: <strong class="lh jk">p</strong>atch       6: <strong class="lh jk">d</strong>iff        7: <strong class="lh jk">q</strong>uit        8: <strong class="lh jk">h</strong>elp<br/>What now&gt;</span></pre><h2 id="50d8" class="lq lr jj bd mk ml mm dn mn mo mp dp mq kr mr ms mt kv mu mv mw kz mx my mz na bi translated">修补</h2><p id="ce19" class="pw-post-body-paragraph kg kh jj ki b kj nb kl km kn nc kp kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">该命令与<code class="fe le lf lg lh b">git add -p</code>相同。点击查看详情<a class="ae jg" href="https://medium.com/@milan.brankovic/git-partial-staging-86eb01ea6b7d" rel="noopener">。</a></p><h2 id="4019" class="lq lr jj bd mk ml mm dn mn mo mp dp mq kr mr ms mt kv mu mv mw kz mx my mz na bi translated">差速器</h2><p id="1f04" class="pw-post-body-paragraph kg kh jj ki b kj nb kl km kn nc kp kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">要检查差异(如果有的话)，<code class="fe le lf lg lh b">diff</code>会提供。</p><pre class="li lj lk ll gt lm lh ln lo aw lp bi"><span id="486e" class="lq lr jj lh b gy ls lt l lu lv">           staged     unstaged path<br/>  1:        +1/-0        +2/-0 file1.txt<br/>Review diff&gt;&gt;</span></pre><p id="9740" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后呢</p><pre class="li lj lk ll gt lm lh ln lo aw lp bi"><span id="198f" class="lq lr jj lh b gy ls lt l lu lv">diff --git a/file1.txt b/file1.txt<br/>new file mode 100644<br/>index 00000000..e69de29b<br/>*** Commands ***<br/>  1: <strong class="lh jk">s</strong>tatus      2: <strong class="lh jk">u</strong>pdate      3: <strong class="lh jk">r</strong>evert      4: <strong class="lh jk">a</strong>dd untracked<br/>  5: <strong class="lh jk">p</strong>atch       6: <strong class="lh jk">d</strong>iff        7: <strong class="lh jk">q</strong>uit        8: <strong class="lh jk">h</strong>elp<br/>What now&gt;</span></pre></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><p id="9ed1" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">每个命令都允许您选择要处理的文件。您可以通过输入文件编号(或高亮显示的字符)并按enter键来选择多个文件。您可以一次输入多个数字/字符，用空格分隔，或者单独添加。选定的文件总是在其行前标有<code class="fe le lf lg lh b">*</code>。</p></div></div>    
</body>
</html>