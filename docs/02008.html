<html>
<head>
<title>JavaScript Promises: An ideal solution for asynchronous programming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript承诺:异步编程的理想解决方案</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-promises-are-an-ideal-solution-for-asynchronous-programming-e9e530ce4f8c?source=collection_archive---------13-----------------------#2020-02-11">https://levelup.gitconnected.com/javascript-promises-are-an-ideal-solution-for-asynchronous-programming-e9e530ce4f8c?source=collection_archive---------13-----------------------#2020-02-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="29a2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">保证！！！这都是关于承诺</h2></div><blockquote class="ki"><p id="f620" class="kj kk it bd kl km kn ko kp kq kr ks dk translated">最好的程序员并不比优秀的程序员强多少。无论用什么标准来衡量，他们都要好得多:概念、创造力、速度、设计的独创性或解决问题的能力。—兰德尔-斯特罗斯公司</p></blockquote><figure class="ku kv kw kx ky kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi kt"><img src="../Images/0d5dcd74b75332f1296d716b1bbbb5d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FW8xUUMysJxi0AbZBaTj-w.jpeg"/></div></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">图片由<a class="ae lk" href="https://unsplash.com/@kmholmgren92?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> katrina holmgren </a>在<a class="ae lk" href="https://unsplash.com/s/photos/promise?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="fcc2" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf ks im bi translated">让我们假设一对夫妇正计划去度假，这是两个人之间的对话。</p><blockquote class="mg mh mi"><p id="3d2b" class="ll lm mj ln b lo lp ju lq lr ls jx lt mk lv lw lx ml lz ma mb mm md me mf ks im bi translated">艾玛:嘿！你能找到最优惠的价格并预订机票吗？</p><p id="1412" class="ll lm mj ln b lo lp ju lq lr ls jx lt mk lv lw lx ml lz ma mb mm md me mf ks im bi translated">无极先生:当然！</p><p id="363d" class="ll lm mj ln b lo lp ju lq lr ls jx lt mk lv lw lx ml lz ma mb mm md me mf ks im bi translated">艾玛:同时，我会准备行李，但是一定要让我知道你是否找到机票。</p><p id="4a5d" class="ll lm mj ln b lo lp ju lq lr ls jx lt mk lv lw lx ml lz ma mb mm md me mf ks im bi translated">诺言先生:如果我没有找到任何票呢？</p><p id="46ff" class="ll lm mj ln b lo lp ju lq lr ls jx lt mk lv lw lx ml lz ma mb mm md me mf ks im bi translated">艾玛:如果你找到票，给我发信息说预订成功(成功回拨)。如果你没有找到他们，给我发消息说假期推迟了(失败的回电)。</p></blockquote></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><p id="f382" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf ks im bi translated">听起来很有趣，对吗？在本文中，我将讨论:</p><ol class=""><li id="100a" class="mu mv it ln b lo lp lr ls lu mw ly mx mc my ks mz na nb nc bi translated">什么是承诺？</li><li id="05ee" class="mu mv it ln b lo nd lr ne lu nf ly ng mc nh ks mz na nb nc bi translated">如何使用它们？</li><li id="9acb" class="mu mv it ln b lo nd lr ne lu nf ly ng mc nh ks mz na nb nc bi translated">使用承诺的利弊。</li></ol><p id="de5c" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf ks im bi translated">Javascript是单线程脚本语言。正如所写的那样，每件事都按照<strong class="ln iu">顺序</strong>一行一行地发生。但是异步操作按照它们完成的顺序发生。承诺是处理异步代码的标准方式。</p><p id="b954" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf ks im bi translated">假设您试图使用web API调用来检索数据，您可能会得到无效数据或检索数据时出错。但是您的工作是只显示有效的数据。这里，web API调用是一个异步操作。在这个场景中，Promise通过两个参数resolve和reject来帮助您，这两个参数分别由成功和失败操作填充。</p><p id="bf77" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf ks im bi translated">承诺有三种状态:</p><ol class=""><li id="7f69" class="mu mv it ln b lo lp lr ls lu mw ly mx mc my ks mz na nb nc bi translated">待定:等待回应</li><li id="bcb7" class="mu mv it ln b lo nd lr ne lu nf ly ng mc nh ks mz na nb nc bi translated">解决:成功发生</li><li id="5dd5" class="mu mv it ln b lo nd lr ne lu nf ly ng mc nh ks mz na nb nc bi translated">拒绝:出现故障</li></ol><p id="c5f3" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf ks im bi translated">让我们用一个例子来深入研究一下承诺。假设你今年对自己有三个承诺，分别是购买手机、自行车和汽车。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="89f8" class="ni nj it bd nk nl nm nn no np nq nr ns jz nt ka nu kc nv kd nw kf nx kg ny nz bi translated">创造承诺</h1><p id="1ee4" class="pw-post-body-paragraph ll lm it ln b lo oa ju lq lr ob jx lt lu oc lw lx ly od ma mb mc oe me mf ks im bi translated">从你的第一个承诺开始，你去一个陈列室购买手机，你可能会用几个手机来探索决定。探索手机需要时间，并且是异步操作。搜索后，您可能会得到一部手机(解决承诺)或没有购买手机(拒绝承诺)。</p><figure class="of og oh oi gt kz"><div class="bz fp l di"><div class="oj ok l"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">移动承诺创建</figcaption></figure><p id="4489" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf ks im bi translated">这里我们创建了一个JavaScript promise对象，它有两个参数，称为resolve和reject。在消费一个承诺的过程中，如果承诺被解析，我们就使用then()函数获取值。如果承诺被拒绝，那么我们会在catch()函数中得到一条错误消息。</p><h2 id="392c" class="ol nj it bd nk om on dn no oo op dp ns lu oq or nu ly os ot nw mc ou ov ny ow bi translated">履行诺言</h2><p id="4ca7" class="pw-post-body-paragraph ll lm it ln b lo oa ju lq lr ob jx lt lu oc lw lx ly od ma mb mc oe me mf ks im bi translated">您最终找到了您想要的手机，这意味着解决了promise，promise将向then()函数发送一条消息。</p><figure class="of og oh oi gt kz"><div class="bz fp l di"><div class="oj ok l"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">消费移动承诺</figcaption></figure><h1 id="7686" class="ni nj it bd nk nl ox nn no np oy nr ns jz oz ka nu kc pa kd nw kf pb kg ny nz bi translated">承诺。所有</h1><p id="08a0" class="pw-post-body-paragraph ll lm it ln b lo oa ju lq lr ob jx lt lu oc lw lx ly od ma mb mc oe me mf ks im bi translated">到目前为止，我们处理了一个购买手机的承诺，但是您还有两个承诺，对吗？？购买自行车和汽车。我们可以使用Promise.all一次运行多个promise</p><ol class=""><li id="81c8" class="mu mv it ln b lo lp lr ls lu mw ly mx mc my ks mz na nb nc bi translated">all再次成为一个承诺，并等待所有的承诺被解决或一个被拒绝。</li><li id="ebea" class="mu mv it ln b lo nd lr ne lu nf ly ng mc nh ks mz na nb nc bi translated">如果所有的承诺都被解析，那么Promise.all将通过来自已解析承诺(输入承诺)的一组消息来解析。</li><li id="a613" class="mu mv it ln b lo nd lr ne lu nf ly ng mc nh ks mz na nb nc bi translated">如果只有一个承诺被拒绝，那么Promise.all将被拒绝，原因来自iterable中第一个被拒绝的承诺。</li></ol><p id="37ef" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf ks im bi translated">创造其他承诺以及类似的移动。</p><figure class="of og oh oi gt kz"><div class="bz fp l di"><div class="oj ok l"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">自行车和汽车承诺创造</figcaption></figure><p id="b26f" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf ks im bi translated">我们创造了手机、自行车和汽车的所有承诺。我们的下一步是一次性运行所有的承诺以节省时间。</p><figure class="of og oh oi gt kz"><div class="bz fp l di"><div class="oj ok l"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">承诺。所有</figcaption></figure><p id="5f56" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf ks im bi translated">如果您的任何一个移动/自行车/汽车承诺被拒绝，则上述承诺将被拒绝；如果数组中的所有承诺都被解析，则Promise.all被解析。</p><h1 id="186a" class="ni nj it bd nk nl ox nn no np oy nr ns jz oz ka nu kc pa kd nw kf pb kg ny nz bi translated">承诺链</h1><p id="d2b0" class="pw-post-body-paragraph ll lm it ln b lo oa ju lq lr ob jx lt lu oc lw lx ly od ma mb mc oe me mf ks im bi translated">假设你想先买自行车后买车，移动后买自行车。这意味着您的购买依赖于其他购买，因为我们希望按顺序进行。我们称之为承诺链。</p><figure class="of og oh oi gt kz"><div class="bz fp l di"><div class="oj ok l"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">承诺链</figcaption></figure><p id="bef0" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf ks im bi translated">这里，我们在另一个承诺的then/catch块中返回承诺对象。当且仅当当前承诺被解决或拒绝时，运行其他承诺。</p><p id="fd7f" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf ks im bi translated">如果任何一个承诺被拒绝，我们将进入catch()块。当您希望仅在从web服务接收数据后刷新网格时，可以使用这种方法。</p><h1 id="09b1" class="ni nj it bd nk nl ox nn no np oy nr ns jz oz ka nu kc pa kd nw kf pb kg ny nz bi translated">承诺的缺点</h1><p id="a94c" class="pw-post-body-paragraph ll lm it ln b lo oa ju lq lr ob jx lt lu oc lw lx ly od ma mb mc oe me mf ks im bi translated">是的，承诺用于异步操作，但也有一些缺点。</p><ol class=""><li id="a2dc" class="mu mv it ln b lo lp lr ls lu mw ly mx mc my ks mz na nb nc bi translated">需要写很多代码，我们必须写。然后，创建一个匿名函数来处理响应或给出响应名称。对于链接，我们必须嵌套代码。</li><li id="ad61" class="mu mv it ln b lo nd lr ne lu nf ly ng mc nh ks mz na nb nc bi translated">如果我们在回调函数中得到任何错误，我们需要做显式的错误处理。</li><li id="ce25" class="mu mv it ln b lo nd lr ne lu nf ly ng mc nh ks mz na nb nc bi translated">在一个链条中管理多个承诺是非常困难的。当一个链中有10个承诺时，从承诺链返回的错误没有给出错误发生在哪里的线索。</li></ol></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><blockquote class="mg mh mi"><p id="9757" class="ll lm mj ln b lo lp ju lq lr ls jx lt mk lv lw lx ml lz ma mb mm md me mf ks im bi translated">为了克服承诺，JavaScript引入了异步/等待选项。Async/await允许您构建清晰易读的代码来处理异步操作。</p></blockquote><p id="2d17" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf ks im bi translated">您可以查看下面的文章，了解Async/Await以及它们如何兑现承诺的清晰图片。</p><div class="pc pd gp gr pe pf"><a rel="noopener  ugc nofollow" target="_blank" href="/asynchronous-programming-in-javascript-9fff87cb7df1"><div class="pg ab fo"><div class="ph ab pi cl cj pj"><h2 class="bd iu gy z fp pk fr fs pl fu fw is bi translated">JavaScript中的异步编程</h2><div class="pm l"><h3 class="bd b gy z fp pk fr fs pl fu fw dk translated">异步/等待的最佳用途</h3></div><div class="pn l"><p class="bd b dl z fp pk fr fs pl fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="po l"><div class="pp l pq pr ps po pt le pf"/></div></div></a></div><blockquote class="ki"><p id="d414" class="kj kk it bd kl km kn ko kp kq kr ks dk translated">希望你喜欢它！在下一篇文章中，我将介绍async/await操作，并让它变得更有趣。</p></blockquote></div></div>    
</body>
</html>