<html>
<head>
<title>Crashlytics: Reduce Debugging Time by Monitoring Exceptions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Crashlytics:通过监控异常减少调试时间</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/crashlytics-reduce-debugging-time-by-monitoring-exceptions-2b5df6754072?source=collection_archive---------18-----------------------#2020-03-30">https://levelup.gitconnected.com/crashlytics-reduce-debugging-time-by-monitoring-exceptions-2b5df6754072?source=collection_archive---------18-----------------------#2020-03-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5992da285b54da6913da06624c4e3923.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4xyS3ZfYuDq7POdDN5eHag.png"/></div></div></figure><p id="1835" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Crashlytics是一个流行的崩溃报告工具，最初由<strong class="ka ir"> Fabric </strong>开发，允许您远程和本地监控您的软件，并在出现问题时生成详细的报告。使用这样的工具可以显著减少调试时间，因为当崩溃发生时，您会立即得到通知，并得到定制的报告。</p><p id="be57" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">谷歌于2017年从Twitter收购了Fabric，最近决定将其关闭。幸运的是，所有Crashlytics功能都将合并到Firebase中，从2020年5月4日<strong class="ka ir">起(由于冠状病毒而延期)，</strong> Fabric Crashlytics将不再提供。因此，如果你已经在使用它，现在是一个过渡到Firebase Crashlytics(目前处于测试阶段)的好时机。</p><p id="3913" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您需要做的就是获取依赖项并创建一个Firebase项目。</p><h1 id="37cf" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">解决依赖关系</h1><p id="50e5" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">将以下内容插入到您的<code class="fe lz ma mb mc b">app/build.gradle</code>文件中:</p><figure class="md me mf mg gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="e605" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将以下类路径添加到项目级build.gradle文件中:</p><figure class="md me mf mg gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><h1 id="4b8c" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">建立新的Firebase项目</h1><p id="43da" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">1-)转到<code class="fe lz ma mb mc b">https://console.firebase.google.com</code>，点击<code class="fe lz ma mb mc b">Add Project</code>。</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mj"><img src="../Images/5df742d349a73ad4cd27a4d10fef23b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FIGN9UcZ8kCHORGbdMcpkQ.png"/></div></div></figure><p id="933d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2-)给你的项目起个名字，然后继续。</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/42a43a86c397c6ba3bf6d47f01fa528f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VEPujEiA3smu0UD_PoarAg.png"/></div></div></figure><p id="f8eb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3-)启用谷歌分析。</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ml"><img src="../Images/ee66d83ca3a25a3abacf4132cd789497.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YL0TeEjxMli53K7-CCAgJg.png"/></div></div></figure><p id="ef3a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">4-)你需要选择一个谷歌分析帐户。如果您已经有一个，您将能够选择它。如果没有，你可以这样创建一个新的账户:简单地给一个新的账户名，选择一个地点并同意条款。</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mm"><img src="../Images/c9dc0d21a263293c52be30798af769dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JFDp0BQ-9luE_hEWLU5pow.png"/></div></div></figure><p id="8e81" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">5-)创建您的项目可能需要几秒钟时间。创建完成后，点击<code class="fe lz ma mb mc b">Continue</code>。</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/0b804c47c233823909bcf071052b9e6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*NCCXaHE0Zojqs9pPMcc1jw.png"/></div></div></figure><p id="7e64" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">6-)您将被重定向到新的Firebase项目。点击你想用的平台，我会选择安卓。</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/e3669d5249c6a885b30a2eb5bd98f558.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hOdaGFPzhnzCUt9Bv1yZfA.png"/></div></div></figure><p id="9559" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">7-)输入你的安卓应用的包名，点击<code class="fe lz ma mb mc b">Continue</code></p><figure class="md me mf mg gt jr gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/754b20e2524f6b9731364b9f3411cfbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*lxBCtewlIi82WVogOwGPKA.png"/></div></figure><p id="b6cb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">7-)下载名为<code class="fe lz ma mb mc b">google-services.json</code>的项目证书文件，并将其添加到项目的app文件夹中。</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/0d4b611b5dabc774197d2bc28511bb52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*but-qQKwhMijLv5ThJ0rJw.png"/></div></figure><p id="01d4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">8-)只需在<code class="fe lz ma mb mc b">Add Firebase SDK</code>步骤中点击<code class="fe lz ma mb mc b">Continue</code>，因为我们已经完成了。一旦您构建并安装了包含凭证的应用程序，您将看到在最后一步连接成功:</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/06d7da70a8c32ee8e457b475073cde15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*MDeSDHjsf5aeETqAO07iZA.png"/></div></figure><h1 id="7f9d" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">使用Firebase Crashlytics API</h1><p id="3ea5" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">用法非常简单。Firebase Crashlytics将崩溃信息保存为会话。会话是最终导致异常的所有事件的集合。您可以使用各种方法自定义会话，以便在其中保存附加信息。默认情况下，API被配置为自动发送崩溃报告。通过将<code class="fe lz ma mb mc b">setCrashlyticsCollectionEnabled()</code>设置为假，可以禁用崩溃报告的自动发送。如果禁用此选项，日志将保存在本地，不会发送到云中。如果您想使用<code class="fe lz ma mb mc b">sendUnsentReports()</code>方法，您可以手动发送它们。</p><p id="3fc4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是它如何工作的一个例子:</p><figure class="md me mf mg gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><ul class=""><li id="5a69" class="ms mt iq ka b kb kc kf kg kj mu kn mv kr mw kv mx my mz na bi translated"><code class="fe lz ma mb mc b">log()</code>方法用于向会话追加额外的日志。需要注意的是，日志不会直接发送到服务器。如果崩溃真的发生了，它们会被存储起来并随崩溃一起发送。</li><li id="370d" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated"><code class="fe lz ma mb mc b">setCustomKey()</code>方法可能用于存储您的变量状态或其他用户配置。这是一个与崩溃报告一起发送的键/值映射。</li><li id="d25f" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated"><code class="fe lz ma mb mc b">recordException()</code>用于报告非致命事故。你可以用这个发送你处理过的异常。</li></ul><p id="7f80" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你所有的崩溃报告都可以在Firebase控制台的<strong class="ka ir"> Crashlytics </strong>标签下找到。除了您定制的崩溃报告，您还可以找到设备信息，如Android版本、内存使用情况、品牌/型号等。如果您想要区分特定的用户，您可以使用FirebaseCrashlytics中的<code class="fe lz ma mb mc b">setUserId()</code>方法来配置userId。</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ng"><img src="../Images/63b2d93a49d5781833f8490cd82ea73f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zZfs33G7NZdrP6z197792w.png"/></div></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated">列出了所有致命和非致命事故。您可以看到特定的崩溃发生了多少次，以及有多少不同的用户遇到了它。</figcaption></figure></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ns"><img src="../Images/aa4627ca03cf5b03d79e303aa2888d9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CoKAiyGsZiftBjZkc-yaGQ.png"/></div></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated">致命异常报告</figcaption></figure></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nt"><img src="../Images/2c99eff44a56c833ef615e31d040fddb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XGnjR1sCK_LothyClVdxDg.png"/></div></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated">非致命异常报告</figcaption></figure></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nu"><img src="../Images/d13576b97834bfdaef5bb606188eca7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ttUKIhouRxKeKrP7stQaAA.png"/></div></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated">设备信息也会随崩溃一起报告。</figcaption></figure><h2 id="bdad" class="nv kx iq bd ky nw nx dn lc ny nz dp lg kj oa ob lk kn oc od lo kr oe of ls og bi translated">参考资料:</h2><div class="oh oi gp gr oj ok"><a href="https://firebase.google.com/docs/crashlytics/get-started-new-sdk?platform=android" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd ir gy z fp op fr fs oq fu fw ip bi translated">使用Firebase Crashlytics SDK开始使用Firebase Crashlytics</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">iOS版Firebase Crashlytics SDK是测试版。这意味着功能可能会反向改变…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">firebase.google.com</p></div></div></div></a></div><div class="oh oi gp gr oj ok"><a href="https://get.fabric.io/" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd ir gy z fp op fr fs oq fu fw ip bi translated">面向团队的Fabric - App开发平台</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">最好的织物现已上市。我们将最好的面料整合到Firebase中，为您带来一个强大的…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">get.fabric.io</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy jw ok"/></div></div></a></div><div class="oh oi gp gr oj ok"><a href="https://en.wikipedia.org/wiki/Crashlytics" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd ir gy z fp op fr fs oq fu fw ip bi translated">碰撞分析</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">编辑描述</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">en.wikipedia.org</p></div></div><div class="ot l"><div class="oz l ov ow ox ot oy jw ok"/></div></div></a></div></div></div>    
</body>
</html>