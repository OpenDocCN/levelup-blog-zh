<html>
<head>
<title>Cracking the Navigation Bar Secrets with SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用SwiftUI破解导航栏秘密</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/cracking-the-navigation-bar-secrets-with-swiftui-30e9b019502c?source=collection_archive---------0-----------------------#2021-06-10">https://levelup.gitconnected.com/cracking-the-navigation-bar-secrets-with-swiftui-30e9b019502c?source=collection_archive---------0-----------------------#2021-06-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="bd7c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">从一个视图导航到另一个视图，或者简单地显示标题和按钮，是现代iOS应用程序最重要的组成部分之一。几乎每个app都有这个功能。SwiftUI为如何显示导航栏、设置标题和添加按钮带来了一些新方法。所以我们来看看。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/dc12810ed7db096327b1bac98bc70c05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iUCPmoQnhb3rcJ6oPp9jxQ.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@vonshnauzer" rel="noopener ugc nofollow" target="_blank">叶戈尔·迈兹尼克</a>在<a class="ae le" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</figcaption></figure><h1 id="4657" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">显示导航视图</h1><p id="0efb" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">为了使用SwiftUI显示导航栏，我们应该使用负责此目的的<code class="fe mi mj mk ml b">NavigationView</code>组件。它要求我们提供一个<code class="fe mi mj mk ml b">View</code>类型的<code class="fe mi mj mk ml b">Content</code>。<code class="fe mi mj mk ml b">Content</code>可以是从文本字段到可滚动内容的任何内容。简而言之，它可以是任何SwiftUI视图。</p><p id="5c8b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了显示导航的标题，SwiftUI采用了一种与我们习惯的UIKit完全不同的方法。我们应该将它设置为视图修改器，不是为<code class="fe mi mj mk ml b">NavigationView</code>，而是为<code class="fe mi mj mk ml b">Content</code>。</p><pre class="kp kq kr ks gt mm ml mn mo aw mp bi"><span id="bc6a" class="mq lg it ml b gy mr ms l mt mu">var body: some View {<br/>  NavigationView {<br/>    Text("Hello, world!")<br/>      .navigationTitle("Title")<br/>  }<br/>}</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/aa3ad8efbcabe5c23c163299c2b66284.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/0*1iC2l8XlmEB618GO.png"/></div></figure><p id="9df5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">SwiftUI框架提供了一种指定<code class="fe mi mj mk ml b">NavigationView</code>大小的方法。我们想为<code class="fe mi mj mk ml b">Content</code>使用<code class="fe mi mj mk ml b">.navigationBarTitleDisplayMode</code>修改器，并提供一个显示模式。<code class="fe mi mj mk ml b">DisplayMode</code>类型是有三种情况的枚举:</p><ul class=""><li id="2bcd" class="mw mx it js b jt ju jx jy kb my kf mz kj na kn nb nc nd ne bi translated"><code class="fe mi mj mk ml b">automatic</code> -继承上一个导航项；</li><li id="834b" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><code class="fe mi mj mk ml b">inline</code> -导航尺寸小；</li><li id="add2" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><code class="fe mi mj mk ml b">large</code> -大导航尺寸。</li></ul><p id="4a7d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们看看如何在代码中使用它。</p><pre class="kp kq kr ks gt mm ml mn mo aw mp bi"><span id="53ec" class="mq lg it ml b gy mr ms l mt mu">NavigationView {<br/>  Text("Hello, world!")<br/>    .navigationTitle("Title")<br/>    .navigationBarTitleDisplayMode(.inline)     <br/>}</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/9756b5bc70400265e7ca38031c4c7d61.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/0*kw4LyjOeCt2losTZ.png"/></div></figure><p id="5b76" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当我们想要将<code class="fe mi mj mk ml b">NavigationView</code>更改为更大的尺寸时，我们只需将<code class="fe mi mj mk ml b">.inline</code>更改为<code class="fe mi mj mk ml b">.large</code>。</p><pre class="kp kq kr ks gt mm ml mn mo aw mp bi"><span id="6aac" class="mq lg it ml b gy mr ms l mt mu">NavigationView {<br/>  Text("Hello, world!")<br/>    .navigationTitle("Title")<br/>    .navigationBarTitleDisplayMode(.large)<br/>}</span></pre><h1 id="b0bc" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">添加导航视图按钮</h1><p id="5dc8" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">现在我们知道了如何显示<code class="fe mi mj mk ml b">NavigationView</code>，让我们来探索如何添加按钮。我想指出的是，以前在SwiftUI中，我们使用了<code class="fe mi mj mk ml b">.navigationBarItems</code>视图修饰符，但是现在不推荐使用了。对于最新的SwiftUI版本，我们应该调用<code class="fe mi mj mk ml b">.toolbar</code>修饰符。下面我们来深入探讨一下如何在各种场景下使用。</p><h1 id="878f" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">添加单个按钮</h1><p id="ce5d" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">让我们在<code class="fe mi mj mk ml b">NavigationView</code>的前端和后端添加一个<code class="fe mi mj mk ml b">Button</code>。为了实现这一点，我们需要使用<code class="fe mi mj mk ml b">.toolbar</code>视图修改器并传递<code class="fe mi mj mk ml b">.ToolbarItem</code>视图。为了初始化<code class="fe mi mj mk ml b">.ToolbarItem</code>，我们应该提供位置和内容。放置参数是一个类型<code class="fe mi mj mk ml b">ToolbarItemPlacement</code>，它是一个结构体。有几种方法可以管理布局，但现在我们将研究其中的两种方法:</p><ul class=""><li id="1cae" class="mw mx it js b jt ju jx jy kb my kf mz kj na kn nb nc nd ne bi translated"><code class="fe mi mj mk ml b">navigationBarLeading</code> -显示导航栏前端的按钮；</li><li id="d464" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><code class="fe mi mj mk ml b">navigationBarTrailing</code> -显示导航栏尾部的按钮。</li></ul><pre class="kp kq kr ks gt mm ml mn mo aw mp bi"><span id="8213" class="mq lg it ml b gy mr ms l mt mu">var body: some View {<br/>  NavigationView {<br/>    Text("Buttons Example")<br/>      .navigationTitle("Buttons")<br/>      .toolbar {<br/>        ToolbarItem(placement: .navigationBarLeading) {<br/>          Button(action: {<br/>            print("Refresh")<br/>          }) {<br/>            Label("Send", systemImage: "paperplane.fill")<br/>          }<br/>        }<br/>        ToolbarItem(placement: .navigationBarTrailing) {<br/>          Button(action: {<br/>            print("Refresh")<br/>          }) {<br/>            Label("Refresh", systemImage: "arrow.clockwise")<br/>          }<br/>        }<br/>      }<br/>  }<br/>}</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nk"><img src="../Images/04e4868a715dee25477f6fd7834f88de.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/0*7ANc9AXiNr0SgCo2.png"/></div></div></figure><h1 id="f00a" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">添加多个按钮</h1><p id="0b06" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">现在我们知道了如何添加单个按钮，让我们学习如何添加多个按钮。这次我们需要使用代表一组工具栏项目的<code class="fe mi mj mk ml b">ToolbarItemGroup</code>。</p><pre class="kp kq kr ks gt mm ml mn mo aw mp bi"><span id="b8fa" class="mq lg it ml b gy mr ms l mt mu">.toolbar {<br/>  ToolbarItemGroup(placement: .navigationBarLeading) {<br/>    Button(action: {<br/>      print("Send")<br/>    }) {<br/>      Label("Send", systemImage: "paperplane.fill")<br/>    }<br/>  }</span><span id="7cee" class="mq lg it ml b gy nl ms l mt mu">  ToolbarItemGroup(placement: .navigationBarTrailing) {<br/>    Button(action: {<br/>      print("Refresh")<br/>    }) {<br/>      Label("Refresh", systemImage: "arrow.clockwise")<br/>    }</span><span id="b5b0" class="mq lg it ml b gy nl ms l mt mu">    Button(action: {<br/>      print("Edit")<br/>    }) {<br/>      Label("Edit", systemImage: "slider.horizontal.3")<br/>    }<br/>  }<br/>}</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nm"><img src="../Images/f38f15cf43a8f2851f71e769bcf70936.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/0*6VlAr9i1W7K1iIuJ.png"/></div></div></figure><p id="1bb5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在添加多个按钮的时候，不要太疯狂。最终可能会变得难以使用应用程序，因为按钮可能会掩盖导航栏的标题。</p><h1 id="720c" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">更改导航视图颜色</h1><p id="c489" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">现在，SwiftUI没有改变<code class="fe mi mj mk ml b">NavigationView</code>颜色的选项。为此，我们需要返回UIKit并使用<code class="fe mi mj mk ml b">UINavigationBarAppearance</code>对象来定制导航栏。</p><p id="a430" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要更改SwiftUI导航栏的颜色，我们可以将<code class="fe mi mj mk ml b">init</code>方法添加到SwiftUI视图中，并在其中更改导航栏的外观，如下所示:</p><pre class="kp kq kr ks gt mm ml mn mo aw mp bi"><span id="a145" class="mq lg it ml b gy mr ms l mt mu">init() {<br/>  let coloredAppearance = UINavigationBarAppearance()<br/>  coloredAppearance.configureWithOpaqueBackground()<br/>  coloredAppearance.backgroundColor = .systemRed<br/>  coloredAppearance.titleTextAttributes = [.foregroundColor: UIColor.white]<br/>  coloredAppearance.largeTitleTextAttributes = [.foregroundColor: UIColor.white]<br/>  <br/>  UINavigationBar.appearance().standardAppearance = coloredAppearance<br/>  UINavigationBar.appearance().compactAppearance = coloredAppearance<br/>  UINavigationBar.appearance().scrollEdgeAppearance = coloredAppearance<br/>  <br/>  UINavigationBar.appearance().tintColor = .white<br/>}</span><span id="686f" class="mq lg it ml b gy nl ms l mt mu">var body: some View {<br/>  NavigationView {<br/>    Text("Navigtion Bar with different color")<br/>      .navigationTitle("Title")<br/>  }<br/>}</span></pre><p id="8897" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">从代码中我们可以看到，我们正在做多件事情，比如改变背景颜色和标题文本颜色。我们可以使用系统颜色，也可以从iOS应用程序资产目录中引入颜色。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/feca85cd078663488a98427f370cd470.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/0*x66iPpDhRelkr4nV.png"/></div></figure><h1 id="304c" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="ebaf" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">导航栏是现代iOS和iPadOS应用程序的重要元素。大多数应用程序都有不止一个屏幕，我们的用户必须在我们的应用程序中来回导航。</p><p id="7f4f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">SwiftUI提供了一个新的视图，<code class="fe mi mj mk ml b">NavigationView</code>，与UIKit相比，我们需要完全转变对导航以及如何使用它的想法。</p><p id="4237" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用SwiftUI，在屏幕上添加导航、更改标题和在导航栏上添加按钮非常简单。但是如果我们想改变颜色，我们应该回到UIKit。我相信这种情况很快就会改变。</p><h1 id="344b" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">链接</h1><ul class=""><li id="ea78" class="mw mx it js b jt md jx me kb no kf np kj nq kn nb nc nd ne bi translated"><a class="ae le" href="https://github.com/fassko/SwiftUINavigationView" rel="noopener ugc nofollow" target="_blank">样本代码</a></li><li id="ccaa" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><a class="ae le" href="https://www.hackingwithswift.com/articles/216/complete-guide-to-navigationview-in-swiftui" rel="noopener ugc nofollow" target="_blank">swift ui中导航视图的完整指南</a></li><li id="bf26" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><a class="ae le" href="https://www.simpleswiftguide.com/swiftui-navigationview-tutorial-with-examples/" rel="noopener ugc nofollow" target="_blank"> SwiftUI导航查看教程示例</a></li><li id="4616" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><a class="ae le" href="https://youtu.be/kCJyhG8zjvY" rel="noopener ugc nofollow" target="_blank">swift ui中的导航栏样式</a></li><li id="90ce" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><a class="ae le" href="https://swiftuirecipes.com/blog/navigation-bar-styling-in-swiftui" rel="noopener ugc nofollow" target="_blank">swift ui中的导航栏样式</a></li><li id="e94b" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><a class="ae le" href="https://medium.com/@francisco.gindre/customizing-swiftui-navigation-bar-8369d42b8805" rel="noopener">定制SwiftUI导航栏</a></li><li id="e003" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><a class="ae le" href="https://medium.com/swlh/custom-navigationview-bar-in-swiftui-4b782eb68e94" rel="noopener">swift ui中的自定义导航视图栏</a></li><li id="f902" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><a class="ae le" href="https://www.hackingwithswift.com/quick-start/swiftui/how-to-add-bar-items-to-a-navigation-view" rel="noopener ugc nofollow" target="_blank">https://www . hacking with swift . com/quick-start/swift ui/how-to-add-bar-items-to-a-navigation-view</a></li><li id="b42b" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><a class="ae le" href="https://medium.com/@francisco.gindre/customizing-swiftui-navigation-bar-8369d42b8805" rel="noopener">定制SwiftUI导航栏</a></li></ul></div></div>    
</body>
</html>