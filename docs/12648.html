<html>
<head>
<title>Java Tutorial. Creating a Basic Rest Api Using SpringBoot. Pt4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java教程。使用SpringBoot创建一个基本的Rest Api。Pt4</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/java-tutorial-creating-a-basic-rest-api-using-springboot-pt4-1fcd39029472?source=collection_archive---------14-----------------------#2022-06-26">https://levelup.gitconnected.com/java-tutorial-creating-a-basic-rest-api-using-springboot-pt4-1fcd39029472?source=collection_archive---------14-----------------------#2022-06-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="547a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">创建控制器和我们的CRUD操作。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a3064b01b9c6fd8f3984b117857828f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JoQrxl_9SnIFYHFV"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">luis gomes摄于Pexels</figcaption></figure><p id="656c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本指南是一个延续。如果没有，从头开始<a class="ae lu" href="https://medium.com/@emmanuel_tejeda/java-tutorial-creating-a-basic-rest-api-using-springboot-pt1-3ef25e3c903a" rel="noopener">这里</a>或者pt3 <a class="ae lu" href="https://medium.com/@emmanuel_tejeda/java-tutorial-creating-a-basic-rest-api-using-springboot-pt3-f5496ee09c97" rel="noopener">这里</a>。</p><p id="1602" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本指南中，我们将添加REST API的基本特征，即控制器。控制器负责管理我们的CRUD操作和处理API请求。</p><p id="e00e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，在“com/example/demo”下创建一个新包，我们将这个新包命名为“controller”。在我们的新包中将创建一个名为“StudentController”的类。完成后，您的文件结构应该如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/641c18461596083c29f90b50ce6c198d.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*r9BDukU2XfcDPLw6nOKrfQ.png"/></div></figure><p id="9eaa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了使这个类成为REST API，我们将向该类添加“@RestController”注释。要阅读更多关于RestController注释的内容，请点击这里的<a class="ae lu" href="https://www.baeldung.com/spring-controller-vs-restcontroller" rel="noopener ugc nofollow" target="_blank"/>。但简而言之，RestController允许我们更轻松地创建RESTful web服务。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/b25b7320ff5e9a8763b03d1755efd9c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*awsczYKm69Z0VXHioficGg.png"/></div></figure><h2 id="e322" class="lx ly it bd lz ma mb dn mc md me dp mf lh mg mh mi ll mj mk ml lp mm mn mo mp bi translated">获取请求</h2><p id="13a7" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">在本节中，我们将反向操作。我将向您展示一个完整的get请求是什么样子的，然后分解每一行负责做什么。</p><p id="81f0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在提出任何请求之前，我们将首先导入我们的存储库，以访问它提供的所有有价值的工具。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/5714f3874ef3756ac5ff2914b876b361.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/1*XfcuosJB6MhC6EHe-MzRZQ.png"/></div></figure><p id="dc00" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我们运行应用程序时，“@Autowired”注释为我们创建了对象。这就是所谓的依赖注入。点击了解更多关于依赖注入<a class="ae lu" href="https://www.baeldung.com/spring-dependency-injection" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><p id="82f5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来是我们的get请求。</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="3024" class="lx ly it mx b gy nb nc l nd ne">@GetMapping("students")<br/>     public List&lt;Student&gt; getAllStudents(){<br/>     return repo.findAll();<br/>}</span></pre><p id="57c7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从头开始</p><ul class=""><li id="1125" class="nf ng it la b lb lc le lf lh nh ll ni lp nj lt nk nl nm nn bi translated">我们有自己的“@GetMapping”注释。这个注释告诉Spring，这个方法负责从我们的数据库中获取信息。该注释的第二部分是API的名称。例如，这个请求的名称应该是“localhost:8080/students”。</li><li id="4397" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">接下来，我们有一个名为“getAllStudents”的方法声明，返回类型为学生列表。</li><li id="c15a" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">最后，我们调用数据库。这个“repo.findAll”返回所有学生的列表。</li></ul><p id="2cb9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们运行这个并在Postman上发出GET请求，我们将得到一个空列表。为了解决这个问题，让我们转到创建Post请求。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/0a7d98dc3554128823d3452982c8353e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qssj5BLhwwvMmVUsYdLvzQ.png"/></div></div></figure><h2 id="4cce" class="lx ly it bd lz ma mb dn mc md me dp mf lh mg mh mi ll mj mk ml lp mm mn mo mp bi translated">发布请求</h2><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="f749" class="lx ly it mx b gy nb nc l nd ne">@PostMapping("student")<br/>public Optional&lt;Student&gt; addStudent(@RequestBody Student newStudent{          <br/>     repo.save(newStudent);<br/>     return repo.findById(newStudent.getStudentID());<br/>}</span></pre><p id="4e33" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Post请求与Get请求略有不同，但是我们可以看到一些相似之处。</p><p id="5f3a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从头开始</p><ul class=""><li id="6c27" class="nf ng it la b lb lc le lf lh nh ll ni lp nj lt nk nl nm nn bi translated">我们有PostMapping注释，它将我们的方法注释为post请求。我们将我们的地址命名为“学生”,但是您可以将它改为您想要的任何名称。</li><li id="a9e3" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">接下来，我们有自己的方法，命名为“addStudent”，并将返回类型设置为可选的<student>。我们需要这种奇怪的返回类型，因为当返回一个对象时，我们可以返回student对象，在本例中是student模型。或者，如果没有找到student对象，它将返回一个异常。这个可选的返回类型允许我们处理这两种情况。</student></li><li id="a89d" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">在我们的参数中，有我们试图将“newStudent”与“@RequestBody”注释一起存储到数据库中的学生。我们使用这个注释是因为当在请求中发送信息时，数据在HTTP请求体中传输，然后被转换成Java对象或JSON。点击了解更多信息。</li><li id="db25" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">在我们的方法体内，有“回购”。save ”,它将我们的新学生保存到数据库中，将student对象作为参数。</li><li id="889f" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">最后，我们想要返回我们刚刚保存的学生。我们使用“repo.findById”通过学生的唯一Id来查找他们。</li></ul><p id="0b1d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，你的控制器应该是这样的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/98e9bd3540662b65d8be7f5361d97d3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*PPQoDoTbkpjWcpUnvH3pKw.png"/></div></figure><p id="7fce" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，让我们来看看我们的新功能。</p><p id="010f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们去找邮递员吧。我们将请求设置为post，并以JSON格式在主体中写入我们的新学生。点击发送后，这是我们得到的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/d2afdb39ce3477e606b385243a5ecb85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*tbcy6AiTkMMQopH_UwSamg.png"/></div></div></figure><p id="3c76" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如您所见，我们得到了刚才输入的学生作为响应。我们可以通过发出get请求来测试学生是否在数据库中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/b0ebfe9a142bfd2c7c97cc3eebb21fa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*H5d8hswvI3q5HeAgbU0I8A.png"/></div></figure><p id="aecb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这都是为了我们的REST API。本指南中没有提到的东西太多了，我恳请你去研究和探索。学习如何创建REST API是你能学到的最好的技能之一，它将帮助你跨越你编程生涯的大部分，如果不是全部的话。如果您需要一些指导，请查看如何在控制器中实现删除和放置请求。</p><p id="8027" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我将在本指南的参考资料部分留下这段代码的链接；看看它，玩玩它。如果你有任何问题，请评论，我会尽快处理。</p><p id="aa63" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我希望你有美好的一天！</p><h2 id="754d" class="lx ly it bd lz ma mb dn mc md me dp mf lh mg mh mi ll mj mk ml lp mm mn mo mp bi translated">资源</h2><blockquote class="nx ny nz"><p id="d545" class="ky kz oa la b lb lc ju ld le lf jx lg ob li lj lk oc lm ln lo od lq lr ls lt im bi translated"><a class="ae lu" href="https://github.com/Emmanuel-Tejeda/student-manager-rest-api-spring" rel="noopener ugc nofollow" target="_blank">链接到该代码的github库</a></p><p id="9b7c" class="ky kz oa la b lb lc ju ld le lf jx lg ob li lj lk oc lm ln lo od lq lr ls lt im bi translated"><a class="ae lu" href="https://www.baeldung.com/spring-controller-vs-restcontroller" rel="noopener ugc nofollow" target="_blank">关于休息控制器的信息</a></p><p id="b2ad" class="ky kz oa la b lb lc ju ld le lf jx lg ob li lj lk oc lm ln lo od lq lr ls lt im bi translated"><a class="ae lu" href="https://www.baeldung.com/spring-dependency-injection" rel="noopener ugc nofollow" target="_blank">弹簧依赖注射</a></p><p id="8138" class="ky kz oa la b lb lc ju ld le lf jx lg ob li lj lk oc lm ln lo od lq lr ls lt im bi translated"><a class="ae lu" href="https://www.baeldung.com/spring-request-response-body" rel="noopener ugc nofollow" target="_blank"> Sping请求正文注释</a></p></blockquote></div></div>    
</body>
</html>