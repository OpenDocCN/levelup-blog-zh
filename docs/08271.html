<html>
<head>
<title>Moving from No-code to Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从无代码到有代码</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/moving-from-no-code-to-code-9d171a5927b0?source=collection_archive---------3-----------------------#2021-04-16">https://levelup.gitconnected.com/moving-from-no-code-to-code-9d171a5927b0?source=collection_archive---------3-----------------------#2021-04-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2217" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">无代码工具正在蓬勃发展，让任何有想法的人都能快速创造出产品。不久之后，一旦一个想法变得足够大，工程师就可以被请来帮助运作一切。产品将需要变得比最初的MVP更加可靠和稳定。在这一点上，从无代码抽象回到基于代码的工具可能是具有挑战性和耗时的，因为实现它们的复杂性，这些工具最初被跳过了！</p><p id="d2d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不久前，我加入了<a class="ae kl" href="https://tines.com" rel="noopener ugc nofollow" target="_blank"> Tines </a>，这是一个低代码/无代码平台，使任何人都可以创建复杂的网络安全工作流，包括任何有API的工具，甚至一些没有API的工具。虽然大多数人不会每天使用网络安全工具，但安全分析师最终会花费大量时间使用非常常见的工具，如Google Workspace、Slack和Zendesk来执行日常任务。巧合的是，这些工具也是许多电子商务平台用来处理订单和与客户互动的工具。</p><p id="14ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Tines中可以看到的一切也可以表示为代码，这里我将介绍如何制作故事板设计，将其转换为可以理解为代码的可靠部署，以及如何在此过程中利用常用的开发工具。</p><h1 id="2aba" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">成为最有价值球员</h1><p id="fc9a" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">无代码工具通常专注于提供创建和编辑工作流的奇妙用户体验。Tines利用灵活的“故事板”来创建“故事”,这些故事是针对给定的一系列事件所采取的行动的可视化图表。像故事板这样的画布为快速原型化并最终实现业务逻辑提供了极好的机会。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/0c89c6f82d1385b9fcbe8d6df48a4ea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/0*Vk3NKoXCJCFbwVvy.png"/></div></figure><p id="7e94" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在上面的示例中，工作流将在webhook上接收一个新订单，向Slack通道发布一条包含订单详细信息的消息，将该订单添加到Airtable中进行跟踪，并向购买者发送一封确认电子邮件。这个简短的例子本身可能不是一个企业(可能很接近！)，但它包含了许多业务只需几个小动作就能依赖的流程。</p><p id="6d4c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了更好地理解每个图块的功能，我可以将任意图块复制到我的剪贴板，然后粘贴到文本编辑器中。</p><pre class="lq lr ls lt gt lx ly lz ma aw mb bi"><span id="4043" class="mc kn iq ly b gy md me l mf mg">{<br/> "agents": [{<br/>  "disabled": false,<br/>  "name": "Add Order to Airtable",<br/>  "options": "{\"url\":\"<a class="ae kl" href="https://api.airtable.com/v0/{{" rel="noopener ugc nofollow" target="_blank">https://api.airtable.com/v0/{{</a> .RESOURCE.airtable_orders }}/orders\",\"content_type\":\"json\",\"method\":\"post\",\"payload\":{\"records\":[{\"fields\":{\"Buyer\":\"{{ .receive_order.buyer }}\",\"Items\":\"{{ .receive_order.items }}\",\"Cost\":{{ receive_order.cost}}}}]},\"headers\":{\"Authorization\":\"Bearer {{ .CREDENTIAL.airtable }}\"}}",<br/>  "position": {<br/>   "x": 179,<br/>   "y": 268<br/>  },<br/>  "type": "httpRequest"<br/> }],<br/> "links": [],<br/> "diagramNotes": []<br/>}</span></pre><p id="30db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面的配置告诉Tines向Airtable发出一个HTTP请求，以便向Airtable数据库添加新的订单细节。通过将工作流中的操作链接在一起，我可以在整个流程中重用信息。例如，我可以使用我在<code class="fe mh mi mj ly b">{{ .receive_order.buyer }}</code>中收到的电子邮件地址，并在向买家发送购买确认时在“电子邮件配置”标题中使用它。</p><h1 id="9e11" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">将MVP转换成可部署的代码</h1><p id="4a26" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">有了这个流程，假设我们现在每月赚1，000，000美元，并且可以雇佣我们的第一个工程师。新业务的待办事项中可能已经有太多的事情要做，所以重新滚动无代码工作流可能不是优先列表中的重点(为什么要修复没有损坏的东西？).然而，它可能更符合工程师们习惯的工具。一个工程师可能会拿起他们最喜欢的工具之一，比如Terraform，让一切变得稳定一些。所有类型的工程师都广泛使用Terraform来可靠地部署网站和服务。没有理由说Terraform不能进入无代码空间。</p><p id="8b3e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我们的无代码解决方案暴露了工作流每个部分的技术细节，所以我构建了一些工具来将这些技术细节转换成Terraform使用的规范，包括用于Tines的Terraform提供者(<a class="ae kl" href="https://github.com/tuckner/terraform-provider-tines" rel="noopener ugc nofollow" target="_blank">位于此处</a>)。</p><p id="86ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我说得太远之前，我想提一下，我个人并没有看到许多无代码解决方案提供与已知工程工具的兼容性，但我可以看到未来，这是无代码的下一次迭代，我也不认为我是唯一的一个-</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mk"><img src="../Images/3e25c91971304417cf8f0ff45d4a18a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zKMorZU07pScpSJP.png"/></div></div></figure><p id="c59c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我要做的事情可能很明显了，但是利用像Github这样的平台解决了其中的一些问题……稍后会有更多的介绍。</p><p id="4da4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回到正题，让我们看看在Terraform中“向Airtable添加订单”的尖齿配置可能是什么样的:</p><pre class="lq lr ls lt gt lx ly lz ma aw mb bi"><span id="2730" class="mc kn iq ly b gy md me l mf mg">resource "tines_agent" "add_order_to_airtable" {<br/> name = "Add Order to Airtable"<br/> agent_type = "Agents::HTTPRequestAgent"<br/> story_id = tines_story.ecommerce_orders.id <br/> keep_events_for = 0<br/> source_ids = []<br/> receiver_ids = []<br/> position = {<br/>  x = 180.0<br/>  y = 270.0<br/> }<br/> agent_options = jsonencode({<br/>  "content_type": "json",<br/>  "headers": {<br/>   "Authorization": "Bearer {{ .CREDENTIAL.airtable }}"<br/>  },<br/>  "method": "post",<br/>  "payload": {<br/>   "records": [{<br/>    "fields": {<br/>     "Buyer": "{{ .receive_order.buyer }}",<br/>     "Cost": "{{ receive_order.cost}}",<br/>     "Items": "{{ .receive_order.items }}"<br/>    }<br/>   }]<br/>  },<br/>  "url": "<a class="ae kl" href="https://api.airtable.com/v0/{{" rel="noopener ugc nofollow" target="_blank">https://api.airtable.com/v0/{{</a> .RESOURCE.airtable_orders }}/Orders"<br/> })<br/>}</span></pre><p id="f94b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你精通地形，这应该看起来非常熟悉。令人惊讶的是，在这两种配置之间实际上并不需要太多的改变…只是一些语法的变动。为了使它变得更加简单，我创建了一组工具来将无代码配置的文本版本更改为Terraform配置，该配置包含在前面链接的Terraform提供程序的“scripts”目录中。</p><h1 id="c74f" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">部署无代码代码</h1><p id="fe69" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">随着我们的尖齿配置转化为地形配置，我们可以开始谈论部署。直接进入CLI并运行类似于<code class="fe mh mi mj ly b">terraform apply</code>的东西是很简单的，但是这不允许在任何更改上进行协作，保持当前的部署状态，或者执行配置的自动语法检查。</p><p id="20d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">部署Terraform配置的通常做法是将它们存储在… dun dun dun… Github中。当使用Github时，您开始使用大量开发人员都知道的工具来支持备份、版本控制、维护、演进和无代码配置的文档。</p><p id="ea71" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了帮助实现这一点，我们可以在Terraform中使用Github动作。Github动作是Github的一个特性，它允许以自动化的方式测试和部署代码。利用<a class="ae kl" href="https://guides.github.com/introduction/flow/" rel="noopener ugc nofollow" target="_blank"> Github流</a>，我们可以在创建拉取请求时执行一个<code class="fe mh mi mj ly b">terraform plan</code>，并在拉取请求上留下一个注释，其中包含如果成功将会发生的预期变化。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mp"><img src="../Images/d441626c486a060272c02f34aa31f63c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3FdfB5EqbEaOAYfL.png"/></div></div></figure><p id="a42d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当pull请求被合并时，Github动作将自动执行<code class="fe mh mi mj ly b">terraform apply</code>来部署配置更改。这样，我们现在有了一个无代码工具的完整部署管道！</p><p id="a66b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Github的动作配置可以在<a class="ae kl" href="https://github.com/tuckner/tines-deploy-actions" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="157d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然这些都是针对Tines的，但是我很兴奋地等待其他类似的解决方案开始出现，以支持无代码工具，并使更多的人能够构建下一代产品。</p></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><p id="e95e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mx">最初发布于</em><a class="ae kl" href="https://johntuckner.me/posts/no-code-to-code" rel="noopener ugc nofollow" target="_blank"><em class="mx">https://johntuckner . me</em></a><em class="mx">。</em></p></div></div>    
</body>
</html>