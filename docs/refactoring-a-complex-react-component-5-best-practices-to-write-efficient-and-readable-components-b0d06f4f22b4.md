# é‡æ„å¤æ‚çš„ React ç»„ä»¶â€”â€”ç¼–å†™é«˜æ•ˆå¯è¯»ç»„ä»¶çš„ 5 ä¸ªæœ€ä½³å®è·µ

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/refactoring-a-complex-react-component-5-best-practices-to-write-efficient-and-readable-components-b0d06f4f22b4>

![](img/9cf97eac5abd2026401467ae3b466e18.png)

è¨æ³•å°”Â·è¨æ³•ç½—å¤«åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

# è¿™ä¸ªé—®é¢˜

React.js å·²ç»æˆä¸ºæœ€å—æ¬¢è¿çš„ web ç»„ä»¶è§†å›¾åº“ï¼Œå®ƒè·¨è¶Šäº†å¤šç§ç‰¹æ€§ï¼Œå¦‚ä»Šå·²æˆä¸ºåˆ›å»ºä»¤äººæƒŠå¹çš„ web åº”ç”¨ç¨‹åºçš„å®Œæ•´å·¥å…·ã€‚

è¯¥ç¤¾åŒºå‘ˆæŒ‡æ•°çº§å¢é•¿ï¼Œå°¤å…¶æ˜¯åœ¨è¿‡å»çš„ 2-3 å¹´é‡Œï¼Œç½‘ä¸Šå……æ–¥ç€æ•°ä»¥åƒè®¡çš„å…³äºè¿™é¡¹æŠ€æœ¯çš„æ•™ç¨‹ã€‚

æ‰€ä»¥ï¼Œæ¯ä¸ªåˆå­¦è€…åœ¨å¼€å§‹å­¦ä¹  React æ—¶åº”è¯¥åšçš„ï¼Œæ­£å¦‚æˆ‘åœ¨[***Codeworks***](https://codeworks.me/?utm_source=medium&utm_medium=organic&utm_campaign=marco_ghiani_hackernoon_how_to_write_clean_react_components)å¼€å§‹æˆ‘çš„é“è·¯æ—¶æ‰€åšçš„ï¼Œæ˜¯é˜…è¯»æ–‡æ¡£æˆ–æ•™ç¨‹æ¥åˆ›å»ºä»–ä»¬çš„ç¬¬ä¸€ä¸ªç»„ä»¶ã€‚

ä½†æ˜¯æˆ‘çš„é—®é¢˜æ˜¯:**ä½ ç¡®å®šä½ çš„ React ç»„ä»¶éµå¾ªäº†æœ€ä½³å®è·µå—ï¼Ÿæˆ–è€…ç®€å•åœ°è¯´ï¼Œå®ƒä»¬ä»…ä»…æ˜¯å·¥ä½œå—ï¼Ÿ**

# è‚®è„çš„ç»„ä»¶æ˜¯ä»€ä¹ˆæ ·å­çš„

ä¸ºäº†æ›´å¥½åœ°è§£é‡Šæˆ‘çš„è§‚ç‚¹ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä¸‹é¢çš„ React ç»„ä»¶:

![](img/8ef7d56b50311fb0b890622437824355.png)

è‚®è„çš„ååº”å…ƒä»¶

è¿™æ˜¯ä¸€ä¸ªå®Œå…¨å·¥ä½œçš„ React ç»„ä»¶ï¼Œå¯ä»¥åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å¤šæ¬¡ä½¿ç”¨ï¼Œå‘ˆç°ä¸€ä¸ªæŒ‰é’®åˆ—è¡¨ï¼Œè¯¥åˆ—è¡¨æœ‰ä¸€ä¸ªç”¨é€”ï¼Œå¹¶æ˜¾ç¤ºæœ€åå•å‡»çš„æŒ‰é’®æ˜¯ä»€ä¹ˆã€‚å¾ˆç®€å•ã€‚

ä½ å¯èƒ½ä¼šæƒ³"*å—¯â€¦â€¦å¦‚æœå®ƒèƒ½å·¥ä½œï¼Œé‚£å°±å¥½äº†ï¼*

ä½†æ˜¯ï¼Œå¦‚æœæ‚¨çŸ¥é“å¦‚ä½•ç”¨å‡ è¡Œä»£ç ç¼–å†™ç›¸åŒçš„ç»„ä»¶ï¼Œè€Œä¸æ˜¯ç°åœ¨çš„ 62 è¡Œä»£ç ï¼Œä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ ***å…ˆä»æ¸…ç†å¼€å§‹å§ï¼*ğŸ’**

# 1.å…·æœ‰åä½œç”¨é’©ä¼˜é€‰åŠŸèƒ½éƒ¨ä»¶

éšç€ React 16.8 ä¸­é’©å­çš„å¼•å…¥ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨ç±»å£°æ˜ä¸Šä½¿ç”¨åŠŸèƒ½ç»„ä»¶æ¥å®ç°æœ‰çŠ¶æ€ç»„ä»¶çš„èƒ½åŠ›(å¦‚æœæˆ‘ä»¬éœ€è¦å¤„ç†ä»»ä½•é€»è¾‘çš„è¯)ã€‚

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸ä¼šæ·±å…¥è®¨è®ºç±»ä¸åŠŸèƒ½ç»„ä»¶æˆ– React æŒ‚é’©ã€‚ç„¶è€Œï¼Œä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨ React ç¤¾åŒºä¸­ï¼Œåˆ›å»ºåŠŸèƒ½ç»„ä»¶æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå°¤å…¶æ˜¯ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é’©å­äº†ã€‚

> é’©å­å…è®¸ä½ åœ¨ä¸æ”¹å˜ç»„ä»¶å±‚æ¬¡ç»“æ„çš„æƒ…å†µä¸‹é‡ç”¨æœ‰çŠ¶æ€é€»è¾‘ã€‚

å› æ­¤ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ç¬¬ä¸€æ¬¡é‡æ„åçš„ç»„ä»¶æ˜¯ä»€ä¹ˆæ ·çš„:

![](img/e1c277905f11d4f7b25918ef1530a61b.png)

ç”¨ React é’©å­é‡æ„åŠŸèƒ½ç»„ä»¶ã€‚

å¥½äº†ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å·²ç»æ›´çŸ­äº†ï¼Œæˆ‘ä»¬æ”¾å¼ƒäº†*ç±»*è¯­æ³•ï¼Œä½†æ˜¯ä»ç„¶éœ€è¦åšå¾ˆå¤šä¼˜åŒ–ã€‚

# 2.æ“¦å¹²æ¹¿çš„ï¼

æˆ‘ä»¬èƒ½è¯†åˆ«å‡ºè¿™ä¸ªç»„ä»¶ä¸­çš„ä»»ä½•æ¨¡å¼å—ï¼ŸæŸ¥çœ‹ä»£ç ï¼Œä¼¼ä¹æˆ‘ä»¬æ¯æ¬¡éƒ½å‘ˆç°ä¸€ä¸ªç›¸ä¼¼çš„æŒ‰é’®å…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ¥å—ä¸€äº›ç›¸ä¼¼çš„é“å…·ï¼Œè¿™æ˜¯å°†è¿™ä¸ªé•¿ç»„ä»¶åˆ†æˆå°éƒ¨åˆ†çš„å®Œç¾ä¾‹å­ã€‚

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡æ„å®ƒï¼Œåˆ›å»ºå¦ä¸€ä¸ªå°çš„åŠŸèƒ½ç»„ä»¶æ¥å‘ˆç°æŒ‰é’®ï¼Œä¼ é€’ä¸€äº›å±æ€§ï¼Œå¦‚`action` ***ï¼Œ*** `setClicked` ***ï¼Œ*** å’Œ`title`:

![](img/8cbfab2bd5ae037800b5747cfa12fef8.png)

å¥½äº†ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å¼€å§‹æœ‰ä¸€ä¸ªæ›´å¥½çš„å½¢çŠ¶ï¼Œä½†ä»æœ‰æ”¹è¿›çš„ä½™åœ°ï¼Œè®©æˆ‘ä»¬ç»§ç»­ï¼

# 3)æ°å½“çš„å‘½åå’Œé“å…·è§£æ„

`setLastClickedButton` æ˜¯æˆ‘ä»¬çš„ setter å‡½æ•°çš„æè¿°æ€§åç§°ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦ä¿æŒä»£ç çš„å¯è¯»æ€§å’Œç®€çŸ­æ€§ï¼Œæ‰€ä»¥ä¿æŒæˆ‘ä»¬ä½¿ç”¨çš„åç§°ç®€æ´å’Œå¿…è¦æ˜¯å¾ˆé‡è¦çš„ã€‚æˆ‘ä»¬å°†æŠŠå®ƒæ”¹åä¸º`setClicked`ã€‚

åŒæ ·ï¼Œåªè¦æœ‰å¯èƒ½ï¼Œä»é“å…·å¯¹è±¡ä¸­ææ„ä½ æ‰€éœ€è¦çš„å¯ä»¥é¿å…ä¸æ–­é‡å¤`props` å•è¯ã€‚åœ¨æˆ‘ä»¬çš„`ListItem`ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ç°åœ¨é€šè¿‡ææ„å‡½æ•°å‚æ•°`{ action, title, setClicked }`ä¸­çš„åç§°æ¥è®¿é—® propsã€‚

è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸¤ä¸ªå˜åŒ–:

![](img/bd74880407c904d6610c5440cb6e9b0a.png)

å¤ªå¥½äº†ï¼Œæˆ‘ä»¬å¤§å¤§å‡å°‘äº†ç»„ä»¶å£°æ˜çš„é•¿åº¦ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜å¯ä»¥åšå¾—æ›´å¥½ï¼ğŸš€

# 4.æ„¿ PropTypes ä¸ä½ åŒåœ¨ï¼

æ¸…ç†ä¹‹åï¼Œæ˜¯æ—¶å€™åœ¨ç¼–å†™ç»„ä»¶æ—¶åº”ç”¨ç»å¯¹æœ€ä½³å®è·µäº†ï¼æœ‰äº† [**PropTypes**](https://www.npmjs.com/package/prop-types) ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹æ¥æ”¶åˆ°çš„é“å…·è¿›è¡ŒéªŒè¯ï¼Œé¿å…å› æ•°æ®ç±»å‹ä¸åŒè€Œäº§ç”Ÿé”™è¯¯ï¼Œæ¯”å¦‚æ¥æ”¶åˆ°å­—ç¬¦ä¸²â€œ0â€å¹¶è¯•å›¾å°†å…¶ä¸æ•°å­— 0 è¿›è¡Œä¸¥æ ¼æ¯”è¾ƒ(**â€œ0â€= = = 0->FALSEï¼ï¼ï¼**):

![](img/a74c7cbd092a493a92a14100f0d5fcf0.png)

å±æ€§ç±»å‹éªŒè¯ã€‚

# 5.åˆ†æˆå°å—

çŒœçŒœçœ‹ï¼Œæˆ‘ä»¬çš„ç»„ä»¶æˆ–å¤šæˆ–å°‘å’Œåˆå§‹ç‰ˆæœ¬ä¸€æ ·é•¿ï¼Œä½†æ˜¯ä»”ç»†çœ‹çœ‹æˆ‘ä»¬ç°åœ¨æ‹¥æœ‰çš„ä»£ç ã€‚

æˆ‘ä»¬çœ‹åˆ°ä¸¤ä¸ªä¸åŒçš„ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬åˆ†æˆä¸¤ä¸ªæ¨¡å—ï¼Œä½¿å®ƒä»¬å¯ä»¥åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­é‡ç”¨ã€‚

![](img/800390d1bcf6dd09d7bc7c1cc10e1736.png)![](img/bb76e6d3b0d33cc241a4b9c918d92983.png)

List.js & ListItem.js

# ç»“è®º

åº”ç”¨äºæˆ‘ä»¬åˆå§‹ç»„ä»¶çš„è¿™ç§æ¸…ç†å±•ç¤ºäº†å½“æ‚¨å¼€å§‹æ·±å…¥ç ”ç©¶ React ç»„ä»¶æ—¶å¯ä»¥éµå¾ªçš„ä¸€äº›å¥½çš„å®è·µã€‚

å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹è¿™ä¸ªæœ€ç»ˆç»“æœè¿›è¡Œå¤§é‡çš„å…¶ä»–ä¼˜åŒ–ï¼Œä½†æ˜¯è¦ä¸€æ­¥ä¸€æ­¥æ¥ã€‚è¦éµå¾ªçš„äº”ä¸ªè‰¯å¥½å®è·µæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ğŸ˜‰

å…³äºè¿™ä¸ªè¯é¢˜çš„è¯„è®ºã€åˆ†äº«å’Œè®¨è®ºæ€»æ˜¯å¾ˆå—æ¬¢è¿ï¼Œæˆ‘å¾ˆä¹æ„å›ç­”ä½ çš„ä»»ä½•é—®é¢˜ï¼

> **éšæ—¶è”ç³»æˆ‘** [**Linkedin**](https://www.linkedin.com/in/marcoantonioghiani/)

[](https://medium.com/better-programming/javascript-tips-4-array-flat-and-flatmap-implementation-2f81e618bde) [## Javascript æŠ€å·§#4:æ•°ç»„å¹³é¢å’Œå¹³é¢å›¾å®ç°

### å¯¹æ–°çš„ flat å’Œ flatMap æ–¹æ³•çš„æ½œåŠ›çš„æœ‰ç”¨ä»‹ç»

medium.com](https://medium.com/better-programming/javascript-tips-4-array-flat-and-flatmap-implementation-2f81e618bde) [](https://medium.com/better-programming/javascript-tips-3-convert-error-first-callback-functions-to-promises-f2561d2aaefd) [## JavaScript æŠ€å·§#3:å°†é”™è¯¯ä¼˜å…ˆå›è°ƒå‡½æ•°è½¬æ¢ä¸ºæ‰¿è¯º

### JavaScript å¼‚æ­¥æ¦‚è¿°å’Œä¿è¯é”™è¯¯ä¼˜å…ˆå›è°ƒçš„å®ç”¨ç¨‹åº

medium.com](https://medium.com/better-programming/javascript-tips-3-convert-error-first-callback-functions-to-promises-f2561d2aaefd) [](https://medium.com/better-programming/javascript-tips-2-object-array-deep-clone-implementation-2d6a43e43d2a) [## JavaScript æŠ€å·§#2:å¯¹è±¡/æ•°ç»„æ·±åº¦å…‹éš†å®ç°

### JavaScript ä¸­æ·±åº¦å…‹éš†æ–¹æ³•çš„ç®€å•å®ç°

medium.com](https://medium.com/better-programming/javascript-tips-2-object-array-deep-clone-implementation-2d6a43e43d2a) [](https://medium.com/better-programming/javascript-tips-1-the-filter-method-for-object-properties-a2d6869b5127) [## JavaScript æŠ€å·§#1:å¯¹è±¡å±æ€§çš„è¿‡æ»¤æ–¹æ³•

### åº”ç”¨äºå¯¹è±¡å±æ€§çš„è¿‡æ»¤å™¨æ•°ç»„æ–¹æ³•çš„ç®€å• JavaScript èšåˆå¡«å……

medium.com](https://medium.com/better-programming/javascript-tips-1-the-filter-method-for-object-properties-a2d6869b5127)