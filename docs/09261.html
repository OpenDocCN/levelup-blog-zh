<html>
<head>
<title>Think You Can’t Sort a Hash Map? Think Again!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你认为你不能对散列图进行排序吗？再想想！</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/think-you-cant-sort-a-hash-map-think-again-5ee4da2f0aa2?source=collection_archive---------3-----------------------#2021-07-21">https://levelup.gitconnected.com/think-you-cant-sort-a-hash-map-think-again-5ee4da2f0aa2?source=collection_archive---------3-----------------------#2021-07-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="18f4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Golang中的接口对任何东西进行排序。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d71aee04dee94d0fc56b0c79b940c8aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EasMI6DyGg01M8Eu.jpg"/></div></div></figure><p id="be5c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi lq translated">ash映射是一种非常有用的数据结构，它将唯一键映射到潜在的非唯一值。它们具有恒定的O(1)查找时间，在各种情况下都很方便。然而，哈希表的一个普遍缺点是你通常不能对它们进行排序。现代编程语言正试图以某种方式使散列图可排序，例如Python版允许通过lambda函数对散列图进行排序。</p><p id="480e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在Go中，我们利用接口和<code class="fe lz ma mb mc b">sort</code>包的常见用法，通过几个简单的步骤对我们自己的哈希表进行优雅的排序。有许多可能的方法来完成这项任务，但是这是我最喜欢的方法之一，将<code class="fe lz ma mb mc b">sort</code>接口扩展到不同的数据结构，比如散列映射。</p><h2 id="cf1c" class="md me it bd mf mg mh dn mi mj mk dp ml ld mm mn mo lh mp mq mr ll ms mt mu mv bi translated">1.创建自定义类型来表示配对和配对列表。</h2><p id="304d" class="pw-post-body-paragraph ku kv it kw b kx mw ju kz la mx jx lc ld my lf lg lh mz lj lk ll na ln lo lp im bi translated">为了能够存储排序后的值，我们必须创建两个自定义数据类型来表示给定哈希映射的键和值。<code class="fe lz ma mb mc b">Pair</code>结构有属性<code class="fe lz ma mb mc b">Key</code>和<code class="fe lz ma mb mc b">Value</code>，它们应该是你的哈希表包含的底层类型。例如，初始化为<code class="fe lz ma mb mc b">map[string]bool{}</code>的哈希映射将有一个底层类型为<code class="fe lz ma mb mc b">string</code>的<code class="fe lz ma mb mc b">Key</code>和一个底层类型为<code class="fe lz ma mb mc b">bool</code>的<code class="fe lz ma mb mc b">Value</code>。在我们的例子中，<code class="fe lz ma mb mc b">Key</code>和<code class="fe lz ma mb mc b">Value</code>都是底层类型<code class="fe lz ma mb mc b">int</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="3905" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后你会想要定义<code class="fe lz ma mb mc b">type</code> <code class="fe lz ma mb mc b">PairList</code>，它只是一个<code class="fe lz ma mb mc b">Pair</code>结构的数组。</p><h2 id="a031" class="md me it bd mf mg mh dn mi mj mk dp ml ld mm mn mo lh mp mq mr ll ms mt mu mv bi translated">2.实现排序。对列表数据结构上的接口。</h2><p id="d092" class="pw-post-body-paragraph ku kv it kw b kx mw ju kz la mx jx lc ld my lf lg lh mz lj lk ll na ln lo lp im bi translated">既然我们已经定义了自定义结构，现在我们可以在<code class="fe lz ma mb mc b">PairList</code> <code class="fe lz ma mb mc b">struct</code>上实现<code class="fe lz ma mb mc b">sort.Interface</code>。我们可以在GoLang文档中看到，<code class="fe lz ma mb mc b">sort.Interface</code>有三个要实现的公共方法— <code class="fe lz ma mb mc b">Len()</code>、<code class="fe lz ma mb mc b">Less()</code>和<code class="fe lz ma mb mc b">Swap()</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb nc l"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated"><a class="ae nh" href="https://pkg.go.dev/sort#Interface" rel="noopener ugc nofollow" target="_blank">https://pkg.go.dev/sort#Interface</a></figcaption></figure><p id="b064" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们所要做的就是在我们想要添加排序的任何对象上实现这三个方法，并且我们将能够在那个对象上调用<code class="fe lz ma mb mc b">sort.Sort()</code>！下面，我们在<code class="fe lz ma mb mc b">PairList</code> <code class="fe lz ma mb mc b">struct</code>上实现这三种方法。实现很简单，但是如果你愿意，你可以定制它们。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="651a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想按<code class="fe lz ma mb mc b">Key</code>而不是<code class="fe lz ma mb mc b">Value</code>排序，你可以在<code class="fe lz ma mb mc b">Less()</code>方法的实现上做些改变。如果你想按降序排序，你也可以交换<code class="fe lz ma mb mc b">i</code>和<code class="fe lz ma mb mc b">j</code>。感谢Go的接口，权力在你手中！</p><h2 id="0279" class="md me it bd mf mg mh dn mi mj mk dp ml ld mm mn mo lh mp mq mr ll ms mt mu mv bi translated">3.将地图转换为配对列表，然后排序并返回配对列表。</h2><p id="deba" class="pw-post-body-paragraph ku kv it kw b kx mw ju kz la mx jx lc ld my lf lg lh mz lj lk ll na ln lo lp im bi translated">这里我们初始化<code class="fe lz ma mb mc b">someMap</code>来展示排序示例。我们将<code class="fe lz ma mb mc b">pairList</code>定义为<code class="fe lz ma mb mc b">PairList</code>的一个新实例，其长度与<code class="fe lz ma mb mc b">someMap</code>相等。现在，我们可以遍历<code class="fe lz ma mb mc b">someMap</code>，并为<code class="fe lz ma mb mc b">someMap</code>中的每个键(<code class="fe lz ma mb mc b">k</code>)、值(<code class="fe lz ma mb mc b">v</code>)对将每个索引分配给一个新的<code class="fe lz ma mb mc b">Pair</code>实例。</p><p id="9a0a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这样做了之后，我们现在可以在<code class="fe lz ma mb mc b">pairList</code>上调用<code class="fe lz ma mb mc b">sort.Sort()</code>，嘣！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="f722" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果在函数中运行这段代码，输出将是:</p><pre class="kj kk kl km gt ni mc nj nk aw nl bi"><span id="204a" class="md me it mc b gy nm nn l no np">map[0:2 1:5 3:7 7:6 9:3]<br/>Unsorted PairList: [{1 5} {7 6} {0 2} {3 7} {9 3}]<br/>Sorted PairList: [{0 2} {9 3} {1 5} {7 6} {3 7}]</span></pre><p id="e618" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您现在已经学会了如何在任何数据结构上实现<code class="fe lz ma mb mc b">sort.Sort</code>接口，就像真正的Gopher一样！:)</p></div></div>    
</body>
</html>