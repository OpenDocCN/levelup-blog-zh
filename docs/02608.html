<html>
<head>
<title>Test Angular Pipes With Services</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æµ‹è¯•å¸¦æœåŠ¡çš„å¼¯ç®¡</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/test-angular-pipes-with-services-4cf77e34e576?source=collection_archive---------3-----------------------#2020-03-25">https://levelup.gitconnected.com/test-angular-pipes-with-services-4cf77e34e576?source=collection_archive---------3-----------------------#2020-03-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="37d0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">å¦‚ä½•æµ‹è¯•ä½¿ç”¨æ³¨å…¥æœåŠ¡çš„è§’å½¢ç®¡é“</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/23852baacbe930c8a607bf976c33003c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q3KXO31t7qXMjn0bf5Z3OQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">ç…§ç‰‡ç”±<a class="ae ky" href="https://unsplash.com/@guillaume_t?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Guillaume TECHER </a>åœ¨<a class="ae ky" href="https://unsplash.com/s/photos/free?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„</figcaption></figure><p id="8307" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æˆ‘æ¯å¤©åˆ†äº«<a class="ae ky" href="https://medium.com/@david.dalbusco/one-trick-a-day-d-34-469a0336a07e" rel="noopener">ä¸€ä¸ªå°æŠ€å·§</a>ç›´åˆ°2020å¹´4æœˆ19æ—¥æ–°å† è‚ºç‚éš”ç¦»æœŸç»“æŸã€‚ç¦»å¸Œæœ›ä¸­çš„å¥½æ—¥å­è¿˜æœ‰25å¤©ã€‚</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="1498" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æˆ‘èŠ±äº†å¾ˆå¤šæ—¶é—´ä¸“æ³¨äºç¼–å†™æ–°çš„<a class="ae ky" href="https://angular.io" rel="noopener ugc nofollow" target="_blank"> Angular </a>ç»„ä»¶åŠå…¶ç›¸å…³çš„å•å…ƒæµ‹è¯•ï¼Œä»¥è‡³äºæˆ‘ç”šè‡³é”™è¿‡äº†ä»Šå¤©æ—©ä¸Šçš„åœ¨çº¿â€œå•å£ç›¸å£°â€,å‡ ä¹æ„Ÿè§‰æˆ‘ä¸€å¤©éƒ½åœ¨æŸç§æ¼©æ¶¡ä¸­åº¦è¿‡ã€‚</p><p id="6be6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åæ­£æˆ‘å–œæ¬¢è¿™ä¸ªæŒ‘æˆ˜ã€‚æˆ‘ä¸æƒ³è·³è¿‡ä»Šå¤©çš„åšå®¢å¸–å­ï¼Œæˆ‘æƒ³å’Œä½ åˆ†äº«æˆ‘æ˜¯å¦‚ä½•æµ‹è¯•æˆ‘åˆ›å»ºçš„ä¸€ä¸ªæ–°ç®¡é“çš„ã€‚æ­¤å¤–ï¼Œæˆ‘ä¸å‡è£…æ˜¯è¿™é¡¹ç»ƒä¹ çš„å† å†›ï¼Œå› æ­¤ï¼Œå¦‚æœä½ æ³¨æ„åˆ°ä»»ä½•å¯ä»¥æ”¹è¿›çš„åœ°æ–¹ï¼Œè¯·ç»™æˆ‘ç•™è¨€ï¼Œæˆ‘å¾ˆä¹æ„æé«˜æˆ‘çš„æŠ€èƒ½ğŸ™ã€‚</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="37f7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">åˆ›å»ºç®¡é“</h1><p id="2a31" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">è®©æˆ‘ä»¬é¦–å…ˆç”¨<code class="fe mz na nb nc b">ng</code>å‘½ä»¤è¡Œåˆ›å»ºä¸€ä¸ªåä¸ºâ€œfilterâ€çš„ç©ºç™½ç®¡é“ã€‚</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="0aa2" class="nh md it nc b gy ni nj l nk nl">ng g pipe filter</span></pre><p id="9aef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">è¿™å°†åˆ›å»ºå¦‚ä¸‹æ‰€ç¤ºçš„ç©ºç™½ç®¡é“:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="a904" class="nh md it nc b gy ni nj l nk nl">import { Pipe, PipeTransform } from '@angular/core';<br/><br/>@Pipe({<br/>  name: 'filter'<br/>})<br/>export class FilterPipe implements PipeTransform {<br/><br/>  transform(value: any, ...args: any[]): any {<br/>    return null;<br/>  }<br/><br/>}</span></pre><p id="0c4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å’Œå®ƒç›¸å…³çš„æµ‹è¯•:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="4d9a" class="nh md it nc b gy ni nj l nk nl">import { FilterPipe } from './filter.pipe';<br/><br/>describe('FilterPipe', () =&gt; {<br/>  it('create an instance', () =&gt; {<br/>    const pipe = new FilterPipe();<br/>    expect(pipe).toBeTruthy();<br/>  });<br/>});</span></pre><p id="e877" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä½ å¯ä»¥æ˜¯ä¹Ÿå¯ä»¥ä¸æ˜¯ä¸€ä¸ªç‹‚çƒ­çˆ±å¥½è€…ï¼Œä½†æ˜¯æˆ‘æƒ³æˆ‘ä»¬éƒ½åŒæ„ï¼Œæ‹¥æœ‰ä¸€ä¸ªæ— éœ€ä»»ä½•åŠªåŠ›å°±èƒ½åˆ›å»ºç±»å’Œç›¸å…³æµ‹è¯•çš„CLIæ˜¯éå¸¸é…·çš„ã€‚</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="008c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">åˆ›å»ºæœåŠ¡</h1><p id="b58f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">æ­£å¦‚statenåœ¨æˆ‘çš„å¼€åœºç™½ä¸­æ‰€è¯´ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æµ‹è¯•ä¸€ä¸ªä½¿ç”¨æ³¨å…¥æœåŠ¡çš„ç®¡é“ã€‚</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="2bce" class="nh md it nc b gy ni nj l nk nl">ng g service translation</span></pre><p id="118f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å‡ºäºæ¼”ç¤ºç›®çš„ï¼Œæˆ‘ä»¬åˆ›å»ºäº†è¿™ä¸ªè™šæ‹ŸæœåŠ¡â€œtranslation â€,é™¤äº†â€œGÃ©nialâ€æˆ–â€œAwesomeâ€ä½œä¸ºå¯è§‚å¯Ÿå€¼ä¹‹å¤–ï¼Œå®ƒè¿”å›çš„å†…å®¹å¹¶ä¸å¤šã€‚</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="79e1" class="nh md it nc b gy ni nj l nk nl">import { Injectable } from '@angular/core';<br/><br/>import { Observable, of } from 'rxjs';<br/><br/>@Injectable({<br/>    providedIn: 'root'<br/>})<br/>export class TranslationService {<br/>    translate(lang: string): Observable&lt;string&gt; {<br/>        return of(lang === 'fr' ? 'GÃ©nial' : 'Awesome');<br/>    }<br/>}</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6c6f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">æœºå…·ç®¡é“</h1><p id="15c0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">æˆ‘ä»¬çš„æœåŠ¡å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥å¢å¼ºæˆ‘ä»¬çš„ç®¡é“ã€‚</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="baeb" class="nh md it nc b gy ni nj l nk nl">import { Pipe, PipeTransform } from '@angular/core';<br/><br/>import { TranslationService } from './translation.service';<br/>import { Observable } from 'rxjs';<br/><br/>@Pipe({<br/>    name: 'filter'<br/>})<br/>export class FilterPipe implements PipeTransform {<br/>    constructor(private translationService: TranslationService) {}<br/><br/>    transform(lang: string): Observable&lt;string&gt; {<br/>        return this.translationService.translate(lang);<br/>    }<br/>}</span></pre><p id="a042" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå®ƒå¯ä»¥åœ¨æ¨¡æ¿ä¸­çš„<code class="fe mz na nb nc b">async</code>ç®¡é“çš„å¸®åŠ©ä¸‹ä½¿ç”¨(åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ<code class="fe mz na nb nc b">lang</code>æ˜¯ç»„ä»¶çš„å…¬å…±å­—ç¬¦ä¸²å˜é‡)</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="be1a" class="nh md it nc b gy ni nj l nk nl">&lt;textarea [value]="lang | filter | async"&gt;&lt;/textarea&gt;</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bf1e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">æ›´æ–°ç®¡é“æµ‹è¯•</h1><p id="02e4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">åœ¨æœ¬åœ°ï¼Œæˆ‘ä»ç„¶èƒ½å¤Ÿè¿è¡Œæˆ‘çš„æµ‹è¯•è€Œæ²¡æœ‰é”™è¯¯ï¼Œä½†æ˜¯ï¼Œå› ä¸ºæˆ‘ä»¬ç°åœ¨åœ¨æˆ‘ä»¬çš„ç®¡é“ä¸­æ³¨å…¥äº†ä¸€ä¸ªæœåŠ¡ï¼Œå¦‚æœæˆ‘ä»¬æ‰“å¼€ç›¸å…³çš„å•å…ƒæµ‹è¯•ï¼Œæˆ‘ä»¬ä¼šæ³¨æ„åˆ°åœ¨æ„é€ å‡½æ•°<code class="fe mz na nb nc b">TS2554: expected 1 arguments, but got 0</code>ä¸Šæœ‰ä¸€ä¸ªTypeScripté”™è¯¯ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ç°åœ¨è¦ä¹ˆæ³¨å…¥æœåŠ¡ï¼Œè¦ä¹ˆæ¨¡ä»¿å®ƒã€‚</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="6f8b" class="nh md it bd me nm nn dn mi no np dp mm li nq nr mo lm ns nt mq lq nu nv ms nw bi translated">æµ‹è¯•ä¸­çš„è§£ææœåŠ¡</h2><p id="fcbd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">æ‚¨å¯ä»¥é€šè¿‡<code class="fe mz na nb nc b">inject</code>åŠŸèƒ½æˆ–<code class="fe mz na nb nc b">TestBed</code>è§£å†³æœåŠ¡é—®é¢˜ã€‚å› ä¸ºç¬¬ä¸€ä¸ªè§£å†³æ–¹æ¡ˆå¯¹æˆ‘æ²¡æœ‰ç”¨ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªæ˜¯æˆ‘çš„é€€è·¯ã€‚</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="8f4d" class="nh md it nc b gy ni nj l nk nl">import { FilterPipe } from './filter.pipe';<br/>import { TestBed } from '@angular/core/testing';<br/>import { TranslationService } from './translation.service';<br/><br/>describe('FilterPipe', () =&gt; {<br/>  beforeEach(() =&gt; {<br/>    TestBed<br/>      .configureTestingModule({<br/>        providers: [<br/>          TranslationService<br/>        ]<br/>      });<br/>  });<br/><br/>  it('create an instance', () =&gt; {<br/>    const service: TranslationService =<br/>                              TestBed.get(TranslationService);<br/><br/>    const pipe = new FilterPipe(service);<br/>    expect(pipe).toBeTruthy();<br/>  });<br/>});</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="2631" class="nh md it bd me nm nn dn mi no np dp mm li nq nr mo lm ns nt mq lq nu nv ms nw bi translated">æ¨¡æ‹ŸæœåŠ¡</h2><p id="5721" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">å¦ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œä¹Ÿæ˜¯æˆ‘æœ€ç»ˆåº”ç”¨çš„ï¼Œæ˜¯åˆ›å»ºä¸€ä¸ªæœåŠ¡çš„æ¨¡æ‹Ÿï¼Œè€Œä¸æ˜¯æä¾›å®ƒã€‚</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="74d1" class="nh md it nc b gy ni nj l nk nl">import { FilterPipe } from './filter.pipe';<br/>import { of } from 'rxjs';<br/>import { TranslationService } from './translation.service';<br/><br/>describe('FilterPipe', () =&gt; {<br/>  let translationServiceMock: TranslationService;<br/><br/>  beforeEach(() =&gt; {<br/>    translationServiceMock = {<br/>      translate: jest.fn((lang: string) =&gt; of('Awesome'))<br/>    } as any;<br/>  });<br/><br/>  it('create an instance', () =&gt; {<br/>    const pipe = new FilterPipe(translationServiceMock);<br/>    expect(pipe).toBeTruthy();<br/>  });<br/>});</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3804" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">æµ‹è¯•ç®¡é“è½¬æ¢</h1><p id="ffdb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæµ‹è¯•æˆ‘ä»¬çš„ç®¡é“å¯ä»¥è¢«åˆ›å»ºï¼Œå³ä½¿å®ƒä¾èµ–äºä¸€ä¸ªæœåŠ¡ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶æ²¡æœ‰æœ‰æ•ˆåœ°æµ‹è¯•å®ƒçš„ç»“æœã€‚å› æ­¤ï¼Œè¿™æ˜¯æœ€åä¸€éƒ¨åˆ†ï¼Œæˆ‘ä½¿ç”¨äº†æœåŠ¡çš„æ¨¡æ‹Ÿã€‚åŸºæœ¬ä¸Šï¼Œä¸€æ—¦åˆ›å»ºäº†ç®¡é“ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¿é—®å®ƒçš„<code class="fe mz na nb nc b">transform</code>æ–¹æ³•ï¼Œå¹¶ç»§ç»­è¿›è¡Œä¸€äº›å¸¸è§çš„æµ‹è¯•ã€‚</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="36ef" class="nh md it nc b gy ni nj l nk nl">import { FilterPipe } from './filter.pipe';<br/>import { of } from 'rxjs';<br/>import { take } from 'rxjs/operators';<br/>import { TranslationService } from './translation.service';<br/><br/>describe('FilterPipe', () =&gt; {<br/>  let translationServiceMock: TranslationService;<br/><br/>  beforeEach(() =&gt; {<br/>    translationServiceMock = {<br/>      translate: jest.fn((lang: string) =&gt; of('Awesome'))<br/>    } as any;<br/>  });<br/><br/>  it('create an instance', () =&gt; {<br/>    const pipe = new FilterPipe(translationServiceMock);<br/>    expect(pipe).toBeTruthy();<br/>  });<br/><br/>  it('should translate', () =&gt; {<br/>    const pipe = new FilterPipe(translationServiceMock);<br/>    pipe.transform('en')<br/>      .pipe(take(1))<br/>      .subscribe((text: string) =&gt; {<br/>        expect(text).not.toBe(null);<br/>        expect(text).toEqual('Awesome');<br/>      });<br/>  });<br/>});</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="cff6" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">æ‘˜è¦</h1><p id="57c7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">æˆ‘ä»ç„¶éœ€è¦ä¸€ç‚¹æ—¶é—´æ¥ä¸ºé¡¹ç›®æ‰¾åˆ°æ­£ç¡®çš„æµ‹è¯•è®¾ç½®ï¼Œç‰¹åˆ«æ˜¯å½“å®ƒä»¬æ˜¯æ–°çš„é¡¹ç›®æ—¶ï¼Œä½†æ˜¯ä¸€æ—¦ä¸€åˆ‡å°±ç»ªï¼Œå¹¶ä¸”ä¸€æ—¦æˆ‘å¯ä»¥è®¿é—®<code class="fe mz na nb nc b">nativeElement</code>æ¥æ‰§è¡ŒæŸ¥è¯¢ï¼Œå°±åƒæˆ‘åœ¨Webç»„ä»¶ä¸­æ‰€åšçš„é‚£æ ·ï¼Œæˆ‘ä¼šæ„Ÿè§‰æ›´èˆ’æœï¼Œå¹¶ä¸”å¼€å§‹å˜å¾—æœ‰è¶£ğŸ˜ã€‚</p><p id="8390" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å‘†åœ¨å®¶é‡Œï¼Œæ³¨æ„å®‰å…¨ï¼</p><p id="62af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¤§å«</p></div></div>    
</body>
</html>