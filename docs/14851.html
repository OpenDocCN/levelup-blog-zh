<html>
<head>
<title>Rust: Enums Explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Rust: Enums解释道</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/rust-enums-explained-c21f95107b9b?source=collection_archive---------13-----------------------#2022-12-28">https://levelup.gitconnected.com/rust-enums-explained-c21f95107b9b?source=collection_archive---------13-----------------------#2022-12-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="43e1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Rust枚举:用不同的变量和数据表示一组命名的常量</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/27f985263bba3747eabc6a34e4ea75cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0uJB2qBaaGR1biF82CBOgw.jpeg"/></div></div></figure><p id="4620" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一个<code class="fe la lb lc ld b">enum</code>(枚举的缩写)是一种Rust编程语言类型，代表一组命名的常量。枚举是一种对一组相关值进行分组并给它们一个通用名称的方法。</p><p id="82bd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，您可以使用枚举来表示一副牌中的不同花色:</p><pre class="kp kq kr ks gt le ld lf bn lg lh bi"><span id="1a41" class="li lj it ld b be lk ll l lm ln">enum Suit {<br/>    Spades,<br/>    Hearts,<br/>    Clubs,<br/>    Diamonds,<br/>}</span></pre><p id="f04f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe la lb lc ld b">Suit</code>枚举的每个变体代表一副牌中不同的花色。然后，您可以使用此枚举来定义扑克牌的类型:</p><pre class="kp kq kr ks gt le ld lf bn lg lh bi"><span id="dcb7" class="li lj it ld b be lk ll l lm ln">struct Card {<br/>    suit: Suit,<br/>    value: u8,<br/>}</span></pre><p id="1495" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，您可以使用<code class="fe la lb lc ld b">Card</code>结构创建一张有特定花色和值的新卡:</p><pre class="kp kq kr ks gt le ld lf bn lg lh bi"><span id="63d8" class="li lj it ld b be lk ll l lm ln">let ace_of_spades = Card { suit: Suit::Spades, value: 1 };</span></pre><p id="411d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您还可以使用一个<code class="fe la lb lc ld b">enum</code>来定义一个具有几个不同变量的类型，每个变量都有自己的数据。例如，您可以使用一个<code class="fe la lb lc ld b">enum</code>来表示可以通过网络发送的不同类型的消息:</p><pre class="kp kq kr ks gt le ld lf bn lg lh bi"><span id="e087" class="li lj it ld b be lk ll l lm ln">enum Message {<br/>    Text(String),<br/>    Image(Vec&lt;u8&gt;),<br/>    File(PathBuf),<br/>}</span></pre><p id="2958" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这个例子中，<code class="fe la lb lc ld b">Message</code> <code class="fe la lb lc ld b">enum</code>有三个变体:<code class="fe la lb lc ld b">Text</code>、<code class="fe la lb lc ld b">Image</code>和<code class="fe la lb lc ld b">File</code>。<code class="fe la lb lc ld b">Text</code>变量有一个类型为<code class="fe la lb lc ld b">String</code>的字段，表示消息的文本。<code class="fe la lb lc ld b">Image</code>变量有一个类型为<code class="fe la lb lc ld b">Vec&lt;u8&gt;</code>的单一字段，代表图像的二进制数据。而<code class="fe la lb lc ld b">File</code>变量有一个类型为<code class="fe la lb lc ld b">PathBuf</code>的字段，表示文件系统上文件的路径。</p><p id="d2e2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以使用此<code class="fe la lb lc ld b">enum</code>来定义网络消息的类型:</p><pre class="kp kq kr ks gt le ld lf bn lg lh bi"><span id="c75c" class="li lj it ld b be lk ll l lm ln">struct NetworkMessage {<br/>    sender: String,<br/>    recipient: String,<br/>    message: Message,<br/>}</span></pre><p id="1ccb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，您可以使用<code class="fe la lb lc ld b">NetworkMessage</code>结构创建一个具有特定类型和数据的新消息:</p><pre class="kp kq kr ks gt le ld lf bn lg lh bi"><span id="df4c" class="li lj it ld b be lk ll l lm ln">use std::path::PathBuf;<br/><br/>// ...<br/><br/>let text_message = NetworkMessage {<br/>    sender: "Alice".to_string(),<br/>    recipient: "Bob".to_string(),<br/>    message: Message::Text("Hello, Bob!".to_string()),<br/>};<br/><br/>let image_message = NetworkMessage {<br/>    sender: "Alice".to_string(),<br/>    recipient: "Bob".to_string(),<br/>    message: Message::Image(vec![0, 1, 2, 3]),<br/>};<br/><br/>let file_message = NetworkMessage {<br/>    sender: "Alice".to_string(),<br/>    recipient: "Bob".to_string(),<br/>    message: Message::File(PathBuf::from("/path/to/file.txt")),<br/>};</span></pre><p id="64c2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在Rust中，枚举是一个强大的工具，允许您用一组固定的值定义一个类型，每个值都有自己的数据。它们通常用于表示有限选项集之间的选择，或者用一组固定的可能类型来表示数据。</p><p id="ff62" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">枚举上也可以定义方法，就像结构一样。例如，您可以在<code class="fe la lb lc ld b">Suit</code>枚举上定义一个方法，将其转换为字符串表示:</p><pre class="kp kq kr ks gt le ld lf bn lg lh bi"><span id="b81f" class="li lj it ld b be lk ll l lm ln">impl Suit {<br/>    fn to_string(&amp;self) -&gt; &amp;str {<br/>        match self {<br/>            Suit::Spades =&gt; "Spades",<br/>            Suit::Hearts =&gt; "Hearts",<br/>            Suit::Clubs =&gt; "Clubs",<br/>            Suit::Diamonds =&gt; "Diamonds",<br/>        }<br/>    }<br/>}</span></pre><p id="4971" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个方法引用它所调用的<code class="fe la lb lc ld b">Suit</code>枚举值(<code class="fe la lb lc ld b">&amp;Self</code>)，并返回一个对字符串片(<code class="fe la lb lc ld b">&amp;str</code>)的引用，该字符串片表示服装的字符串表示。</p><p id="dea9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后您可以使用这个方法将一个<code class="fe la lb lc ld b">Suit</code>值转换成一个字符串:</p><pre class="kp kq kr ks gt le ld lf bn lg lh bi"><span id="4db1" class="li lj it ld b be lk ll l lm ln">let suit = Suit::Spades;<br/>println!("{}", suit.to_string()); // prints "Spades"</span></pre><p id="dfd6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">枚举也有几个内置的方法，可以用来操作和比较值。例如，<code class="fe la lb lc ld b">PartialEq</code>特征允许您比较两个枚举值是否相等:</p><pre class="kp kq kr ks gt le ld lf bn lg lh bi"><span id="4cfa" class="li lj it ld b be lk ll l lm ln">assert!(Suit::Spades == Suit::Spades);<br/>assert!(Suit::Spades != Suit::Hearts);</span></pre><p id="3936" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">尽管如此，为了实现这一点，<code class="fe la lb lc ld b">PartialEq</code>特征必须在<code class="fe la lb lc ld b">Suit</code>结构上实现。显式或通过使用<code class="fe la lb lc ld b">derive</code>宏:</p><pre class="kp kq kr ks gt le ld lf bn lg lh bi"><span id="52e7" class="li lj it ld b be lk ll l lm ln">#[derive(PartialEq)]<br/>enum Suit {<br/>    Spades,<br/>    Hearts,<br/>    Clubs,<br/>    Diamonds,<br/>}</span></pre><p id="34d0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe la lb lc ld b">Copy</code>特征允许您复制枚举的值，而不是移动它:</p><pre class="kp kq kr ks gt le ld lf bn lg lh bi"><span id="66b2" class="li lj it ld b be lk ll l lm ln">let suit = Suit::Spades;<br/>let copied_suit = suit;</span></pre><h2 id="a579" class="lo lj it bd lp lq lr dn ls lt lu dp lv kb lw lx ly kf lz ma mb kj mc md me mf bi translated">你想联系吗？</h2><p id="6350" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">如果你想联系我，请通过LinkedIn 联系我。</p><p id="c598" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另外，请随意查看我的书籍推荐<a class="ae ml" href="https://medium.com/@mr-pascal/my-book-recommendations-4b9f73bf961b" rel="noopener">📚。</a></p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><div class="kp kq kr ks gt mt"><a href="https://mr-pascal.medium.com/my-book-recommendations-4b9f73bf961b" rel="noopener follow" target="_blank"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd iu gy z fp my fr fs mz fu fw is bi translated">我的书籍推荐</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">在接下来的章节中，你可以找到我对所有日常生活话题的书籍推荐，它们对我帮助很大。</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="nc l"><div class="nd l ne nf ng nc nh ky mt"/></div></div></a></div><div class="ni nj gp gr nk mt"><a href="https://mr-pascal.medium.com/membership" rel="noopener follow" target="_blank"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd iu gy z fp my fr fs mz fu fw is bi translated">通过我的推荐链接加入Medium—Pascal Zwikirsch</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="nc l"><div class="nl l ne nf ng nc nh ky mt"/></div></div></a></div></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="3f09" class="nm lj it bd lp nn no np ls nq nr ns lv nt nu nv ly nw nx ny mb nz oa ob me oc bi translated">分级编码</h1><p id="0924" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="54d7" class="od oe it js b jt ju jx jy kb of kf og kj oh kn oi oj ok ol bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="b518" class="od oe it js b jt om jx on kb oo kf op kj oq kn oi oj ok ol bi translated">📰查看<a class="ae ml" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="d5d9" class="od oe it js b jt om jx on kb oo kf op kj oq kn oi oj ok ol bi translated">🔔关注我们:<a class="ae ml" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae ml" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae ml" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="f05b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">🚀👉<a class="ae ml" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>