<html>
<head>
<title>Is Reactive Programming Just Functional Programming on Steroids?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应式编程只是类固醇上的函数式编程吗？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/is-reactive-programming-just-functional-programming-on-steroids-a34d9fbe0328?source=collection_archive---------10-----------------------#2022-11-06">https://levelup.gitconnected.com/is-reactive-programming-just-functional-programming-on-steroids-a34d9fbe0328?source=collection_archive---------10-----------------------#2022-11-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="b691" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">动手重构以命令式风格编写的代码片段，逐步添加功能性和反应性特性。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/a2c61b9ca256329fe87ceb7551abc92b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DoiKrKmzfZF64dt6"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">西蒙·佩莱格里尼在<a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="e3ff" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">在本文中，我们将查看一段以命令式风格编写的简单代码，并尽最大努力以函数方式重构它。</p><p id="ef7b" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">之后，我们将使用Java的Reactive Streams规范再次尝试重构它。</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h2 id="37e1" class="ln lo it bd lp lq lr dn ls lt lu dp lv kc lw lx ly kg lz ma mb kk mc md me mf bi translated">1.命令式风格</h2><p id="7208" class="pw-post-body-paragraph jr js it jt b ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk mk km kn ko im bi translated">出于演示的目的，我们将保持一切简单。我们的目标是验证一个<em class="ml">订单</em>请求的各个方面，并返回一个<em class="ml">失败</em>的列表。</p><p id="2ae2" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">我们将使用<em class="ml"> ProductRepository </em>和<em class="ml"> CustomerService </em>组件来检索这些验证所需的数据。我们可以想象这些信息来自不同的服务或数据库。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="mm mn l"/></div></figure></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h2 id="ea3d" class="ln lo it bd lp lq lr dn ls lt lu dp lv kc lw lx ly kg lz ma mb kk mc md me mf bi translated"><strong class="ak"> 2。将结果包装到一个单独的类中</strong></h2><p id="3d5a" class="pw-post-body-paragraph jr js it jt b ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk mk km kn ko im bi translated">首先，让我们将失败列表包装成一个类。因为我们试图遵循函数式编程风格，所以让它成为不可变的。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/e47dd04e06dbf3a455b1456ece7c23a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*TExJO9feQoUHixUJlrEN-Q.png"/></div></figure><p id="cdd3" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">此外，我们将添加一个<em class="ml"> merge </em>方法，将两个不同的验证合并在一起。因为这个类是不可变的，所以这个方法将返回一个新的对象，而不会改变最初的对象:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="d8b3" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">此外，我们添加了工厂方法来创建一个成功的验证<em class="ml">(没有失败)</em>和一个失败的验证<em class="ml">(具有动态数量的原因)</em>。</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h2 id="7a69" class="ln lo it bd lp lq lr dn ls lt lu dp lv kc lw lx ly kg lz ma mb kk mc md me mf bi translated">3.提取验证器</h2><p id="a21b" class="pw-post-body-paragraph jr js it jt b ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk mk km kn ko im bi translated">现在，我们可以将<em class="ml">产品</em>和<em class="ml">客户</em>验证提取到单独的方法或类中，这将返回新的<em class="ml">或</em>验证结果:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="7626" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">让我们对产品列表做同样的事情——如果至少有一个产品不可用，我们应该返回<em class="ml"> OrderValidationFailure。产品_不可用:</em></p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="mm mn l"/></div></figure></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h2 id="269f" class="ln lo it bd lp lq lr dn ls lt lu dp lv kc lw lx ly kg lz ma mb kk mc md me mf bi translated">4.功能风格</h2><p id="186a" class="pw-post-body-paragraph jr js it jt b ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk mk km kn ko im bi translated">现在，让我们使用Java的功能特性和新的验证器来重构初始代码片段。</p><p id="bc4d" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">我们可以注意到<em class="ml"> customerService </em>正在返回一个<em class="ml">可选值:</em></p><ul class=""><li id="a343" class="mp mq it jt b ju jv jy jz kc mr kg ms kk mt ko mu mv mw mx bi translated">如果值存在，我们验证它并返回验证器响应</li><li id="511c" class="mp mq it jt b ju my jy mz kc na kg nb kk nc ko mu mv mw mx bi translated">否则，我们返回失败的验证结果，原因为<em class="ml"> CUSTOMER_NOT_FOUND </em></li></ul><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="c09a" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">最后，我们合并两个验证的结果，收集所有可能的失败。</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h2 id="bfcb" class="ln lo it bd lp lq lr dn ls lt lu dp lv kc lw lx ly kg lz ma mb kk mc md me mf bi translated">5.反应流</h2><p id="f2cf" class="pw-post-body-paragraph jr js it jt b ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk mk km kn ko im bi translated">现在，让我们将<a class="ae lf" href="http://www.reactive-streams.org/" rel="noopener ugc nofollow" target="_blank">反应流</a>加入混合。</p><p id="6f37" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">我们有各种方法来获取产品清单作为<em class="ml">通量&lt; &gt; </em>和客户作为<em class="ml">单声道&lt; &gt; </em>对象。</p><ul class=""><li id="3fb9" class="mp mq it jt b ju jv jy jz kc mr kg ms kk mt ko mu mv mw mx bi translated">如果我们正在进行HTTP调用，我们可以简单地开始使用Spring 5的WebClient。</li><li id="68e1" class="mp mq it jt b ju my jy mz kc na kg nb kk nc ko mu mv mw mx bi translated">对于数据库操作，我们可以尝试使用反应式存储库</li><li id="3632" class="mp mq it jt b ju my jy mz kc na kg nb kk nc ko mu mv mw mx bi translated">对于其他操作，我们可以简单地从一个<em class="ml"> CompletableFuture: </em>创建一个<em class="ml">单声道</em></li></ul><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="mm mn l"/></div></figure></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h2 id="3938" class="ln lo it bd lp lq lr dn ls lt lu dp lv kc lw lx ly kg lz ma mb kk mc md me mf bi translated">6.反应式风格</h2><p id="639f" class="pw-post-body-paragraph jr js it jt b ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk mk km kn ko im bi translated">最后，让我们使用这些反应流来并行执行两个验证并优化流程:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="mm mn l"/></div></figure></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h2 id="55e6" class="ln lo it bd lp lq lr dn ls lt lu dp lv kc lw lx ly kg lz ma mb kk mc md me mf bi translated">7.摘要</h2><p id="dc85" class="pw-post-body-paragraph jr js it jt b ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk mk km kn ko im bi translated">我们可以注意到Java的功能特性之间的相似性，比如流和可选的和反应式的流。</p><p id="7395" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">他们都鼓励不变性，并提供懒惰的评估。</p><p id="ac14" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">此外，将各种验证失败视为流程的一部分，而不是异常情况，这允许我们将方法链接起来并继续流程。</p><p id="072c" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">这些都会让我们产生疑问……<em class="ml">反应式编程只是类固醇上的函数式编程吗？</em></p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/ae729d2368ae43ce23fdfcba6c4d4451.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*SMwG1k4PzsOniC4XWSPWyw.png"/></div></figure></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h2 id="df6d" class="ln lo it bd lp lq lr dn ls lt lu dp lv kc lw lx ly kg lz ma mb kk mc md me mf bi translated">谢谢大家！</h2><p id="e5d3" class="pw-post-body-paragraph jr js it jt b ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk mk km kn ko im bi translated">感谢你阅读这篇文章，请让我知道你的想法！欢迎任何反馈。</p><p id="c2b8" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">如果你想阅读更多关于干净的代码、设计、单元测试、函数式编程以及许多其他内容，请务必查看我的其他文章。</p><p id="32b0" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">如果你喜欢我的内容，可以考虑<a class="ae lf" href="https://medium.com/@emanueltrandafir" rel="noopener">关注或订阅</a>邮件列表。</p><p id="6a54" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">最后，如果你考虑成为一个中等会员，支持我的博客，这里是我的<a class="ae lf" href="https://medium.com/@emanueltrandafir/membership" rel="noopener">推荐人</a>。</p><p id="daaf" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">编码快乐！</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h1 id="f816" class="ne lo it bd lp nf ng nh ls ni nj nk lv nl nm nn ly no np nq mb nr ns nt me nu bi translated">分级编码</h1><p id="3c00" class="pw-post-body-paragraph jr js it jt b ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk mk km kn ko im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="b9cf" class="mp mq it jt b ju jv jy jz kc mr kg ms kk mt ko mu mv mw mx bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="f328" class="mp mq it jt b ju my jy mz kc na kg nb kk nc ko mu mv mw mx bi translated">📰查看<a class="ae lf" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="0422" class="mp mq it jt b ju my jy mz kc na kg nb kk nc ko mu mv mw mx bi translated">🔔关注我们:<a class="ae lf" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae lf" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae lf" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="ec44" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">🚀👉<a class="ae lf" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="jt iu">将像你这样的开发人员安置在顶级创业公司和科技公司</strong> </a></p></div></div>    
</body>
</html>