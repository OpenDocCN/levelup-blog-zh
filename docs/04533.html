<html>
<head>
<title>Improve your Websites with Feature Detection</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过功能检测改进您的网站</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/improve-your-websites-with-feature-detection-6c35d5f485e9?source=collection_archive---------20-----------------------#2020-06-30">https://levelup.gitconnected.com/improve-your-websites-with-feature-detection-6c35d5f485e9?source=collection_archive---------20-----------------------#2020-06-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="f9e2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">作为一名Web开发人员，你必须确保你的网站或应用程序可以跨所有浏览器和设备工作，不管它们有多不同或多旧。如果你的网站可以在Mozilla Firefox上运行，并不意味着它可以在其他浏览器或人们仍在使用的旧版本上运行。如果你的网站可以在最新的MacBook Pro上运行，并不意味着它可以在其他设备或旧产品上运行。</p><p id="5b41" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">浏览器和设备的差异主要是因为它们有不同的<strong class="js iu">特性集</strong>。新的浏览器/设备可以支持最新的HTML5或CSS3特性，而旧的浏览器没有这些特性，因此会显示一个错误或类似的东西，如下所示。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ko"><img src="../Images/64bbdbcb941e2c541c5f455fbe4403df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Mfj4s46Ykdsxq-F-"/></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">【jvmediadesign.com/blog/wp-content/uploads/2..】来源:<a class="ae lb" href="https://jvmediadesign.com/blog/wp-content/uploads/2017/10/linkedin-upgrade-min.jpg" rel="noopener ugc nofollow" target="_blank"><em class="la"/></a></figcaption></figure><h2 id="6bf0" class="lc ld it bd le lf lg dn lh li lj dp lk kb ll lm ln kf lo lp lq kj lr ls lt lu bi translated"><em class="la">结论</em></h2><p id="9130" class="pw-post-body-paragraph jq jr it js b jt lv jv jw jx lw jz ka kb lx kd ke kf ly kh ki kj lz kl km kn im bi translated">我们不能仅仅因为人们使用较旧的设备或浏览器，或者使用与我们不同的浏览器，就拒绝他们访问网站。确保每个人的可访问性是web开发的一个基本原则。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi ma"><img src="../Images/8f83d6ad53c2c244e23e21fce8cef514.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Acik7a5_veVbKBM8NaRw0w.png"/></div></div></figure><h1 id="9702" class="mf ld it bd le mg mh mi lh mj mk ml lk mm mn mo ln mp mq mr lq ms mt mu lt mv bi translated">什么是特征检测？</h1><p id="a3d6" class="pw-post-body-paragraph jq jr it js b jt lv jv jw jx lw jz ka kb lx kd ke kf ly kh ki kj lz kl km kn im bi translated">功能检测是一个过程，包括检测当前使用的浏览器是否支持某些功能。如果它不支持某个特定的特性，它会提供一些回退代码——一种替代的工作体验——而不是崩溃或显示错误。</p><p id="17a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一个简单的特征检测代码可能看起来像这样:</p><pre class="kp kq kr ks gt mw mx my mz aw na bi"><span id="0b85" class="lc ld it mx b gy nb nc l nd ne">if ("geolocation" in navigator) {<br/>  navigator.geolocation.getCurrentPosition(function(position) {<br/>    // show the location on a map, perhaps using the Google Maps API<br/>  });<br/>} else {<br/>  // Give the user a choice of static maps instead perhaps<br/>}</span></pre><p id="b34a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">(代码来自:<a class="ae lb" href="https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Feature_detection" rel="noopener ugc nofollow" target="_blank">developer.mozilla.org/en-US/docs/Learn/Tool..</a>)</p><p id="4408" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这段代码中，我们试图检查当前浏览器是否支持地理位置API。如果没有，提供一个替代方案，比如使用静态地图。</p><p id="192f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">哇，这似乎很容易实现，不是吗？</p><blockquote class="nf"><p id="173f" class="ng nh it bd ni nj nk nl nm nn no kn dk translated"><em class="la">不会，因为有这么多特性集要测试兼容性！使用这样的代码检查每一个将会花费很长时间！</em></p></blockquote><figure class="nq nr ns nt nu kt gh gi paragraph-image"><div class="gh gi np"><img src="../Images/6b35fdee488c0d0bce244198794b0afa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/0*-DFL8vOMuWZswzVW"/></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated"><em class="la">来源:</em><a class="ae lb" href="https://speckyboy.com/wp-content/uploads/2012/03/chart2.png" rel="noopener ugc nofollow" target="_blank"><em class="la">speckyboy.com/wp-content/uploads/2012/03/ch..</em></a></figcaption></figure><blockquote class="nf"><p id="a22b" class="ng nh it bd ni nj nv nw nx ny nz kn dk translated"><strong class="ak"> <em class="la">解决方案:使用特征检测库！</em> </strong></p></blockquote><h1 id="64a0" class="mf ld it bd le mg mh mi lh mj mk ml lk mm oa mo ln mp ob mr lq ms oc mu lt mv bi translated">现代化zr</h1><p id="cd94" class="pw-post-body-paragraph jq jr it js b jt lv jv jw jx lw jz ka kb lx kd ke kf ly kh ki kj lz kl km kn im bi translated">业界的特征检测库</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi od"><img src="../Images/1f83367b72bbb38048e62b7eccb55b5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SmhmEujZTW89DMc-"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated"><em class="la">来源:</em><a class="ae lb" href="https://helpdev.eu/wp-content/uploads/2018/12/modernizr.jpg" rel="noopener ugc nofollow" target="_blank"><em class="la">helpdev.eu/wp-content/uploads/2018/12/moder..</em></a></figcaption></figure><p id="3bf2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用Modernizr是实现功能检测和提高网站可访问性的最佳方式。入门很简单。</p><h1 id="5e7c" class="mf ld it bd le mg mh mi lh mj mk ml lk mm mn mo ln mp mq mr lq ms mt mu lt mv bi translated">步骤1:用npm安装Modernizr</h1><pre class="kp kq kr ks gt mw mx my mz aw na bi"><span id="87bd" class="lc ld it mx b gy nb nc l nd ne">npm install -g modernizr</span></pre><h1 id="79a1" class="mf ld it bd le mg mh mi lh mj mk ml lk mm mn mo ln mp mq mr lq ms mt mu lt mv bi translated">步骤2:选择您的配置</h1><p id="fe43" class="pw-post-body-paragraph jq jr it js b jt lv jv jw jx lw jz ka kb lx kd ke kf ly kh ki kj lz kl km kn im bi translated">转到此<a class="ae lb" href="https://modernizr.com/download?canvastext-setclasses" rel="noopener ugc nofollow" target="_blank">链接</a>仅选择您需要检查兼容性的功能。然后点击Build下载<strong class="js iu">命令行config.json </strong>。</p><p id="2a52" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我的例子中，我为<code class="fe oe of og mx b">canvas text</code>属性选择了一个特性测试。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi oh"><img src="../Images/f8b193aebe68d09668d3d8379ac81f0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A3AYAqNMAZr4WNfE"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated"><em class="la">来源:【modernizr.com/download?canvastext-setclasses】<a class="ae lb" href="https://modernizr.com/download?canvastext-setclasses" rel="noopener ugc nofollow" target="_blank"><em class="la"/></a></em></figcaption></figure><p id="4cfd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后我下载<strong class="js iu">命令行config.json </strong>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi oh"><img src="../Images/a42bd32ee94698d9d09cb8a9a3565d70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RCxxMDF4Wbjw5_nr"/></div></div></figure><h1 id="4cdb" class="mf ld it bd le mg mh mi lh mj mk ml lk mm mn mo ln mp mq mr lq ms mt mu lt mv bi translated">第三步:构建<code class="fe oe of og mx b">modernizr.js</code></h1><p id="9cb8" class="pw-post-body-paragraph jq jr it js b jt lv jv jw jx lw jz ka kb lx kd ke kf ly kh ki kj lz kl km kn im bi translated">将你下载的<code class="fe oe of og mx b">config.json</code>移动到你的项目文件夹中。然后运行:</p><pre class="kp kq kr ks gt mw mx my mz aw na bi"><span id="e00d" class="lc ld it mx b gy nb nc l nd ne">modernizr -c modernizr-config.json</span></pre><p id="be75" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将生成一个<code class="fe oe of og mx b">modernizr.js</code>文件，这是您可以用于您的网站的自定义特征检测模块。</p><h1 id="fb6d" class="mf ld it bd le mg mh mi lh mj mk ml lk mm mn mo ln mp mq mr lq ms mt mu lt mv bi translated">步骤4:配置HTML</h1><p id="e544" class="pw-post-body-paragraph jq jr it js b jt lv jv jw jx lw jz ka kb lx kd ke kf ly kh ki kj lz kl km kn im bi translated">现在将js文件插入到HTML 中。</p><pre class="kp kq kr ks gt mw mx my mz aw na bi"><span id="c409" class="lc ld it mx b gy nb nc l nd ne">&lt;script src="modernizr.js" type="text/javascript"&gt;&lt;/script&gt;</span></pre><p id="be09" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另外，将类“no-js”添加到您的标签中。</p><pre class="kp kq kr ks gt mw mx my mz aw na bi"><span id="a080" class="lc ld it mx b gy nb nc l nd ne">&lt;html class="no-js"&gt;</span></pre><p id="d457" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个添加的类确保了如果浏览器在没有JavaScript的情况下运行时有一个后备。如果浏览器运行JavaScript，Modernizr将只替换<code class="fe oe of og mx b">js</code>类。</p><p id="1b66" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Modernizr将对您的<code class="fe oe of og mx b">config.json</code>中陈述的所有其他功能进行同样的操作。如果它在你的浏览器上检测到这个特性，它会把这个类添加到html标签中。但是如果您的浏览器不支持该特性，它将添加带有前缀<code class="fe oe of og mx b">no-</code>的类来显示回退类。</p><p id="494d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于我的例子，我只有<code class="fe oe of og mx b">canvastext</code>属性来进行特性测试。当我运行我的HTML页面时，这是我的&lt; html &gt;标签的样子:</p><pre class="kp kq kr ks gt mw mx my mz aw na bi"><span id="6b87" class="lc ld it mx b gy nb nc l nd ne">&lt;html class="js canvas canvastext"&gt;</span></pre><p id="73d3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我可以看到Modernizr已经把我的<code class="fe oe of og mx b">no-js</code>替换成了<code class="fe oe of og mx b">js</code>，这意味着我的浏览器已经启用了JavaScript。接下来的两个类没有附加<code class="fe oe of og mx b">no-</code>前缀，这意味着我的浏览器同时支持<code class="fe oe of og mx b">canvas</code>和<code class="fe oe of og mx b">canvastext</code>。</p><h1 id="cf66" class="mf ld it bd le mg mh mi lh mj mk ml lk mm mn mo ln mp mq mr lq ms mt mu lt mv bi translated">第五步:写回退</h1><p id="edb4" class="pw-post-body-paragraph jq jr it js b jt lv jv jw jx lw jz ka kb lx kd ke kf ly kh ki kj lz kl km kn im bi translated">所以我的浏览器正好支持<code class="fe oe of og mx b">canvastext</code>。但是如果一些用户不使用支持这个特性的浏览器呢？</p><p id="9400" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当Modernizr在&lt; html &gt;标签中显示<code class="fe oe of og mx b">no-canvastext</code>类时，我应该提供后备。</p><pre class="kp kq kr ks gt mw mx my mz aw na bi"><span id="f5ac" class="lc ld it mx b gy nb nc l nd ne">if (Modernizr.canvastext) {<br/>    //show some cool canvas text<br/>  } else {<br/>    //show a picture with text on it<br/>  }</span></pre><p id="a637" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果浏览器不支持某个特定功能，您可以通过这种方式提供一个后备方案。</p><p id="0e94" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">代替API属性的<code class="fe oe of og mx b">canvastext</code>,如果你正在测试一些CSS3特性，你可以这样写:</p><pre class="kp kq kr ks gt mw mx my mz aw na bi"><span id="9076" class="lc ld it mx b gy nb nc l nd ne">.no-cssfeature {<br/>  /*some CSS attributes if browser does not support*/<br/>}<br/><br/>.cssfeature {<br/>  /*the new CSS feature that can be used*/<br/>}</span></pre><h1 id="4c4f" class="mf ld it bd le mg mh mi lh mj mk ml lk mm mn mo ln mp mq mr lq ms mt mu lt mv bi translated">这就是要点！</h1><p id="bf9f" class="pw-post-body-paragraph jq jr it js b jt lv jv jw jx lw jz ka kb lx kd ke kf ly kh ki kj lz kl km kn im bi translated">使用Modernizr，您现在可以轻松实现特征检测，从而节省大量时间！当使用HTML5或CSS3时，包含这个有用的库来提高网站的可访问性是一个非常好的主意。请随意浏览Modernizr的<a class="ae lb" href="https://modernizr.com/docs/" rel="noopener ugc nofollow" target="_blank">文档</a>以了解更多信息。</p><p id="4c0b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望这是对你有帮助的阅读。请不要犹豫在下面的评论中提出任何问题。祝你一切顺利。干杯！</p></div></div>    
</body>
</html>