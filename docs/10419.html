<html>
<head>
<title>Go Programming | Writing to A File</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">转到编程|写入文件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/go-programming-writing-to-a-file-7d7245038a78?source=collection_archive---------9-----------------------#2021-12-02">https://levelup.gitconnected.com/go-programming-writing-to-a-file-7d7245038a78?source=collection_archive---------9-----------------------#2021-12-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/00ff17ee4a67480487e0375802883cd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*3u2iAMKGn73CDg-o.jpg"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">图片来自<a class="ae kb" href="https://go.dev/blog/gopher" rel="noopener ugc nofollow" target="_blank"> go.dev </a></figcaption></figure><p id="a08a" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">Golang是一种用于系统编程的通用编程语言。它内置了os和io <strong class="ke iu"> </strong>之类的包，提供文件创建、打开、读取和写入功能来处理文件管理操作。</p><p id="de45" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在本教程中，我们将学习一些将数据写入磁盘文件的常用方法。</p><h1 id="026c" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">☄☄ func (*File) WriteString <code class="fe ly lz ma mb b"><strong class="ak"> </strong></code> ☄☄</h1><p id="5881" class="pw-post-body-paragraph kc kd it ke b kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv mg kx ky kz im bi translated">最简单的文件操作之一是将字符串写入文件。它有两个步骤:首先，创建一个文件；其次，将字符串写入文件。</p><p id="1848" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">请参见下面的代码示例。</p><pre class="mh mi mj mk gt ml mb mm mn aw mo bi"><span id="efa4" class="mp lb it mb b gy mq mr l ms mt"><br/>package main<br/><br/>import (<br/>	"fmt"<br/>	"os"<br/>)<br/><br/>func main() {<br/>	s := "Some data string to write"<br/><br/>	// create a file for writing<br/>	f, err := <strong class="mb iu">os.Create</strong>("test.txt")<br/>	if err != nil {<br/>		fmt.Println(err)<br/>	}<br/>	defer f.Close()<br/><br/>	n, err := <strong class="mb iu">f.WriteString</strong>(s)<br/>	if err != nil {<br/>		fmt.Println(err)<br/>	}<br/>	fmt.Printf("Wrote %d bytes\n", n)<br/>	<br/>}</span></pre><ul class=""><li id="73ce" class="mu mv it ke b kf kg kj kk kn mw kr mx kv my kz mz na nb nc bi translated">在上面的代码中，我们首先使用<code class="fe ly lz ma mb b">os.Create</code>方法创建一个名为<em class="nd"> test.txt </em>的文件。返回一个文件对象，我们可以用它来写入文件。</li><li id="7073" class="mu mv it ke b kf ne kj nf kn ng kr nh kv ni kz mz na nb nc bi translated">接下来，我们调用file对象的<code class="fe ly lz ma mb b">WriteString</code>函数来写入文件。它返回写入的字节数和遇到的任何错误。</li></ul><h1 id="5f8e" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">☄☄func(*文件)写<code class="fe ly lz ma mb b"> </code> ☄☄</h1><p id="7abb" class="pw-post-body-paragraph kc kd it ke b kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv mg kx ky kz im bi translated">将字节写入文件与将字符串写入文件非常相似。</p><p id="f265" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">唯一的区别是字节是以字节序列的形式写入文件的，而不是以字符串的形式。并且它使用了<code class="fe ly lz ma mb b"> Write() </code>方法，而不是文件类型的<code class="fe ly lz ma mb b">WriteString()</code>方法。</p><pre class="mh mi mj mk gt ml mb mm mn aw mo bi"><span id="0bb5" class="mp lb it mb b gy mq mr l ms mt">package main<br/><br/>import (<br/>	"fmt"<br/>	"os"<br/>)<br/><br/>func main() {<br/><br/>	b := []byte("Some data string to write")<br/><br/>	// open file for writing<br/>	f, err := <strong class="mb iu">os.Create</strong>("test.txt")<br/>	if err != nil {<br/>		fmt.Println(err)<br/>	}<br/>	defer f.Close()<br/><br/>	n, err := <strong class="mb iu">f</strong>.<strong class="mb iu">Write</strong>(b)<br/>	if err != nil {<br/>		fmt.Println(err)<br/>	}<br/>	fmt.Printf("Wrote %d bytes\n", n)<br/><br/>}</span></pre><h1 id="269d" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">☄☄ func os。WriteFile☄☄</h1><p id="98b5" class="pw-post-body-paragraph kc kd it ke b kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv mg kx ky kz im bi translated">见语法。</p><pre class="mh mi mj mk gt ml mb mm mn aw mo bi"><span id="76bb" class="mp lb it mb b gy mq mr l ms mt"><strong class="mb iu">func</strong> <strong class="mb iu">WriteFile</strong>(filename <strong class="mb iu">string</strong>, data []<strong class="mb iu">byte</strong>, perm os.FileMode) <strong class="mb iu">error</strong></span></pre><p id="2a75" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">它需要三个参数。</p><ol class=""><li id="11b5" class="mu mv it ke b kf kg kj kk kn mw kr mx kv my kz nj na nb nc bi translated"><em class="nd">文件名</em>/文件路径</li><li id="5fa6" class="mu mv it ke b kf ne kj nf kn ng kr nh kv ni kz nj na nb nc bi translated"><em class="nd">数据</em>片字节</li><li id="4d6e" class="mu mv it ke b kf ne kj nf kn ng kr nh kv ni kz nj na nb nc bi translated">文件<em class="nd">许可</em></li></ol><p id="13cb" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated"><code class="fe ly lz ma mb b">WriteFile() </code>将数据写入文件名命名的文件。如果文件不存在，WriteFile使用权限<em class="nd"> perm </em>创建它；否则，<code class="fe ly lz ma mb b">WriteFile</code>会在写入前将其截断。</p><pre class="mh mi mj mk gt ml mb mm mn aw mo bi"><span id="4d7d" class="mp lb it mb b gy mq mr l ms mt">package main<br/><br/>import (<br/>	"fmt"<br/>	"os"<br/>)<br/><br/>func main() {<br/>	bSlice := []byte("Some date to write")<br/><br/>	// Write to file<br/>	fileName := "output.txt"<br/>	err := <strong class="mb iu">os.WriteFile</strong>(fileName, bSlice, 0644)<br/>	if err != nil {<br/>		fmt.Println(err)<br/>		return<br/>	}<br/>}<br/><br/></span></pre><h1 id="4be4" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">☄☄fmt.Fprintln(f，v)☄☄</h1><p id="4620" class="pw-post-body-paragraph kc kd it ke b kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv mg kx ky kz im bi translated">我们使用<code class="fe ly lz ma mb b">fmt.Fprintln()</code>函数将字符串逐行写入文件对象。</p><p id="7359" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">请参见以下语法。</p><pre class="mh mi mj mk gt ml mb mm mn aw mo bi"><span id="3af6" class="mp lb it mb b gy mq mr l ms mt">func fmt.Fprintln(w io.Writer, a …interface{})</span></pre><p id="1c85" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated"><code class="fe ly lz ma mb b">Fprintln</code>使用其操作数的默认格式进行格式化，并写入<em class="nd"> w </em>。操作数之间总是添加空格，并追加一个换行符。</p><p id="b344" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">它返回写入的字节数和遇到的任何写入错误。</p><pre class="mh mi mj mk gt ml mb mm mn aw mo bi"><span id="7c98" class="mp lb it mb b gy mq mr l ms mt"><br/>package main<br/><br/>import (<br/>     "fmt"<br/>     "os"<br/>)<br/><br/>func main() {<br/><br/>	// open file for writing<br/>	f, err := os.Create("test.txt")<br/>	if err != nil {<br/>		fmt.Println(err)<br/>	}<br/>	defer f.Close()<br/><br/>	d := []string{<br/>            "Game of Thrones", <br/>            "The Walking Dead", <br/>             "The Big Bang Theory"}</span><span id="070d" class="mp lb it mb b gy nk mr l ms mt">	for _, v := range d {<br/>	      <strong class="mb iu">fmt.Fprintln</strong>(f, v)<br/>	}<br/><br/>}<br/></span></pre></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><p id="e073" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">如果你喜欢这篇文章，请鼓掌，让其他人也能看到。💚</p></div></div>    
</body>
</html>