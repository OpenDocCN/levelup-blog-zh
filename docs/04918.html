<html>
<head>
<title>Building a React Component Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建React组件库</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/building-a-react-component-library-e4eb7985ff5d?source=collection_archive---------4-----------------------#2020-07-23">https://levelup.gitconnected.com/building-a-react-component-library-e4eb7985ff5d?source=collection_archive---------4-----------------------#2020-07-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/5be75cecc9003f8ae1f7b9ed05eff3b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hs2Aq6dnEQun7_sRf6yV2A.png"/></div></div></figure><div class=""/><p id="d9f2" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您是否想要一个内聚的框架来在您的组织内部构建美观且易访问的应用程序？使用React构建组件库可以大大降低非前端同事构建web和移动应用程序的门槛，这些应用程序不仅可以工作，而且看起来和其他应用程序一样好。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="b62f" class="ld le jb bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">设置项目</h1><p id="b099" class="pw-post-body-paragraph jy jz jb ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">仅仅几年前，构建组件库还是一件非常麻烦的事情。但是现在，您可以简单地使用预先构建的模板来立即开始。正如您使用类似<a class="ae mg" href="https://create-react-app.dev" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>的东西来创建成熟的react应用程序一样，您也可以使用<a class="ae mg" href="https://www.npmjs.com/package/create-react-library" rel="noopener ugc nofollow" target="_blank"> create-react-library </a>来创建React组件库。</p><p id="52b3" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要开始，如果你想使用<a class="ae mg" href="https://yarnpkg.com" rel="noopener ugc nofollow" target="_blank">纱</a>作为你的包管理器，只需运行以下命令。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="5d3a" class="mq le jb mm b gy mr ms l mt mu">yarn create react-library your-project-name</span></pre><p id="0f64" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您想使用<a class="ae mg" href="https://www.npmjs.com" rel="noopener ugc nofollow" target="_blank"> NPM </a>作为您的软件包管理器，您可以通过运行以下命令在您的机器上全局安装软件包。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="fed6" class="mq le jb mm b gy mr ms l mt mu">npm install -g create-react-library</span></pre><p id="87f8" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并运行以下命令来创建实际的项目。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="d32c" class="mq le jb mm b gy mr ms l mt mu">create-react-library your-project-name</span></pre><p id="bec0" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您想使用Typescript而不是Javascript来构建React库，可以在上面的命令后面添加template选项。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="6b94" class="mq le jb mm b gy mr ms l mt mu">yarn create react-library <strong class="mm jc">--template=typescript</strong> your-project-name</span><span id="bfe2" class="mq le jb mm b gy mv ms l mt mu">// or if using NPM</span><span id="20a6" class="mq le jb mm b gy mv ms l mt mu">create-react-library <strong class="mm jc">--template=typescript</strong> your-project-name</span></pre><h1 id="e5be" class="ld le jb bd lf lg mw li lj lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma bi translated">建筑物</h1><p id="e4d3" class="pw-post-body-paragraph jy jz jb ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">现在你应该有了一个基本的文件夹结构并开始运行了。您可以进入<strong class="ka jc">示例</strong>文件夹并运行yarn start来启动项目。这将启动示例项目，它基本上只是React库中的一个React应用程序，您可以使用它在本地测试您的包。</p><p id="c8b0" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，您可以在项目中创建任何想要的文件夹结构。只要您从<em class="nb"> src/index.tsx </em>中导出组件，就可以开始了。这将让您在从npm之类的地方安装之后，只导入您想要使用的特定组件。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4c6e" class="mq le jb mm b gy mr ms l mt mu"><em class="nb">//</em> <em class="nb">src/index.tsx</em></span><span id="add5" class="mq le jb mm b gy mv ms l mt mu">import './styles.css'<br/>export { useModal } from './lib/modal'<br/>export { useNotification } from './lib/notification'<br/>export { useMessage } from './lib/message'<br/>export { default as Autocomplete } from './components/autocomplete'<br/>export { default as Typography } from './components/typography'<br/>export { default as Avatar } from './components/avatar'<br/>export { default as Badge } from './components/badge'<br/>export { default as Button } from './components/button'<br/>export { default as Card } from './components/card'<br/>export { default as Checkbox } from './components/checkbox'<br/>export { default as Switch } from './components/switch'<br/>export { default as Container } from './components/container'<br/>export { default as Divider } from './components/divider'<br/>export { default as Dropdown } from './components/dropdown'<br/>export { default as Grid } from './components/grid'<br/>export { default as Input } from './components/input'<br/>export { default as List } from './components/list'<br/>export { default as Message } from './components/message'<br/>export { default as Modal } from './components/modal'<br/>export { default as Notification } from './components/notification'<br/>export { default as PopConfirm } from './components/popconfirm'<br/>export { default as Popover } from './components/popover'<br/>export { default as Progress } from './components/progress'<br/>export { default as Select } from './components/select'<br/>export { default as Spinner } from './components/spinner'<br/>export { default as Stack } from './components/stack'<br/>export { default as Table } from './components/table'<br/>export { default as Tag } from './components/tag'<br/>export { default as Toast } from './components/toast'<br/>export { default as Tooltip } from './components/tooltip'<br/>export { default as Rating } from './components/rating'<br/>export { default as Drawer } from './components/drawer'</span></pre><h2 id="1f23" class="mq le jb bd lf nc nd dn lj ne nf dp ln kj ng nh lr kn ni nj lv kr nk nl lz nm bi translated">式样</h2><p id="f63b" class="pw-post-body-paragraph jy jz jb ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">谈到造型，有许多不同的选择可以考虑。您可以使用类似于<a class="ae mg" href="https://styled-components.com" rel="noopener ugc nofollow" target="_blank">样式的组件</a>来分别获得每个组件的即时范围样式，或者您可以简单地使用使用类和id的全局样式表。注意，如果您决定使用后者，您的用户必须确保包含来自编译的dist文件夹的样式表。例如，在发布您的项目后，您将会有一个类似如下的dist文件夹。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="21b2" class="mq le jb mm b gy mr ms l mt mu">├── components<br/>├── index.css<br/>├── index.d.ts<br/>├── index.js<br/>├── index.js.map<br/>├── index.modern.js<br/>├── index.modern.js.map<br/>└── lib</span></pre><p id="3b1c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当使用项目时，用户必须导入样式文件，即使您直接在项目中导入样式表。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="ebc7" class="mq le jb mm b gy mr ms l mt mu">import '{YOUR_PROJECT_NAME}/dist/index.css'</span></pre><h1 id="5e9d" class="ld le jb bd lf lg mw li lj lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma bi translated">出版</h1><p id="34e2" class="pw-post-body-paragraph jy jz jb ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">当您实现了一组组件并准备好将您的包发布到NPM时，我建议仔细检查您的package.json文件，确保name和description字段设置完全符合您的需要。此外，确保该版本是您实际想要开始的版本号。最初，它将被设置为1.0.0，但您可能希望将其更改为0.0.1。这些是您应该仔细检查的字段，如果这些字段不存在，请填写。</p><ul class=""><li id="6b6a" class="nn no jb ka b kb kc kf kg kj np kn nq kr nr kv ns nt nu nv bi translated">版本</li><li id="9c00" class="nn no jb ka b kb nw kf nx kj ny kn nz kr oa kv ns nt nu nv bi translated">名字</li><li id="9f39" class="nn no jb ka b kb nw kf nx kj ny kn nz kr oa kv ns nt nu nv bi translated">描述</li><li id="624c" class="nn no jb ka b kb nw kf nx kj ny kn nz kr oa kv ns nt nu nv bi translated">许可证</li><li id="ef24" class="nn no jb ka b kb nw kf nx kj ny kn nz kr oa kv ns nt nu nv bi translated">关键词</li><li id="2e8b" class="nn no jb ka b kb nw kf nx kj ny kn nz kr oa kv ns nt nu nv bi translated">作者</li><li id="4780" class="nn no jb ka b kb nw kf nx kj ny kn nz kr oa kv ns nt nu nv bi translated">贮藏室ˌ仓库</li><li id="b9e4" class="nn no jb ka b kb nw kf nx kj ny kn nz kr oa kv ns nt nu nv bi translated">主页</li></ul><p id="7f43" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另外，请确保<strong class="ka jc">主、模块、</strong>和<strong class="ka jc">文件</strong>字段设置如下。如果设置不正确，您的软件包可能无法正常工作。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="0dc8" class="mq le jb mm b gy mr ms l mt mu">"main": "dist/index.js",<br/>"module": "dist/index.modern.js",<br/>"files": [<br/>  "dist"<br/>],</span></pre><p id="34d0" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要最终发布项目，请确保名称是唯一的，并且没有其他NPM包具有类似的名称。然后运行以下命令将您的包发布到注册表。要阅读更多关于在NPM注册中心发布和管理软件包的信息，请查看npm-publish 上的官方<a class="ae mg" href="https://docs.npmjs.com/cli/publish" rel="noopener ugc nofollow" target="_blank">文档。</a></p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="7279" class="mq le jb mm b gy mr ms l mt mu">npm publish</span></pre><p id="d3ef" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果发布成功，你现在应该能够访问NPM网站，并在那里看到你新发布的包。</p><p id="0c4d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">https://www.npmjs.com/package/{你的项目名称}</p><h1 id="8ffe" class="ld le jb bd lf lg mw li lj lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma bi translated">维持</h1><p id="3a68" class="pw-post-body-paragraph jy jz jb ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">现在，您已经成功发布了您的第一个React组件库。这真的很棒，虽然不是过程的最后一步。管理React组件库不仅仅是发布它并让它闲置在那里。如果你输入了正确的关键字，你很快就会看到有人开始安装你的软件包。我看到在发布的第一周就有2000个安装的高峰。这可能会很伤脑筋，你可能会觉得有责任正确地维护这个包，并通过GitHub回答每一个进来的问题。</p><p id="a870" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里有几个花絮可以帮助你维护这个项目。</p><ul class=""><li id="f390" class="nn no jb ka b kb kc kf kg kj np kn nq kr nr kv ns nt nu nv bi translated">编写清晰而有用的提交文件 <br/>这对于阅读GitHub提交日志的人来说肯定非常有帮助，可以了解项目的进展情况。只要这样做，你就可以大大降低收到的私人信息和问题的数量。</li><li id="07e5" class="nn no jb ka b kb nw kf nx kj ny kn nz kr oa kv ns nt nu nv bi translated"><strong class="ka jc">快速移动并使用语义版本<br/> </strong>尽可能频繁地提交和发布。如果你提交了少量的代码，你可以很容易地回到过去，看看在错误和不确定性的情况下哪里出错了。还可以通过使用<a class="ae mg" href="https://classic.yarnpkg.com/en/docs/cli/version/" rel="noopener ugc nofollow" target="_blank"> yarn </a>或<a class="ae mg" href="https://docs.npmjs.com/cli/version" rel="noopener ugc nofollow" target="_blank"> npm </a>命令来尝试使用语义版本控制。</li><li id="edce" class="nn no jb ka b kb nw kf nx kj ny kn nz kr oa kv ns nt nu nv bi translated">编写清晰良好的文档<br/> 管理React组件库或任何种类的包的一个重要部分是记录功能。我强烈建议构建一个外部文档站点，像其他用户一样通过npm使用您的包，来记录每个组件的用法。</li></ul><h1 id="8b05" class="ld le jb bd lf lg mw li lj lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma bi translated">祝你好运！💎</h1><p id="c74e" class="pw-post-body-paragraph jy jz jb ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">如果您有任何疑问或问题，请考虑在下面的评论区留下您的问题和想法，我将确保给您回复！</p></div></div>    
</body>
</html>