<html>
<head>
<title>Reading Clean Code: Week 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">阅读干净的代码:第1周</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/reading-clean-code-week-1-a4df2c392e66?source=collection_archive---------2-----------------------#2021-06-24">https://levelup.gitconnected.com/reading-clean-code-week-1-a4df2c392e66?source=collection_archive---------2-----------------------#2021-06-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8dcf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如这篇博客的关注者可能已经注意到的，在过去的几周里，我一直在引用<a class="ae kl" href="https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882/ref=sr_1_1?dchild=1&amp;keywords=clean+code&amp;qid=1622646055&amp;sr=8-1" rel="noopener ugc nofollow" target="_blank"> <em class="km">干净的代码</em> </a>。我是在一位朋友兼软件工程师同事的建议下开始阅读这本书的，他称赞了这种经典编程文本的价值。我一直在非常缓慢地阅读它，每周只阅读一章，以确保我将这些课程深深地植入我的大脑。尽管如此，我可以看到<em class="km">干净代码</em>对我如何思考我写的代码以及我将来要写的代码产生了重大影响。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/8b9484c82c585b4c182ec62ec709dd03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Q8FNYnGNY7oyOJBI.jpg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">经典</figcaption></figure><p id="5e0e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由<a class="ae kl" href="http://cleancoder.com/products" rel="noopener ugc nofollow" target="_blank">鲍伯·马丁</a>——或“鲍勃叔叔”写给那些知道他的人的— <em class="km">干净代码</em>于2009年首次发布，遵循了程序员在过去几十年中发现的一些最佳见解。你可能以前听说过它，它几乎肯定在科技领域几乎每家公司的货架上。由于计算就是制造能够比人更有效地完成特定任务的机器，我们最好听听业内一些最有见地的观点。</p><p id="9e38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇博文中，我将回顾我为之前的项目编写的代码，重构它来反思我从<em class="km">干净代码</em>中学到的经验。因为我只读过前几章，所以我将非常具体地阐述我的见解，只关注有意义的名字和评论。我希望它能激励你，无论你做什么，都要写干净的代码。</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><p id="eedf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更具体地说，我将重构一个我为了自学TypeScript而构建的简单测验应用程序。随意查看GitHub repo <a class="ae kl" href="https://github.com/jmarthaller/quiz-app" rel="noopener ugc nofollow" target="_blank">这里</a>或者阅读我的Medium <a class="ae kl" rel="noopener ugc nofollow" target="_blank" href="/typescript-javascripts-more-responsible-cousin-58d1f045a7b2">关于学习TypeScript的文章</a>。在本地运行应用程序，您应该会看到类似这样的内容:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi lk"><img src="../Images/ea44a5051cefa647e4811ed08d1dc906.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p8uO7m6dtU2lmpmdrx9drw.png"/></div></div></figure><p id="4811" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我从学习TypeScript中获得了很多乐趣，并且我完全理解为什么程序员希望JavaScript的所有功能都具有更严格的类型。虽然我喜欢构建这个小应用程序，但我怀疑我可能没有写出最干净的代码。虽然这是一个单独的项目，我是唯一的开发人员，但其他人可以很容易地来决定在我所做的基础上进行构建。协作是互联网魅力的一部分，像GitHub这样的工具让编程变得如此强大。然而，如果另一个程序员来了，我缺乏干净的代码无疑会减慢他们的速度。正如Bob叔叔一次又一次告诉我们的那样，阅读代码的时间与编写代码的时间之比为10:1。让我们深入代码，看看我们可以重构什么。</p><h2 id="1e5c" class="ll lm iq bd ln lo lp dn lq lr ls dp lt jy lu lv lw kc lx ly lz kg ma mb mc md bi translated">名称</h2><p id="b494" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk ij bi translated">《洁净代码》的前几章中有一章是关于名字的。这一章的第一句话是“名字在软件中无处不在。”我们不断地命名函数、变量、参数等等。因为我们程序中的命名元素经常出现，所以我们应该做好它，给出清晰有意义的名称。让我们以下面的函数为例:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mj"><img src="../Images/820ebbe18a05e49c562161823846a86c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CyuM99wDYykcLXdRMuA6CA.png"/></div></div></figure><p id="0be7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面的函数相当简单。它接受click事件的值(无论用户选择哪个答案),并检查该答案是否正确。虽然我对这里使用的一些命名约定相当满意，但我认为我们可以做得更好。首先，我认为<code class="fe mk ml mm mn b">checkAnswer()</code>可以更具体一点。如果这是一个更大的项目，有不同种类的测验问题，仅仅告诉你的程序员同事“是的，这个函数检查答案或什么的”可能不够好。它会检查用户的答案吗？它在什么语境下检查答案？是否有一些后台进程“回答”它正在检查？正如<em class="km">干净代码</em>告诉我们的，作为程序员，我们希望使用<strong class="jp ir">透露意图的名字</strong>。也就是说，我们希望向读者展示这个函数为什么存在以及它有什么作用。现在让我们试着清理一下:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mo"><img src="../Images/341fe5bf3fb4ba4567970240350eb18d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lq7CLB8hzFYOwqCxB0n-pQ.png"/></div></div></figure><p id="532a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我看来，这个小小的更新极大地改进了我们的程序。现在，当其他编码人员遇到<code class="fe mk ml mm mn b">checkUserAnswerForCorrectness()</code>时，他们会清楚地看到它从用户那里接受一个<code class="fe mk ml mm mn b">MouseEvent</code>，并检查该答案是否与我们数据库中的数据相匹配。这个小小的改变可能会节省我们团队成员的宝贵时间。</p><p id="66eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">敏锐的读者可能已经注意到，我还用<code class="fe mk ml mm mn b">previous</code>替换了<code class="fe mk ml mm mn b">prev</code>变量。虽然大多数人可能已经知道了<code class="fe mk ml mm mn b">prev</code>是什么的简称，但是我做这个重构是为了一个非常重要的<em class="km">干净代码</em>的原因:<strong class="jp ir">避免虚假信息</strong>。清晰意味着具体，我们不希望我们的程序员同事碰到<code class="fe mk ml mm mn b">prev</code>并认为它可以代表除了以前以外的任何东西。虽然程序员可能总是使用<code class="fe mk ml mm mn b">i</code>进行迭代，或者使用<code class="fe mk ml mm mn b">x</code>来保存特别明显的数据，但从长远来看，写出完整的单词应该会对你有所帮助。</p><p id="8937" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然在命名约定中保持冗长很重要，但是编写干净的代码需要平衡。你不能像这样命名你的函数:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mp"><img src="../Images/8f8d1000b58e0c8b0736570312c11571.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*omfh-AOBkoUQHcZh4OOYjw.png"/></div></div></figure><p id="d77c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然从技术上讲，这是该函数的一个更具体的名称，但它显然比<code class="fe mk ml mm mn b">checkUserAnswerForCorrectness</code>更糟糕。我们甚至看不到函数的全名，更不用说它接受的任何参数了！我们的节目是故事，作为故事讲述者，我们应该努力提高我们的描述技能。虽然在<em class="km">干净代码</em>的这一章中有更多的经验，但这是使用有效名称的好入门。</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><h2 id="df6d" class="ll lm iq bd ln lo lp dn lq lr ls dp lt jy lu lv lw kc lx ly lz kg ma mb mc md bi translated">评论</h2><p id="e36c" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk ij bi translated">简单地说，程序员不能依靠注释来保存他们混乱的代码。正如Bob叔叔所说，没有什么比一个恰当的注释“更有帮助”了，但是当你使用程序越多，它也会使你的程序变得混乱。虽然以注释的形式向读者提供版权信息或意图解释可能是有用的，但总的来说，注释是不必要的，会分散读者对代码的注意力，而代码是程序中真理的最终来源。</p><p id="a7d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我承认，我其实很擅长回避评论。教我的程序员一直教导我用代码来表达自己，而且评论大多是无聊的。更有可能是因为他们比我先阅读<em class="km">干净的代码</em>,所以他们才教我这个。为了忠于这篇博文，我将在应用程序中插入一些评论，并分享一些从<em class="km">干净代码</em>中得到的重要教训。我们先来看看下面的差评:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mq"><img src="../Images/77ef6ea7c89fd9b0476f97722480cd70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7dNmedz4FV7hdS2We8KbxA.png"/></div></div></figure><p id="271d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面的评论是<em class="km">干净代码</em>称之为<strong class="jp ir">多余评论</strong>的一个很好的例子。这里的评论对读者有什么帮助吗？如果您将函数名重构得更具描述性，比如将其命名为<code class="fe mk ml mm mn b">provideNextQuestionToUser()</code>，您的程序不是会更清晰吗？最终，你不希望一个注释——它应该传递理解——花费比函数本身更长的时间，所以这是一个很容易避免的注释。再来看另一种差评:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mr"><img src="../Images/9ab3b2e6ac48a0710c87457a075a1cd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TI59QcHjNgeg4AtdgqEp2w.png"/></div></div></figure><p id="c610" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以上评论代表亲爱的鲍勃大叔所说的<strong class="jp ir">噪音评论</strong>。他们在编写糟糕的函数中加入胡椒，膨胀你的代码直到你几乎无法理解。虽然程序员可能希望在函数的顶部包含一个注释来引导读者，但是使用良好的命名约定可以节省几行注释。只要看看当我们把它减少一点时，代码有多干净:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ms"><img src="../Images/fd461a699330a3f2b587ccb8c2e25c89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RoOvvzf4aCCsswEb0WZbSg.png"/></div></div></figure><p id="6b88" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我想我们可以同意这是非常容易阅读的，你的程序员同事可能会喜欢描述函数将做什么的顶部注释。记住，在你写评论之前，看看你是否能重构你的代码，使它更清晰。让我们看看最后一个不好的评论，我们要在这里检查:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mt"><img src="../Images/0a66b5fff25d729dd0cc4449b31fcdd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-LCdatFMIWRKuNx02Oasbg.png"/></div></div></figure><p id="a788" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">希望这是显而易见的，但是<strong class="jp ir">注释掉的代码</strong>对阅读你的程序的其他人几乎没有任何用处。也许上面的代码是为了应用程序的早期迭代，也许这只是一个粗心的程序员忘记删除的cruft。不管怎样，它可能不应该存在于程序中，因为它携带的信息很少，所以它可能会持续存在。正如<em class="km"> Clean Code </em>告诉我们的，其他人可能没有勇气删除这个评论，因为他们不知道它是否重要。作为我们节目的最初作者，我们应该密切注意可以从我们的节目中删除哪些内容，以使它们更加清晰。评论可能是有用的，但只有在做得好的时候。</p><p id="7a5e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在接下来的几周里，我会阅读更多的<em class="km"> Clean Code </em>并分享它对初涉程序员的启示。通过非常缓慢地阅读这本书(大约一章/周)，我想真正吸收尽可能多的信息，最终使我成为一个更好的程序员。每周回来看看我的进步！</p></div></div>    
</body>
</html>