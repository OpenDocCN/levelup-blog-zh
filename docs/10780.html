<html>
<head>
<title>5 Patterns to Write Better Clean Code in Python — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python编写更好的干净代码的5种模式——第1部分</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/5-design-patterns-to-write-better-clean-code-in-python-part-1-cd1f3d9deea4?source=collection_archive---------17-----------------------#2022-01-10">https://levelup.gitconnected.com/5-design-patterns-to-write-better-clean-code-in-python-part-1-cd1f3d9deea4?source=collection_archive---------17-----------------------#2022-01-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/fe03f054f85f3c5dd92cf25b5c46e03c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4OZTqFGP_gcSepdsc3qgvA.png"/></div></div></figure><div class=""/><p id="fdc5" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">编写更好的代码在任何编程语言中都是一个挑战。在编写好的代码之前，你应该对编程语言有更好的理解。阅读整本书是很费时间的。同时，也很难记住模式。在本文中，我将重点介绍一些技巧和模式，以便用Python编写更好的代码。我还是Python新手，所以可能我的代码不如经验丰富的开发人员的代码性能好。</p><p id="815d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你可能正在为谷歌、脸书等公司的编码挑战做准备。为了成功通过这样的编码挑战，你必须解决<a class="ae la" href="https://leetcode.com/" rel="noopener ugc nofollow" target="_blank"> Leetcode </a>中的大量编码问题。在编码挑战中，你必须解决多个问题。就像脸书要求你在40分钟内解决两个问题。编程语言不受编码挑战的限制。你可以选择任何编程语言来解决这个问题。无论您选择哪种编程语言，您都需要一些技巧和调整来在有限的时间内解决问题。这篇文章也将帮助你解决Leetcode上的复杂问题。</p><h2 id="2936" class="lb lc je bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated">目录</h2><ol class=""><li id="a871" class="lu lv je kd b ke lw ki lx km ly kq lz ku ma ky mb mc md me bi translated">索引循环</li><li id="b5a7" class="lu lv je kd b ke mf ki mg km mh kq mi ku mj ky mb mc md me bi translated">可迭代的切片</li><li id="1ca8" class="lu lv je kd b ke mf ki mg km mh kq mi ku mj ky mb mc md me bi translated">记忆化</li><li id="9122" class="lu lv je kd b ke mf ki mg km mh kq mi ku mj ky mb mc md me bi translated">Varargs和参数解包</li><li id="f247" class="lu lv je kd b ke mf ki mg km mh kq mi ku mj ky mb mc md me bi translated">迭代器的映射</li></ol><figure class="ml mm mn mo gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mk"><img src="../Images/9fa70bcabaab80594a46e2b2e8dbbcc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oLZpSsSq-UQYtC-S"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated"><a class="ae la" href="https://unsplash.com/@universaleye?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">万用眼</a>在<a class="ae la" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><h2 id="74f9" class="lb lc je bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated">1.索引循环</h2><p id="6747" class="pw-post-body-paragraph kb kc je kd b ke lw kg kh ki lx kk kl km mt ko kp kq mu ks kt ku mv kw kx ky im bi translated">在处理像<a class="ae la" href="https://leetcode.com/problems/two-sum/" rel="noopener ugc nofollow" target="_blank"> Two Sum </a>这样的问题时，您需要迭代列表并获得项目的<em class="kz">索引</em>。你可以使用计数器或者使用<a class="ae la" href="https://docs.python.org/3.3/library/stdtypes.html?highlight=range#range" rel="noopener ugc nofollow" target="_blank"> <em class="kz"> range </em> </a>迭代器<em class="kz">遍历</em>列表的长度来获得索引。还可以使用<a class="ae la" href="https://docs.python.org/3.3/library/functions.html#enumerate" rel="noopener ugc nofollow" target="_blank"> <em class="kz">枚举</em> </a> <em class="kz"> </em>来迭代一个带有索引的可迭代对象。<br/> <strong class="kd jf">使用范围运算符</strong></p><figure class="ml mm mn mo gt iv"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="1166" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">利用</strong> <a class="ae la" href="https://docs.python.org/3.3/library/functions.html#enumerate" rel="noopener ugc nofollow" target="_blank"> <strong class="kd jf"> <em class="kz">枚举</em> </strong> </a></p><figure class="ml mm mn mo gt iv"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="6871" class="lb lc je bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated"><strong class="ak"> 2。可迭代的切片</strong></h2><p id="578a" class="pw-post-body-paragraph kb kc je kd b ke lw kg kh ki lx kk kl km mt ko kp kq mu ks kt ku mv kw kx ky im bi translated">可迭代对象可以使用循环进行迭代。<a class="ae la" href="https://docs.python.org/3.3/library/functions.html?highlight=slice#slice" rel="noopener ugc nofollow" target="_blank"> slice </a>函数返回一个slice对象，可以从iterable对象中提取一个子列表。因为<strong class="kd jf">字符串</strong>也是一个可迭代的对象。切片也可以用在字符串上。切片的语法是<code class="fe my mz na nb b">slice(<em class="kz">start</em>, <em class="kz">stop</em>[, <em class="kz">step</em>]).</code></p><figure class="ml mm mn mo gt iv"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="8e84" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">上面的代码可以用方括号简化。您可以使用方括号访问子列表。</p><figure class="ml mm mn mo gt iv"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="fe44" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里开始、停止和步骤都是可选的。<em class="kz">开始</em>、<em class="kz">停止</em>和<em class="kz">步骤</em>的默认值分别为0、物体长度和1。<br/>您也可以使用负值来改变流量。为了理解负值，让我们举一个例子<a class="ae la" href="https://leetcode.com/problems/palindrome-number/" rel="noopener ugc nofollow" target="_blank">回文数</a>的问题。有多种方法可以解决这个问题。解决这个问题的快速方法是，将一个整数转换成一个字符串，然后反转这个字符串并进行比较。</p><figure class="ml mm mn mo gt iv"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="f56c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在上面的例子中，字符串<strong class="kd jf"> num1 </strong>的<strong class="kd jf"> <em class="kz">反向</em> </strong>被赋值给<strong class="kd jf"> num2 </strong>。</p><figure class="ml mm mn mo gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nc"><img src="../Images/6fee676a6b83d7e97c5f6aec69eda23b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fU0zW8daZLRrfwtA"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">照片由<a class="ae la" href="https://unsplash.com/@brett_jordan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">布雷特·乔丹</a>在<a class="ae la" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h2 id="0356" class="lb lc je bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated">3.记忆化</h2><p id="6e7f" class="pw-post-body-paragraph kb kc je kd b ke lw kg kh ki lx kk kl km mt ko kp kq mu ks kt ku mv kw kx ky im bi translated">有些情况下，你需要写递归代码。记忆化确实可以提高代码的性能。记忆化对于解决动态编程编码问题也很有用。记忆可能很难实现。然而，使用decorator函数实现memoize代码太容易了。如果你想了解更多关于Decorator的知识，你可以阅读我的文章<a class="ae la" rel="noopener ugc nofollow" target="_blank" href="/validations-in-python-using-metaprogramming-and-decorators-advanced-python-ee4d4278a6b3">使用Decorator在Python中进行验证。</a> <br/>要解释这个题目，我们就从Leetcode来解决<a class="ae la" href="https://leetcode.com/problems/powx-n" rel="noopener ugc nofollow" target="_blank"> powx-n </a>问题。在这个问题中，我们必须实现一个计算<code class="fe my mz na nb b">x</code>的<code class="fe my mz na nb b">n</code>次方的函数。</p><p id="c904" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">记忆装饰器代码</strong></p><figure class="ml mm mn mo gt iv"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="900f" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在实际解可以写成如下</p><figure class="ml mm mn mo gt iv"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="4265" class="lb lc je bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated">4.Varargs和参数解包</h2><p id="a3b2" class="pw-post-body-paragraph kb kc je kd b ke lw kg kh ki lx kk kl km mt ko kp kq mu ks kt ku mv kw kx ky im bi translated">为了理解Varargs，让我们以一个<strong class="kd jf"> sum </strong>函数为例。sum是一个函数，它返回传递给该函数的可变数字参数的总和。</p><figure class="ml mm mn mo gt iv"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="29ed" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里的<strong class="kd jf"> sum </strong>函数可以接受变量args<strong class="kd jf">args</strong>。由于<strong class="kd jf"> args是</strong>一个tuple是一个iterable对象(tuple)，我们也可以从functools中使用<strong class="kd jf"> reduce </strong>。要了解更多关于函数式编程的知识，请阅读Python 中的<a class="ae la" rel="noopener ugc nofollow" target="_blank" href="/functional-programming-in-python-easy-learning-b20207b2dd4e">函数式编程。</a></p><figure class="ml mm mn mo gt iv"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="52a5" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">注意:在上面的例子中，<strong class="kd jf"> varargs </strong>是一个元组。所以我们可以打开它。</p><pre class="ml mm mn mo gt nd nb ne nf aw ng bi"><span id="26e1" class="lb lc je nb b gy nh ni l nj nk">def divide(*args):<br/>    num, den = args<br/>    return num/den</span><span id="e566" class="lb lc je nb b gy nl ni l nj nk">print(divide(10, 2))</span></pre><p id="deaf" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">也可以使用名为varargs的<strong class="kd jf">。named varargs </strong>是一个接受多个命名参数的字典。<strong class="kd jf">名为</strong>的<strong class="kd jf"> varargs </strong>对于取选项字典非常有用。</p><figure class="ml mm mn mo gt iv"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="ml mm mn mo gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nm"><img src="../Images/0e8af9960ef0fea75b2e522d344f6227.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8_hYONIoBdxe3SUL"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">阿瑟尼·托古列夫在<a class="ae la" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h2 id="7f05" class="lb lc je bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated">5.迭代器的映射</h2><p id="c9a6" class="pw-post-body-paragraph kb kc je kd b ke lw kg kh ki lx kk kl km mt ko kp kq mu ks kt ku mv kw kx ky im bi translated">可迭代对象的映射有助于转换可迭代对象。可以使用<a class="ae la" href="programiz.com/python-programming/methods/built-in/map" rel="noopener ugc nofollow" target="_blank">映射</a>功能进行映射。</p><figure class="ml mm mn mo gt iv"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="c3d6" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">上面的例子使用了一个<strong class="kd jf"> lambda </strong>函数。如果函数有多行语句，可以使用自定义函数。</p><figure class="ml mm mn mo gt iv"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="0ac7" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">可以在任何可迭代对象上进行映射，包括<a class="ae la" href="https://www.programiz.com/python-programming/set" rel="noopener ugc nofollow" target="_blank">集合</a>、<a class="ae la" href="https://www.programiz.com/python-programming/list" rel="noopener ugc nofollow" target="_blank">列表</a>、<a class="ae la" href="https://www.programiz.com/python-programming/tuple" rel="noopener ugc nofollow" target="_blank">元组</a>等。</p><p id="4c2f" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">注意:</strong>有一个更好的方法来映射一个可迭代对象。它叫做<a class="ae la" href="https://www.programiz.com/python-programming/list-comprehension" rel="noopener ugc nofollow" target="_blank">列表理解</a>。列表理解是映射可迭代对象的一种简洁而优雅的方式。</p><pre class="ml mm mn mo gt nd nb ne nf aw ng bi"><span id="197d" class="lb lc je nb b gy nh ni l nj nk">Celsius = [39.2, 36.5, 37.3, 37.8]<br/>Fahrenheit = [((float(9)/5)*x + 32) for x in Celsius]<br/>print(Fahrenheit) # [102.56, 97.7, 99.14, 100.03999999999999]</span></pre><p id="1861" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您还可以映射到字典、集合和元组。要了解更多信息，请阅读<a class="ae la" href="https://docs.python.org/3/tutorial/datastructures.html" rel="noopener ugc nofollow" target="_blank">数据结构</a></p><pre class="ml mm mn mo gt nd nb ne nf aw ng bi"><span id="4cf8" class="lb lc je nb b gy nh ni l nj nk"><strong class="nb jf">&gt;&gt;&gt; </strong>a = {x <strong class="nb jf">for</strong> x <strong class="nb jf">in</strong> 'abracadabra' <strong class="nb jf">if</strong> x <strong class="nb jf">not</strong> <strong class="nb jf">in</strong> 'abc'}<br/><strong class="nb jf">&gt;&gt;&gt; </strong>a<br/>{'r', 'd'}</span></pre><h2 id="9348" class="lb lc je bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated">结论</h2><p id="7c30" class="pw-post-body-paragraph kb kc je kd b ke lw kg kh ki lx kk kl km mt ko kp kq mu ks kt ku mv kw kx ky im bi translated">在这篇文章中，我刚刚提到了一些技巧和模式。还有很多其他很酷的概念需要学习。为了保持文章的简洁，我将这篇文章分成了多个子文章。我稍后会发表这些。我在下面附上了所有的参考链接。</p><h2 id="0728" class="lb lc je bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated">参考资料:</h2><ul class=""><li id="f129" class="lu lv je kd b ke lw ki lx km ly kq lz ku ma ky nn mc md me bi translated"><a class="ae la" href="https://docs.python.org/3/tutorial/datastructures.html" rel="noopener ugc nofollow" target="_blank">https://docs.python.org/3/tutorial/datastructures.html</a></li><li id="a998" class="lu lv je kd b ke mf ki mg km mh kq mi ku mj ky nn mc md me bi translated"><a class="ae la" href="https://www.programiz.com/python-programming/list-comprehension" rel="noopener ugc nofollow" target="_blank">https://www . programiz . com/python-programming/list-comprehension</a></li><li id="73ec" class="lu lv je kd b ke mf ki mg km mh kq mi ku mj ky nn mc md me bi translated">【https://www.programiz.com/python-programming T4】</li><li id="72cf" class="lu lv je kd b ke mf ki mg km mh kq mi ku mj ky nn mc md me bi translated"><a class="ae la" href="https://realpython.com/" rel="noopener ugc nofollow" target="_blank">https://realpython.com/</a></li></ul></div></div>    
</body>
</html>