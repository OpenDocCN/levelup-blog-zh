<html>
<head>
<title>Time Series Forecasting With Prophet In R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R中的Prophet时间序列预测</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/time-series-forecasting-with-prophet-in-r-a9ee81dc82e1?source=collection_archive---------0-----------------------#2020-02-29">https://levelup.gitconnected.com/time-series-forecasting-with-prophet-in-r-a9ee81dc82e1?source=collection_archive---------0-----------------------#2020-02-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f34e2a86544756a397afcad3afe7900e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WOGmC6pZi6wEoL_gJWXJUQ.png"/></div></div></figure><p id="c25a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">本周早些时候，当我浏览LinkedIn的时候，我看到了一个帖子，简要提到了可以用来预测时间序列的“先知”库。</p><p id="6f7a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">根据CRAN文档，该库被描述为一种“自动预测程序”，可用于预测基于加法模型的时间序列数据，其中非线性趋势与每年、每周和每天的季节性以及假日影响相适应。和几个季节的历史数据的时间序列效果最好。</p><p id="44f3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">完整文档:【https://cran.r-project.org/web/packages/prophet/prophet.pdf T2】</p><p id="8caf" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">作为一个好奇的人，我决定尝试一下，结果如下:</p><p id="1815" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我决定在这个例子中使用一只著名的股票(AAPL ),并计划对它应用预测技术。这是基于股票五年的历史数据的每日频率。我已经从<a class="ae kz" href="https://sg.finance.yahoo.com/quote/AAPL/history?p=AAPL" rel="noopener ugc nofollow" target="_blank">雅虎财经</a>下载了CSV文件。让我们来看看。</p><p id="06a3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">探索R中的数据集</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi la"><img src="../Images/81a47bfaf13ddd5af543210c0e02ecbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*Swe3INwAGxlD8Xannedufw.png"/></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">读取我们的数据集</figcaption></figure><figure class="lb lc ld le gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lj"><img src="../Images/cbe1428970e42f2a6b4732fdcd514481.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z_kILlSYJnH_2ZrDU4Tw6g.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">快速浏览我们的数据集</figcaption></figure><p id="00f8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在继续之前，作为预处理的一部分，让我们快速检查一下丢失的数据。</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/f601327507b23c7f82c3215dc2f092c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:436/format:webp/1*t65FQJU_MRVehVRXne2Lxw.png"/></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">检查缺少的值</figcaption></figure><p id="7691" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">太好了！0缺少数据，我们可以继续了。<em class="ll"> P.S缺失值在R. </em>中标记为NA</p><p id="0fc0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在使用这个库时，我意识到一件事，日期必须是YYYY-MM-DD格式。它主要只处理两列，一个日期戳和一个“y”列，表示我们想要预测的度量。用于测量的变量也必须严格为数字类型。</p><p id="095d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们可以从加载以下库开始进行一些格式化，并加载prophet库进行预测。我们必须将列“Date”重命名为“ds ”,并使用“Close”作为我们的度量值，该值必须重命名为“y ”,这样prophet才能发挥它的魔力。</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lm"><img src="../Images/84ff2c1751249c90940eede32931681f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0tbQ0pxEa8r6VfuNr7yalA.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">删除不需要的列，只保留日期和结束列</figcaption></figure><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/ba33468fbbd04f910ab2efba47010f47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*V0rbh-4WoCuR1VZ73kzJ4A.png"/></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">将Date和Close列重命名为ds和y，以便使用prophet技术</figcaption></figure><p id="0abc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">太好了，现在我们有0个丢失的值，并重命名了供库使用的列。我们可以使用以下命令运行我们的预测。</p><p id="51eb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">由于我们的时间频率基于每日收盘，我们将应用365天或一年的预测周期。然后是预测函数来得到我们的预测。</p><p id="d5d9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后，我们将创建一个包含以下各列的附加向量，即:“yhat”、“yhat_lower”和“yhat_upper”。这些变量分别代表预测值、下预测值和上预测值。</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/ba7f0c949c3bc653af036e831abad89c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1394/format:webp/1*gB8pVLEhi2Vq5IJ5yW75Vw.png"/></div></figure><figure class="lb lc ld le gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lp"><img src="../Images/c4c81f1f5681d723b6a2ed5e4dddadee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-CCKTWo1Kto6XeK0Tzmvrw.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">最终预测产量</figcaption></figure><p id="e407" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">使用上述代码中的prophet_plot_ components函数对趋势、年季节性和周季节性等预测组件进行细分。</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lp"><img src="../Images/a78c4d7a8fcba43fcd8265e37fa0ea4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9hSVCp0Fb5gP1O7OgFXMaQ.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">细分预测组件</figcaption></figure><p id="f7a5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后，如果你喜欢一个互动的情节，你可以通过应用下面的功能来做到这一点。</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/0530e9fe5353b53ddd0de49ce0526b7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*FAEiefvDzZh8MR5bXYAfEA.png"/></div></figure><figure class="lb lc ld le gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f34e2a86544756a397afcad3afe7900e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WOGmC6pZi6wEoL_gJWXJUQ.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">我们预测的互动图</figcaption></figure><p id="66ea" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你有它！</p><p id="0314" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我很高兴尝试这个库进行时间序列预测。虽然不是代表季节性的最佳数据集，但它绝对是一个软件包，允许人们分解时间序列的组成部分，并允许轻松预测。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><p id="b749" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">好奇的学习者？释放你在媒体上学习的全部潜力，用不到一杯咖啡的钱支持像我这样的作家。</p><div class="ly lz gp gr ma mb"><a href="https://lzpdatascience.medium.com/membership" rel="noopener follow" target="_blank"><div class="mc ab fo"><div class="md ab me cl cj mf"><h2 class="bd iu gy z fp mg fr fs mh fu fw is bi translated">通过我的推荐链接加入媒体——杰森·LZP</h2><div class="mi l"><h3 class="bd b gy z fp mg fr fs mh fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="mj l"><p class="bd b dl z fp mg fr fs mh fu fw dk translated">lzpdatascience.medium.com</p></div></div><div class="mk l"><div class="ml l mm mn mo mk mp jz mb"/></div></div></a></div><p id="efb3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">刚接触R编程，不知道从哪里开始？看看我的电子书一步一步的指南！</p><div class="ly lz gp gr ma mb"><a href="https://lzpdatascience.medium.com/r-for-data-science-a-beginners-guide-pdf-ebook-a5fe11009443" rel="noopener follow" target="_blank"><div class="mc ab fo"><div class="md ab me cl cj mf"><h2 class="bd iu gy z fp mg fr fs mh fu fw is bi translated">数据科学入门指南(PDF /电子书</h2><div class="mi l"><h3 class="bd b gy z fp mg fr fs mh fu fw dk translated">有一段时间了，我希望每个人都保持安全和健康。本月初，由于封锁，我…</h3></div><div class="mj l"><p class="bd b dl z fp mg fr fs mh fu fw dk translated">lzpdatascience.medium.com</p></div></div><div class="mk l"><div class="mq l mm mn mo mk mp jz mb"/></div></div></a></div></div></div>    
</body>
</html>