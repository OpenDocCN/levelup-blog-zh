<html>
<head>
<title>Using Kafka in 2022</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在2022年使用卡夫卡</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/using-kafka-in-2022-f22602830e09?source=collection_archive---------3-----------------------#2022-03-09">https://levelup.gitconnected.com/using-kafka-in-2022-f22602830e09?source=collection_archive---------3-----------------------#2022-03-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="3035" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">2022年使用卡夫卡</em></p><p id="00c1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">此处:</em><a class="ae kp" href="https://flatteredwithflutter.com/using-kafka/" rel="noopener ugc nofollow" target="_blank"><em class="ko">https://flatteredwithflutter.com/using-kafka/</em></a></p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="kv kw l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">2022年使用卡夫卡|卡夫卡入门</figcaption></figure><p id="2086" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将简要介绍:</p><ol class=""><li id="befa" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn lg lh li lj bi translated">卡夫卡简介</li><li id="2502" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">在机器上设置Kafka</li><li id="2c81" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">创建卡夫卡制作人</li><li id="8c31" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">创造卡夫卡消费者</li><li id="ac6f" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">运行生产者和消费者</li></ol><blockquote class="lp lq lr"><p id="de1c" class="jq jr ko js b jt ju jv jw jx jy jz ka ls kc kd ke lt kg kh ki lu kk kl km kn im bi translated">注意:本文假设读者了解Java，并且已经在机器上配置了Java。用户也熟悉卡夫卡的术语。</p></blockquote><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lv"><img src="../Images/1679335cb05001f89e59f04d020a37c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BYbgd5zKpgKcxtGayO0Ukg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">在2022年使用卡夫卡</figcaption></figure><h2 id="e3e4" class="mc md it bd me mf mg dn mh mi mj dp mk kb ml mm mn kf mo mp mq kj mr ms mt mu bi translated">卡夫卡简介</h2><p id="dfc0" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">根据<a class="ae kp" href="https://kafka.apache.org/intro" rel="noopener ugc nofollow" target="_blank">文档</a>，Kafka是一个事件流平台，可用于收集、处理、存储和分析大规模数据。<strong class="js iu"> Kafka </strong>被<a class="ae kp" href="https://kafka.apache.org/powered-by" rel="noopener ugc nofollow" target="_blank">数千家公司</a>使用，其中包括超过60%的财富100强公司。</p><p id="54d2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Kafka以其出色的性能、低延迟、容错和高吞吐量而闻名，它能够每秒处理数千条消息。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi na"><img src="../Images/0bfbabab25a5c64b37a96dcf0b1a1491.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QFtT6kh-s5SfhIWf.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">卡夫卡概述</figcaption></figure><p id="9049" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用案例:</p><ul class=""><li id="8837" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">实时处理支付和金融交易，</li><li id="ba6e" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn nb lh li lj bi translated">持续捕获和分析来自物联网设备的传感器数据，</li><li id="8023" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn nb lh li lj bi translated">收集客户互动和订单并立即做出反应，</li><li id="9847" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn nb lh li lj bi translated">实时跟踪和监控汽车、卡车、车队和货物</li></ul></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h2 id="ba0a" class="mc md it bd me mf mg dn mh mi mj dp mk kb ml mm mn kf mo mp mq kj mr ms mt mu bi translated"><strong class="ak">在机器上设置Kafka</strong></h2><p id="6378" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">这一节将有助于在您的机器上设置Kafka。</p><blockquote class="lp lq lr"><p id="2990" class="jq jr ko js b jt ju jv jw jx jy jz ka ls kc kd ke lt kg kh ki lu kk kl km kn im bi translated"><strong class="js iu">注意:我们用的是mac。</strong></p></blockquote><ul class=""><li id="cb0c" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">要安装<code class="fe nj nk nl nm b">Kafka</code>，请按此处的<a class="ae kp" href="https://kafka.apache.org/downloads" rel="noopener ugc nofollow" target="_blank"/>。导航到<strong class="js iu">最新二进制下载</strong>，到今天为止是<strong class="js iu"> Scala 2.13，</strong>点击链接。它将打开另一个网页，并单击如下链接:</li></ul><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi nn"><img src="../Images/641eb443f00c41b8b309c271e793b07e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CND4cBRTMob43AdMYHLyOQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">卡夫卡的下载链接</figcaption></figure><ul class=""><li id="9baa" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">提取文件夹并导航到我们示例中的文件夹(<em class="ko">Downloads/Kafka _ 2.12–3 . 1 . 0</em>)。</li></ul><blockquote class="lp lq lr"><p id="0545" class="jq jr ko js b jt ju jv jw jx jy jz ka ls kc kd ke lt kg kh ki lu kk kl km kn im bi translated">注意:在解压Kafka zip文件的路径下，遵循下面的终端命令。</p></blockquote><p id="6330" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">启动动物园管理员</strong></p><ul class=""><li id="a510" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">在上面的路径中打开一个终端并键入</li></ul><pre class="kq kr ks kt gt no nm np nq aw nr bi"><span id="78fb" class="mc md it nm b gy ns nt l nu nv">sh bin/zookeeper-server-start.sh config/zookeeper.properties</span></pre><p id="25d7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">上述命令启动<code class="fe nj nk nl nm b">Zookeeper</code>。它主要用于跟踪Kafka集群中节点的状态，并维护Kafka主题和消息的列表。</p><blockquote class="lp lq lr"><p id="0dae" class="jq jr ko js b jt ju jv jw jx jy jz ka ls kc kd ke lt kg kh ki lu kk kl km kn im bi translated">注:从v2.8开始，没有<code class="fe nj nk nl nm b">Zookeeper</code>也可以运行Kafka。然而，这个更新还不能用于生产</p><p id="e3df" class="jq jr ko js b jt ju jv jw jx jy jz ka ls kc kd ke lt kg kh ki lu kk kl km kn im bi translated">保持上述终端开放</p></blockquote><p id="af8e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">启动Kafka broker服务</strong></p><ul class=""><li id="d207" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">在上述路径中打开另一个终端(<em class="ko">Downloads/Kafka _ 2.12–3 . 1 . 0</em>)并键入</li></ul><pre class="kq kr ks kt gt no nm np nq aw nr bi"><span id="0fcb" class="mc md it nm b gy ns nt l nu nv">sh bin/kafka-server-start.sh config/server.properties</span></pre><p id="7321" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这启动了<code class="fe nj nk nl nm b"><em class="ko">Kafka Broker</em></code>。一个<em class="ko">卡夫卡集群</em>由多个卡夫卡经纪人组成。每个Kafka经纪人都有一个唯一的ID(编号)。Kafka代理包含主题日志分区。连接到一个代理会将一个客户端引导到整个Kafka集群。如果需要，Kafka集群中可以有10、100或1，000个代理。</p><blockquote class="lp lq lr"><p id="834d" class="jq jr ko js b jt ju jv jw jx jy jz ka ls kc kd ke lt kg kh ki lu kk kl km kn im bi translated">保持这个终端开放</p></blockquote><p id="bbb7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">创建话题</strong></p><ul class=""><li id="96f7" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">在上面的路径中打开一个新的终端，并键入</li></ul><pre class="kq kr ks kt gt no nm np nq aw nr bi"><span id="a1e4" class="mc md it nm b gy ns nt l nu nv">sh bin/kafka-topics.sh --bootstrap-server localhost:9092 --create --topic test-topic</span></pre><p id="f0d9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">卡夫卡在不同的机器上产生事件，这些事件被组织并存储在<code class="fe nj nk nl nm b">topics</code>中</p><p id="90f0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在上面的命令中，我们说我们的</p><ul class=""><li id="70bd" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">服务器是<code class="fe nj nk nl nm b">localhost:9092</code>和</li><li id="9e67" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn nb lh li lj bi translated">创建的主题是<code class="fe nj nk nl nm b">test-topic</code></li></ul><p id="4941" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">验证题目创建</strong></p><ul class=""><li id="3858" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">在上面的路径中打开一个新的终端，并键入</li></ul><pre class="kq kr ks kt gt no nm np nq aw nr bi"><span id="aff3" class="mc md it nm b gy ns nt l nu nv">sh bin/kafka-topics.sh --bootstrap-server localhost:9092 --list</span></pre><p id="ebfd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这应该能让你看到<code class="fe nj nk nl nm b">test-topic</code>。</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h2 id="fba2" class="mc md it bd me mf mg dn mh mi mj dp mk kb ml mm mn kf mo mp mq kj mr ms mt mu bi translated">创建卡夫卡制作人</h2><blockquote class="lp lq lr"><p id="9ee4" class="jq jr ko js b jt ju jv jw jx jy jz ka ls kc kd ke lt kg kh ki lu kk kl km kn im bi translated">注意:Kafka Broker应该在终端中运行</p></blockquote><p id="1af5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">安装依赖关系</strong></p><p id="2f88" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将使用<a class="ae kp" href="https://www.eclipse.org/downloads/" rel="noopener ugc nofollow" target="_blank"> Eclipse IDE </a>来创建我们的Kafka Producer。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/97c86db9b7af86b6ea227c17f5534a0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/0*6onkDUNIQdfeQlst"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">卡夫卡制片人</figcaption></figure><ul class=""><li id="e15f" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">使用eclipse创建一个Maven项目。</li><li id="0d72" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn nb lh li lj bi translated">转到pom.xml，输入以下内容，并更新您的maven项目</li></ul><pre class="kq kr ks kt gt no nm np nq aw nr bi"><span id="69a9" class="mc md it nm b gy ns nt l nu nv">&lt;dependencies&gt; <br/>   <br/>   &lt;!-- Kafka Client --&gt;<br/>   &lt;dependency&gt;<br/>    &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;<br/>    &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;<br/>    &lt;version&gt;3.1.0&lt;/version&gt;<br/>   &lt;/dependency&gt;<br/>   <br/>   &lt;!-- Simple logging --&gt;<br/>   &lt;dependency&gt;<br/>    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;<br/>    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;<br/>    &lt;version&gt;2.0.0-alpha6&lt;/version&gt;<br/>   &lt;/dependency&gt;<br/>   &lt;dependency&gt;<br/>    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;<br/>    &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;<br/>    &lt;version&gt;2.0.0-alpha6&lt;/version&gt;     <br/>   &lt;/dependency&gt;<br/>&lt;/dependencies&gt;</span></pre><p id="5f5c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将为我们的项目增加<code class="fe nj nk nl nm b">Kafka Client</code>和<code class="fe nj nk nl nm b">slf4j</code>。</p><p id="627b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">创造SampleProducer.java</strong></p><ul class=""><li id="7250" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">创建一个名为<code class="fe nj nk nl nm b">SampleProducer.java</code>的类</li></ul><pre class="kq kr ks kt gt no nm np nq aw nr bi"><span id="a6d3" class="mc md it nm b gy ns nt l nu nv">public class SampleProducer {<br/> <br/>    <br/> public SampleProducer() throws InterruptedException {<br/>  Properties properties = new Properties();<br/>  properties.put("bootstrap.servers", "localhost:9092");<br/>  properties.put("key.serializer","org.apache.kafka.common.serialization.StringSerializer");<br/> properties.put("value.serializer","org.apache.kafka.common.serialization.StringSerializer");<br/> <br/>  properties.put("kafka.topic", "test-topic");<br/>  <br/>  KafkaProducer kafkaProducer = new KafkaProducer(properties);<br/>  int i=0;<br/>  <br/>  try {<br/>   while (true) {<br/>    i++;<br/>    ProducerRecord producerRecord = new ProducerRecord("test-topic","key","message-" +i);<br/>    <br/>    Thread.sleep(3000);<br/>    kafkaProducer.send(producerRecord);<br/>   }<br/>  } finally {<br/>   kafkaProducer.close();<br/>  }    <br/>    }<br/>                  <br/>}</span></pre><p id="d819" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们用下面的键和值初始化<code class="fe nj nk nl nm b">Properties</code></p><p id="b007" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe nj nk nl nm b">bootstrap.servers</code>:您的本地服务器主机和端口</p><p id="b156" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe nj nk nl nm b">key.serializer</code>:用于通过网络发送序列化密钥。</p><p id="6a47" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe nj nk nl nm b">value.serializer</code>:用于通过网络发送序列化值。</p><p id="19e1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe nj nk nl nm b">kafka.topic</code>:你的卡夫卡话题</p><ul class=""><li id="4fc5" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">接下来，我们用属性创建一个<code class="fe nj nk nl nm b">KafkaProducer</code>的实例(如上所述)</li><li id="d11e" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn nb lh li lj bi translated">我们需要创建一个<code class="fe nj nk nl nm b">ProducerRecord</code>来向Kafka生产者发送数据。</li></ul><p id="4003" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个ProducerRecord接受要发送的<strong class="js iu">主题名</strong>、<strong class="js iu">键</strong>和<strong class="js iu">值</strong>。</p><ul class=""><li id="bb93" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">我们使用<strong class="js iu"> kafkaProducer发送记录。</strong></li><li id="f37a" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn nb lh li lj bi translated">这段代码放在while循环中，每隔3秒钟，它向Kafka代理发送一条记录。</li></ul><p id="74aa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">创造KafkaProducerRunner.java</strong></p><ul class=""><li id="43b2" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">这将是调用上述<code class="fe nj nk nl nm b">SampleProducer</code>的类</li></ul><pre class="kq kr ks kt gt no nm np nq aw nr bi"><span id="3190" class="mc md it nm b gy ns nt l nu nv">public class KafkaProducerRunner {</span><span id="9a27" class="mc md it nm b gy nx nt l nu nv"> public static void main(String[] args) {<br/>  SampleProducer sampleProducer = new SampleProducer();<br/> }</span><span id="d4f6" class="mc md it nm b gy nx nt l nu nv">}</span></pre></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h2 id="3bb9" class="mc md it bd me mf mg dn mh mi mj dp mk kb ml mm mn kf mo mp mq kj mr ms mt mu bi translated">创造卡夫卡消费者</h2><blockquote class="lp lq lr"><p id="3c5f" class="jq jr ko js b jt ju jv jw jx jy jz ka ls kc kd ke lt kg kh ki lu kk kl km kn im bi translated">注意:Kafka Broker应该在终端中运行</p></blockquote><ul class=""><li id="9df0" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">创建一个名为<code class="fe nj nk nl nm b">SampleConsumer.java</code>的类</li></ul><pre class="kq kr ks kt gt no nm np nq aw nr bi"><span id="bd78" class="mc md it nm b gy ns nt l nu nv">public class SampleConsumer {<br/> <br/> public SampleConsumer() {<br/>  Properties properties = new Properties();<br/>  properties.put("bootstrap.servers", "localhost:9092"); <br/>  properties.put("kafka.topic", "test-topic"); <br/>  properties.put("key.deserializer","org.apache.kafka.common.serialization.StringDeserializer");<br/> properties.put("value.deserializer","org.apache.kafka.common.serialization.StringDeserializer");<br/>  <br/> properties.put("group.id", "my-group");<br/>  <br/>  KafkaConsumer consumer = new KafkaConsumer(properties);<br/>  consumer.subscribe(Arrays.asList(properties.getProperty("kafka.topic")));<br/>        <br/>       while(true) {<br/>        ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofMillis(100));<br/>          for (ConsumerRecord record : records)  {<br/>           System.out.printf("partition = %s, offset = %d, key = %s, value = %s\n", <br/>             record.partition(), record.offset(), record.key(), record.value());<br/>          }<br/>       }              <br/>  <br/> }  <br/>}</span></pre><p id="8e58" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们用下面的键和值初始化<code class="fe nj nk nl nm b">Properties</code></p><p id="9444" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe nj nk nl nm b">bootstrap.servers</code>:您的本地服务器主机和端口</p><p id="93a0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe nj nk nl nm b">kafka.topic</code>:你的卡夫卡主题</p><p id="7afb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe nj nk nl nm b">key.deserializer</code>:用于在网络上反序列化密钥。</p><p id="bd28" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe nj nk nl nm b">value.deserializer</code>:用于通过网络反序列化值。</p><p id="af62" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe nj nk nl nm b">group.id</code>:指定群组id，仅在消费端使用。</p><ul class=""><li id="da1c" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">接下来，我们用属性创建一个<code class="fe nj nk nl nm b">KafkaConsumer</code>的实例(如上所述)。这个KafkaConsumer使用Kafka集群中的记录。</li><li id="f22d" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn nb lh li lj bi translated">接下来，我们使用<code class="fe nj nk nl nm b">subscribe</code>订阅主题(在KafkaProducer中创建)</li><li id="a04e" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn nb lh li lj bi translated">我们以<code class="fe nj nk nl nm b">ConsumerRecords</code>的形式获取数据，并在无限循环中每隔100毫秒调用<code class="fe nj nk nl nm b">poll</code>。</li><li id="b4a2" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn nb lh li lj bi translated">对于每个消费者记录，我们提取<strong class="js iu">分区、偏移量、键</strong>和<strong class="js iu">值</strong></li></ul><p id="567b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">创建KafkaConsumerRunner.java</strong></p><ul class=""><li id="a15f" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">这将是调用上述<code class="fe nj nk nl nm b">SampleConsumer</code>的类</li></ul><pre class="kq kr ks kt gt no nm np nq aw nr bi"><span id="6c48" class="mc md it nm b gy ns nt l nu nv">public class KafkaConsumerRunner {</span><span id="a876" class="mc md it nm b gy nx nt l nu nv"> public static void main(String[] args) {<br/>  SampleConsumer sampleConsumer = new SampleConsumer();<br/> }</span><span id="400b" class="mc md it nm b gy nx nt l nu nv">}</span></pre></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h2 id="cddf" class="mc md it bd me mf mg dn mh mi mj dp mk kb ml mm mn kf mo mp mq kj mr ms mt mu bi translated">运行生产者和消费者</h2><p id="3a08" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">如果您正确地遵循了上述步骤，您应该有以下文件</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/e134eb7ed5fbc6fd5ba32dc13820269b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*5hfqFZA86Bk8gzn4397TEA.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">卡夫卡档案</figcaption></figure><ul class=""><li id="c95c" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">让我们先运行<strong class="js iu"> KafkaProducerRunner，</strong>我们应该会看到类似这样的东西</li></ul><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi nz"><img src="../Images/b3fde9fd3f3a88e5e24f28932dfc2d95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9OKX-3DihIyWCO2-sUXVZA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">Kafka生产者日志</figcaption></figure><p id="5514" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们的生产者每3秒钟产生一次数据。</p><ul class=""><li id="930b" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn nb lh li lj bi translated">让我们运行<strong class="js iu"> KafkaConsumerRunner，</strong>我们应该会看到这样的东西</li></ul><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi oa"><img src="../Images/dd7d3a9471b3404b407393cbbb51fe8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CTrerBBLu3M-W_Dqhskmfw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">卡夫卡消费者日志</figcaption></figure><p id="63dd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们的消费者每3秒钟接收一次数据，然后我们将它打印到控制台上。</p><p id="df69" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">其他文章:</p><div class="ob oc gp gr od oe"><a href="https://medium.com/flutter-community/dart-on-aws-lambda-3a46aad38335" rel="noopener follow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">AWS Lambda上的Dart</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">AWS Lambda上的Dart</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">AWS Lambdamedium.com上的Dart</p></div></div><div class="on l"><div class="oo l op oq or on os ma oe"/></div></div></a></div><div class="ob oc gp gr od oe"><a rel="noopener  ugc nofollow" target="_blank" href="/deploy-react-and-aws-amplify-1db36c625d73"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">部署React和AWS Amplify</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">部署React和AWS Amplify</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">部署React和AWS Amplifylevelup.gitconnected.com</p></div></div><div class="on l"><div class="ot l op oq or on os ma oe"/></div></div></a></div><div class="ob oc gp gr od oe"><a rel="noopener  ugc nofollow" target="_blank" href="/deploy-lambda-using-serverless-a44a66f3d603"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">使用无服务器部署lambda</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">使用无服务器部署lambda</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">使用serverlesslevelup.gitconnected.com部署lambda</p></div></div><div class="on l"><div class="ou l op oq or on os ma oe"/></div></div></a></div><div class="ob oc gp gr od oe"><a rel="noopener  ugc nofollow" target="_blank" href="/show-push-notifications-in-react-449949e98e01"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">在React中显示推送通知</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">在React中显示推送通知</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">在Reactlevelup.gitconnected.com显示推送通知</p></div></div><div class="on l"><div class="ov l op oq or on os ma oe"/></div></div></a></div><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/e3f9eccae3092e480e077b0922a4527d.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/0*p__y9q2v7F9abaKk.gif"/></div></figure><pre class="kq kr ks kt gt no nm np nq aw nr bi"><span id="6233" class="mc md it nm b gy ns nt l nu nv"><a class="ae kp" href="https://github.com/AseemWangoo/kafka-example" rel="noopener ugc nofollow" target="_blank">Source code</a></span></pre></div></div>    
</body>
</html>