<html>
<head>
<title>Why we should decouple business logic from WordPress</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么我们应该将业务逻辑从WordPress中分离出来</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/why-we-should-decouple-business-logic-from-wordpress-666ceb8b9910?source=collection_archive---------8-----------------------#2021-11-14">https://levelup.gitconnected.com/why-we-should-decouple-business-logic-from-wordpress-666ceb8b9910?source=collection_archive---------8-----------------------#2021-11-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7589" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将你的业务逻辑和WordPress紧密结合起来似乎没有坏处，但是确实如此，我会解释为什么。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2149709a6bb59c954a610a73da3b065f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B9pPTata2sVTj-RC"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">安妮·尼加德在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="e9d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">WordPress成为最广泛使用的CMS，因为它是一个无需修改的好系统，但是当需要改变时，添加它们很简单。plugins文件夹中只有一个基本的PHP文件，你可以拥有一个全新的WordPress。</p><p id="49c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然这很适合采用，但作为一名专业的开发人员，我的目标不是扩展WordPress并让它做我想做的事情。我的目标是<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/what-is-your-job-as-a-software-developer-and-why-youre-probably-wrong-1e7c60e6b255">解决企业存在的问题</a>。WordPress只是工具。</p><p id="d817" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们经常将我们使用的工具与我们正在构建的项目混为一谈。我们允许便利性和时间约束影响我们的架构，并创建跨越太多架构边界的代码。</p><p id="47bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的项目架构中的问题在我们编写一行代码之前就开始了。它们始于项目的规划阶段。WordPress有两种主要的方式将自定义代码放到你的网站上:插件和主题。我们使用的所有东西要么是插件，要么是主题。当规划你的项目时，我们首先要问自己什么？</p><h1 id="62ff" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">这是插件，还是主题？</h1><p id="8a72" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这个问题听起来耳熟吗？如果是这样，那么你已经成为围绕WordPress建立业务的陷阱的受害者。这是什么陷阱？围绕WordPress建立你的业务。</p><p id="b90e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的生意不是WordPress。你的业务是向你的观众提供本地新闻。或者卖杂志。也许你的业务是为在线游戏产品提供一个数字市场。我见过所有这些，甚至更多，都是用WordPress运行的。</p><p id="a488" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">他们共有的问题？他们将核心业务与WordPress结合起来。</p><h1 id="ce4e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">MV…按？</h1><p id="6b42" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller" rel="noopener ugc nofollow" target="_blank">模型-视图-控制器</a>是一个众所周知的设计模式，我在这里就不再赘述了。我提到它是因为我认为当谈到WordPress时，我们需要从中获得灵感。MVC背后的目的是关注点的分离，允许我们在不影响项目整体流程的情况下交换单独的部分。</p><p id="ed82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用WordPress开发时，我们的关注点是什么？我们有我们的业务逻辑——我们的模型——和我们的网站模板——我们的视图。我们的控制器是什么？WordPress。</p><p id="4da9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在现代MVC框架中，控制器管理请求生命周期。这正是我们希望从WordPress中得到的功能。好的，WordPress就像是模型、视图和控制器的混合体。但是当涉及到我们编写的代码时，它就充当了控制器的角色。</p><p id="146a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们讨论为什么我们的代码与WordPress紧密耦合时，请记住这一点。</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><p id="d1fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">喜欢这篇文章吗？ <a class="ae ky" href="https://travisweston.com/membership" rel="noopener ugc nofollow" target="_blank"> <em class="ms">成为会员</em></a><em class="ms"/><a class="ae ky" href="https://travisweston.com/subscribe" rel="noopener ugc nofollow" target="_blank"><em class="ms">订阅</em> </a> <em class="ms">获取更多类似这样的精彩内容！</em></p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="b62d" class="lv lw it bd lx ly na ma mb mc nb me mf jz nc ka mh kc nd kd mj kf ne kg ml mm bi translated">WordPress对我们有吸引力</h1><p id="5b11" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">紧耦合是什么意思？紧密耦合的代码需要另一段特定的代码才能运行。或者，换句话说:如果它“知道”WordPress，那么你的代码就耦合到了WordPress。你不能孤立地运行你的代码。</p><p id="bbe2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这在WordPress中钩子的广泛使用和通过全局范围的变量和函数的渗入中表现得最为明显。如果我们允许我们的代码直接调用WordPress，我们所做的就是允许WordPress与我们的代码结合。</p><p id="ca38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而离婚码是很难的。</p><h1 id="7b4b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">代码，有好处</h1><p id="371f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我喜欢把我写的代码想象成一个<em class="ms">模块。</em>模块是一个独立的特性，只关心它自己和它的任务。模块是混杂的。任何人都可以要求他们做他们的事情，他们会这样做。他们不需要任何特定的平台或框架来完成工作。所有模块需要的是它们的输入。根据输入，它们将输出返回给平台。他们不关心输出会发生什么。</p><p id="9056" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我对所有代码的期望是创建离散的模块，并在模块中包含所有的业务逻辑。这是可能的，尽管我知道你在问自己怎么做。</p><h1 id="2e67" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">作为控制器的插件</h1><p id="d52b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">所以你对着屏幕大喊，“要让你的愚蠢模块工作，你还得写WordPress代码，白痴！”可能有很多脏话。</p><p id="ebe0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，你是对的。</p><p id="87fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像其他事情一样，这里的目标不是<em class="ms">不写任何WordPress代码</em>，而是<em class="ms">将业务逻辑从平台逻辑中分离出来。</em></p><p id="f490" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我正在构建一个基于故事的游戏。也许我决定使用WordPress来使更新故事更加简单，让我把注意力集中在游戏机制上，而不是建立一个内容管理系统和一个游戏。</p><p id="6ea8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">WordPress需要知道我有一个想要激活的游戏插件。当我的游戏插件运行时，它需要知道两件事:</p><ol class=""><li id="730e" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">它需要WordPress之外的哪些数据；和</li><li id="e820" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">它是如何将这些信息从WordPress中取出并放回WordPress的呢？</li></ol><p id="f617" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样。</p><p id="f336" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们在构建插件时已经考虑到了模块，所以我们可以编写插件代码，通过创建一个微插件来执行我们的业务逻辑，从而调用该模块。</p><h1 id="e54c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">由此得出合理的结论</h1><p id="aa98" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果我们把这个扩展到它的逻辑结论，我们得到两个独立的项目:我们小小的WordPress插件和我们在WordPress插件中需要的Composer包。我们的业务逻辑从来不需要了解WordPress，因为我们的业务逻辑不应该关心WordPress。</p><p id="d1e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的业务逻辑关心它的业务。</p><p id="de97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">WordPress需要了解我们的商业逻辑，而不是反过来。如果我们的业务逻辑因为任何原因需要访问WordPress，它会通过一个接口发生。假设一年后，我们决定最好将游戏转移到Laravel。</p><p id="4eba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以做到这一点，而无需完全重写我们的游戏。</p><p id="da04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要编写一个新的实现层，就这样。美妙之处在于，我们可以同时运行两个版本，同时更新我们的业务逻辑，因为这是三个完全独立的项目。</p><h1 id="c11c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">模块的优势</h1><p id="c199" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">不过，让我们面对现实吧。我们多久移动一次平台？不经常，特别是如果我们的业务逻辑依赖于CMS。</p><p id="d8b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样做还有其他好处吗？</p><p id="bb78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，否则，我也不会建议。</p><h1 id="b309" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">测试</h1><p id="f5b6" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我一直直言不讳地说我有多讨厌在WordPress中测试代码。我喜欢测试代码，但是在WordPress中这样做总是很痛苦。通过将我们的代码分离成一个模块模式，我们得到了两个世界的最好的东西——使用WordPress的便利性和独立测试我们代码的能力。</p><h1 id="0d79" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">技能转移</h1><p id="51b3" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">关于在WordPress中编码的事情是，如果你花太多时间去做，你就不再是一个PHP开发者，而开始成为一个WordPress开发者。这在短期内没问题，但从长远来看，这会损害你的工作前景。将你的职业与WordPress紧密结合比将你的代码与它紧密结合更糟糕。</p><p id="886f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过以模块化模式构建东西，您可以专注于创建干净的PHP代码，而不是使用正确的钩子在正确的时间启动某些东西。根据项目的大小，你可能永远不需要编写WordPress核心函数。在较大的项目中，你可能关注业务逻辑，而另一个开发人员可能只关注WordPress界面。</p><h1 id="f784" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">企业成长</h1><p id="327d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我将选择Yoast SEO一分钟，因为他们是普遍的，可以接受。</p><p id="476d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管价值不菲，但如果WordPress消失了，Yoast SEO也会关门大吉。没有WordPress就没有Yoast SEO。</p><p id="39ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但这是为什么呢？</p><p id="40ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Yoast SEO的核心并不是WordPress特有的。不使用WordPress的网站可以从Yoast这样的SEO工具中获益。但是Yoast与WordPress是如此紧密地结合在一起，在这一点上几乎不可能分开。</p><p id="a05f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果他们今天重新开始，他们可以将他们的业务逻辑创建为一个模块，并构建一个基于WordPress的加载器。一旦Yoast控制了WordPress SEO世界，他们可以投资一个月来构建Joomla loader。然后是Magento。德鲁巴。</p><p id="3943" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看不到尽头，因为随着开发人员创建新的CMS平台，Yoast可以制作一个控制器层来与新平台接口。相反，它们局限于WordPress所占据的公认的巨大市场。</p><h1 id="5069" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="9c38" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">总会有与WordPress紧密耦合的代码。如果你的工具是一个修改核心函数的5行插件，那么你可能不用担心这个。</p><p id="fb0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是如果你是更广泛的“作为平台的WordPress”社区的一员，并且你的组织依赖WordPress作为你业务的核心部分，你应该担心。你的生意取决于整个WordPress社区的意愿。这个项目太大了，无法由一家公司控制。</p><p id="9289" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，最好将您与平台的交互限制在一个层，同时您的业务逻辑不会受到平台变化的影响。</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><p id="68e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你喜欢这篇文章吗？ <a class="ae ky" href="https://travisweston.com/membership" rel="noopener ugc nofollow" target="_blank"> <em class="ms">成为会员</em> </a> <em class="ms">准备好Travis Weston写的所有东西——以及媒体上所有其他可用的东西。</em></p><p id="0940" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ms">已经是会员了？</em> <a class="ae ky" href="https://travisweston.com/subscribe" rel="noopener ugc nofollow" target="_blank"> <em class="ms">订阅得到通知</em> </a> <em class="ms">特拉维斯·韦斯顿写的每一篇文章。</em></p></div></div>    
</body>
</html>