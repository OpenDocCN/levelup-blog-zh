<html>
<head>
<title>Is Your SQL Database World-Ready?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">您的SQL数据库是全球通用的吗？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/is-your-database-world-ready-5086e8cc2970?source=collection_archive---------10-----------------------#2022-11-03">https://levelup.gitconnected.com/is-your-database-world-ready-5086e8cc2970?source=collection_archive---------10-----------------------#2022-11-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7a31" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何支持外语和表情符号🚀✨</h2></div><p id="cc69" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi le translated">你是否曾经访问过网站，并且在重音符号上有错误，例如，句子“你好，世界đźš€”而不是“你好，世界”🚀"?</p><p id="b8a1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者不得不管理应用程序，因为世界各地的用户抱怨您在网站上安排的活动没有在宣布的时间段发生？</p><p id="1528" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">我们日常使用的web、移动和重量级应用程序如何确保它们在所有语言中都可用？</strong></p><p id="cbee" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本系列文章将着眼于在全球用户使用的应用程序环境中准备数据库时要评估的不同元素！</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ln"><img src="../Images/0550f2150bd559cdaa1355e38754352e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ki5nxn3rAqZ57eUb"/></div></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk translated"><strong class="bd md">你的数据库已经准备好了吗？</strong>照片由<a class="ae me" href="https://unsplash.com/@noaa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> NOAA </a>拍摄</figcaption></figure><ol class=""><li id="4c2c" class="mf mg it kk b kl km ko kp kr mh kv mi kz mj ld mk ml mm mn bi translated">你将从准备在数据库中插入和处理信息开始<strong class="kk iu">，而不考虑在你的网站上注册的人的地理来源。</strong></li><li id="b7ff" class="mf mg it kk b kl mo ko mp kr mq kv mr kz ms ld mk ml mm mn bi translated">然后，<strong class="kk iu">您将了解时区及其在SQL </strong>中的管理。您将保存适用于您的应用程序的每个用户的日期。</li><li id="bf87" class="mf mg it kk b kl mo ko mp kr mq kv mr kz ms ld mk ml mm mn bi translated">最后，您将发现不同的策略<strong class="kk iu">来管理字符串的翻译</strong>并能够以多种语言提供您的站点和应用程序。</li></ol><blockquote class="mt mu mv"><p id="8a45" class="ki kj mw kk b kl km ju kn ko kp jx kq mx ks kt ku my kw kx ky mz la lb lc ld im bi translated">本文将重点讨论这个列表中的第一项。以下文章过几天就要发表了！别忘了跟着我，这样你就不会错过他们了。</p></blockquote><h1 id="bfdc" class="na nb it bd md nc nd ne nf ng nh ni nj jz nk ka nl kc nm kd nn kf no kg np nq bi translated">如何管理语言:字符编码的问题</h1><p id="4e64" class="pw-post-body-paragraph ki kj it kk b kl nr ju kn ko ns jx kq kr nt kt ku kv nu kx ky kz nv lb lc ld im bi translated"><strong class="kk iu">目标:</strong></p><ul class=""><li id="34ba" class="mf mg it kk b kl km ko kp kr mh kv mi kz mj ld nw ml mm mn bi translated">理解字符编码的概念</li><li id="b2e8" class="mf mg it kk b kl mo ko mp kr mq kv mr kz ms ld nw ml mm mn bi translated">最常用的字符编码是什么</li><li id="757a" class="mf mg it kk b kl mo ko mp kr mq kv mr kz ms ld nw ml mm mn bi translated">如何配置SQL数据库的字符编码</li></ul><h2 id="a93f" class="nx nb it bd md ny nz dn nf oa ob dp nj kr oc od nl kv oe of nn kz og oh np oi bi translated">理解字符编码的概念</h2><p id="11de" class="pw-post-body-paragraph ki kj it kk b kl nr ju kn ko ns jx kq kr nt kt ku kv nu kx ky kz nv lb lc ld im bi translated">在我们的应用程序和网站中，我们以不同的方式交流信息:通过声音、视频，当然还有文本。</p><p id="89c1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">In an international context, the information is translated into different languages, sometimes using a different alphabet than the one we know.<br/>But how can a computer program understand or store the information corresponding to the character “A” or the kanji “文”?</p><p id="26dc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是编码的概念，或者更确切地说是字符编码的由来。</p><p id="b1de" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于世界并不简单和统一，最初在每个区域创建了许多编码来处理所使用的大多数字母表。那么，当一个字符没有出现在所使用的字符编码表中时，会发生什么呢？</p><p id="8931" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这时，一些奇怪的替换字符被显示出来，这些字符被称为“Mojibake”或“象形文字”，直观地翻译了一个编码的问题。</p><h2 id="76ea" class="nx nb it bd md ny nz dn nf oa ob dp nj kr oc od nl kv oe of nn kz og oh np oi bi translated">最常用的字符编码是什么</h2><p id="3f8d" class="pw-post-body-paragraph ki kj it kk b kl nr ju kn ko ns jx kq kr nt kt ku kv nu kx ky kz nv lb lc ld im bi translated">十年前，开发人员的生活比今天复杂得多，因为web不像今天这样标准化，许多编码都是通用的，甚至在同一个国家内也是如此！</p><p id="a115" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">开发人员必须指出所使用的编码类型，以便web浏览器能够正确地转换要显示的内容。</p><p id="45ef" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，在生成HTML文档时，这种类型的声明是必需的:</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="69ae" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当时，有几种常用的编码类型:</p><ul class=""><li id="0cc4" class="mf mg it kk b kl km ko kp kr mh kv mi kz mj ld nw ml mm mn bi translated">UTF-8；</li><li id="7d98" class="mf mg it kk b kl mo ko mp kr mq kv mr kz ms ld nw ml mm mn bi translated">ISO-8859–1；</li><li id="d627" class="mf mg it kk b kl mo ko mp kr mq kv mr kz ms ld nw ml mm mn bi translated">windows-1251；</li></ul><p id="3e1c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是在2022年，大约98%的网络使用UTF-8编码。</p><blockquote class="mt mu mv"><p id="f91a" class="ki kj mw kk b kl km ju kn ko kp jx kq mx ks kt ku my kw kx ky mz la lb lc ld im bi translated">这是个好消息，因为在设计数据库时，您只需要指定这些信息，这样MySQL就可以对您输入的字符串进行编码，并使用正确的编码表修改数据库。</p></blockquote><p id="356f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">但是UTF-8到底是什么，为什么最终被选中？</strong></p><p id="c7b1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是一个很好的问题，我很高兴你问了！</p><p id="3082" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">UTF-8是一种基于Unicode的编码方法，unicode被定义为一套能够处理所有语言的标准化字符集，还包括“+”、“-”等符号，如箭头“🡑”以及著名的表情符号“like”🤪"!</p><blockquote class="mt mu mv"><p id="78b7" class="ki kj mw kk b kl km ju kn ko kp jx kq mx ks kt ku my kw kx ky mz la lb lc ld im bi translated">这就是<strong class="kk iu">,因为</strong>Unicode标准和UTF-8能够比其他编码方法发展得更快，它们逐渐被各地采用。</p></blockquote><h2 id="a704" class="nx nb it bd md ny nz dn nf oa ob dp nj kr oc od nl kv oe of nn kz og oh np oi bi translated">如何配置SQL数据库的字符编码</h2><p id="047c" class="pw-post-body-paragraph ki kj it kk b kl nr ju kn ko ns jx kq kr nt kt ku kv nu kx ky kz nv lb lc ld im bi translated">要配置您的数据库使用UTF-8编码，您将使用如下建议的<a class="ae me" href="https://dev.mysql.com/doc/refman/8.0/en/charset-table.html" rel="noopener ugc nofollow" target="_blank">字符集</a>语句:</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="f052" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">UTF-8编码方法继续发展(例如，支持表情符号)，插入或修改期间的控制方法也相应发展。</p><p id="67e5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">截至2022年，MySQL项目推荐使用<strong class="kk iu"> utf_mb4 </strong>编码字符，这是UTF-8的一种进化。</p><p id="26b2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">如何检查你的数据库是否已经正确配置，如何更新编码方式？</strong></p><p id="6d28" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要检查数据库的编码，我们可以使用以下查询:</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="oj ok l"/></div></figure><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/e1bc72cb07ddae52c44404303741cc72.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/1*xJUBWLqZMZ7xQd4afMUODg.jpeg"/></div></figure><p id="5809" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您会注意到，在我的示例中，有一个数据库使用了不同的字符编码方法，这可能会导致问题。</p><p id="69d8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了纠正这一点，下面是要执行的指令:</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="a9e7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为此，您还必须将内容转换成新的字符编码！有了MySQL，这很容易:</p><pre class="lo lp lq lr gt om on oo op aw oq bi"><span id="3ce5" class="nx nb it on b gy or os l ot ou">mysqlcheck -u &lt;mysql_user&gt; -p --auto-repair --optimize --all-databases</span></pre><p id="894f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您是PostgreSQL用户，您将使用<a class="ae me" href="https://pgpedia.info/p/pg_encoding_to_char.html" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu">pg _ char _ to _ encoding()</strong></a>函数:</p><pre class="lo lp lq lr gt om on oo op aw oq bi"><span id="cc80" class="nx nb it on b gy or os l ot ou">update pg_database set encoding = pg_char_to_encoding('UTF8') where datname = '&lt;database_name&gt;'</span></pre><h2 id="549d" class="nx nb it bd md ny nz dn nf oa ob dp nj kr oc od nl kv oe of nn kz og oh np oi bi translated">如何改变数据库的编码:安全的方法</h2><p id="61d8" class="pw-post-body-paragraph ki kj it kk b kl nr ju kn ko ns jx kq kr nt kt ku kv nu kx ky kz nv lb lc ld im bi translated">虽然前面的方法是可行的，但是如果您尝试(例如)从现代字符编码转换到旧的编码，可能会出现一些错误，因为有些字符将无法识别。</p><p id="12e1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这很不常见，但你应该这样做:</p><ol class=""><li id="2ddb" class="mf mg it kk b kl km ko kp kr mh kv mi kz mj ld mk ml mm mn bi translated">将数据库作为文件转储</li><li id="b252" class="mf mg it kk b kl mo ko mp kr mq kv mr kz ms ld mk ml mm mn bi translated">请<strong class="kk iu">复制一份</strong>，并使用新的编码进行转换(例如，从<em class="mw">拉丁语-1 </em>到<em class="mw"> utf8mb4 </em>)</li><li id="7fd8" class="mf mg it kk b kl mo ko mp kr mq kv mr kz ms ld mk ml mm mn bi translated">删除您的数据库</li><li id="5b65" class="mf mg it kk b kl mo ko mp kr mq kv mr kz ms ld mk ml mm mn bi translated">使用新编码创建新数据库</li><li id="1aa9" class="mf mg it kk b kl mo ko mp kr mq kv mr kz ms ld mk ml mm mn bi translated">重新加载您的数据。</li></ol><h1 id="0922" class="na nb it bd md nc nd ne nf ng nh ni nj jz nk ka nl kc nm kd nn kf no kg np nq bi translated">结论</h1><p id="0caf" class="pw-post-body-paragraph ki kj it kk b kl nr ju kn ko ns jx kq kr nt kt ku kv nu kx ky kz nv lb lc ld im bi translated">在本文中，您需要理解许多新信息，但矛盾的是，您只需要学习一些新东西！</p><p id="6e74" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您条件反射地在UTF-8中创建数据库，最好是使用您的数据库版本的最新版本。</p><p id="2ed3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为此，使用<strong class="kk iu">字符集</strong>，它定义了插入或修改字符串时SQL的编码。</p><p id="bc94" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">虽然不太可能，但您可能必须将旧数据库更新为UTF-8编码:然后，您将通过将"<strong class="kk iu"> ALTER DATABASE </strong>"语句与前面的语句耦合来重用您的知识。</p><p id="62cd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你的数据库可能会有错误，如果你使用MySQL，这些错误会被mysqlcheck软件自动纠正。</p><p id="e0b8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在命令提示符下执行的指令如下:</p><pre class="lo lp lq lr gt om on oo op aw oq bi"><span id="6494" class="nx nb it on b gy or os l ot ou">mysqlcheck -u &lt;mysql_user&gt; -p — auto-repair — optimize — all-databases</span></pre><p id="f711" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="mw">最安全的方法是将数据库的内容转换成新的字符编码，并将其导入新的数据库。</em>T15】</strong></p><p id="ddf2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你<a class="ae me" href="https://medium.com/@dataforeveryone" rel="noopener">关注我</a>，我会在以后发布文章的时候通知你！</p></div></div>    
</body>
</html>