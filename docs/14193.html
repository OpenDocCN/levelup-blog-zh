<html>
<head>
<title>Kotlin vs. Java: The Clean Code Edition</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kotlin vs. Java:干净的代码版本</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/kotlin-vs-java-the-clean-code-edition-1ba01d10633d?source=collection_archive---------6-----------------------#2022-11-08">https://levelup.gitconnected.com/kotlin-vs-java-the-clean-code-edition-1ba01d10633d?source=collection_archive---------6-----------------------#2022-11-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/2cd47d25dc82f3b98a377a43ccef8c29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z-KB3mPbUewPDBOK0SbVFg.png"/></div></div></figure><div class=""/><div class=""><h2 id="3148" class="pw-subtitle-paragraph jy ja jb bd b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dk translated">Kotlin和Java在代码可读性、可维护性和可重用性方面的区别。</h2></div><blockquote class="kq"><p id="f2e7" class="kr ks jb bd kt ku kv kw kx ky kz la dk translated">仅仅让代码工作是不够的——罗伯特·马丁</p></blockquote><h1 id="3cda" class="lb lc jb bd ld le lf lg lh li lj lk ll kh lm ki ln kk lo kl lp kn lq ko lr ls bi translated">介绍</h1><p id="1b92" class="pw-post-body-paragraph lt lu jb lv b lw lx kc ly lz ma kf mb mc md me mf mg mh mi mj mk ml mm mn la ij bi translated">随着更新的工具、编程语言和库的出现，不断增长的软件工程世界日益扩大。让我们这些开发者跟上这些趋势变得更具挑战性。其中一个例子是编程语言<em class="mo">科特林</em>。</p><p id="a337" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">Kotlin正慢慢成为Java更理想的选择，因为它为开发人员提供了更合适的解决方案。许多文章讨论了Kotlin和Java之间的比较，但是这里我们主要关注干净代码方面。这意味着展示哪种语言拥有更易读、更易维护和更易重用的代码。</p><p id="eec7" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">比方说，你正在寻找建立一个订单交付程序，如食品或包装。在接下来的段落中，我们将对用于订购系统的代码片段进行一些比较。</p></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><h1 id="7af2" class="lb lc jb bd ld le nb lg lh li nc lk ll kh nd ki ln kk ne kl lp kn nf ko lr ls bi translated">减少语法噪音</h1><p id="d79a" class="pw-post-body-paragraph lt lu jb lv b lw lx kc ly lz ma kf mb mc md me mf mg mh mi mj mk ml mm mn la ij bi translated">假设一个用户下了订单，而您现在负责验证对这样一个请求的响应。在古老的Java中，多个if语句是典型的方式。根据HTTP代码，您可以决定下一步做什么。</p><p id="9105" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">在下面的代码片段中，我们可以看到可读性受到许多if语句的影响。像这样一个简单的流量控制应该很容易理解。</p><figure class="nh ni nj nk gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ng"><img src="../Images/23d21ac12e2346db0e97da4b36360b9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3THVpbuINROCS1qGpnPbTg.png"/></div></div></figure><p id="d0fe" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">在Kotlin中，所有的<a class="ae nl" href="https://kotlinlang.org/docs/control-flow.html" rel="noopener ugc nofollow" target="_blank">流控制结构</a>，像if-then-else、when(switch)或try-catch，也是表达式。也就是说，它们可以直接赋给任何变量。在下面的代码中，我们将when语句分配给函数<code class="fe nm nn no np b">parseOrder</code>。此外，我们利用<a class="ae nl" href="https://kotlinlang.org/docs/ranges.html" rel="noopener ugc nofollow" target="_blank">范围特性</a>来清楚地分离条件。结果，我们有了可读的、立即理解的代码。</p><figure class="nh ni nj nk gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nq"><img src="../Images/971ba000b407fd45282ad7a06931ddc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OXl95_SZ69GQV22fBFf3zw.png"/></div></div></figure></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><h1 id="3545" class="lb lc jb bd ld le nb lg lh li nc lk ll kh nd ki ln kk ne kl lp kn nf ko lr ls bi translated">一种方法来统治他们</h1><p id="d5d1" class="pw-post-body-paragraph lt lu jb lv b lw lx kc ly lz ma kf mb mc md me mf mg mh mi mj mk ml mm mn la ij bi translated">现在，您希望在代码中将订单映射为一个对象。为此，您创建一个简单的POJO类和多个重载构造函数来简化对象创建。此外，不经常使用的变量已经被赋予了初始值。</p><p id="cec8" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">下面的代码片段展示了我们的方法。正如我们所看到的，即使没有getter和setter方法，也会创建许多样板代码。</p><blockquote class="nr ns nt"><p id="d3cb" class="lt lu mo lv b lw mp kc ly lz mq kf mb nu mr me mf nv ms mi mj nw mt mm mn la ij bi translated">注意:我们已经知道在Java 17中存在类似于Kotlin中数据类的<a class="ae nl" href="https://docs.oracle.com/en/java/javase/17/language/records.html" rel="noopener ugc nofollow" target="_blank">记录</a>。然而，我们在这里关注的是Java 11，因为它是目前使用最多的Java版本之一。</p></blockquote><figure class="nh ni nj nk gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nx"><img src="../Images/fd02b5670933881432da143534ec1491.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*agAqmHgNCnB43CpXgEIxGw.png"/></div></div></figure><p id="1e9d" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">另一方面，Kotlin提供数据类来处理getters和setters，并提供默认值来设置初始变量值。此外，使用命名参数，我们可以简化对象创建，而无需创建额外的构造函数。</p><p id="6119" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">对于开发人员来说，代码片段更简单、更简短。因此程序变得更加优雅。</p><figure class="nh ni nj nk gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ny"><img src="../Images/381b124ae7957da55618383a8ce99cee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FzUXXb23sqdmdVC-yia9sA.png"/></div></div></figure></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><h1 id="eb6b" class="lb lc jb bd ld le nb lg lh li nc lk ll kh nd ki ln kk ne kl lp kn nf ko lr ls bi translated">将NullPointerExceptions变成一行程序</h1><p id="4f0d" class="pw-post-body-paragraph lt lu jb lv b lw lx kc ly lz ma kf mb mc md me mf mg mh mi mj mk ml mm mn la ij bi translated">现在有了一个<code class="fe nm nn no np b">Order</code>类，您想要提取可选的交货通知，以便在系统的其他地方显示它。但是要小心臭名昭著的<code class="fe nm nn no np b">NullPointerExceptions</code>。我们必须假设任何值都可以是<code class="fe nm nn no np b">null</code>。</p><p id="1a3d" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">下面的Java片段显示，在我们想要使用它之前，我们总是必须检查<code class="fe nm nn no np b">null</code>。在底部，我们使用一个三元运算符来缩短代码。</p><figure class="nh ni nj nk gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nz"><img src="../Images/6c78129aa1239aa004cc15f1c1751323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*25TJ-7O4d_Nm--bV_HNqLA.png"/></div></div></figure><p id="3182" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">多亏了Kotlin对空安全的更好的处理，我们可以将整个Java代码转换成一行代码。在<a class="ae nl" href="https://kotlinlang.org/docs/null-safety.html#elvis-operator" rel="noopener ugc nofollow" target="_blank">猫王算子</a> <code class="fe nm nn no np b"><a class="ae nl" href="https://kotlinlang.org/docs/null-safety.html#elvis-operator" rel="noopener ugc nofollow" target="_blank">?:</a></code>的帮助下，如果不是<code class="fe nm nn no np b">null</code>，我们得到左侧。否则，返回右侧。</p><p id="8994" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">无需讨论，Kotlin版本更易于阅读，减少了不必要的代码。</p><figure class="nh ni nj nk gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oa"><img src="../Images/afdc93efca51eaef45291866a9b270a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oVwc664uoxUm7BqPXPOqSA.png"/></div></div></figure></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><h1 id="8ae4" class="lb lc jb bd ld le nb lg lh li nc lk ll kh nd ki ln kk ne kl lp kn nf ko lr ls bi translated">再也不用谷歌单身族了</h1><p id="ace7" class="pw-post-body-paragraph lt lu jb lv b lw lx kc ly lz ma kf mb mc md me mf mg mh mi mj mk ml mm mn la ij bi translated">作为项目中的典型，有时你需要寻找如何构建一个特定的软件设计模式。一个例子是Singleton模式，用于只创建/启动一次资源，并在运行时只使用该资源。</p><p id="4998" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">假设您想要连接到一个特定的电子邮件服务器，向客户发送有关其订单的确认/状态电子邮件。但是，您不希望无缘无故地多次重新创建连接。这就是单身族的用武之地！</p><p id="79e5" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">如下面的代码片段所示，我们为电子邮件服务器创建了一个完整的<code class="fe nm nn no np b">Singleton</code>管理类。此外，我们使连接部分互斥，不允许连接被创建两次。</p><figure class="nh ni nj nk gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ob"><img src="../Images/b7eebcf207b04dbbe0118920022b0f48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TZeDDLwm6qwjefSKLuM-Rg.png"/></div></div></figure><p id="ac7c" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">在Kotlin版本中，我们简单地使用了<a class="ae nl" href="https://kotlinlang.org/docs/object-declarations.html" rel="noopener ugc nofollow" target="_blank">对象</a>表达式来创建一个<code class="fe nm nn no np b">Singleton</code>对象，而没有添加任何额外的代码。它允许我们有一个更清晰的模式，而不需要添加更多的样板代码。</p><figure class="nh ni nj nk gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oc"><img src="../Images/9677b796e88895c32788a9e5ce0babe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZJLmMmzEpmnOTFebYKTwQQ.png"/></div></div></figure></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><h1 id="e08f" class="lb lc jb bd ld le nb lg lh li nc lk ll kh nd ki ln kk ne kl lp kn nf ko lr ls bi translated">更清晰的验证</h1><p id="5962" class="pw-post-body-paragraph lt lu jb lv b lw lx kc ly lz ma kf mb mc md me mf mg mh mi mj mk ml mm mn la ij bi translated">作为最后一项任务，您将被指派协助实施退款流程。你将负责支付状态的验证。可以在Java中使用if语句来查看支付状态是否匹配。否则，会发生异常。</p><p id="ddc6" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">下面的代码片段展示了一种典型的方法。解决方案已经很简单了，但是有了Kotlin，我们可以更进一步。</p><figure class="nh ni nj nk gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/6b81a8acd784b2d5907f96e17a22e27c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nV_yaHxw8-VJRHnBAkvvew.png"/></div></div></figure><p id="3810" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">让我们看看如何在Kotlin中解决这个问题:使用函数<code class="fe nm nn no np b"><a class="ae nl" href="https://kotlinlang.org/docs/scope-functions.html#takeif-and-takeunless" rel="noopener ugc nofollow" target="_blank">takeIf</a></code>，如果谓词为真，我们将得到值。否则，返回null。此外，在这个代码片段中，我们使用Elvis操作符<code class="fe nm nn no np b">?:</code>，如果它不为空，则返回左侧，否则返回右侧。</p><p id="a381" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">结合<code class="fe nm nn no np b">takeIf</code>和<code class="fe nm nn no np b">?:</code>，我们得到了一个解决方案，它不仅缩短了一行代码，还使代码比Java更具表现力。在我们看来，它使代码更具可读性，更容易理解。</p><figure class="nh ni nj nk gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oe"><img src="../Images/e3ef1582dc54b4dd14477e9a48af8332.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1zrZJiqaeVgujUvIK4Z4MQ.png"/></div></div></figure></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><h1 id="178a" class="lb lc jb bd ld le nb lg lh li nc lk ll kh nd ki ln kk ne kl lp kn nf ko lr ls bi translated">结论</h1><p id="f008" class="pw-post-body-paragraph lt lu jb lv b lw lx kc ly lz ma kf mb mc md me mf mg mh mi mj mk ml mm mn la ij bi translated">在开发订购系统的实现时，我们发现Kotlin中的代码片段比Java中的要干净得多。在我们看来，Kotlin为代码清晰性、可读性和可重用性方面的典型问题提供了更通用的选项。</p><p id="c13f" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">我们希望我们可以用不同的代码片段让你相信我们的观点。希望你能从我们关于你下一个项目的一两个想法中得到启发。</p><p id="2704" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">最后但同样重要的是，一如既往，我们非常欢迎大家提出意见和建议。</p></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><h1 id="cc96" class="lb lc jb bd ld le nb lg lh li nc lk ll kh nd ki ln kk ne kl lp kn nf ko lr ls bi translated">分级编码</h1><p id="2104" class="pw-post-body-paragraph lt lu jb lv b lw lx kc ly lz ma kf mb mc md me mf mg mh mi mj mk ml mm mn la ij bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="6c37" class="of og jb lv b lw mp lz mq mc oh mg oi mk oj la ok ol om on bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="4481" class="of og jb lv b lw oo lz op mc oq mg or mk os la ok ol om on bi translated">📰查看更多内容请参见<a class="ae nl" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码刊物</a></li><li id="2ca6" class="of og jb lv b lw oo lz op mc oq mg or mk os la ok ol om on bi translated">🔔关注我们:<a class="ae nl" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae nl" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae nl" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="6d4f" class="pw-post-body-paragraph lt lu jb lv b lw mp kc ly lz mq kf mb mc mr me mf mg ms mi mj mk mt mm mn la ij bi translated">🚀👉<a class="ae nl" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="lv jc">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>