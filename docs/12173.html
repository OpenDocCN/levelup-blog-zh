<html>
<head>
<title>Regex Tutorial — Matching a URL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">正则表达式教程—匹配URL</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/regex-tutorial-matching-a-url-25792ec7193c?source=collection_archive---------7-----------------------#2022-05-20">https://levelup.gitconnected.com/regex-tutorial-matching-a-url-25792ec7193c?source=collection_archive---------7-----------------------#2022-05-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5488479ba5a76622cf80108264748dc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R4g5ucd4Qj0vFwCAeN9FPA.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">正则表达式的快照</figcaption></figure><p id="f5d4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在本教程中，我们将研究匹配URL的正则表达式。使用这个例子，我们可以开始建立对正则表达式的基本理解，每个组件代表什么，如何在代码中实现它们来定义搜索模式，以及如何使用它们来验证某些字符串是否匹配特定的标准。本教程是对正则表达式的一个非常基本的介绍，还有更多复杂的内容超出了本文的范围。</p><h1 id="2768" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">摘要</h1><p id="4155" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">如前所述，下面的正则表达式可以用来验证字符串实际上是一个URL</p><p id="0355" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe md me mf mg b">/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/</code></p><p id="ba49" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">简单地说，这个表达式可以分解为:</p><ul class=""><li id="d157" class="mh mi iq ke b kf kg kj kk kn mj kr mk kv ml kz mm mn mo mp bi translated">该字符串必须以<code class="fe md me mf mg b">https://</code>开头</li><li id="7d1c" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated">该字符串可以包含任何数值<code class="fe md me mf mg b">0-9</code>、任何小写字母<code class="fe md me mf mg b">a-z</code>、<code class="fe md me mf mg b">.</code>或<code class="fe md me mf mg b">-</code>。该字符串可能会与此模式匹配一次或多次</li><li id="1f32" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated"><code class="fe md me mf mg b">.</code>必须遵循以前的模式</li><li id="8c76" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated">字符串的下一部分必须包括来自<code class="fe md me mf mg b">a-z</code>、<code class="fe md me mf mg b">.</code>的任何小写字母，长度在<code class="fe md me mf mg b">2-6</code>个字符之间</li><li id="1037" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated">接下来，字符串可以包括<code class="fe md me mf mg b">/</code>，后跟来自基本拉丁字母的<code class="fe md me mf mg b">any alphanumeric character</code>(包括<code class="fe md me mf mg b">_</code>)、<code class="fe md me mf mg b">.</code>或<code class="fe md me mf mg b">-</code>。这种模式可以重复0次或更多次</li><li id="0e9a" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated">前一模式可以跟随<code class="fe md me mf mg b">/</code> 0或一次</li></ul><h1 id="6cce" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">正则表达式组件</h1><p id="514b" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">构建正则表达式有许多单独的组件。因为regex被认为是一个文字，所以记住这些表达式必须用斜杠字符<code class="fe md me mf mg b">/</code>括起来是很重要的。当查看我们匹配URL的示例表达式时，我们可以在开头和结尾看到<code class="fe md me mf mg b">/</code>。</p><p id="e40e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe md me mf mg b">/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/</code></p><p id="6b34" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们现在来看看组成这个表达式的每个组件。</p><h2 id="6bdb" class="mv lb iq bd lc mw mx dn lg my mz dp lk kn na nb lo kr nc nd ls kv ne nf lw ng bi translated">锚</h2><p id="7a2c" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated"><code class="fe md me mf mg b">^</code>和<code class="fe md me mf mg b">$</code>是regex中使用的两个锚点字符。</p><p id="d726" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe md me mf mg b">^</code> -这个锚是表达式的开始，标识应该跟在它后面的字符串的开始。这种锚有两种不同的用途:</p><ul class=""><li id="dd2a" class="mh mi iq ke b kf kg kj kk kn mj kr mk kv ml kz mm mn mo mp bi translated">表示精确匹配，例如<code class="fe md me mf mg b">^ABC</code>。<code class="fe md me mf mg b">"ABC"</code>和<code class="fe md me mf mg b">"ABCDEFG"</code>都是匹配的。</li><li id="a023" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated">使用括号表达式表示可能匹配的范围。我们将在后面的部分研究括号表达式。</li></ul><h2 id="cc99" class="mv lb iq bd lc mw mx dn lg my mz dp lk kn na nb lo kr nc nd ls kv ne nf lw ng bi translated">量词</h2><p id="a005" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">在regex中，量词定义要匹配的字符或表达式的数量。首先，我们将查看所有不同类型的量词，然后查看正则表达式示例中用于匹配URL的特定量词。</p><ul class=""><li id="e3d2" class="mh mi iq ke b kf kg kj kk kn mj kr mk kv ml kz mm mn mo mp bi translated"><code class="fe md me mf mg b">*</code> -匹配前面的模式0次或更多次。例如:<code class="fe md me mf mg b">/fun*/</code>匹配<code class="fe md me mf mg b">"funny"</code>中的<code class="fe md me mf mg b">"fun"</code>和<code class="fe md me mf mg b">"thunder"</code>中的<code class="fe md me mf mg b">"un"</code>，但是<code class="fe md me mf mg b">"bird"</code>中没有匹配</li><li id="84f5" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated"><code class="fe md me mf mg b">+</code> -匹配前面的模式1次或更多次。示例:<code class="fe md me mf mg b">/k+/</code>匹配<code class="fe md me mf mg b">"kick"</code>中的每个<code class="fe md me mf mg b">k</code></li><li id="30d0" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated"><code class="fe md me mf mg b">?</code> -匹配前面的模式0或1次。示例:<code class="fe md me mf mg b">/e?el?/</code>匹配<code class="fe md me mf mg b">"gel"</code>中的<code class="fe md me mf mg b">"el"</code>和<code class="fe md me mf mg b">"cradle"</code> <em class="nh">中的<code class="fe md me mf mg b">"le"</code>关于</em> <code class="fe md me mf mg b"><em class="nh">?</em></code> <em class="nh">的一个重要注意事项是，如果它紧接着另一个量词(</em> <code class="fe md me mf mg b"><em class="nh">*</em></code> <em class="nh">、</em> <code class="fe md me mf mg b"><em class="nh">+</em></code> <em class="nh">、</em> <code class="fe md me mf mg b"><em class="nh">?</em></code> <em class="nh">、</em> <code class="fe md me mf mg b"><em class="nh">{}</em></code> <em class="nh">)使用，它会使量词非贪婪，这意味着它将匹配最小次数，与默认情况相反</em></li><li id="479f" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated"><code class="fe md me mf mg b">{ n, x }</code> -匹配前面的模式最少<code class="fe md me mf mg b">n</code>次，最多<code class="fe md me mf mg b">x</code>次</li></ul><p id="ed9c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">回头看看匹配URL的正则表达式示例，我们可以检查表达式中出现的不同量词。</p><p id="e351" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe md me mf mg b">/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/</code></p><ul class=""><li id="4594" class="mh mi iq ke b kf kg kj kk kn mj kr mk kv ml kz mm mn mo mp bi translated">我们看到<code class="fe md me mf mg b">?</code>用在一些不同的地方。首先表示<code class="fe md me mf mg b">"https"</code>可能匹配0次或1次，然后表示<code class="fe md me mf mg b">"https//"</code>可能匹配0次或1次，最后表示<code class="fe md me mf mg b">/</code>可能匹配0次或1次</li><li id="4ed6" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated">我们看到<code class="fe md me mf mg b">*</code>用来表示<code class="fe md me mf mg b">[\/\w \.-]</code>可能匹配0次或更多次，而<code class="fe md me mf mg b">([a-z\.]{2,6})([\/\w \.-]*)</code>可能匹配0次或更多次</li></ul><h2 id="3df0" class="mv lb iq bd lc mw mx dn lg my mz dp lk kn na nb lo kr nc nd ls kv ne nf lw ng bi translated">分组结构</h2><p id="ce41" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">regex中使用分组构造来检查字符串的多个部分或节，以满足不同的需求。通过在正则表达式的不同部分使用括号(<code class="fe md me mf mg b">()</code>)，我们可以创建具有彼此独立需求的子表达式。</p><p id="e120" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">除非另有说明，否则子表达式会查找精确匹配。例如，给定子表达式<code class="fe md me mf mg b">(abc):(def)</code>，<code class="fe md me mf mg b">"abc:def"</code>匹配，而<code class="fe md me mf mg b">"cba:fed"</code>不匹配。</p><p id="6e63" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在我们匹配URL的正则表达式示例中:</p><p id="6618" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe md me mf mg b">/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/</code></p><p id="d451" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们看到以下子表达式:</p><ul class=""><li id="ab4e" class="mh mi iq ke b kf kg kj kk kn mj kr mk kv ml kz mm mn mo mp bi translated"><code class="fe md me mf mg b">(https?:\/\/)</code></li><li id="45c5" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated"><code class="fe md me mf mg b">([\da-z\.-]+)</code></li><li id="cf24" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated"><code class="fe md me mf mg b">([a-z\.]{2,6})</code></li><li id="2372" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated"><code class="fe md me mf mg b">([\/\w \.-]*)</code></li></ul><h2 id="9ad2" class="mv lb iq bd lc mw mx dn lg my mz dp lk kn na nb lo kr nc nd ls kv ne nf lw ng bi translated">括号表达式</h2><p id="dd59" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">括号表达式，也称为正字符组，表示我们希望在字符串中匹配的一系列字符。在编写括号表达式时，我们可以包含我们想要匹配的所有字符，但更常见的做法是使用连字符来表示这些字符的范围。例如,<code class="fe md me mf mg b">[abcdef]</code>与<code class="fe md me mf mg b">[a-f]</code>有相同的含义，并表明我们正在寻找一个包含<code class="fe md me mf mg b">a</code>或<code class="fe md me mf mg b">b</code>或<code class="fe md me mf mg b">c</code>或<code class="fe md me mf mg b">d</code>或<code class="fe md me mf mg b">e</code>或<code class="fe md me mf mg b">f</code>的字符串。只要字符串包含指定的字符之一，它就会被视为匹配。</p><p id="f31b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在我们匹配URL的正则表达式示例中:</p><p id="cbaa" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe md me mf mg b">/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/</code></p><p id="8f44" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们看到以下括号表达式:</p><ul class=""><li id="9d8f" class="mh mi iq ke b kf kg kj kk kn mj kr mk kv ml kz mm mn mo mp bi translated"><code class="fe md me mf mg b">[\da-z\.-]</code> -该括号表达式表示任何数字、任何小写字母a-z、斜线、点或连字符都将产生匹配</li><li id="5449" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated"><code class="fe md me mf mg b">[a-z\.]</code> -这个括号表达式表示任何小写字母a-z、斜线或点都将产生匹配</li><li id="8105" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated"><code class="fe md me mf mg b">[\/\w \.-]</code> -该括号表达式表示任何斜杠、任何字母数字字符、点或连字符都将产生匹配</li></ul><h2 id="c5e1" class="mv lb iq bd lc mw mx dn lg my mz dp lk kn na nb lo kr nc nd ls kv ne nf lw ng bi translated">字符类别</h2><p id="f12d" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">字符类在regex中用于定义字符集，其中一个字符可以出现在字符串中以产生匹配。在前一节中讨论的括号表达式是一种流行的字符类类型。以下是一些其他常见的字符类。</p><ul class=""><li id="04b1" class="mh mi iq ke b kf kg kj kk kn mj kr mk kv ml kz mm mn mo mp bi translated"><code class="fe md me mf mg b">.</code> -匹配除<code class="fe md me mf mg b">/n</code>(新行)以外的任何字符</li><li id="2df8" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated"><code class="fe md me mf mg b">/d</code> -匹配任何数字</li><li id="0002" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated"><code class="fe md me mf mg b">/w</code> -匹配拉丁字母中的任何字母数字字符，包括下划线(<code class="fe md me mf mg b">_</code>)</li><li id="d923" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated"><code class="fe md me mf mg b">/s</code> -匹配单个空白字符，包括制表符和换行符</li></ul><p id="b211" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="nh">注意，</em> <code class="fe md me mf mg b"><em class="nh">/d</em></code> <em class="nh">，</em> <code class="fe md me mf mg b"><em class="nh">/w</em></code> <em class="nh">，</em> <code class="fe md me mf mg b"><em class="nh">/s</em></code> <em class="nh">，可以通过字母的大写来改成逆匹配。</em></p><p id="d59f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在我们匹配URL的正则表达式示例中:</p><p id="27ce" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe md me mf mg b">/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/</code></p><p id="9387" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们看到字符类以下列方式应用:</p><ul class=""><li id="fc0f" class="mh mi iq ke b kf kg kj kk kn mj kr mk kv ml kz mm mn mo mp bi translated"><code class="fe md me mf mg b">[\da-z\.-]</code> -在这个括号表达式(本身是一个字符类)中，我们看到<code class="fe md me mf mg b">/d</code>被用来表示任何数字都会产生一个匹配</li><li id="673b" class="mh mi iq ke b kf mq kj mr kn ms kr mt kv mu kz mm mn mo mp bi translated"><code class="fe md me mf mg b">[\/\w \.-]</code> -在这个括号表达式中，我们看到<code class="fe md me mf mg b">/w</code>被用来表示拉丁字母中的任何字母数字字符将产生一个匹配。</li></ul><h2 id="4d3b" class="mv lb iq bd lc mw mx dn lg my mz dp lk kn na nb lo kr nc nd ls kv ne nf lw ng bi translated">字符转义</h2><p id="9da9" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">在regex中，字符转义使用反斜杠(<code class="fe md me mf mg b">\</code>)表示。当一个字符不打算按字面意思解释时，使用字符转义。例如，<code class="fe md me mf mg b">{</code>通常表示量词的开始，但是如果我们在花括号前面加一个反斜杠(<code class="fe md me mf mg b">\{</code>)，regex会寻找一个开花括号，而不是量词的开始。这在查找包含特殊字符的字符串时非常有用。对字符转义(以及所有其他特殊字符)的一个警告是，当包含在括号表达式中时，它们会失去功能。</p><p id="a514" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">看看我们匹配URL的正则表达式示例:</p><p id="b6bc" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe md me mf mg b">/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/</code></p><p id="5784" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们可以看到在哪里使用了字符转义。</p><ul class=""><li id="968b" class="mh mi iq ke b kf kg kj kk kn mj kr mk kv ml kz mm mn mo mp bi translated"><code class="fe md me mf mg b">\.</code> -这里用来表示我们正在明确地寻找字符<code class="fe md me mf mg b">.</code>，而不是字符类</li></ul><h1 id="68a6" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">作者</h1><p id="a7d1" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">安德鲁·梅森2022年在加州大学伯克利分校学习网页开发。他喜欢创建新项目，并且是开发人员社区的活跃成员。要查看更多他的作品，你可以访问他的<a class="ae ni" href="https://github.com/atmason90" rel="noopener ugc nofollow" target="_blank"> GitHub简介</a>。</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="852b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">【http://github.com】最初发表于<a class="ae ni" href="https://gist.github.com/atmason90/0bafb2aed1302f65ba507b0846023c71" rel="noopener ugc nofollow" target="_blank"><em class="nh"/></a><em class="nh">。</em></p></div></div>    
</body>
</html>