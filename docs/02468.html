<html>
<head>
<title>Building a Ruby CLI Gem From Scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从头开始构建Ruby CLI Gem</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/building-a-ruby-cli-gem-from-scratch-fca59acda169?source=collection_archive---------8-----------------------#2020-03-15">https://levelup.gitconnected.com/building-a-ruby-cli-gem-from-scratch-fca59acda169?source=collection_archive---------8-----------------------#2020-03-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0d13" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">作为Flatiron School软件工程项目的学生，我的任务是用Ruby创建一个命令行应用程序。这个应用程序将被打包成一个漂亮整洁的包，随时可以在另一个程序员的应用程序中实现，在Ruby中被称为“宝石”。我的gem，叫做<code class="fe kl km kn ko b">TopNewsD1</code>，通过<code class="fe kl km kn ko b">Nokogiri</code>从ESPN NCAA男篮主页抓取文章，打印到你的终端，并会根据直播网站实时更新。我的宝石是根据给定的规格建造的:</p><p id="5ac6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">1.提供CLI(命令行界面)</p><p id="596b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.提供对来自给定网页的数据的访问</p><p id="9e2e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.所提供的数据必须能够深入一个层次(一个“层次”是用户可以做出选择，然后获得关于他们选择的详细信息)</p><p id="7e84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本文将给出我如何构建这个gem，我的gem做什么，以及我对构建这个gem的体验的想法。</p></div><div class="ab cl kp kq hu kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ij ik il im in"><p id="08d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第一步—创建存储库</strong></p><p id="fabd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您阅读本文的目的是构建自己的gem，那么网上有许多资源可以提供关于这个特定步骤的补充信息。出于我的目的，我使用<code class="fe kl km kn ko b">bundler</code>来创建我的gem存储库和让这个gem正常工作所需的所有文件。在我的终端中，我导航到我想要的位置，在我的终端中键入<code class="fe kl km kn ko b">bundle gem TopNewsD1</code>，瞧，需要开始的一切都创建好了。</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi kw"><img src="../Images/902a6d6ce95511a1f50fe585a0e1401d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ByHqCVQDhbXIuL_C0mC5HA.png"/></div></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">在终端捆绑宝石</figcaption></figure><p id="4259" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面创建的唯一需要我编辑的文件是<code class="fe kl km kn ko b">gemspec</code>和<code class="fe kl km kn ko b">README</code>。文件本身实际上会告诉你需要编辑什么，除了给<code class="fe kl km kn ko b">gemspec</code>添加一些开发依赖。</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi lm"><img src="../Images/d76c3646d691b0b44315f3507c35015d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OxNENaxnaKC61E6k00aEQw.png"/></div></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">Gemspec依赖性</figcaption></figure><p id="db9f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">gemspec</code>的底部，我必须为<code class="fe kl km kn ko b">bundler</code>、<code class="fe kl km kn ko b">rake</code>、<code class="fe kl km kn ko b">rspec</code>和<code class="fe kl km kn ko b">pry</code>添加一个开发依赖项，并为<code class="fe kl km kn ko b">nokogiri</code>添加一个通用依赖项，这样我的任何使用抓取的文件都可以正确地抓取所需的网页。<br/>(之后，您需要将本地机器上的这个目录与GitHub上的一个存储库连接起来。你可以查看GitHub的文章了解这方面的细节)</p><h2 id="2a39" class="lo lp iq bd lq lr ls dn lt lu lv dp lw jy lx ly lz kc ma mb mc kg md me mf mg bi translated">第二步—操作和属性</h2><p id="b4b2" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">我已经知道我希望我的宝石刮ESPN的NCAA男子篮球主页，并提供基于该网站当时显示的文章，但我需要决定我希望我的应用程序如何操作。我使用了Flatiron提供的一些资源来让我了解如何实现这一点。<br/>首先，也是最重要的，我需要一种方法来运行我的程序。这是通过在某种链中调用其他对象的对象来完成的。链中的第一个链接位于我创建的名为<code class="fe kl km kn ko b">TopNewsD1</code>的文件下的<code class="fe kl km kn ko b">bin</code>文件夹中。</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/f844e1a1d76982d7bece4c9258de48c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*439gSrigx2-GCY-gHQ3HYg.png"/></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">bin文件夹中的TopNewsD1</figcaption></figure><p id="a953" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">实际代码只有四行，但它们对于操作都是必不可少的。这里最重要的一段代码是<code class="fe kl km kn ko b">require “TopNewsD1”</code>。这一行需要将成为整个应用程序环境的<code class="fe kl km kn ko b">TopNewsD1</code>文件(我还必须将这些相同的代码行添加到<code class="fe kl km kn ko b">bin</code>文件夹中的文件<code class="fe kl km kn ko b">console</code>)。</p><p id="47c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们深入了解一下我们的环境。</p><p id="2238" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的环境文件是应用程序中所有东西都依赖的文件。</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/a827662302d4209b85a37629f2360ac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*iaGnmjHFqoKPV8p1KvDhbg.png"/></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">环境设置</figcaption></figure><p id="8f75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我在用刮削我需要的<code class="fe kl km kn ko b">open-uri</code> &amp; <code class="fe kl km kn ko b">nokogiri</code>。这些在前两行是必需的。我也会毫无疑问的遇到问题，会用<code class="fe kl km kn ko b">pry</code>来调试。最后，我需要将我的文件放在我的<code class="fe kl km kn ko b">lib</code>文件夹中的<code class="fe kl km kn ko b">TopNewsD1</code>文件夹中。这在第5–7行完成。简单而强大，我的环境文件将让所有需要通信的文件这样做。</p><p id="6a05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回到<code class="fe kl km kn ko b">bin</code>文件夹中的文件，最后一行是<code class="fe kl km kn ko b">TopNewsD1::CLI.new.call</code>。这一行访问了<code class="fe kl km kn ko b">TopNewsD1::CLI</code>类，创建了一个新的实例，并调用了<code class="fe kl km kn ko b">call</code>方法(我们稍后将定义这个类及其方法)。这个方法<code class="fe kl km kn ko b">call</code>，将是链中被调用的第一个对象。</p><p id="9988" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是在我们到达那里之前，我们需要回溯一点，远离写代码回到我的程序的基础。我创建了一个大纲，并给了自己一些一般的指导方针。最终，我不得不问自己一个非常重要的问题:</p><p id="7ff1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="mo">什么定义了一篇文章？</em>T25】</strong></p><p id="22d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一篇文章有一个<code class="fe kl km kn ko b">title</code>。</p><p id="bf40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一篇文章有一个<code class="fe kl km kn ko b">author</code>。</p><p id="4ebd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一篇文章有一个<code class="fe kl km kn ko b">description</code>或<code class="fe kl km kn ko b">topic</code>。</p><p id="4e97" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一篇文章有一个基于其写作时间的<code class="fe kl km kn ko b">timestamp</code>。</p><p id="23fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一篇文章有一个<code class="fe kl km kn ko b">URL</code>。</p><p id="f543" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这给了我一些重要的信息。我知道我需要为我收集的每篇文章获得一个标题、一个<code class="fe kl km kn ko b">author</code>、一个<code class="fe kl km kn ko b">description</code>或<code class="fe kl km kn ko b">topic</code>、一个<code class="fe kl km kn ko b">timestamp</code>和一个<code class="fe kl km kn ko b">URL</code>。这些将是我要设置的属性。</p><h2 id="13fa" class="lo lp iq bd lq lr ls dn lt lu lv dp lw jy lx ly lz kc ma mb mc kg md me mf mg bi translated">第三步—创建CLI</h2><p id="1477" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">在<code class="fe kl km kn ko b">lib</code>文件夹中，甚至在<code class="fe kl km kn ko b">TopNewsD1</code>文件夹的更深处，我创建了一个名为<code class="fe kl km kn ko b">cli.rb</code>的文件。这个文件将包含用户与应用程序交互所需的所有代码。在最后一步中，在<code class="fe kl km kn ko b">bin</code>文件夹中的<code class="fe kl km kn ko b">TopNewsD1</code>文件中，我从类<code class="fe kl km kn ko b">TopNewsD1::CLI</code>中调用了<code class="fe kl km kn ko b">call</code>方法。这实际上是一个非常简单的方法，也是链条中的下一步。</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/bac7334c0776eb5ea355d1f043b5419a.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*dzNTFuGkM5rDLVhQ-KTXlg.png"/></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">呼叫方法</figcaption></figure><p id="a701" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">只有短短两行代码的<code class="fe kl km kn ko b">call</code>方法将列出搜集到的故事，并给用户一个与之交互的菜单。列表<code class="fe kl km kn ko b">list_stories</code>，是我将要定义的另一个方法。</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi mq"><img src="../Images/5a345d2f95e61e393beba3d12ed06866.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Em4fhg29AgJHu88u7PvAlQ.png"/></div></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">列表法</figcaption></figure><p id="48a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该方法输出一个新行，后跟“<code class="fe kl km kn ko b">Top Stories:</code>”。接下来的几行将实例变量<code class="fe kl km kn ko b">@stories</code>设置为<code class="fe kl km kn ko b">::Stories</code>类中的一个方法，名为<code class="fe kl km kn ko b">today</code>(我将在后面定义)。之后，它获取该实例方法，并遍历每一项。我用<code class="fe kl km kn ko b">each.with_index(1)</code>将第一项设置为1而不是0。这个迭代将输出一个字符串，这个字符串是由<code class="fe kl km kn ko b">Stories</code>类填充的，带有我们前面提到的属性，并且是在那个类中设置的。这是我为列表设置结构的地方。它看起来有点像“T21”。</p><p id="2524" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">call</code>方法中调用的下一个方法是<code class="fe kl km kn ko b">menu</code>。这是整个应用程序中最复杂的方法。</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi mr"><img src="../Images/2e8be1fb00615b7da9da4f63eab72c0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lKSq2-ST_daTZkIvfgNGIw.png"/></div></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">菜单方法</figcaption></figure><p id="9b1e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个方法负责接收用户的输入，并根据输入决定做什么。默认情况下，我将<code class="fe kl km kn ko b">input</code>设置为等于<code class="fe kl km kn ko b">nil</code>。菜单方法的核心是一个条件语句，以代码开始，说明“当输入不等于“退出”时，这样做:”并继续输出一个新行和一个字符串“T2”。这在每次交互后输出到终端，这样我们的用户就不会对下一步做什么感到困惑。</p><p id="7966" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在设置了一个<code class="fe kl km kn ko b">gets</code>方法的输入之后，我需要设置人类交互的边界。我说“如果一个人的输入大于0但小于3 (1或2)，这样做:“(我使用这个特定的定义，因为任何更大数量的可用输入或文章都会给我的项目指南带来不必要的复杂性)。接下来，我将变量<code class="fe kl km kn ko b">the_story</code>设置为等于<code class="fe kl km kn ko b">@stories</code>实例方法，参数为“将给定输入转换为一个整数，减一”。这是因为在之前的<code class="fe kl km kn ko b">each.with_index(1)</code>迭代中，我将第一项设置为1而不是0。然后，该方法输出一个新行、一个制表符，然后是用户以与列表相同的格式选择的文章。然后，它输出另一个新行和另一个选项卡，接着是基于文章的主题或描述(一些文章有概括的主题，而一些文章有一些文章的摘录行)。</p><p id="062f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来的几行是另一个条件语句，内容是“如果选择的文章有一个URL，就这样做”。这个块是应用中<code class="fe kl km kn ko b">nokogiri</code>和<code class="fe kl km kn ko b">open-uri</code>的第一个例子。在这个程序块中，我设置了一个本地变量<code class="fe kl km kn ko b">doc</code>等于所选故事的<code class="fe kl km kn ko b">URL</code>。然后，我将变量<code class="fe kl km kn ko b">story</code>设置为包含实际文章的网页中文本的位置。然后，该块输出一个新行<code class="fe kl km kn ko b">story</code>，另一个新行，以及文章<code class="fe kl km kn ko b">URL</code>。在这个条件中，我设置了一个默认的响应，如果没有故事<code class="fe kl km kn ko b">URL</code>出现，它将输出ESPN NCAA男篮主页的URL。在这之后，我有几个<code class="fe kl km kn ko b">elsif</code>语句和最后一个else语句。第一个<code class="fe kl km kn ko b">elsif</code>语句说“如果input等于‘list’，再次调用方法<code class="fe kl km kn ko b">list_stories</code>”。这再次显示了故事列表。第二个<code class="fe kl km kn ko b">elsif</code>语句说“如果input等于‘exit ’,调用方法<code class="fe kl km kn ko b">goodbye</code>”,我将马上定义它。最后，我们的<code class="fe kl km kn ko b">menu</code>方法有一个简单的<code class="fe kl km kn ko b">else</code>语句，如果给定的输入不属于我们的某个集合定义，它会输出“<code class="fe kl km kn ko b">Sorry, I’m not sure what you are asking.</code>”。</p><p id="1b50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在<code class="fe kl km kn ko b">::CLI</code>类中的最后一个方法是一个单行的<code class="fe kl km kn ko b">goodbye</code>方法，它为已经完成应用程序的用户输出告别消息。我现在已经构建了整个CLI，但是没有它的兄弟类<code class="fe kl km kn ko b">TopNewsD1::Stories</code>，这些都是无用的文本。</p><h2 id="ce66" class="lo lp iq bd lq lr ls dn lt lu lv dp lw jy lx ly lz kc ma mb mc kg md me mf mg bi translated">第四步——制造铲运机</h2><p id="5ed1" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">我的刮刀，<code class="fe kl km kn ko b">TopNewsD1::Stories</code>，包含了链条的最后环节。首先，我需要设置属性，以及我将为这些属性抓取的网页。</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi ms"><img src="../Images/6dc689f34a3a91776960f507005a1ee1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sg4WPpJBwZ5BzCm3EUyqhg.png"/></div></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">attr_accessor和doc实例变量</figcaption></figure><p id="d56a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如前所述，我需要一个<code class="fe kl km kn ko b">title</code>、一个<code class="fe kl km kn ko b">author</code>、一个<code class="fe kl km kn ko b">description</code>或<code class="fe kl km kn ko b">topic</code>、一个<code class="fe kl km kn ko b">timestamp</code>和一个<code class="fe kl km kn ko b">URL</code>。我用<code class="fe kl km kn ko b">attr_accessors</code>设置了这些属性。接下来我使用<code class="fe kl km kn ko b">nokogiri</code>和<code class="fe kl km kn ko b">open-uri</code>将实例变量<code class="fe kl km kn ko b">@doc</code>设置为ESPN的NCAA男篮主页。</p><p id="e1a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后，我定义了我在<code class="fe kl km kn ko b">::CLI</code>类中调用的<code class="fe kl km kn ko b">today</code>方法。这个方法调用另一个方法<code class="fe kl km kn ko b">self.scrape_stories</code>。<code class="fe kl km kn ko b">self.scrape_stories</code>方法将<code class="fe kl km kn ko b">stories</code>设置为一个将被推送的空数组，然后将我将抓取的故事推送到这个数组中。最后，该方法返回已填充的数组。</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi mt"><img src="../Images/7a54b9618f9e7ad6ec6aa32d641a5d95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jk4B19ZsrblqySl71hee0A.png"/></div></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">刮刀和调用刮刀</figcaption></figure><p id="3b38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kl km kn ko b">::Stories</code>类中的最后两个方法是实际的抓取方法，它们使用<code class="fe kl km kn ko b">nokogiri</code>、<code class="fe kl km kn ko b">open-uri</code>和实例变量<code class="fe kl km kn ko b">@doc</code>从网页中抓取属性。</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi mu"><img src="../Images/9f6fe0f977ffaf5859db1b0483f306f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1u1zkKYBAJLN7Xy00Mqfrg.png"/></div></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">HTML元素抓取</figcaption></figure><p id="3a04" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些方法首先将变量<code class="fe kl km kn ko b">story</code>设置为<code class="fe kl km kn ko b">::Stories</code>的新实例，然后将每个属性设置为它们在网页中的HTML位置。因为这些属性中有些总是存在，有些则不存在，所以已经为其中一些属性设置了默认输出。您还会注意到<code class="fe kl km kn ko b">_headline</code>有一个<code class="fe kl km kn ko b">description</code>属性，而<code class="fe kl km kn ko b">_story_one</code>有一个<code class="fe kl km kn ko b">topic</code>属性。这是因为网站的标题总是有一个简短的<code class="fe kl km kn ko b">description</code>，第一个列出的故事有一个概括的<code class="fe kl km kn ko b">topic</code>。</p><h2 id="5ac2" class="lo lp iq bd lq lr ls dn lt lu lv dp lw jy lx ly lz kc ma mb mc kg md me mf mg bi translated">工作Gem示例</h2><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi mv"><img src="../Images/4361e880896b7f7044491f248de24817.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wN2iLQ9eyIra6kb3FP21wA.png"/></div></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">列表和菜单</figcaption></figure><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi mw"><img src="../Images/754be5458dc1a66200f231fb6befdca5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-3FYp8z72ORbEOzKLA78FA.png"/></div></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">输入和输出</figcaption></figure><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi mx"><img src="../Images/bce012406849c2ab80ed42e3a5e42696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jHx-83YYpQ5cShps1RJJ_A.png"/></div></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">再次请求列表</figcaption></figure><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi mw"><img src="../Images/5f8fe3655327a368a6d896922cadcfe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*egeZK-P8ZOCgJ_qTVJV_sw.png"/></div></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">第二层输出</figcaption></figure><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi my"><img src="../Images/0f73f778dc7bb31ead482eedb883ab63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-jBK4ffasI8BCmc3l0wLbQ.png"/></div></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">无法识别的输出</figcaption></figure><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi mz"><img src="../Images/c20e144e876f394cd02d46431cde8d48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mbvvVyMMNBL41oHNxldrrQ.png"/></div></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">告别信息</figcaption></figure><p id="7ead" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mo">图中的代码截至2020年3月14日准确无误。</em></p><p id="19ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mo">如果你想看我的更新作品，可以查看我的</em> <a class="ae ln" href="https://github.com/jackismoe/TopNewsD1" rel="noopener ugc nofollow" target="_blank"> <em class="mo">资源库</em> </a> <em class="mo">。</em></p><h1 id="3ce8" class="na lp iq bd lq nb nc nd lt ne nf ng lw nh ni nj lz nk nl nm mc nn no np mf nq bi translated">结论和经验</h1><p id="4ea8" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">在我在熨斗的经历中，迄今为止我经历了一些起起落落。从完成一个特别难的实验室(井字游戏，我看着你呢……)后感觉自己站在世界之巅，到被堵了几个小时(又一次井字游戏)后对自己失去所有希望。也就是说，我总是从中学习，带着雄心和专注前进。然而我的问题是，这些实验室没有一个真正让我觉得自己是一个真正的程序员；我真的建造了一些东西。我感觉我的手被握住了，我被指引着完成我需要做的任何事情。这在过去是必要的，现在也是必要的，但我仍然渴望得到更多。这个宝石项目就是这样。相当于一只鸟妈妈把她的宝宝推出巢外，说“飞”，在我的编程生涯中，我真的从来没有像这个项目对我这样的挑战。我感觉自己像是软件工程社区的一名真正的成员…尽管是一名非常不成熟和没有经验的成员，但仍然是一名成员。除了我在这篇文章中所能描述的，这个项目还涉及到更多的东西。作为我的最低可行产品，实际上是我的第三份gem草案，在一个对我的能力来说过于雄心勃勃的范围后，两个前评估者被取消了，但每次我都从零开始，从失败中吸取教训，不断成长，最终将它变成了成功。回顾建立这个gem项目的过程，我对解决项目和在未来做有意义的工作充满信心，并希望有一天很快回到我废弃的项目并把它们视为基础。</p></div></div>    
</body>
</html>