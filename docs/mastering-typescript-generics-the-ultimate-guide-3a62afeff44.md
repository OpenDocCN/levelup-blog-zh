# æŒæ¡ç±»å‹è„šæœ¬æ³›å‹:æœ€ç»ˆæŒ‡å—

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/mastering-typescript-generics-the-ultimate-guide-3a62afeff44>

![](img/8a0378f23c3abd8d9f6046e59ec97738.png)

# ç›®å½•

*   æ— å•†æ ‡æ¶ˆè´¹å“
*   ä½¿ç”¨é€šç”¨å‡½æ•°
*   é€šç”¨çº¦æŸ
*   ä½¿ç”¨å¤šä¸ªæ³›å‹
*   é€šç”¨æ¥å£
*   é€šç”¨ç±»
*   é€šç”¨å®ç”¨ç¨‹åºç±»å‹

# æ— å•†æ ‡æ¶ˆè´¹å“

æ³›å‹å…è®¸å‡½æ•°å’Œå…¶ä»–ç±»å‹å¤„ç†å¤šç§ç±»å‹ï¼ŒåŒæ—¶ä»ç„¶ç¡®ä¿ç±»å‹å®‰å…¨ï¼Œæ”¯æŒé‡ç”¨ã€‚å®ƒä»¬é€šå¸¸ç”¨äºå‡½æ•°ã€æ¥å£å’Œç±»ä¸­ã€‚åœ¨æˆ‘ä»¬çš„æ—¥å¸¸å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šåˆ›å»ºä¸€äº›å‡½æ•°ï¼Œè¿™äº›å‡½æ•°æ¥å—æŸç§ç±»å‹çš„æ•°æ®å¹¶è¿”å›ç›¸åŒç±»å‹çš„æ•°æ®ï¼Œè¿™æ„å‘³ç€å‚æ•°å’Œè¿”å›ç±»å‹æ˜¯ç›¸åŒçš„ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
function identity<T>(arg: T): T {
  return arg;
}
```

åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå‡½æ•°â€œidentityâ€æ¥å—ä¸€ä¸ª T ç±»å‹çš„å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª T ç±»å‹çš„å€¼ã€‚T ç±»å‹æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œåœ¨è°ƒç”¨è¯¥å‡½æ•°æ—¶å°†è¢«æ›¿æ¢ä¸ºç‰¹å®šçš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨å‚æ•°â€œhelloâ€è°ƒç”¨å‡½æ•°ï¼Œç±»å‹ T å°†è¢«æ›¿æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œå‡½æ•°å°†è¿”å›å­—ç¬¦ä¸²ç±»å‹çš„å€¼ã€‚

ä»¥å‰ï¼Œä¸ºäº†å…è®¸å‡½æ•°æ¥å—ä»»ä½•ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†å‚æ•°ç±»å‹æ›´æ”¹ä¸ºâ€œanyâ€ã€‚ä½†æ˜¯ï¼Œè¿™å°†å¤±å» TypeScript æä¾›çš„ç±»å‹å®‰å…¨æ€§ï¼Œä½¿å‡½æ•°å˜å¾—ä¸å®‰å…¨ã€‚æ³›å‹å…è®¸æˆ‘ä»¬ä¿æŒç±»å‹å®‰å…¨ï¼ŒåŒæ—¶ä»ç„¶ä½¿å‡½æ•°èƒ½å¤Ÿå¤„ç†å¤šç§ä¸åŒçš„ç±»å‹ï¼Œæä¾›äº†çµæ´»æ€§å’Œé‡ç”¨æ€§ã€‚

## ä½¿ç”¨é€šç”¨å‡½æ•°

ä¸ºäº†åˆ›å»ºä¸€ä¸ªé€šç”¨å‡½æ•°ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°ååé¢æ·»åŠ äº†<>(å°–æ‹¬å·)ï¼Œå¹¶åœ¨æ‹¬å·å†…åŒ…å«äº†ä¸€ä¸ªç±»å‹å˜é‡ã€‚ä¾‹å¦‚:

```
function identity<T>(arg: T): T {
  return arg;
}
```

æ³¨æ„ï¼Œæ³›å‹å‡½æ•°çš„ç±»å‹å˜é‡å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„å˜é‡åï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸Šé¢ä¾‹å­ä¸­çš„â€œTâ€ã€‚

è¦è°ƒç”¨é€šç”¨å‡½æ•°ï¼Œæˆ‘ä»¬åœ¨å°–æ‹¬å·ä¸­æŒ‡å®šç±»å‹å‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
let output = identity<string>("hello");  // type of output is 'string'
```

æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»å‹æ¨æ–­æ¥è‡ªåŠ¨ç¡®å®šç±»å‹å‚æ•°:

```
let output = identity("hello");  // type of output is also 'string'
```

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒTypeScript å°†æ ¹æ®ä¼ é€’ç»™è¯¥å‡½æ•°çš„å‚æ•°ç±»å‹æ¨æ–­è¯¥å‡½æ•°çš„ç±»å‹å‚æ•°æ˜¯â€œstringâ€ã€‚

ä¸ºäº†è°ƒç”¨é€šç”¨å‡½æ•°ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨å‡½æ•°æ—¶åœ¨å°–æ‹¬å·ä¸­æŒ‡å®šç±»å‹å‚æ•°:

```
let output = identity<string>("hello");  // type of output is 'string'
```

æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»å‹æ¨æ–­æ¥è‡ªåŠ¨ç¡®å®šç±»å‹å‚æ•°:

```
let output = identity("hello");  // type of output is also 'string'
```

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒTypeScript å°†æ ¹æ®ä¼ é€’ç»™è¯¥å‡½æ•°çš„å‚æ•°ç±»å‹æ¨æ–­è¯¥å‡½æ•°çš„ç±»å‹å‚æ•°æ˜¯â€œstringâ€ã€‚

ä¾‹å¦‚:

```
function identity<T>(arg: T): T {
  return arg;
}
let output = identity<string>("hello");  // type of output is 'string'
```

å½“è°ƒç”¨æ³›å‹å‡½æ•°æ—¶ï¼Œä¹Ÿå¯ä»¥çœç•¥ç±»å‹å‚æ•°<type>ï¼Œå› ä¸º TypeScript åŒ…å«ä¸€ä¸ªç§°ä¸ºâ€œç±»å‹å‚æ•°æ¨æ–­â€çš„æœºåˆ¶ï¼Œå®ƒå¯ä»¥æ ¹æ®ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ç±»å‹è‡ªåŠ¨æ¨æ–­ç±»å‹å˜é‡çš„ç±»å‹ã€‚è¿™å¯ä»¥ä½¿ä»£ç æ›´çŸ­ï¼Œæ›´å®¹æ˜“é˜…è¯»ã€‚</type>

ä¾‹å¦‚:

```
function identity<T>(arg: T): T {
  return arg;
}
let output = identity("hello");  // type of output is inferred as 'string'
```

è¯·æ³¨æ„ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæœ‰å¿…è¦æ˜¾å¼æŒ‡å®šç±»å‹å‚æ•°ï¼Œä¾‹å¦‚å½“ç¼–è¯‘å™¨æ— æ³•æ¨æ–­ç±»å‹æˆ–æ¨æ–­çš„ç±»å‹ä¸å‡†ç¡®æ—¶ã€‚

# é€šç”¨çº¦æŸ

é»˜è®¤æƒ…å†µä¸‹ï¼Œæ³›å‹å‡½æ•°çš„ç±»å‹å˜é‡å¯ä»¥è¡¨ç¤ºå¤šç§ç±»å‹ï¼Œè¿™æ„å‘³ç€ä¸å¯èƒ½è®¿é—®ä»»ä½•å±æ€§ã€‚ä¾‹å¦‚ï¼Œè¯•å›¾ä½¿ç”¨æ³›å‹æ¥è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ä¼šå¯¼è‡´é”™è¯¯ï¼Œå› ä¸ºæ³›å‹è¡¨ç¤ºä»»ä½•ç±»å‹ï¼Œå¹¶ä¸”ä¸èƒ½ä¿è¯ç‰¹å®šå±æ€§çš„å­˜åœ¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å‘æ³›å‹æ·»åŠ ä¸€ä¸ªçº¦æŸï¼Œä»¥ç¼©å°å¯èƒ½ç±»å‹çš„èŒƒå›´ã€‚

æ·»åŠ é€šç”¨çº¦æŸæœ‰ä¸¤ç§ä¸»è¦æ–¹æ³•:

*   æŒ‡å®šæ›´å…·ä½“çš„ç±»å‹:æ‚¨å¯ä»¥å°†é€šç”¨å‡½æ•°çš„ç±»å‹ä¿®æ”¹ä¸ºæ›´å…·ä½“çš„ç±»å‹ï¼Œä»¥ä¾¿è®¿é—®å…¶å±æ€§ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
function identity<T extends string | number>(arg: T): T {
  console.log(arg.length);  // okay to access 'length' property
  return arg;
}
let output = identity("hello");  // type of output is 'string'
```

åœ¨æœ¬ä¾‹ä¸­ï¼Œç±»å‹å˜é‡ T è¢«çº¦æŸä¸ºè”åˆç±»å‹â€œstring | numberâ€ï¼Œè¿™æ„å‘³ç€å®ƒåªèƒ½æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—ã€‚è¿™å…è®¸æˆ‘ä»¬è®¿é—®å‚æ•°çš„â€œé•¿åº¦â€å±æ€§ï¼Œå› ä¸ºå­—ç¬¦ä¸²å’Œæ•°å­—éƒ½æœ‰è¿™ä¸ªå±æ€§ã€‚

*   ä½¿ç”¨ç±»å‹å‚æ•°ä½œä¸ºçº¦æŸ:ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»å‹å‚æ•°ä½œä¸ºçº¦æŸï¼Œæ–¹æ³•æ˜¯ç”¨â€œextendsâ€å…³é”®å­—æ‰©å±•å®ƒï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
function getProperty<T, K extends keyof T>(obj: T, key: K) {
  return obj[key];
}
let x = { a: 1, b: 2, c: 3, d: 4 };
getProperty(x, "a");  // okay
getProperty(x, "m");  // error: Argument of type 'm' isn't assignable to 'a' | 'b' | 'c' | 'd'.
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œç±»å‹å‚æ•° K è¢«çº¦æŸä¸º t ç±»å‹çš„é”®ã€‚è¿™å…è®¸æˆ‘ä»¬ä½¿ç”¨ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’çš„é”®æ¥è®¿é—®ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’çš„å¯¹è±¡çš„å±æ€§ã€‚

æ·»åŠ çº¦æŸ:æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæè¿°çº¦æŸå¹¶æä¾›æ‰€éœ€å±æ€§çš„æ¥å£ï¼Œç„¶åä½¿ç”¨â€œextendsâ€å…³é”®å­—å°†çº¦æŸæ·»åŠ åˆ°ç±»å‹å˜é‡:

```
interface Lengthwise {
  length: number;
}
function identity<T extends Lengthwise>(arg: T): T {
  console.log(arg.length);  // okay to access 'length' property
  return arg;
}
let output = identity({ length: 10, value: 3 });  // type of output is { length: number, value: number }
```

åœ¨æœ¬ä¾‹ä¸­ï¼Œç±»å‹å˜é‡ T è¢«çº¦æŸä¸ºå…·æœ‰ number ç±»å‹çš„â€œlengthâ€å±æ€§çš„ç±»å‹ã€‚è¿™å…è®¸æˆ‘ä»¬è®¿é—®å‚æ•°çš„â€œlengthâ€å±æ€§ï¼Œè¯¥å±æ€§çš„ç±»å‹ä¸º{ length: numberï¼Œvalue: number }ã€‚

# ä½¿ç”¨å¤šä¸ªæ³›å‹

åœ¨æ³›å‹ä¸­å¯ä»¥æœ‰å¤šä¸ªç±»å‹å˜é‡ï¼Œå¹¶ä¸”å¯ä»¥åŸºäºä¸€ä¸ªç±»å‹å˜é‡çº¦æŸå¦ä¸€ä¸ªç±»å‹å˜é‡(ä¾‹å¦‚ï¼Œå¯ä»¥åŸºäºç¬¬ä¸€ä¸ªç±»å‹å˜é‡çº¦æŸç¬¬äºŒä¸ªç±»å‹å˜é‡)ã€‚ä¾‹å¦‚:

```
function getProperty<T, K extends keyof T>(obj: T, key: K) {
  return obj[key];
}
let x = { a: 1, b: 2, c: 3, d: 4 };
getProperty(x, "a");  // returns 1
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå‡½æ•°â€œgetPropertyâ€æœ‰ä¸¤ä¸ªç±»å‹å˜é‡:T å’Œ Kã€‚ç±»å‹å˜é‡ T è¡¨ç¤ºä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’çš„å¯¹è±¡çš„ç±»å‹ï¼Œç±»å‹å˜é‡ K è¡¨ç¤ºä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’çš„é”®çš„ç±»å‹ã€‚ç±»å‹å˜é‡ K è¢«çº¦æŸä¸º T ç±»å‹çš„é”®ï¼Œè¿™æ„å‘³ç€å®ƒåªèƒ½æ˜¯ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’çš„å¯¹è±¡çš„æœ‰æ•ˆé”®çš„å­—ç¬¦ä¸²ã€‚è¿™å…è®¸æˆ‘ä»¬ä½¿ç”¨é”®æ¥è®¿é—®å¯¹è±¡çš„å±æ€§ã€‚

æ‚¨è¿˜å¯ä»¥ä½¿ç”¨å¤šä¸ªç±»å‹å˜é‡æ¥åˆ›å»ºæ›´å¤æ‚çš„ç±»å‹ã€‚ä¾‹å¦‚:

```
function createPair<T, U>(first: T, second: U): [T, U] {
  return [first, second];
}
let pair = createPair(1, "second");  // type of pair is [number, string]
```

åœ¨æœ¬ä¾‹ä¸­ï¼Œå‡½æ•°â€œcreatePairâ€æœ‰ä¸¤ä¸ªç±»å‹å˜é‡:T å’Œ Uã€‚è¯¥å‡½æ•°åˆ†åˆ«æ¥å— T å’Œ U ç±»å‹çš„ä¸¤ä¸ªå‚æ•°ï¼Œå¹¶è¿”å›å…·æœ‰ç›¸åŒç±»å‹çš„å…ƒç»„ã€‚å…ƒç»„çš„ç±»å‹æ˜¯[Tï¼ŒU]ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€å¯¹ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ çš„ç±»å‹æ˜¯ Tï¼Œç¬¬äºŒä¸ªå…ƒç´ çš„ç±»å‹æ˜¯ Uã€‚

# é€šç”¨æ¥å£

ä¸ºäº†åˆ›å»ºä¸€ä¸ªé€šç”¨æ¥å£ï¼Œæˆ‘ä»¬åœ¨æ¥å£ååé¢æ·»åŠ äº†ä¸€ä¸ªç±»å‹å˜é‡ã€‚æ¥å£ä¹Ÿå¯ä»¥å’Œæ³›å‹ä¸€èµ·ä½¿ç”¨ï¼Œä»¥å¢åŠ çµæ´»æ€§å’Œé‡ç”¨æ€§ã€‚

ä¾‹å¦‚:

```
interface Pair<T, U> {
  first: T;
  second: U;
}
let pair: Pair<number, string> = { first: 1, second: "second" };
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¥å£â€œpairâ€æœ‰ä¸¤ä¸ªç±»å‹å˜é‡:T å’Œ uã€‚å¯¹è±¡â€œPairâ€çš„ç±»å‹æ˜¯â€œPair <number string="">â€ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªå…·æœ‰ç±»å‹ number çš„â€œç¬¬ä¸€â€å±æ€§å’Œç±»å‹ string çš„â€œç¬¬äºŒâ€å±æ€§çš„å¯¹è±¡ã€‚</number>

è¿˜å¯ä»¥ä½¿ç”¨æ³›å‹æ¥å£ä¸ºå‡½æ•°åˆ›å»ºç±»å‹åˆ«å:

```
type Callback<T> = (arg: T) => void;
let callback: Callback<string> = (arg) => console.log(arg);
```

åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œç±»å‹åˆ«åâ€œcallbackâ€æœ‰ä¸€ä¸ªç±»å‹å˜é‡ tã€‚å˜é‡â€œCallbackâ€çš„ç±»å‹æ˜¯â€œCallback <string>â€ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªé‡‡ç”¨ç±»å‹ string çš„å•ä¸ªå‚æ•°ä¸”ä¸è¿”å›å€¼çš„å‡½æ•°ã€‚</string>

æ‚¨è¿˜å¯ä»¥ä½¿ç”¨é€šç”¨æ¥å£æ¥çº¦æŸå¯¹è±¡çš„å±æ€§ç±»å‹:

```
interface Dictionary<T> {
  [key: string]: T;
}
let dictionary: Dictionary<number> = { a: 1, b: 2, c: 3 };
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¥å£â€œdictionaryâ€åªæœ‰ä¸€ä¸ªç±»å‹å˜é‡ tã€‚å¯¹è±¡â€œDictionaryâ€çš„ç±»å‹æ˜¯â€œDictionary <number>â€ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªå…·æœ‰ number ç±»å‹å±æ€§çš„å¯¹è±¡ã€‚æ¥å£çš„ç´¢å¼•ç­¾åæŒ‡å®šå¯¹è±¡çš„é”®å¿…é¡»æ˜¯å­—ç¬¦ä¸²ã€‚è¿™å…è®¸æˆ‘ä»¬ä½¿ç”¨å­—ç¬¦ä¸²é”®æ¥è®¿é—®å¯¹è±¡çš„å±æ€§ã€‚</number>

# é€šç”¨ç±»

åƒæ³›å‹æ¥å£ä¸€æ ·ï¼Œç±»ä¹Ÿå¯ä»¥å’Œæ³›å‹ä¸€èµ·ä½¿ç”¨ã€‚

ä¸ºäº†åˆ›å»ºä¸€ä¸ªæ³›å‹ç±»ï¼Œæˆ‘ä»¬åœ¨ç±»ååæ·»åŠ ä¸€ä¸ªç±»å‹å˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
class Pair<T, U> {
  constructor(public first: T, public second: U) {}
}
let pair = new Pair<number, string>(1, "second");
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç±»â€œpairâ€æœ‰ä¸¤ä¸ªç±»å‹å˜é‡:T å’Œ uã€‚å¯¹è±¡â€œPairâ€çš„ç±»å‹æ˜¯â€œPair <number string="">ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªå…·æœ‰ç±»å‹ number çš„â€œç¬¬ä¸€â€å±æ€§å’Œç±»å‹ string çš„â€œç¬¬äºŒâ€å±æ€§çš„å¯¹è±¡ã€‚</number>

æ‚¨è¿˜å¯ä»¥ä½¿ç”¨æ³›å‹ç±»æ¥çº¦æŸå¯¹è±¡çš„å±æ€§ç±»å‹:

```
class Dictionary<T> {
  [key: string]: T;
}
let dictionary = new Dictionary<number>();
dictionary.a = 1;
dictionary.b = 2;
dictionary.c = 3;
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç±»â€œdictionaryâ€åªæœ‰ä¸€ä¸ªç±»å‹å˜é‡ tã€‚å¯¹è±¡â€œDictionaryâ€çš„ç±»å‹æ˜¯â€œDictionary <number>â€ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªå…·æœ‰ number ç±»å‹å±æ€§çš„å¯¹è±¡ã€‚ç±»çš„ç´¢å¼•ç­¾åæŒ‡å®šå¯¹è±¡çš„é”®å¿…é¡»æ˜¯å­—ç¬¦ä¸²ã€‚è¿™å…è®¸æˆ‘ä»¬ä½¿ç”¨å­—ç¬¦ä¸²é”®æ¥è®¿é—®å¯¹è±¡çš„å±æ€§ã€‚</number>

è¿˜å¯ä»¥ä½¿ç”¨æ³›å‹ç±»ä¸ºå‡½æ•°åˆ›å»ºç±»å‹åˆ«å:

```
type Callback<T> = new (arg: T) => void;
class MyClass<T> {
  public value: T;
  constructor(value: T) {
    this.value = value;
  }
}
let callback: Callback<string> = MyClass;
let instance = new callback("value");
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç±»å‹åˆ«åâ€œcallbackâ€æœ‰ä¸€ä¸ªç±»å‹å˜é‡ tã€‚å˜é‡â€œCallbackâ€çš„ç±»å‹æ˜¯â€œCallback <string>â€ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªé‡‡ç”¨ç±»å‹ string çš„å•ä¸ªå‚æ•°å¹¶ä¸”ä¸è¿”å›å€¼çš„ç±»ã€‚â€œMyClassâ€ç±»æœ‰ä¸€ä¸ªç±»å‹å˜é‡ T å’Œä¸€ä¸ªé‡‡ç”¨ T ç±»å‹å‚æ•°çš„æ„é€ å‡½æ•°ã€‚â€œinstanceâ€å˜é‡æ˜¯â€œMyClass <string>â€çš„å®ä¾‹ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªå…·æœ‰ string ç±»å‹çš„â€œvalueâ€å±æ€§çš„å¯¹è±¡ã€‚</string></string>

# é€šç”¨å®ç”¨ç¨‹åºç±»å‹

â€œPartial <t>â€å®ç”¨ç¨‹åºç±»å‹ç”¨äºæ„é€  T çš„æ‰€æœ‰å±æ€§éƒ½è®¾ç½®ä¸ºå¯é€‰çš„ç±»å‹ã€‚å½“æ‚¨å¸Œæœ›åˆ›å»ºä¸€ä¸ªåŸºäºç°æœ‰ç±»å‹çš„æ–°ç±»å‹ï¼Œä½†æŸäº›å±æ€§æ˜¯å¯é€‰çš„æ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚</t>

ä¾‹å¦‚:

```
interface Person {
  name: string;
  age: number;
  occupation: string;
}
type PartialPerson = Partial<Person>;
// type PartialPerson = { name?: string; age?: number; occupation?: string; }
let person: PartialPerson = {};
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¥å£â€œPersonâ€æœ‰ä¸‰ä¸ªå¿…éœ€çš„å±æ€§:â€œnameâ€ã€â€œageâ€å’Œâ€œoccupationâ€ã€‚â€œPartialPersonâ€ç±»å‹æ˜¯ä½¿ç”¨â€œPartial <t>â€å®ç”¨ç¨‹åºç±»å‹åˆ›å»ºçš„ï¼Œå®ƒå…·æœ‰ä¸â€œPersonâ€æ¥å£ç›¸åŒçš„å±æ€§ï¼Œä½†å®ƒä»¬éƒ½æ˜¯å¯é€‰çš„ã€‚â€œpersonâ€å˜é‡å±äºâ€œPartialPersonâ€ç±»å‹ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªå…·æœ‰å¯é€‰â€œå§“åâ€ã€â€œå¹´é¾„â€å’Œâ€œèŒä¸šâ€å±æ€§çš„å¯¹è±¡ã€‚</t>

æ‚¨è¿˜å¯ä»¥ä½¿ç”¨â€œPartial <t>â€å®ç”¨ç¨‹åºç±»å‹æ¥åˆ›å»ºä¸€ä¸ªç±»çš„éƒ¨åˆ†ç‰ˆæœ¬:</t>

```
class Person {
  constructor(public name: string, public age: number, public occupation: string) {}
}
type PartialPerson = Partial<Person>;
// type PartialPerson = { name?: string; age?: number; occupation?: string; }
let person = new PartialPerson();
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œâ€œPersonâ€ç±»æœ‰ä¸‰ä¸ªå¿…éœ€çš„å±æ€§:â€œå§“åâ€ã€â€œå¹´é¾„â€å’Œâ€œèŒä¸šâ€ã€‚â€œPartialPersonâ€ç±»å‹æ˜¯ä½¿ç”¨â€œPartial <t>â€å®ç”¨ç¨‹åºç±»å‹åˆ›å»ºçš„ï¼Œå®ƒå…·æœ‰ä¸â€œPersonâ€ç±»ç›¸åŒçš„å±æ€§ï¼Œä½†æ˜¯å®ƒä»¬éƒ½æ˜¯å¯é€‰çš„ã€‚â€œpersonâ€å˜é‡æ˜¯â€œPartialPersonâ€çš„å®ä¾‹ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªå…·æœ‰å¯é€‰â€œå§“åâ€ã€â€œå¹´é¾„â€å’Œâ€œèŒä¸šâ€å±æ€§çš„å¯¹è±¡ã€‚</t>

å…¶ä»–å®ç”¨ç¨‹åºç±»å‹åŒ…æ‹¬:

*   Readonly <t>:åˆ›å»ºä¸€ä¸ª T çš„æ‰€æœ‰å±æ€§éƒ½è®¾ç½®ä¸ºåªè¯»çš„ç±»å‹ã€‚</t>
*   æŒ‘é€‰<t k="">:é€šè¿‡ä» t ä¸­æŒ‘é€‰ä¸€ç»„å±æ€§ K æ¥åˆ›å»ºä¸€ä¸ªç±»å‹</t>
*   è®°å½•<k t="">:åˆ›å»ºä¸€ä¸ªå…·æœ‰ t ç±»å‹çš„ä¸€ç»„å±æ€§ K çš„ç±»å‹ã€‚</k>
*   Exclude <t u="">:é€šè¿‡ä» T ä¸­æ’é™¤é‚£äº›å¯èµ‹ç»™ u çš„ç±»å‹æ¥åˆ›å»ºä¸€ä¸ªç±»å‹ã€‚</t>
*   Extract <t u="">:é€šè¿‡ä» T ä¸­æå–é‚£äº›å¯èµ‹ç»™ u çš„ç±»å‹æ¥åˆ›å»ºä¸€ä¸ªç±»å‹ã€‚</t>
*   çœç•¥<t k="">:é€šè¿‡ä» t ä¸­çœç•¥ä¸€ç»„å±æ€§ K æ¥åˆ›å»ºä¸€ä¸ªç±»å‹ã€‚</t>

## åªè¯»

â€œReadonly <t>â€å®ç”¨ç¨‹åºç±»å‹ç”¨äºæ„é€  T çš„æ‰€æœ‰å±æ€§éƒ½è®¾ç½®ä¸ºåªè¯»çš„ç±»å‹ã€‚å½“æ‚¨å¸Œæœ›åˆ›å»ºåŸºäºç°æœ‰ç±»å‹çš„æ–°ç±»å‹ï¼Œä½†æ‰€æœ‰å±æ€§éƒ½ä¸ºåªè¯»æ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚</t>

ä¾‹å¦‚:

```
interface Person {
  name: string;
  age: number;
  occupation: string;
}
type ReadonlyPerson = Readonly<Person>;
// type ReadonlyPerson = { readonly name: string; readonly age: number; readonly occupation: string; }
let person: ReadonlyPerson = { name: "John", age: 30, occupation: "Developer" };
person.name = "Jane"; // error: cannot assign to 'name' because it is a read-only property
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç•Œé¢â€œPersonâ€æœ‰ä¸‰ä¸ªå±æ€§:â€œå§“åâ€ã€â€œå¹´é¾„â€å’Œâ€œèŒä¸šâ€ã€‚â€œReadonlyPersonâ€ç±»å‹æ˜¯ä½¿ç”¨â€œReadonly <t>â€å®ç”¨ç¨‹åºç±»å‹åˆ›å»ºçš„ï¼Œå®ƒå…·æœ‰ä¸â€œPersonâ€æ¥å£ç›¸åŒçš„å±æ€§ï¼Œä½†å®ƒä»¬éƒ½æ˜¯åªè¯»çš„ã€‚â€œpersonâ€å˜é‡å±äºâ€œReadonlyPersonâ€ç±»å‹ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªå…·æœ‰åªè¯»â€œå§“åâ€ã€â€œå¹´é¾„â€å’Œâ€œèŒä¸šâ€å±æ€§çš„å¯¹è±¡ã€‚</t>

æ‚¨è¿˜å¯ä»¥ä½¿ç”¨â€œReadonly <t>â€å®ç”¨ç¨‹åºç±»å‹æ¥åˆ›å»ºç±»çš„åªè¯»ç‰ˆæœ¬:</t>

```
class Person {
  constructor(public name: string, public age: number, public occupation: string) {}
}
type ReadonlyPerson = Readonly<Person>;
// type ReadonlyPerson = { readonly name: string; readonly age: number; readonly occupation: string; }
let person = new ReadonlyPerson("John", 30, "Developer");
person.name = "Jane"; // error: cannot assign to 'name' because it is a read-only property
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œâ€œPersonâ€ç±»æœ‰ä¸‰ä¸ªå±æ€§:â€œå§“åâ€ã€â€œå¹´é¾„â€å’Œâ€œèŒä¸šâ€ã€‚â€œReadonlyPersonâ€ç±»å‹æ˜¯ä½¿ç”¨â€œReadonly <t>â€å®ç”¨ç¨‹åºç±»å‹åˆ›å»ºçš„ï¼Œå®ƒå…·æœ‰ä¸â€œPersonâ€ç±»ç›¸åŒçš„å±æ€§ï¼Œä½†å®ƒä»¬éƒ½æ˜¯åªè¯»çš„ã€‚â€œpersonâ€å˜é‡æ˜¯â€œReadonlyPersonâ€çš„å®ä¾‹ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªå…·æœ‰åªè¯»â€œå§“åâ€ã€â€œå¹´é¾„â€å’Œâ€œèŒä¸šâ€å±æ€§çš„å¯¹è±¡ã€‚</t>

## é€‰æ‹©

â€œPick <t k="">â€å®ç”¨ç¨‹åºç±»å‹ç”¨äºé€šè¿‡ä» t ä¸­é€‰å–ä¸€ç»„å±æ€§ K æ¥åˆ›å»ºä¸€ä¸ªæ–°ç±»å‹ã€‚å½“æ‚¨æƒ³è¦åˆ›å»ºä¸€ä¸ªåŸºäºç°æœ‰ç±»å‹çš„æ–°ç±»å‹ï¼Œä½†åªæœ‰ä¸€ä¸ªå±æ€§å­é›†æ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚</t>

ä¾‹å¦‚:

```
interface Person {
  name: string;
  age: number;
  occupation: string;
}
type NameAge = Pick<Person, "name" | "age">;
// type NameAge = { name: string; age: number; }
let person: NameAge = { name: "John", age: 30 };
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç•Œé¢â€œPersonâ€æœ‰ä¸‰ä¸ªå±æ€§:â€œå§“åâ€ã€â€œå¹´é¾„â€å’Œâ€œèŒä¸šâ€ã€‚â€œNameAgeâ€ç±»å‹æ˜¯ä½¿ç”¨â€œPick <t k="">â€å®ç”¨ç¨‹åºç±»å‹åˆ›å»ºçš„ï¼Œå®ƒåªæœ‰æ¥è‡ªâ€œPersonâ€æ¥å£çš„â€œnameâ€å’Œâ€œAgeâ€å±æ€§ã€‚â€œpersonâ€å˜é‡å±äºâ€œNameAgeâ€ç±»å‹ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªå…·æœ‰â€œnameâ€å’Œâ€œAgeâ€å±æ€§çš„å¯¹è±¡ã€‚</t>

æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨â€œPick <t k="">â€å®ç”¨ç¨‹åºç±»å‹ä»ä¸€ä¸ªç±»ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»å‹:</t>

```
class Person {
  constructor(public name: string, public age: number, public occupation: string) {}
}
type NameAge = Pick<Person, "name" | "age">;
// type NameAge = { name: string; age: number; }
let person = new Person("John", 30, "Developer");
let nameAge: NameAge = { name: person.name, age: person.age };
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œâ€œPersonâ€ç±»æœ‰ä¸‰ä¸ªå±æ€§:â€œå§“åâ€ã€â€œå¹´é¾„â€å’Œâ€œèŒä¸šâ€ã€‚â€œNameAgeâ€ç±»å‹æ˜¯ä½¿ç”¨â€œPick <t k="">â€å®ç”¨ç¨‹åºç±»å‹åˆ›å»ºçš„ï¼Œå®ƒåªæœ‰æ¥è‡ªâ€œPersonâ€ç±»çš„â€œnameâ€å’Œâ€œAgeâ€å±æ€§ã€‚â€œpersonâ€å˜é‡æ˜¯â€œPersonâ€çš„å®ä¾‹ï¼Œâ€œnamAgeâ€å˜é‡æ˜¯â€œnamageâ€ç±»å‹ï¼Œè¿™æ„å‘³ç€â€œnamageâ€å˜é‡æ˜¯â€œnamageâ€ç±»å‹ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªå…·æœ‰â€œnameâ€å’Œâ€œageâ€å±æ€§çš„å¯¹è±¡ã€‚â€œnameAgeâ€å˜é‡æ˜¯é€šè¿‡ä»â€œpersonâ€å¯¹è±¡ä¸­æå–â€œnameâ€å’Œâ€œAgeâ€å±æ€§åˆ›å»ºçš„ï¼Œè¯¥å¯¹è±¡æ˜¯â€œPersonâ€ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚</t>

## è®°å½•

â€œRecord <k t="">â€å®ç”¨ç¨‹åºç±»å‹ç”¨äºåˆ›å»ºä¸€ä¸ªè¡¨ç¤ºé”® K å’Œå€¼ t çš„è®°å½•(å­—å…¸)çš„ç±»å‹ã€‚å½“æ‚¨æƒ³è¦åˆ›å»ºä¸€ä¸ªè¡¨ç¤ºå…·æœ‰ç‰¹å®šç±»å‹çš„ä¸€ç»„å›ºå®šé”®å’Œå€¼çš„å¯¹è±¡çš„ç±»å‹æ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚</k>

ä¾‹å¦‚:

```
type UserId = Record<"id", number>;
// type UserId = { id: number; }
let userId: UserId = { id: 123 };
```

åœ¨æœ¬ä¾‹ä¸­ï¼Œâ€œUserIdâ€ç±»å‹æ˜¯ä½¿ç”¨â€œRecord <k t="">â€å®ç”¨ç¨‹åºç±»å‹åˆ›å»ºçš„ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªå…·æœ‰â€œnumberâ€ç±»å‹çš„å•ä¸ªâ€œIdâ€å±æ€§çš„å¯¹è±¡ã€‚â€œUserIdâ€å˜é‡å±äºâ€œuserIdâ€ç±»å‹ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªå…·æœ‰â€œnumberâ€ç±»å‹çš„â€œIdâ€å±æ€§çš„å¯¹è±¡ã€‚</k>

æ‚¨è¿˜å¯ä»¥ä½¿ç”¨â€œRecord <k t="">â€å®ç”¨ç¨‹åºç±»å‹æ¥åˆ›å»ºä¸€ä¸ªè¡¨ç¤ºå…·æœ‰å¤šä¸ªé”®å’Œå€¼çš„å¯¹è±¡çš„ç±»å‹:</k>

```
type User = Record<"id" | "name" | "age", number | string>;
// type User = { id: number; name: string; age: number; }
let user: User = { id: 123, name: "John", age: 30 };
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­,â€œUserâ€ç±»å‹æ˜¯ä½¿ç”¨â€œRecord <k t="">â€å®ç”¨ç¨‹åºç±»å‹åˆ›å»ºçš„ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªå…·æœ‰ä¸‰ä¸ªå±æ€§çš„å¯¹è±¡:â€œnumberâ€ç±»å‹çš„â€œidâ€ã€â€œstringâ€ç±»å‹çš„â€œnameâ€å’Œâ€œnumberâ€ç±»å‹çš„â€œageâ€ã€‚â€œuserâ€å˜é‡å±äºâ€œUserâ€ç±»å‹ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªå…·æœ‰ç›¸åº”ç±»å‹çš„â€œidâ€ã€â€œnameâ€å’Œâ€œageâ€å±æ€§çš„å¯¹è±¡ã€‚</k>

## å»¶ä¼¸é˜…è¯»:

*   [TypeScript å¿…å¤‡åŸºç¡€çŸ¥è¯†â€”ç±»å‹åˆ«åå’Œæ¥å£](/typescript-must-know-fundamentals-for-your-next-tech-interview-or-project-255ae70df0a3)
*   [åƒä¸“ä¸šäººå£«ä¸€æ ·ä½¿ç”¨ Typescript keyofã€‘](/use-typescript-keyof-like-a-pro-56f3a3d06b73)
*   [æ‰“å­—ç¨¿ç±»â€”â€”ä»é›¶åˆ°è‹±é›„](/typescript-classes-from-zero-to-hero-a429a3c96189)
*   [ä½¿ç”¨ç±»å’Œè£…é¥°å™¨çš„ä¸‹ä¸€çº§ Typescript è¿è¡Œæ—¶ç±»å‹éªŒè¯](/next-level-your-typescript-runtime-type-validation-using-class-and-decorators-ddd2ce3c86f3)
*   [æ‰“å­—æŠ€å·§å’Œæç¤º:ç«‹å³æˆä¸ºä¸“ä¸šäººå£«](https://bootcamp.uxdesign.cc/typescript-tricks-and-tips-become-a-pro-in-no-time-5390aba151be)
*   [æ‰“å­—ç¨¿ä¸­çš„æ³›å‹â€”â€”åŸºç¡€çŸ¥è¯†è¢«æ„šè ¢åœ°ç®€åŒ–](/generics-in-typescript-must-know-fundamentals-stupidly-simplified-e7b4d7ffc0e3)
*   [Typescript é—æ¼äº†è¿™ä¸€ç‚¹ï¼Œä½†ä½ ä¸åº”è¯¥â€”è¿è¡Œæ—¶ç±»å‹éªŒè¯](/typescript-missed-this-but-you-shouldnt-runtime-type-validation-aa8a81ce4289)
*   [Typescript æšä¸¾é™·é˜±å’Œè§£å†³æ–¹æ¡ˆå¿…é¡»çŸ¥é“](/typescript-enum-pitfalls-and-solutions-must-know-bb971cb0f7d2)
*   [æŒæ¡ TypeScript æ³›å‹â€”ç»ˆææŒ‡å—â€”åŸºæœ¬æ¥å£æŠ€æœ¯](https://bootcamp.uxdesign.cc/mastering-typescript-generics-the-ultimate-guide-essential-interface-techniques-86e793cf1fc)
*   ã€Javascript å¼€å‘è€…ç»å¸¸å¿½ç•¥çš„ Typescript ç‰¹æ€§
*   [æŒæ¡ TypeScript ä¸­çš„äº¤é›†å’Œå¹¶é›†ç±»å‹:ç»ˆææŒ‡å—å’ŒåŸºæœ¬æŠ€å·§](/mastering-intersection-and-union-types-in-typescript-the-ultimate-guide-essential-techniques-49aa9f6a188a)

å¦‚æœä½ è§‰å¾—è¿™ä¸ªæŒ‡å—æœ‰å¸®åŠ©ï¼Œè¯·é¼“æŒå¹¶è·Ÿæˆ‘æ¥ã€‚é€šè¿‡[é“¾æ¥](https://medium.com/@caopengau/membership)åŠ å…¥ mediumï¼Œåœ¨ medium ä¸Šè®¿é—®æˆ‘å’Œæ‰€æœ‰å…¶ä»–ä¼˜ç§€ä½œå®¶çš„æ‰€æœ‰ä¼˜è´¨æ–‡ç« ã€‚

# åˆ†çº§ç¼–ç 

æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼åœ¨ä½ ç¦»å¼€ä¹‹å‰:

*   ğŸ‘ä¸ºæ•…äº‹é¼“æŒï¼Œè·Ÿç€ä½œè€…èµ°ğŸ‘‰
*   ğŸ“°æŸ¥çœ‹[å‡çº§ç¼–ç å‡ºç‰ˆç‰©](https://levelup.gitconnected.com/?utm_source=pub&utm_medium=post)ä¸­çš„æ›´å¤šå†…å®¹
*   ğŸ””å…³æ³¨æˆ‘ä»¬:[Twitter](https://twitter.com/gitconnected)|[LinkedIn](https://www.linkedin.com/company/gitconnected)|[æ—¶äº‹é€šè®¯](https://newsletter.levelup.dev)

ğŸš€ğŸ‘‰ [**åŠ å…¥å‡çº§äººæ‰é›†ä½“ï¼Œæ‰¾åˆ°ä¸€ä»½æƒŠè‰³çš„å·¥ä½œ**](https://jobs.levelup.dev/talent/welcome?referral=true)