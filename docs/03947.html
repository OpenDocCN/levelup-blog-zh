<html>
<head>
<title>Coding a Payment Holiday Calculator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写一个支付假期计算器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/coding-a-payment-holiday-calculator-75ad694e251d?source=collection_archive---------26-----------------------#2020-06-02">https://levelup.gitconnected.com/coding-a-payment-holiday-calculator-75ad694e251d?source=collection_archive---------26-----------------------#2020-06-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0808" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我更新了一个抵押贷款支付假期计算器。</h2></div><p id="6b45" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一些机构为人们提供了从抵押贷款中解脱出来的能力。</p><p id="df10" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用R和<em class="le">闪亮的</em>，我创造了<a class="ae lf" href="https://anthonybmasters.shinyapps.io/Mortgage-Payment-Holiday-Calculator/" rel="noopener ugc nofollow" target="_blank">一个抵押贷款支付假期计算器</a>。这篇文章是关于计算器的工作原理和代码。</p><h1 id="2d8b" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">开发计算器</h1><p id="bf9e" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">冠状病毒危机意味着一些人无法工作。反过来，这些人无法履行抵押贷款等义务。金融机构可能允许人们几个月内不支付抵押贷款。</p><p id="1c2b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">抵押付款假期不是利息假期。</strong></p><p id="2c70" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">抵押贷款累积利息，而抵押贷款是未付的。因此，当人们恢复还贷时，他们将有更高的抵押贷款偿还额。问题是:高出多少？</p><p id="c05e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是计算器回答的问题。</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi md"><img src="../Images/060cb7c3811ebaa6cfda2e73cc3284a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SBblAxAZOYTXySSUYu4Xog.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">对于默认的投入，还款差额是每月26。(图片:<a class="ae lf" href="https://anthonybmasters.shinyapps.io/Mortgage-Payment-Holiday-Calculator/" rel="noopener ugc nofollow" target="_blank">闪亮</a>)</figcaption></figure><p id="8c09" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最初的版本只显示了前四个价值箱:</p><ul class=""><li id="e900" class="mt mu it kk b kl km ko kp kr mv kv mw kz mx ld my mz na nb bi translated"><strong class="kk iu">月付前:</strong>支付假期前的月金额。</li><li id="a9ee" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated"><strong class="kk iu">月付后:</strong>节后每月还款。</li><li id="44b9" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated"><strong class="kk iu">月供差额:</strong>这两个数值之间的差额。</li><li id="0159" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated"><strong class="kk iu">支付利息总额的差异:</strong>支付假期产生的额外利息总额。这种计算假设相同的年利率通过抵押贷款。</li></ul><p id="b3d9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在一次更新中，我添加了一个图表和一个CSV表供用户下载。</p><h1 id="6483" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">应用规则</h1><p id="b706" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">计算器通过使用输入和创建完整的抵押贷款表来工作。该表包含每月还款金额、利息和剩余债务。</p><p id="01c3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为这是一个迭代计算，所以我使用了循环。如果没有支付期，我们使用标准公式计算每月还款:</p><pre class="me mf mg mh gt nh ni nj nk aw nl bi"><span id="5dc7" class="nm lh it ni b gy nn no l np nq">std_paym_A &lt;- round(df$debt[1]*(int_rate/12)/(1-(1+int_rate/12)^(-term_month)),2)</span><span id="9a88" class="nm lh it ni b gy nr no l np nq">std_paym_B &lt;- round(df$debt_holiday[hol_end]*(int_rate/12)/(1-(1+int_rate/12)^(-term_month+hol_end-1)),2)</span></pre><p id="6791" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于支付假期，我们可以使用用例。在这里，我们用代码表示支付假期的规则。</p><ul class=""><li id="56a5" class="mt mu it kk b kl km ko kp kr mv kv mw kz mx ld my mz na nb bi translated"><strong class="kk iu">赎回:</strong>如果房贷已经还清，则没有还款。</li></ul><pre class="me mf mg mh gt nh ni nj nk aw nl bi"><span id="6308" class="nm lh it ni b gy nn no l np nq">df$repayment_holiday[i] = dplyr::case_when(<br/>df$debt_holiday[i-1] &lt;= 0 ~ 0</span></pre><ul class=""><li id="8520" class="mt mu it kk b kl km ko kp kr mv kv mw kz mx ld my mz na nb bi translated"><strong class="kk iu">最终还款:</strong>如果还款高于剩余债务，则赎回。如果是最后一个月也是如此。</li></ul><pre class="me mf mg mh gt nh ni nj nk aw nl bi"><span id="428b" class="nm lh it ni b gy nn no l np nq">df$debt_holiday[i-1] + df$interest_holiday[i] &lt; df$repayment_holiday[i-1] ~ df$debt_holiday[i-1] + df$interest_holiday[i],</span><span id="bcdd" class="nm lh it ni b gy nr no l np nq">i == nrow(df) ~ df$debt_holiday[i-1] + df$interest_holiday[i]</span></pre><ul class=""><li id="77cc" class="mt mu it kk b kl km ko kp kr mv kv mw kz mx ld my mz na nb bi translated"><strong class="kk iu">节前:</strong>节前几个月，我们进行标准还款。</li></ul><pre class="me mf mg mh gt nh ni nj nk aw nl bi"><span id="7303" class="nm lh it ni b gy nn no l np nq">i &lt; hol_start ~ std_paym_A</span></pre><ul class=""><li id="c94b" class="mt mu it kk b kl km ko kp kr mv kv mw kz mx ld my mz na nb bi translated"><strong class="kk iu">放假期间:</strong>不还款。</li></ul><pre class="me mf mg mh gt nh ni nj nk aw nl bi"><span id="4d24" class="nm lh it ni b gy nn no l np nq">i &gt;= hol_start &amp; i &lt;= hol_end ~ 0</span></pre><ul class=""><li id="9f03" class="mt mu it kk b kl km ko kp kr mv kv mw kz mx ld my mz na nb bi translated">假期结束后，我们继续还款。偿还使用新的，更高的债务金额。</li></ul><pre class="me mf mg mh gt nh ni nj nk aw nl bi"><span id="6712" class="nm lh it ni b gy nn no l np nq">i &gt; hol_end ~ std_paym_B</span></pre><ul class=""><li id="1e0a" class="mt mu it kk b kl km ko kp kr mv kv mw kz mx ld my mz na nb bi translated"><strong class="kk iu">其他情况:</strong>对于任何其他情况，我们进行起始还款。“case when”功能按顺序检查每个条件。这种情况不是为了使用，而是作为一种意外情况存在。</li></ul><pre class="me mf mg mh gt nh ni nj nk aw nl bi"><span id="b378" class="nm lh it ni b gy nn no l np nq">TRUE ~ std_paym_A)</span></pre><h1 id="73f7" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">反应值</h1><p id="1b86" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">对于<a class="ae lf" href="https://rstudio.github.io/shinydashboard/get_started.html" rel="noopener ugc nofollow" target="_blank">闪亮的应用</a>，UI(用户界面)和服务器文件一起工作。</p><p id="2346" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对我来说，一个认识是:</p><p id="5ed4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">反应值是没有参数的函数。</strong></p><p id="8401" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">服务器文件接受输入并生成一个反应数据表。这个数据表包含所有需要的每月抵押贷款信息。</p><pre class="me mf mg mh gt nh ni nj nk aw nl bi"><span id="d8fe" class="nm lh it ni b gy nn no l np nq">mortgage_table &lt;- eventReactive(input$calculate,<br/>{mortgage_holiday(<br/>input$loan_value,<br/>input$term_month,<br/>input$interest_rate_pc/100,<br/>input$holiday_start,<br/>input$holiday_period)}, ignoreNULL = FALSE)</span></pre><p id="cc11" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们再次访问抵押表时，它是一个函数。</p><pre class="me mf mg mh gt nh ni nj nk aw nl bi"><span id="a581" class="nm lh it ni b gy nn no l np nq">paym_before &lt;- reactive({mortgage_table()$repayment_holiday[2]})</span></pre><p id="c49c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">计算器本身需要更好的输入验证。可能有一种更有效的方法来编写计算器，但它很适合这个目的。</p></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><p id="5797" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该计算器的代码是GitHub 上提供的<a class="ae lf" href="https://github.com/anthonybmasters/rstudio-cloud/tree/master/Mortgage%20Payment%20Holiday%20Calculator" rel="noopener ugc nofollow" target="_blank">。这个计算器可供人们免费使用。</a></p></div></div>    
</body>
</html>