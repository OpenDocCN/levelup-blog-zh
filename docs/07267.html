<html>
<head>
<title>Fixing Debezium Connectors when they break on production.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">当Debezium连接器在生产中出现故障时进行修复。</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/fixing-debezium-connectors-when-they-break-on-production-49fb52d6ac4e?source=collection_archive---------2-----------------------#2021-02-05">https://levelup.gitconnected.com/fixing-debezium-connectors-when-they-break-on-production-49fb52d6ac4e?source=collection_archive---------2-----------------------#2021-02-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/15e4dc2487e8cf952b181beab0d1e9f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/0*fBdWf_7MoEQHxMfU"/></div></figure><p id="4ace" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Debezium是一项了不起的技术。在遵循了<a class="ae ks" href="https://debezium.io/documentation/reference/install.html" rel="noopener ugc nofollow" target="_blank">基本指南</a>之后，你可以很容易地启动一个Debezium连接器，你瞧，<strong class="jw ir">你有事件了！</strong></p><p id="7bd5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然而，当最初的快乐路径配置周围的环境发生变化时，问题就开始出现了，这就破坏了您的连接器和下游消费者。</p><p id="a64f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这里我们就来看以下几个问题。</p><ul class=""><li id="29d6" class="kt ku iq jw b jx jy kb kc kf kv kj kw kn kx kr ky kz la lb bi translated">数据库binlog翻转，我们不同步。</li><li id="a0d0" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">整个数据库主机随着它的binlog一起改变，</li><li id="58fb" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">你因为某些原因输掉了比赛。</li><li id="0055" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">您希望在现有的连接器中捕获一个新的巨大的表</li><li id="4748" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">您引入了突然的模式更改，但它们并不同步。</li></ul><p id="8497" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当然，创建一个新的连接器也是可行的，但是我们的想法是<strong class="jw ir">对连接器配置</strong>发布一个最小侵入性的更新，以便让它起死回生。在脚本、度量注册表等中，可以通过连接器的名称来监控连接器。当刀可以完成工作时，你可能不想用剑。</p><p id="face" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在这篇文章中，我试图揭穿一些。我们还将看到Debezium与内部Kafka Connect主题的交互。</p><p id="a4b4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">和往常一样，请参考官方的Debezium文档了解更多信息。</p></div><div class="ab cl li lj hu lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="ij ik il im in"><h1 id="3f88" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">问题一:滚过的圆木</h1><p id="3651" class="pw-post-body-paragraph ju jv iq jw b jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ij bi translated">如果连接器任务死了足够长的时间，以至于Debezium在内部Kafka Connect的<a class="ae ks" href="https://docs.confluent.io/home/connect/userguide.html#kconnect-internal-topics" rel="noopener ugc nofollow" target="_blank"><em class="lh">offset . storage . topic</em></a>中存储的偏移量(binlog位置)不再存在，那么连接器<strong class="jw ir">无法</strong>恢复。</p><p id="ee92" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">您可以尝试使用不同的名称重新创建连接器，重新启动任务，更改服务器id，但是如果偏移消失，将无法恢复。</p><h2 id="43e3" class="ms lq iq bd lr mt mu dn lv mv mw dp lz kf mx my md kj mz na mh kn nb nc ml nd bi translated"><a class="ae ks" href="#" rel="noopener ugc nofollow"> <strong class="ak">搞定:</strong> </a></h2><ul class=""><li id="e014" class="kt ku iq jw b jx mn kb mo kf ne kj nf kn ng kr ky kz la lb bi translated">您需要告诉连接器重新创建快照。</li><li id="403c" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">使用<strong class="jw ir"> <em class="lh"> snapshot.mode=initial。</em>T25】</strong></li><li id="537c" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">如果您知道您的连接器关闭了多长时间，您可以在繁重的表上发出<strong class="jw ir"><em class="lh">snapshot . select . overrides</em></strong>，这样您就不会对所有行进行快照。<em class="lh">只有当你的表有时间戳列时才这样做(见问题四)</em></li><li id="6f48" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">开始跟踪<em class="lh">offset . storage . topic</em><strong class="jw ir"/>作为一个Kafka控制台消费者来查看动作。</li><li id="66e9" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">发布连接器更新。</li></ul><figure class="nh ni nj nk gt jr"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">跟踪T1、T2和T3的连接器将恢复所有T2和T3，仅覆盖T1的一小部分</figcaption></figure><ul class=""><li id="bc4f" class="kt ku iq jw b jx jy kb kc kf kv kj kw kn kx kr ky kz la lb bi translated">在<em class="lh"> offset.storage.topic </em>中，您将看到连接器试图获取初始快照，然后提交定期更新。</li></ul><figure class="nh ni nj nk gt jr"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">自从131年&lt; last offset stored in database = 143. All is restored now.</figcaption></figure></div><div class="ab cl li lj hu lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="ij ik il im in"><h1 id="94d3" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">Problem II: Database Host changes</h1><p id="1b4b" class="pw-post-body-paragraph ju jv iq jw b jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ij bi translated">If your database is migrated to a different host, you’d need to update the connector. However, the binlog file will naturally change.</p><p id="7c2a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">As such, any existing connector, which was reading from the old bin-log will suddenly not find the file on the new server. It will <strong class="jw ir">惨死</strong>后，我们就失去了补偿的踪迹。</p><figure class="nh ni nj nk gt jr"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">连接器已失效，因为二进制日志已不在服务器上</figcaption></figure><h2 id="e8de" class="ms lq iq bd lr mt mu dn lv mv mw dp lz kf mx my md kj mz na mh kn nb nc ml nd bi translated"><a class="ae ks" href="#" rel="noopener ugc nofollow"> <strong class="ak">搞定:</strong> </a></h2><ul class=""><li id="1055" class="kt ku iq jw b jx mn kb mo kf ne kj nf kn ng kr ky kz la lb bi translated">按照错误消息所说的去做。通过指向新主机来更新连接器配置。同样设置一个新的<em class="lh">服务器id </em>。</li><li id="042a" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">设置<strong class="jw ir"><em class="lh">snapshot . mode = when _ need</em></strong>。确保复制用户存在于新主机上，并且具有必要的权限。</li><li id="bccb" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">将创建一个新的快照。使用<strong class="jw ir">snapshot . select . overrides</strong>避免重新处理大量事件。</li><li id="4333" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">跟踪<em class="lh">状态.存储.主题</em>。连接器应该从<em class="lh">未分配</em>移动到<em class="lh">运行</em>。</li></ul><figure class="nh ni nj nk gt jr"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">我们的连接器现在已经进入运行状态。</figcaption></figure><ul class=""><li id="46eb" class="kt ku iq jw b jx jy kb kc kf kv kj kw kn kx kr ky kz la lb bi translated">如果您跟踪<em class="lh"> offsets.storage.topic </em>，您会看到binlog被切换到这个连接器的新主机。</li></ul><figure class="nh ni nj nk gt jr"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">注意到主机文件的变化了吗？事件应该在快照后开始流式传输。</figcaption></figure></div><div class="ab cl li lj hu lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="ij ik il im in"><h1 id="ee48" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">问题三:丢失的事件</h1><p id="9e5d" class="pw-post-body-paragraph ju jv iq jw b jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ij bi translated">这与其说是Debezium的问题，不如说是应用程序的问题。尽管Debezium经过了实战测试，很少错过事件，但事件有时会因为一些原因而被跳过<em class="lh">(应用程序中的代码错误，Debezium本身的边缘情况)。</em></p><p id="11af" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">根据关键程度的不同，丢失的事件可能是灾难性的和不可接受的。但是，如果您的消费者是幂等的，我们可以解决这个问题。</p><figure class="nh ni nj nk gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi nr"><img src="../Images/dd266b3c65d4809fd7a74cef648eca3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3kh1XkKKQyK-Cz_K4fxI6A.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">Debezium连接器的理想状态。度量是必须的。</figcaption></figure><h2 id="51d5" class="ms lq iq bd lr mt mu dn lv mv mw dp lz kf mx my md kj mz na mh kn nb nc ml nd bi translated"><a class="ae ks" href="#" rel="noopener ugc nofollow"> <strong class="ak">搞定</strong> </a></h2><ul class=""><li id="4094" class="kt ku iq jw b jx mn kb mo kf ne kj nf kn ng kr ky kz la lb bi translated">如果您丢失了事件，请检查偏移是否也已在媒体夹日志中翻转。在这种情况下，您通常需要知道您开始丢失事件的时间，否则您可能会拍摄更大的粒度更小的快照。</li></ul><figure class="nh ni nj nk gt jr"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">检查最旧的二进制日志的偏移量。</figcaption></figure><ul class=""><li id="c771" class="kt ku iq jw b jx jy kb kc kf kv kj kw kn kx kr ky kz la lb bi translated">如果<strong class="jw ir">不</strong>，那么，恭喜你，我们处于一个良好的状态，因为我们可以重放事件。我们需要暂停相关的Debezium连接器，重置它的偏移量并重新启动它。如果<strong class="jw ir">是</strong>，那么我们又回到问题1。我们解决了这个问题。</li><li id="6058" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">停止连接器。请注意它的配置，以便我们再次创建完全相同的连接器。</li><li id="1169" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">手动重置Kafka偏移。只有当你知道自己在做什么的时候，才这样做。 Below命令为给定键写一个<strong class="jw ir"> NULL </strong>消息，该消息在逻辑上被转换为删除给定连接器的存储偏移。</li></ul><figure class="nh ni nj nk gt jr"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">我们告诉我们的连接器回到之前的状态</figcaption></figure><ul class=""><li id="504d" class="kt ku iq jw b jx jy kb kc kf kv kj kw kn kx kr ky kz la lb bi translated">就是这样。<strong class="jw ir">补偿已被重置</strong>。为了避免完整快照的风险，用一个<em class="lh">快照重新创建连接器，用一个刚好在丢失事件之前的时间覆盖</em>。</li><li id="636d" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">一旦连接器被重新创建，观察<em class="lh"> offsets.storage.topic </em>中Debezium写入的新偏移量。</li><li id="12c5" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">包括丢失事件在内的所有事件都将被重放。你的消费者现在应该重新加工它们。</li></ul></div><div class="ab cl li lj hu lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="ij ik il im in"><h1 id="f888" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">问题四:覆盖表上没有索引</h1><p id="6892" class="pw-post-body-paragraph ju jv iq jw b jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ij bi translated">我们一直在谈论使用<em class="lh"> snapshot.override，</em>来拍摄快照，但是为什么呢？</p><p id="1628" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果没有，则<a class="ae ks" href="https://debezium.io/documentation/reference/connectors/mysql.html#mysql-property-snapshot-mode" rel="noopener ugc nofollow" target="_blank">默认行为</a>是<strong class="jw ir">选择* </strong>。对于巨大的表来说，这可能代价太高，这时您希望用一个<strong class="jw ir"> where </strong>子句来限制初始快照中的行数。最有可能的是，在时间戳列上。</p><p id="d7f1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">但是，注意Debezium在处理较大的表时如何执行初始快照是很重要的。它获得一个<strong class="jw ir">读锁</strong>并且<strong class="jw ir">阻止写操作。</strong></p><figure class="nh ni nj nk gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi nw"><img src="../Images/62d9d3f30d8aa5f8d2398aa80a8b7ded.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g9Jcl9Hyi0_43gihmW6oTQ.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">非优化查询会在更大的数据集上停滞</figcaption></figure><p id="b54e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="lh">锁是无法避免的。</em>毕竟Debezium必须保证一致的状态。但是这对写作意味着什么呢？</p><blockquote class="nx ny nz"><p id="fa75" class="ju jv lh jw b jx jy jz ka kb kc kd ke oa kg kh ki ob kk kl km oc ko kp kq kr ij bi translated">这意味着您的API、计划写入作业将在快照持续期间失败。这也是不可接受的。</p></blockquote><h2 id="7a61" class="ms lq iq bd lr mt mu dn lv mv mw dp lz kf mx my md kj mz na mh kn nb nc ml nd bi translated"><a class="ae ks" href="#" rel="noopener ugc nofollow">修复</a></h2><ul class=""><li id="ef6c" class="kt ku iq jw b jx mn kb mo kf ne kj nf kn ng kr ky kz la lb bi translated">因此，最重要的是拍摄时间要短，或者在一天中有利的时间拍摄(负荷较小)</li><li id="196e" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">如果override中的where子句没有索引，实际上更糟，因为这会导致完全扫描。<strong class="jw ir">确保在快照覆盖列上创建索引</strong>。<a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/advanced-profiling-and-tracing-mysql-queries-c0c95dc7db24">分析查询</a>并确保它足够快。</li></ul><figure class="nh ni nj nk gt jr"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="d73d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果由于失误，初始快照从一个巨大的表(&gt; 1M行)开始，并停止写入，请快速执行以下操作。</p><ul class=""><li id="4081" class="kt ku iq jw b jx jy kb kc kf kv kj kw kn kx kr ky kz la lb bi translated">删除连接器。</li><li id="7067" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">删除连接器不会终止正在运行的数据库查询。<strong class="jw ir">秒杀查询。</strong></li></ul><pre class="nh ni nj nk gt od oe of og aw oh bi"><span id="60b2" class="ms lq iq oe b gy oi oj l ok ol">mysql $ show processlist → <br/>mysql $ kill &lt;connection-doing-snapshotting&gt; →</span></pre></div><div class="ab cl li lj hu lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="ij ik il im in"><h1 id="d561" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">问题V:遇到了模式未知的变更事件</h1><p id="76cd" class="pw-post-body-paragraph ju jv iq jw b jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ij bi translated">这是一个非常不幸的错误。当<em class="lh">内部元模型</em>和<em class="lh">数据库模式历史</em>不匹配时，就会发生这种情况。很可能一个DDL没有进入数据库历史主题，现在<strong class="jw ir">任何新事件都将失败。</strong></p><figure class="nh ni nj nk gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi om"><img src="../Images/2a348ca92a5772640913eb89e643d9b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2gtJmNFxsVS-NGZoun1s0A.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">出现故障的连接器</figcaption></figure><p id="ce8c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当Debezium试图重新启动任务时，它使用一个名为<em class="lh">连接器的键</em>从<em class="lh"> connect.offsets.topics </em>中读取最新的偏移量。</p><p id="b185" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然后，它试图将后来(不是最近)事件的模式与其内部模型(没有更新)进行比较。</p><p id="c7ed" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这取决于<em class="lh">“不一致.模式.处理.模式”</em>属性(默认行为是失败，其他行为是跳过、警告)</p><h2 id="512e" class="ms lq iq bd lr mt mu dn lv mv mw dp lz kf mx my md kj mz na mh kn nb nc ml nd bi translated"><a class="ae ks" href="#" rel="noopener ugc nofollow"> <em class="on">修复</em> </a></h2><ul class=""><li id="8b58" class="kt ku iq jw b jx mn kb mo kf ne kj nf kn ng kr ky kz la lb bi translated">在检查<a class="ae ks" href="https://github.com/debezium/debezium/blob/237b4ac0f1773e7cfd103bfc216afc44bdbe2635/debezium-connector-mysql/src/main/java/io/debezium/connector/mysql/BinlogReader.java#L863" rel="noopener ugc nofollow" target="_blank">相关的Debezium源代码</a>时，很明显这是一个死胡同。一个简单的修复方法是用不同的名称重新创建连接器，因为偏移分区消息是由连接器名称作为键的。这会拍一张新的快照。</li><li id="4a90" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">然而，重命名连接器并不总是可行的。在这种情况下，可以直接<strong class="jw ir">指定一个逻辑删除消息</strong>，它基本上告诉Debezium到目前为止还没有记录偏移，需要执行快照</li></ul><figure class="nh ni nj nk gt jr"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">我们告诉Debezium我们没有任何补偿。连接器必须处于停止状态。</figcaption></figure><ul class=""><li id="5c3f" class="kt ku iq jw b jx jy kb kc kf kv kj kw kn kx kr ky kz la lb bi translated">现在可以用相同的名称重新创建连接器。</li></ul><blockquote class="nx ny nz"><p id="ee53" class="ju jv lh jw b jx jy jz ka kb kc kd ke oa kg kh ki ob kk kl km oc ko kp kq kr ij bi translated">您可能会问，<br/>为什么DDL没有出现在database.schema.history主题中。毕竟Debezium是流媒体的所有事件，对不对？</p></blockquote><p id="2b4b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这是一个合理的问题。要回答这个问题，请想一想当历史主题的保留时间被设置为固定的天数或字节数时会发生什么，其中任何一个超过？</p><p id="674e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Debezium需要在一个主题下维护所有历史。<br/> <strong class="jw ir">图式事件无法翻转。</strong></p></div><div class="ab cl li lj hu lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="ij ik il im in"><p id="eab4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这篇文章到此为止。我希望这能帮助读者在他们的产品配置中解决Debezium的问题。</p></div></div>    
</body>
</html>