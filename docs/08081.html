<html>
<head>
<title>Coding Problem: Sorted Squared Array in Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编码问题:Go中排序的正方形数组</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/coding-problem-sorted-squared-array-in-go-b6880ee409a6?source=collection_archive---------7-----------------------#2021-04-01">https://levelup.gitconnected.com/coding-problem-sorted-squared-array-in-go-b6880ee409a6?source=collection_archive---------7-----------------------#2021-04-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="0df9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">学习两种解决方案，编写表驱动测试！</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/dac3242033bc1bab981c5586250228bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gwi2PoD7e5FPa1s6.jpg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">BO1982 <em class="le"> / </em>伊斯托克</figcaption></figure><p id="80fb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi lf translated"><span class="l lg lh li bm lj lk ll lm ln di">我</span>认为软件工程师日常练习编码面试问题<strong class="js iu">是一个很好的练习</strong>。它们不仅能让你的计算机科学基础保持敏锐，而且还能挑战你的大脑，让你在需要或想要寻找新工作机会时有所准备。当我自己练习这些编码问题时，我想标准化这些方法并在我的博客上分享这些步骤。</p><p id="39fa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这个编码问题中，我们将使用我最喜欢的编程语言——Go来解决排序平方数组。我们将把这个问题分成三个独立的部分:第一步，了解问题，写下一些例子。下一步是编写测试(hello TDD)，最后一步是为我们的测试编写解决方案！</p><blockquote class="lo lp lq"><p id="40bc" class="jq jr lr js b jt ju jv jw jx jy jz ka ls kc kd ke lt kg kh ki lu kk kl km kn im bi translated">能够理解编码问题、编写测试和开发最佳解决方案鼓励你成为一名全面的软件工程师。</p></blockquote><p id="9550" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们开始吧！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5849" class="mc md it bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">了解排序的方形数组</h1><p id="4f4e" class="pw-post-body-paragraph jq jr it js b jt na jv jw jx nb jz ka kb nc kd ke kf nd kh ki kj ne kl km kn im bi translated">这是一个初学者级别的编码问题，输入一个排序的数组，输出该数组的平方值，也是排序的。您可能会想到这样一个简单的例子:</p><pre class="kp kq kr ks gt nf ng nh ni aw nj bi"><span id="40c3" class="nk md it ng b gy nl nm l nn no">Input:  [0, 1, 2, 3]<br/>Output: [0, 1, 4, 9]</span></pre><p id="a142" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">好的，<strong class="js iu">但是不要操之过急</strong>。这里一个常见的错误是忘记了输入数组中的负值。当你平方一个数时，结果总是正的。输入数字的绝对值<em class="lr">决定输出数字的大小。因此，非常小但为负的输入数字会变成非常大但为正的输出数字。这是另一个例子:</em></p><pre class="kp kq kr ks gt nf ng nh ni aw nj bi"><span id="f982" class="nk md it ng b gy nl nm l nn no">Input:  [-5, -1, 2, 4]<br/>Output: [1, 4, 16, 25]</span></pre><p id="75a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里最小的输入值<code class="fe np nq nr ng b">-5</code>变成了最大的输出值<code class="fe np nq nr ng b">25</code>。本质上，输入值离零越远，输出数就越大。当我们在本文后面开始实际解决这个问题时，这是一个重要的细节。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4b97" class="mc md it bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">写作测试</h1><p id="a56f" class="pw-post-body-paragraph jq jr it js b jt na jv jw jx nb jz ka kb nc kd ke kf nd kh ki kj ne kl km kn im bi translated">有些人可能会说，编写测试应该在你写完解决方案之后，但是我更喜欢尽可能地实践测试驱动开发(TDD)。它不仅能给你手头的问题一个更清晰的定义，而且写一个通过你已有的测试的解决方案是一件令人满意的事情。</p><p id="ef0e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">谢天谢地，在编写测试时，Go非常棒。你可以使用Go中的<strong class="js iu">表驱动测试</strong>为一个方法编写多个测试用例。首先，让我们为测试提供一些输入和结果输出的例子。我认为最好想出最简单的例子，然后沿着逻辑链往上走。</p><pre class="kp kq kr ks gt nf ng nh ni aw nj bi"><span id="a4cf" class="nk md it ng b gy nl nm l nn no">----- Example 1 -----<br/>Input:  []<br/>Output: []<br/>----- Example 2 -----<br/>Input:  [0]<br/>Output: [0]<br/>----- Example 3 -----<br/>Input:  [0,1,3]<br/>Output: [0,1,9]<br/>----- Example 4 -----<br/>Input:  [-2,-1]<br/>Output: [1,4]<br/>----- Example 5 -----<br/>Input:  [-4, 2, 6]<br/>Output: [4, 16, 36]</span></pre><p id="f28d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们在Go中编写一些实际的测试。我将跳过这些教程中的项目设置，因为它太花时间了。您只需要两个文件，一个保存您的代码逻辑，另一个保存测试。包含代码逻辑的第一个文件应该只包含函数的基本结构:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="5861" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">好了，现在让我们来分解测试。我们创建函数<code class="fe np nq nr ng b">TestSortedSquaredArray()</code>，它接受对<code class="fe np nq nr ng b">*testing.T</code>的引用。这告诉Go我们想要运行这个函数来测试同一个<code class="fe np nq nr ng b">sorting</code>包中的另一个文件中的<code class="fe np nq nr ng b">SortedSquaredArray()</code>。</p><p id="2bcf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">表格驱动测试灵活方便。第一步是创建一个名为<code class="fe np nq nr ng b">testCases</code>的结构，它有三个字段<code class="fe np nq nr ng b">name</code>、<code class="fe np nq nr ng b">input</code>和<code class="fe np nq nr ng b">expectedResult</code>，其中后两个都是整数数组类型。</p><p id="a771" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，我们打开一对新的括号<code class="fe np nq nr ng b">{}</code>，以<em class="lr">测试用例</em>作为第14–18行的例子。在这里，我们可以指定单个<code class="fe np nq nr ng b">testCases</code>结构的具体值。正如你所看到的，我们的第一个测试用例验证了如果<code class="fe np nq nr ng b">input</code>是一个空数组<code class="fe np nq nr ng b">[]int{}</code>，那么<code class="fe np nq nr ng b">expectedResult</code>也应该是一个空数组<code class="fe np nq nr ng b">[]int{}</code>。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="4bae" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是这些测试用例是如何运行的呢？一旦我们完成了测试用例结构的定义，我们在第41行开始一个<code class="fe np nq nr ng b">for</code>循环，在<code class="fe np nq nr ng b">testCases</code>之上<code class="fe np nq nr ng b">ranges</code>。对于循环的每一次迭代，我们将一个单独的测试用例定义为<code class="fe np nq nr ng b">tc</code>，并将其设置为等于我们正在进行的当前测试<code class="fe np nq nr ng b">testCase[i]</code>。</p><p id="827b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来我们调用<code class="fe np nq nr ng b">t.Run()</code>，它将来自当前测试用例的<code class="fe np nq nr ng b">property</code>以及<code class="fe np nq nr ng b">func(t *testing.T)</code>作为参数，让我们知道我们想要运行一个实际的测试。在<code class="fe np nq nr ng b">t.Run()</code>中，我们可以调用<code class="fe np nq nr ng b">t.Parallel()</code>来提高性能，我们所有的测试将同时执行。</p><p id="04a2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，通过将<code class="fe np nq nr ng b">tc.input</code>作为参数传递并将返回值存储到<code class="fe np nq nr ng b">actualResult</code>中，我们可以从<code class="fe np nq nr ng b">SortedSquaredArray()</code>获得输出。然后我们可以通过使用<code class="fe np nq nr ng b">assert.Equal()</code>将<code class="fe np nq nr ng b">actualResult</code>与当前测试用例<code class="fe np nq nr ng b">expectedResult</code>进行比较，T5也将测试对象<code class="fe np nq nr ng b">t</code>作为输入。</p><p id="cb00" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">唷！希望这有意义。我们现在可以使用下面的命令运行我们的测试。</p><pre class="kp kq kr ks gt nf ng nh ni aw nj bi"><span id="d9f0" class="nk md it ng b gy nl nm l nn no">$ go test *.go<br/>--- FAIL: TestSortedSquaredArray (0.00s)<br/>    --- FAIL: TestSortedSquaredArray/array_with_negative_values (0.00s)<br/>        example_test.go:48: <br/>                Error Trace:    example_test.go:48<br/>                Error:          Not equal: <br/>                                expected: []int{}<br/>                                actual  : []int{1, 4}<br/>                                <br/>                                Diff:<br/>                                --- Expected<br/>                                +++ Actual<br/>                                @@ -1,2 +1,4 @@<br/>                                -([]int) {<br/>                                +([]int) (len=2) {<br/>                                + (int) 1,<br/>                                + (int) 4<br/>                                 }<br/>                Test:           TestSortedSquaredArray/array_with_negative_values<br/>    --- FAIL: TestSortedSquaredArray/array_with_single_value (0.00s)<br/>        example_test.go:48:<br/>.....</span></pre><p id="cc1c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们实际上可以看到4/5的测试失败了，但是我们能够成功地通过空数组的第一个测试。现在我们已经有了测试，让我们继续我们的解决方案！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="21b1" class="mc md it bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">解决方案#1 — O(NlogN)时间，O(N)空间</h1><p id="f2f8" class="pw-post-body-paragraph jq jr it js b jt na jv jw jx nb jz ka kb nc kd ke kf nd kh ki kj ne kl km kn im bi translated">像往常一样，让我们看看暴力解决方案开始。假设我们不能改变输入数组，我们需要首先为<code class="fe np nq nr ng b">result</code>数组分配内存。我们可以使用<code class="fe np nq nr ng b">make()</code>函数来实现，其中第一个参数表示我们想要一个整数数组<code class="fe np nq nr ng b">[]int</code>，第二个参数是我们想要的数组的大小<code class="fe np nq nr ng b">len(array)</code>。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="c90c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，我们复制输入<code class="fe np nq nr ng b">array</code>中每个元素的平方值并存储到<code class="fe np nq nr ng b">result</code>数组中。我们可以简单地调用<code class="fe np nq nr ng b">sort.Ints(result)</code>对<code class="fe np nq nr ng b">result</code>数组中的平方值进行排序，然后返回。</p><p id="e92f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于排序算法的时间通常为O(NlogN ),而for循环只覆盖数组的N个元素，因此我们的时间复杂度为O(NlogN ),空间复杂度为O(N ),因为我们必须创建一个与输入数组大小相同的新数组。</p><p id="e2a7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果我们再次运行我们的测试，我们看到我们通过了所有的测试。</p><pre class="kp kq kr ks gt nf ng nh ni aw nj bi"><span id="c42a" class="nk md it ng b gy nl nm l nn no">$ go test *.go<br/>ok      command-line-arguments  0.301s</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2e0e" class="mc md it bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">解决方案2 — O(N)时间，O(N)空间</h1><p id="93cc" class="pw-post-body-paragraph jq jr it js b jt na jv jw jx nb jz ka kb nc kd ke kf nd kh ki kj ne kl km kn im bi translated">下一个解决方案依赖于这个问题的原理。正值或负值从零进一步增长会发生什么？平方结果变得越来越大。所以我们真正关心的是输入数组中每个元素的<em class="lr">绝对值</em>。</p><p id="289d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">记住，输入数组已经排序</strong>——所以我们可以通过让索引从数组的开头和结尾开始来跟踪输入<code class="fe np nq nr ng b">array</code>中的最小绝对值和最大绝对值。然后，我们可以迭代地检查哪个索引代表输入数组中较大的绝对值。</p><p id="0538" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果最右边的值大于，我们选择它作为下一个要平方的值，并复制到<code class="fe np nq nr ng b">result</code>数组中。如果最左边的值更大，那么我们选择存储那个值。然后，我们将分别递增或递减最左边和最右边的索引。</p><p id="1391" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此外，我们可以编写一个助手方法<code class="fe np nq nr ng b">abs()</code>，它返回一个整数的绝对值。最终的代码如下所示:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="d5ae" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这改进了我们的时间复杂度，因为我们从不检查输入数组中的N个以上的元素。因此，最终的时间复杂度是O(N ),空间复杂度仍然是O(N ),因为我们没有任何改进。</p><p id="a851" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果我们再次运行我们的测试，我们仍然通过所有的测试。</p><pre class="kp kq kr ks gt nf ng nh ni aw nj bi"><span id="e334" class="nk md it ng b gy nl nm l nn no">$ go test *.go<br/>ok      command-line-arguments  0.301s</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="a51f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望你喜欢阅读这篇文章，并能够学到一些新的东西。我计划继续写关于常见编码面试问题的教程，所以如果你有任何提示或建议，请在下面留下评论！感谢阅读。</p></div></div>    
</body>
</html>