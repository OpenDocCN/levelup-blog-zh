<html>
<head>
<title>Vue, Vuetify.js &amp; dark mode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue，Vuetify.js &amp;黑暗模式</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/vue-vuetify-js-dark-mode-5237a43b4a2f?source=collection_archive---------2-----------------------#2022-03-23">https://levelup.gitconnected.com/vue-vuetify-js-dark-mode-5237a43b4a2f?source=collection_archive---------2-----------------------#2022-03-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="5327" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从浏览器中读取<strong class="jp ir">黑暗模式</strong>并在Vue中使用的简单方法。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/1e4f1061a8ebdb642e608de49c69189f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jYkoWvZG-n-48NveF4vXpw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">是的，我自己做的！</figcaption></figure><p id="1ce5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在你的store/index.js中跟踪<code class="fe lb lc ld le b">dark: true/false</code></p><pre class="km kn ko kp gt lf le lg lh aw li bi"><span id="f34a" class="lj lk iq le b gy ll lm l ln lo">state: {<br/>  dark: false<br/>},<br/>mutations: {<br/>  SET_DARK(state, dark) { state.dark = dark }<br/>},<br/>actions: {<br/>  setDark({commit}, dark) { commit("SET_DARK", dark) }<br/>}</span></pre><p id="80c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在你的App.vue中，订阅<code class="fe lb lc ld le b">prefers-color-scheme: dark</code>中的变化</p><pre class="km kn ko kp gt lf le lg lh aw li bi"><span id="870f" class="lj lk iq le b gy ll lm l ln lo">data() {<br/>  return {<br/>    matcher: null<br/>  }<br/>},<br/>methods: {<br/>  async onDark(evt) {<br/>    console.debug('onDark', evt)<br/>    await this.$store.dispatch('setDark', evt.matches) <br/>  }<br/>},<br/>async created() {<br/>  this.matcher = window.matchMedia('(prefers-color-scheme: dark)')<br/>  // set the initial state from the matcher  await this.onDark(this.matcher)<br/>  this.matcher.addListener(this.onDark)<br/>}</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/9dd59479b2241016a6d5649f5dd768c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*l5XQgYZzdmXi_ZlX1uL-yw.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">evt.matches = true(黑暗模式！！)</figcaption></figure><p id="1dd6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在你可以在任何组件中使用<code class="fe lb lc ld le b">dark</code>！</p><pre class="km kn ko kp gt lf le lg lh aw li bi"><span id="8f52" class="lj lk iq le b gy ll lm l ln lo">&lt;v-card :dark="dark"&gt;...&lt;/v-card&gt;</span></pre><p id="4f43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在代码中使用mapState:</p><pre class="km kn ko kp gt lf le lg lh aw li bi"><span id="4d1d" class="lj lk iq le b gy ll lm l ln lo">import {mapState} from 'vuex'<br/>// ...<br/>computed: {<br/>  ...mapState(['dark']),<br/>}</span></pre></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><p id="62a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你喜欢的内容，请鼓掌和/或关注我更多。</p></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><blockquote class="lx ly lz"><p id="1f1e" class="jn jo ma jp b jq jr js jt ju jv jw jx mb jz ka kb mc kd ke kf md kh ki kj kk ij bi translated">编辑2022.04.07   : H. Kamran的解决方案在直接在“主题”中设置“黑暗”方面做得很好，因此我们不需要跟踪每个组件中的黑暗模式。</p></blockquote><pre class="km kn ko kp gt lf le lg lh aw li bi"><span id="2fb0" class="lj lk iq le b gy ll lm l ln lo">this.$vuetify.theme.dark = true | false</span></pre><p id="31f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请务必在此阅读<a class="ae me" href="https://hkamran.medium.com/using-local-storage-to-store-vuetifys-dark-theme-state-6158786449c" rel="noopener">的帖子</a> …</p></div></div>    
</body>
</html>