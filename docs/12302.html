<html>
<head>
<title>Text Cleansing in NLP Tasks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NLP任务中的文本清理</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/text-cleansing-in-nlp-tasks-594b93d648d6?source=collection_archive---------3-----------------------#2022-05-30">https://levelup.gitconnected.com/text-cleansing-in-nlp-tasks-594b93d648d6?source=collection_archive---------3-----------------------#2022-05-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0882" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">教程:如何清理NLP任务中的文本</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/42a46dadd19ac24bcb4454bb8fbcbcff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aCLM_zaiTOW8H6Sy"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@cdc?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">疾控中心</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><div class="kz la gp gr lb lc"><a href="https://jorgepit-14189.medium.com/membership" rel="noopener follow" target="_blank"><div class="ld ab fo"><div class="le ab lf cl cj lg"><h2 class="bd iu gy z fp lh fr fs li fu fw is bi translated">用我的推荐链接加入媒体-乔治皮皮斯</h2><div class="lj l"><h3 class="bd b gy z fp lh fr fs li fu fw dk translated">阅读乔治·皮皮斯(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="lk l"><p class="bd b dl z fp lh fr fs li fu fw dk translated">jorgepit-14189.medium.com</p></div></div><div class="ll l"><div class="lm l ln lo lp ll lq ks lc"/></div></div></a></div><p id="b5b6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在NLP任务中，我们通常在进入机器学习部分之前应用一些文本清理。当然，有许多方法，但在本教程中，我们将向您展示一种基本方法，它包括以下步骤:</p><ul class=""><li id="5160" class="mn mo it lt b lu lv lx ly ma mp me mq mi mr mm ms mt mu mv bi translated">将文本转换为小写</li><li id="af06" class="mn mo it lt b lu mw lx mx ma my me mz mi na mm ms mt mu mv bi translated">删除开头和结尾的空白</li><li id="e415" class="mn mo it lt b lu mw lx mx ma my me mz mi na mm ms mt mu mv bi translated">删除多余的空格和制表符</li><li id="c9f6" class="mn mo it lt b lu mw lx mx ma my me mz mi na mm ms mt mu mv bi translated">删除HTML标签和标记</li><li id="f186" class="mn mo it lt b lu mw lx mx ma my me mz mi na mm ms mt mu mv bi translated">从停用字词列表中排除一些字词</li><li id="d673" class="mn mo it lt b lu mw lx mx ma my me mz mi na mm ms mt mu mv bi translated">从文本中删除更新的停用词列表</li><li id="c18f" class="mn mo it lt b lu mw lx mx ma my me mz mi na mm ms mt mu mv bi translated">删除数字</li><li id="5f9d" class="mn mo it lt b lu mw lx mx ma my me mz mi na mm ms mt mu mv bi translated">应用单词分词器</li><li id="1b91" class="mn mo it lt b lu mw lx mx ma my me mz mi na mm ms mt mu mv bi translated">删除长度少于3个字符的标记，包括标点符号</li><li id="dc97" class="mn mo it lt b lu mw lx mx ma my me mz mi na mm ms mt mu mv bi translated">应用词干</li></ul><p id="caa0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">开始编码吧。首先，我们将加载数据集和所需的库</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="5c27" class="ng nh it nc b gy ni nj l nk nl">import pandas as pd<br/>import nltk<br/>import re</span><span id="1d1d" class="ng nh it nc b gy nm nj l nk nl">nltk.download('punkt')<br/>nltk.download('stopwords')</span><span id="a2c5" class="ng nh it nc b gy nm nj l nk nl">from nltk.corpus import stopwords<br/>from nltk.stem import SnowballStemmer<br/>from nltk.tokenize import word_tokenize</span></pre><p id="fbf4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><strong class="lt iu">加载数据</strong></p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="1531" class="ng nh it nc b gy ni nj l nk nl">df = pd.read_csv('AMAZON-REVIEW-DATA-CLASSIFICATION.csv')<br/>df.head(10)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/49bf42244da2a03775305e61aba52668.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vs6WFOId0nMFyqPI.png"/></div></div></figure><h1 id="1316" class="no nh it bd np nq nr ns nt nu nv nw nx jz ny ka nz kc oa kd ob kf oc kg od oe bi translated">构建文本清理功能</h1><p id="ca51" class="pw-post-body-paragraph lr ls it lt b lu of ju lw lx og jx lz ma oh mc md me oi mg mh mi oj mk ml mm im bi translated">让我们构建文本清理函数，并将其应用于<code class="fe ok ol om nc b">reviewText</code>列。</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="1942" class="ng nh it nc b gy ni nj l nk nl"># Let's get a list of stop words from the NLTK library<br/>stop = stopwords.words('english')</span><span id="f14e" class="ng nh it nc b gy nm nj l nk nl"># These words are important for our problem. We don't want to remove them.<br/>excluding = ['against', 'not', 'don', "don't",'ain', 'aren', "aren't", 'couldn', "couldn't",<br/>             'didn', "didn't", 'doesn', "doesn't", 'hadn', "hadn't", 'hasn', "hasn't", <br/>             'haven', "haven't", 'isn', "isn't", 'mightn', "mightn't", 'mustn', "mustn't",<br/>             'needn', "needn't",'shouldn', "shouldn't", 'wasn', "wasn't", 'weren', <br/>             "weren't", 'won', "won't", 'wouldn', "wouldn't"]<br/></span><span id="014d" class="ng nh it nc b gy nm nj l nk nl"># New stop word list<br/>stop_words = [word for word in stop if word not in excluding]</span><span id="9ff5" class="ng nh it nc b gy nm nj l nk nl">snow = SnowballStemmer('english')<br/></span><span id="026d" class="ng nh it nc b gy nm nj l nk nl">def text_cleansing(sent): <br/>    <br/>    # Check if the sentence is a missing value<br/>    if isinstance(sent, str) == False:<br/>        sent = ""</span><span id="ed48" class="ng nh it nc b gy nm nj l nk nl">    filtered_sentence=[]</span><span id="24fc" class="ng nh it nc b gy nm nj l nk nl">    sent = sent.lower() # Lowercase <br/>    sent = sent.strip() # Remove leading/trailing whitespace<br/>    sent = re.sub('\s+', ' ', sent) # Remove extra space and tabs<br/>    sent = re.compile('&lt;.*?&gt;').sub('', sent) # Remove HTML tags/markups:</span><span id="8d43" class="ng nh it nc b gy nm nj l nk nl">    for w in word_tokenize(sent):<br/>        # We are applying some custom filtering here, feel free to try different things<br/>        # Check if it is not numeric and its length&gt;2 and not in stop words<br/>        if(not w.isnumeric()) and (len(w)&gt;2) and (w not in stop_words):  <br/>            # Stem and add to filtered list<br/>            filtered_sentence.append(snow.stem(w))<br/>    final_string = " ".join(filtered_sentence) #final string of cleaned words<br/>        <br/>    return final_string</span><span id="3cdf" class="ng nh it nc b gy nm nj l nk nl">df['cleanReviewText'] = df['reviewText'].apply(lambda x: text_cleansing(x))</span><span id="86d8" class="ng nh it nc b gy nm nj l nk nl">df.head(10)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/9b80315dff7226de474a3840c37aac92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4iA8wtFdRM2iKygU.png"/></div></div></figure><p id="20b3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果您将"<strong class="lt iu"> reviewText </strong>"与"<strong class="lt iu"> cleanReviewText </strong>"进行比较，您会注意到我们已经应用了上面提到的转换。请随意尝试不同的文本清理过程，因为这是NLP任务中非常重要的一部分。例如，如果您处理垃圾邮件检测器问题，您可能需要保留货币符号和数字。或者在情感分析中，可能需要保留一些标点符号等等。</p></div><div class="ab cl on oo hx op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="im in io ip iq"><p id="42d0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最初由<a class="ae ky" href="https://predictivehacks.com/text-cleansing-in-nlp-tasks/" rel="noopener ugc nofollow" target="_blank">预测黑客</a>发布</p></div></div>    
</body>
</html>