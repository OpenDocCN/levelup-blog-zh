<html>
<head>
<title>Single Command Magento 2 Setup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">单命令Magento 2设置</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/single-command-magento-2-setup-67c041a032d1?source=collection_archive---------4-----------------------#2021-07-08">https://levelup.gitconnected.com/single-command-magento-2-setup-67c041a032d1?source=collection_archive---------4-----------------------#2021-07-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1f65" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">基本安装w/ Nginx + Redis和清漆配置在5分钟！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f0d3303b5ee9f8c0f57dd4374b128283.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bfREcDPSS_yCWo4GyU3Dqw.png"/></div></div></figure><p id="503e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Magento之所以对电子商务行业如此有吸引力，是因为一旦你正确地设置和配置了它，从web dashboard进行管理是非常用户友好的，这使得不太懂技术的人能够非常灵活地运行他们的电子商务商店，特别是如果他们想要部署一个多店面的电子商务实例。这些非常相同的原因是为什么Magento变得如此受欢迎，并在可预见的未来继续如此。然而，有利必有弊，最大的痛苦之一来自于“正确设置Magento”的过程。正因为如此，<a class="ae lq" href="https://3df.io" rel="noopener ugc nofollow" target="_blank"> 3DF </a>继续收到<a class="ae lq" href="https://hkdb.medium.com/a-scalable-magento-2-architecture-107f5fe7a813" rel="noopener">一个接一个的请求，为那些为他们的电子商务网站运行Magento </a>的客户提供服务。这自然导致我们的团队多年来建立了一个相当全面的安装、配置和故障排除Magento的知识库。</p><p id="b225" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，让我们来看看我们的一个客户的生产环境是什么样子的，以说明安装Magento意味着什么:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lr"><img src="../Images/3d28645bc501f2fbd1a64484d61dad22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QRRREB1A-tjuQ4sQ_aWJJw.jpeg"/></div></div></figure><p id="accb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要“正确设置magento”，通常需要花费几个小时到几个星期的时间(取决于你的经验水平),按照<a class="ae lq" href="https://devdocs.magento.com/guides/v2.4/install-gde/install-flow-diagram.html" rel="noopener ugc nofollow" target="_blank"> Adobe文档</a>到“命令行忍者”的方式设置一个基本的环境，包括一个空白的商店和管理面板。然后，你开始思考为什么在进行了所有的定制之后，它运行得如此之慢，所以你最终会陷入Redis和Varnish兔子洞。当然，如果你的背景是系统管理或系统集成，这对你来说可能是轻而易举的事，但对最好的开发人员来说可能是相反的。我不知道有多少次听到Magento开发者告诉我，他们不是devops类型的，所以他们很难正确设置。他们只想继续他们的发展。事实上，我甚至收到了一些来自主要技术巨头的高级技术领导的消息，询问我如何将一个可扩展的Magento设置部署到以前与Fargate、EFS、Elasticache和Aurora一起使用的AWS上。</p><p id="5fc9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有一段时间，我最初的反应是，肯定有一些开源项目可以解决这个问题，对吗？所以我一有时间就会去找它。然而，虽然这些项目确实存在，我真的没有找到任何似乎符合要求的东西。它们要么已经过时，仍然需要太多的手动干预，缺乏Redis和Varnish的自动化，要么设置与我们设计的目标生产环境不匹配。</p><p id="1af3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有鉴于此，有一天我坐下来，收集了我们项目的一点一滴，编辑了它们，并用Nginx(没有Apache) + Redis和Varnish构建了Magento 2的单一命令/引导/交互设置。这个想法是能够在5分钟内快速设置一个具有所有基本配置的Magento实例，这样开发者就可以立即开始构建网站。一旦他们完成了站点的构建，他们就可以将数据库导入到Aurora中，并对web和Varnish容器进行映像，以部署到Fargate。结果看起来像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="58e0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">repo实际上是在本地计算机或云中的虚拟机上安装和配置以下环境，尽可能减少开发人员的干预:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lu"><img src="../Images/219c907b93e54a8d1ead3f7e2fe0625b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RTmBAx5iXMLxeBhYawZCcQ.jpeg"/></div></div></figure><p id="4ae8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">也许值得一提的是，虽然您可能觉得让容器在虚拟局域网或AWS所谓的VPC内相互通信足够安全，但我仍然觉得整个环境的容器之间的通信采用端到端加密更好。因此，<a class="ae lq" href="https://stunnel.org" rel="noopener ugc nofollow" target="_blank"> stunnel </a>会自动应用于任何不支持SSL的地方。</p><p id="db7d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Varnish容器还有一些集群配置，可以在启动时由环境变量激活，这样我们就可以在生产中的负载平衡器后面有一个Varnish容器集群，以实现可伸缩性。</p><p id="7f72" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当然，Varnish是可选的，以防出现刚刚开始并希望降低复杂性的低流量部署。您可以随时返回repo来构建一个配置了Varnish的新环境，稍后只需将现有的Magento目录复制到新环境中。然而，我建议一开始就使用清漆，因为它确实能显著提高Magento的性能。</p><p id="fc8f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您有兴趣尝试一下，请登录GitLab查看回购:</p><div class="lv lw gp gr lx ly"><a href="https://gitlab.com/hkdb/m2-nginx" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">带有NGINX-REDIS清漆的hkdb / Magento 2</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">dockered Magento 2+NGINX+REDIS在5分钟内完成</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">gitlab.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><p id="3d82" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">或者，如果您愿意，也可以访问GitHub上的镜像回购:</p><div class="lv lw gp gr lx ly"><a href="https://github.com/3dfosi/m2-nginx" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">3dfosi/m2-nginx</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">维护者:@hkdb A repo预打包Magento 2实例(w/ NGINX、REDIS和Varnish)用于开发和…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">github.com</p></div></div><div class="mh l"><div class="mn l mj mk ml mh mm ks ly"/></div></div></a></div><p id="a70d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我希望通过在<a class="ae lq" href="https://osi.3df.io" rel="noopener ugc nofollow" target="_blank"> 3DF OSI </a>的部分赞助下开源这个解决方案，更多的开发者能够驯服这个叫做Magento的怪兽。如果有人有任何反馈，我很想听听。欢迎直接给我写信或在<a class="ae lq" href="https://gitlab.com/hkdb/m2-nginx/-/issues" rel="noopener ugc nofollow" target="_blank"> GitLab repo </a>提交问题。如果在尝试之后，你觉得它对你有用，请随意给团队买些咖啡😉</p><p id="a704" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">尽情享受吧！</p></div></div>    
</body>
</html>