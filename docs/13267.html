<html>
<head>
<title>How To Implement Backup Functionality That Values User Privacy In Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Android中实现重视用户隐私的备份功能</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-implement-backup-functionality-that-values-user-privacy-in-android-5ec85165bcfe?source=collection_archive---------12-----------------------#2022-08-21">https://levelup.gitconnected.com/how-to-implement-backup-functionality-that-values-user-privacy-in-android-5ec85165bcfe?source=collection_archive---------12-----------------------#2022-08-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="180f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如果您想让您的用户成为其数据的100%所有者，您可以将备份直接存储在他们的Dropbox帐户中。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b2023a36b17ec4c88e507a516760debb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5kQOfD9y0BWbsSbC"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">杰森·登特在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="fa1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你是一个非常关心用户隐私的开发人员，你可能会问自己，我可以做些什么来让我的应用程序收集的数据更加透明？</p><p id="5be0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我发现自己几次陷入这种困境，特别是在实施备份功能时。我开始调查在Android世界中开发这项功能的一些途径，有一天我发现Dropbox提供了一个访问用户个人帐户的API。</p><p id="543e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，这种访问并没有让开发者完全控制存储在Dropbox账户中的个人数据。它只允许开发人员写入用户存储中的一个文件夹，这个文件夹包含允许读写的文件。用户也可以访问应用程序在Dropbox帐户中写入的数据，所以最好通知他们为什么该文件夹会在那里，以及如果他们想保留他们的数据，为什么不应该删除它。</p><p id="fdda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该解决方案使备份功能对用户完全透明，而且对开发人员来说也是免费的，因此您不需要为您还需要维护和管理的外部云存储付费。</p><p id="a7c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我看到的唯一缺点是，如果用户没有可用的存储空间，他将不得不支付Dropbox或任何你想使用的解决方案，以获得更多空间，他可能不喜欢这样，但老实说，应用程序备份通常不会是一个巨大的文件。因此，如果您需要为每个用户存储大量数据，这可能不是您想要采用的方法。</p><p id="1be5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们将了解如何将Dropbox连接到我们的应用程序，但如果您也想自动化备份过程，您可以使用WorkManager。我在这里写了一个关于如何做的教程，如果你想看看的话。</p><div class="lv lw gp gr lx ly"><a rel="noopener  ugc nofollow" target="_blank" href="/implement-backup-automation-with-workmanager-in-android-107c3d0cb166"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">使用Android中的WorkManager实现备份自动化</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">多亏了WorkManager，Android中的后台任务自动化变得前所未有的简单。</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><h1 id="c290" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">将Dropbox与我们的应用程序连接</h1><p id="2b3a" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">这个过程非常简单，我们需要在Dropbox中创建一个开发者帐户，然后将SDK添加到我们的Android项目中。为此，Dropbox在他们的库的<a class="ae ky" href="https://github.com/dropbox/dropbox-sdk-java" rel="noopener ugc nofollow" target="_blank"> README中有一个指南，所以我将把重点放在Android代码方面的这篇文章上。</a></p><p id="25d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">和往常一样，在Android中使用外部库的第一步是将它添加到Gradle模块并同步项目。为此，我们只需要下面一行:</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="2736" class="np mo it nl b gy nq nr l ns nt">dependencies {<br/>    // ...<br/>    implementation 'com.dropbox.core:dropbox-core-sdk:5.3.0'<br/>}</span></pre><p id="498d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了访问我们将要存储备份数据的Dropbox文件夹，我们需要用户登录他的帐户。为此，Dropbox SDK将启动浏览器，以便用户可以给我们权限，一旦该过程完成，系统将从浏览器返回到我们的应用程序。</p><p id="0849" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将看到的第一件事是如何开始登录过程。这就像调用Dropbox SDK提供给我们的一个方法一样简单。在下一段代码中，<em class="nu">客户端</em>对象<em class="nu"> </em>将在稍后被初始化，我们马上就会看到，代码的其余部分非常简单。</p><p id="3b89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nu">startoauth 2 authentication</em>获取<em class="nu"> config </em>对象、我们应该已经在Dropbox开发人员控制台中获得的API密钥以及我们可以读写数据所需的权限。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="c668" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们需要使用之前获得的凭证，这样我们就可以开始从云中上传和下载数据。</p><p id="f941" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的代码片段中，我检查用户是否已经登录到Dropbox，如果我没有凭据，Dropbox客户端将不会启动。应该在Activiy/Fragment的<em class="nu"> onResume </em>回调中启动<em class="nu"> initDropboxClient </em>方法，以便当用户使用浏览器登录后应用程序返回时，Dropbox客户端使用现在存储在<em class="nu"> Auth </em>对象中的凭据进行初始化。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="abda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经设置好了一切，我们将看看如何上传和下载数据。为此，Dropbox提供了两种方法来请求我们想要与之交互的文件。</p><blockquote class="nx ny nz"><p id="42f1" class="kz la nu lb b lc ld ju le lf lg jx lh oa lj lk ll ob ln lo lp oc lr ls lt lu im bi translated">在下一个示例中，我还将强制覆盖上一次备份，因此请记住指定您想要遵循的策略。</p></blockquote><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="09da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有其他可用的功能，如检查我们上传的文件的大小或文件的最后更新日期。如果你感兴趣，你可以检查一下<em class="nu"> DropboxManager </em>类，在那里你可以看到我在文章中解释的全部代码。</p><p id="c728" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要忘记，如果你使用收缩和模糊，你需要用ProGuard规则保护Dropbox SDK的一些代码，正如你在这里看到的<a class="ae ky" href="https://github.com/dropbox/dropbox-sdk-java#does-this-sdk-require-any-special-proguard-rules-for-shrink-optimizations" rel="noopener ugc nofollow" target="_blank"/>。如果你不知道什么是收缩和模糊，以及它如何使你的应用受益，你可以看看我写的这个关于这个话题的故事。</p><div class="lv lw gp gr lx ly"><a rel="noopener  ugc nofollow" target="_blank" href="/simple-tips-to-optimize-android-apps-334355a318d5"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">优化Android应用的简单技巧</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">用几行代码优化你的Android应用的大小和性能</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mh l"><div class="od l mj mk ml mh mm ks ly"/></div></div></a></div><h1 id="33c0" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">结论</h1><p id="f0f5" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">如您所见，实现简单、免费，并给予用户对其数据的完全所有权。这是我最喜欢的在Android中开发备份的解决方案之一，我希望它能帮助你。</p></div><div class="ab cl oe of hx og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="im in io ip iq"><p id="f22c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想阅读更多这样的内容，并支持我，不要忘记检查我的个人资料，或给媒体一个机会，成为会员，以获得我和其他作家的无限故事。一个月只要5美元，如果你使用这个链接，我会得到一小笔佣金。</p><div class="lv lw gp gr lx ly"><a href="https://medium.com/@molidev8/membership" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">通过我的推荐链接加入Medium—Miguel</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">阅读米格尔的每一个故事(以及媒体上成千上万的其他作家)。你的会员费直接支持米盖尔…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">medium.com</p></div></div><div class="mh l"><div class="ol l mj mk ml mh mm ks ly"/></div></div></a></div></div></div>    
</body>
</html>