<html>
<head>
<title>Understanding Cross-Origin Resource Sharing (CORS)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解跨来源资源共享(CORS)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/understanding-cross-origin-resource-sharing-cors-e54e403623eb?source=collection_archive---------3-----------------------#2021-12-29">https://levelup.gitconnected.com/understanding-cross-origin-resource-sharing-cors-e54e403623eb?source=collection_archive---------3-----------------------#2021-12-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="280f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解关于跨源资源共享(CORS)的一切，以及如何在您的应用程序中启用它。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b4ee7d4375425d4427ac156a9553f627.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q4rL_nejz22KlgfYjfIOMg.png"/></div></div></figure><p id="edfc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">跨源资源共享(CORS)是一种协议，它允许客户端应用程序与属于不同源的服务器端应用程序进行交互。当应用程序想要对外部服务器进行API调用以接收一些响应并向其用户显示数据时，这很有帮助。大多数情况下，如果没有在服务器端正确配置，您可能会得到一个CORS错误。</p><p id="bc5b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本文中，我将向您详细介绍跨源资源共享(CORS ),并指导您正确配置它，以便您的客户端应用程序不会收到任何错误消息。初学者和专业开发人员可以从这篇文章中受益。</p><h1 id="94c7" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">涵盖的主题</h1><ol class=""><li id="d56c" class="mf mg iq kt b ku mh kx mi la mj le mk li ml lm mm mn mo mp bi translated">使用CORS的必要性</li><li id="4755" class="mf mg iq kt b ku mq kx mr la ms le mt li mu lm mm mn mo mp bi translated">确定CORS的回应</li><li id="101f" class="mf mg iq kt b ku mq kx mr la ms le mt li mu lm mm mn mo mp bi translated">CORS请求的类型</li><li id="630a" class="mf mg iq kt b ku mq kx mr la ms le mt li mu lm mm mn mo mp bi translated">在快速应用程序中启用CORS</li><li id="f9ef" class="mf mg iq kt b ku mq kx mr la ms le mt li mu lm mm mn mo mp bi translated">在PHP应用程序中启用CORS</li></ol></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="69c7" class="ln lo iq bd lp lq nc ls lt lu nd lw lx jw ne jx lz jz nf ka mb kc ng kd md me bi translated">1.使用CORS的必要性</h1><p id="011c" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">web浏览器的同源策略(SOP)会阻止指向不同来源的请求。该功能随web浏览器一起提供，以防止恶意站点读取数据，但该功能阻止了一些真正的用例。例如，您可能希望对不同来源的后端服务器进行API调用，但是web浏览器的同源策略会拒绝该请求(即使该服务器是您的)。</p><p id="4f50" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">用Angular、React、Vue等等构建的web应用程序可能在不同的地方有后端服务器。在这些类型的应用程序中，前端与后端是分离的，以使应用程序加载更快、更安全，并使内部团队更容易维护模块。在这种用例中，前端应用程序调用API来发送和接收来自服务器的数据。</p><p id="3d59" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了克服同源策略(SOP)带来的问题，开发人员使用了JSON-P等变通方法，但是跨源资源共享(CORS)很容易解决这个问题。</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="8366" class="ln lo iq bd lp lq nc ls lt lu nd lw lx jw ne jx lz jz nf ka mb kc ng kd md me bi translated">2.确定CORS的回应</h1><p id="fd49" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">您可以通过查看服务器发送的响应标头来识别CORS响应。如果服务器被正确配置为发送支持CORS的响应头，那么web浏览器可以使用这些头来决定XMLHttpRequest应该继续还是失败。允许支持CORS的主要标题是<code class="fe nk nl nm nn b">Access-Control-Allow-Origin</code>。通过这一点，服务器可以指定哪些源可以访问它的资源。</p><p id="94e5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果服务器希望允许任何来源访问它的资源，那么它可以发送下面的响应头。</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="2ae5" class="ns lo iq nn b gy nt nu l nv nw">Access-Control-Allow-Origin: *</span></pre><p id="0ffd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果一个服务器希望允许一个特定的源访问它的资源，那么它可以发送一个类似的响应头。</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="63ac" class="ns lo iq nn b gy nt nu l nv nw">Access-Control-Allow-Origin: <a class="ae nx" href="https://tararoutray.com" rel="noopener ugc nofollow" target="_blank">https://tararoutray.com</a></span></pre><p id="1e20" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是一个服务器发送的CORS报头的快照。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/cabb97e84e377dc5af7e7f930ea11405.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L_d5X26gMwSAJ0oiLexDcw.png"/></div></div></figure></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="ea59" class="ln lo iq bd lp lq nc ls lt lu nd lw lx jw ne jx lz jz nf ka mb kc ng kd md me bi translated">3.CORS请求的类型</h1><p id="a5be" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">有两种类型的CORS请求:“简单”请求和“飞行前”请求。在进行CORS请求时，您不需要指定应该向服务器发送哪种类型的请求。您只需向外部服务器发出一个CORS请求，web浏览器就会决定使用哪种类型。让我们看一下这两种请求类型。</p><h2 id="aaa4" class="ns lo iq bd lp nz oa dn lt ob oc dp lx la od oe lz le of og mb li oh oi md oj bi translated">a)简单请求</h2><p id="35ed" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">只有当请求满足以下条件时，web浏览器才会将其视为“简单”请求:</p><ul class=""><li id="b56f" class="mf mg iq kt b ku kv kx ky la ok le ol li om lm on mn mo mp bi translated">已使用GET、POST或HEAD请求方法。</li><li id="49f4" class="mf mg iq kt b ku mq kx mr la ms le mt li mu lm on mn mo mp bi translated">没有使用<code class="fe nk nl nm nn b">ReadableStream</code>对象。</li><li id="7572" class="mf mg iq kt b ku mq kx mr la ms le mt li mu lm on mn mo mp bi translated">没有在任何<code class="fe nk nl nm nn b">XMLHttpRequestUpload </code>对象上注册事件监听器。</li><li id="b449" class="mf mg iq kt b ku mq kx mr la ms le mt li mu lm on mn mo mp bi translated">使用了CORS安全列表头。</li><li id="ee17" class="mf mg iq kt b ku mq kx mr la ms le mt li mu lm on mn mo mp bi translated">使用了一个内容类型的头，如:<code class="fe nk nl nm nn b">application/x-www-form-urlencoded</code>、<code class="fe nk nl nm nn b">multipart/form-data</code>或<code class="fe nk nl nm nn b">text/plain</code>。</li></ul><h2 id="659d" class="ns lo iq bd lp nz oa dn lt ob oc dp lx la od oe lz le of og mb li oh oi md oj bi translated">b)飞行前请求</h2><p id="03da" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">如果请求不符合上述“简单”请求的标准，则web浏览器将使用OPTIONS请求方法发出自动请求。该请求被称为“飞行前”请求。它将由web浏览器启动，以确定目标服务器的CORS能力。如果OPTIONS请求的响应告诉请求应该被拒绝，那么对服务器的实际请求将被拒绝。</p><p id="ddb0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当向服务器发出“预检”请求时，会发送以下请求标头，以便目标服务器可以识别用户正在尝试发送的请求类型:</p><ul class=""><li id="f894" class="mf mg iq kt b ku kv kx ky la ok le ol li om lm on mn mo mp bi translated">Access-Control-Request-Method(这表示将使用哪种HTTP请求方法，如GET、POST等。)</li><li id="9bc7" class="mf mg iq kt b ku mq kx mr la ms le mt li mu lm on mn mo mp bi translated">Access-Control-Request-Headers(这表示将发送什么样的自定义标头，如X-PINGOTHER、Content-Type)</li><li id="240c" class="mf mg iq kt b ku mq kx mr la ms le mt li mu lm on mn mo mp bi translated">来源(这表示将发出请求的客户端的URL，例如—https://tararoutray.com)</li></ul></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="8628" class="ln lo iq bd lp lq nc ls lt lu nd lw lx jw ne jx lz jz nf ka mb kc ng kd md me bi translated">4.在快速应用程序中启用CORS</h1><p id="5b3d" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">您可以在Express应用程序中轻松添加对CORS的支持。请参考下面的代码片段，了解如何通过几个简单的步骤启用CORS。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oo op l"/></div></figure></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="cbb4" class="ln lo iq bd lp lq nc ls lt lu nd lw lx jw ne jx lz jz nf ka mb kc ng kd md me bi translated">5.在PHP应用程序中启用CORS</h1><p id="9306" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">您可以轻松地在PHP应用程序中添加对CORS的支持。请参考下面的代码片段，了解如何通过几个简单的步骤启用CORS。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oo op l"/></div></figure></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><p id="ef2a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">太棒了。您已经学习了跨源资源共享(CORS ),以及如何在Express和PHP应用程序中正确配置它。</p><blockquote class="oq or os"><p id="2722" class="kr ks ot kt b ku kv jr kw kx ky ju kz ou lb lc ld ov lf lg lh ow lj lk ll lm ij bi translated">如果你喜欢读这篇文章，并且学到了一些新的东西，那么请鼓掌，与你的朋友分享，并关注我以获得我即将发布的文章的更新。你可以在<a class="ae nx" href="https://www.linkedin.com/in/tara-prasad-routray-b83027145/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上和我联系。</p></blockquote></div></div>    
</body>
</html>