<html>
<head>
<title>Implement the Key-Value Observation in Swift 5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Swift 5中实施键值观察</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/implement-the-key-value-observation-in-swift-5-e6f24638a26f?source=collection_archive---------9-----------------------#2020-06-03">https://levelup.gitconnected.com/implement-the-key-value-observation-in-swift-5-e6f24638a26f?source=collection_archive---------9-----------------------#2020-06-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="84e8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">轻松地将模型绑定到视图</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/59fd07b2f0c57d5482bc590d95075180.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KjVCpU9Xk2WNghzYFZjRxQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@lucabravo?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">卢卡·布拉沃</a>在<a class="ae ky" href="https://unsplash.com/s/photos/macbook?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="02a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将学习Swift中的键值观察(KVO ),并查看它在一个简单的Xcode Playgrounds示例中的实现。</p><p id="ecb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，键值观察允许我们观察属性的变化并做出反应。当我们想要在<code class="fe lv lw lx ly b">UIView</code>子类上即时显示来自<code class="fe lv lw lx ly b">Model</code>层的变化时，这尤其有用。</p><p id="8b2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该项目的源代码可以在文章的底部找到。</p><h1 id="b05f" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">我们开始吧</h1><p id="8af6" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">考虑下面的<code class="fe lv lw lx ly b">Counter</code>类:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="7b79" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了使<code class="fe lv lw lx ly b">Counter</code>符合键值观察的条件，我们必须从<code class="fe lv lw lx ly b">NSObject</code>继承，并将我们要观察的属性标记为<code class="fe lv lw lx ly b">@objc dynamic</code>。在我们的例子中，这个属性是<code class="fe lv lw lx ly b">value</code>。</p><p id="1dfc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的模型已经准备好了，现在让我们创建一个<code class="fe lv lw lx ly b">UIView</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="89e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">CounterView</code>在中间显示一个<code class="fe lv lw lx ly b">UILabel</code>，在顶部有一个“追加”<code class="fe lv lw lx ly b">UIButton</code>。我们希望在点击按钮时增加<code class="fe lv lw lx ly b">Counter</code>的值，并将其绑定到标签上。</p><p id="1654" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到我们添加了一个<code class="fe lv lw lx ly b">counter</code>(标记为Objective-C成员)和一个<code class="fe lv lw lx ly b">observation</code>属性。在初始化器内部，我们观察到<code class="fe lv lw lx ly b">Counter</code>的value属性发生了如下变化:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="426e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，<code class="fe lv lw lx ly b">currentCountLabel</code>会随着值的变化而立即更新:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi my"><img src="../Images/2cd592ca66d8ce6e25ee3a4d3dace359.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/1*EyNwoLtLMVUv3xOFk3bQSA.gif"/></div></figure></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="6d96" class="lz ma it bd mb mc ng me mf mg nh mi mj jz ni ka ml kc nj kd mn kf nk kg mp mq bi translated">资源</h1><p id="841b" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">项目的完整源代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="e996" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">包扎</h1><p id="e16c" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">对Swift更多鲜为人知的功能感兴趣？请随意查看我的其他相关文章:</p><ul class=""><li id="d4c3" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated"><a class="ae ky" href="https://medium.com/better-programming/what-is-the-difference-between-class-and-static-in-swift-3493848ed831" rel="noopener">Swift中的类和静态有什么区别？</a></li><li id="eb3b" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated"><a class="ae ky" href="https://medium.com/better-programming/what-is-the-operator-in-swift-7f6bc7623023" rel="noopener">Swift中的~=运算符是什么？</a></li><li id="fefc" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated"><a class="ae ky" href="https://medium.com/better-programming/what-is-the-vdsp-framework-in-swift-fe2539693e9a" rel="noopener">Swift中的vDSP框架是什么？</a></li><li id="4912" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated"><a class="ae ky" href="https://medium.com/better-programming/what-is-the-value-binding-pattern-in-swift-a644be3e0597" rel="noopener">Swift的价值绑定模式是什么？</a></li><li id="aa3e" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated"><a class="ae ky" href="https://medium.com/better-programming/what-is-the-customstringconvertible-protocol-in-swift-4b7ddbc5785b" rel="noopener">Swift中的CustomStringConvertible协议是什么？</a></li></ul><p id="faf6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>