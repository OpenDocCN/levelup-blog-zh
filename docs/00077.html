<html>
<head>
<title>Introducing React Scope</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">引入反应范围</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/introducing-react-scope-a87d9f5247df?source=collection_archive---------0-----------------------#2018-01-26">https://levelup.gitconnected.com/introducing-react-scope-a87d9f5247df?source=collection_archive---------0-----------------------#2018-01-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="826b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在与应用程序交互时，可视化React组件</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6e8e56b79de3b641b724281bf4a0cc63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WkvmOjlOSgJmtfALs_AfiQ.png"/></div></div></figure><p id="08c6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi ln translated">随着React应用程序变得越来越复杂，跟踪组件、状态和道具变得越来越困难。上个月，我和几个开发人员致力于构建这个问题的解决方案。我们决定创建<a class="ae lw" href="http://reactscope.com/" rel="noopener ugc nofollow" target="_blank"> React Scope </a>，这是一个Chrome扩展，提供了一个开发者React应用组件的层次树视图。</p><p id="3740" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">React作用域也是交互式的；当开发人员在其应用程序中触发状态改变时(例如，通过“点击”事件或表单输入)，树形图相应地更新。可视化状态变化和识别道具传递到哪里的能力可以使调试React应用程序变得容易得多。</p><h1 id="44a0" class="lx ly iq bd lz ma mb mc md me mf mg mh jw mi jx mj jz mk ka ml kc mm kd mn mo bi translated"><strong class="ak">工作原理</strong></h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/90c187ca26ea80a8f32abc7be88e4f72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UCTnWRjmvxPGwpuVFENvAw.png"/></div></div></figure><p id="1956" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">React Scope利用<a class="ae lw" href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en" rel="noopener ugc nofollow" target="_blank"> React开发工具</a>来检索关于客户端应用程序的信息。然后，我们使用这些数据来呈现DOM树可视化。用户只需将鼠标悬停在树中的节点上，就可以看到每个组件的名称、状态和属性。</p><p id="9629" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，开发人员可以与他们的React应用程序交互来触发状态更改。React作用域将这些数据保存在一个缓存中，该缓存连接到一个跟踪状态变化的侦听器函数。</p><p id="7155" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，React Scope提供了“上一个”和“下一个”按钮。单击这些按钮会将数据从缓存呈现到树中，允许开发人员在应用程序的当前状态和以前状态之间进行时间旅行。</p><h1 id="5299" class="lx ly iq bd lz ma mb mc md me mf mg mh jw mi jx mj jz mk ka ml kc mm kd mn mo bi translated"><strong class="ak">技术挑战</strong></h1><p id="ef67" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">构建React Scope伴随着一系列挑战我们极限的技术挑战。但是随着挑战而来的是成长，我们确实从这个项目中学到了很多。</p><p id="58fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下是我们必须解决的主要技术障碍:</p><h2 id="7bf3" class="mv ly iq bd lz mw mx dn md my mz dp mh la na nb mj le nc nd ml li ne nf mn ng bi translated">正在检索客户端应用程序数据</h2><p id="d2e6" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">我们利用React Developer Tools的纤程根(以及React 15和更低版本的渲染器)来获取客户端的应用程序数据，该数据返回一个对象。解析这个特别困难，因为这个对象嵌套很深。我们编写递归函数来提取必要的数据(组件名、状态和属性)，然后根据<a class="ae lw" href="https://d3js.org/" rel="noopener ugc nofollow" target="_blank"> D3.js </a>的严格格式对其进行格式化。</p><h2 id="a6c1" class="mv ly iq bd lz mw mx dn md my mz dp mh la na nb mj le nc nd ml li ne nf mn ng bi translated">处理异步事件</h2><p id="60b7" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">由于iframes和主浏览器窗口之间的异步关系，从React开发人员工具获取数据有点棘手。我们使用Async/Await来确保从用户应用程序传递到React范围的数据是准确的。</p><h2 id="737d" class="mv ly iq bd lz mw mx dn md my mz dp mh la na nb mj le nc nd ml li ne nf mn ng bi translated">管理状态数据</h2><p id="2054" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">最后，我们需要确定一个可行的缓存系统来存储初始和后续的状态变化数据。我们认为双向链表的线性结构最有意义。我们将客户机应用程序的初始状态存储为头/尾，并将任何新的状态数据添加到头中。然后，当用户单击“上一个”和“下一个”按钮时，我们应用链表逻辑来呈现相关的状态数据。例如，如果他们点击“previous”按钮，我们的应用程序将访问当前状态的“node.prev.value ”,并将该数据呈现到树形图中。</p><h1 id="a1da" class="lx ly iq bd lz ma mb mc md me mf mg mh jw mi jx mj jz mk ka ml kc mm kd mn mo bi translated">为什么我们相信它</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/26affd2491d616843b27170bcd6d72f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:256/format:webp/1*0ZqEXeTnUpx9ld-igx-EzQ.png"/></div></figure><p id="4a00" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们相信React Scope有潜力简化React应用程序开发，特别是使用我们的状态时间旅行功能。例如，如果用户输入触发了意外的状态变化，开发人员可以简单地参考以前的状态来确定错误发生在哪里。</p><p id="8d07" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，能够容易地可视化道具是如何被传递的可以使调试更容易。例如，如果某个属性在某个组件中是不可访问的，用户可以在树中导航，以识别它未能被传递的位置。</p><h1 id="9e37" class="lx ly iq bd lz ma mb mc md me mf mg mh jw mi jx mj jz mk ka ml kc mm kd mn mo bi translated">入门指南</h1><p id="5c5e" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">你可以从<a class="ae lw" href="https://chrome.google.com/webstore/detail/react-scope/nkkiickggkoojpdiajhgkbdmfgcinlai" rel="noopener ugc nofollow" target="_blank"> Chrome网络商店</a>安装React Scope。如果您有任何想法或建议，请给我们留下反馈。这是我们每个人的激情项目，我们也在积极探索改进的方法。</p><p id="51ae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">更多信息，请访问React Scope的<a class="ae lw" href="http://reactscope.com/" rel="noopener ugc nofollow" target="_blank">网站</a>和<a class="ae lw" href="https://github.com/React-Scope/React-Scope" rel="noopener ugc nofollow" target="_blank"> GitHub </a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://levelup.gitconnected.com?utm_source=bottom-banner"><div class="gh gi ni"><img src="../Images/439094b9a664ef0239afbc4565c6ca49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S9uYu-fFL3hIQLGVu0o-EQ.png"/></div></a></figure></div></div>    
</body>
</html>