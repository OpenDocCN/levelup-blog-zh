<html>
<head>
<title>Dynamic Dark/Light Mode On the Web</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Web上的动态暗/亮模式</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/dynamic-dark-light-mode-on-the-web-d55e4c0d3aa9?source=collection_archive---------10-----------------------#2021-02-01">https://levelup.gitconnected.com/dynamic-dark-light-mode-on-the-web-d55e4c0d3aa9?source=collection_archive---------10-----------------------#2021-02-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d2446ba8381e4223030e05ac960b6ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UWwfZxnBTZelPsVl3rlmfA.jpeg"/></div></div></figure><p id="4cc7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">黑暗模式近年来非常流行，因为常见的操作系统(iOS、Android、macOS、Windows)都支持黑暗模式，而且很多人更喜欢黑暗模式。大多数流行的移动应用程序也支持黑暗模式，所以喜欢黑暗模式的用户会感到舒服。</p><h1 id="0700" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">黑暗模式问题</h1><p id="3802" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">有很多网站通过一个切换按钮来支持黑暗模式，用户可以使用这个按钮在黑暗和光明模式之间切换。这里的问题是，用户必须点击那个按钮才能切换到黑暗模式，这给像我这样的懒惰用户带来了额外的工作。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/4ca3a54b154f583530ed5a5ce87c63cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*bfz0wWz47_H06wgLOJ80KA.gif"/></div></div></figure><p id="c9d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">还有其他类型的网站完全处于黑暗模式，没有切换到光明模式的选项。这个对黑暗模式的用户来说是完美的，但是光明模式的用户讨厌它。</p><p id="4a3d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">唯一的解决方案是，网站应该检测系统颜色主题，并动态切换到适当的颜色主题。</p><p id="7dca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好消息是，有一个CSS媒体功能！</p><h1 id="d353" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">CSS媒体查询来检测用户是否喜欢黑暗模式</h1><p id="e937" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">有一个CSS媒体查询，允许根据用户首选的配色方案覆盖或定义样式:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="049f" class="mj kx iq mf b gy mk ml l mm mn">@media (prefers-color-scheme: dark) {</span><span id="a58f" class="mj kx iq mf b gy mo ml l mm mn">}</span></pre><p id="7af4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在这里了解更多关于偏好配色方案CSS媒体查询<a class="ae mp" href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><p id="448a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">换句话说，如果网站在白色背景上有黑色文本，它可以调整为深色首选系统，如下所示:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="315c" class="mj kx iq mf b gy mk ml l mm mn">body {<br/>  background: FloralWhite;<br/>}</span><span id="ba54" class="mj kx iq mf b gy mo ml l mm mn">h1 {<br/>  color: #121212;<br/>}</span><span id="dabd" class="mj kx iq mf b gy mo ml l mm mn">@media (prefers-color-scheme: dark) {<br/>  body {<br/>      background: #121212;<br/>  }<br/>  <br/>  h1 {<br/>    color: FloralWhite;<br/>  }<br/>}</span></pre><p id="5f6b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这个例子中，我只是交换了媒体查询中的亮/暗颜色。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/2a431a15bfb6f263a48b6c9f4be26c3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*HylOoV7IItUZXZQ9A7T2jw.gif"/></div></figure><p id="e5c5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">查看<a class="ae mp" href="https://codepen.io/aramvr/pen/QWGWKbX" rel="noopener ugc nofollow" target="_blank">代码栏</a>中的完整示例。</p><h1 id="e33e" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">检测用户是否喜欢Javascript中的黑暗模式</h1><p id="2955" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">您还可以使用javascript来检测系统配色方案:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="c45d" class="mj kx iq mf b gy mk ml l mm mn">const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)");</span></pre><p id="31dc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，它可以用于将“黑暗模式”类添加到body标签中:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="0535" class="mj kx iq mf b gy mk ml l mm mn">if (prefersDarkScheme.matches) {<br/>  document.body.classList.add("dark-mode");<br/>}</span></pre><h1 id="b717" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">为黑暗模式使用CSS变量</h1><p id="70c5" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">控制网站中配色方案的另一种方法是声明<a class="ae mp" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties" rel="noopener ugc nofollow" target="_blank"> CSS变量</a>，然后在CSS媒体查询中更改变量颜色。</p><p id="afa3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在示例中，我在“:root”伪类中声明了CSS变量，因此它可以在整个HTML文档中全局应用:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="f9e1" class="mj kx iq mf b gy mk ml l mm mn">:root {<br/>  --main-bg-color: FloralWhite;<br/>  --main-text-color: #121212;<br/>}</span></pre><p id="d7dd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，让我们使用这些变量:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="cf17" class="mj kx iq mf b gy mk ml l mm mn">body {<br/>  background: var(--main-bg-color);<br/>}</span><span id="d565" class="mj kx iq mf b gy mo ml l mm mn">h1 {<br/>  color: var(--main-text-color);<br/>}</span></pre><p id="dd95" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，让我们更改“prefers-color-scheme”CSS媒体查询中这些变量的值:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="8329" class="mj kx iq mf b gy mk ml l mm mn">@media (prefers-color-scheme: dark) {<br/>  :root {<br/>    --main-bg-color: #121212;<br/>    --main-text-color: FloralWhite;<br/>  }<br/>}</span></pre><p id="02bc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">查看<a class="ae mp" href="https://codepen.io/aramvr/pen/ExNxNdr" rel="noopener ugc nofollow" target="_blank">代码栏</a>中的完整示例。</p><h1 id="3348" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">黑暗模式下的图像</h1><p id="dd70" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">黑暗模式下闪亮的图像有时会看起来太亮，这在黑暗模式下并不酷。</p><p id="2ea7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里有一个例子:</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mr"><img src="../Images/935fdec7bae113a5824c681993c9df34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A_W1sq3ikp9wLeHQSkz4XA.jpeg"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">洛根·诺林在<a class="ae mp" href="https://unsplash.com/photos/EvceCyopkKI" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="561d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Mark Otto分享了一个关于如何在黑暗模式下降低图像亮度的好例子<a class="ae mp" href="https://markdotto.com/2018/11/05/css-dark-mode/" rel="noopener ugc nofollow" target="_blank"/>:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="38d1" class="mj kx iq mf b gy mk ml l mm mn"><a class="ae mp" href="http://twitter.com/media" rel="noopener ugc nofollow" target="_blank">@media</a> (prefers-color-scheme: dark) {<br/> img {<br/>    opacity: .75;<br/>    transition: opacity .5s ease-in-out;<br/>  }<br/>  img:hover {<br/>    opacity: 1;<br/>  }<br/>}</span></pre><p id="1e9b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">结果对我来说很好:</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/db2ed1c100314a30a9639b0de0982680.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*VHKZH32NHA5PpEGF7oS99w.gif"/></div></figure><p id="710e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不幸的是，这对于每种情况都是不够的，有时我们需要根据系统首选的颜色主题完全改变图像源。例如，您可以将网站上的一些图标或徽标更改为黑暗模式。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/7a65c4a71ddddb67d3af9056bc5283fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*uWWi5UePN5pzQkZQcO-i5Q.gif"/></div></figure><p id="6877" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好消息是，有一种简单的方法可以实现这一点，只需使用HTML:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="1794" class="mj kx iq mf b gy mk ml l mm mn">&lt;picture&gt;<br/>  &lt;source srcset="light-image.png" media="(prefers-color-scheme: light) or (prefers-color-scheme: no-preference)"&gt;<br/>  &lt;source srcset="dark-image.png" media="(prefers-color-scheme: dark)"&gt;<br/>&lt;/picture&gt;</span></pre><p id="1672" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在上面的例子中，在“<picture>”标签中有两个“<source>”标签。它应该显示来自第一个来源的图像，如果用户更喜欢光模式或没有任何偏好。第二个光源将用于喜欢黑暗模式的用户。</source></picture></p><h1 id="aef1" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">浏览器支持</h1><p id="9860" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">包括Chrome 76+、Firefox 67+、Safari 12.5+(iOS上为13+)在内的主流浏览器都支持“prefers-color-scheme”媒体查询。<br/>它不支持Internet Explorer。</p><p id="252b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae mp" href="https://caniuse.com/?search=prefers-color-scheme" rel="noopener ugc nofollow" target="_blank">我可以用</a>估计超过89%的互联网用户覆盖率。</p><h1 id="a743" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结论</h1><p id="d045" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">许多主要网站已经支持黑暗模式，包括脸书、推特和Youtube。它不仅时尚，而且通过支持在明亮模式下对眼睛疲劳敏感的用户，增强了易用性。这也使得网站在用户使用的系统中保持一致。</p><p id="e9a5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你已经有了一个网站，我希望这篇文章对你有所帮助，让你的网站以正确的方式支持亮/暗模式。</p><p id="76f8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下次当你开始一个新的网络项目时，我不知道你是否能投入时间让网站支持黑暗模式，但你能做的是使用颜色变量，这将使你的应用程序在未来很容易进入“黑暗”网络。</p><p id="9c2b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">材料设计系统也支持黑暗模式，你可以在这里查看<a class="ae mp" href="https://material.io/design/color/dark-theme.html" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="2047" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你觉得这篇文章有帮助，给我一些掌声？。</p></div></div>    
</body>
</html>