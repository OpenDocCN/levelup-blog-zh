<html>
<head>
<title>User re-authentication in your React app.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React应用程序中的用户重新认证。</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/user-re-authentication-in-your-web-app-b11b98faa1f8?source=collection_archive---------1-----------------------#2022-06-09">https://levelup.gitconnected.com/user-re-authentication-in-your-web-app-b11b98faa1f8?source=collection_archive---------1-----------------------#2022-06-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="98d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一种在用户闲置一段时间后对其进行认证的方法。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi kl"><img src="../Images/d27f8be4a58c64c532fd8ebfd2740160.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*77mZX1a8XD-0anpgbYdCdQ.png"/></div></figure><h1 id="6842" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">介绍…</h1><p id="ecc9" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">增强应用安全性的方法之一是在必要时对用户进行重新认证。在本指南中，我们将使用<code class="fe lw lx ly lz b">react-idle-timer</code>库在前端应用程序上实现一个重新认证特性，以检测用户何时空闲了一段时间。对于本指南，认证设置将只是<code class="fe lw lx ly lz b">localStorage</code>。</p><p id="44b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> React-idle-timer </strong>是一个javascript库，用于检测和监控web应用程序上的用户活动。我们将把它用于这个应用程序，运行<code class="fe lw lx ly lz b">yarn add react-idle-timer</code>安装在你的回购。</p><h1 id="a741" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">应用程序。</h1><p id="0462" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">我们的Nextjs应用程序将有2个页面，即<code class="fe lw lx ly lz b">login.js</code>和<code class="fe lw lx ly lz b">index.js</code>。<code class="fe lw lx ly lz b">login.js</code>将包含登录视图和逻辑，而<code class="fe lw lx ly lz b">index.js</code>将包含我们的“仪表板”屏幕和重新授权逻辑。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="3788" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe lw lx ly lz b">login.js</code>中，我们将创建一个简单的登录表单和一个登录函数，将一个随机令牌保存到<code class="fe lw lx ly lz b">localStorage</code>并重定向到我们的<code class="fe lw lx ly lz b">index.js</code>页面。</p><p id="afcc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mc">在本指南中，只有表单按钮是真正有效的，但要确保您的表单输入在您的应用程序中也是有效的。</em></p><p id="6f02" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来是我们的<code class="fe lw lx ly lz b">index.js</code>页面，在这里实现了重新认证特性。</p><p id="19a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们从<code class="fe lw lx ly lz b">react-idle-timer</code>导入<code class="fe lw lx ly lz b">useIdleTimer</code>钩子，并在一些属性中调用它。</p><pre class="km kn ko kp gt md lz me mf aw mg bi"><span id="b685" class="mh ku iq lz b gy mi mj l mk ml">const { isIdle } = useIdleTimer({</span><span id="5781" class="mh ku iq lz b gy mm mj l mk ml">onIdle,</span><span id="5ecf" class="mh ku iq lz b gy mm mj l mk ml">timeout: 15000</span><span id="5dfd" class="mh ku iq lz b gy mm mj l mk ml">});</span></pre><p id="eedc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们经过两处房产。</p><ol class=""><li id="c5d5" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk ms mt mu mv bi translated">onIdle:当用户空闲一段时间后调用的函数。</li><li id="1e7a" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">超时:一段不活动的时间(以毫秒为单位),在此之后我们的用户被声明为空闲(调用onIdle)。在本指南中，我们将超时设置为15秒，但在实际应用中，超时时间可能是15-30分钟</li></ol><p id="37e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe lw lx ly lz b">useIdleTimer</code> <em class="mc">接受其他属性，如onActive、crossTab、startManually等。但是为了本指南的目的和简单性，我们将只讨论两个属性。</em></p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="90d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，在我们的<code class="fe lw lx ly lz b">index.js</code>文件中，我们创建了一个模型，当用户空闲时，该模型变得可见，并且用户输入他们的密码来重新验证他们自己。如果关闭模态或重新加载页面，则调用<code class="fe lw lx ly lz b">logout</code>函数。</p><p id="e261" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们已经通过一种简单的方法在您的web应用中实现了重新认证。你应该查看一下<a class="ae nb" href="https://idletimer.dev/" rel="noopener ugc nofollow" target="_blank"> react-idle-timer文档</a>以获得更多信息和用例。</p><p id="130c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">编码快乐！</p></div></div>    
</body>
</html>