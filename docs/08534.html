<html>
<head>
<title>How to Search Through Different Social Media Platforms with Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Node.js搜索不同的社交媒体平台</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-search-through-different-social-media-platforms-with-node-js-5a31b1f49b3d?source=collection_archive---------16-----------------------#2021-05-09">https://levelup.gitconnected.com/how-to-search-through-different-social-media-platforms-with-node-js-5a31b1f49b3d?source=collection_archive---------16-----------------------#2021-05-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ecc77c5830226ccfa763851ed5a1d27d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hs7xkzS65_BkTgH6jh8gKw.jpeg"/></div></div></figure><p id="86d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kw">本文原载于</em> <a class="ae kx" href="https://blog.shahednasser.com/how-to-search-through-different-social-media-platforms-with-node-js/" rel="noopener ugc nofollow" target="_blank"> <em class="kw">我的个人博客</em> </a> <em class="kw">。</em></p><p id="7b75" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本教程中，我们将介绍如何在Twitter、Instagram、Tumblr和Pinterest中进行搜索。我们将设置一个带有<code class="fe ky kz la lb b">express</code>的服务器，通过简单的设置来演示其功能。</p><p id="1876" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在GitHub库中找到本教程的代码。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="a538" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">项目设置</h1><p id="5e82" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">为项目创建一个目录，然后切换到该目录:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="59b8" class="mu lk iq lb b gy mv mw l mx my">mkdir social-search <br/>cd social-search</span></pre><p id="ec0b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，让我们用NPM初始化它:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="2e76" class="mu lk iq lb b gy mv mw l mx my">npm init</span></pre><p id="4bfe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以输入任何与您相关的信息，或者保留默认值。</p><p id="2b95" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完成后，我们将安装一些我们需要的初始包:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="f8ae" class="mu lk iq lb b gy mv mw l mx my">npm i express axios dotenv</span></pre><p id="833e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">其中<code class="fe ky kz la lb b">express</code>是我们的服务器，<code class="fe ky kz la lb b">axios</code>是发送请求，我们将在一些社交媒体平台上使用，而<code class="fe ky kz la lb b">dotenv</code>是用来在<code class="fe ky kz la lb b">.env</code>中存储必要的令牌。</p><p id="09d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，在根目录下创建一个名为<code class="fe ky kz la lb b">index.js</code>的文件，内容如下:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="c967" class="mu lk iq lb b gy mv mw l mx my">require('dotenv').config()<br/>const app = require('express')()<br/>const axios = require('axios')<br/><br/>app.listen(3000, function () {<br/>    console.log("started server for social search!")<br/>})</span></pre><p id="7d55" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将创建一个监听端口3000的简单服务器。启动我们的服务器需要做的最后一件事是在<code class="fe ky kz la lb b">package.json</code>中添加一个<code class="fe ky kz la lb b">start</code>脚本:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="9b2f" class="mu lk iq lb b gy mv mw l mx my">"scripts": {<br/>    "start": "node index.js"<br/>  },</span></pre><p id="0270" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就是这样！为了测试我们的服务器，让我们运行:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="08ba" class="mu lk iq lb b gy mv mw l mx my">npm start</span></pre><p id="8ed1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果一切正常，你会看到一条消息说“启动社交搜索服务器！”</p><p id="3689" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，我们准备开始通过社交媒体进行搜索。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="31fd" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">搜索Twitter</h1><p id="3053" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">要搜索twitter，你首先需要在Twitter的开发者门户上<a class="ae kx" href="https://developer.twitter.com/en/portal/apps/new" rel="noopener ugc nofollow" target="_blank">创建一个新的应用</a>。根据这是否是你的第一个应用程序，你可能需要输入一些额外的信息，但通常你只需要输入应用程序的名称。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/71799f52ec31345537bec8c6bfeb6f29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*W3fa5aeyqLGOW3YO.png"/></div></div></figure><p id="a00d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，您将获得API密钥和API秘密。确保复制它们并保存在某个地方。</p><p id="5443" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建应用程序后，转到应用程序页面上的“密钥和令牌”选项卡。在“身份验证令牌”下，单击“生成”获取访问令牌和密码。您将获得两个额外的密钥，您需要复制并保存在某个地方。</p><p id="9cc5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">回到我们的项目，创建保存密钥的<code class="fe ky kz la lb b">.env</code>文件:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="9ce5" class="mu lk iq lb b gy mv mw l mx my">TWITTER_API_KEY= <br/>TWITTER_API_SECRET= <br/>TWITTER_ACCESS_TOKEN= <br/>TWITTER_ACCESS_TOKEN_SECRET=</span></pre><p id="877d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">其中前两个密钥是您收到的前两个，后两个是您生成的。</p><p id="c24f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了方便地访问Twitter的API，我们将使用库<a class="ae kx" href="https://github.com/FeedHive/twitter-api-client" rel="noopener ugc nofollow" target="_blank"> twitter-api-client </a>。它提供了一个简单易用的界面来访问Twitter的API。我们需要首先安装NPM:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="71a0" class="mu lk iq lb b gy mv mw l mx my">npm i twitter-api-client</span></pre><p id="45f3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，转到<code class="fe ky kz la lb b">index.js</code>，请求库并初始化Twitter客户端:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="5676" class="mu lk iq lb b gy mv mw l mx my">const TwitterClient = require('twitter-api-client').TwitterClient<br/><br/>const twitterClient = new TwitterClient({<br/>    apiKey: process.env.TWITTER_API_KEY,<br/>    apiSecret: process.env.TWITTER_API_SECRET,<br/>    accessToken: process.env.TWITTER_ACCESS_TOKEN,<br/>    accessTokenSecret: process.env.TWITTER_ACCESS_TOKEN_SECRET,<br/>  });</span></pre><p id="3fbe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由于我们已经在文件的开头添加了<code class="fe ky kz la lb b">require('dotenv').config()</code>，我们现在可以使用我们在<code class="fe ky kz la lb b">.env</code>到<code class="fe ky kz la lb b">process.env</code>中添加的密钥。</p><p id="4282" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们将添加一个带<code class="fe ky kz la lb b">query</code>参数的新GET route，我们将使用它来搜索Twitter:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="117a" class="mu lk iq lb b gy mv mw l mx my">app.get('/twitter/:query', function (req, res) {<br/>});</span></pre><p id="c00b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这个路由的回调函数中，我们需要在twitter中搜索包含这个给定查询的tweets。为了搜索tweets，我们将使用<code class="fe ky kz la lb b">twitterClient.tweets.search</code>，它将包含各种属性的对象作为参数。我们将使用的是<code class="fe ky kz la lb b">q</code>,我们将通过它进行查询:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="a5d9" class="mu lk iq lb b gy mv mw l mx my">const query = req.params.query<br/><br/>twitterClient.tweets.search({<br/>    q: query<br/>}).then((response) =&gt; {<br/>    res.send(response)<br/>}).catch((err) =&gt; {<br/>        console.error(err)<br/>        res.status(500).send('An error occurred, please try again later.')<br/>})</span></pre><p id="f68f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我们得到回应，我们只是把它送回去。如果出现错误，我们会将其打印到控制台，并发送状态500响应。</p><p id="a2a8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就是这样！要进行测试，请启动服务器:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="5ce3" class="mu lk iq lb b gy mv mw l mx my">npm start</span></pre><p id="cad9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后转到我们指定的路由，传递任何您想要的查询。比如localhost:3000/twitter/cats。如果一切正常，您应该会看到一个保存tweets数组的JSON对象。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="ab gu cl na"><img src="../Images/31573030d1a65a61fbd5e375cc6c1f55.png" data-original-src="https://miro.medium.com/v2/format:webp/1*b31hiO4ynbDLRrXWEFF4aQ.png"/></div></figure><p id="6792" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以查看twitter-api-client 的<a class="ae kx" href="https://github.com/FeedHive/twitter-api-client/blob/main/REFERENCES.md#twitterclienttweetssearchparameters" rel="noopener ugc nofollow" target="_blank">文档，了解更多可以传递的选项、响应等…</a></p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="4f18" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">搜索Instagram</h1><p id="f287" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">Instagram APIs一塌糊涂。长话短说，现在有了可以通过<a class="ae kx" href="https://developers.facebook.com/docs/instagram-api" rel="noopener ugc nofollow" target="_blank"> Instagram Graph API </a>访问的<a class="ae kx" href="https://developers.facebook.com/docs/instagram-api/guides/hashtag-search/" rel="noopener ugc nofollow" target="_blank">标签搜索</a>。然而，这只能让你搜索某个用户的帖子，而不是一般的搜索。更不用说这个API需要您访问一堆端点，以便最终获得带有您正在查询的标签的帖子。</p><p id="669e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">还有另一种非官方的方式来搜索Instagram。您可以在<a class="ae kx" href="https://www.instagram.com/explore/tags/test/?__a=1" rel="noopener ugc nofollow" target="_blank">https://www.instagram.com/explore/tags/KEYWORD/?__a=1</a>找到一个端点，当您用查询替换关键字时，您将得到一个JSON响应，其中包含所有使用hashtag的帖子。</p><p id="1e0d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将创建一个新的端点，允许我们通过Instagram进行搜索:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="abc4" class="mu lk iq lb b gy mv mw l mx my">app.get('/instagram/:query', function (req, res) {<br/>	<br/>});</span></pre><p id="c238" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在回调中，我们将使用<code class="fe ky kz la lb b">axios</code>向上面提到的端点发送一个GET请求，然后在收到响应后发回:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="7e96" class="mu lk iq lb b gy mv mw l mx my">const query = req.params.query<br/><br/>axios.get('https://www.instagram.com/explore/tags/' + query + '/?__a=1')<br/>        .then((response) =&gt; {<br/>            res.send(response.data)<br/>        })<br/>        .catch((err) =&gt; {<br/>            console.error(err)<br/>            res.status(500).send('An error occurred, please try again later.')<br/>        })</span></pre><p id="43fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就是这样。要进行测试，请启动服务器:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="4dc3" class="mu lk iq lb b gy mv mw l mx my">npm start</span></pre><p id="c66d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，转到我们刚刚创建的路由，向它传递您想要的查询。比如localhost:3000/instagram/cats。如果一切都做得正确，响应将是一个JSON对象，其中包含使用标签cats的帖子。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="c6f2" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">搜索Tumblr</h1><p id="e781" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">要搜索Tumblr，首先<a class="ae kx" href="https://www.tumblr.com/oauth/apps" rel="noopener ugc nofollow" target="_blank">注册一个新的应用</a>。你需要一个tumblr账户来做这件事。您必须输入应用程序名称、应用程序URL(您只需输入<a class="ae kx" href="http://example.com)," rel="noopener ugc nofollow" target="_blank"> http://example.com)、</a>等信息…</p><p id="32d7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完成后，您将被重定向到应用程序页面，并显示新创建的应用程序。您可以看到OAuth消费者密钥。复制并添加到<code class="fe ky kz la lb b">.env</code>:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="443b" class="mu lk iq lb b gy mv mw l mx my">TUMBLR_CONSUMER_KEY=</span></pre><p id="6001" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要通过标签搜索文章，我们可以使用<code class="fe ky kz la lb b"><a class="ae kx" href="https://www.tumblr.com/docs/en/api/v2#tagged--get-posts-with-tag" rel="noopener ugc nofollow" target="_blank">/tagged</a></code> <a class="ae kx" href="https://www.tumblr.com/docs/en/api/v2#tagged--get-posts-with-tag" rel="noopener ugc nofollow" target="_blank">端点</a>。我们将把API键和标签传递给它，API键是我们刚刚添加到<code class="fe ky kz la lb b">.env</code>中的消费者键，标签是我们正在搜索的查询。</p><p id="06be" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们将创建新的GET路由:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="4904" class="mu lk iq lb b gy mv mw l mx my">app.get('/tumblr/:query', function (req, res) {<br/>    const query = req.params.query<br/>});</span></pre><p id="fb0d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">像往常一样，我们正在创建一个将查询作为参数的路由。</p><p id="172e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，我们将使用<code class="fe ky kz la lb b">axios</code>向Tumblr的<code class="fe ky kz la lb b">/tagged</code>端点发送GET请求，并向其传递参数，如上所述:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="3937" class="mu lk iq lb b gy mv mw l mx my">axios.get('https://api.tumblr.com/v2/tagged?tag=' + query + '&amp;api_key=' + process.env.TUMBLR_CONSUMER_KEY)<br/>        .then((response) =&gt; {<br/>            res.send(response.data)<br/>        })<br/>        .catch((err) =&gt; {<br/>            console.error(err)<br/>            res.status(500).send('An error occurred, please try again later.')<br/>        })</span></pre><p id="8594" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">和以前一样，我们只是在收到响应后将其发送回去。</p><p id="1060" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要进行测试，请启动服务器:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="8feb" class="mu lk iq lb b gy mv mw l mx my">npm start</span></pre><p id="9428" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，转到我们创建的路由，向它传递您想要的查询。比如localhost:3000/tumblr/cats。如果一切正常，响应将是一个JSON响应，带有一组使用标记cats的帖子</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="dd30" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">搜索Pinterest</h1><p id="a12c" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">Pinterest没有允许你搜索他们的pin的API。要搜索Pinterest，我们必须使用谷歌的定制搜索JSON API。这个API允许您检索JSON格式的搜索结果。我们将用它来搜索Pinterest。这不是最优的，但在我写这篇文章的时候，这是最简单的方法。你应该注意到，这个API每天免费提供100个查询，那么每增加1000个查询，你将被收取5美元的费用。</p><p id="f5b4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，你需要得到一个<a class="ae kx" href="https://developers.google.com/custom-search/v1/overview#api_key" rel="noopener ugc nofollow" target="_blank"> API密匙</a>来使用。只需点击“获取钥匙”按钮。它将要求您创建一个项目或使用一个现有的项目，然后您将获得一个API密钥。复制密钥并将其添加到<code class="fe ky kz la lb b">.env</code>:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="0f75" class="mu lk iq lb b gy mv mw l mx my">CUSTOM_SEARCH_API_KEY=</span></pre><p id="a41e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，你需要创建一个“可编程搜索”。你可以在这里做<a class="ae kx" href="https://cse.google.com/cse/create/new" rel="noopener ugc nofollow" target="_blank"/>。您需要输入您要搜索的网站的URL。在我们的情况下，它将是pinterest.com。您还可以更改可编程搜索的语言和名称。完成后，单击创建。它会带你到一个页面，向你展示一堆选项。选择“控制面板”按钮。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nb"><img src="../Images/749263fa1468c38f3852dbaab76f9841.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5NA0EDNAf_b-xJsM.png"/></div></div></figure><p id="5b43" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">进入控制面板后，复制“搜索引擎ID”并将其添加到<code class="fe ky kz la lb b">.env</code>:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="8fd3" class="mu lk iq lb b gy mv mw l mx my">CUSTOM_SEARCH_CX=</span></pre><p id="22aa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我们向API发送请求时，我们需要将它作为参数传递。</p><p id="0a79" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们首先创建查询Pinterest的GET路径:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="fe6e" class="mu lk iq lb b gy mv mw l mx my">app.get('/pinterest/:query', function (req, res) {<br/>    const query = req.params.query<br/>    <br/>    <br/>});</span></pre><p id="b61c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们将向自定义搜索API端点发送一个请求，向其传递API键、搜索引擎ID CX以及我们正在搜索的查询:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="d4b6" class="mu lk iq lb b gy mv mw l mx my">axios.get('https://www.googleapis.com/customsearch/v1?key=' + process.env.CUSTOM_SEARCH_API_KEY + <br/>        '&amp;cx=' + process.env.CUSTOM_SEARCH_CX + '&amp;q=' + query)<br/>        .then((response) =&gt; {<br/>            res.send(response.data.items)<br/>        })<br/>        .catch((err) =&gt; {<br/>            console.error(err)<br/>            res.status(500).send('An error occurred, please try again later.')<br/>        })</span></pre><p id="a61d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">像往常一样，我们只是发回收到的响应。</p><p id="a0fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要进行测试，请启动服务器:</p><pre class="mm mn mo mp gt mq lb mr ms aw mt bi"><span id="fc02" class="mu lk iq lb b gy mv mw l mx my">npm start</span></pre><p id="eb42" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，转到我们刚刚创建的路由，向它传递一个查询。比如localhost:3000/pinterest/cats。您将看到一个JSON数组，每个对象都有pin的标题、到它的链接和其他信息。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="8f05" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">结论</h1><p id="0f8e" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">在本教程中，我们复习了搜索Twitter、Instagram、Tumblr和Pinterest。在下一篇文章中，我们将继续搜索更多的社交媒体平台！</p></div></div>    
</body>
</html>