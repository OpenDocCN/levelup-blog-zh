# å¥å› :ç”¨æ³•å’Œæœ€ä½³å®è·µ

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/quines-usage-and-best-practices-41e988ae6894>

## ç¼–ç¨‹ï¼›ç¼–æ’

## ä½¿ç”¨ ES6 JavaScript æ¢ç´¢ Quinesï¼

![](img/acf2bcfd2c4bd64425f1bb8ef6b68d90.png)

[ç²˜åœŸé“¶è¡Œ](https://unsplash.com/fr/@claybanks?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) æ‹æ‘„çš„ç…§ç‰‡

quine æ˜¯ä¸€ç§è®¡ç®—æœºç¨‹åºï¼Œå®ƒä¸æ¥å—ä»»ä½•è¾“å…¥ï¼Œåªç”Ÿæˆè‡ªå·±æºä»£ç çš„å‰¯æœ¬ä½œä¸ºå”¯ä¸€è¾“å‡ºã€‚â€œè’¯å› â€ä¸€è¯æ˜¯æ•°å­¦å®¶å…¼å“²å­¦å®¶å¨æ‹‰å¾·Â·èŒƒÂ·å¥¥æ›¼Â·å¥å› æ ¹æ®â€œæŸ¥è¯¢â€ä¸€è¯åˆ›é€ çš„ã€‚

è’¯å› çš„æ¦‚å¿µå¯ä»¥è¿½æº¯åˆ° 20 ä¸–çºª 50 å¹´ä»£ï¼Œå½“æ—¶æ•°å­¦å®¶é“æ ¼æ‹‰æ–¯Â·éœå¤«æ–½å¡”ç‰¹(Douglas Hofstadter)å†™äº†ä¸€æœ¬åä¸ºã€Šå“¥å¾·å°”ã€åŸƒèˆå°”ã€å·´èµ«:ä¸€æ¡æ°¸æ’çš„é‡‘è‰²è¾«å­ã€‹çš„ä¹¦ï¼Œä»–åœ¨ä¹¦ä¸­å¼•å…¥äº†è‡ªæŒ‡å¥çš„æ€æƒ³ã€‚è¿™ä¸ªæƒ³æ³•åæ¥è¢«å¥å› æ‰©å±•ï¼Œä»–ç”¨å®ƒæ¥æè¿°ä¸€ä¸ªäº§ç”Ÿè‡ªå·±çš„æºä»£ç ä½œä¸ºè¾“å‡ºçš„ç¨‹åºã€‚

ç¬¬ä¸€ä¸ªå·²çŸ¥çš„å¥å› æ˜¯ç”±ç¨‹åºå‘˜å’Œé€»è¾‘å­¦å®¶ J. H. Conway åœ¨ 20 ä¸–çºª 60 å¹´ä»£æ—©æœŸå†™çš„ã€‚å®ƒæ˜¯ä¸€ä¸ªç®€çŸ­çš„è‡ªå¼•ç”¨ç¨‹åºï¼Œç”¨ LISP ç¼–ç¨‹è¯­è¨€ç¼–å†™ï¼Œç®€å•åœ°è¾“å‡ºè‡ªå·±æºä»£ç çš„å‰¯æœ¬ã€‚ä»é‚£ä»¥åï¼Œquines è¢«å†™æˆäº†è®¸å¤šä¸åŒçš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒä»¬å·²ç»æˆä¸ºè®¡ç®—æœºç§‘å­¦å®¶å’Œç¨‹åºå‘˜ä¹‹é—´çš„çƒ­é—¨ç ”ç©¶è¯¾é¢˜ã€‚

å¥å› ç»å¸¸è¢«è®¤ä¸ºæ˜¯å¯¹ç¨‹åºå‘˜çš„æŒ‘æˆ˜ï¼Œå› ä¸ºä»–ä»¬éœ€è¦ä¸€å®šç¨‹åº¦çš„åˆ›é€ åŠ›å’Œç‹¬åˆ›æ€§æ¥åˆ›é€ ã€‚ä¸€äº›æœ€å¤æ‚çš„æŸ¥è¯¢æ˜¯é‚£äº›èƒ½å¤Ÿç”Ÿæˆè‡ªå·±çš„æºä»£ç çš„å¤šä¸ªå‰¯æœ¬çš„æŸ¥è¯¢ï¼Œæˆ–è€…é‚£äº›ä½¿ç”¨ç¼–ç¨‹è¯­è¨€çš„é«˜çº§åŠŸèƒ½æ¥äº§ç”Ÿå…¶è¾“å‡ºçš„æŸ¥è¯¢ã€‚

## ç”¨ ES6 JavaScript å†™çš„ä¾‹å­

1.  ç¬¬ä¸€ä¸ªç¤ºä¾‹ä½¿ç”¨ ES6 æ¨¡æ¿å­—ç¬¦ä¸²è¯­æ³•è¾“å‡ºè‡ªå·±çš„æºä»£ç :

```
const quine = () => {
  const src = `const quine = () => {
    const src = \`${src}\`;
    return src;
  }`;
  return src;
}

console.log(quine());
```

2.ç¬¬äºŒä¸ªæŸ¥è¯¢ä½¿ç”¨ ES6 æ‰©å±•æ“ä½œç¬¦åˆ›å»ºè‡ªå·±æºä»£ç çš„å‰¯æœ¬:

```
const quine = () => {
  const arr = [...arr, ...arr];
  return arr.join("\n");
}

console.log(quine());
```

3.ç¬¬ä¸‰ä¸ª quine ä½¿ç”¨ ES6 æ˜ å°„å‡½æ•°åˆ›å»ºå…¶è‡ªå·±æºä»£ç çš„å¤šä¸ªå‰¯æœ¬:

```
const quine = () => {
  const src = `const quine = () => {
    const src = \`${src}\`;
    return src;
  }`;
  return [...Array(5)].map(() => src).join("\n\n");
} 

console.log(quine());
```

4.ç¬¬å››ä¸ª quine ä½¿ç”¨ ES6 reduce å‡½æ•°è¿æ¥è‡ªå·±æºä»£ç çš„å¤šä¸ªå‰¯æœ¬:

```
const quine = () => {
  const src = `const quine = () => {
    const src = \`${src}\`;
    return src;
  }`;
  return [...Array(5)].reduce((acc, _) => acc + "\n\n" + src, "");
}

console.log(quine()); 
```

5.æœ€åä¸€ä¸ªç¤ºä¾‹ä½¿ç”¨ ES6 *String.raw* æ–¹æ³•ä»¥æœ€å°çš„è½¬ä¹‰è¾“å‡ºè‡ªå·±çš„æºä»£ç :

```
const quine = () => {
  const src = String.raw`const quine = () => {
    const src = \`${src}\`;
    return src;
  }`;
  return src;
}

console.log(quine()); 
```

è¿™äº›ä¾‹å­å±•ç¤ºäº†ä½¿ç”¨ ES6 JavaScript çš„é«˜çº§ç‰¹æ€§ç¼–å†™æŸ¥è¯¢çš„åˆ›é€ æ€§æ–¹æ³•ã€‚æ— è®ºæ˜¯ä½œä¸ºç¼–ç¨‹æŒ‘æˆ˜è¿˜æ˜¯ä½œä¸ºä»£ç ç”Ÿæˆå·¥å…·ï¼Œquines éƒ½ç»§ç»­å¸å¼•å’Œæ¿€åŠ±ç€è®¡ç®—æœºç§‘å­¦å®¶å’Œç¨‹åºå‘˜ã€‚

## åœ¨ ES6 JavaScript ä¸­ä½¿ç”¨ quines æ—¶è¦è€ƒè™‘çš„æœ€ä½³å®è·µ:

1.  é¿å…ä½¿ç”¨`eval`æˆ–æ–°å‡½æ•°æ¥è¯„ä¼°æŸ¥è¯¢çš„è¾“å‡ºï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šå¼•å…¥å®‰å…¨æ¼æ´ã€‚ç›¸åï¼Œä½¿ç”¨å†…ç½®çš„ JavaScript æ–¹æ³•æ¥æ‰§è¡Œä»£ç ï¼Œæ¯”å¦‚æ²™ç›’ç¯å¢ƒä¸­çš„`Function.prototype.call`æˆ–`eval`å‡½æ•°ã€‚
2.  è¯·æ³¨æ„ä½¿ç”¨ quine ç”Ÿæˆå’Œæ‰§è¡Œå¤§é‡ä»£ç çš„æ€§èƒ½å½±å“ã€‚Quines å¯ä»¥å¿«é€Ÿç”Ÿæˆå¤§é‡æºä»£ç ï¼Œè¿™ä¼šå½±å“ç¨‹åºçš„æ€§èƒ½ã€‚
3.  åœ¨æºä»£ç ä¸­ä½¿ç”¨æ³¨é‡Šæ¥æ¸…æ¥šåœ°è§£é‡Š quine æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå¹¶ä¸ºç†è§£ä»£ç æä¾›ä»»ä½•å¿…è¦çš„ä¸Šä¸‹æ–‡ã€‚è¿™å¯ä»¥å¸®åŠ©å…¶ä»–æ­£åœ¨é˜…è¯»å’Œä½¿ç”¨ quine çš„ç¨‹åºå‘˜ã€‚
4.  é¿å…åœ¨ quine ä¸­ä½¿ç”¨å…¨å±€å˜é‡æˆ–æ”¹å˜ç°æœ‰å˜é‡ï¼Œå› ä¸ºè¿™å¯èƒ½å¯¼è‡´ä¸å¯é¢„æµ‹çš„è¡Œä¸ºï¼Œå¹¶ä½¿ä»£ç éš¾ä»¥ç†è§£ã€‚ç›¸åï¼Œä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹æŠ€æœ¯å’Œå±€éƒ¨å˜é‡æ¥ç¡®ä¿æŸ¥è¯¢æ˜¯ç»“æ„è‰¯å¥½ä¸”å¯é¢„æµ‹çš„ã€‚
5.  å½»åº•æµ‹è¯• quineï¼Œä»¥ç¡®ä¿å®ƒç”Ÿæˆäº†é¢„æœŸçš„è¾“å‡ºï¼Œå¹¶ä¸”ç”Ÿæˆçš„ä»£ç æ˜¯æ­£ç¡®ä¸”æ ¼å¼è‰¯å¥½çš„ã€‚è¿™æœ‰åŠ©äºé˜²æ­¢ quine ä¸­çš„ä»»ä½•é”™è¯¯ï¼Œå¹¶ç¡®ä¿å®ƒæ˜¯å¯é å’Œå€¼å¾—ä¿¡èµ–çš„ã€‚
6.  ä¸‹é¢æ˜¯ä¸€ä¸ªéµå¾ªè¿™äº›æœ€ä½³å®è·µçš„ç»“æ„è‰¯å¥½çš„å¥å› çš„ç¤ºä¾‹:

```
const quine = () => {
  // Use a local variable to store the source code of the quine
  const src = `const quine = () => {
    // Use a local variable to store the source code of the quine
    const src = \`${src}\`;
    return src;
  }`;

  // Use the Function constructor to create a new function from the source code
  // of the quine, and return the result of calling that function
  return new Function(src)();
}

console.log(quine());
```

è¿™ä¸ªæŸ¥è¯¢ä½¿ç”¨ä¸€ä¸ªå±€éƒ¨å˜é‡æ¥å­˜å‚¨æŸ¥è¯¢çš„æºä»£ç ï¼Œå¹¶ä½¿ç”¨å‡½æ•°æ„é€ å™¨ä»¥å®‰å…¨å’Œå¯é¢„æµ‹çš„æ–¹å¼æ‰§è¡Œç”Ÿæˆçš„ä»£ç ã€‚å®ƒæ³¨é‡Šè‰¯å¥½ï¼Œæ˜“äºç†è§£ï¼Œæ˜¯åœ¨ ES6 JavaScript ä¸­ä½¿ç”¨ quines çš„æœ€ä½³å®è·µçš„å¥½ä¾‹å­ã€‚

# åˆ†çº§ç¼–ç 

æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼åœ¨ä½ ç¦»å¼€ä¹‹å‰:

*   ğŸ‘ä¸ºæ•…äº‹é¼“æŒï¼Œè·Ÿç€ä½œè€…èµ°ğŸ‘‰
*   ğŸ“°æŸ¥çœ‹[çº§ç¼–ç å‡ºç‰ˆç‰©](https://levelup.gitconnected.com/?utm_source=pub&utm_medium=post)ä¸­çš„æ›´å¤šå†…å®¹
*   ğŸ””å…³æ³¨æˆ‘ä»¬:[æ¨ç‰¹](https://twitter.com/gitconnected) | [LinkedIn](https://www.linkedin.com/company/gitconnected) | [æ—¶äº‹é€šè®¯](https://newsletter.levelup.dev)

ğŸš€ğŸ‘‰ [**åŠ å…¥å‡çº§äººæ‰é›†ä½“ï¼Œæ‰¾åˆ°ä¸€ä»½æƒŠè‰³çš„å·¥ä½œ**](https://jobs.levelup.dev/talent/welcome?referral=true)