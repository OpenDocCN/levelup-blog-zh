<html>
<head>
<title>How to create a Minesweeper game in CSS without JS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何不用JS用CSS创建扫雷游戏</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-create-a-minesweeper-game-in-css-without-js-e0ace38aa216?source=collection_archive---------11-----------------------#2021-03-30">https://levelup.gitconnected.com/how-to-create-a-minesweeper-game-in-css-without-js-e0ace38aa216?source=collection_archive---------11-----------------------#2021-03-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="feb6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">谁说你不能用CSS编程？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c2a70b6abf0c2a195a73e7b65f40d85a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ozsHDy-i1CrLjoORbvF9w.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@sweetheartshi?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">鏡飛 匙</a> on <a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7d73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">听到“CSS”你会想到什么？可能是与颜色、字体、flexbox相关的东西，也可能是动画……一般来说，你可以想到与网页的<strong class="lb iu">外观相关的一切——这是正确的，因为根据维基百科，CSS是:</strong></p><blockquote class="lv lw lx"><p id="90d8" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">级联样式表是一种样式表语言，用于描述以HTML等标记语言编写的文档的<strong class="lb iu">表示</strong></p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mc"><img src="../Images/865042602e22b7a7f4e26178c9fd60ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AJ00R9Ssv81K2XIzYp4HiA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">这个迷因是我对CSS的第一个联想</figcaption></figure><p id="0828" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一些<strong class="lb iu">的交互和逻辑</strong>呢？我很确定这不是你的第一个想法。我们有一些像“hover”这样的伪选择器，所以我们可以引入基本的交互，但是逻辑和交互是我们通常使用Javascript来实现的。但是如果我们真的很固执呢？让我们尝试在CSS中创建一个全交互的<a class="ae ky" href="https://en.wikipedia.org/wiki/Microsoft_Minesweeper" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">扫雷</strong> </a> <strong class="lb iu"> </strong>游戏。<strong class="lb iu">不带JS！</strong></p><h2 id="34da" class="md me it bd mf mg mh dn mi mj mk dp ml li mm mn mo lm mp mq mr lq ms mt mu mv bi translated">放弃</h2><p id="e946" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">如果你正在寻找一些关于有用的东西的严肃文章，你可能应该去别的地方，因为我们在这篇文章中所构建的仅仅是乐趣。但是谁说娱乐不是生活中重要的一部分呢，即使我说的“娱乐”是指“CSS”！如果你准备好花些时间来玩HTML和CSS——让我们开始吧！</p><h1 id="67de" class="nb me it bd mf nc nd ne mi nf ng nh ml jz ni ka mo kc nj kd mr kf nk kg mu nl bi translated">扫雷舰—快速回顾</h1><p id="9bae" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">我假设你熟悉扫雷游戏，但为了以防万一，让我回忆一下主要规则:</p><ul class=""><li id="75ee" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated">游戏的主要部分是一个方格</li><li id="1601" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">您可以<strong class="lb iu">挖掘(揭开)</strong>田地或<strong class="lb iu">标记它们</strong>以指示潜在的地雷位置</li><li id="3506" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">如果未覆盖的区域有地雷，你会被炸飞并失败</li><li id="7af1" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">如果你发现所有的空地，你就赢了</li><li id="e4d5" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">未覆盖的区域包含一个数字，告知您周围有多少地雷</li><li id="1dda" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">公告板旁边是一个计数器，上面显示有多少地雷尚未标记</li><li id="9b6d" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">原扫雷包含一个定时器，但我们今天不会实现这一部分。在CSS中是可以的，可以自己试试！</li></ul><h1 id="8dbd" class="nb me it bd mf nc nd ne mi nf ng nh ml jz ni ka mo kc nj kd mr kf nk kg mu nl bi translated">让我们创造我们的领域</h1><p id="bea8" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">我们在21世纪，埃隆·马斯克想要在火星上建造一座城市，每年我都听说迪拜计划建造飞行出租车，但有一件事仍然是不可能的:为HTML复选框元素应用自定义样式。你不能就这样做:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="202e" class="md me it ob b gy of og l oh oi">input[type=checkbox] {<br/>  background: red;<br/>}</span></pre><p id="8c2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没用的。复选框不能被样式化——用户浏览器决定它们的外观。当然，这不是一个大问题，因为我们可以使用一个小技巧，创建一个连接到复选框的<code class="fe oj ok ol ob b">&lt;label&gt;</code>，然后隐藏<code class="fe oj ok ol ob b">&lt;input&gt;</code>并根据我们的需要设置<code class="fe oj ok ol ob b">&lt;label&gt;</code>的样式。即使复选框被隐藏，也可以通过点击相关的<code class="fe oj ok ol ob b">&lt;label&gt;</code>来选中它。此外，我们可以根据隐藏的复选框状态(选中/未选中)来更改标签外观</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="ca04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们有了第一个字段时，创建整个板很简单——只需通过复制粘贴创建更多的字段(或者使用一个循环，如果你使用的是<a class="ae ky" href="https://pugjs.org/language/iteration.html" rel="noopener ugc nofollow" target="_blank"> Pug </a>和<a class="ae ky" href="https://sass-lang.com/documentation/at-rules/control/for" rel="noopener ugc nofollow" target="_blank"> SCSS </a>)。此外，我们想阻止“挖”字段-一旦字段成为未覆盖的用户不能改变这一点。那没有任何意义。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="9932" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">暂时不是火箭科学。以防万一，如果你不熟悉SCSS的循环——记住这只是一个CSS代码生成器。当你在SCSS使用loop时，你只需要告诉“为我多次创建那些CSS规则”。在我们的例子中，我们还使用<code class="fe oj ok ol ob b">$i</code>作为迭代器，为<code class="fe oj ok ol ob b">#field-checkbox1</code>、<code class="fe oj ok ol ob b">#field-checkbox2</code>、<code class="fe oj ok ol ob b">#field-checkbox3</code>等生成单独的规则。下面你可以找到一个循环结果的例子。SCSS的循环将是我们代码库的重要组成部分，所以在继续之前，请确保您了解它们是如何工作的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/78482d8bf9149c78a43d1707bc9c4508.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pij1Hi4bxqzbBeaE8mD2pA.png"/></div></div></figure><p id="c7aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这一点上，我们可以添加一些额外的样式，让它看起来更友好——比如游戏的背景，居中等。我不会在这里粘贴每一行CSS代码，因为这是我们冒险中很无聊的一部分——如果你想看完整的源代码，你可以查看我附在本文底部的CodePen。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/814c0436124bb580bec73ffcfec55d94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CeR0FW-8MNYBOJoNLk1Afg.gif"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">微笑！我们有我们的董事会成立！</figcaption></figure><h1 id="6cef" class="nb me it bd mf nc nd ne mi nf ng nh ml jz ni ka mo kc nj kd mr kf nk kg mu nl bi translated">炸弹在哪里？</h1><p id="8792" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">我们现在的游戏中没有炸弹，但是在添加炸弹之前，我们应该让用户标记地雷。为了实现这一点，我们将复制我们的<strong class="lb iu">字段-图层</strong>:</p><ul class=""><li id="27e3" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><strong class="lb iu">字段层</strong>(我们在上面构建的)包含用户可以挖掘的字段。换句话说，这是我们的标准游戏板</li><li id="1b81" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><strong class="lb iu">标志层</strong>是一个相同的网格，但是用户可以在这一层标记潜在的炸弹位置</li></ul><p id="7463" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个技巧:在游戏板上方，我们将添加一个开关，允许用户选择是<em class="ly">挖</em>还是<em class="ly">标记炸弹</em>。基于它的状态，我们可以显示正确的层。当然，我们必须注意一些事情(括号中的数字将帮助您在下面的代码中找到相关的行):</p><ul class=""><li id="4932" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated">[1]当用户想要<strong class="lb iu">挖掘</strong>时，我们应该隐藏并禁用<strong class="lb iu">标志层</strong></li><li id="351e" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">[2]当用户想要<strong class="lb iu">标记炸弹</strong>时，应禁用并隐藏<strong class="lb iu">字段层</strong></li><li id="750b" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">[3]标记为炸弹的字段<strong class="lb iu">即使在“<strong class="lb iu">挖掘模式</strong>下也应可见</strong></li><li id="b7ce" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">[4] <strong class="lb iu">未覆盖的</strong>字段即使在“<strong class="lb iu">标记模式</strong>下也应可见</li><li id="a5f3" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">[5]用户无法<strong class="lb iu">揭开</strong>标记为<strong class="lb iu">炸弹</strong>的字段</li><li id="7823" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">[6]用户不能将<strong class="lb iu">未覆盖的</strong>域标记为<strong class="lb iu">炸弹</strong></li></ul><p id="0b89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">哇，有很多事情要做！这将需要一些时间来设置正确的选择器来操作<code class="fe oj ok ol ob b">visible</code>和<code class="fe oj ok ol ob b">pointer-events</code>属性，但基本上，上述所有要求都很容易满足。我喜欢把这种任务想象成谜题😅</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/56f287c0b1d0bb6320c438caa4f74fe8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*_z2yrcNnrxoJvSdgv6oAGw.gif"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">它开始看起来像扫雷舰！</figcaption></figure><p id="98a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好吧，我不得不承认这不是世界上最有趣的游戏，因为你不能赢或输。但是和我呆在一起——我们马上会添加一些炸弹！</p><h1 id="8cf2" class="nb me it bd mf nc nd ne mi nf ng nh ml jz ni ka mo kc nj kd mr kf nk kg mu nl bi translated">这里有炸弹，那里有炸弹…</h1><p id="5948" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">首先，我们必须以某种方式硬编码关于哪些区域有地雷的信息。在正常情况下，你可能会用HTML(或者更好——用Javascript随机生成)来编写这个代码，但是嘿——让我们变得荒谬一些，使用CSS来保存关于炸弹位置的信息。因为为什么不呢？</p><p id="4ae3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将在SCSS创建一个列表，它将指出哪些字段包含炸弹。为了使这个列表更具可读性，我断开了一些行，使它看起来像一个矩阵——但实际上，它是普通的单向列表。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="3b2a" class="md me it ob b gy of og l oh oi">// 1 means "bomb", 0 means an empty field<br/>$fields:  1, 0, 0, 0, 1,<br/>          0, 0, 1, 0, 0,<br/>          1, 1, 0, 0, 1,<br/>          0, 0, 1, 0, 1,<br/>          0, 0, 1, 1, 1;</span></pre><p id="8e58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基于<code class="fe oj ok ol ob b">$fields</code>列表，我们可以创建选择器来引用有(或没有)炸弹的字段，如果我们想确定用户是赢了还是输了，这是非常有用的。怎么会？这是小菜一碟:</p><ul class=""><li id="5b87" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated">默认情况下，两个终端屏幕(赢家和输家)都是隐藏的</li><li id="5bbf" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">如果用户<strong class="lb iu">发现一个包含炸弹【2】</strong>的字段，我们可以显示loser-screen</li><li id="61cf" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">为了获胜，用户必须揭开所有的空字段，所以当<strong class="lb iu">所有的空字段都被挖开【3】</strong>时，我们将显示一个<em class="ly">赢家屏幕</em>。这将是一个非常长的CSS选择器，但幸运的是，SCSS给了我们一个<code class="fe oj ok ol ob b">append</code>函数，它将帮助我们创建它<strong class="lb iu">【1】</strong></li><li id="1e05" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">因为我们的游戏在<code class="fe oj ok ol ob b">&lt;form&gt;</code>里面，所以我们可以将<code class="fe oj ok ol ob b">&lt;button type="reset"&gt;</code>添加到终端屏幕中。这个按钮将清除整个表单，包括所有的复选框——这样游戏就可以很容易地重新开始</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/22547bb7ab694eb5f542a03ea4cf0126.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*MOxGG6V0gyC-RIkOnitXtg.gif"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">我们快完成了！</figcaption></figure><h1 id="90cc" class="nb me it bd mf nc nd ne mi nf ng nh ml jz ni ka mo kc nj kd mr kf nk kg mu nl bi translated">向未覆盖的字段添加提示</h1><p id="0554" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">我们的游戏还缺少一个重要的东西。扫雷不是猜测炸弹在哪里，所以我们必须为用户添加一些提示。就像在最初的游戏中，我们会在每一个空白区域(我是说没有炸弹的区域)填入一个数字来表示周围有多少地雷。我们可以硬编码这些数字，因为我们的游戏板不是随机生成的，但那会很无聊！让我们假设我们是认真的CSS程序员，并创建一个适用于每个字段集的简单算法。为此，我们将遍历所有字段，检查邻居是否包含炸弹。接下来，对于<code class="fe oj ok ol ob b">content</code>属性，我们将用数字填充每个空字段</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/c4ed9d845db2ea9717056d18d029bc27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*b2QP-kOTv3l1dRaoPHCF2w.gif"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">不错！我们可以在这里结束！</figcaption></figure><h2 id="a4e8" class="md me it bd mf mg mh dn mi mj mk dp ml li mm mn mo lm mp mq mr lq ms mt mu mv bi translated">还有一件事！</h2><p id="2303" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">我们终于有了一个功能齐全的游戏！但是我想给你看一组更有趣的CSS属性。听说过CSS中的<a class="ae ky" href="https://www.w3schools.com/css/css_counters.asp" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">计数器</strong> </a> <strong class="lb iu"> </strong>吗(我指的是纯CSS，不是SCSS)？它们是CSS中的某种变量，可以被操纵(增加和减少)。它们是CSS中某种可以操纵的变量(增加和减少)。它们可以用来计算带有特定选择器的元素在HTML中出现的次数。我们可以使用它们向用户显示关于有多少字段未被覆盖以及有多少字段被标记为炸弹的信息。让我们通过定义未覆盖/标记字段的选择器来增加我们的计数器！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/08950eddf6892eea2dac06ce86d2320f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*dq_c_vGB9Hd6QZwB-VWLrA.gif"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">决赛成绩</figcaption></figure><h1 id="22bb" class="nb me it bd mf nc nd ne mi nf ng nh ml jz ni ka mo kc nj kd mr kf nk kg mu nl bi translated">谢谢大家！</h1><p id="b083" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">如果你正在读这句话，我想感谢你和我一起冒险。用CSS创建一个游戏是一种疯狂，但是我在这个小项目中度过了一段非常美好的时光！我想很快展示更多不太明显的CSS项目，敬请关注😃</p><blockquote class="lv lw lx"><p id="22bf" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">我能在哪里找到源代码吗？</p></blockquote><p id="f7d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的，检查下面的CodePen找到完整的源代码。这段代码可以通过使用一些mixins和其他来自SCSS的很酷的东西写得更好，但是，我想让它尽可能简单，让不是SCSS忍者的人也能理解。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or on l"/></div></figure><p id="5ba8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">再次感谢您，再见！</strong></p></div></div>    
</body>
</html>