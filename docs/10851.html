<html>
<head>
<title>Automatic Liver Segmentation — Part 2/4: Data Preparation and Preprocess</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">肝脏自动分割第2/4部分:数据准备和预处理</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/automatic-liver-segmentation-part-2-4-data-preparation-and-preprocess-981d790f5555?source=collection_archive---------16-----------------------#2022-01-17">https://levelup.gitconnected.com/automatic-liver-segmentation-part-2-4-data-preparation-and-preprocess-981d790f5555?source=collection_archive---------16-----------------------#2022-01-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="65e5" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">用于医疗成像的人工智能</h2><div class=""/><div class=""><h2 id="9b0a" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">关键词:Python，Monai，PyTorch，Kaggle，迪卡侬数据集</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/93dbb217227cc42b85631f7c0666219d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GG7h27SqJ3hQy3KBDNxEMg.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</figcaption></figure><blockquote class="lh li lj"><p id="2872" class="lk ll lm ln b lo lp kd lq lr ls kg lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">我网站上的博文原文是<a class="ae mh" href="https://pycad.co/liver-segmentation-part-2/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln jd">此处</strong> </a>。</p></blockquote><h1 id="2736" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">摘要</h1><p id="0ca9" class="pw-post-body-paragraph lk ll it ln b lo na kd lq lr nb kg lt nc nd lw lx ne nf ma mb ng nh me mf mg im bi translated">肝脏分割过程中最重要的一个方面是本系列的这一部分。我们将讨论以下主题:</p><ul class=""><li id="5ca7" class="ni nj it ln b lo lp lr ls nc nk ne nl ng nm mg nn no np nq bi translated">如何查找和下载数据集。</li><li id="4fe8" class="ni nj it ln b lo nr lr ns nc nt ne nu ng nv mg nn no np nq bi translated">下载数据后(预处理前)如何准备数据？</li><li id="e094" class="ni nj it ln b lo nr lr ns nc nt ne nu ng nv mg nn no np nq bi translated">你需要安装哪些软件包，如何安装？</li><li id="92bb" class="ni nj it ln b lo nr lr ns nc nt ne nu ng nv mg nn no np nq bi translated">如何在3D体积中使用Monai和PyTorch进行预处理？</li></ul><p id="acda" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">这篇文章将会是最长的，但是我会试着把它分成几个可管理的部分，这样你就不会迷路了。</p></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="cd73" class="mi mj it bd mk ml od mn mo mp oe mr ms ki of kj mu kl og km mw ko oh kp my mz bi translated">下载并准备数据</h1><h2 id="26e7" class="oi mj it bd mk oj ok dn mo ol om dp ms nc on oo mu ne op oq mw ng or os my iz bi translated">数据下载</h2><p id="8301" class="pw-post-body-paragraph lk ll it ln b lo na kd lq lr nb kg lt nc nd lw lx ne nf ma mb ng nh me mf mg im bi translated">因为我们将在本课程中为3D体积分割肝脏，所以我们将需要3D数据(最好是nifti文件)。我说nifti文件是因为我们将使用Monai在预处理部分进行这项工作，而Monai不支持其他文件格式。但是不要惊慌，任何问题总会有解决的办法。使用python或第三方工具，几乎所有的医学成像文件都可以转换成nifties。大多数情况下，dicom文件用于表示患者；我相信你知道dicom和nifti文件的区别！如果你不知道，请阅读<a class="ae mh" href="https://pycad.co/what-is-the-difference-between-dicom-and-nifti-images/" rel="noopener ugc nofollow" target="_blank">这篇博文</a>以获得更好的理解(nifti文件只是一系列相互之间距离很小的dicoms)。</p><p id="6cce" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">如果你还没有数据，让我们从如何获得数据开始，然后我们将讨论如何处理它们。</p><p id="60e4" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">目前，我只知道两个网站可以提供大量的医学影像数据集(如果你知道更多，请在评论中告诉我们，以便我们感兴趣)。</p><ul class=""><li id="f61b" class="ni nj it ln b lo lp lr ls nc nk ne nl ng nm mg nn no np nq bi translated"><a class="ae mh" href="https://www.kaggle.com/datasets" rel="noopener ugc nofollow" target="_blank"> <strong class="ln jd"> <em class="lm"> Kaggle </em> </strong> </a>:这是众多可以找到数据、代码和挑战的大型数据库之一…</li><li id="b510" class="ni nj it ln b lo nr lr ns nc nt ne nu ng nv mg nn no np nq bi translated"><a class="ae mh" href="http://medicaldecathlon.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln jd"> <em class="lm">迪卡侬数据集</em> </strong> </a>:该数据库专门用于医学成像，因此您可以找到各种工作的nifti体积，您可以自己测试(在我们的教程中，我们将使用该网站下载肝脏体积)。</li></ul><p id="09b4" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">因此，您可以从迪卡侬获取肝脏数据集开始，或者如果您想做其他事情，也可以搜索您的特定数据集。</p></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h2 id="9fb1" class="oi mj it bd mk oj ok dn mo ol om dp ms nc on oo mu ne op oq mw ng or os my iz bi translated">将数据转换成Nifti</h2><p id="b6e2" class="pw-post-body-paragraph lk ll it ln b lo na kd lq lr nb kg lt nc nd lw lx ne nf ma mb ng nh me mf mg im bi translated">正如我在前面的段落中提到的，您可能会使用与我在本课中使用的数据集不同的数据集，并且它们可能不是nifti文件，因此您需要转换它们。</p><p id="50b4" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">让我们从可以转换成nifti的最基本的文件类型开始:dicom文件。</p><p id="5ad6" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">我已经写了一篇关于如何做到这一点的博文，你可以在这里找到。不过，我会给你一个简短的代码描述，这样你就可以使用它，而不必阅读其他博客文章。</p><p id="64a2" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">在阅读了关于dicom和nifti文件之间的区别的博文后，我相信您现在对我们需要做什么来创建ni fti有了更好的理解。我们现在要做的就是将每个dicom系列放在一个数组中，该数组将被用作新的nifti文件中的帧数据。别担心，我说的只是由<a class="ae mh" href="https://github.com/icometrix/dicom2nifti" rel="noopener ugc nofollow" target="_blank"> dicom2nifti </a>库处理的过程；你所要做的就是打电话给它，它会处理剩下的事情。</p><p id="a68d" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">您可以从使用pip安装软件包开始:</p><p id="2a1f" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated"><code class="fe ot ou ov ow b"><strong class="ln jd"><em class="lm">pip install dicom2nifti</em></strong></code></p><p id="7ba3" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">现在，您可以直接调用函数“dicom_series_to_nifti ”,将包含一个患者的dicom系列的文件夹路径作为第一个参数，将输出文件的路径+输出文件的名称和扩展名作为第二个参数(例如:patient1.nii ),如果您希望文件被压缩，请在名称末尾添加the.gz扩展名(例如:patient1.nii.gz)。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ox"><img src="../Images/1288e6a41938fad48cfd5072f01a8e97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cLsjWI3JoSzaZZy-ws3pkQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者使用<a class="ae mh" href="https://carbon.now.sh/" rel="noopener ugc nofollow" target="_blank">碳</a>制作的图片</figcaption></figure><p id="9899" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">此代码仅适用于一名患者，因此如果您有多名患者，则可以使用此代码:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oy"><img src="../Images/21c6fa00acabdd78b35ea6d54f57cd74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uQyUhUazWwFPObJgC3pzUA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者使用<a class="ae mh" href="https://carbon.now.sh/" rel="noopener ugc nofollow" target="_blank">碳</a>制作</figcaption></figure><p id="9215" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">这就是如何将dicom文件转换为nifti，但是如果您有不同种类的数据，您可能无法找到Python的转换脚本，在这种情况下，您将需要第三方工具，如MatLab或3D slicer…</p><p id="5f32" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">3D切片器可以支持的文件有:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oz"><img src="../Images/5c49c32b7925b0730afcb49817a8c50c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GxV5xqczEY4sfYzI_o23Mw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">为3D切片器<a class="ae mh" href="https://slicer.readthedocs.io/en/latest/user_guide/data_loading_and_saving.html" rel="noopener ugc nofollow" target="_blank">网站</a>截取的图像</figcaption></figure><p id="1e28" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">当然还有dicom文件。</p><p id="c975" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">因此，如果您的文件在可以使用3D切片器转换的文件列表中，您可以在没有脚本的情况下使用它；否则，你将不得不在谷歌上寻找合适的软件来转换它们。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pa"><img src="../Images/e238e87419e5007f0c3ae27644b84915.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GsP-C0esCKzweoQncTgkUQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">为3D切片器<a class="ae mh" href="https://slicer.readthedocs.io/en/latest/user_guide/data_loading_and_saving.html" rel="noopener ugc nofollow" target="_blank">网站</a>截取的图像</figcaption></figure></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h2 id="22fe" class="oi mj it bd mk oj ok dn mo ol om dp ms nc on oo mu ne op oq mw ng or os my iz bi translated">创建65个切片的组(如果需要)</h2><p id="2778" class="pw-post-body-paragraph lk ll it ln b lo na kd lq lr nb kg lt nc nd lw lx ne nf ma mb ng nh me mf mg im bi translated">让我们进入下一个阶段，即将切片分成65组(或者任意数量的切片)。你可能想知道为什么我们需要采取这一步。当您获得一个公共数据集或者甚至您有自己的数据时，您几乎总是会注意到每个患者的切片数量是不同的。如果你在参加培训前不处理这个差异，它可能会成为一个问题。</p><p id="591c" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">请记住，我们将进行3D分割，因此您的输入体积应该都是相同的大小。当然，您永远也不会收到包含所有患者的精确切片数量的数据集。</p><p id="e5bc" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">如果所有患者的切片数量相似，则不需要自己建立分组。因为我们将在预处理部分执行resize，所以所有的输入将具有相同数量的切片。然而，如果一个病人有300个切片，将其减少到100或60个切片，您将丢失大量可能携带身体重要信息的切片。</p><p id="2e8d" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">你可能会争辩说，让我们将输入中的切片数量设置为300。好问题，但我认为你不应该这样做。</p><ol class=""><li id="fb2a" class="ni nj it ln b lo lp lr ls nc nk ne nl ng nm mg pb no np nq bi translated">训练将非常缓慢，你的GPU/CPU内存可能无法处理这样大的输入。</li><li id="b567" class="ni nj it ln b lo nr lr ns nc nt ne nu ng nv mg pb no np nq bi translated">如果您将切片数量等于60的患者放大为300个切片，您将丢失所有信息(您将创建不存在的切片)。</li></ol><p id="82e1" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">因此，您需要将切片分成小组，每个小组代表患者的一小部分，然后将它们组合起来以获取整个体积。</p><p id="686a" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">要完成这一部分，您需要遵循以下步骤:</p><p id="7529" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated"><strong class="ln jd"> <em class="lm"> #1-将你所有的nifti文件转换成DICOM</em></strong></p><p id="bda2" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">如果已经有dicom文件，不需要马上转换成nifti否则，您需要将它们转换成dicom来建立小组。</p><p id="2366" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">不幸的是，没有特殊的python脚本可以执行这种转换。我写了一篇关于如何用Python从nifti转换成dicom的博文，这里 可以看到<a class="ae mh" href="https://pycad.co/nifti2dicom/" rel="noopener ugc nofollow" target="_blank">。我的方法的问题是，它给所有的dicom系列相同的索引，这意味着所有的切片在身体中有相同的位置，你不能把它们转换回nifties。</a></p><p id="c57c" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">因此，您可以使用软件3D slicer执行此转换；我知道这需要时间，但我找不到更好的解决方案(如果有人知道更好的解决方案，请在评论中提供链接，谢谢:)。</p><p id="ef8a" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated"><strong class="ln jd"> <em class="lm"> #2-将每65个切片移入一个文件夹</em> </strong></p><p id="663e" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">当所有患者都是dicom格式后，您可以开始将指定数量的切片放入代表身体一小部分的文件夹中；对我来说，我选了65(是随机选择)，但你可以随便选；尽量不要让子患者通过100个切片。</p><p id="48f3" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">您可以使用我编写的python脚本来完成这部分数据准备工作:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pc"><img src="../Images/b3901e643389b54129cc815a1dd41767.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b-1gS5TgEFVgB09LdZ_2cw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者使用<a class="ae mh" href="https://carbon.now.sh/" rel="noopener ugc nofollow" target="_blank">碳</a>制作</figcaption></figure><p id="5156" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated"><strong class="ln jd"> <em class="lm"> #3-将65个切片组重新转换为nifti文件</em> </strong></p><p id="5e28" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">运行上面的脚本后，您将在每个文件夹中获得65个切片(因为您可以在函数的参数中更改切片的数量)。现在，我们必须将这些65切片组转换成nifti文件，以便在训练中使用它们。</p><p id="3f14" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">我们将利用我前面提到的相同脚本。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pd"><img src="../Images/35bc3b9910eebb6fc619efb8ac56f5f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I3OkkJlgSArRRS9ACklK4A.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者使用<a class="ae mh" href="https://carbon.now.sh/" rel="noopener ugc nofollow" target="_blank">碳</a>制作</figcaption></figure><p id="fd4b" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated"><strong class="ln jd"> <em class="lm"> #4-删除空卷</em> </strong></p><p id="3cc5" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">在转换/创建新的nifti文件后，您将获得某些nifti组，其中没有代表肝脏的切片。这些空切片将在训练过程中导致问题(它们不会导致错误，但会降低模型的准确性)。要消除它们，你必须先了解它们。为此，我创建了一个定位空组的脚本，之后您可以手动删除它们，或者添加几行代码来删除它们。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pc"><img src="../Images/3bf62635d92809acfcd783272849b277.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2VnyHCe9mnBFZZGim8cZuA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者使用<a class="ae mh" href="https://carbon.now.sh/" rel="noopener ugc nofollow" target="_blank">碳</a>制作的图像</figcaption></figure><h2 id="a713" class="oi mj it bd mk oj ok dn mo ol om dp ms nc on oo mu ne op oq mw ng or os my iz bi translated"><strong class="ak"> <em class="pe">将数据划分到训练/测试文件夹</em> </strong></h2><p id="2ac5" class="pw-post-body-paragraph lk ll it ln b lo na kd lq lr nb kg lt nc nd lw lx ne nf ma mb ng nh me mf mg im bi translated">现在一切就绪，您所要做的就是将您的数据划分到train和test文件夹中，这样我们就可以开始预处理了。</p><p id="28a0" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">如果你想使用我的代码，你应该用我的方式命名你的文件，这样运行脚本就简单了。</p><p id="aa76" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated"><strong class="ln jd"><em class="lm">【train volumes】</em></strong>:包含用于训练的图像/体积/CT扫描的文件夹。</p><p id="ce03" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated"><strong class="ln jd"><em class="lm">【train segmentation】</em></strong>:包含培训标签/分段的文件夹。</p><p id="112a" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated"><strong class="ln jd"><em class="lm">【test volumes】</em></strong>:包含用于测试的图像/体积/CT扫描的文件夹。</p><p id="4d69" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated"><strong class="ln jd"><em class="lm">【test segmentation】</em></strong>:包含测试标签/分段的文件夹。</p></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="d4e6" class="mi mj it bd mk ml od mn mo mp oe mr ms ki of kj mu kl og km mw ko oh kp my mz bi translated">安装Monai、PyTorch、Cuda和Cudnn</h1><p id="f973" class="pw-post-body-paragraph lk ll it ln b lo na kd lq lr nb kg lt nc nd lw lx ne nf ma mb ng nh me mf mg im bi translated">我们需要安装几个包来完成这个项目，从核心包Monai开始。您还需要安装其他包来在GPU上运行代码。我相信在CPU上做这个项目是不可行的，因为训练要花很长时间才能完成。</p><p id="4558" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">所以要安装Monai，您只需在您的终端中运行这一行就可以使用pip包。</p><p id="0c0a" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated"><code class="fe ot ou ov ow b"><strong class="ln jd"><em class="lm">pip install monai</em></strong></code></p><blockquote class="pf"><p id="8378" class="pg ph it bd pi pj pk pl pm pn po mg dk translated"><strong class="ak"> <em class="pe">注意:</em> </strong>对我来说，虚拟环境更好，因为我为给定项目安装的任何包都安装在虚拟环境中，这意味着如果项目结束后我不需要那个包，我可以简单地用虚拟环境卸载它。如果您更喜欢使用虚拟环境，您可以构建conda环境或常规Python虚拟环境。</p></blockquote></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h2 id="cbd1" class="oi mj it bd mk oj ok dn mo ol om dp ms nc on oo mu ne op oq mw ng or os my iz bi translated">安装Cuda</h2><p id="c026" class="pw-post-body-paragraph lk ll it ln b lo na kd lq lr nb kg lt nc nd lw lx ne nf ma mb ng nh me mf mg im bi translated">安装Cuda只需从<a class="ae mh" href="https://developer.nvidia.com/cuda-downloads" rel="noopener ugc nofollow" target="_blank"> <em class="lm"> Nvidia网站</em> </a>下载合适的版本，然后像安装其他软件一样安装即可。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pp"><img src="../Images/d3fdd0cb14ea0b5b1123009baad90a50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Z-cbfzLqfi16GStEC145Q.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者截取的图像</figcaption></figure><p id="2a58" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">只需选择您的偏好，然后点击“下载”按钮。下载完成后，打开文件并按照屏幕上的说明进行操作。</p></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h2 id="dc1c" class="oi mj it bd mk oj ok dn mo ol om dp ms nc on oo mu ne op oq mw ng or os my iz bi translated">安装Cudnn</h2><p id="f77e" class="pw-post-body-paragraph lk ll it ln b lo na kd lq lr nb kg lt nc nd lw lx ne nf ma mb ng nh me mf mg im bi translated">Cudnn不是能装的；不过，您必须首先<a class="ae mh" href="https://developer.nvidia.com/rdp/cudnn-archive" rel="noopener ugc nofollow" target="_blank"> <em class="lm">下载文件</em> </a>(确保它适用于您安装的正确Cuda版本)。</p><p id="4ebf" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">下载后，从lib、include和bin文件夹中复制文件，并粘贴到Cuda安装文件夹的lib、bin和include文件夹中。</p><p id="6984" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">然后，在您的系统环境路径中，从cuda文件夹添加几个目录。</p><p id="05fd" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">这些是您需要添加到系统环境路径中的路径</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pq"><img src="../Images/66736fc255497f03366b3608d05389fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*gBDn3sCA8doOUSYWvgOPnQ.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者截取的图像</figcaption></figure></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h2 id="602c" class="oi mj it bd mk oj ok dn mo ol om dp ms nc on oo mu ne op oq mw ng or os my iz bi translated">安装PyTorch</h2><p id="a1bc" class="pw-post-body-paragraph lk ll it ln b lo na kd lq lr nb kg lt nc nd lw lx ne nf ma mb ng nh me mf mg im bi translated">要获得PyTorch，请访问他们的网站<a class="ae mh" href="https://pytorch.org/" rel="noopener ugc nofollow" target="_blank"><em class="lm"/></a>并选择与您的Cuda版本相对应的版本。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pr"><img src="../Images/5dedb883bbd1f9f469f6bcf9c7ba6009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Qg6_wYmrAEbLCWnD8aaOA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者截取的图像</figcaption></figure></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="aeeb" class="mi mj it bd mk ml od mn mo mp oe mr ms ki of kj mu kl og km mw ko oh kp my mz bi translated">预处理</h1><p id="f755" class="pw-post-body-paragraph lk ll it ln b lo na kd lq lr nb kg lt nc nd lw lx ne nf ma mb ng nh me mf mg im bi translated">我写了一篇关于如何使用Monai做预处理的博客文章，你可以在这里找到<a class="ae mh" href="https://pycad.co/preprocessing-3d-volumes-for-tumor-segmentation-using-monai-and-pytorch/" rel="noopener ugc nofollow" target="_blank"><em class="lm"/></a>，以及另一篇关于如何使用Monai做数据增强的博客文章，你可以在这里找到<a class="ae mh" href="https://pycad.co/3d-volumes-augmentation-for-tumor-segmentation/" rel="noopener ugc nofollow" target="_blank"><em class="lm"/></a>。</p><p id="696b" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">到目前为止，我将简单地向您展示我在本教程中使用的函数；然而，所有的信息都可以在预处理博客中找到。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pc"><img src="../Images/fae50e1d218a284e926222948520b36d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RgxR6VF198Wr9nzrGEFWtA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者使用<a class="ae mh" href="https://carbon.now.sh/" rel="noopener ugc nofollow" target="_blank">碳</a>制作的图像</figcaption></figure></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><p id="39e1" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">当然，在完成预处理后，出于两个原因，您可能需要展示其中一个患者。第一个是查看数据是否正确加载，第二个是在预处理后可视化您的数据，因为您可能无法对所有任务使用相同的预处理，因此您可能需要使用我的值之外的值。</p><p id="765c" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">此功能可用于查看来自训练和测试数据集的患者。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pc"><img src="../Images/96a30a6706ad063dac3b465e05493b87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ShJULMwLsz_x2xCavpiNCQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">作者使用<a class="ae mh" href="https://carbon.now.sh/" rel="noopener ugc nofollow" target="_blank">碳</a>制作的图像</figcaption></figure></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><p id="57be" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">对于本教程来说，这就是数据准备和预处理的全部内容。</p><p id="ceeb" class="pw-post-body-paragraph lk ll it ln b lo lp kd lq lr ls kg lt nc lv lw lx ne lz ma mb ng md me mf mg im bi translated">您在使用Monai时可能遇到的常见问题/错误将在即将发布的博客中讨论。</p></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="825b" class="mi mj it bd mk ml od mn mo mp oe mr ms ki of kj mu kl og km mw ko oh kp my mz bi translated">你想学医学影像的深度学习！</h1><p id="5b1e" class="pw-post-body-paragraph lk ll it ln b lo na kd lq lr nb kg lt nc nd lw lx ne nf ma mb ng nh me mf mg im bi translated">即将推出全面的医学成像课程，涵盖使用Monai和PyTorch的2D和3D分割，并提供额外支持。加入等候名单以接收任何课程更新的通知。</p><div class="ps pt gp gr pu pv"><a href="https://pycad.co/monai-and-pytoch-for-medical-imaging/" rel="noopener  ugc nofollow" target="_blank"><div class="pw ab fo"><div class="px ab py cl cj pz"><h2 class="bd jd gy z fp qa fr fs qb fu fw jc bi translated">医学成像深度学习登录页面- PYCAD</h2><div class="qc l"><h3 class="bd b gy z fp qa fr fs qb fu fw dk translated">使用Monai和PyTorch的医学成像中的2D和3D分割。</h3></div><div class="qd l"><p class="bd b dl z fp qa fr fs qb fu fw dk translated">pycad.co</p></div></div><div class="qe l"><div class="qf l qg qh qi qe qj lb pv"/></div></div></a></div></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="5741" class="mi mj it bd mk ml od mn mo mp oe mr ms ki of kj mu kl og km mw ko oh kp my mz bi translated">关于作者</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qk"><img src="../Images/a63728072bb7aad61aa54e730b7e5e5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YLJeyKAkDWCa7yQj.jpeg"/></div></div></figure><blockquote class="pf"><p id="1045" class="pg ph it bd pi pj ql qm qn qo qp mg dk translated">穆罕默德·艾尔·阿明·莫赫塔里是我的名字。我是计算机视觉领域的研究助理(博士生),从事在线内容的创作。我在<a class="ae mh" href="https://www.youtube.com/channel/UCdYyILlPlehK4fKS5DiuMXQ" rel="noopener ugc nofollow" target="_blank">的YouTube </a>上创作视频，在<a class="ae mh" href="https://www.udemy.com/user/pycad-2/" rel="noopener ugc nofollow" target="_blank">的Udemy </a> / <a class="ae mh" href="https://www.skillshare.com/user/pycad" rel="noopener ugc nofollow" target="_blank"> Skillshare </a>上开设课程，我还是一名Medium的作家，此外我还创建了自己的网站<a class="ae mh" href="https://pycad.co/" rel="noopener ugc nofollow" target="_blank"> Pycad </a>，我用它作为作品集来分享我所有的知识和作品。有时间的话请看一下:)。</p></blockquote></div></div>    
</body>
</html>