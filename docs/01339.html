<html>
<head>
<title>Create a SonarQube Jenkins Webhook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建一个SonarQube Jenkins Webhook</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-sonarqube-jenkins-webhook-8f4c6cce3920?source=collection_archive---------2-----------------------#2019-12-15">https://levelup.gitconnected.com/create-sonarqube-jenkins-webhook-8f4c6cce3920?source=collection_archive---------2-----------------------#2019-12-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="90ee" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过webhook回调将Jenkins与SonarQube集成</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/77f324b54f84eb4ec399ff9069cdaf66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sf2ntOXzugT3sUwp"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@milandegraeve?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Milan de grave</a>拍摄的照片</figcaption></figure><blockquote class="kz la lb"><p id="0be1" class="lc ld le lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">SonarQube是一个开源平台，用于持续检查代码质量，通过静态分析代码来执行自动审查，以检测bug、代码气味和安全漏洞。</p></blockquote><p id="4012" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">在SonarQube中添加webhook非常简单明了。这项任务可以通过SonarQube用户界面本身来完成。然而，如果您试图添加一个带有自签名SSL证书的<strong class="lf iu"> HTTPS </strong> webhook，您需要执行额外的步骤😃。在这篇文章中，我将展示如何给SonarQube添加一个Jenkins <code class="fe mc md me mf b">https</code> webhook。</p><p id="25a6" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">不幸的是，SonarQube没有提供禁用自签名证书的SSL验证的选项。因此，由于我们想要添加一个使用自签名SSL证书运行的<strong class="lf iu"> HTTPS </strong> webhook，我们需要确保SonarQube信任自签名证书。这项任务可以通过在运行SonarQube的主机上执行以下命令来完成</p><pre class="kj kk kl km gt mg mf mh mi aw mj bi"><span id="e161" class="mk ml it mf b gy mm mn l mo mp">$&gt; sudo cp self-signed-ssl.crt /usr/local/share/ca-certificates/<br/>$&gt; sudo update-ca-certificates</span></pre><p id="80b7" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">如果您使用docker来运行SonarQube，您可以使用下面的docker文件来构建信任您的自签名证书的docker映像</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="1109" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">下一步是从SonarQube接口创建webhook，为此，您可以执行以下步骤</p><ul class=""><li id="b760" class="ms mt it lf b lg lh lj lk lz mu ma mv mb mw ly mx my mz na bi translated">以管理员用户身份登录SonarQube</li><li id="768a" class="ms mt it lf b lg nb lj nc lz nd ma ne mb nf ly mx my mz na bi translated">导航到webhooks页面:<code class="fe mc md me mf b">Administration-&gt;Configurations-&gt;webhooks</code></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/e4ac969ab27ad411e3c690d9c7c6ec64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UkpZyZpf72G5P1_RKB_81A.png"/></div></div></figure><ul class=""><li id="395c" class="ms mt it lf b lg lh lj lk lz mu ma mv mb mw ly mx my mz na bi translated">创建一个新的网页挂钩:点击创建新的网页挂钩，然后填写下面的表格，点击<code class="fe mc md me mf b">create</code>按钮。webhook URL应该遵循以下形式<code class="fe mc md me mf b"><a class="ae ky" href="https://${jenkins_domain}/sonarqube-webhook/." rel="noopener ugc nofollow" target="_blank">https://${jenkins_domain}/sonarqube-webhook/</a></code> <a class="ae ky" href="https://${jenkins_domain}/sonarqube-webhook/." rel="noopener ugc nofollow" target="_blank">。</a>用户末端的<code class="fe mc md me mf b">/</code>非常重要，没有它，你可能会遇到一些触发webhooks的错误。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/cabd1eb13444741a86f774e576831601.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uhT0dAZLmR4lrzUh1qeN-w.png"/></div></div></figure><h2 id="9c2f" class="mk ml it bd ni nj nk dn nl nm nn dp no lz np nq nr ma ns nt nu mb nv nw nx ny bi translated"><strong class="ak">结论</strong></h2><p id="990c" class="pw-post-body-paragraph lc ld it lf b lg nz ju li lj oa jx ll lz ob lo lp ma oc ls lt mb od lw lx ly im bi translated">在sonar cube中添加一个Jenkins webhook来报告分析报告的状态是一项简单的任务，可以从sonar cube界面中完成。webhook工作的唯一要求是允许SonarQube和Jenkins之间的连接</p></div></div>    
</body>
</html>