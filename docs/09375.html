<html>
<head>
<title>Effortlessly Show Statistical Significance on Seaborn Plots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">轻松显示Seaborn图上的统计显著性</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/statistics-on-seaborn-plots-with-statannotations-2bfce0394c00?source=collection_archive---------0-----------------------#2021-08-03">https://levelup.gitconnected.com/statistics-on-seaborn-plots-with-statannotations-2bfce0394c00?source=collection_archive---------0-----------------------#2021-08-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5099" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为您的美丽情节添加文本、星星或p值！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/06df3fb3d192d2a2176cc0217aa7019a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qWoDkfutRUK4rvyVlCbLJg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">NOAA 在<a class="ae kv" href="https://unsplash.com/s/photos/research-results?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h2 id="62f7" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">介绍</h2><p id="3a72" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">Python中有许多库可用于清理、分析和绘制数据。使用Python还可以获得免费的健壮的统计软件包，这些软件包被成千上万的其他项目所使用。仅在Github上，<code class="fe ml mm mn mo b">statsmodels</code>就被44，000多个开源项目使用，<code class="fe ml mm mn mo b">scipy</code>被350，000多个开源项目使用！(当然，可能不全是为了<code class="fe ml mm mn mo b">scipy.stats</code>。</p><p id="d64e" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><code class="fe ml mm mn mo b">Seaborn</code>是一个有效且非常受欢迎的可视化数据库，但如果您希望将p值添加到您的图中，使用漂亮的括号以及您在论文中看到的所有使用R或其他统计软件的工具，则没有太多选项可用。您可以在网上找到一些，但是它们确实需要您编写相当多的代码来绘制每一行并添加每个文本标签。</p><p id="efa3" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">本教程将介绍<code class="fe ml mm mn mo b">statannotations</code>的主要特性，这是一个使用户能够在<code class="fe ml mm mn mo b">seaborn</code>分类图上添加统计显著性注释的包。<br/>在前两节中，我们将设置所需的工具，并快速描述我们将处理的数据集。然后，我们将学习如何像这样转换情节:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl mu"><img src="../Images/5d075ff6d0ff71ec818bd6dbbc64a168.png" data-original-src="https://miro.medium.com/v2/format:webp/1*9ltg4KL3vocpNNVP92FLEQ.png"/></div></figure><p id="a783" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">变成这样的剧情↓！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl mu"><img src="../Images/54c9b0c6c07133a587a0e30aa71819de.png" data-original-src="https://miro.medium.com/v2/format:webp/1*k3l5IKX0W0uBqthJPVkm0Q.png"/></div></figure><p id="443a" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">具体来说，在展示了如何安装和导入最新版本的<code class="fe ml mm mn mo b">statannotations</code>(目前为v0.4.1)之后，我们将回答以下问题:</p><ul class=""><li id="326b" class="mv mw iq lu b lv mp ly mq lf mx lj my ln mz mk na nb nc nd bi translated">如何给<code class="fe ml mm mn mo b">seaborn</code>图添加自定义注释？</li><li id="5fa2" class="mv mw iq lu b lv ne ly nf lf ng lj nh ln ni mk na nb nc nd bi translated">如何以多种方式自动格式化先前计算的p值，然后在单个函数调用中将这些值添加到图中？</li><li id="c49a" class="mv mw iq lu b lv ne ly nf lf ng lj nh ln ni mk na nb nc nd bi translated">如何执行统计测试并将其结果添加到图中，可选地应用多重比较校正方法？</li></ul><p id="7bf6" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">后续教程将涵盖更高级的功能，如接口其他统计测试，多重比较校正方法，以及格式选项的详细审查。</p><p id="5416" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">本教程的Jupyter笔记本版本(只是稍欠润色)可从Github <a class="ae kv" href="https://github.com/trevismd/statannotations-tutorials" rel="noopener ugc nofollow" target="_blank">这里</a>获得。</p><p id="9810" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">免责声明</strong>:本教程旨在描述<em class="nj">如何使用一个图标注库，而非教授统计学</em>。这些例子只是为了说明这些图，而不是统计方法，我们不会对所研究的数据集下任何结论。正确的方法需要仔细定义研究问题，最终可能需要不同的组比较和/或测试，当然，p值也不是所有问题的正确答案。这是许多其他资源的主题。</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h2 id="6273" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">先决条件</h2><p id="e8a7" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">知识—为了从本教程中获得最大收益，读者应该熟悉Python 3(最好是3.6以上)。之前在<code class="fe ml mm mn mo b">pandas</code>、<code class="fe ml mm mn mo b">matplotlib</code>和<code class="fe ml mm mn mo b">seaborn</code>方面的一些经验将有助于理解<code class="fe ml mm mn mo b">statannotations</code>的价值主张。</p><p id="9401" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">物理—按照教程，您将需要一些库和数据，其来源如下所述。为了减少这篇文章的篇幅，我们使用了一些辅助函数，但这里不再赘述。你可以在教程的<a class="ae kv" href="https://github.com/trevismd/statannotations-tutorials" rel="noopener ugc nofollow" target="_blank">库</a>中找到它们。</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h2 id="b239" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">准备工具</h2><p id="9fed" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">我们导入<code class="fe ml mm mn mo b">pyplot</code>、<code class="fe ml mm mn mo b">pandas</code>和<code class="fe ml mm mn mo b">seaborn</code>来操作数据和绘制图表。<code class="fe ml mm mn mo b">scipy</code>和<code class="fe ml mm mn mo b">numpy</code>仅用于说明一种可能的用例。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">进口</figcaption></figure><p id="3771" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">只为本教程实现的一些额外功能是从github <a class="ae kv" href="https://github.com/trevismd/statannotations-tutorials" rel="noopener ugc nofollow" target="_blank">库</a>上的<code class="fe ml mm mn mo b">utils</code>模块导入的，包括:</p><p id="3343" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">1.漂亮打印功能:<code class="fe ml mm mn mo b">print_n_projects</code>和<code class="fe ml mm mn mo b">describe_array</code></p><p id="8e2c" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">2.与绘图相关的避免重复功能:<code class="fe ml mm mn mo b">get_log_ax</code>、<code class="fe ml mm mn mo b">label_plot_for_subcats</code>、<code class="fe ml mm mn mo b">label_plot_for_states</code>、<code class="fe ml mm mn mo b">add_legend</code></p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h2 id="c849" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">准备数据</h2><p id="c2a3" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">对于本教程，我们将使用Kickstarter数据集“<em class="nj">2009-2017年超过375，000个Kickstarter项目的数据”</em>，其中包括从<a class="ae kv" href="https://www.mavenanalytics.io/data-playground," rel="noopener ugc nofollow" target="_blank">https://www.mavenanalytics.io/data-playground</a>下载的374，853条活动记录。</p><p id="245c" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">让我们来看一个快速峰值:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl mu"><img src="../Images/090dab341a689938766e946772f0727a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*HH2Ac4MstgwyZmCV1lH2YQ.png"/></div></figure><p id="2377" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">我们将考虑<code class="fe ml mm mn mo b">Category</code>、<code class="fe ml mm mn mo b">Subcategory</code>、<code class="fe ml mm mn mo b">Goal</code>和<code class="fe ml mm mn mo b">State</code>列。</p><p id="92fd" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">活动被分配到“类别”:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Kickstarter活动类别</figcaption></figure><p id="0e9a" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">我们将探索“技术”类别，首先是项目数量:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">技术项目</figcaption></figure><pre class="kg kh ki kj gt nt mo nu nv aw nw bi"><span id="f3e0" class="kw kx iq mo b gy nx ny l nz oa">There are 32562 projects in Technology.</span><span id="087f" class="kw kx iq mo b gy ob ny l nz oa"> 1. Technology         6,930<br/> 2. Apps               6,340<br/> 3. Web                3,910<br/> 4. Hardware           3,660<br/> 5. Software           3,050<br/> 6. Gadgets            2,960<br/> 7. Wearables          1,230<br/> 8. DIY Electronics      902<br/> 9. 3D Printing          682<br/>10. Sound                669<br/>11. Robots               572<br/>12. Flight               426<br/>13. Camera Equipment     416<br/>14. Space Exploration    323<br/>15. Fabrication Tools    250<br/>16. Makerspaces          238</span></pre><p id="0e1b" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">然后，我们将探索<code class="fe ml mm mn mo b">Goal</code>列，该列以美元表示营销活动的融资目标。</p><p id="10d4" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">技术子类别中项目的总目标金额:</p><pre class="kg kh ki kj gt nt mo nu nv aw nw bi"><span id="a2d4" class="kw kx iq mo b gy nx ny l nz oa"> 1. Technology          1.11 B<br/> 2. Apps                 449 M<br/> 3. Web                  400 M<br/> 4. Hardware             343 M<br/> 5. Software             285 M<br/> 6. Space Exploration    186 M<br/> 7. Gadgets              155 M<br/> 8. Robots               107 M<br/> 9. Wearables           74.7 M<br/>10. Flight              59.3 M<br/>11. 3D Printing         31.8 M<br/>12. Sound               31.2 M<br/>13. Makerspaces         31.1 M<br/>14. Fabrication Tools   29.0 M<br/>15. DIY Electronics     18.1 M<br/>16. Camera Equipment    16.6 M</span></pre><p id="e6e7" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">我们看到，<code class="fe ml mm mn mo b">Sound</code> (#10)、<code class="fe ml mm mn mo b">Robots</code> (#11)和<code class="fe ml mm mn mo b">Flight</code> (#12)相对于项目总数的顺序与它们考虑总目标金额的顺序不同，总目标金额是<code class="fe ml mm mn mo b">Robots</code> (#8，+3位)、<code class="fe ml mm mn mo b">Flight</code> (#10，+2位)和<code class="fe ml mm mn mo b">Sound</code> (#12，-2位)。</p><p id="9c6e" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">在本教程中，我们将对</strong> <code class="fe ml mm mn mo b"><strong class="lu ir">Robots</strong></code> <strong class="lu ir">、</strong> <code class="fe ml mm mn mo b"><strong class="lu ir">Flight</strong></code> <strong class="lu ir">和</strong> <code class="fe ml mm mn mo b"><strong class="lu ir">Sound</strong></code> <strong class="lu ir">子类别</strong>进行一些分析</p><p id="6cf7" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">为简单起见，我们将数据集的子集定义为名为<code class="fe ml mm mn mo b">rfs</code>的新数据帧，只保留属于三个子类别的行。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">机器人、飞行和声音项目</figcaption></figure></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h1 id="e049" class="oc kx iq bd ky od oe of lb og oh oi le jw oj jx li jz ok ka lm kc ol kd lq om bi translated">第一次绘图</h1><p id="de98" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">我们为<code class="fe ml mm mn mo b">seaborn</code>图的子类别定义了一些颜色和顺序。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">颜色和顺序</figcaption></figure><h2 id="6bf3" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">参考图1</h2><p id="021a" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">我们将注释的第一个情节将根据<code class="fe ml mm mn mo b">Subcategory</code>(机器人、飞行或声音)显示战役<code class="fe ml mm mn mo b">Goal</code>。</p><p id="f332" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">重要— </strong> <em class="nj">除非另有说明，否则此处的第1 — 3行和第8 — 10行必须用于本教程的所有绘图，即使在某些示例中没有显示。</em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">制作参考图1</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/7d39383f9ba7bcd6312b79e6ff3f14d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gRL1NRrX5e_jLD2fuEmGvg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">参考图1</figcaption></figure><h2 id="f370" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">参考图2</h2><p id="ee0d" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">现在，我们绘制每个项目状态的目标金额，即，如果活动是<code class="fe ml mm mn mo b">Successful</code>，如果<code class="fe ml mm mn mo b">Failed,</code>是<code class="fe ml mm mn mo b">Live</code>、<code class="fe ml mm mn mo b">Suspended</code>或<code class="fe ml mm mn mo b">Canceled</code>(截至2018年1月)。</p><p id="aa60" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">首先，定义颜色和顺序:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="3a0b" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">然后制作剧情:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">制作参考图2</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/26a89bb363fb4c5a56c029ba0500ee95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tqF_w4eekGP02huhAJwkjw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">参考图2</figcaption></figure></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h1 id="61d0" class="oc kx iq bd ky od oe of lb og oh oi le jw oj jx li jz ok ka lm kc ol kd lq om bi translated"><strong class="ak">统计第一</strong></h1><p id="b65d" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">此时，您可能需要向绘图添加注释。Statannotations允许添加任意文本。但是为了展示特别是统计结果带来的好处，我们将计算一些统计测试，然后展示如何将它们添加到图表中。</p><p id="3caa" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">我们的第一张图显示了<code class="fe ml mm mn mo b">Subcategory</code>的目标金额。我们首先创建每个子类别目标的数组，以及它们的对数，来测试对数正态性。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">用scipy提取要分析的数组</figcaption></figure><p id="2b43" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">测试正常性</strong></p><p id="ece1" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">(对数)正态性测试几乎都是非常重要的(如果你想知道我们在这里做了什么，请查看笔记本)。</p><p id="1743" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">因此，我们将对独立样本使用非参数检验:Mann-Whitney-Wilcoxon。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">“手动”测试</figcaption></figure><p id="b56d" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">哪些输出</p><pre class="kg kh ki kj gt nt mo nu nv aw nw bi"><span id="ce08" class="kw kx iq mo b gy nx ny l nz oa">Robots vs Flight:  <br/>MannwhitneyuResult(statistic=104646.0, pvalue=0.0001348514046808899)</span><span id="c940" class="kw kx iq mo b gy ob ny l nz oa">Flight vs Sound:  <br/>MannwhitneyuResult(statistic=148294.5, pvalue=0.2557331102364572)</span><span id="37ba" class="kw kx iq mo b gy ob ny l nz oa">robots vs Sound:  <br/>MannwhitneyuResult(statistic=168156.0, pvalue=0.0002298546492900512)</span></pre><p id="799c" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">在下一节中，我们将把这些结果添加到我们制作的第一个盒图中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/7d39383f9ba7bcd6312b79e6ff3f14d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gRL1NRrX5e_jLD2fuEmGvg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">参考图1</figcaption></figure></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h1 id="8fbd" class="oc kx iq bd ky od oe of lb og oh oi le jw oj jx li jz ok ka lm kc ol kd lq om bi translated">统计符号</h1><p id="788e" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">Statannotations是一个<a class="ae kv" href="https://github.com/trevismd/statannotations" rel="noopener ugc nofollow" target="_blank">开源</a>包，用户可以在<code class="fe ml mm mn mo b">seaborn</code>分类图上添加统计显著性注释(<code class="fe ml mm mn mo b">barplot</code>、<code class="fe ml mm mn mo b">boxplot</code>、<code class="fe ml mm mn mo b">stripplot</code>、<code class="fe ml mm mn mo b">swarmplot</code>和<code class="fe ml mm mn mo b">violinplot</code>)。</p><p id="24c5" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">它基于<code class="fe ml mm mn mo b"><a class="ae kv" href="https://github.com/webermarcolivier/statannot" rel="noopener ugc nofollow" target="_blank">statannot</a></code>，但是有额外的特性，现在使用不同的API。</p><h2 id="a8b2" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">装置</h2><p id="2bab" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">您可以从您喜欢的命令行界面安装带有pip的<code class="fe ml mm mn mo b">statannotations</code>:</p><pre class="kg kh ki kj gt nt mo nu nv aw nw bi"><span id="5339" class="kw kx iq mo b gy nx ny l nz oa">pip install statannotations</span></pre><p id="c873" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">可选地，要使用本教程中进一步描述的多重比较校正，您还需要<code class="fe ml mm mn mo b">statsmodels</code>。</p><pre class="kg kh ki kj gt nt mo nu nv aw nw bi"><span id="cb72" class="kw kx iq mo b gy nx ny l nz oa">pip install statsmodels</span></pre></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><p id="ec4c" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">导入主类</strong></p><p id="1824" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">这是本教程中描述的材料所需的唯一导入。</p><pre class="kg kh ki kj gt nt mo nu nv aw nw bi"><span id="15ba" class="kw kx iq mo b gy nx ny l nz oa">from statannotations.Annotator import Annotator</span></pre><p id="c26b" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">准备注释并将它们添加到图中通常是一个5步程序，我们将详细介绍:</p><p id="cfd6" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">步骤1——决定注释哪些数据对<br/> </strong>,例如，箱线图中的哪些方框，条形图中的哪些条形，等等。</p><p id="1bbe" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">步骤2——创建一个</strong> <code class="fe ml mm mn mo b"><strong class="lu ir">Annotator</strong></code> <br/>也可以在制作几个图时准备一个先前使用的注释器，以便使用相同的配置。</p><p id="2031" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">步骤3—配置注释器</strong> <br/>这包括文本格式化、要应用的统计测试、多重比较校正方法…</p><p id="1a09" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">第4步——做注解</strong> <br/>这可以通过三种不同的<em class="nj">模式</em>来完成，我们将按以下顺序进行:</p><p id="31e5" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">a——提供完全自定义的注释<br/>B——在添加到图中之前提供要格式化的p值<br/>C——应用在步骤3中配置的统计测试</p><p id="75a0" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">第5步——注释！</strong></p><p id="7da7" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">我们将看到，在许多情况下，步骤4和5可以在同一个函数调用中执行。</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h2 id="a8a9" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">a-添加任何文本，如先前计算的结果</h2><p id="8f17" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">这种情况下，我们已经有了统计结果，或者我们想要在<code class="fe ml mm mn mo b">seaborn</code>图上显示的任何其他文本(及其相关的<code class="fe ml mm mn mo b">ax</code>)。</p><p id="6f4c" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">第一步— </strong>比较什么</p><p id="2a5f" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">要注释这个图，我们必须在一个<code class="fe ml mm mn mo b">pairs</code>参数中传递要注释的数据组(用方框、条、小提琴等表示)。</p><p id="d677" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">在我们的演示中，它相当于<code class="fe ml mm mn mo b">'Robots vs Flight'</code>和其他。</p><p id="6b6f" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><code class="fe ml mm mn mo b">pairs</code>是一个类似<code class="fe ml mm mn mo b">('Robots', 'Flight')</code>的元组列表，所以在本例中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">地块1的配对</figcaption></figure><p id="c0d6" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">步骤2 — </strong>创建注释者</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="f2b4" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">第一个参数是seaborn plot的<code class="fe ml mm mn mo b">ax</code>，第二个是要注释的<code class="fe ml mm mn mo b">pairs</code>。剩下的参数是<em class="nj">确切地说是</em>和<em class="nj">所有</em>那些首先用于生成seaborn图的参数。</p><p id="66fb" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">我们将在示例中看到，使包含参数的<code class="fe ml mm mn mo b">dict</code>传递给两个函数是避免丢失参数和代码重复的最安全的方式</p><p id="fc1c" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">步骤3 — </strong>配置注释器</p><p id="5946" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">对于第一个例子，我们不做任何配置。</p><p id="4308" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">第4步— </strong>做注解</p><p id="42ef" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">在这种情况下，使用scipy返回值中的p值，并进行一些“手动”格式化(使用F字符串、数字格式化和列表理解)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">手动测试结果</figcaption></figure><p id="00cb" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">并将它们提供给注释者</p><p id="5550" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><code class="fe ml mm mn mo b">annotator.set_custom_annotations(formatted_pvalues)</code>。</p><p id="72f2" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">注意:确保提供的<code class="fe ml mm mn mo b">pairs</code>和注释(此处为<code class="fe ml mm mn mo b">formatted_pvalues</code>)遵循相同的顺序，即第一对对应于列表中的第一个注释，等等。</p><p id="4936" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">第五步— </strong>批注！</p><p id="c0b0" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">简单的叫<code class="fe ml mm mn mo b">annotator.annotate()</code>。</p><p id="8030" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">一起:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">注释图1</figcaption></figure><p id="5efc" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">瞧！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/345262a4b5feb1d5def6b5bbdc43fcf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JDNjkEBazGUMG9lBZ1CkPg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">带有自定义注释的参考图1</figcaption></figure><p id="3a64" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">引用带有自定义注释的图1。注意，我们可以很容易地以这种方式添加任何其他文本，例如<code class="fe ml mm mn mo b">***</code>、<code class="fe ml mm mn mo b">NS</code>和<code class="fe ml mm mn mo b">***</code>。</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h2 id="b7f4" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">b-自动格式化p值</h2><p id="d82f" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">为了从格式化选项中获益，我们使用方法<code class="fe ml mm mn mo b">set_pvalues</code>而不是<code class="fe ml mm mn mo b">set_custom_annotations</code>。</p><p id="10e6" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">因为我们正在制作同一个seaborn地块的副本，所以<code class="fe ml mm mn mo b">plotting_parameters</code>不需要改变，上面定义的<code class="fe ml mm mn mo b">pairs</code>也不需要改变。</p><p id="6215" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">用星号标注(默认)</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">用星形符号标注</figcaption></figure><p id="7281" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">输出</p><pre class="kg kh ki kj gt nt mo nu nv aw nw bi"><span id="cdc9" class="kw kx iq mo b gy nx ny l nz oa">p-value annotation legend:<br/>      ns: p &lt;= 1.00e+00<br/>       *: 1.00e-02 &lt; p &lt;= 5.00e-02<br/>      **: 1.00e-03 &lt; p &lt;= 1.00e-02<br/>     ***: 1.00e-04 &lt; p &lt;= 1.00e-03<br/>    ****: p &lt;= 1.00e-04<br/><br/>Sound v.s. Flight: Custom statistical test, P_val:2.557e-01<br/>Robots v.s. Sound: Custom statistical test, P_val:2.299e-04<br/>Robots v.s. Flight: Custom statistical test, P_val:1.349e-04</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/fd85ac190ca2f50b30afa4a3a34e5633.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BGg5oX1xsv07Uo4oZul1AA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">p值用星形符号表示的参考图1</figcaption></figure><p id="d773" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">用“简单”的格式来显示意义</strong></p><p id="3f8b" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">简单地配置<code class="fe ml mm mn mo b">text_format</code>到<code class="fe ml mm mn mo b">"simple"</code>，以这种方式显示p值。这是通过改变前面代码片段中与<code class="fe ml mm mn mo b">annotator</code>相关的行而获得的，而其他的不变。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">使用简单格式</figcaption></figure><p id="c725" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">如您所见，语法非常简洁。我们通过调用<code class="fe ml mm mn mo b">annotator.configure()</code>添加了注释过程的<strong class="lu ir">步骤3 </strong>部分。</p><p id="639a" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">您可能还注意到了将<code class="fe ml mm mn mo b">set_pvalues(pvalues)</code>和<code class="fe ml mm mn mo b">annotate()</code>替换成一个函数调用<code class="fe ml mm mn mo b">set_pvalues_and_annotate(pvalues)</code>。</p><p id="bc10" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><code class="fe ml mm mn mo b">text_format</code>还有一个<code class="fe ml mm mn mo b">"full"</code>选项。如果你在阅读时积极地编码，请随意尝试。不然以后再看。</p><p id="0617" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">此代码输出:</p><pre class="kg kh ki kj gt nt mo nu nv aw nw bi"><span id="02f7" class="kw kx iq mo b gy nx ny l nz oa">Sound v.s. Flight: Custom statistical test, P_val:2.557e-01<br/>Robots v.s. Sound: Custom statistical test, P_val:2.299e-04<br/>Robots v.s. Flight: Custom statistical test, P_val:1.349e-04</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/cf51056386bdcd68fe57cd96cbf75455.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8U6g3TGPfo-Mt5_m5SbWNw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">p值简单格式化的参考图1</figcaption></figure><p id="9b70" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">仍然在<strong class="lu ir">步骤2 </strong>中，我们还可以提供一个<code class="fe ml mm mn mo b">test_short_name</code>参数，显示在p值之前。</p><p id="2ab2" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">在这个代码片段中，您还可以看到如何通过重用注释器实例来减少所需的代码，因为我们没有更改数据和对。这是通过调用<code class="fe ml mm mn mo b">new_plot</code>完成的，它仍然需要新的<code class="fe ml mm mn mo b">ax</code>和seaborn参数。这也允许记住我们已经配置的<code class="fe ml mm mn mo b">text_format</code>选项。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">为简单格式配置测试简称</figcaption></figure><p id="39e2" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">输出</p><pre class="kg kh ki kj gt nt mo nu nv aw nw bi"><span id="764d" class="kw kx iq mo b gy nx ny l nz oa">Sound v.s. Flight: Custom statistical test, P_val:2.557e-01<br/>Robots v.s. Sound: Custom statistical test, P_val:2.299e-04<br/>Robots v.s. Flight: Custom statistical test, P_val:1.349e-04</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/4288df9fdf09a09f2b42f7ccca1d7110.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F1lXAawYaKfL7Vqwg10n0w.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">带注释的参考图1，包括执行的测试</figcaption></figure><h2 id="3879" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">调整布局</h2><p id="f6ce" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated"><code class="fe ml mm mn mo b">configure</code>和<code class="fe ml mm mn mo b">annotate</code>方法的参数允许修改注释布局，大部分内容将在下一个教程中介绍。</p><p id="b862" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">但是，我们已经可以看到如何扩大行和注释之间的间距:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="ff23" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">这导致了</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/8520faea8ae21c3764c791436ef8a3ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CfqDjVHXuHXuBXw-R2KOww.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">参考图1，带有轻微移动的注释</figcaption></figure><p id="b83b" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">它可能很微妙，但它确实存在。</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h2 id="ccfc" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">C —应用带有统计符号的scipy测试</h2><p id="a77c" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">最后，<code class="fe ml mm mn mo b">statannotations</code>可以在指定的对上直接调用<code class="fe ml mm mn mo b">scipy.stats</code>测试。现成的选项有:</p><ul class=""><li id="4a54" class="mv mw iq lu b lv mp ly mq lf mx lj my ln mz mk na nb nc nd bi translated">曼-惠特尼公司</li><li id="e36d" class="mv mw iq lu b lv ne ly nf lf ng lj nh ln ni mk na nb nc nd bi translated">t检验(独立和配对)</li><li id="58cb" class="mv mw iq lu b lv ne ly nf lf ng lj nh ln ni mk na nb nc nd bi translated">韦尔奇t检验</li><li id="443e" class="mv mw iq lu b lv ne ly nf lf ng lj nh ln ni mk na nb nc nd bi translated">勒文试验</li><li id="6ab3" class="mv mw iq lu b lv ne ly nf lf ng lj nh ln ni mk na nb nc nd bi translated">威尔科克森试验</li><li id="18bb" class="mv mw iq lu b lv ne ly nf lf ng lj nh ln ni mk na nb nc nd bi translated">克鲁斯卡尔-沃利斯试验</li></ul><p id="e7a6" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">在下一个教程中，我们将会看到如何使用一个不在<code class="fe ml mm mn mo b">statannotations</code>中的测试。如果你好奇的话，还可以看看包库中<a class="ae kv" href="https://github.com/trevismd/statannotations/blob/master/usage/example.ipynb" rel="noopener ugc nofollow" target="_blank">笔记本</a>的用法。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">执行统计测试</figcaption></figure><p id="ebde" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">对于<code class="fe ml mm mn mo b">set_pvalues_and_annotate</code>，有一种快捷方式<code class="fe ml mm mn mo b">apply_and_annotate</code>。您还可以注意到，<code class="fe ml mm mn mo b">configure()</code>返回了注释器对象，因此<em class="nj">不需要</em>在下一行写<code class="fe ml mm mn mo b">annotator.apply_and_annotate()</code>。你当然还可以。</p><p id="2f1d" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">输出:</p><pre class="kg kh ki kj gt nt mo nu nv aw nw bi"><span id="29c9" class="kw kx iq mo b gy nx ny l nz oa">Sound v.s. Flight: Mann-Whitney-Wilcoxon test two-sided, P_val:2.557e-01 U_stat=1.367e+05<br/>Robots v.s. Sound: Mann-Whitney-Wilcoxon test two-sided, P_val:2.299e-04 U_stat=1.682e+05<br/>Robots v.s. Flight: Mann-Whitney-Wilcoxon test two-sided, P_val:1.349e-04 U_stat=1.046e+05</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/36022a421168825f98583a80483315e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zBlRTSIccI9fMVQjkdDg6Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">参考图1，带有由statannotations调用的统计测试产生的注释</figcaption></figure><p id="4343" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">最后一个可能的<code class="fe ml mm mn mo b">text_format</code>选项是<code class="fe ml mm mn mo b">full</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="d359" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">输出</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/9765c55f80751313a3e33c79abaea57b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tOR6cJ0fw5_6mpGFHlYA_Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">带文本格式“完整”注释的参考图1</figcaption></figure></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><p id="e377" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">现在，回到<code class="fe ml mm mn mo b">State</code>的那个情节:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/26a89bb363fb4c5a56c029ba0500ee95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tqF_w4eekGP02huhAJwkjw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">参考图2</figcaption></figure><p id="47e0" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">在该图中，我们将比较<code class="fe ml mm mn mo b">Successful</code>、<code class="fe ml mm mn mo b">Failed</code>、<code class="fe ml mm mn mo b">Live</code>和<code class="fe ml mm mn mo b">Canceled</code>状态。</p><p id="2ee1" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">我们将需要定义新的对来进行比较，然后应用相同的方法来配置、获取测试结果并注释该图。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="e614" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">输出</p><pre class="kg kh ki kj gt nt mo nu nv aw nw bi"><span id="70da" class="kw kx iq mo b gy nx ny l nz oa">p-value annotation legend:<br/>      ns: p &lt;= 1.00e+00<br/>       *: 1.00e-02 &lt; p &lt;= 5.00e-02<br/>      **: 1.00e-03 &lt; p &lt;= 1.00e-02<br/>     ***: 1.00e-04 &lt; p &lt;= 1.00e-03<br/>    ****: p &lt;= 1.00e-04<br/><br/>Successful v.s. Failed: Mann-Whitney-Wilcoxon test two-sided, P_val:2.813e-08 U_stat=1.962e+05<br/>Failed v.s. Canceled: Mann-Whitney-Wilcoxon test two-sided, P_val:1.423e-05 U_stat=7.239e+04<br/>Successful v.s. Canceled: Mann-Whitney-Wilcoxon test two-sided, P_val:4.054e-16 U_stat=3.910e+04<br/>Canceled v.s. Live: Mann-Whitney-Wilcoxon test two-sided, P_val:6.641e-03 U_stat=3.096e+03<br/>Failed v.s. Live: Mann-Whitney-Wilcoxon test two-sided, P_val:2.511e-01 U_stat=9.932e+03<br/>Successful v.s. Live: Mann-Whitney-Wilcoxon test two-sided, P_val:9.215e-01 U_stat=5.971e+03</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/1caa2775ab4e4ee4cf270e945bd2296e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AmDfqUEzHXi3sePImy7K7A.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">参考图2已标注</figcaption></figure><p id="2026" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">让我们在这里暂停几秒钟，我们已经走了很长一段路。</p><p id="6327" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">基本上，我们定义了要比较的对，再用2行代码，我们就得到了这个漂亮的图！</p><p id="eb31" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">如果您担心多种测试和校正方法，请继续阅读！但是首先，让我们看看如何在“带色调的方框图”中处理两个层次的分类。</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h2 id="5c4c" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">带色调的方框图</h2><p id="f8d8" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">我们现在将处理同一数据集的这两个图</p><h2 id="21c9" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">参考图3</h2><p id="4ffd" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">开始绘图代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">制作参考图3</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/1b2a83bd140b60b3f123b6d35bd1d830.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*04yteZiKZHNNEx4YQrVu1w.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">参考图3</figcaption></figure><p id="6852" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">这里，我们将比较三个子类别中的<code class="fe ml mm mn mo b">Successful</code>、<code class="fe ml mm mn mo b">Failed</code>和<code class="fe ml mm mn mo b">Live</code>状态，这三个子类别我们已经查看过<code class="fe ml mm mn mo b">Robots</code>、<code class="fe ml mm mn mo b">Flight</code>和<code class="fe ml mm mn mo b">Sound</code>。</p><p id="f742" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">这些对必须包含关于子类别<strong class="lu ir">和状态</strong>的信息。我们将它们定义为元组列表，例如</p><p id="c73e" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><code class="fe ml mm mn mo b">[(subcat_1, state_1), (subcat_1, state_2)]</code></p><p id="4869" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">在这种情况下，这使得它</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">绘制3对</figcaption></figure><p id="5a20" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">同样，我们将绘图参数放在字典中。我们将在<code class="fe ml mm mn mo b">boxplot</code>和<code class="fe ml mm mn mo b">Annotator</code>通话中使用它。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">注释图3</figcaption></figure><p id="6712" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">输出</p><pre class="kg kh ki kj gt nt mo nu nv aw nw bi"><span id="f13d" class="kw kx iq mo b gy nx ny l nz oa">p-value annotation legend:<br/>      ns: p &lt;= 1.00e+00<br/>       *: 1.00e-02 &lt; p &lt;= 5.00e-02<br/>      **: 1.00e-03 &lt; p &lt;= 1.00e-02<br/>     ***: 1.00e-04 &lt; p &lt;= 1.00e-03<br/>    ****: p &lt;= 1.00e-04<br/><br/>Sound_Failed v.s. Sound_Live: <br/>Mann-Whitney-Wilcoxon test two-sided, <br/>P_val:5.311e-02 U_stat=2.534e+03</span><span id="b6e1" class="kw kx iq mo b gy ob ny l nz oa">Robots_Successful v.s. Robots_Failed: <br/>Mann-Whitney-Wilcoxon test two-sided, P_val:1.435e-04 U_stat=2.447e+04</span><span id="720d" class="kw kx iq mo b gy ob ny l nz oa">Robots_Failed v.s. Robots_Live: <br/>Mann-Whitney-Wilcoxon test two-sided, <br/>P_val:2.393e-01 U_stat=2.445e+02</span><span id="fd0a" class="kw kx iq mo b gy ob ny l nz oa">Flight_Successful v.s. Flight_Failed: <br/>Mann-Whitney-Wilcoxon test two-sided, <br/>P_val:4.658e-02 U_stat=8.990e+03</span><span id="8dc4" class="kw kx iq mo b gy ob ny l nz oa">Flight_Failed v.s. Flight_Live:<br/> Mann-Whitney-Wilcoxon test two-sided, <br/>P_val:4.185e-01 U_stat=6.875e+02</span><span id="e6a5" class="kw kx iq mo b gy ob ny l nz oa">Sound_Successful v.s. Sound_Failed:<br/>Mann-Whitney-Wilcoxon test two-sided,<br/>P_val:1.222e-03 U_stat=3.191e+04</span><span id="d7f8" class="kw kx iq mo b gy ob ny l nz oa">Robots_Successful v.s. Robots_Live:<br/>Mann-Whitney-Wilcoxon test two-sided,<br/>P_val:8.216e-02 U_stat=1.405e+02</span><span id="12b6" class="kw kx iq mo b gy ob ny l nz oa">Flight_Successful v.s. Flight_Live:<br/>Mann-Whitney-Wilcoxon test two-sided,<br/>P_val:7.825e-01 U_stat=1.650e+02</span><span id="78a9" class="kw kx iq mo b gy ob ny l nz oa">Sound_Successful v.s. Sound_Live:<br/>Mann-Whitney-Wilcoxon test two-sided,<br/>P_val:2.220e-01 U_stat=2.290e+03</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/282bdf365fd8a3a9537a08cc3e58900b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mzyMSxkuDz9cLPfrU4wAuA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">参考图3已标注</figcaption></figure><h2 id="dc31" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">情节4</h2><p id="9d48" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">为了比较不同类别的状态，我们将绘制不同的图表:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">制作参考图4</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/8f5312c8a15427639e6bed88cb563bd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yr2mvmDZTDzove5QRakFCA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">参考图4</figcaption></figure><p id="3c07" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">现在，您已经了解了让statannotations调用统计测试并注释绘图的所有基础知识:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">注释参考图4并保存结果</figcaption></figure><p id="5d95" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">输出</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/51313bfe2e733c526cecb12c858013bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FRkNhIbe4ySVHI28-zkMVw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">参考图4已标注</figcaption></figure><p id="78be" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">这又是一次大量的测试。如果有人想应用多重测试校正方法，我们现在就介绍它。</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h2 id="97d1" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">校正多重测试</h2><p id="05f8" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">在这一节中，我将快速演示如何使用一个现成的接口。更高级的用法将在下面的教程中描述。</p><p id="4747" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">基本上，你可以使用<code class="fe ml mm mn mo b">configure</code>方法的<code class="fe ml mm mn mo b">comparisons_correction</code>参数，有以下几种修正方法(由<code class="fe ml mm mn mo b">statsmodels</code>实现)</p><ul class=""><li id="f054" class="mv mw iq lu b lv mp ly mq lf mx lj my ln mz mk na nb nc nd bi translated">Bonferroni ( <code class="fe ml mm mn mo b">"bonf"</code>或<code class="fe ml mm mn mo b">"bonferroni"</code>)</li><li id="6d01" class="mv mw iq lu b lv ne ly nf lf ng lj nh ln ni mk na nb nc nd bi translated">本杰明·霍克伯格(<code class="fe ml mm mn mo b">"BH"</code></li><li id="1590" class="mv mw iq lu b lv ne ly nf lf ng lj nh ln ni mk na nb nc nd bi translated">霍尔姆-邦费罗尼(<code class="fe ml mm mn mo b">"HB"</code>)</li><li id="bd7f" class="mv mw iq lu b lv ne ly nf lf ng lj nh ln ni mk na nb nc nd bi translated">本杰明-叶库铁力(<code class="fe ml mm mn mo b">"BY"</code>)</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">应用多重测试校正方法</figcaption></figure><p id="c424" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">输出</p><pre class="kg kh ki kj gt nt mo nu nv aw nw bi"><span id="d5d7" class="kw kx iq mo b gy nx ny l nz oa">p-value annotation legend:<br/>      ns: p &lt;= 1.00e+00<br/>       *: 1.00e-02 &lt; p &lt;= 5.00e-02<br/>      **: 1.00e-03 &lt; p &lt;= 1.00e-02<br/>     ***: 1.00e-04 &lt; p &lt;= 1.00e-03<br/>    ****: p &lt;= 1.00e-04<br/><br/>Failed_Flight v.s. Failed_Sound: <br/>Mann-Whitney-Wilcoxon test two-sided with Bonferroni correction, P_val:1.000e+00 U_stat=3.803e+04</span><span id="4008" class="kw kx iq mo b gy ob ny l nz oa">Live_Robots v.s. Live_Flight: <br/>Mann-Whitney-Wilcoxon test two-sided with Bonferroni correction, P_val:1.000e+00 U_stat=9.500e+00<br/>Live_Flight v.s. Live_Sound: <br/>Mann-Whitney-Wilcoxon test two-sided with Bonferroni correction, P_val:1.000e+00 U_stat=2.900e+01</span><span id="25ee" class="kw kx iq mo b gy ob ny l nz oa">Successful_Robots v.s. Successful_Flight: <br/>Mann-Whitney-Wilcoxon test two-sided with Bonferroni correction, P_val:8.862e-01 U_stat=7.500e+03</span><span id="9f58" class="kw kx iq mo b gy ob ny l nz oa">Successful_Flight v.s. Successful_Sound: <br/>Mann-Whitney-Wilcoxon test two-sided with Bonferroni correction, P_val:1.000e+00 U_stat=1.013e+04</span><span id="5038" class="kw kx iq mo b gy ob ny l nz oa">Failed_Robots v.s. Failed_Flight: <br/>Mann-Whitney-Wilcoxon test two-sided with Bonferroni correction, P_val:8.298e-01 U_stat=3.441e+04</span><span id="d402" class="kw kx iq mo b gy ob ny l nz oa">Live_Robots v.s. Live_Sound: <br/>Mann-Whitney-Wilcoxon test two-sided with Bonferroni correction, P_val:1.000e+00 U_stat=3.400e+01</span><span id="4d93" class="kw kx iq mo b gy ob ny l nz oa">Failed_Robots v.s. Failed_Sound: <br/>Mann-Whitney-Wilcoxon test two-sided with Bonferroni correction, P_val:3.771e-01 U_stat=3.364e+04</span><span id="8ca2" class="kw kx iq mo b gy ob ny l nz oa">Successful_Robots v.s. Successful_Sound: <br/>Mann-Whitney-Wilcoxon test two-sided with Bonferroni correction, P_val:1.504e-03 U_stat=2.491e+04</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/96fc2e0751da3686780d6ea42fb6f39f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vo5qrk6I2Y_bdHuBQrZPRw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">带注释的图4，相同的测试，带Bonferroni校正。请查看成功和失败的机器人和声音项目与之前情节的差异。</figcaption></figure><p id="412e" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">注意，<code class="fe ml mm mn mo b">annotate</code>函数返回数据。第二个值允许检索p值。正如我们在这里看到的，它们确实被调整了:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><pre class="kg kh ki kj gt nt mo nu nv aw nw bi"><span id="ac70" class="kw kx iq mo b gy nx ny l nz oa">8.04e-01 =&gt; 1.00e+00<br/>2.85e-01 =&gt; 1.00e+00<br/>9.58e-01 =&gt; 1.00e+00<br/>9.85e-02 =&gt; 8.86e-01<br/>7.23e-01 =&gt; 1.00e+00<br/>9.22e-02 =&gt; 8.30e-01<br/>1.15e-01 =&gt; 1.00e+00<br/><strong class="mo ir">4.19e-02 =&gt; 3.77e-01</strong><br/>1.67e-04 =&gt; 1.50e-03</span></pre><p id="8dfe" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><code class="fe ml mm mn mo b">Robots</code>和<code class="fe ml mm mn mo b">Sound</code> <code class="fe ml mm mn mo b">Failed</code>项目的总目标金额差异的p值从大约<code class="fe ml mm mn mo b">0.04</code>变为大约<code class="fe ml mm mn mo b">0.4</code>(上一列表中的倒数第二个项目)，并且不再被认为具有统计显著性(默认alpha为<code class="fe ml mm mn mo b">0.05</code>)。</p><h2 id="668c" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">奖金</h2><p id="f72e" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">支持其他类型的图。这里是与<code class="fe ml mm mn mo b">boxplot</code>相同的数据，以及其他调整的参数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">水平条形图</figcaption></figure><p id="da97" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">输出</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/7dec821ee266f7a35c34268b0dcd7629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g7xve5pnuYyA9Jcf99OtFg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">带有外部统计注释的水平条形图</figcaption></figure></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h1 id="8a89" class="oc kx iq bd ky od oe of lb og oh oi le jw oj jx li jz ok ka lm kc ol kd lq om bi translated">结论</h1><p id="2f4f" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">祝贺您完成本教程。在这篇文章中，我们讨论了<code class="fe ml mm mn mo b">Annotator</code>的几个用例，从使用定制标签到让包应用统计测试，所有这些都有几个格式选项。</p><p id="5996" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated">这已经涵盖了许多用例，但是您可能希望等待下一部分来发现更多的特性。</p><h2 id="c33d" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">下一步是什么？</h2><p id="f577" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">在以下部分中，我们将了解如何做到:</p><ul class=""><li id="aecc" class="mv mw iq lu b lv mp ly mq lf mx lj my ln mz mk na nb nc nd bi translated">注释不同种类的情节</li><li id="e7e2" class="mv mw iq lu b lv ne ly nf lf ng lj nh ln ni mk na nb nc nd bi translated">使用库中尚未提供的其他函数进行统计测试和多重比较校正，只需最少的额外代码(技术性更强)</li><li id="042f" class="mv mw iq lu b lv ne ly nf lf ng lj nh ln ni mk na nb nc nd bi translated">在注释<code class="fe ml mm mn mo b">text_format</code>选项中进一步定制p值格式</li><li id="8c41" class="mv mw iq lu b lv ne ly nf lf ng lj nh ln ni mk na nb nc nd bi translated">调整注释之间的间距和/或将其放置在绘图区域之外</li><li id="0e86" class="mv mw iq lu b lv ne ly nf lf ng lj nh ln ni mk na nb nc nd bi translated">使用<code class="fe ml mm mn mo b">annotate</code>的输出值</li></ul><h2 id="a020" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">承认</h2><p id="8840" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">Statannotations甚至在存在之前就是一项合作工作。两年前，在我第一次为stat anot做贡献之前，stat anot<a class="ae kv" href="https://github.com/webermarcolivier/statannot" rel="noopener ugc nofollow" target="_blank">已经做了很多工作，能成为其中的一员我感到非常高兴。</a></p><p id="4f85" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><a class="ae kv" href="https://github.com/dexplo/jupyter_to_medium" rel="noopener ugc nofollow" target="_blank"> Jupyter to Medium </a>和<a class="ae kv" href="https://github.com/damienmarlier51/JupyterNotebookImageExporter" rel="noopener ugc nofollow" target="_blank"> Junix </a>包是非常有用的资源，可以减少本文的工作量。如果您需要导出您的笔记本，您应该查看它们。</p><h2 id="4d6c" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">资源</h2><ul class=""><li id="d3c3" class="mv mw iq lu b lv lw ly lz lf ou lj ov ln ow mk na nb nc nd bi translated">Kickstarter <a class="ae kv" href="https://www.mavenanalytics.io/data-playground" rel="noopener ugc nofollow" target="_blank">数据集</a>"<em class="nj">2009年至2017年超过375，000个Kickstarter项目的数据"</em></li><li id="eee1" class="mv mw iq lu b lv ne ly nf lf ng lj nh ln ni mk na nb nc nd bi translated">本教程的Jupyter <a class="ae kv" href="https://github.com/trevismd/statannotations-tutorials" rel="noopener ugc nofollow" target="_blank">笔记本</a></li><li id="fb1a" class="mv mw iq lu b lv ne ly nf lf ng lj nh ln ni mk na nb nc nd bi translated"><a class="ae kv" href="https://github.com/trevismd/statannotations" rel="noopener ugc nofollow" target="_blank">统计符号</a>储存库</li></ul><p id="c702" class="pw-post-body-paragraph ls lt iq lu b lv mp jr lx ly mq ju ma lf mr mc md lj ms mf mg ln mt mi mj mk ij bi translated"><strong class="lu ir">感谢您的阅读！如果您有任何问题或意见，请随时回复。</strong></p></div></div>    
</body>
</html>