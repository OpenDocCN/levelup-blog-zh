<html>
<head>
<title>How to Get Median Sale Price</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何获得销售中间价</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-get-median-sale-price-47f93646fcca?source=collection_archive---------23-----------------------#2022-11-01">https://levelup.gitconnected.com/how-to-get-median-sale-price-47f93646fcca?source=collection_archive---------23-----------------------#2022-11-01</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="2faf" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">使用Python获取和可视化住房经济数据的分步教程</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/75fab60816614d7b927b40d11900dc54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mg66gg4l2s9F4KR2tIvu4g.jpeg"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">Avi Waxman 在<a class="ae kz" href="https://unsplash.com/photos/pJk4RRS7urs" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="296d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi lw translated"><span class="l lx ly lz bm ma mb mc md me di"> M </span> edian销售价格是房地产价值和当地房地产市场的指标。这是识别高增长和高增值领域的一个很好的方法。</p><p id="311f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">包括代理人和投资者在内的房地产专业人士参考销售价格中值，而不是平均价格，因为它较少受到扭曲房地产市场的异常值的影响。</p><h2 id="be1f" class="mf mg iu bd mh mi mj dn mk ml mm dp mn lj mo mp mq ln mr ms mt lr mu mv mw mx bi translated">如何计算销售中间价</h2><p id="fb23" class="pw-post-body-paragraph la lb iu lc b ld my jv lf lg mz jy li lj na ll lm ln nb lp lq lr nc lt lu lv in bi translated">计算中间价很简单。首先，创建一个从最低到最高或从最高到最低的价格列表。然后，找到中间的价格。</p><blockquote class="nd ne nf"><p id="431d" class="la lb ng lc b ld le jv lf lg lh jy li nh lk ll lm ni lo lp lq nj ls lt lu lv in bi translated">例如，如果一个社区有五套住宅出售，价格分别为100，000美元、150，000美元、200，000美元、300，000美元和1，000，000美元，那么中间销售价格为200，000美元。相比之下，同一个街区的平均销售价格为35万美元，相差15万美元。— <a class="ae kz" href="https://www.indeed.com/career-advice/career-development/average-sale-vs-median-sale-price#:~:text=Median%20sales%20price%20advantages,being%20skewed%20by%20outlier%20prices." rel="noopener ugc nofollow" target="_blank">的确</a></p></blockquote><h2 id="ccbd" class="mf mg iu bd mh mi mj dn mk ml mm dp mn lj mo mp mq ln mr ms mt lr mu mv mw mx bi translated">如何获取中间销售价格背后的数据</h2><p id="7531" class="pw-post-body-paragraph la lb iu lc b ld my jv lf lg mz jy li lj na ll lm ln nb lp lq lr nc lt lu lv in bi translated">销售价格中值可以在许多经济、房地产和邻里相关的网站上免费找到。</p><p id="3fa3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">潜在的历史数据由主要来源公布，包括美国人口普查局在弗雷德(美联储经济数据)在线数据库和全国房地产经纪人协会。</p><p id="337c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面是我们将介绍的检索历史数据的来源:</p><ul class=""><li id="a0ef" class="nk nl iu lc b ld le lg lh lj nm ln nn lr no lv np nq nr ns bi translated">弗雷德:美国人口普查局</li><li id="3ae1" class="nk nl iu lc b ld nt lg nu lj nv ln nw lr nx lv np nq nr ns bi translated"><a class="ae kz" href="https://rapidapi.com/arielherrera/api/us-housing-market-data" rel="noopener ugc nofollow" target="_blank">快速API:美国住房市场数据</a></li></ul><p id="e654" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv"> <em class="ng">这篇文章将讲述如何使用Python </em> </strong> <em class="ng">获得不同地理区域的销售价格中值。</em></p></div><div class="ab cl ny nz hy oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="in io ip iq ir"><h1 id="aa50" class="of mg iu bd mh og oh oi mk oj ok ol mn ka om kb mq kd on ke mt kg oo kh mw op bi translated">弗雷德:美国全国平均销售价格</h1><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oq"><img src="../Images/471c1be06289b79cb0f65e33b470f39d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Nrc-eNCS-UfVU3UNll96A.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://fred.stlouisfed.org/graph/?g=VjOs" rel="noopener ugc nofollow" target="_blank">弗雷德</a>图表截图</figcaption></figure><p id="4183" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">美国全国销售价格中值可以在FRED — <a class="ae kz" href="https://fred.stlouisfed.org/graph/?g=VjOs" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><blockquote class="nd ne nf"><p id="38e3" class="la lb ng lc b ld le jv lf lg lh jy li nh lk ll lm ni lo lp lq nj ls lt lu lv in bi translated">FRED是一个在线数据库，由来自许多国家、国际、公共和私人来源的成千上万的经济数据时间序列组成。— <a class="ae kz" href="https://fredhelp.stlouisfed.org/fred/about/about-fred/what-is-fred/" rel="noopener ugc nofollow" target="_blank">弗雷德·圣路易斯联邦储备银行</a></p></blockquote><p id="2c06" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">从<a class="ae kz" href="https://fred.stlouisfed.org/graph/?g=VjOs" rel="noopener ugc nofollow" target="_blank">直接链接</a>你可以下载数据，在社交媒体上分享数据，甚至在你的网站上嵌入互动图表。</p><p id="4db1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">交互式图表👇</p><div class="or os gq gs ot ou"><a href="https://fred.stlouisfed.org/graph/graph-landing.php?g=T20f&amp;width=670&amp;height=475" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fp"><div class="ow ab ox cl cj oy"><h2 class="bd iv gz z fq oz fs ft pa fv fx it bi translated">弗雷德图</h2><div class="pb l"><h3 class="bd b gz z fq oz fs ft pa fv fx dk translated">编辑描述</h3></div><div class="pc l"><p class="bd b dl z fq oz fs ft pa fv fx dk translated">fred.stlouisfed.org</p></div></div></div></a></div><p id="050c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">直接从FRED下载数据对于一次性项目非常有用。然而，如果我们想要在多个区域上执行数据分析或者为应用程序提供数据，那么它是不可伸缩的。</p><p id="5084" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">每当我们想要分析住房或经济指标时，都必须下载数据，这将是非常乏味的。</p><p id="2d23" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv"> <em class="ng">我们能做得更好吗？</em> </strong>没错！</p><p id="26bc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv"> <em class="ng">让我们使用Python以编程方式检索美国全国平均销售价格，并将其可视化。</em>T11】</strong></p></div><div class="ab cl ny nz hy oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="in io ip iq ir"><h1 id="1fc0" class="of mg iu bd mh og oh oi mk oj ok ol mn ka om kb mq kd on ke mt kg oo kh mw op bi translated">Python教程</h1><h2 id="104b" class="mf mg iu bd mh mi mj dn mk ml mm dp mn lj mo mp mq ln mr ms mt lr mu mv mw mx bi translated">先决条件</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pd"><img src="../Images/5b91cf1d057d3ef9cebe497d5d7504ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*auz8Vhs2RDjT2CIf1q1PRg.jpeg"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">帕特里克·托马索在<a class="ae kz" href="https://unsplash.com/photos/a1bicKTYqMo" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h2 id="896e" class="mf mg iu bd mh mi mj dn mk ml mm dp mn lj mo mp mq ln mr ms mt lr mu mv mw mx bi translated">可选(住房+经济数据)</h2><ol class=""><li id="5d44" class="nk nl iu lc b ld my lg mz lj pe ln pf lr pg lv ph nq nr ns bi translated"><a class="ae kz" href="https://docs.rapidapi.com/docs/consumer-quick-start-guide" rel="noopener ugc nofollow" target="_blank">注册免费的RapidAPI帐户</a>以获得API密钥(<a class="ae kz" href="https://docs.rapidapi.com/docs/consumer-quick-start-guide" rel="noopener ugc nofollow" target="_blank">注册Rapid API的步骤</a>)</li><li id="3a04" class="nk nl iu lc b ld nt lg nu lj nv ln nw lr nx lv ph nq nr ns bi translated">订阅<a class="ae kz" href="http://www.bit.ly/3AHH7sY" rel="noopener ugc nofollow" target="_blank">美国住房市场数据API </a></li></ol><h2 id="fbea" class="mf mg iu bd mh mi mj dn mk ml mm dp mn lj mo mp mq ln mr ms mt lr mu mv mw mx bi translated">I .导入库</h2><p id="d8c4" class="pw-post-body-paragraph la lb iu lc b ld my jv lf lg mz jy li lj na ll lm ln nb lp lq lr nc lt lu lv in bi translated">首先，导入所需的库。</p><pre class="kk kl km kn gu pi pj pk pl aw pm bi"><span id="7891" class="mf mg iu pj b gz pn po l pp pq"># fred data request<br/>import pandas_datareader as pdr<br/>import pandas as pd<br/>from datetime import datetime</span><span id="0b68" class="mf mg iu pj b gz pr po l pp pq"># api request<br/>import requests<br/>import time</span><span id="88b5" class="mf mg iu pj b gz pr po l pp pq"># visualization<br/>import plotly.express as px<br/>import plotly.graph_objects as go<br/>from plotly.subplots import make_subplots</span></pre><h2 id="dceb" class="mf mg iu bd mh mi mj dn mk ml mm dp mn lj mo mp mq ln mr ms mt lr mu mv mw mx bi translated">I .局部变量和常量</h2><p id="48af" class="pw-post-body-paragraph la lb iu lc b ld my jv lf lg mz jy li lj na ll lm ln nb lp lq lr nc lt lu lv in bi translated">其次，为日期字符串对象设置变量。</p><pre class="kk kl km kn gu pi pj pk pl aw pm bi"><span id="dbf6" class="mf mg iu pj b gz pn po l pp pq">start_date = '1900-01-01'<br/>end_date = datetime.today().strftime('%Y-%m-%d')</span><span id="761a" class="mf mg iu pj b gz pr po l pp pq">print('Start date:', start_date)<br/>print('End date:', end_date)</span></pre><p id="4bba" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们有两个变量代表我们的日期范围:<em class="ng">开始日期</em>和<em class="ng">结束日期</em>。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ps"><img src="../Images/ed8eaa78dd5c8e0d024abf955a43c998.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WqnjrmXhBq-a01iE_xms6Q.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">代码输出的屏幕截图</figcaption></figure><p id="1c45" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">要从FRED检索任何数据点，我们需要检索<em class="ng">系列ID </em>。<em class="ng">系列ID </em>是FRED在线数据库中经济数据点的唯一标识符。</p><p id="0f49" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">观察弗雷德指标时，您可以在标题的右上角找到<em class="ng">系列ID </em>。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pt"><img src="../Images/026f28f70b3cc28d487c916f7ff0e196.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BpKRdYOTQ_87aAXsV7Hkmg.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://fred.stlouisfed.org/graph/?g=VjOs" rel="noopener ugc nofollow" target="_blank">弗雷德</a>图表截图</figcaption></figure><p id="f902" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv"> <em class="ng">对于美国全国中等销售价格，系列ID为MSPUS。</em> </strong></p><p id="6c4b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们将我们的<em class="ng"> series_code </em>变量设置为‘MSPUS’。接下来，我们调用<a class="ae kz" href="https://pandas-datareader.readthedocs.io/en/latest/readers/fred.html" rel="noopener ugc nofollow" target="_blank"> Pandas Datareader </a>并传递我们的<em class="ng"> series_code </em>和日期范围变量来检索信息。</p><pre class="kk kl km kn gu pi pj pk pl aw pm bi"><span id="4f2d" class="mf mg iu pj b gz pn po l pp pq">series_code = 'MSPUS' # FRED series id</span><span id="6345" class="mf mg iu pj b gz pr po l pp pq">df = pdr.DataReader(series_code, 'fred', start_date, end_date).reset_index()</span><span id="0194" class="mf mg iu pj b gz pr po l pp pq">df.tail(5)</span></pre><p id="0234" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们的输出包括美国全国销售价格中值的季度数据。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pu"><img src="../Images/e934a2dea738c337d85342d40c554af9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qLe07RxfmKGQOJ5CDE_iuQ.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">代码输出的屏幕截图</figcaption></figure><p id="7161" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">接下来，让我们使用<a class="ae kz" href="https://plotly.com/python/line-charts/" rel="noopener ugc nofollow" target="_blank"> Plotly Express </a>在一个只有<strong class="lc iv"> <em class="ng">单行代码的折线图中可视化中间销售价格！</em>T11】</strong></p><pre class="kk kl km kn gu pi pj pk pl aw pm bi"><span id="1003" class="mf mg iu pj b gz pn po l pp pq">fig = px.line(df, x=['DATE'], y=series_code, title = 'Median Sales Price of Houses Sold')</span><span id="85e4" class="mf mg iu pj b gz pr po l pp pq">fig.show()</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pv"><img src="../Images/a308f60f086cafa02c22eb2a74fb29e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lAIheCZ-Zh4mallFd3LdRA.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">代码输出的屏幕截图</figcaption></figure><p id="5184" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">很好，现在您已经用几行简单的代码获得了美国全国销售价格中位数的历史数据。</p><p id="9a16" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv"> <em class="ng">让我们收集更多的住房和经济特征，以更好地了解住房趋势。</em>T15】</strong></p><h1 id="daff" class="of mg iu bd mh og pw oi mk oj px ol mn ka py kb mq kd pz ke mt kg qa kh mw op bi translated">美国住房市场数据</h1><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qb"><img src="../Images/8e1590662fd09c570d8a465751b0c1b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3_HdWStfjU5aC6MgSpibow.jpeg"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@cbarbalis" rel="noopener ugc nofollow" target="_blank">克里斯·巴尔巴利斯</a>在<a class="ae kz" href="https://unsplash.com/photos/Y6N9K0RbZWM" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="6d97" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">美国住房市场数据API📊是一个数据源，整合了来自Redfin、FRED和美国人口普查局的住房和经济指标，从国家一级一直到邮政编码一级。</p><blockquote class="nd ne nf"><p id="8268" class="la lb ng lc b ld le jv lf lg lh jy li nh lk ll lm ni lo lp lq nj ls lt lu lv in bi translated">API的目的是提供一种快速的方法来检索已经清理和结构化的住房和经济数据。这可以让你专注于数据分析，而不是数小时的数据准备！</p></blockquote><h2 id="9b4f" class="mf mg iu bd mh mi mj dn mk ml mm dp mn lj mo mp mq ln mr ms mt lr mu mv mw mx bi translated">一、API密钥</h2><p id="42c4" class="pw-post-body-paragraph la lb iu lc b ld my jv lf lg mz jy li lj na ll lm ln nb lp lq lr nc lt lu lv in bi translated">首先，订阅<a class="ae kz" href="https://rapidapi.com/arielherrera/api/us-housing-market-data" rel="noopener ugc nofollow" target="_blank">美国住房市场数据API </a>。输入您的rapid API密钥。这将允许您访问区域数据集。</p><p id="53f1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><em class="ng">详细步骤请参见上述先决条件部分</em>。</p><pre class="kk kl km kn gu pi pj pk pl aw pm bi"><span id="ac58" class="mf mg iu pj b gz pn po l pp pq">rapid_api_key = '&lt;ENTER YOUR API KEY HERE&gt;'</span></pre><h2 id="a966" class="mf mg iu bd mh mi mj dn mk ml mm dp mn lj mo mp mq ln mr ms mt lr mu mv mw mx bi translated">二。请求</h2><p id="7c0e" class="pw-post-body-paragraph la lb iu lc b ld my jv lf lg mz jy li lj na ll lm ln nb lp lq lr nc lt lu lv in bi translated">这里，我们向API发出请求，以获取<em class="ng"> state_code </em> FL (Florida)的住房数据。</p><pre class="kk kl km kn gu pi pj pk pl aw pm bi"><span id="0331" class="mf mg iu pj b gz pn po l pp pq"># request state housing data<br/>url = "https://us-housing-market-data.p.rapidapi.com/getState"<br/>querystring = {"state_code":"FL"}</span><span id="4c57" class="mf mg iu pj b gz pr po l pp pq">headers = {<br/>    "X-RapidAPI-Key": rapid_api_key,<br/>    "X-RapidAPI-Host": "us-housing-market-data.p.rapidapi.com"<br/>}</span><span id="3361" class="mf mg iu pj b gz pr po l pp pq">response = requests.request("GET", url, headers=headers, params=querystring)</span><span id="cde2" class="mf mg iu pj b gz pr po l pp pq"># transform response into a dataframe<br/>df = pd.DataFrame.from_dict(response.json(), orient='index')<br/>df.tail()</span></pre><p id="feb8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这为我们提供了房屋统计的详细视图，包括中值销售价格、中值销售价格月环比、中值销售价格年同比以及更多指标。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qc"><img src="../Images/428f70eda5881b3315f16651dc4fc15e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-wdsMksYP4UxRxRJviDb9A.png"/></div></div></figure><p id="9439" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们创建一个DataFrame(包含行和列的表)的副本。这将用于我们的阴谋。</p><p id="e5dd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这里，我们根据<em class="ng">房产类型</em>进行筛选，以查看<em class="ng">所有住宅</em>房产类型的数据。您还可以过滤联排别墅、公寓、独栋住宅和多户住宅。</p><pre class="kk kl km kn gu pi pj pk pl aw pm bi"><span id="1ca6" class="mf mg iu pj b gz pn po l pp pq"># create table to chart, all residential<br/>df_plot = df.copy()<br/>df_plot = df_plot.loc[df_plot['property_type'] == 'All Residential']\<br/>    .sort_values(by='period_end') # sort values by date</span></pre><p id="c43e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">接下来，我们使用<a class="ae kz" href="https://plotly.com/python/multiple-axes/" rel="noopener ugc nofollow" target="_blank"> Plotly Graphs </a>来可视化我们的数据。</p><p id="a580" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们创建两个y轴，在一个图表中查看<em class="ng">中值销售价格</em>和<em class="ng">中值销售价格同比</em>。</p><pre class="kk kl km kn gu pi pj pk pl aw pm bi"><span id="bf26" class="mf mg iu pj b gz pn po l pp pq"># Create figure with secondary y-axis<br/>fig = make_subplots(specs=[[{"secondary_y": True}]])<br/>x_val = 'period_end'<br/>y_val = 'median_sale_price'</span><span id="bc39" class="mf mg iu pj b gz pr po l pp pq"># Add traces<br/>fig.add_trace(<br/>    go.Scatter(x=df_plot[x_val].tolist(),<br/>    y=df_plot[y_val].tolist(),<br/>    name="{}".format(y_val.replace("_", " "))),<br/>    secondary_y=False,<br/>)</span><span id="4d7e" class="mf mg iu pj b gz pr po l pp pq">fig.add_trace(<br/>    go.Scatter(x=df_plot[x_val].tolist(),<br/>    y=df_plot['{}_yoy'.format(y_val)].tolist(),<br/>    name="{}".format(y_val.replace("_", " ") + " yoy")),<br/>    secondary_y=True,<br/>)</span><span id="974c" class="mf mg iu pj b gz pr po l pp pq"># Add figure title<br/>fig.update_layout(<br/>    title_text=' '.join([x.capitalize() for x in y_val.split("_")])<br/>)</span><span id="37a8" class="mf mg iu pj b gz pr po l pp pq"># Set x-axis title<br/>fig.update_xaxes(title_text="date")</span><span id="e79e" class="mf mg iu pj b gz pr po l pp pq"># Set y-axes titles<br/>fig.update_yaxes(title_text=y_val.replace("_", " "), secondary_y=False)<br/>fig.update_yaxes(title_text=y_val.replace("_", " ") + " yoy", secondary_y=True)</span><span id="dd12" class="mf mg iu pj b gz pr po l pp pq">fig.show()</span></pre><p id="b008" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">从我们的红色线图(<em class="ng">中值销售价格同比</em>)中，我们可以看到，2020年3月之后，与去年同期相比，销售价格出现了历史性的高增长。</p><p id="dc5a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv"> <em class="ng">佛罗里达州的销售价格中值达到25%以上，销售价格同比增长。</em> </strong></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pv"><img src="../Images/0bdc32fe3a71a7cb44693ac1d3a69a00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U9KMgM8k73rLK1MmlSo-hA.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">代码输出的屏幕截图</figcaption></figure><h1 id="3fe0" class="of mg iu bd mh og pw oi mk oj px ol mn ka py kb mq kd pz ke mt kg qa kh mw op bi translated">多重状态</h1><p id="1392" class="pw-post-body-paragraph la lb iu lc b ld my jv lf lg mz jy li lj na ll lm ln nb lp lq lr nc lt lu lv in bi translated">我们可以使用<a class="ae kz" href="https://rapidapi.com/arielherrera/api/us-housing-market-data" rel="noopener ugc nofollow" target="_blank">美国住房市场数据API </a>来收集多个州的数据。</p><p id="6491" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv"> <em class="ng">查看多个地区的数据有助于进行地区比较，以确定相对于类似市场的市场增长或下降。</em>T11】</strong></p><h2 id="1391" class="mf mg iu bd mh mi mj dn mk ml mm dp mn lj mo mp mq ln mr ms mt lr mu mv mw mx bi translated">I .获取地区id</h2><p id="b1cc" class="pw-post-body-paragraph la lb iu lc b ld my jv lf lg mz jy li lj na ll lm ln nb lp lq lr nc lt lu lv in bi translated">首先，我们查询<em class="ng"> getRegionId </em>端点来查看所有可查询的状态。</p><pre class="kk kl km kn gu pi pj pk pl aw pm bi"><span id="a9e2" class="mf mg iu pj b gz pn po l pp pq">url = "https://us-housing-market-data.p.rapidapi.com/getRegionId"<br/>querystring = {"region_type":"state"}</span><span id="c5e5" class="mf mg iu pj b gz pr po l pp pq">headers = {<br/>    "X-RapidAPI-Key": rapid_api_key,<br/>    "X-RapidAPI-Host": "us-housing-market-data.p.rapidapi.com"<br/>}</span><span id="1acd" class="mf mg iu pj b gz pr po l pp pq">response = requests.request("GET", url, headers=headers, params=querystring)</span><span id="9594" class="mf mg iu pj b gz pr po l pp pq">df_states_ids = pd.DataFrame.from_dict(response.json(), orient='index')<br/>df_states_ids.head()</span></pre><p id="836a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">对于每个州，我们都有一个<em class="ng"> region_id </em>。我们将把这个值传递到我们的请求中。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qd"><img src="../Images/74ba47216769a23e315ab286c808423e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BERZgnPpdWWXFKIttYvJYg.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">代码输出的屏幕截图</figcaption></figure><h2 id="d313" class="mf mg iu bd mh mi mj dn mk ml mm dp mn lj mo mp mq ln mr ms mt lr mu mv mw mx bi translated">二。遍历状态列表</h2><p id="5099" class="pw-post-body-paragraph la lb iu lc b ld my jv lf lg mz jy li lj na ll lm ln nb lp lq lr nc lt lu lv in bi translated">请求ids列表中每个州的住房数据。</p><p id="4d15" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">使用<a class="ae kz" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.concat.html" rel="noopener ugc nofollow" target="_blank"> Pandas Concat </a>将所有状态组合成一个数据帧。</p><pre class="kk kl km kn gu pi pj pk pl aw pm bi"><span id="5a87" class="mf mg iu pj b gz pn po l pp pq">df_states_list = []<br/>url = "https://us-housing-market-data.p.rapidapi.com/getState"</span><span id="705c" class="mf mg iu pj b gz pr po l pp pq">for s in df_states_ids['region_id'].tolist():<br/>    querystring = {"state_code":s}<br/>    headers = {<br/>        "X-RapidAPI-Key": rapid_api_key,<br/>        "X-RapidAPI-Host": "us-housing-market-data.p.rapidapi.com"<br/>    }</span><span id="92a9" class="mf mg iu pj b gz pr po l pp pq">    response = requests.request("GET", url, headers=headers, params=querystring)</span><span id="00d1" class="mf mg iu pj b gz pr po l pp pq">    _df_states = pd.DataFrame.from_dict(response.json(), orient='index')<br/>    df_states_list.append(_df_states)</span><span id="0aa7" class="mf mg iu pj b gz pr po l pp pq">    time.sleep(0.5) # two requests per second for free accounts</span><span id="5eac" class="mf mg iu pj b gz pr po l pp pq"># join all states as one table<br/>df_states = pd.concat(df_states_list)<br/>df_states.head()</span></pre><p id="c6be" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这里，我们可以观察到一个单一的数据框架，其中包含所有可用州的住房信息。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qe"><img src="../Images/6125dd8a06c3ca6b9308524f83c1db7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ulfUA2PLpeuwq6v-Op2xhw.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">代码输出的屏幕截图</figcaption></figure><p id="d74a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">接下来，我们创建一个要绘制的数据帧的副本。</p><p id="2ff3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们对所有住宅物业的数据框架进行过滤，以创建两个独立的数据框架。</p><p id="54e0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们将使用这些子表来比较从2012年到本博客当前年份2022年的中间销售价格。</p><pre class="kk kl km kn gu pi pj pk pl aw pm bi"><span id="5d34" class="mf mg iu pj b gz pn po l pp pq">df_states_plot = df_states.copy()<br/>earliest_date = df_states['period_end'].min()<br/>latest_date = df_states['period_end'].max()<br/>print('Earliest date:', earliest_date)<br/>print('Latest date:', latest_date)</span><span id="1560" class="mf mg iu pj b gz pr po l pp pq">df_states_plot_earliest = df_states_plot.loc[<br/>    (df_states_plot['property_type'] == 'All Residential') &amp; (df_states_plot['period_end'] == earliest_date)]</span><span id="f6f2" class="mf mg iu pj b gz pr po l pp pq">df_states_plot_latest = df_states_plot.loc[<br/>    (df_states_plot['property_type'] == 'All Residential') &amp; (df_states_plot['period_end'] == latest_date)]</span><span id="4f65" class="mf mg iu pj b gz pr po l pp pq">df_states_plot_latest.tail()</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qf"><img src="../Images/2e0a80607d4c3dc62ccf1b365200ec57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4cZvhBI5OcrraWSd5kIygw.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">代码输出的屏幕截图</figcaption></figure><p id="fb68" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">有了<a class="ae kz" href="https://plotly.com/python/choropleth-maps/" rel="noopener ugc nofollow" target="_blank"> Plotly Express Choropleth图表</a>，我们可以快速可视化美国各地理区域的特征，包括各州。</p><pre class="kk kl km kn gu pi pj pk pl aw pm bi"><span id="ddff" class="mf mg iu pj b gz pn po l pp pq">fig = px.choropleth(df_states_plot_earliest,<br/>    locations="state_code",<br/>    locationmode="USA-states",<br/>    color="median_sale_price",<br/>    title="USA Median Sale Price: {}".format(earliest_date),<br/>    width=800, height=400)</span><span id="1487" class="mf mg iu pj b gz pr po l pp pq">fig.show()</span></pre><p id="dacb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">2012年，西海岸和东北海岸的销售价格中值最高(橙色/黄色)。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qg"><img src="../Images/bb02041f357d4ec5b9c678f4d9cb3fbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P0lMb7hCUFJp5XyVDVO9tg.png"/></div></div></figure><p id="1050" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们绘制最新的信息日期。</p><pre class="kk kl km kn gu pi pj pk pl aw pm bi"><span id="7a8a" class="mf mg iu pj b gz pn po l pp pq">fig = px.choropleth(df_states_plot_latest,<br/>    locations="state_code",<br/>    locationmode="USA-states",<br/>    color="median_sale_price",<br/>    title="USA Median Sale Price: {}".format(latest_date),<br/>    width=800, height=400)</span><span id="0703" class="mf mg iu pj b gz pr po l pp pq">fig.show()</span></pre><p id="4cb8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">2022年，右手边的色阶扩大。最高销售价格中位数为70万美元以上。总体而言，我们看到美国各州的销售价格中位数在10年时间跨度内有所上升。</p><p id="d87d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此外，以前被认为是“低成本”(深紫色)的市场现在正在转变为中等到昂贵的市场。这包括东南部地区和中西部各州。</p><p id="1802" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">与其他州相比，这些州的销售价格中值的增长可能是由于2020-2022年间的移民趋势。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qg"><img src="../Images/f7313d2181e1f79b6e5779cea4ee3ab6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h68tOoCx8LH6nVkZ5VJsRA.png"/></div></div></figure><h1 id="c5e3" class="of mg iu bd mh og pw oi mk oj px ol mn ka py kb mq kd pz ke mt kg qa kh mw op bi translated">Tableau仪表板</h1><p id="5190" class="pw-post-body-paragraph la lb iu lc b ld my jv lf lg mz jy li lj na ll lm ln nb lp lq lr nc lt lu lv in bi translated">想要观察美国各地的多项经济和住房指标吗？</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qh"><img src="../Images/8198fd43d8c3d1cb7cffbaab93903ec4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I2ZXa__qDak2sWeN4bTzxA.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">AnalyticsAriel Tableau: <a class="ae kz" href="https://public.tableau.com/app/profile/ariel.herrera5041/viz/USHousingMarketStatsNational/NationalDashboard" rel="noopener ugc nofollow" target="_blank">美国全国住房统计数据</a></figcaption></figure><p id="e876" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">查看我的课程🚨房地产数据分析简介🚨</p><div class="or os gq gs ot ou"><a href="https://analyticsariel.teachable.com/p/real-estate-data-analytics" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fp"><div class="ow ab ox cl cj oy"><h2 class="bd iv gz z fq oz fs ft pa fv fx it bi translated">房地产数据分析</h2><div class="pb l"><h3 class="bd b gz z fq oz fs ft pa fv fx dk translated">嘿！我叫阿里尔·埃雷拉，我是AnalyticsAriel.com的创始人。我对数据分析的热情📊而且真实…</h3></div><div class="pc l"><p class="bd b dl z fq oz fs ft pa fv fx dk translated">analyticsariel.teachable.com</p></div></div><div class="qi l"><div class="qj l qk ql qm qi qn kt ou"/></div></div></a></div></div><div class="ab cl ny nz hy oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="in io ip iq ir"><h1 id="551d" class="of mg iu bd mh og oh oi mk oj ok ol mn ka om kb mq kd on ke mt kg oo kh mw op bi translated">来源</h1><div class="or os gq gs ot ou"><a href="https://fred.stlouisfed.org/graph/?g=T20f" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fp"><div class="ow ab ox cl cj oy"><h2 class="bd iv gz z fq oz fs ft pa fv fx it bi translated">美国房屋销售价格中位数|弗雷德|圣路易斯联邦储备银行</h2><div class="pb l"><h3 class="bd b gz z fq oz fs ft pa fv fx dk translated">资料来源:美国人口普查局资料来源:美国住房和城市发展部发布:新住宅销售…</h3></div><div class="pc l"><p class="bd b dl z fq oz fs ft pa fv fx dk translated">fred.stlouisfed.org</p></div></div><div class="qi l"><div class="qo l qk ql qm qi qn kt ou"/></div></div></a></div><div class="or os gq gs ot ou"><a href="https://www.redfin.com/news/data-center/" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fp"><div class="ow ab ox cl cj oy"><h2 class="bd iv gz z fq oz fs ft pa fv fx it bi translated">数据中心</h2><div class="pb l"><h3 class="bd b gz z fq oz fs ft pa fv fx dk translated">从Redfin查看和下载最新的房地产市场数据，包括房价、销售、库存、新上市房源…</h3></div><div class="pc l"><p class="bd b dl z fq oz fs ft pa fv fx dk translated">www.redfin.com</p></div></div><div class="qi l"><div class="qp l qk ql qm qi qn kt ou"/></div></div></a></div><h1 id="7dae" class="of mg iu bd mh og pw oi mk oj px ol mn ka py kb mq kd pz ke mt kg qa kh mw op bi translated">引用</h1><p id="73a8" class="pw-post-body-paragraph la lb iu lc b ld my jv lf lg mz jy li lj na ll lm ln nb lp lq lr nc lt lu lv in bi translated">美国人口普查局和美国住房和城市发展部，美国房屋销售价格中值[MSPUS]，从圣路易斯美联储银行检索；<a class="ae kz" href="https://fred.stlouisfed.org/series/MSPUS," rel="noopener ugc nofollow" target="_blank">https://fred.stlouisfed.org/series/MSPUS,</a>2022年10月31日</p></div></div>    
</body>
</html>