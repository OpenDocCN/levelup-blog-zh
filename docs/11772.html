<html>
<head>
<title>Handling conditional exceptions efficiently when iterating arrays</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">迭代数组时有效处理条件异常</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/handling-conditional-exceptions-efficiently-when-iterating-arrays-99a6e6e5c664?source=collection_archive---------16-----------------------#2022-04-14">https://levelup.gitconnected.com/handling-conditional-exceptions-efficiently-when-iterating-arrays-99a6e6e5c664?source=collection_archive---------16-----------------------#2022-04-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/049a80b036df7974bc1b87ed14a5f5b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wOXhRnnKvzgcKjJm"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@vinikhill?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> NIKHIL </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="1967" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像往常一样，我写这个故事是因为这个话题不止一次给我带来了问题。有多少次你在遍历一个数组，并且想在当前元素满足某些条件的情况下对它做些什么？一直都是，对吧？</p><p id="c85e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我对编程并不陌生，但对JavaScript却相对陌生。在学习JavaScript时，我学习了迭代数组的<code class="fe lb lc ld le b">map()</code>和<code class="fe lb lc ld le b">forEach()</code>方法。直到最近我才意识到，这些方法实际上是数组本身的一部分。数组是一个JavaScript对象，带有许多固有的属性和方法。这些方法不是循环，因此缺少循环的某些功能。JavaScript循环语句包括:</p><ul class=""><li id="aaf1" class="lf lg iq kf b kg kh kk kl ko lh ks li kw lj la lk ll lm ln bi translated">做…的同时</li><li id="082a" class="lf lg iq kf b kg lo kk lp ko lq ks lr kw ls la lk ll lm ln bi translated">为了…在</li><li id="ed10" class="lf lg iq kf b kg lo kk lp ko lq ks lr kw ls la lk ll lm ln bi translated">为了…的</li><li id="444b" class="lf lg iq kf b kg lo kk lp ko lq ks lr kw ls la lk ll lm ln bi translated">为</li><li id="eb44" class="lf lg iq kf b kg lo kk lp ko lq ks lr kw ls la lk ll lm ln bi translated">在…期间</li></ul></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="5e1c" class="ma mb iq bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">方案</h1><p id="c595" class="pw-post-body-paragraph kd ke iq kf b kg my ki kj kk mz km kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">让我用一个真实的用例来进一步解释我自己的困境。我需要建立一个每天运行并生成发票的流程；然而，我需要根据我正在处理的项目，将发票分成“每日”、“每周”和“每月”的时间表。</p><p id="7628" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该过程将在由计划触发的服务器上运行。</p><p id="87bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">“每日”发票流程应每天处理，并包含其账单时间表设置为每日且发生在今天的所有项目。</p><p id="22e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">“每周”发票流程应仅在周一处理，并包含其账单时间表设置为每日且发生在上周的所有项目。</p><p id="963a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">“每月”发票流程应仅在每月的第一天进行处理，并包含其开票计划设置为每月且发生在上个月内的所有项目。</p><p id="a3b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为一名优秀的开发人员，我不会构建三个独立的过程。我将构建一个处理所有三种场景的流程。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="ed99" class="ma mb iq bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">使用数组方法</h1><figure class="ne nf ng nh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/fcc6ecd3d4927cb8794cc6393da43569.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SPwrj6Yqx_pz1ZKNB9zD1g.png"/></div></div></figure><p id="fc1b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的场景中，我使用的是<code class="fe lb lc ld le b">Array.prototype.forEach</code>方法。这种方法没有明显的问题，因为我们没有准备好所有的代码。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="6726" class="ma mb iq bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">Using循环语句</h1><figure class="ne nf ng nh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/4c2ab1b442227ebea67ecacc41c566c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mjwuiJcTqpMGkntjwTcdrQ.png"/></div></div></figure><p id="fda9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个场景中，我使用带有标签的<code class="fe lb lc ld le b">for...of</code>循环语句。你注意到细微的差别了吗？</p><blockquote class="nj nk nl"><p id="2483" class="kd ke nm kf b kg kh ki kj kk kl km kn nn kp kq kr no kt ku kv np kx ky kz la ij bi translated">注意:我发现<code class="fe lb lc ld le b">for...of</code>循环语句在处理数组时非常有用。也可以用<code class="fe lb lc ld le b">for...in</code>代替<code class="fe lb lc ld le b">Object.keys(myObject).forEach()</code>。</p></blockquote><p id="30f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当使用循环语句时，我可以使用数组方法中没有的另外两个重要语句:break和continue。</p><p id="6f6e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关键是后一个例子随着时间的推移将更具可读性。当您查看“每周”切换案例时，您会看到我的(负)条件，该条件中唯一的语句是“继续”。与第一个场景相比，在第一个场景中，我的所有代码都在<code class="fe lb lc ld le b">if</code>条件中。</p><blockquote class="nj nk nl"><p id="5249" class="kd ke nm kf b kg kh ki kj kk kl km kn nn kp kq kr no kt ku kv np kx ky kz la ij bi translated">注意:当你有嵌套循环时，标签的使用非常重要。标签允许您指定继续或中断哪个循环。</p></blockquote></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="c41f" class="ma mb iq bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">结论</h1><p id="435e" class="pw-post-body-paragraph kd ke iq kf b kg my ki kj kk mz km kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">大多数开发者都同意条件语句(<code class="fe lb lc ld le b">if</code>、<code class="fe lb lc ld le b">switch</code>等)。)应该尽快结束。在这些结构中有几页语句很难阅读和维护。</p><p id="af61" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<code class="fe lb lc ld le b">break</code>和<code class="fe lb lc ld le b">continue</code>也可以加快处理速度，因为循环实例化会立即停止，而不是继续到循环语句的末尾。</p><p id="f9f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我无法告诉你我遇到过多少次在<code class="fe lb lc ld le b">map()</code>或<code class="fe lb lc ld le b">forEach()</code>中得到意外结果的情况，因为我的逻辑最终并不总是排除所有条件。这是因为我的条件逻辑在规模上变得难以管理。使用带有<code class="fe lb lc ld le b">break</code>和<code class="fe lb lc ld le b">continue</code>的循环肯定有助于缓解这种情况。</p></div></div>    
</body>
</html>