<html>
<head>
<title>AWS CDK for Beginners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS初学者CDK</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/aws-cdk-for-beginners-e6c05ad91895?source=collection_archive---------2-----------------------#2020-05-23">https://levelup.gitconnected.com/aws-cdk-for-beginners-e6c05ad91895?source=collection_archive---------2-----------------------#2020-05-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/c8e814fabd943458c1a8b145890cd600.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*qMLfwgI_WvtxLL0EVCJeMQ.png"/></div></figure><blockquote class="ju jv jw"><p id="8eea" class="jx jy jz ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本文的目标读者是不熟悉Amazon Web Services (AWS)或AWS云开发工具包(CDK)的人。</p></blockquote><p id="fe47" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">在本文中，我们将了解什么是AWS CDK，以及它能为对自动化AWS基础设施的各个方面感兴趣的开发人员做些什么。(提示:如果您对DevOps有一点点兴趣，您将会爱上这个框架——相信我)。</p><p id="d915" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">你可能想知道为什么AWS和为什么AWS CDK？在接下来的章节中，我将简要描述我为每个项目选择AWS和AWS CDK的原因。</p></div><div class="ab cl kz la hu lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ij ik il im in"><h1 id="e972" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">自动气象站简史</h1><blockquote class="me"><p id="151e" class="mf mg iq bd mh mi mj mk ml mm mn kv dk translated">AWS是云基础设施即服务领域的领导者。<a class="ae mo" href="https://aws.amazon.com/blogs/aws/aws-named-as-a-leader-in-gartners-infrastructure-as-a-service-iaas-magic-quadrant-for-the-9th-consecutiveyear/" rel="noopener ugc nofollow" target="_blank">魔力象限连续9年排名it第一。</a></p></blockquote><p id="e81e" class="pw-post-body-paragraph jx jy iq ka b kb mp kd ke kf mq kh ki kw mr kl km kx ms kp kq ky mt kt ku kv ij bi translated">AWS每年都会发布新的服务和功能。AWS于2006年3月19日公开推出，向公众提供近2-3项服务，快进到今天，它为开发者提供了大量的服务(根据<a class="ae mo" href="https://en.wikipedia.org/wiki/Amazon_Web_Services" rel="noopener ugc nofollow" target="_blank">维基百科</a>，2020年，这个数字约为212)。</p><p id="45e1" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">你可以想象，这使得要掌握所有这些变得非常困难。实际上，我还没有遇到一个人可以在400级别上深入研究所有的服务。掌握多种AWS服务本身就是一项了不起的成就，但不幸的是，这超出了本文的范围。</p></div><div class="ab cl kz la hu lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ij ik il im in"><h1 id="6fef" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">CDK自动气象站简史</h1><blockquote class="me"><p id="c955" class="mf mg iq bd mh mi mj mk ml mm mn kv dk translated">AWS CDK是一个开源框架，允许开发人员使用他们喜欢的编程语言来自动化AWS基础设施。</p></blockquote><p id="7c97" class="pw-post-body-paragraph jx jy iq ka b kb mp kd ke kf mq kh ki kw mr kl km kx ms kp kq ky mt kt ku kv ij bi translated">AWS提供的众多服务之一是<a class="ae mo" href="https://aws.amazon.com/cloudformation/" rel="noopener ugc nofollow" target="_blank"> AWS CloudFormation </a>。AWS CloudFormation允许您使用代码自动化您的AWS基础设施，称为基础设施即代码(IaC)。简单地说，你可以使用<a class="ae mo" href="https://en.wikipedia.org/wiki/YAML" rel="noopener ugc nofollow" target="_blank"> YAML </a>或<a class="ae mo" href="https://en.wikipedia.org/wiki/JSON" rel="noopener ugc nofollow" target="_blank"> JSON </a>来描述你想要如何配置和部署你的AWS基础设施。</p><p id="082d" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">当您独自工作或有一小组需要交互的服务时，以这种方式自动化您的AWS基础架构是很好的，但如果您有一个大型开发团队一起工作，这可能会很快失控，这使得维护和在以后重新访问基础架构非常困难，因为它可能非常脆弱。</p><p id="faf6" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">2019年7月11日，AWS使<a class="ae mo" href="https://aws.amazon.com/blogs/aws/aws-cloud-development-kit-cdk-typescript-and-python-are-now-generally-available/" rel="noopener ugc nofollow" target="_blank"> AWS CDK正式上市</a>，基础设施自动化的世界被彻底改造。</p></div><div class="ab cl kz la hu lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ij ik il im in"><h1 id="a874" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">AWS CDK和AWS CloudFormation有什么区别？</h1><p id="b009" class="pw-post-body-paragraph jx jy iq ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">AWS CDK和AWS CloudFormation都允许您自动化AWS基础架构，但是使用AWS CDK，您需要使用编程语言(如TypeScript、JavaScript、Python、Java和C#/)。NET)来完成，而AWS CloudFormation使用YAML或JSON来完成。</p><p id="a10f" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">默认情况下，AWS CDK实际上会根据您在部署之前输入的代码生成一个YAML AWS CloudFormation模板。请记住，AWS CDK不是一项服务，而是一个开源框架，允许开发人员使用他们最喜欢的编程语言来配置和部署他们的AWS基础设施。</p><p id="346e" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">AWS CDK使开发人员更容易使用AWS基础设施，因为您的AWS基础设施现在可以使用熟悉的编程语言进行逻辑描述，并完全成为您整个代码库的一部分。</p></div><div class="ab cl kz la hu lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ij ik il im in"><h1 id="102a" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">为什么我应该使用AWS CDK？</h1><blockquote class="me"><p id="08b2" class="mf mg iq bd mh mi mj mk ml mm mn kv dk translated">无论你是个人开发者还是团队开发者，AWS CDK的好处都是巨大的。当自动化AWS基础设施时，你应该始终考虑<a class="ae mo" href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="noopener ugc nofollow" target="_blank">不要重复</a>(干)原则，这从使用AWS CDK开始。</p></blockquote><p id="bd40" class="pw-post-body-paragraph jx jy iq ka b kb mp kd ke kf mq kh ki kw mr kl km kx ms kp kq ky mt kt ku kv ij bi translated">如果AWS的好处CDK还没有欣然接受，请允许我列举几个:</p><ol class=""><li id="9000" class="mz na iq ka b kb kc kf kg kw nb kx nc ky nd kv ne nf ng nh bi translated">您可以按照对您和您的团队有意义的方式组织您的AWS基础设施代码。您想要一个包含所有AWS基础设施的堆栈吗？去吧。或者您可能希望为每个开发人员创建一个堆栈？没问题。也许你想强迫你的开发者确保所有的S3桶在默认情况下总是私有的。成交。</li><li id="e846" class="mz na iq ka b kb ni kf nj kw nk kx nl ky nm kv ne nf ng nh bi translated">您可以利用现有团队在流行编程语言(如Python或TypeScript)方面的技能来自动化AWS基础设施。当你使用自动气象站CDK时，你不再需要自动气象站云形成“专家”。</li><li id="8aa6" class="mz na iq ka b kb ni kf nj kw nk kx nl ky nm kv ne nf ng nh bi translated">类型安全、代码补全和开源拯救世界！出了事不用揪头发；查看源代码，信任框架，并在使用AWS CDK时消除常见错误。</li></ol><p id="8947" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">使用AWS CDK有很多好处，我无法一一列举。但值得一提的是，与纯粹的基于SAML或JSON的方法相比，有了AWS CDK，您现在有了更多的结构化编程语言控制。想一想，当代码编辑可以访问源代码时，他们现在可以做些什么。内置代码完成、文档和(对于类型化语言，如TypeScript)代码编译，以防止常见的用户错误。</p><p id="1fe2" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">从一个已经做了十年这类工作的人那里听听吧。它真的为我节省了前所未有的自动化基础设施的无数时间，并使我和我的团队在修改基础设施时非常敏捷。</p></div><div class="ab cl kz la hu lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ij ik il im in"><h1 id="4ba2" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">你好，世界——在CDK！</h1><blockquote class="ju jv jw"><p id="c456" class="jx jy jz ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面的例子是用TypeScript编写的，但是可以随意使用AWS CDK支持的任何其他编程语言。</p></blockquote><p id="1e52" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">在这个Hello World示例中，我们将创建一个全新的CDK项目，该项目将包含一个AWS Lambda函数，该函数只返回“Hello World！”执行时。</p><h2 id="c7be" class="nn lh iq bd li no np dn lm nq nr dp lq kw ns nt lu kx nu nv ly ky nw nx mc ny bi translated">开始之前</h2><ol class=""><li id="93e4" class="mz na iq ka b kb mu kf mv kw nz kx oa ky ob kv ne nf ng nh bi translated">确保您已经创建了一个<a class="ae mo" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"> AWS帐户</a>。</li><li id="e2b5" class="mz na iq ka b kb ni kf nj kw nk kx nl ky nm kv ne nf ng nh bi translated">确保您已经安装了<a class="ae mo" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html" rel="noopener ugc nofollow" target="_blank"> AWS CLI </a>并配置了SDK以使用AWS概要文件。要进行验证，请在终端中运行<code class="fe oc od oe of b">aws --version</code>。</li><li id="c88d" class="mz na iq ka b kb ni kf nj kw nk kx nl ky nm kv ne nf ng nh bi translated">确保您已经安装了<a class="ae mo" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>并且版本高于10.3.0。要进行验证，请在终端中运行<code class="fe oc od oe of b">node --version</code>。</li><li id="79b9" class="mz na iq ka b kb ni kf nj kw nk kx nl ky nm kv ne nf ng nh bi translated">确保您已经安装了AWS CDK CLI。为了验证，在终端中使用下面的<br/> <code class="fe oc od oe of b">npm install -g aws-cdk</code>命令。</li></ol><h2 id="1f83" class="nn lh iq bd li no np dn lm nq nr dp lq kw ns nt lu kx nu nv ly ky nw nx mc ny bi translated">创建一个空目录</h2><p id="45bf" class="pw-post-body-paragraph jx jy iq ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">让我们创建一个包含我们的CDK项目的空目录，并导航到它。</p><p id="546e" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">在终端中运行以下代码:<code class="fe oc od oe of b">mkdir HelloWorldCDK &amp;&amp; cd HelloWorldCDK</code></p><h2 id="2a20" class="nn lh iq bd li no np dn lm nq nr dp lq kw ns nt lu kx nu nv ly ky nw nx mc ny bi translated">创建初学者模板</h2><p id="a173" class="pw-post-body-paragraph jx jy iq ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">我们将使用CDK CLI为TypeScript生成一个启动模板。</p><p id="81b7" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">在终端中运行下面的代码:<code class="fe oc od oe of b">cdk init --language typescript</code></p><h2 id="9695" class="nn lh iq bd li no np dn lm nq nr dp lq kw ns nt lu kx nu nv ly ky nw nx mc ny bi translated">创建Lambda函数</h2><p id="07c3" class="pw-post-body-paragraph jx jy iq ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">我们将创建一个JavaScript Lambda函数，返回“Hello World！”在执行时的响应正文中。</p><p id="d7ab" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">在终端中运行以下代码:<code class="fe oc od oe of b">mkdir -p functions/helloworld &amp;&amp; touch functions/helloworld/index.js</code></p><p id="0a8e" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">使用您最喜欢的代码编辑器(注意:我更喜欢使用<a class="ae mo" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank">而不是代码</a>，将以下代码粘贴到<code class="fe oc od oe of b">functions/helloworld/index.js</code>:</p><pre class="og oh oi oj gt ok of ol om aw on bi"><span id="ad95" class="nn lh iq of b gy oo op l oq or">exports.handler = (event, context, callback) =&gt; {<br/> callback(null, "Hello World!");<br/>};</span></pre><h2 id="b91d" class="nn lh iq bd li no np dn lm nq nr dp lq kw ns nt lu kx nu nv ly ky nw nx mc ny bi translated">安装@aws-cdk/aws-lambda模块</h2><p id="55c7" class="pw-post-body-paragraph jx jy iq ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">除了默认模块之外，基本项目不包括任何模块。因为我们需要使用AWS Lambda，所以我们需要引入@aws-cdk/aws-lambda模块。查看<a class="ae mo" href="https://docs.aws.amazon.com/cdk/api/latest/docs/aws-construct-library.html" rel="noopener ugc nofollow" target="_blank"> API参考</a>页面，了解为AWS CDK提供的所有模块的详细列表。</p><p id="7755" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">在终端中运行以下代码:<code class="fe oc od oe of b">npm install @aws-cdk/aws-lambda</code></p><h2 id="dc74" class="nn lh iq bd li no np dn lm nq nr dp lq kw ns nt lu kx nu nv ly ky nw nx mc ny bi translated">部署Lambda函数</h2><p id="f983" class="pw-post-body-paragraph jx jy iq ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">我们在本地创建了Lambda函数并安装了Lambda模块，但现在我们需要使用AWS CDK来部署它。为此，我们将使用Lambda模块创建一个Lambda函数的实例，该实例引用我们创建的本地代码，然后我们将运行CDK部署，将其实际部署到我们的AWS帐户。</p><p id="1e1f" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">使用您最喜欢的代码编辑器，用下面的代码替换<code class="fe oc od oe of b">lib/hello_world_cdk_lambda_stack.ts</code>:</p><pre class="og oh oi oj gt ok of ol om aw on bi"><span id="ad35" class="nn lh iq of b gy oo op l oq or">import * as cdk from "<a class="ae mo" href="http://twitter.com/aws" rel="noopener ugc nofollow" target="_blank">@aws</a>-cdk/core";<br/>import * as lambda from "<a class="ae mo" href="http://twitter.com/aws" rel="noopener ugc nofollow" target="_blank">@aws</a>-cdk/aws-lambda";</span><span id="043a" class="nn lh iq of b gy os op l oq or">export class HelloWorldCdkLambdaStack extends cdk.Stack {<br/>  constructor(scope: cdk.Construct, id: string, props?: cdk.StackProps) {<br/>    super(scope, id, props);</span><span id="73a1" class="nn lh iq of b gy os op l oq or">// The code that defines your stack goes here<br/>    const helloWorldFunction = new lambda.Function(this, "HelloWorldFunction", {<br/>      code: lambda.Code.fromAsset("functions/helloworld"),<br/>      handler: "index.handler",<br/>      runtime: lambda.Runtime.NODEJS_12_X,<br/>      description:<br/>        "This Lambda Function returns the message: 'Hello World!' in the response body",<br/>    });<br/>  }<br/>}</span></pre><p id="ecce" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">在终端中运行下面的代码:<code class="fe oc od oe of b">cdk deploy --profile {AWS_PROFILE}</code>，但是要确保用您的AWS概要文件替换<code class="fe oc od oe of b">{AWS_PROFILE}</code>。</p><p id="00c1" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">您应该会看到如下所示的内容:</p><figure class="og oh oi oj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ou ov di ow bf ox"><div class="gh gi ot"><img src="../Images/2b6e1296610e2ee6e02f19dd77fd0f82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*83-3Dt7Iv685mudowPSepQ.png"/></div></div><figcaption class="oy oz gj gh gi pa pb bd b be z dk translated">IAM策略更新</figcaption></figure><p id="df99" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">在键盘上点击<code class="fe oc od oe of b">y</code>并按下回车键。然后，您应该会看到如下所示的内容:</p><figure class="og oh oi oj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ou ov di ow bf ox"><div class="gh gi pc"><img src="../Images/f3f22e0a7208f7185a53619357a8a549.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pwTC2JzU1AAmtRuP3coOag.png"/></div></div><figcaption class="oy oz gj gh gi pa pb bd b be z dk translated">部署进度和状态更新</figcaption></figure><h2 id="0e0c" class="nn lh iq bd li no np dn lm nq nr dp lq kw ns nt lu kx nu nv ly ky nw nx mc ny bi translated">幕后发生了什么？</h2><p id="4a15" class="pw-post-body-paragraph jx jy iq ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">当您运行<code class="fe oc od oe of b">cdk deploy</code>时，我们放在<code class="fe oc od oe of b">lib/hello_world_cdk_lambda_stack.ts</code>中的代码被CDK框架解析，然后生成位于<code class="fe oc od oe of b">cdk.out</code>文件夹中的CloudFormation模板，最后将其部署到CloudFormation。</p><p id="eaad" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">我们的代码非常简单，我们所做的只是实现了一个简单的Hello World Lambda函数处理程序，并且创建了一个Lambda的实例。引用Lambda函数处理程序的函数类。当我们运行<code class="fe oc od oe of b">cdk deploy</code>时，我们注意到AWS CDK实际上部署的不仅仅是Lambda函数。它还生成一个具有基本Lambda执行权限的IAM角色，并允许AWS Lambda假定它正确执行。</p><h2 id="594d" class="nn lh iq bd li no np dn lm nq nr dp lq kw ns nt lu kx nu nv ly ky nw nx mc ny bi translated">AWS CDK何时会自动生成额外的AWS资源？</h2><p id="a278" class="pw-post-body-paragraph jx jy iq ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">如果你正在实例化的类名以<code class="fe oc od oe of b">Cfn</code>开头，那么它被认为是一个低级构造，否则它被认为是一个高级构造。低级构造通常是到原始云信息资源的一对一映射，这意味着它们通常只旋转一个AWS资源，而高级构造是由AWS CDK团队、开源社区或您自己定制的类，它们执行附加逻辑，例如将多个低级构造组合在一起以简化特定任务。</p><p id="9685" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">在上面的例子中，我们使用了名为<code class="fe oc od oe of b">lambda.Function</code>的高级结构，如果你查看这个类的源代码，你会发现它负责为你管理一些依赖项，比如创建一个基本的执行角色IAM策略并将其附加到函数上。</p><p id="7b67" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">有趣的是，我们不需要自己编写任何代码，但CDK会在CloudFormation模板中自动生成这些资源，因为我们在代码中使用了高级的<code class="fe oc od oe of b">lambda.Function</code>构造。</p><h2 id="e555" class="nn lh iq bd li no np dn lm nq nr dp lq kw ns nt lu kx nu nv ly ky nw nx mc ny bi translated">运行Lambda函数</h2><p id="7b4d" class="pw-post-body-paragraph jx jy iq ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">在AWS控制台中，导航到AWS Lambda，您应该会看到Lambda函数实际上已经创建好了。</p><p id="8421" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">点击Lambda函数并测试它(你可以提供任何你喜欢的请求体)。</p><p id="ee73" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">你应该看到“你好，世界！”在类似如下的响应中返回:</p><figure class="og oh oi oj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ou ov di ow bf ox"><div class="gh gi pd"><img src="../Images/436c04376a8ab91ae2bb0a428a0274a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2jNEKwB8UGM1Mm86kiOYXA.png"/></div></div><figcaption class="oy oz gj gh gi pa pb bd b be z dk translated">Lambda成功响应</figcaption></figure><h2 id="aa2a" class="nn lh iq bd li no np dn lm nq nr dp lq kw ns nt lu kx nu nv ly ky nw nx mc ny bi translated"><strong class="ak">清理</strong></h2><p id="d05e" class="pw-post-body-paragraph jx jy iq ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">要删除我们创建的所有内容，您可以在AWS控制台上手动删除CloudFormation堆栈(但这并不有趣),或者使用CDK CLI来完成！让我们使用CDK命令行界面来删除它们。</p><p id="7258" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">在终端中运行下面的代码:<code class="fe oc od oe of b">cdk destroy --profile {AWS_PROFILE}</code>，但是确保用您的AWS概要文件替换<code class="fe oc od oe of b">{AWS_PROFILE}</code>。</p></div><div class="ab cl kz la hu lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ij ik il im in"><h1 id="c417" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">结论</h1><p id="c391" class="pw-post-body-paragraph jx jy iq ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">AWS CDK使得以我们喜欢的任何方式自动化AWS资源变得非常容易。事实上，通过为我们生成必要的依赖关系，高级结构的使用简化了我们必须做的工作。</p><p id="a734" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">在上面的例子中，我们展示了通过AWS CDK部署本地定义的AWS Lambda函数是多么快速和容易，而无需手动创建CloudFormation模板。</p><p id="81d5" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">我希望这篇文章对你强调使用AWS CDK的一些好处是有用的。如果你有任何问题或想看到更多这样的例子，请联系我，让我知道！</p><p id="f2a8" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">感谢您的阅读！</p></div><div class="ab cl kz la hu lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ij ik il im in"><h1 id="3f87" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">你可能喜欢的其他文章</h1><div class="pe pf gp gr pg ph"><a rel="noopener  ugc nofollow" target="_blank" href="/amazon-sumerian-hosts-how-to-reduce-your-amazon-polly-cost-eb13db90a47d"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd ir gy z fp pm fr fs pn fu fw ip bi translated">亚马逊苏美尔主机:如何降低你的亚马逊波利成本</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">本文的目标读者是已经熟悉亚马逊苏美尔主机并且正在寻找…</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pq l"><div class="pr l ps pt pu pq pv js ph"/></div></div></a></div><div class="pe pf gp gr pg ph"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-publish-your-unity3d-html5-application-or-game-to-aws-3bb053b59d21"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd ir gy z fp pm fr fs pn fu fw ip bi translated">如何将您的Unity3D HTML5应用程序或游戏发布到AWS</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">本文的目标读者是已经熟悉Unity3D WebGL并且正在寻找一个…</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pq l"><div class="pw l ps pt pu pq pv js ph"/></div></div></a></div></div></div>    
</body>
</html>