<html>
<head>
<title>How to add object fields conditionally in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中有条件地添加对象字段</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-add-object-fields-conditionally-in-javascript-c15374ab2190?source=collection_archive---------17-----------------------#2020-07-09">https://levelup.gitconnected.com/how-to-add-object-fields-conditionally-in-javascript-c15374ab2190?source=collection_archive---------17-----------------------#2020-07-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="4733" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我经常遇到需要用JavaScript构造一个对象的情况，我想有条件地为这个对象设置字段。这可能是一个选项对象，我把它作为参数传递给其他函数或API。我只有一些可用的字段值，只有这些值应该是参数对象的一部分。</p><p id="4e35" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了描述这种情况，让我们看一个使用<em class="kl"> if </em>语句的简单语法的例子。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/b76aed563fd24ebd34baa92be42e6d8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fjEFcnyFzHqNQeAYFni2dw.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">使用if语句改变对象</figcaption></figure><p id="2a7c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我有条件地改变对象，为可用的值设置字段。<a class="ae lc" href="https://anssipiirainen.com/post/fp-tricks-for-simple-code/" rel="noopener ugc nofollow" target="_blank">我不喜欢这种突变</a>，因为它们让代码难以理解。</p><p id="5daa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里是另一个尝试:</p><pre class="kn ko kp kq gt ld le lf lg aw lh bi"><span id="76d3" class="li lj iq le b gy lk ll l lm ln"><strong class="le ir">const</strong> options <strong class="le ir">=</strong> {<br/>    key1<strong class="le ir">:</strong> value1 <strong class="le ir">||</strong> <strong class="le ir">undefined</strong>;<br/>    key2<strong class="le ir">:</strong> value2 <strong class="le ir">||</strong> <strong class="le ir">undefined</strong>;<br/>};</span></pre><p id="eb58" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个“解决方案”用具有<code class="fe lo lp lq le b">undefined</code>值的字段污染了对象。这些字段将出现在对象中，即使它们的值是<code class="fe lo lp lq le b">undefined</code>。对于这种类型的对象，您无法确定当您将它传递给正在构建该对象的外部库时会发生什么:它可能表现良好，或者您可能会遇到错误，或者最糟糕的是，它可能会以某种不可预知的方式工作。</p><h1 id="3824" class="lr lj iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">方式</h1><p id="cffd" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">下面是我所知道的解决这些问题的最干净的语法:</p><pre class="kn ko kp kq gt ld le lf lg aw lh bi"><span id="2366" class="li lj iq le b gy lk ll l lm ln"><strong class="le ir">const</strong> options <strong class="le ir">=</strong> {<br/>    …(value1 <strong class="le ir">&amp;&amp;</strong> { key1<strong class="le ir">:</strong> value1 }),<br/>    …(value2 <strong class="le ir">&amp;&amp;</strong> { key2<strong class="le ir">:</strong> value2 })<br/>    };</span></pre><p id="60c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我非常喜欢这一点:看起来很干净，没有向对象添加不必要的字段，并且没有使用难看的if语句。</p><p id="3cd4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有了ES6速记属性语法，它看起来更加简洁:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mt"><img src="../Images/34670a2c279bafa1b228900bebceb396.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fF-48RZdKlm5o4cvFit3Zg.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">使用ES6对象扩展运算符和布尔&amp;快捷方式求值来构造对象</figcaption></figure><p id="06c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在查看我的前合作开发人员制作的一些代码时发现了这个技巧，并且自从我发现它以来已经使用了两次。希望你也觉得有用。</p></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><p id="ba96" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">原载于2020年7月9日</em><a class="ae lc" href="https://anssipiirainen.com/" rel="noopener ugc nofollow" target="_blank"><em class="kl">https://anssipiirainen.com</em></a><em class="kl">。</em></p></div></div>    
</body>
</html>