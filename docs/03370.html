<html>
<head>
<title>Implement AdMob in Ionic React Capacitor Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在离子反应电容应用中实现AdMob</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/implement-admob-in-ionic-react-capacitor-apps-89cc3dc739dc?source=collection_archive---------35-----------------------#2020-05-04">https://levelup.gitconnected.com/implement-admob-in-ionic-react-capacitor-apps-89cc3dc739dc?source=collection_archive---------35-----------------------#2020-05-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/e6a412bd9d03b6fe495785518ad00404.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VCfW2wmf9qTlhCXNRTreWA.png"/></div></div></figure><blockquote class="kb kc kd"><p id="bc7a" class="ke kf kg kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这篇文章是应我们一位读者的特别要求而写的。如果你有更多的要求，请在评论中告诉我。</p></blockquote><p id="64d4" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">在这篇文章中，你将学习如何在Ionic React Capacitor应用中实现<strong class="kh iu"> AdMob功能，</strong>即谷歌广告。我们将在一个简单的Ionic应用程序中实现这一点，并在iOS模拟器和Android设备上进行测试。</p><h1 id="a0f9" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">什么是Admob？</h1><p id="e799" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">众所周知，广告是谷歌、脸书、推特等科技巨头的主要收入来源。谷歌广告是最受欢迎的广告之一，谷歌广告的移动版本被称为AdMob。</p><figure class="mk ml mm mn gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mj"><img src="../Images/57cc0eff7115d67d6738a6d2a1ecf4fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aD95WfvKex9OdEP0B6GWqg.jpeg"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">Google AdMob广告的一个例子。广告提示用户安装某个应用程序</figcaption></figure><h2 id="6b38" class="ms lh it bd li mt mu dn lm mv mw dp lq ld mx my lu le mz na ly lf nb nc mc nd bi translated">AdMob广告类型</h2><p id="97fe" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated"><strong class="kh iu">横幅</strong>:出现在设备屏幕顶部&amp;底部的基本广告格式。</p><p id="a0fe" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated"><strong class="kh iu">插页</strong>:整版广告出现在自然间断&amp;过渡处，比如关卡完成。支持视频内容。</p><p id="e668" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated"><strong class="kh iu">奖励</strong>:整页广告奖励用户观看短视频并与可播放的广告和调查互动。有利于免费游戏用户的货币化。支持视频内容。</p><p id="35ce" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated"><strong class="kh iu">原生</strong>:可定制的广告格式，与你的应用的外观&amp;相匹配。广告与应用程序内容一起出现。支持视频内容。目前，原生广告只能在原生应用中出现，而不能在基于Ionic或React Native的混合应用中出现。</p><p id="f894" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">让我们看看这篇文章的基本框架。<strong class="kh iu">如果你熟悉离子和电容，跳过这些部分，进入文章的代码部分。</strong></p><h1 id="b6ca" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">放弃</h1><p id="282b" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">因为这篇文章是三个框架的混合体，所以你可能是误上了这里。如果您正在寻找AdMob登录</p><ul class=""><li id="16a5" class="ne nf it kh b ki kj km kn ld ng le nh lf ni lc nj nk nl nm bi translated">反应自然——请查看<a class="ae nn" href="https://enappd.com/blog/implement-admob-in-react-native-with-firebase/133" rel="noopener ugc nofollow" target="_blank">这篇文章</a></li><li id="c8f3" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nj nk nl nm bi translated">离子反应(电容)应用——继续阅读😎</li></ul><p id="74f0" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">正如你从上面看到的，现在混合应用程序开发有不止一种选择，很容易混淆。这篇文章关注的是<strong class="kh iu"> Ionic框架</strong>，其中<strong class="kh iu"> React </strong>作为前端框架，<a class="ae nn" href="https://capacitor.ionicframework.com/docs/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh iu"> Capacitor </strong> </a>作为运行时和构建环境。</p><blockquote class="kb kc kd"><p id="51e3" class="ke kf kg kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu"> <em class="it">本教程的代码可在Github repo</em></strong><a class="ae nn" href="https://github.com/enappd/ionic-react-admob" rel="noopener ugc nofollow" target="_blank"><strong class="kh iu"><em class="it">ionic-react-capacitor-admob</em></strong></a>上获得</p></blockquote><p id="ce6b" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">让我们来看看对每个包含的框架的简要介绍:</p><ol class=""><li id="dc9d" class="ne nf it kh b ki kj km kn ld ng le nh lf ni lc nt nk nl nm bi translated">离子的</li><li id="e0cc" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nt nk nl nm bi translated">电容器</li></ol><h1 id="a0c2" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">什么是爱奥尼亚？</h1><p id="fc2e" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">你可能已经知道离子，但我把它放在这里只是为了初学者。<strong class="kh iu"> Ionic </strong>是一款混合移动应用开发SDK。它提供了使用CSS、HTML5和Sass等Web技术开发混合移动应用程序的工具和服务。换句话说——如果你用Android创建原生应用，你就用Java编码。如果你在iOS中创建原生应用，你用Obj-C或Swift编码。这两种语言都是强大但复杂的语言。使用Cordova(和Ionic ),你可以为你的应用编写一段代码，它可以在iOS和Android上运行。)，HTML、CSS和JS的简单性也是如此。</p><p id="36e5" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">必须注意科尔多瓦/电容在其中的作用。Ionic只是一个由HTML、CSS和JS组成的UI包装器。因此，默认情况下，Ionic不能在iOS或Android设备中作为应用程序运行。Cordova/Capacitor是一个构建环境，它封装了这个Ionic web应用程序，并将其转换为一个可安装在设备上的应用程序，同时为这个应用程序提供对Camera等本地API的访问。</p><h1 id="60f5" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">电容器——它与科尔多瓦有何不同？</h1><p id="062b" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">本节仅适用于已经使用Ionic / Cordova一段时间的人员。很长一段时间以来，科尔多瓦一直是Ionic应用开发者的唯一选择。Cordova帮助将Ionic web应用程序构建成一个设备可安装的应用程序。</p><blockquote class="kb kc kd"><p id="b35c" class="ke kf kg kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu"> <em class="it">电容器与Cordova非常相似，但与app工作流程</em> </strong>有一些关键区别</p></blockquote><p id="385b" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">以下是Cordova和Capacitor之间的区别(只有在您之前使用过Cordova的情况下，您才能体会到这些区别，否则您可以跳过)</p><ol class=""><li id="4eb9" class="ne nf it kh b ki kj km kn ld ng le nh lf ni lc nt nk nl nm bi translated">Capacitor将每个平台项目视为一个<em class="kg">源资产</em>，而不是一个<em class="kg">构建时间资产</em>。这意味着，Capacitor希望您将平台源代码保存在存储库中，不像Cordova总是假设您将在构建时生成平台代码</li><li id="94db" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nt nk nl nm bi translated">由于上述原因，Capacitor不使用<code class="fe nu nv nw nx b">config.xml</code>或类似的定制配置进行平台设置。相反，通过编辑Android的<code class="fe nu nv nw nx b">AndroidManifest.xml</code>和Xcode的<code class="fe nu nv nw nx b">Info.plist</code>来改变配置</li><li id="6184" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nt nk nl nm bi translated">电容器不能“在设备上运行”或通过命令行仿真。相反，这些操作是通过特定于平台的IDE进行的。所以你不能使用像<code class="fe nu nv nw nx b">ionic run ios</code>这样的命令运行离子电容应用。你必须使用Xcode运行iOS应用程序，使用Android studio运行Android应用程序</li><li id="a77c" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nt nk nl nm bi translated">由于平台代码不是<em class="kg">源资产，</em>您可以使用Xcode或Android Studio直接更改本机代码。这给了开发者更多灵活性</li></ol><p id="51f6" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">本质上，电容器就像一个新鲜的，更灵活的科尔多瓦版本。</p><h1 id="4530" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">插件</h1><p id="7f2c" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">Cordova和<a class="ae nn" href="https://ionicframework.com/docs/native" rel="noopener ugc nofollow" target="_blank"> Ionic Native </a>插件可以在电容环境下使用。然而，有一些已知的Cordova插件<a class="ae nn" href="https://capacitor.ionicframework.com/docs/cordova/known-incompatible-plugins/" rel="noopener ugc nofollow" target="_blank">与电容器不兼容。</a>对于Admob功能，我们将使用<a class="ae nn" href="https://github.com/rahadur/capacitor-admob" rel="noopener ugc nofollow" target="_blank">电容Admob插件</a></p><h1 id="a3b0" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">职位结构</h1><p id="3480" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">我们将逐步探索AdMob特性的实现。这是我的博客分解</p><p id="1a45" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated"><strong class="kh iu">步骤</strong></p><ol class=""><li id="6b47" class="ne nf it kh b ki kj km kn ld ng le nh lf ni lc nt nk nl nm bi translated">用React创建一个基本的离子电容器应用程序</li><li id="c394" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nt nk nl nm bi translated">用Capacitor在Android中构建应用</li><li id="d628" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nt nk nl nm bi translated">设置您的AdMob帐户</li><li id="e24a" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nt nk nl nm bi translated">安装AdMob插件</li><li id="ab56" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nt nk nl nm bi translated">在你的应用中实现不同类型的广告</li><li id="0cca" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nt nk nl nm bi translated">在iOS模拟器上构建应用程序并进行测试</li><li id="364f" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nt nk nl nm bi translated">在Android设备上构建应用程序并进行测试</li></ol><p id="08cb" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">所以让我们开始吧！</p><figure class="mk ml mm mn gt ju gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/2b5df1c5ab3b92f538af6276da75e877.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/1*ERffcqfeSC19qC5l50L94w.gif"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">我让你笑了…不是吗？😆</figcaption></figure><h1 id="5996" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">步骤1 —使用React创建一个基本的离子电容器应用程序</h1><p id="5f83" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">从Ionic starters本身创建一个基本的应用程序。</p><pre class="mk ml mm mn gt nz nx oa ob aw oc bi"><span id="b6c0" class="ms lh it nx b gy od oe l of og">$ ionic start ionic-react-admob tabs --type=react</span></pre><p id="4f66" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">这将在React中创建一个基本的Ionic应用程序。我选择了<code class="fe nu nv nw nx b">tabs</code> starter，这样我就可以针对不同的广告类型使用不同的标签。</p><p id="7bb3" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">我们将创建一个简单的用户界面，只有几个按钮会触发广告。对于插播广告，这些触发因素通常是游戏应用程序中某个关卡的完成等。横幅广告通常是在页面加载时触发的。显示奖励广告，用户可以通过观看广告获得奖励。</p><p id="c5ae" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">我的广告页面的基本用户界面如下所示</p><figure class="mk ml mm mn gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oh"><img src="../Images/b03bbb5e21bfbb0c328eb969ba8b9f9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eiMj9wkMmso_r_pfT8QEMw.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">离子反应电容应用中AdMob实施的基本用户界面——iOS</figcaption></figure><h1 id="b55b" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">第二步——用Capacitor在Android中构建应用程序</h1><p id="8418" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">为了构建设备/仿真器的应用程序，我们需要将电容器连接到应用程序。奔跑</p><pre class="mk ml mm mn gt nz nx oa ob aw oc bi"><span id="b09d" class="ms lh it nx b gy od oe l of og">$ ionic integrations enable capacitor</span></pre><blockquote class="kb kc kd"><p id="2734" class="ke kf kg kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu"> <em class="it">写这篇文章的时候，我有node 12.14.0，我选择了电容1.x，虽然电容2.0也发布了。原因是为了避免更新Xcode来读取Capacitor 2.0制作的app。虽然我已经用Android测试了电容器2.0的功能，而且它工作正常</em> </strong></p></blockquote><p id="3da7" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">默认情况下，如果您运行上述命令，它将安装电容器2.0。使用Capacitor 2.0构建的应用程序需要最新的Android Studio和最新的Xcode。如果你有这些，完美！但如果你没有，坚持电容器1.x的教程，你可以稍后更新。我在这篇文章中使用了<code class="fe nu nv nw nx b">“@capacitor/core”: “1.2.0”,</code>和<code class="fe nu nv nw nx b">“@capacitor/cli”: “1.2.0”</code>。</p><p id="7015" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">添加平台并在设备中构建应用程序作为测试</p><pre class="mk ml mm mn gt nz nx oa ob aw oc bi"><span id="5318" class="ms lh it nx b gy od oe l of og">// Add android platform<br/>$ <strong class="nx iu">npx cap add android<br/></strong>// Add iOS platform<br/>$ <strong class="nx iu">npx cap add ios<br/></strong>// Build web assets to copy to platforms<br/>$ <strong class="nx iu">ionic build<br/></strong>// copy the build assets to platforms<br/>$ <strong class="nx iu">npx cap copy<br/></strong>// open android studio to build app<br/>$ <strong class="nx iu">npx cap open android<br/></strong>// open xcode to build app<br/>$ <strong class="nx iu">npx cap open ios</strong></span></pre><p id="019d" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">此时，您可以使用Xcode / Android Studio在iOS / Android设备或模拟器中运行该应用程序。您将看到UI在设备中运行良好。</p><h1 id="5dbf" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">步骤3 —设置您的Admob帐户</h1><p id="acc9" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">这一步对于任何app都是通用的。由于Admob是一项独立于应用平台的谷歌服务，你可以拥有一个账户，并在每种类型的应用中使用它。我在每篇AdMob示例文章中都使用相同的AdMob应用程序。</p><p id="17be" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">按照以下步骤创建您的Admob帐户和Admob应用程序</p><ul class=""><li id="2f65" class="ne nf it kh b ki kj km kn ld ng le nh lf ni lc nj nk nl nm bi translated">注册然后在<a class="ae nn" href="https://apps.admob.com/?utm_source=internal&amp;utm_medium=et&amp;utm_campaign=helpcentrecontextualopt&amp;utm_term=http://goo.gl/6Xkfcf&amp;subid=ww-ww-et-amhelpv4" rel="noopener ugc nofollow" target="_blank">https://apps.admob.com</a>登录您的AdMob账户。</li><li id="3f16" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nj nk nl nm bi translated">点击侧边栏中的<strong class="kh iu">应用</strong>。</li><li id="63c6" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nj nk nl nm bi translated">点击<strong class="kh iu">添加应用</strong>添加新应用，或点击<strong class="kh iu">查看所有应用</strong>搜索您添加到AdMob的所有应用列表。</li><li id="f52c" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nj nk nl nm bi translated">在<strong class="kh iu">应用设置</strong>选项中，您可以看到您的<strong class="kh iu">应用ID </strong>。这是您将应用程序连接到应用程序中的Google AdMob所需的ID。</li></ul><figure class="mk ml mm mn gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oi"><img src="../Images/85e8f18622c9976901d1d3cfc70ce534.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JoDnyDkki68npDr77EitSw.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">在Google AdMob的应用程序设置中记下你的应用程序ID</figcaption></figure><ul class=""><li id="4bc8" class="ne nf it kh b ki kj km kn ld ng le nh lf ni lc nj nk nl nm bi translated">在<strong class="kh iu">广告单元</strong>部分，您可以添加多种类型的广告单元。有关添加广告单元的更多详细信息，请查看以下详细的分步说明</li></ul><p id="2c44" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">— <a class="ae nn" href="https://support.google.com/admob/answer/7311346?hl=en" rel="noopener ugc nofollow" target="_blank">横幅广告</a></p><p id="a79f" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated"><a class="ae nn" href="https://support.google.com/admob/answer/7311435?hl=en&amp;ref_topic=7382891" rel="noopener ugc nofollow" target="_blank"> —插播广告</a></p><p id="aded" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">— <a class="ae nn" href="https://support.google.com/admob/answer/7311747?hl=en&amp;ref_topic=7382891" rel="noopener ugc nofollow" target="_blank">悬赏广告</a></p><p id="2327" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">AdMob有很多其他的设置，比如你的广告应该如何、何时以及在哪里出现，但这些都是以后的事了。在本帖中，我们将讨论限于<strong class="kh iu">“如何在离子反应电容应用中显示基本ad单元”</strong></p><h1 id="7b1a" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">步骤4 —安装AdMob插件</h1><p id="e185" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">对于这篇文章，正如我之前解释的，我们使用的是<a class="ae nn" href="https://github.com/rahadur/capacitor-admob" rel="noopener ugc nofollow" target="_blank">电容Admob插件</a>。此外，由于在构建应用程序时，capacitor不会注入必要的特定于平台的变量，所以我们在构建应用程序时必须做一些小的改动</p><h2 id="7a8e" class="ms lh it bd li mt mu dn lm mv mw dp lq ld mx my lu le mz na ly lf nb nc mc nd bi translated">4.1安装电容器AdMob插件</h2><p id="2697" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">在您现有的应用程序中，使用</p><pre class="mk ml mm mn gt nz nx oa ob aw oc bi"><span id="a657" class="ms lh it nx b gy od oe l of og"><strong class="nx iu">$ npm install --save capacitor-admob</strong></span></pre><h2 id="fe49" class="ms lh it bd li mt mu dn lm mv mw dp lq ld mx my lu le mz na ly lf nb nc mc nd bi translated">4.2在Android中构建</h2><p id="3f34" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">因为我们只添加了一个插件，所以只需使用</p><pre class="mk ml mm mn gt nz nx oa ob aw oc bi"><span id="f301" class="ms lh it nx b gy od oe l of og">// copy the build assets to platforms<br/>$ <strong class="nx iu">npx cap sync</strong></span></pre><p id="06eb" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">在Android Studio中，打开您的<code class="fe nu nv nw nx b">AndroidManifest.xml</code>文件，添加此<code class="fe nu nv nw nx b">meta-data</code>行，并用您的应用程序的实际<strong class="kh iu">应用程序ID </strong>替换该值</p><pre class="mk ml mm mn gt nz nx oa ob aw oc bi"><span id="8427" class="ms lh it nx b gy od oe l of og">&lt;application&gt;<br/>  &lt;!-- this line needs to be added (replace the value!) --&gt;<br/>  <strong class="nx iu">&lt;meta-data android:name="com.google.android.gms.ads.APPLICATION_ID" android:value="ca-app-pub-3940256099942544~3347511713" /&gt;</strong><br/>  &lt;activity&gt;.....&lt;/activity&gt;<br/>&lt;/application&gt;</span></pre><p id="babd" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">在Android Studio中打开你的Ionic Capacitor应用程序，现在打开你的应用程序的<code class="fe nu nv nw nx b">MainActivity.java</code>并注册AdMob Capacitor插件。</p><pre class="mk ml mm mn gt nz nx oa ob aw oc bi"><span id="1242" class="ms lh it nx b gy od oe l of og">// Other imports...<br/><strong class="nx iu">import app.xplatform.capacitor.plugins.AdMob;<br/></strong>public class MainActivity extends BridgeActivity {<br/>  @Override<br/>  public void onCreate(Bundle savedInstanceState) {<br/>    super.onCreate(savedInstanceState);<br/>this.init(savedInstanceState, new ArrayList&lt;Class&lt;? extends Plugin&gt;&gt;() {{<br/>      <strong class="nx iu">add(AdMob.class);</strong>  // Add AdMob as a Capacitor Plugin<br/>    }});<br/>  }<br/>}</span></pre><p id="f802" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">在设备上构建一次应用程序。如果没有错误，您的Android应用程序就可以显示广告了</p><h2 id="677f" class="ms lh it bd li mt mu dn lm mv mw dp lq ld mx my lu le mz na ly lf nb nc mc nd bi translated">4.3内置于iOS</h2><p id="65b1" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">同样，只需使用</p><pre class="mk ml mm mn gt nz nx oa ob aw oc bi"><span id="db6d" class="ms lh it nx b gy od oe l of og">// copy the build assets to platforms<br/>$ <strong class="nx iu">npx cap sync</strong></span></pre><p id="52a6" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">打开您的<code class="fe nu nv nw nx b">App/App/Info.plist</code>文件，添加此<code class="fe nu nv nw nx b">plist value</code>行，并用您的应用程序的实际应用程序ID替换该值</p><pre class="mk ml mm mn gt nz nx oa ob aw oc bi"><span id="2c34" class="ms lh it nx b gy od oe l of og"><strong class="nx iu">&lt;key&gt;GADIsAdManagerApp&lt;/key&gt;<br/>&lt;true/&gt;<br/>&lt;key&gt;GADApplicationIdentifier&lt;/key&gt;<br/></strong>&lt;!-- replace this value with your App ID key--&gt;<br/><strong class="nx iu">&lt;string&gt;ca-app-pub-6564742920318187~7217030993&lt;/string&gt;</strong></span></pre><p id="ca90" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">在设备/模拟器上构建一次应用程序。如果没有错误，您的iOS应用程序就可以显示广告了。</p><h1 id="de7b" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">第5步——在应用程序中实现不同类型的广告</h1><p id="5f19" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">一旦一切都设置好了，让我们在应用程序中实现不同类型的广告。对于所有类型的广告，你需要导入插件并初始化。</p><pre class="mk ml mm mn gt nz nx oa ob aw oc bi"><span id="bf27" class="ms lh it nx b gy od oe l of og">import { AdOptions, AdSize, AdPosition } from 'capacitor-admob';<br/>const { AdMob, Toast } = Plugins;</span></pre><p id="426b" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">在构造函数中，使用初始化AdMob</p><pre class="mk ml mm mn gt nz nx oa ob aw oc bi"><span id="9053" class="ms lh it nx b gy od oe l of og">// replace with your own App ID<br/>AdMob.initialize('ca-app-pub-3940256099942544~3347511713');</span></pre><h2 id="02d0" class="ms lh it bd li mt mu dn lm mv mw dp lq ld mx my lu le mz na ly lf nb nc mc nd bi translated">横幅广告</h2><p id="2870" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">横幅广告在表1中实施。你还需要一个来自你的AdMob账户的横幅广告的<code class="fe nu nv nw nx b">Ad Unit ID</code>。</p><p id="5875" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">一旦在<code class="fe nu nv nw nx b">Tab1.tsx</code>文件中有了UI，我们将实现四个方法</p><ul class=""><li id="0d2b" class="ne nf it kh b ki kj km kn ld ng le nh lf ni lc nj nk nl nm bi translated">showBanner</li><li id="1e1e" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nj nk nl nm bi translated">波塞班纳</li><li id="3065" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nj nk nl nm bi translated">结果栏</li><li id="d77d" class="ne nf it kh b ki no km np ld nq le nr lf ns lc nj nk nl nm bi translated">移除横幅</li></ul><p id="5342" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">方法的名称是不言自明的。完整页面的代码如下所示</p><figure class="mk ml mm mn gt ju"><div class="bz fp l di"><div class="oj ok l"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">离子反应电容应用中的横幅广告实施</figcaption></figure><blockquote class="kb kc kd"><p id="0368" class="ke kf kg kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">你也可以从谷歌获得测试广告id进行测试。不要在您的生产应用程序中使用测试ID，也不要在开发应用程序时使用您的生产广告单元ID</p></blockquote><h2 id="ab11" class="ms lh it bd li mt mu dn lm mv mw dp lq ld mx my lu le mz na ly lf nb nc mc nd bi translated">间隙广告</h2><p id="67f8" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">插播广告是一个触发器。因为这些是全页广告，所以它们并不总是作为横幅广告出现。</p><p id="a374" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">要实现插播广告，导入插件，初始化并遵循下面的代码</p><figure class="mk ml mm mn gt ju"><div class="bz fp l di"><div class="oj ok l"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">离子反应电容app中的间隙ad实现</figcaption></figure><p id="5504" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">插播广告需要<code class="fe nu nv nw nx b">load</code>才能显示。在你的制作应用程序中，将这些广告加载到页面加载本身是一个很好的做法，然后在需要时显示。</p><h2 id="33b7" class="ms lh it bd li mt mu dn lm mv mw dp lq ld mx my lu le mz na ly lf nb nc mc nd bi translated">奖励广告</h2><p id="146c" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">还是那句话，悬赏广告在触发机制上类似于插播广告。要实现，请导入所需的依赖项并遵循下面的代码</p><figure class="mk ml mm mn gt ju"><div class="bz fp l di"><div class="oj ok l"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">奖励广告在离子反应电容应用中的实现</figcaption></figure><p id="e470" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">同样，<code class="fe nu nv nw nx b">TestIds.REWARDED</code>是一个测试ID。发布应用程序时，将其替换为生产广告ID。</p><p id="9255" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated"><code class="fe nu nv nw nx b">.prepareRewardVideoAd()</code>方法加载广告。这个广告需要一些时间来加载。这就是为什么<code class="fe nu nv nw nx b">.showRewardVideoAd()</code>应该在延迟之后或者加载成功时被调用。</p><h1 id="e6db" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">步骤6:在iOS模拟器上测试应用程序</h1><p id="2047" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">要在iOS上构建代码，只需运行以下代码</p><pre class="mk ml mm mn gt nz nx oa ob aw oc bi"><span id="96da" class="ms lh it nx b gy od oe l of og">$ ionic build<br/>$ npx cap copy</span></pre><p id="4169" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">完成后，从Xcode构建您的应用程序，并运行该应用程序。让我们看看iOS中的广告会是什么样子。</p><h2 id="6691" class="ms lh it bd li mt mu dn lm mv mw dp lq ld mx my lu le mz na ly lf nb nc mc nd bi translated">横幅广告</h2><p id="c40b" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">最终的广告在iOS上看起来是这样的</p><figure class="mk ml mm mn gt ju gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/05f350f10404c4b6396b4024b28150a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:558/1*p3J6eokJ00Qq5xAgV6uX5Q.gif"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">iOS中的AdMob横幅广告—离子反应电容应用</figcaption></figure><h2 id="e135" class="ms lh it bd li mt mu dn lm mv mw dp lq ld mx my lu le mz na ly lf nb nc mc nd bi translated">间隙广告</h2><p id="93a9" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">全屏显示的广告看起来像iOS上的广告</p><figure class="mk ml mm mn gt ju gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/ccd91d5f0fcffdc4b078d7f168e1b500.png" data-original-src="https://miro.medium.com/v2/resize:fit:558/1*NHIfY-6xNNUL8VCdvsr43g.gif"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">iOS中的AdMob间隙广告—离子反应电容应用</figcaption></figure><h2 id="dd81" class="ms lh it bd li mt mu dn lm mv mw dp lq ld mx my lu le mz na ly lf nb nc mc nd bi translated">奖励广告</h2><p id="409f" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">iOS上的悬赏广告会是这样的</p><figure class="mk ml mm mn gt ju gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/bd947e9f0ca890e65ec5e422000c1049.png" data-original-src="https://miro.medium.com/v2/resize:fit:558/1*tTq2GKkpODRvgR83nyc2Hw.gif"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">iOS中的AdMob奖励广告—离子反应电容应用</figcaption></figure><h1 id="1f83" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">步骤7:在Android设备上测试应用程序</h1><p id="838b" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">就像iOS一样，同样的代码也会在Android中显示广告。这个视频链接<a class="ae nn" href="https://youtu.be/XHzwraE4hYc" rel="noopener ugc nofollow" target="_blank">这里</a>将显示广告将如何出现在android设备上(只是为了完成这篇文章)</p><p id="4c18" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">Tada！你已经学会了如何在你的离子反应电容应用中实现AdMob广告。🎉</p><h1 id="7a48" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">结论</h1><p id="7b07" class="pw-post-body-paragraph ke kf it kh b ki me kk kl km mf ko kp ld mg ks kt le mh kw kx lf mi la lb lc im bi translated">在这篇博客中，我们学习了如何在Ionic React Capacitor应用程序中实现Google AdMob功能。对于用户希望从广告点击中获得一些收入的应用程序来说，AdMob功能是必不可少的。当你的应用程序有大量用户，并且你不为应用程序中的任何东西向用户收费时，这就很方便了。所以广告成为你的直接收入来源。你也可以将插播广告和奖励广告与应用内奖励相结合，如游戏升级、额外生命等。</p><blockquote class="kb kc kd"><p id="d788" class="ke kf kg kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu"> <em class="it">本教程的代码可在Github repo </em> </strong> <a class="ae nn" href="https://github.com/enappd/ionic-react-admob" rel="noopener ugc nofollow" target="_blank"> <strong class="kh iu"> <em class="it">上获得离子-反应-电容-admob </em> </strong> </a></p></blockquote><p id="7548" class="pw-post-body-paragraph ke kf it kh b ki kj kk kl km kn ko kp ld kr ks kt le kv kw kx lf kz la lb lc im bi translated">本文最初发表于<a class="ae nn" href="https://enappd.com" rel="noopener ugc nofollow" target="_blank"> Enappd </a>。</p></div></div>    
</body>
</html>