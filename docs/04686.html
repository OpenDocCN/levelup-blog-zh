<html>
<head>
<title>SwiftUI — Parallelogram Shape and Mask Tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI平行四边形形状和遮罩教程</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/parallelogram-shape-and-mask-tutorial-7473a4135483?source=collection_archive---------15-----------------------#2020-07-09">https://levelup.gitconnected.com/parallelogram-shape-and-mask-tutorial-7473a4135483?source=collection_archive---------15-----------------------#2020-07-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="52ec" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让-马克·布里安内</h2></div><p id="d633" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">前几天我在浏览各种网站时，注意到了许多流行网站的倾斜卡片和布局设计。例如<a class="ae le" href="https://stripe.com" rel="noopener ugc nofollow" target="_blank">条纹</a>、<a class="ae le" href="https://tailwindui.com/" rel="noopener ugc nofollow" target="_blank">尾翼</a>和<a class="ae le" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank">火基</a>。我用一个定制的平行四边形<code class="fe lf lg lh li b">Shape</code>将这个设计带到SwiftUI中。在我们深入到这里的教程之前，看看下面的一些例子，看看你能做什么。</p><blockquote class="lj lk ll"><p id="4fb2" class="ki kj lm kk b kl km ju kn ko kp jx kq ln ks kt ku lo kw kx ky lp la lb lc ld im bi translated">在开始之前，请考虑使用这个<a class="ae le" href="https://trailingclosure.com/signup/" rel="noopener ugc nofollow" target="_blank">链接</a>订阅，如果你没有在<a class="ae le" href="https://trailingclosure.com/" rel="noopener ugc nofollow" target="_blank">TrailingClosure.com</a>上阅读这篇文章，请随时来看看我们！</p></blockquote><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lq"><img src="../Images/7efbabde91f964234e89086c32033bed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BL-hXyV0gRVc34Xi.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">我用平行四边形创造的例子</figcaption></figure><h2 id="a040" class="mg mh it bd mi mj mk dn ml mm mn dp mo kr mp mq mr kv ms mt mu kz mv mw mx my bi translated">入门指南</h2><p id="0d49" class="pw-post-body-paragraph ki kj it kk b kl mz ju kn ko na jx kq kr nb kt ku kv nc kx ky kz nd lb lc ld im bi translated">如果您还没有，请启动Xcode并创建一个新项目。从那里，您需要创建一个名为<code class="fe lf lg lh li b">Parallelogram.swift</code>的新文件。这将是我们存储自定义<code class="fe lf lg lh li b">Shape</code>结构的文件。</p><blockquote class="lj lk ll"><p id="7946" class="ki kj lm kk b kl km ju kn ko kp jx kq ln ks kt ku lo kw kx ky lp la lb lc ld im bi translated">如果你以前没有构建过自己的<code class="fe lf lg lh li b">Shape</code>，那么看看这篇关于Swift 黑客的伟大文章<a class="ae le" href="https://www.hackingwithswift.com/quick-start/swiftui/how-to-draw-a-custom-path" rel="noopener ugc nofollow" target="_blank">。保罗将复习基础知识，让你跟上进度。</a></p></blockquote><pre class="lr ls lt lu gt ne li nf ng aw nh bi"><span id="b76f" class="mg mh it li b gy ni nj l nk nl">import SwiftUI<br/><br/>struct Parallelogram: Shape {<br/>	    <br/>    func path(in rect: CGRect) -&gt; Path {<br/>    	// Return Custom Path Here<br/>    }<br/>}</span></pre><p id="7351" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">看看下面的图表，看看这个形状是如何工作的。一个<code class="fe lf lg lh li b">CGRect</code>将被传入<code class="fe lf lg lh li b">Shape</code>的<code class="fe lf lg lh li b">path(in rect:)</code>函数，从那里我们将利用一个struct属性绘制一个<code class="fe lf lg lh li b">Path</code>，我们将在第二个函数中创建一个名为<code class="fe lf lg lh li b">depth</code>的函数。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi nm"><img src="../Images/3414067792d2a23b191c7f9f63bfbc5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ViIbi1dBcOnlKhjV.png"/></div></div></figure><ol class=""><li id="70cb" class="nn no it kk b kl km ko kp kr np kv nq kz nr ld ns nt nu nv bi translated">首先在名为<code class="fe lf lg lh li b">depth</code>的结构中声明一个<code class="fe lf lg lh li b">CGFloat</code>属性。这将是我们的平行四边形将“切入”<code class="fe lf lg lh li b">CGRect</code>的距离。</li></ol><pre class="lr ls lt lu gt ne li nf ng aw nh bi"><span id="dc82" class="mg mh it li b gy ni nj l nk nl">import SwiftUI<br/><br/>struct Parallelogram: Shape {<br/>	<br/>    var depth: CGFloat<br/>    <br/>    func path(in rect: CGRect) -&gt; Path {<br/>    	// Return Custom Path Here<br/>    }<br/>}</span></pre><p id="e41f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2.现在在<code class="fe lf lg lh li b">path(in rect:)</code>函数中，定义一个新的<code class="fe lf lg lh li b">Path</code>来绘制平行四边形。</p><pre class="lr ls lt lu gt ne li nf ng aw nh bi"><span id="0b7d" class="mg mh it li b gy ni nj l nk nl">import SwiftUI<br/><br/>struct Parallelogram: Shape {<br/>	<br/>    var depth: CGFloat<br/>    <br/>    func path(in rect: CGRect) -&gt; Path {<br/>    	Path { p in<br/>        	// Draw parallelogram here using 'p'<br/>        }<br/>    }<br/>}</span></pre><p id="dd48" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">3.接下来，我们要画出路径。记住，我们需要相对于传入的<code class="fe lf lg lh li b">rect</code>而不是一个标准尺寸来绘制这个路径。这将允许形状相对于它所在视图的大小进行缩放。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi nm"><img src="../Images/15ec69654d2471f6eb4de18ad223e23d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1MQI4gmq47dUiuxa.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">带坐标的形状</figcaption></figure><p id="08a0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">记住上面的图形，我们将从图形的左上方开始，顺时针移动。</p><pre class="lr ls lt lu gt ne li nf ng aw nh bi"><span id="4245" class="mg mh it li b gy ni nj l nk nl">import SwiftUI<br/><br/>struct Parallelogram: Shape {<br/>    <br/>    var depth: CGFloat<br/>    var flipped: Bool = false<br/>    <br/>    func path(in rect: CGRect) -&gt; Path {<br/>        Path { p in<br/>        	p.move(to: CGPoint(x: 0, y: depth))<br/>            p.addLine(to: CGPoint(x: rect.width, y: 0))<br/>            p.addLine(to: CGPoint(x: rect.width, y: rect.height - depth))<br/>            p.addLine(to: CGPoint(x: 0, y: rect.height))<br/>            p.closeSubpath()<br/>        }<br/>    }<br/>}</span></pre><p id="62e2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你愿意，你也可以给<code class="fe lf lg lh li b">Parallelogram</code>形状添加一个变量，允许你在绘制路径时水平翻转形状。这比创建形状后在形状上使用<code class="fe lf lg lh li b">.rotation3DEffect()</code>调用要简单一些。</p><pre class="lr ls lt lu gt ne li nf ng aw nh bi"><span id="1ecf" class="mg mh it li b gy ni nj l nk nl">import SwiftUI<br/><br/>struct Parallelogram: Shape {<br/>    <br/>    var depth: CGFloat<br/>    var flipped: Bool = false<br/>    <br/>    func path(in rect: CGRect) -&gt; Path {<br/>        Path { p in<br/>            if flipped {<br/>                p.move(to: CGPoint(x: 0, y: 0))<br/>                p.addLine(to: CGPoint(x: rect.width, y: depth))<br/>                p.addLine(to: CGPoint(x: rect.width, y: rect.height))<br/>                p.addLine(to: CGPoint(x: 0, y: rect.height - depth))<br/>            } else {<br/>                p.move(to: CGPoint(x: 0, y: depth))<br/>                p.addLine(to: CGPoint(x: rect.width, y: 0))<br/>                p.addLine(to: CGPoint(x: rect.width, y: rect.height - depth))<br/>                p.addLine(to: CGPoint(x: 0, y: rect.height))<br/>            }<br/>            p.closeSubpath()<br/>        }<br/>    }<br/>}</span></pre><h2 id="338e" class="mg mh it bd mi mj mk dn ml mm mn dp mo kr mp mq mr kv ms mt mu kz mv mw mx my bi translated">示例使用</h2><p id="5e0f" class="pw-post-body-paragraph ki kj it kk b kl mz ju kn ko na jx kq kr nb kt ku kv nc kx ky kz nd lb lc ld im bi translated">就像上面的一些例子一样，你可以很容易地用下面的形状屏蔽掉一个<code class="fe lf lg lh li b">Image</code>或<code class="fe lf lg lh li b">View</code>:</p><pre class="lr ls lt lu gt ne li nf ng aw nh bi"><span id="188a" class="mg mh it li b gy ni nj l nk nl">Image("watch_stock")<br/>    .resizable()<br/>    .aspectRatio(contentMode: .fill)<br/>    .frame(height: 300, alignment: .center)<br/>    .mask(Parallelogram(depth: 50))</span></pre><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi nw"><img src="../Images/04d60e9d56436601cd8353a7783d3c63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9ONLbdNtoB6prMea.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">使用各种参数的示例</figcaption></figure><h2 id="fcc2" class="mg mh it bd mi mj mk dn ml mm mn dp mo kr mp mq mr kv ms mt mu kz mv mw mx my bi translated">使用匹配的几何体效果</h2><p id="77f1" class="pw-post-body-paragraph ki kj it kk b kl mz ju kn ko na jx kq kr nb kt ku kv nc kx ky kz nd lb lc ld im bi translated">最好的部分是，你可以使用这个形状与许多其他SwiftUI功能，如匹配的几何效果。请注意下面的视频中，当封面照片被点击时，它是如何去除遮罩的。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="nx ny l"/></div></figure><h2 id="a4db" class="mg mh it bd mi mj mk dn ml mm mn dp mo kr mp mq mr kv ms mt mu kz mv mw mx my bi translated">让我们看看你做了什么！</h2><p id="3550" class="pw-post-body-paragraph ki kj it kk b kl mz ju kn ko na jx kq kr nb kt ku kv nc kx ky kz nd lb lc ld im bi translated">我们想看看你用这个教程做了什么！给我们发照片！在推特<a class="ae le" href="https://twitter.com/TrailingClosure" rel="noopener ugc nofollow" target="_blank"> @TrailingClosure </a>、Instagram 上找到我们，或者发邮件到howdy@TrailingClosure.com<!-- --><!-- -->联系我们。</p></div></div>    
</body>
</html>