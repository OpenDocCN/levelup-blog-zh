<html>
<head>
<title>Privacy on Emails Never Existed, and This Is How They Are Tracked</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">电子邮件的隐私从来就不存在，这就是它们被追踪的方式</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/privacy-on-emails-never-existed-and-this-is-how-they-are-tracked-748c3c5f049c?source=collection_archive---------19-----------------------#2020-06-11">https://levelup.gitconnected.com/privacy-on-emails-never-existed-and-this-is-how-they-are-tracked-748c3c5f049c?source=collection_archive---------19-----------------------#2020-06-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="d0ba" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">互联网追踪收藏</h2><div class=""/><div class=""><h2 id="2234" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">我将介绍不可见像素技术，这是一种广泛使用的电子邮件跟踪技术，并快速实现，以便您可以在实践中看到它。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/e37c38ac97d28e9da892e53258ac4b0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3qlURQphmzdEtLZa_W4Euw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</figcaption></figure><h1 id="11e2" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">什么是电子邮件跟踪，为什么要关注它？</h1><p id="151a" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">隐私是一个非常热门的话题，现在比以往任何时候都更热门。为什么隐私对我们所有人来说都是一项重要的权利，原因因人而异。不管我们在乎与否，互联网上流传的大多数电子邮件都以这样或那样的方式被跟踪，我认为提高对这种跟踪如何工作的认识很重要，这样我们就可以意识到这一点，从这个意义上说，如果这是我们的决定，那么收回我们的隐私。本文的目的不是制作一个复杂的电子邮件跟踪系统，而是通过一个非常简单但真实的例子用代码展示如何实现这一点，这样我们就知道了它背后的基本概念。再次声明，本文是出于<strong class="ly ja">教育目的</strong>。</p><h1 id="af99" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated"><strong class="ak">什么是隐形像素，为什么人们会使用它？</strong></h1><p id="02f7" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">不可见像素是一种知道谁在访问资源的方法，在某种程度上，它对访问资源的用户是透明的，这对于知道电子邮件何时被阅读特别有用。被跟踪的人不知道跟踪正在发生，这使它成为一种模糊的技术，我们至少可以认为是潜在的不必要的。它通常用于衡量电子邮件活动的成功，或用于个人用途，即当我们的收件人阅读我们的电子邮件时，尽管据我所知，它不是一种具有法律约束力的技术来确保邮件被阅读(也不应该被阅读)。</p><h1 id="7620" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated"><strong class="ak">这个方法是如何工作的？</strong></h1><p id="6c4c" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">事情是这样的。电子邮件格式非常古老，而且在设计时从未考虑到安全性。它基本上由一些标题和一个主体组成，很像HTML，它的主体实际上可以呈现HTML，所以我们可以看到格式优美的电子邮件，而不是那些难看的纯文本。恶心！(注意这里的<em class="ms">讥讽</em>)。除了文本，电子邮件正文还有其他资源，比如图像。这些资源可以是嵌入式的，通常以base64编码，也可以存储在我们必须检索的远程位置，这是整个电子邮件跟踪技术的关键。</p><p id="6117" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">当我们打开一封电子邮件时，我们通常会有一些链接指向远程位置的资源，如图标或图像。默认情况下，大多数电子邮件客户端会自动下载这些资源并显示给用户，这非常方便，也是我们理所当然的事情。但是现在想象一下下面的场景:</p><blockquote class="my mz na"><p id="6852" class="lw lx ms ly b lz mt ka mb mc mu kd me nb mv mh mi nc mw ml mm nd mx mp mq mr ij bi translated">如果我们控制了这些资源所在的服务器，我们就可以等到它们被请求，在那一刻我们就知道包含它们的邮件已经被打开了。</p></blockquote><p id="1ca0" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">这就是技巧，不多不少。剩下的唯一一件事就是让我们发送的每封邮件保持一致，以一种读邮件的人看不见的方式。为了实现这一点，一个非常常见的技术是在我们的电子邮件正文中包含一个大小为1x1像素的图像，称为<strong class="ly ja">不可见像素</strong>。在白色背景的电子邮件中，这张图片很难被人注意到，人眼也分辨不出来(嗯，这是非常明显的)。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ne"><img src="../Images/3b9deef1636939750350d793d3d3a616.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KKRl4sVSuVlxTPLhtbCNBw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">这封邮件里有一个看不见的像素，但是我已经把它涂成红色了。你能发现它吗？</figcaption></figure><h1 id="94f6" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated"><strong class="ak">安全vs用户体验</strong></h1><p id="1695" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">最好的(或最坏的)部分是，它利用了完全合法的电子邮件机制，以一种非设计的方式利用它。而且，就像在大多数网络安全案例中一样，它之所以有效，是因为在安全性和便利性之间存在一种权衡，这是我们不愿意假设的。大多数(如果不是全部)电子邮件客户端和web应用程序都提供了禁用外部资源自动下载的选项，完全避免了这种跟踪技术的发生。但总的来说，我们都觉得这很不方便，这就是为什么它在大多数客户端默认是禁用的。有一些精明的例外，现在你可以想象为什么那些邮件客户端不是主流了。</p><h1 id="1955" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated"><strong class="ak">它有合法用途</strong></h1><p id="4fc4" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">不可见像素技术通常用于我们收件箱中收到的每一封电子邮件。大多数情况下，它不是这种晦涩的技术，而是另一种变体，其中商业电子邮件中包含的许多资源都是出于跟踪目的而制作的。其目的是衡量电子邮件活动的成功程度，或者获得对营销活动的可观察性非常有用的参与度指标。此外，我们可以就这种技术对我们的隐私有多大影响展开辩论，特别是当其他技术已经采用了对发送的消息进行<a class="ae nf" href="https://www.business-standard.com/article/news-ani/whatsapp-introduces-new-double-blue-tick-feature-that-lets-users-know-when-messages-are-read-114110700275_1.html" rel="noopener ugc nofollow" target="_blank">跟踪，并且得到了非常顺利和广泛的接受。</a></p><h1 id="166f" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated"><strong class="ak">我们如何检测和避免不可见的像素？</strong></h1><p id="db49" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">虽然我们不能确保这种技术是否被应用，但某人在他们的电子邮件中包含<em class="ms"> 1x1像素白色图像</em>的可能性非常小，因此我们可以假设当这种情况发生时，不可见像素技术正在被应用。通过查看电子邮件的源代码，我们可以发现正在下载的所有资源。所有这些链接都是潜在的追踪者，如果它们指向一个与营销有关的网站，可能性就会增加。我们可以通过禁用电子邮件资源的自动获取或自动下载来避免这种跟踪技术。我们必须意识到这会让我们的电子邮件阅读体验变得不那么愉快，但这是要付出的代价。这总是取决于我们。</p><p id="3ff6" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">这就是不可见像素的方法。假设你邮箱里收到的所有东西都是用来跟踪你的。被不被跟踪是你的选择。</p><h1 id="5407" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">docker + nginx + mailhog的工作示例</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ng"><img src="../Images/7a9e7f39db05edf8079a8cbdc5042fec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Il0B3yBQXu6IYF5jD9G4AQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">docker + nginx + mailhog的例子</figcaption></figure><h1 id="b236" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">跟踪基础设施:容器和docker-compose</h1><p id="e9d8" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">我们在这里会有一点技术性。为了实现不可见像素(或任何变体)的技术，我们需要一点基础设施。在这种情况下，由于这是一个概念验证，我们将把它保持在最低限度。我们将使用docker-compose运行几个容器，所以没有必要在我们的计算机中安装任何额外的东西。我们将利用两个服务:一个包含可下载资源的web服务器，以及一个接收和转发电子邮件的SMTP服务器。在我们的例子中，我们将分别使用<em class="ms"> nginx </em>和<em class="ms"> mailhog </em>的图像，因为它们的安装和使用非常简单。</p><h1 id="b3eb" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">SMTP服务器:Mailhog</h1><p id="63d3" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">Mailhog是一个集成的SMTP +电子邮件客户端web应用程序，由于其设置和运行简单，经常在开发中使用。它还不能运行生产SMTP服务器，因为它缺少邮件传输代理(MTA)通常实现的功能。但对我们来说是完美的。所以现在，我们需要为项目创建一个新的文件夹，并创建文件<em class="ms"> docker-compose.yml </em>，它将包含运行我们的容器化服务的声明。此刻，它会是这个样子。</p><pre class="kp kq kr ks gt nh ni nj nk aw nl bi"><span id="58e5" class="nm lf iq ni b gy nn no l np nq">version: "3"</span><span id="70a1" class="nm lf iq ni b gy nr no l np nq">services:<br/>  mailhog:<br/>    image: mailhog/mailhog<br/>    ports:<br/>      - 1025:1025  # smtp server<br/>      - 8025:8025  # web ui</span></pre><p id="426e" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">非常简单，我们将从<a class="ae nf" href="https://hub.docker.com/r/mailhog/mailhog/" rel="noopener ugc nofollow" target="_blank">dockerhub.com</a>获取mailhog的映像，并使用映射到本地主机的指定端口运行它。当我们从dockerhub运行docker镜像时，我们应该总是阅读如何部署它。因此，如果我们以<code class="fe ns nt nu ni b">docker-compose up -d mailhog</code>开始堆栈，用浏览器导航到<code class="fe ns nt nu ni b">localhost:8025/</code>，我们已经可以看到空的mailhog收件箱。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nv"><img src="../Images/4a1157893b47717203d38fbb55cbc7b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sKwF6rn1F826g996R1KwNQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">我们的空邮箱运行在一个容器内</figcaption></figure><h1 id="8eef" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">向localhost发送电子邮件:mhsendmail</h1><p id="c1e8" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">由于我们在本地主机上运行SMTP服务器，我们无法从gmail或yahoo等电子邮件提供商发送电子邮件，因为我们无法从互联网访问本地主机，也没有办法知道如何将包裹从gmail路由到我们的机器。所以我们需要一种方法向运行在<code class="fe ns nt nu ni b">localhost:1025</code>上的SMTP服务器发送消息。我们如何做到这一点？嗯，mailhog有一个非常方便的工具，叫做<code class="fe ns nt nu ni b">mhsendmail</code>,它让我们格式化一个原始消息，并准确地将它发送到默认情况下运行在localhost上的SMTP服务器，这正是我们现在的情况。所以我们先安装程序。我使用的是Arch Linux，所以我可以在Arch用户存储库中找到这个包，但是在任何其他操作系统中也很容易找到这个包。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/1b5c27cc3b1db1861d465c51a91483df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7yP1cGEwGZgKrYAUy3vMjA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">这种包装在AUR很容易找到</figcaption></figure><blockquote class="my mz na"><p id="5a0b" class="lw lx ms ly b lz mt ka mb mc mu kd me nb mv mh mi nc mw ml mm nd mx mp mq mr ij bi translated">注意:如果你想知道我在Arch Linux中用来保持我所有的包井井有条的系统，我推荐你查看<a class="ae nf" href="https://medium.com/@msebas5/how-i-painlessly-migrate-my-linux-packages-f4f0d5e91191" rel="noopener">这篇文章</a>，其中我解释了别名<code class="fe ns nt nu ni b"><em class="iq">search</em></code>、<code class="fe ns nt nu ni b"><em class="iq">install</em></code>和<code class="fe ns nt nu ni b"><em class="iq">uninstall</em></code>的用法，你可能会在我的一些文章中看到。</p></blockquote><p id="5393" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">所以让我们试着给自己发一封电子邮件。提醒一下，电子邮件基本上是由一些标题和正文组成的纯文本。因此，让我们伪造一封Bob给Alice的电子邮件，其中Bob希望在Alice打开电子邮件时得到通知。</p><pre class="kp kq kr ks gt nh ni nj nk aw nl bi"><span id="3d33" class="nm lf iq ni b gy nn no l np nq">$ mhsendmail test@mailhog.local &lt;&lt;EOF                                                                                                                                                 <br/>From: Bob &lt;<a class="ae nf" href="mailto:bob@mail.com" rel="noopener ugc nofollow" target="_blank">bob@mail.com</a>&gt;<br/>To: Alice &lt;<a class="ae nf" href="mailto:alice@mail.com" rel="noopener ugc nofollow" target="_blank">alice@mail.com</a>&gt;<br/>Subject: Urgent message</span><span id="71f6" class="nm lf iq ni b gy nr no l np nq">Hello Alice, please read my very important message.</span><span id="53d3" class="nm lf iq ni b gy nr no l np nq">Thank you,<br/>Bob<br/>EOF</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nx"><img src="../Images/6f892ff09e935bedaf8424bde59c906d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bKRYwjVNGJNE4ingG3K96A.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">Bob发送的邮件出现在Alice的收件箱中</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ny"><img src="../Images/3f3c1eb4cb8294553266581cc599fd2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xgOHbj8Epgi67u2AeUxhig.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">这是爱丽丝打开的邮件</figcaption></figure><h1 id="aef3" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">设置捕熊陷阱:Nginx</h1><p id="72af" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">现在Bob可以给Alice发送一封电子邮件，他想在他控制的某个地方设置一个可下载的资源。为此，他可以设置一个服务器，比如用<em class="ms"> nginx </em>，就像我们现在要做的。首先，将<em class="ms"> nginx </em>包含在<em class="ms"> docker-compose.yml </em>中，作为一个新服务。一如既往，建议<a class="ae nf" href="https://hub.docker.com/_/nginx" rel="noopener ugc nofollow" target="_blank">在dockerhub.com</a>中查找图像，并阅读说明。<em class="ms"> docker-compose.yml </em>中的声明现在看起来像这样:</p><pre class="kp kq kr ks gt nh ni nj nk aw nl bi"><span id="0549" class="nm lf iq ni b gy nn no l np nq">version: "3"</span><span id="becf" class="nm lf iq ni b gy nr no l np nq">services:<br/>  mailhog:<br/>    image: mailhog/mailhog<br/>    ports:<br/>      - 1025:1025 # smtp server<br/>      - 8025:8025 # web ui</span><span id="7a65" class="nm lf iq ni b gy nr no l np nq">nginx:<br/>    image: nginx:latest<br/>    volumes:<br/>      - ./pixels:/pixels<br/>      - ./nginx/nginx.conf:/etc/nginx/nginx.conf<br/>    ports:<br/>      - 80:80</span></pre><p id="bc8b" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">这里有几件事，我们将容器的端口80映射到localhost，它将接收http连接，我们创建两个命名卷:一个包含<code class="fe ns nt nu ni b">nginx.conf</code>文件，其中包含运行web服务器的路由和策略，另一个是包含可下载资源的<code class="fe ns nt nu ni b">pixels/</code>文件夹。然后，我们将在<code class="fe ns nt nu ni b">nginx/nginx.conf</code>中创建一个文件，内容如下:</p><pre class="kp kq kr ks gt nh ni nj nk aw nl bi"><span id="8578" class="nm lf iq ni b gy nn no l np nq">events {}</span><span id="74d0" class="nm lf iq ni b gy nr no l np nq">http {<br/>  server {<br/>    listen  80;<br/>    location ~ {<br/>      root  /pixels;<br/>    }<br/>  }<br/>}</span></pre><p id="3d76" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">这个配置将nginx配置为在<code class="fe ns nt nu ni b">/pixels/</code>文件夹中查找与<code class="fe ns nt nu ni b">http://localhost/{file}</code> /中的<code class="fe ns nt nu ni b">{file}</code>同名的文件名，该文件夹安装在容器的根目录下。这将让我们在不同的电子邮件中请求不同的内容，所以我们确切地知道哪个电子邮件被打开了。因此，如果我们现在做<code class="fe ns nt nu ni b">docker-compose up -d</code>，我们应该为SMTP服务器和web服务器这两个服务部署堆栈。</p><p id="15fd" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">然后，我们将把一个名为<code class="fe ns nt nu ni b">pixel1.png</code>的文件放在我们项目的目录<code class="fe ns nt nu ni b">pixels/</code>下，记住，它被映射到我们web服务器内的目录<code class="fe ns nt nu ni b">/pixels/</code>。我发现这个<a class="ae nf" href="http://www.1x1px.me/" rel="noopener ugc nofollow" target="_blank">非常酷的网站</a>就是这么做的。记住，对于我们想到的大多数事情，都有一个人已经做到了，并且放到了网上。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nz"><img src="../Images/f0c17b4d3ac75e596e965c8edd1fb3f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*taGl_hNxE3CfrfOyOTnGQg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">我们小小的跟踪基础设施已经建立并运行</figcaption></figure></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><h1 id="5e1e" class="le lf iq bd lg lh oh lj lk ll oi ln lo kf oj kg lq ki ok kj ls kl ol km lu lv bi translated">发送电子邮件</h1><p id="a4f7" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">让我们回顾一下到目前为止我们所拥有的。爱丽丝拥有一个电子邮件地址，鲍勃能够给爱丽丝发送电子邮件。Bob是nginx服务的所有者，他可以完全控制放置任何可下载的内容。然后，Bob的目标是给Alice发送一封电子邮件，因为他能够知道该电子邮件何时被打开。</p><p id="f1d3" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">正如我们前面看到的，电子邮件格式有标题和正文。电子邮件正文直接接受HTML，由电子邮件客户端呈现，无需用户交互。我们通过添加一个新的标题来表明这一点:<code class="fe ns nt nu ni b">Content-type: text/html</code>它表明消息的正文应该像HTML一样阅读。然后，我们将在电子邮件的正文中包含一个1x1像素的图像，如果Alice启用了“自动下载外部资源”,这将在打开电子邮件时下载，这对大多数用户来说都是如此。让我们将资源作为远程图像发送给Alice:</p><pre class="kp kq kr ks gt nh ni nj nk aw nl bi"><span id="d47d" class="nm lf iq ni b gy nn no l np nq">$ mhsendmail test@localhost &lt;&lt;EOF                                                                                                                                                     <br/>From: Bob &lt;<a class="ae nf" href="mailto:bob@mail.com" rel="noopener ugc nofollow" target="_blank">bob@mail.com</a>&gt;<br/>To: Alice &lt;<a class="ae nf" href="mailto:alice@mail.com" rel="noopener ugc nofollow" target="_blank">alice@mail.com</a>&gt;<br/>Subject: Urgent message<br/>Content-Type: text/html</span><span id="559c" class="nm lf iq ni b gy nr no l np nq">&lt;p&gt;Hello Alice, please read my very important message.&lt;/p&gt;</span><span id="49df" class="nm lf iq ni b gy nr no l np nq">&lt;p&gt;Thank you,&lt;/p&gt;<br/>&lt;p&gt;Bob&lt;/p&gt;<br/>&lt;img src="<a class="ae nf" href="http://localhost/pixel1.png" rel="noopener ugc nofollow" target="_blank">http://localhost/pixel1.png</a>" /&gt;<br/>EOF</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi om"><img src="../Images/ac59b6c44bf05fd68874919b9594ffe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MkHB9gTv1e3NZgGOjjlB-g.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">收件箱中的新邮件</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi on"><img src="../Images/f1fdb6d08166a035a40eb1722266a347.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SQXwy_mrqKF8sxAirFa22Q.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">新邮件，但这次它包含一个不可见的像素</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oo"><img src="../Images/da39285bb935ac42f3efc1ac3a3fc050.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0H5e5uahqE3ZiZvj-Ml9Mw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">当电子邮件打开时，发件人会收到通知</figcaption></figure><p id="8a67" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">通过这个实验，我们可以自己制作一个简单的电子邮件跟踪基础设施。这个例子非常简单，但是有些公司以此为生，并提供电子邮件跟踪服务。在此基础上，您可以做很多事情，比如仪表盘、其他(更好)类型的下载资源、人工智能等等。我希望这本书读起来和写起来一样有趣。</p><p id="9143" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">享受乐趣和隐私！<br/>马科斯</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="op oq l"/></div></figure></div></div>    
</body>
</html>