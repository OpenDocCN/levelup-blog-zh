<html>
<head>
<title>SUBSTR() Character Function — Oracle SQL Example</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SUBSTR()字符函数— Oracle SQL示例</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/substr-character-function-oracle-sql-example-fcdd37a5a3a8?source=collection_archive---------7-----------------------#2021-05-12">https://levelup.gitconnected.com/substr-character-function-oracle-sql-example-fcdd37a5a3a8?source=collection_archive---------7-----------------------#2021-05-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="fe22" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">操纵字符串或字符数据是编程中的基本实践。有太多的需求、原因和用例可能需要<em class="ko">分割和切割</em>一个字符串值。Oracle SQL <code class="fe kp kq kr ks b">SUBSTR()</code>函数可用于提取字符串的特定部分。如果您对<code class="fe kp kq kr ks b">SUBSTR()</code>不熟悉，请继续阅读以了解更多信息，并将这个方便的函数添加到您的SQL工具箱中。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi kt"><img src="../Images/4ef6e9c011139b1553a787f94df6643a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*xtXvicdRR64a8GU8pKETpw.jpeg"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">图片由<a class="ae lf" href="https://pixabay.com/users/geralt-9301/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1989152" rel="noopener ugc nofollow" target="_blank"> Gerd Altmann </a>来自<a class="ae lf" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1989152" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></figcaption></figure><h2 id="45ce" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">为什么我要写关于<code class="fe kp kq kr ks b">SUBSTR() function?</code>的文章</h2><p id="56a1" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">我一直在研究Oracle SQL，最近使用了<code class="fe kp kq kr ks b">SUBSTR()</code>字符函数，试图在<code class="fe kp kq kr ks b">INTERVAL</code>列中存储持续时间类型的数据值(例如，1小时20分17秒)。</p><p id="843e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">虽然我还没有完全确定那个解决方案，但是，(当我确定的时候，你可以期待一个关于它的巨大的博客帖子😁在我的学习中，这是一个很大的焦点。</p><p id="950a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这篇特别的博客文章中，我不需要深入研究关于在<code class="fe kp kq kr ks b">INTERVAL</code>列中存储数据的任何问题。然而，我很好地利用了<code class="fe kp kq kr ks b">SUBSTR()</code>，并希望与其他对<code class="fe kp kq kr ks b">SUBSTR()</code>如何工作感兴趣的开发人员分享一些简单的示例查询。</p><h2 id="a94b" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">样本数据概述</h2><p id="25ca" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">下面的查询返回我所针对的样本字符串值的5行，存储在名为<strong class="js iu"> duration </strong>的<code class="fe kp kq kr ks b">VARCHAR2</code>列中。该数据的格式表示值“HH:MI:SS”(小时:分钟:秒):</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="114e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">(注意:根据<strong class="js iu"> DAY_WALKED </strong> <code class="fe kp kq kr ks b">DATE</code>列(未显示为<code class="fe kp kq kr ks b">SELECT</code>列列表的一部分),查询结果按最近的日期排序，因为这些行包含字符串中“小时”部分的值，最适合演示查询。)</p><h1 id="8388" class="mg lh it bd li mh mi mj ll mk ml mm lo mn mo mp lr mq mr ms lu mt mu mv lx mw bi translated">SUBSTR()语法和含义</h1><p id="1b1f" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated"><code class="fe kp kq kr ks b">SUBSTR()</code>的语法如下:<code class="fe kp kq kr ks b">SUBSTR(target_string, position, length)</code></p><p id="c3d8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">含义:</p><ul class=""><li id="af87" class="mx my it js b jt ju jx jy kb mz kf na kj nb kn nc nd ne nf bi translated"><strong class="js iu"><em class="ko">target _ string</em></strong>—要从中提取文本/字符部分的必需字符串。</li><li id="f090" class="mx my it js b jt ng jx nh kb ni kf nj kj nk kn nc nd ne nf bi translated"><strong class="js iu"> <em class="ko">位置</em> </strong> —开始提取的数值。也需要。位置编号值可以是负数，在这种情况下，提取将从目标字符串的最末端开始，并向后继续。</li><li id="4edf" class="mx my it js b jt ng jx nh kb ni kf nj kj nk kn nc nd ne nf bi translated"><strong class="js iu"> <em class="ko">长度</em> </strong> —该值是可选的。如果包含，<code class="fe kp kq kr ks b">SUBSTR()</code>将从<code class="fe kp kq kr ks b">n</code>位置值开始提取这么多字符。如果在<code class="fe kp kq kr ks b">SUBSTR()</code>函数调用中没有提供长度参数值，则从<code class="fe kp kq kr ks b">n</code>位置参数值开始完整提取目标字符串的剩余部分(直到末尾)。</li></ul><h2 id="206e" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">SUBSTR()示例查询</h2><p id="56e8" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">和任何事情一样，例子提供了清晰度。在第一个查询中，我首先提取第一个字符处的<em class="ko"> hour </em>子字符串部分，然后再继续总共2个字符(由2 length参数值指定)，主要是提取第一个冒号(:)分隔符之前的小时值:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="cca1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了<em class="ko">隔离</em>持续时间列分钟部分，我使用<code class="fe kp kq kr ks b">SUBSTR()</code>并提取第一个和第二个冒号分隔符之间的值。再次指定2作为长度，从4的起始位置返回2个字符(第一个冒号分隔符后的第一个字符)。</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="683d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于字符串的最后2个字符是秒的值，我可以根据提供的参数以2种不同的方式使用<code class="fe kp kq kr ks b">SUBSTR ()</code>。</p><h2 id="fc1f" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">方法1</h2><p id="3710" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">从位置7(最后一个冒号分隔符后的第一个字符)开始，长度为2，返回秒的值:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><h2 id="7f2e" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">方法2</h2><p id="2eb2" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">因为我知道秒的值是字符串的最后2个字符，所以我对position参数使用-2(记住负的位置值从target_string的末尾开始计数)。虽然我提供了2作为长度参数，但是我可以很容易地在这里省略它，因为没有它，<code class="fe kp kq kr ks b">SUBSTR()</code>提取到目标字符串的末尾。因此，<code class="fe kp kq kr ks b">SUBSTR()</code>在本例中也可以这样称呼:<code class="fe kp kq kr ks b">SUBSTR(duration, -2)</code></p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="5de6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">总的来说，所有3个单独的持续时间值都在一个查询中返回:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/1904697d7f0519e0b147268ab28c5d7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/1*Vmx0fuQv0i0CN0fRjdi2cQ.png"/></div></figure><h1 id="8bfb" class="mg lh it bd li mh mi mj ll mk ml mm lo mn mo mp lr mq mr ms lu mt mu mv lx mw bi translated">SUBSTR()在这些例子中有什么用？</h1><p id="4711" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">通过使用<code class="fe kp kq kr ks b">SUBSTR()</code>并提取持续时间字符串的特定部分，可以使用<code class="fe kp kq kr ks b">CAST()</code>函数进一步对这些值进行类型转换，如以下查询所示:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/06b546031092cebd305275394ac0a86b.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*yqd5XIZ9fks83wcuSzr23A.png"/></div></figure><p id="cc81" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将<code class="fe kp kq kr ks b">SUBSTR()</code>值转换为<code class="fe kp kq kr ks b">NUMBER</code>数据类型，并使用<code class="fe kp kq kr ks b">CASE</code>表达式，我可以在适当的地方给分钟值加60，从而提供一个<em class="ko">分钟总数</em>值:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/10d7b0e7c6b76d1c5029abab1f84a6da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*LqksLqoYWSwVUB1tE_r8Lw.png"/></div></figure><p id="f5a8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">只要小时值为1，分钟值就会加上60分钟。如果小时不为1，则将0(零)分钟加到分钟值上，基本保持不变。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><p id="119e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本文中的示例使用了Oracle SQL <code class="fe kp kq kr ks b">SUBSTR()</code>函数，但是其他SQL实现也使用了<code class="fe kp kq kr ks b">SUBSTR()</code>或类似的函数来实现相同的目的。</p><p id="632c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你在查询中使用<code class="fe kp kq kr ks b">SUBSTR()</code>或类似功能的巧妙方法是什么？请在下面的评论中告诉我。</p><p id="0e3e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你在代码中发现任何错误或者有任何疑问，请在评论中分享。感谢您的阅读！</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h2 id="f686" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">你会喜欢的其他帖子…</h2><ul class=""><li id="9d22" class="mx my it js b jt lz jx ma kb nv kf nw kj nx kn nc nd ne nf bi translated"><a class="ae lf" rel="noopener ugc nofollow" target="_blank" href="/how-to-find-the-first-and-last-day-of-a-month-with-oracle-sql-date-functions-706572c751a8">如何使用Oracle SQL日期函数找到一个月的第一天和最后一天</a></li><li id="73a5" class="mx my it js b jt ng jx nh kb ni kf nj kj nk kn nc nd ne nf bi translated"><a class="ae lf" rel="noopener ugc nofollow" target="_blank" href="/mysql-count-weekday-occurrences-5241511dba8c"> MySQL统计工作日出现次数</a></li></ul></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><p id="399b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">喜欢的内容，你在这个帖子里看过？那么你肯定会喜欢我博客上的博文，数字猫头鹰的散文。</p><p id="b452" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在那里你会找到关于SQL数据库开发/编程和LAMP stack web开发的博文。</p></div></div>    
</body>
</html>