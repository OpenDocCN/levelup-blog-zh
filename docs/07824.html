<html>
<head>
<title>Easily Obtain Reddit Data With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python轻松获取Reddit数据</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/easily-obtain-reddit-data-with-python-8ce0c576540f?source=collection_archive---------4-----------------------#2021-03-14">https://levelup.gitconnected.com/easily-obtain-reddit-data-with-python-8ce0c576540f?source=collection_archive---------4-----------------------#2021-03-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/954f5c750b0e359895f92a2709788352.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IyTYNxHUuYQ6nxzoopi_2g.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">根据本指南生成的Wordcloud。</figcaption></figure><p id="8ab5" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">继我之前的帖子<em class="ld">用Python进行Reddit情感分析</em>之后，我们从Reddit评论中的一个特定帖子获得了情感。在本帖中，我们将介绍另一个API，它是获取大量Reddit数据进行分析的另一种更快捷的方法。</p><div class="le lf gp gr lg lh"><a rel="noopener  ugc nofollow" target="_blank" href="/reddit-sentiment-analysis-with-python-c13062b862f6"><div class="li ab fo"><div class="lj ab lk cl cj ll"><h2 class="bd iu gy z fp lm fr fs ln fu fw is bi translated">用Python进行Reddit情感分析</h2><div class="lo l"><h3 class="bd b gy z fp lm fr fs ln fu fw dk translated">他们说行动比语言更响亮，但有时语言也可以掩盖情绪，而这些情绪是无法被…</h3></div><div class="lp l"><p class="bd b dl z fp lm fr fs ln fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="lq l"><div class="lr l ls lt lu lq lv jz lh"/></div></div></a></div><p id="8ec1" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">为此，我们将利用<a class="ae lw" href="https://pushshift.io/api-parameters/" rel="noopener ugc nofollow" target="_blank"> PushShift API </a>。该API有几个有用的特性，例如:</p><ul class=""><li id="bbc8" class="lx ly it kh b ki kj km kn kq lz ku ma ky mb lc mc md me mf bi translated"><strong class="kh iu">获取特定日期范围的数据</strong></li><li id="e0fc" class="lx ly it kh b ki mg km mh kq mi ku mj ky mk lc mc md me mf bi translated"><strong class="kh iu">评论搜索</strong> <em class="ld">(在特定子编辑中包含特定搜索词的评论)</em></li><li id="0d0c" class="lx ly it kh b ki mg km mh kq mi ku mj ky mk lc mc md me mf bi translated"><strong class="kh iu">汇总数据</strong> <em class="ld">(在某一日期向包含关键字的子编辑提交的数量)</em></li></ul><p id="bb69" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">首先，我们将利用<a class="ae lw" href="https://requests.readthedocs.io/en/master/user/quickstart/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh iu">请求</strong> </a>模块。如果您尚未安装，您可以使用以下功能进行安装:<strong class="kh iu"> <em class="ld"> pip安装请求</em> </strong></p><p id="1d1d" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">完成后，我们可以导入模块，并通过发送请求来获取我们想要的数据。PushShift API主要有两个主要端点:</p><ul class=""><li id="bb6d" class="lx ly it kh b ki kj km kn kq lz ku ma ky mb lc mc md me mf bi translated">/Reddit/搜索/评论</li><li id="7f8b" class="lx ly it kh b ki mg km mh kq mi ku mj ky mk lc mc md me mf bi translated">/Reddit/搜索/提交</li></ul><p id="0172" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">注释的全部参数可在<a class="ae lw" href="https://github.com/pushshift/api" rel="noopener ugc nofollow" target="_blank"> PushShift Github </a>上找到。</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ml"><img src="../Images/dae7de761ad47fdaaaaaa002b8924078.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MyitIih7nevPYU4oKaevlQ.png"/></div></div></figure><p id="a494" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们从收集最近的100条评论开始，按照搜索条件降序排列:“covid”属于“news”子编辑。注意，我们使用上面提到的搜索参数包含了关键字。</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mq"><img src="../Images/fb060e3f1b772efb2a054a3406a6d97f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*39zuVINBp7wCHoUIlNMGaQ.png"/></div></div></figure><p id="d3c6" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果您正在使用请求模块，了解几个有助于识别请求是否成功的状态代码是有益的。一些常见的状态代码有:</p><ul class=""><li id="8546" class="lx ly it kh b ki kj km kn kq lz ku ma ky mb lc mc md me mf bi translated"><strong class="kh iu"> 200 </strong>(请求成功)</li><li id="828c" class="lx ly it kh b ki mg km mh kq mi ku mj ky mk lc mc md me mf bi translated">401 (未授权)</li><li id="a9a5" class="lx ly it kh b ki mg km mh kq mi ku mj ky mk lc mc md me mf bi translated"><strong class="kh iu"> 404 </strong>(未找到)</li><li id="da74" class="lx ly it kh b ki mg km mh kq mi ku mj ky mk lc mc md me mf bi translated"><strong class="kh iu"> 500 </strong>(内部服务器错误)</li></ul><p id="2cda" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">正如我们所看到的，我们的请求返回了状态代码200，表明这是一个成功的请求。我们的数据以JSON格式返回给我们。</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mr"><img src="../Images/3ad79ad82bb445f039fe2be603f7a36d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cE54OD2jTPekjf86tkfCNg.png"/></div></div></figure><p id="d83a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">当处理JSON类型的数据时，我们可以将其规范化并转换为数据框架，以便进一步处理或将数据导出为CSV文件。</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ms"><img src="../Images/c09ea531b8b13357ef95cf8ccd42553d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QwMV7pYe0jYaBZcTkRXJOw.png"/></div></div></figure><p id="ddff" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">从这里开始，我们可以处理我们感兴趣的专栏，例如，查看我们获得的评论的主体。</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mr"><img src="../Images/6ac1f3e34a1e96525d5ad66365e10b52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9KWEUk5pjGXZtMJU2mpMTg.png"/></div></div></figure><p id="f35e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">可能性是无限的，您可以使用前面提到的参数进行试验。例如，通过应用代码来预处理和清理我上一篇文章中使用的数据，我们甚至可以创建一个单词云图像，如本文开头所示！</p><h2 id="0f6b" class="mt mu it bd mv mw mx dn my mz na dp nb kq nc nd ne ku nf ng nh ky ni nj nk nl bi translated">特定时间段内的评论:</h2><p id="98f1" class="pw-post-body-paragraph kf kg it kh b ki nm kk kl km nn ko kp kq no ks kt ku np kw kx ky nq la lb lc im bi translated">PushShift API提供的另一个有用的特性是能够在指定的时间范围内获取数据。我们可以通过使用before和after参数来做到这一点。</p><p id="6c65" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">例如，假设我们想从Cryptocurrency subreddit获得在过去30天(<em class="ld">内提到“月亮”的评论，方法是在请求URL </em>的末尾=30d后添加&amp;。如果没有指定大小，它将返回默认的25个结果。</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nr"><img src="../Images/f20195c3dc7fe1280cd7c42445331a17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*84OnSRo0cQzOZOi34Mmorg.png"/></div></div></figure><p id="82f8" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">并且假设我们想要获得在过去30和7天内提到“月亮”的评论。<em class="ld">(通过在我们的请求URL的末尾=30d后添加&amp;&amp;7d前)</em></p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ns"><img src="../Images/125b9649d885c5c51221299977285b52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fTuf3dalelV0XFeGStEBiA.png"/></div></div></figure><h2 id="6021" class="mt mu it bd mv mw mx dn my mz na dp nb kq nc nd ne ku nf ng nh ky ni nj nk nl bi translated">来自某个Reddit用户的评论:</h2><p id="79fe" class="pw-post-body-paragraph kf kg it kh b ki nm kk kl km nn ko kp kq no ks kt ku np kw kx ky nq la lb lc im bi translated">另一个很酷的特性是我们可以使用author参数。这允许我们提取特定Reddit用户的评论。例如，用户最近的30条评论:PanEst</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nt"><img src="../Images/e67e5482e1bbcf3efde7637a67c48720.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3jF_cNT11CwTX0ws-JpD4Q.png"/></div></div></figure><h1 id="4e63" class="nu mu it bd mv nv nw nx my ny nz oa nb ob oc od ne oe of og nh oh oi oj nk ok bi translated">聚集参数</h1><p id="b0ff" class="pw-post-body-paragraph kf kg it kh b ki nm kk kl km nn ko kp kq no ks kt ku np kw kx ky nq la lb lc im bi translated">为搜索提供汇总数据的另一个强大方法是使用聚合。例如，我们有兴趣查看在过去7天中提及“衰退”一词的前10个子主题。</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ol"><img src="../Images/d837b69d608f0766227920d06cff2486.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yP4A6MJh613ixGMl3XkCFg.png"/></div></div></figure><p id="607e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">除了从评论中获取数据，我们还可以从提交的内容中获取数据。</p><h2 id="a44f" class="mt mu it bd mv mw mx dn my mz na dp nb kq nc nd ne ku nf ng nh ky ni nj nk nl bi translated">使用搜索词获取提交内容</h2><p id="75f2" class="pw-post-body-paragraph kf kg it kh b ki nm kk kl km nn ko kp kq no ks kt ku np kw kx ky nq la lb lc im bi translated">例如，subreddit wallstreetbets最近提交的100篇文章中提到了“埃隆·马斯克”(elon musk)。</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nt"><img src="../Images/f69bb5b3b129c1040bee69fa20c13c72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D4UtoQS93t0PQimrztrkjw.png"/></div></div></figure><p id="c654" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这就是这篇文章的全部内容，我希望你已经学会了如何利用requests模块和另一种从Reddit评论或提交中提取数据的方法。</p></div><div class="ab cl om on hx oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="im in io ip iq"><p id="f95c" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">好奇的学习者？释放你在媒体上学习的全部潜力，用不到一杯咖啡的钱支持像我这样的作家。</p><div class="le lf gp gr lg lh"><a href="https://lzpdatascience.medium.com/membership" rel="noopener follow" target="_blank"><div class="li ab fo"><div class="lj ab lk cl cj ll"><h2 class="bd iu gy z fp lm fr fs ln fu fw is bi translated">通过我的推荐链接加入媒体——杰森·LZP</h2><div class="lo l"><h3 class="bd b gy z fp lm fr fs ln fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="lp l"><p class="bd b dl z fp lm fr fs ln fu fw dk translated">lzpdatascience.medium.com</p></div></div><div class="lq l"><div class="ot l ls lt lu lq lv jz lh"/></div></div></a></div></div></div>    
</body>
</html>