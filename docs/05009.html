<html>
<head>
<title>Python For Finance: Improve Your Stock Trading Performance with Scripting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python For Finance:使用脚本提高您的股票交易性能</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/python-for-finance-improve-your-stock-trading-performance-with-scripting-d3f32b7ac124?source=collection_archive---------13-----------------------#2020-07-29">https://levelup.gitconnected.com/python-for-finance-improve-your-stock-trading-performance-with-scripting-d3f32b7ac124?source=collection_archive---------13-----------------------#2020-07-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div class="gh gi io"><img src="../Images/c2bdfa90eed89be25012c49e94dd7f6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B4mC_5-oRIv577PXCnArzw.jpeg"/></div><figcaption class="iv iw gj gh gi ix iy bd b be z dk translated">照片由伊戈尔·沙巴林拍摄</figcaption></figure><div class=""/><blockquote class="jy jz ka"><p id="2b4b" class="kb kc kd ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你在寻找提高股票投资技巧的方法，你肯定会发现“做一些研究”是其中之一。</p></blockquote><p id="0ad7" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">是否买入、卖出或持有股票的决定通常是基于情绪做出的，这绝对不是最佳策略。为了做出平衡的选择，你需要通过权衡任何可能的决定的利弊来提高你的逻辑并减少你的情绪。做出明智决策的能力可以帮助你在竞争中领先。本文使用Python脚本语言，快速概述了一些可以用来提高股票投资技能的技巧。</p><h1 id="ca4e" class="ld le jb bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">什么时候买？</h1><p id="9fb3" class="pw-post-body-paragraph kb kc jb ke b kf mb kh ki kj mc kl km la md kp kq lb me kt ku lc mf kx ky kz ij bi translated">对于那些参与股票交易的人来说，这可能是最重要的问题之一。众所周知，股票最显著的价格波动通常发生在与公司相关的事件的前一天、当天和第二天，例如公司的年度股东大会或季度收益报告。</p><p id="fe94" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">为了实现这里提出的想法，你需要有一个收益日历，包括已知公司最重要事件的信息。你会在https://markets.businessinsider.com/earnings-calendar找到一个。下面的屏幕截图包括您应该在浏览器中看到的收益日历片段:</p><figure class="mi mj mk ml gt is gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mh"><img src="../Images/ad851dd436f8c89d2256a0ab382f92b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3N1QA5P9inx-OgsYrGrtoQ.jpeg"/></div></div></figure><p id="7a0c" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">值得注意的是，股票可能会对不在收益日历中但对公司有意义的事件做出反应。例如，可能是更换首席执行官或大型收购等。通常，这类事件不会不被媒体注意到。因此，分析新闻报道可以直接或间接地表明市场的预期。我们将在本文后面的检查新闻报道部分触及金融新闻情绪分析。</p><h1 id="71ab" class="ld le jb bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">探索股票数据</h1><p id="ddcf" class="pw-post-body-paragraph kb kc jb ke b kf mb kh ki kj mc kl km la md kp kq lb me kt ku lc mf kx ky kz ij bi translated">如果您已经浏览了上一节介绍的收益日历中的事件列表，您可能已经选择了上个月的某个事件，与某个公司相关。比方说，辉瑞公司的Q2 2020年收益计划于7月28日公布。所以，现在让我们研究一下这家公司7月27日和7月28日的股价，看看股票是否对这一事件做出了反应。</p><p id="bb55" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">使用Python，可以使用像Yahoo Finance API这样的API来实现对某个公司的股票价格进行操作。</p><pre class="mi mj mk ml gt mq mr ms mt aw mu bi"><span id="931d" class="mv le jb mr b gy mw mx l my mz">import yfinance as yf<br/>pfe = yf.Ticker('PFE')<br/>hist = pfe.history(period="5d") <br/>pfe_close = hist[['Close']]<br/>pfe_close.sort_values(by = 'Date', ascending=False).head(2)</span><span id="b774" class="mv le jb mr b gy na mx l my mz">Close<br/>Date <br/>2020–07–28 39.02<br/>2020–07–27 37.54</span></pre><p id="59cd" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">正如你所看到的，股票在一天内增长了大约4%。</p><h1 id="aad1" class="ld le jb bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">你的投资真的有利可图吗？</h1><p id="94fe" class="pw-post-body-paragraph kb kc jb ke b kf mb kh ki kj mc kl km la md kp kq lb me kt ku lc mf kx ky kz ij bi translated">乍一看，这个问题的答案似乎非常明显:如果你成功地卖出了高于买入的价格，那么这个操作可以被认为是有利可图的。然而在现实生活中，没有人使用这样简单的逻辑。如果你得到的利润和你投资其他股票的利润差不多，会怎么样？你还能认为你的投资有利可图吗？或许，如果一项投资能让你获得比S&amp;P500指数更高的回报，它就可以被认为是有利可图的。</p><h1 id="cfe6" class="ld le jb bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">与S&amp;P500指数核对</h1><p id="0acf" class="pw-post-body-paragraph kb kc jb ke b kf mb kh ki kj mc kl km la md kp kq lb me kt ku lc mf kx ky kz ij bi translated">因此，检查与S&amp;P500指数是一个很好的方法来衡量你的股票业务的盈利能力。首先，你如何获得指数数字？下面的代码解决了这个问题，获得了上个月的S&amp;P500数据:</p><pre class="mi mj mk ml gt mq mr ms mt aw mu bi"><span id="f09f" class="mv le jb mr b gy mw mx l my mz">import pandas_datareader.data as pdr<br/>from datetime import date, timedelta, datetime<br/>end = date.today()<br/>start = datetime(year=end.year, month=end.month-1, day=end.day ) <br/>spx_index = pdr.get_data_stooq('^SPX', start, end)</span></pre><p id="64ac" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">要在图上查看S&amp;P500指数上个月的数字，可以生成如下图:</p><pre class="mi mj mk ml gt mq mr ms mt aw mu bi"><span id="156d" class="mv le jb mr b gy mw mx l my mz">import matplotlib.pyplot as plt<br/>plt.title(‘The last month price history for S&amp;P500 Index’)<br/>plt.plot(spx_index[‘Close’]) <br/>plt.show()</span></pre><figure class="mi mj mk ml gt is gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/8efc9083695ca1928b93a273452546dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*-zi53q0KUooKDfSiEZDeBQ.jpeg"/></div></figure><p id="47d6" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">现在让我们来看看S&amp;P500指数的变化与同一时期(上个月)辉瑞股价的变化之间的关系:</p><pre class="mi mj mk ml gt mq mr ms mt aw mu bi"><span id="5cdf" class="mv le jb mr b gy mw mx l my mz">import yfinance as yf<br/>pfe = yf.Ticker('PFE')<br/>hist = pfe.history(period="1mo") <br/>pfe_close = hist[['Close']]</span></pre><p id="70ac" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">为方便起见，将这些图合并成一个数据帧会很有趣:</p><pre class="mi mj mk ml gt mq mr ms mt aw mu bi"><span id="66dc" class="mv le jb mr b gy mw mx l my mz">stock_vs_snp = pfe_close.join(spx_index[‘Close’], how=’left’, lsuffix='_stock', rsuffix='_index').dropna()<br/>stock_vs_snp.sort_values(by = 'Date', ascending=False).head(5)</span><span id="60e6" class="mv le jb mr b gy na mx l my mz">Close_stock Close_index<br/>Date <br/>2020–07–28 39.02 3218.44<br/>2020–07–27 37.54 3239.41<br/>2020–07–24 37.66 3215.63<br/>2020–07–23 38.41 3235.66<br/>2020–07–22 38.56 3276.02</span></pre><p id="fa86" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">下面的图显示股票价格的增长与指数相当:</p><pre class="mi mj mk ml gt mq mr ms mt aw mu bi"><span id="f864" class="mv le jb mr b gy mw mx l my mz">import matplotlib.pyplot as plt<br/>import seaborn as sns</span><span id="e59f" class="mv le jb mr b gy na mx l my mz">ax=sns.lineplot(data=stock_vs_snp['Close_index'], color="r",label='S&amp;P500 close figures')<br/>ax2 = plt.twinx()<br/>sns.lineplot(data=stock_vs_snp['Close_stock'], color="g", ax=ax2, label='Pfizer stock price figures')<br/>plt.show()</span></pre><figure class="mi mj mk ml gt is gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nc"><img src="../Images/5caab4d7c93f468dae3442b7c2b9b426.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O7qwcWx3QHAJnr1y9bdx1w.jpeg"/></div></div></figure><p id="64e9" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">关于S&amp;P500指数的更全面的讨论，你可能也想看看这篇文章。</p><h1 id="6ff4" class="ld le jb bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">股票还是黄金？</h1><p id="ed78" class="pw-post-body-paragraph kb kc jb ke b kf mb kh ki kj mc kl km la md kp kq lb me kt ku lc mf kx ky kz ij bi translated">使用标准普尔500和道琼斯指数并不是衡量股票投资盈利能力的唯一方法。黄金是另一种选择。通过Quandl库，你可以查询伦敦的黄金价格，这是全球公认的国际黄金定价标准。</p><pre class="mi mj mk ml gt mq mr ms mt aw mu bi"><span id="6570" class="mv le jb mr b gy mw mx l my mz">import quandl<br/>from datetime import date, timedelta, datetime<br/>end = date.today()<br/>start = datetime(year=end.year, month=end.month-1, day=end.day ) <br/>london_fixing_gold_price = quandl.get("LBMA/GOLD",start_date=start, end_date=end, authtoken=&lt;your auth token&gt;)</span><span id="d859" class="mv le jb mr b gy na mx l my mz">import matplotlib.pyplot as plt<br/>london_fixing_gold_price[‘USD (AM)’].plot(title="Gold Price: in USD(AM price)") <br/>plt.show();</span></pre><figure class="mi mj mk ml gt is gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nd"><img src="../Images/0fb97353df53b36172f3404e8df0fdee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e97QDwxYD5tYopOnVhAuQQ.jpeg"/></div></div></figure><p id="b7ed" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">你可以按照上一节中对S&amp;P500指数所做的那样，在上图中绘制股票曲线。</p><h1 id="78c0" class="ld le jb bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">与新闻报道核对</h1><p id="24b4" class="pw-post-body-paragraph kb kc jb ke b kf mb kh ki kj mc kl km la md kp kq lb me kt ku lc mf kx ky kz ij bi translated">情感分析是一种文本处理技术。说到投资，你可能会分析金融新闻文章的情绪，试图预测市场走势。作为Python用户，您可以利用News API()，该API允许您根据自己的请求获取最相关的新闻文章，例如，“stock”获取关于股票的文章，或者“Apple”获取关于某家公司的文章。</p><p id="5258" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">一旦你获得了一组相关的文章，你就可以自动计算出他们的情绪是积极的、消极的还是中性的。由于情绪是用数字表达的，你可以将它与S&amp;P500指数进行比较，以了解它与真实市场的关系。</p><figure class="mi mj mk ml gt is gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ne"><img src="../Images/19fa23687f4b8369cedb0ae04b13fd56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*kMm4nAHhn1rK7rL9esDNLQ.jpeg"/></div></div></figure><p id="bf56" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">实现细节可以在这篇综合<a class="ae mg" href="https://medium.com/@realmistic/use-your-computer-to-make-informed-decisions-in-stock-trading-practical-introduction-part-3-7c520cf32d39" rel="noopener">文章</a>中找到。另外，如果你对Python脚本的自然语言处理技术感兴趣，可以看看这个<a class="ae mg" href="https://github.com/nlptechbook/examples" rel="noopener ugc nofollow" target="_blank">库</a>。</p><h1 id="6175" class="ld le jb bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">结论</h1><p id="dde9" class="pw-post-body-paragraph kb kc jb ke b kf mb kh ki kj mc kl km la md kp kq lb me kt ku lc mf kx ky kz ij bi translated">然而，正如在开始时提到的，本文提供了一些技巧的快速概述，您可以使用Python脚本语言来提高您的股票投资技能。如果你想看更详细的讨论，我会推荐你看看这个<a class="ae mg" href="https://medium.com/@realmistic/use-your-computer-to-make-informed-decisions-in-stock-trading-practical-introduction-part-2-832e6f67f590" rel="noopener">系列</a>。</p></div></div>    
</body>
</html>