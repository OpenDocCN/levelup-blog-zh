<html>
<head>
<title>HTTP Call Comparison: Fetch API vs Axios</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">HTTP调用比较:获取API与Axios</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/http-call-comparison-fetch-api-vs-axios-f8b3a7db3e85?source=collection_archive---------6-----------------------#2022-02-10">https://levelup.gitconnected.com/http-call-comparison-fetch-api-vs-axios-f8b3a7db3e85?source=collection_archive---------6-----------------------#2022-02-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2b69c84a5ed9fb139fd87bc6d109071c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*goLo7K4yaJmy2rjz"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">亨特·哈里特在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="d8d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我开始一个新的前端项目时，我总是争论的一件事是:我应该使用fetch API吗？还是应该用Axios？在这里，我将描述每种工具之间的区别，以便您可以做出使用哪种工具的明智决定。</p><p id="94fe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们先回顾一下每个工具的基础知识，从Fetch开始。<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" rel="noopener ugc nofollow" target="_blank"> Fetch API </a>是一个内置的浏览器API，用于从服务器获取数据。如果你有使用<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest" rel="noopener ugc nofollow" target="_blank"> XMLHttpRequest </a>的经验，那么这个API基本上就是它的简单版本。下面是这个API的示例代码。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" rel="noopener ugc nofollow" target="_blank"> MDN网络文档</a></figcaption></figure><figure class="lb lc ld le gt jr gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/305532661f544596ae4887ac4d13bb3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:376/format:webp/1*mgiirrBwDIqrmKI7qf5Mew.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://axios-http.com/" rel="noopener ugc nofollow" target="_blank">https://axios-http.com/</a></figcaption></figure><p id="2391" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在来说说Axios。像Fetch API一样，<a class="ae kc" href="https://axios-http.com/docs/intro" rel="noopener ugc nofollow" target="_blank"> Axios </a>是一个用于从服务器获取数据的NPM库。如果Fetch API只能用在浏览器端，那么Axios可以用在浏览器端和服务器端。这是因为每一侧获取数据的方法不同。在浏览器端，它使用<strong class="kf ir"> XMLHttpRequest </strong>。而在服务器端，它使用<a class="ae kc" href="https://nodejs.org/api/http.html" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">http</strong></a><strong class="kf ir"/>模块。下面是这个API的示例代码。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://axios-http.com/docs/example" rel="noopener ugc nofollow" target="_blank"> Axios文档</a></figcaption></figure><p id="77dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意，Axios需要使用单个承诺来获取数据体，而Fetch API使用双承诺风格。这是因为一旦接收到响应的读取器，Fetch API就会返回。然后API需要等待直到主体被加载，因此出现了双承诺风格。</p><p id="ceb8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，让我们来谈谈这两种工具在各个方面的区别。下面是我们将要讨论的方面的列表:</p><ul class=""><li id="4d34" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la ln lo lp lq bi translated">一般</li><li id="a898" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated">错误处理</li><li id="da7a" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated">和睦相处</li><li id="feba" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated">超时</li><li id="b631" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated">截击机</li></ul><h1 id="cb30" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">一般</h1><p id="7866" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">好的，让我们从一般的区别开始。我们之前讨论过Fetch API使用双承诺，而Axios只是单承诺。Axios的single promise让它对于机身不是那么大的用例来说更加方便。如果您的用例只是交换简单的JSON数据，那么Axios可能对您更方便。但是如果你要发送一个像图像这样的大数据，那么你可以试试Fetch API，看看它是否适合你。</p><p id="d9f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以聚合填充Fetch API，使它像Axios一样是一个单一的promise风格。下面的代码是Fetch API的单承诺风格。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://stackoverflow.com/a/32731381/17814122" rel="noopener ugc nofollow" target="_blank"> StackOverflow </a></figcaption></figure><p id="6c31" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一个值得一提的是Fetch API是内置的，而Axios是一个额外的依赖。如果您想让您的应用程序更轻便，那么Fetch API可能更适合您。</p><h1 id="36f9" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">错误处理</h1><p id="16ee" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">获取数据时，总有可能会引发一些错误。诸如无效凭证、找不到URL或者甚至服务器错误之类的错误是必须处理的错误可能性。在Fetch API中，为了检查请求是否无效，我们可以通过查看<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/API/Response/ok" rel="noopener ugc nofollow" target="_blank"> Response.ok </a>属性来进行检查。如果响应在200–299的范围内，该属性将返回<code class="fe mz na nb nc b">true </code>，否则返回<code class="fe mz na nb nc b">false </code>。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/API/Response/ok" rel="noopener ugc nofollow" target="_blank"> MDN网络文档</a></figcaption></figure><p id="0513" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而对于Axios，它的错误处理类似于其他基于承诺的对象:使用<code class="fe mz na nb nc b">catch</code>处理程序。所有失败的请求都将被拒绝，并且可以使用该处理程序进行匹配。以下示例是来自<a class="ae kc" href="https://axios-http.com/docs/handling_errors" rel="noopener ugc nofollow" target="_blank"> Axios docs </a>的官方示例。我们可以看到，在示例中，错误处理可以分为3类:</p><ul class=""><li id="5cc4" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la ln lo lp lq bi translated">响应错误:状态代码超出200–299范围。</li><li id="606a" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated">请求出错:已发出请求，但未收到响应。</li><li id="3744" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated">其他类型的错误:无法发送请求。</li></ul><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://axios-http.com/docs/handling_errors" rel="noopener ugc nofollow" target="_blank"> Axios文档</a></figcaption></figure><h1 id="3726" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">和睦相处</h1><p id="9698" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">接下来，我们来讨论一下浏览器的兼容性。与<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API#browser_compatibility" rel="noopener ugc nofollow" target="_blank">获取API兼容性</a>相比，Axios与浏览器的早期版本更加兼容。这是因为，在浏览器端，Axios利用了XMLHttpRequest。如果你在<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest" rel="noopener ugc nofollow" target="_blank"> XMLHttpRequest文档</a>上看到，这个功能与早期的浏览器版本兼容。这意味着当您使用Fetch API时，您必须了解它可能无法在某些早期版本上运行。在大多数情况下，这应该没有问题，因为没有多少人不更新他们的浏览器。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/b6a4ed781d90fc80359bd171f28f5df1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z9CBj0h43l9LBolwsrJ9Lg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest" rel="noopener ugc nofollow" target="_blank"> XMLHttpRequest浏览器兼容性</a></figcaption></figure><h1 id="2e4d" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">超时</h1><p id="7691" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">当您的请求意外地花了很长时间来处理时，您可能希望早点结束它，这样用户就可以知道有什么地方出错了。为了实现这一点，我们在使用的获取工具中需要超时功能。在Axios中，这个功能已经存在。这就像在请求配置中添加<code class="fe mz na nb nc b">timeout</code>属性一样简单。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="4e82" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而对于Fetch API，没有内置的功能。但在较新的浏览器版本中，有一个我们可以使用的名为<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/API/AbortController" rel="noopener ugc nofollow" target="_blank">abort controller</a>的接口。简单地说，AbortController是一个接口，我们可以用它来中止仍在运行的获取请求。该接口的使用示例如下所示。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div></figure><h1 id="2140" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">截击机</h1><p id="942e" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">Axios具有广泛的功能。在我看来，最重要的功能之一是拦截器功能。该功能将在运行之前拦截您的请求和响应。这可以用于很多事情，比如日志记录、钩子调用或添加头。拦截器的样本代码可以在下面看到，摘自<a class="ae kc" href="https://axios-http.com/docs/interceptors" rel="noopener ugc nofollow" target="_blank"> Axios官方文档</a>。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://axios-http.com/docs/interceptors" rel="noopener ugc nofollow" target="_blank"> Axios文档</a></figcaption></figure><h1 id="90e2" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">关闭</h1><p id="fab7" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">所以对比就这样了。总的来说，我个人更喜欢在我的项目中使用Axios，以防我需要它们的额外功能。但是如果您有一个特定的用例，您认为您需要使用Fetch API，那么就继续使用它。它们都是成熟的工具，当你有关于它们的问题时，你可以问很多人，所以选择任何一种工具都不会错。</p><p id="8fc5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大家好，我是Adyaksa，我写的是软件开发和我的语言学习经历。我计划每周发布一篇博客，内容是我在做兼职项目时发现的一些有趣的事情。如果你感兴趣，你可以关注我来了解它的最新情况！</p><p id="a8a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">资源:</strong></p><ul class=""><li id="5b4c" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la ln lo lp lq bi translated"><a class="ae kc" href="https://blog.logrocket.com/axios-vs-fetch-best-http-requests/" rel="noopener ugc nofollow" target="_blank">https://blog . log rocket . com/axios-vs-fetch-best-http-requests/</a></li><li id="53cb" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><a class="ae kc" href="https://stackoverflow.com/questions/32721850/why-is-the-response-object-from-javascript-fetch-api-a-promise" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/32721850/why-the-response-object-from-JavaScript-fetch-API-a-promise</a></li><li id="6ba4" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><a class="ae kc" href="https://stackoverflow.com/questions/46946380/fetch-api-request-timeout" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/46946380/fetch-API-request-time out</a></li></ul></div></div>    
</body>
</html>