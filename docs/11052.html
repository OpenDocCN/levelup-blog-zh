<html>
<head>
<title>Swift| Property Observers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift|物业观察员</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/swift-property-observers-3c687f6197e1?source=collection_archive---------14-----------------------#2022-02-10">https://levelup.gitconnected.com/swift-property-observers-3c687f6197e1?source=collection_archive---------14-----------------------#2022-02-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="20ff" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">属性第3部分</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a127763bb1493fa6d2653980b7650bc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p0POT9P-aOb-zTORVvhwMA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">弗雷德里克·马歇尔在<a class="ae kv" href="https://unsplash.com/s/photos/observe?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="492a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">属性观察者观察属性值的变化并对其做出响应。可以添加属性观察器来定义除惰性存储属性之外的存储属性。</p><p id="ab73" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以为属性定义以下观察者:</p><ul class=""><li id="3456" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">willSet =在保存值之前调用</li><li id="9728" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">didSet =保存新值后立即调用</li></ul><h2 id="cde2" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">威尔塞特</h2><p id="11fe" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">如果设置了willSet观察器，新属性的值将作为常量参数传递。作为willSet实现的一部分，您可以为此常量参数指定一个名称。如果不选择设置参数名，可以使用默认参数<strong class="ky ir"> newValue </strong>。</p><h2 id="2a4a" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">didSet</h2><p id="e762" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">类似地，如果您是didSet观察者，则传递一个包含先前属性值的常量参数。可以给参数命名，也可以使用默认的参数名<strong class="ky ir"> oldValue </strong>。当您在自己设置的观察器中为属性赋值时，您分配的新值将被您刚刚设置的值替换。</p><h1 id="7391" class="ne mh iq bd mi nf ng nh ml ni nj nk mo jw nl jx mr jz nm ka mu kc nn kd mx no bi translated"><strong class="ak">例子</strong></h1><p id="2179" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">当试图只通过描述来理解属性观察者的概念时，可能会有点混乱，所以这里有一个例子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="b99f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们初始化，看看会发生什么</p><pre class="kg kh ki kj gt nr ns nt nu aw nv bi"><span id="f914" class="mg mh iq ns b gy nw nx l ny nz">var person = Person(name: "Elizabeth",age: 20)</span></pre><p id="c0c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">什么都没发生。首次初始化实例时，不会调用属性观察器。</p><p id="f79d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们将年龄更改为一个更大的值，并调用willSet和didSet</p><pre class="kg kh ki kj gt nr ns nt nu aw nv bi"><span id="c108" class="mg mh iq ns b gy nw nx l ny nz">person.age = 120</span><span id="9b80" class="mg mh iq ns b gy oa nx l ny nz">//age will be set to 120<br/>//100 years has been added</span></pre><p id="6864" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如前所述，willSet在我们设置一个值之前被调用。所以它看起来像下面这样</p><pre class="kg kh ki kj gt nr ns nt nu aw nv bi"><span id="1db2" class="mg mh iq ns b gy nw nx l ny nz">willSet → person.age = 20 → didSet </span></pre><p id="8417" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，如果我们将age改为一个更小的值，didSet将不会被调用，因为它不满足条件</p><pre class="kg kh ki kj gt nr ns nt nu aw nv bi"><span id="f5a1" class="mg mh iq ns b gy nw nx l ny nz">person.age = 0<br/>//age will be set to 0</span></pre><h1 id="b87c" class="ne mh iq bd mi nf ng nh ml ni nj nk mo jw nl jx mr jz nm ka mu kc nn kd mx no bi translated">新值和旧值关键字</h1><p id="d016" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">newValue用作willSet的参数，oldValue用作didSet的参数。如果你不选择写参数，你可以用这些关键字来指示它们</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure></div><div class="ab cl ob oc hu od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ij ik il im in"><p id="1fc4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是本节所观察到的全部性质。谢谢你阅读我的博客。如果你有任何问题，请让我知道。</p></div></div>    
</body>
</html>