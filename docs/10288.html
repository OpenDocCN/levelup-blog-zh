<html>
<head>
<title>Assertions in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中的断言</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/assertions-in-swift-a0ef807f6c25?source=collection_archive---------16-----------------------#2021-11-17">https://levelup.gitconnected.com/assertions-in-swift-a0ef807f6c25?source=collection_archive---------16-----------------------#2021-11-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="078b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">何时、何地以及如何使用它们</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/ecb3188ce6a4ce9a234b1aa5c5ae2bcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*AbfgoQkZx8efHKptizIS3g.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">克里斯多夫·伯恩斯在<a class="ae ku" href="https://unsplash.com/s/photos/digital?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="5ed4" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">第一个真正的IDE于1991年问世。它是微软Visual Basic平台的一部分。苹果在2003年用了十几年才赶上Xcode。当然，集成开发环境的标准或者一些人会争论集成调试环境。调试是程序员至少要花一半时间去做的事情。当然，也有人说程序员可以花多达50%的时间来编写程序——尽管我很难相信这个事实，此外，如果两者都是真的，什么时候会没有时间来编码呢？</p><p id="767d" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">基于这种想法，一个叫詹姆斯·高斯林(Java编程语言的发明者)的人提出了一个想法，用一个叫做assert的语句将两个相当耗时的任务结合起来。断言是一段代码，它既是测试的手段，也是记录的手段。这是一个肯定会被复制到Swift中的语言特性。</p><h2 id="5672" class="lr ls it bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">断言</h2><p id="7faf" class="pw-post-body-paragraph kv kw it kx b ky mk ju la lb ml jx ld le mm lg lh li mn lk ll lm mo lo lp lq im bi translated">在这两种语言中，断言都是最基本的形式，它们不仅测试一个值，而且与“if语句”不同，有效地记录了关于它的假设。不仅如此，在XCode环境中，它们被视为注释。只在调试模式下编译时包含在二进制文件中，而不会包含在生产代码中——尽管这还不是全部。与我一起了解更多信息。</p><h2 id="a413" class="lr ls it bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">基本语法</h2><p id="08e8" class="pw-post-body-paragraph kv kw it kx b ky mk ju la lb ml jx ld le mm lg lh li mn lk ll lm mo lo lp lq im bi translated">在这个例子中，你有一个启动游戏的视图，它在第十行有一个断言，声明当调用returnMembers方法时，至少应该返回两个玩家，但正如你在这里看到的，情况并非如此。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="8b7c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">理解这一点很重要，这不是一个if语句，而是一个断言。一个不会被编译成产品代码的断言<strong class="kx iu">。所以你应该把它发布到应用商店。在调试模式下，这段代码将停止您的应用程序，因此您可以修复它。在生产中它什么都不会。</strong></p><h2 id="10d2" class="lr ls it bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">下一级语法</h2><p id="8d86" class="pw-post-body-paragraph kv kw it kx b ky mk ju la lb ml jx ld le mm lg lh li mn lk ll lm mo lo lp lq im bi translated">断言联盟中的下一个是这个，我认为它需要在编码学校中教授。继续游戏主题，我的代码要求返回等级值。因为我确信你知道switch语句必须覆盖所有可能的值，所以即使知道你四级不能存在，它也坚持某些东西必须在缺省下。那么，还有什么比断言这个值是不可能的更好的呢？代码将再次进入调试版本，但不是生产。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mp mq l"/></div></figure><h2 id="32b6" class="lr ls it bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">终端语法</h2><p id="3aa8" class="pw-post-body-paragraph kv kw it kx b ky mk ju la lb ml jx ld le mm lg lh li mn lk ll lm mo lo lp lq im bi translated">调试库中的最终断言如下所示。同样，记住这只在调试模式下有效，所以调用stopEverything在你的生产应用程序中什么也不做，显然只在调试时使用。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mp mq l"/></div></figure><h2 id="23b9" class="lr ls it bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">新语法</h2><p id="1e0e" class="pw-post-body-paragraph kv kw it kx b ky mk ju la lb ml jx ld le mm lg lh li mn lk ll lm mo lo lp lq im bi translated">但是swift中的故事并没有就此结束，因为设计者希望类似的东西<strong class="kx iu">能够进入产品代码</strong>，所以他们提出了两个原语，做了和我刚才举例说明的最后两个断言相同的事情。</p><ul class=""><li id="5871" class="mr ms it kx b ky kz lb lc le mt li mu lm mv lq mw mx my mz bi translated">前提条件就像断言，但是只有当你确定某事为真时，它才会进入你的产品构建</li><li id="4ff6" class="mr ms it kx b ky na lb nb le nc li nd lm ne lq mw mx my mz bi translated">预处理失败意味着总是让你的代码崩溃，即使是在产品中——这对于在正常情况下不应该发生的情况是有利的。</li></ul><h2 id="d8e1" class="lr ls it bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">最后</h2><p id="aee3" class="pw-post-body-paragraph kv kw it kx b ky mk ju la lb ml jx ld le mm lg lh li mn lk ll lm mo lo lp lq im bi translated">你得到的这个会使调试和生产代码崩溃。据我所知，其背后的想法是，你将使用它作为最后手段，以保护一些资源的完整性，否则将被破坏，所以你有效地迫使崩溃。</p><ul class=""><li id="ab65" class="mr ms it kx b ky kz lb lc le mt li mu lm mv lq mw mx my mz bi translated">无论发生什么，fatal error(“foo”)总是会崩溃</li></ul><p id="8d1e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">但是对于最后一种情况有一个警告—当您在代码中调用fatalError时，出于调试目的，您的可执行文件的路径会被复制到二进制文件本身中。您可能不希望在生产环境中广泛宣传这条路径。</p></div></div>    
</body>
</html>