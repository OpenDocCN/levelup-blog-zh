<html>
<head>
<title>Compress images with 16 lines of python code and TinyPNG API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用16行python代码和TinyPNG API压缩图像</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/compress-images-with-16-lines-of-python-code-and-tinypng-api-6ff33861cfc5?source=collection_archive---------3-----------------------#2021-09-17">https://levelup.gitconnected.com/compress-images-with-16-lines-of-python-code-and-tinypng-api-6ff33861cfc5?source=collection_archive---------3-----------------------#2021-09-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="2164" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">TinyPNG是什么？</h1><p id="c325" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><a class="ae lj" href="https://tinypng.com/" rel="noopener ugc nofollow" target="_blank">https://tinypng.com/</a></p><p id="8cf0" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">&gt; TinyPNG使用智能有损压缩技术来减小WEBP、JPEG和PNG文件的大小。通过有选择地减少图像中的颜色数量，存储数据所需的字节更少。这种效果几乎看不见，但它对文件大小有很大的影响！</p><p id="5c37" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">TinyPNG有一个web应用程序，允许我们压缩图像(最多20张图像&amp;每张最大5MB)。这很有用，但我们有时需要压缩20多张图像。</p><p id="80e8" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">最棒的是TinyPNG有多种语言的API和包。</p><p id="72c9" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">TinyPNG开发者API【https://tinypng.com/developers】T3<br/></p><p id="86ff" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">在这篇文章中，我将向你展示如何在python中使用API。</p><p id="e835" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">第一步。获取API密钥<br/>步骤2。安装pip组件<br/>步骤3。写一个脚本(少20行)<br/> Step4。运行脚本</p><h1 id="e124" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第一步。获取API密钥</h1><p id="2d80" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">转到<a class="ae lj" href="https://tinypng.com/developers" rel="noopener ugc nofollow" target="_blank">https://tinypng.com/developers</a>并键入您的姓名和电子邮件地址。你会很容易得到API密匙。</p><p id="7e1d" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">API对多达500个请求是免费的。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/ea848c3a7778a4db6919b17c1966351d.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*89G226LGTlmq5XWtD4wdCA.png"/></div></figure><h1 id="8415" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第二步。安装pip包</h1><pre class="lq lr ls lt gt lx ly lz ma aw mb bi"><span id="9848" class="mc jo iq ly b gy md me l mf mg"><br/>pip install tinify<br/></span></pre><h1 id="1d17" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第三步。写剧本</h1><p id="0167" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">添加try-except很好😜</p><p id="dd51" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">https://tinypng.com/developers/reference/python</p><p id="8b39" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">剧本超级简单。为源图像创建一个<strong class="kn ir"> src </strong>，为优化图像创建一个<strong class="kn ir"> dist </strong>。<br/>通过“glob”获取文件名，并使用<strong class="kn ir"> tinify.from_file </strong>方法将图像文件传递给TinyPng API。<br/>您可以将图像文件作为缓冲区或图像URL传递，而不是图像文件路径。</p><pre class="lq lr ls lt gt lx ly lz ma aw mb bi"><span id="d9f1" class="mc jo iq ly b gy md me l mf mg"><br/>with open(“unoptimized.jpg”, ‘rb’) as source:<br/> source_data = source.read()<br/> result_data = tinify.from_buffer(source_data).to_buffer()<br/></span><span id="6e88" class="mc jo iq ly b gy mh me l mf mg"><br/>source = tinify.from_url(“<a class="ae lj" href="https://tinypng.com/images/panda-happy.png" rel="noopener ugc nofollow" target="_blank">https://tinypng.com/images/panda-happy.png</a>")<br/>source.to_file(“optimized.png”)</span><span id="92fd" class="mc jo iq ly b gy mh me l mf mg"><strong class="ly ir">app.py</strong><br/><br/>import tinify<br/>from glob import glob<br/>import os.path<br/>tinify.key = “your_api_key”<br/>source_dir_name = ‘src’<br/>destination_dir_name = ‘dist’<br/># get all files names in directory<br/>files = glob(source_dir_name + ‘/*’)<br/># compress all files<br/>for file in files:<br/> print(‘compressing ‘ + file)<br/> source = tinify.from_file(file)<br/> file_name, ext = os.path.splitext(file)<br/> file_name = file_name.replace(source_dir_name + ‘/’, ‘’)<br/> source.to_file(destination_dir_name + “/” + file_name + “.png”)<br/>print(‘compressed all images’)<br/></span></pre><h1 id="eae8" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第四步。运行脚本</h1><p id="1d96" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在运行脚本之前，我们需要两件小事。<br/>首先，创建两个目录(src和dist)。如果你不喜欢这些目录名，你可以随意更改。</p><pre class="lq lr ls lt gt lx ly lz ma aw mb bi"><span id="4b94" class="mc jo iq ly b gy md me l mf mg"><br/>$ mkdir src dist<br/></span></pre><p id="5797" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">然后，将您想要压缩的图像文件移动到“src”目录。</p><p id="ac00" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">快到了！</p><p id="c104" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">最后，运行脚本！</p><pre class="lq lr ls lt gt lx ly lz ma aw mb bi"><span id="1d50" class="mc jo iq ly b gy md me l mf mg"><br/>$ python app.py<br/>compressing src/MoreToggles.css.png<br/>compressing src/CSSscrolshadows.jpg<br/>compressing src/CSStoTailwindCSS.png<br/>compressing src/broider.png<br/>compressing src/Tailblocks.jpg<br/>compressing src/calcolor.jpg<br/>compressing src/screenshot-rocks.png<br/>compressing src/SmoothShadow.png<br/>compressing src/Neumorphism.io.png<br/>compressed all images</span></pre><p id="baba" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">repo<br/>https://koji/tinypng _ image _ compress</p><p id="8c47" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">通常，您可以将图像文件大小缩小20–50%。</p><p id="d8fe" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">如果您喜欢轻松地使用更多功能，我推荐您查看这篇文章。</p><p id="0945" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated"><a class="ae lj" href="https://medium.com/acronis-design/how-to-optimize-images-by-using-macos-terminal-tinypng-cli-dd0bb8e67708" rel="noopener">https://medium . com/acronis-design/how-to-optimize-images-by-using-MAC OS-terminal-tiny png-CLI-DD 0 bb 8 e 67708</a></p></div></div>    
</body>
</html>