# åœ¨ GraphQL æ¨¡å¼ä¸­åµŒå¥— GitHub çš„ API

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/nesting-githubs-api-in-your-graphql-schema-bf87b96177c9>

![](img/a623cc45221cb8405a59ecb5865425db.png)

å›¾ç‰‡ä½œè€…:Aaron Ortbals

GraphQL å¾ˆæ£’ã€‚æ¯ä¸ª GraphQL ç«¯ç‚¹éƒ½åŒæ„ä½¿ç”¨ç›¸åŒçš„è¯­è¨€`{data, errors}`,è¿™ä½¿å¾—æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡å˜å¾—å®¹æ˜“ã€‚ç°åœ¨å‡è®¾ä¸¤ä¸ªå…¬å…± API éƒ½ä½¿ç”¨ GraphQL æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å“ªäº›ä¼˜åŠ¿ï¼Ÿåƒ [graphql-tools](https://www.graphql-tools.com/) è¿™æ ·çš„åŒ…ä½¿å¾—åˆå¹¶å’Œç¼åˆæ¨¡å¼å˜å¾—å®¹æ˜“ï¼Œè¿™å…è®¸å›¢é˜Ÿé€šè¿‡è¿æ¥å’Œè”åˆåŠŸèƒ½æ„å»ºä»–ä»¬çš„å­æ¨¡å¼çš„ç‹¬ç«‹éƒ¨åˆ†ã€‚ä½†æ˜¯æœ‰è‡ªå·±çš„è®¤è¯ã€é€Ÿç‡é™åˆ¶å’Œé”™è¯¯çš„ç¬¬ä¸‰æ–¹æ¨¡å¼å‘¢ï¼Ÿæ¯”å¦‚çœ‹ä¸€ä¸‹ [GitHub çš„ GraphQL API](https://docs.github.com/en/graphql/overview/explorer) ã€‚å¦‚æœèƒ½æŠŠ GitHub çš„ç«¯ç‚¹åµŒå¥—åœ¨è‡ªå·±çš„æ¨¡å¼ä¸­å²‚ä¸æ˜¯å¾ˆæ£’ï¼Ÿåœ¨ä¸€ä¸ªç®€å•çš„ GraphQL æŸ¥è¯¢ä¸­ï¼Œæ‚¨å¯ä»¥ä»æ‚¨çš„åº”ç”¨ç¨‹åºä¸­è·å¾—ç”¨æˆ·çš„å§“åï¼Œä¹Ÿå¯ä»¥ä» GitHub ä¸­è·å¾—ä»–ä»¬çš„ç®€å†:

```
# Application schema
query {
  viewer {
    name
    githubApi {
      # GitHub's schema
      query {
        viewer {
          bio
        }
      }
    }
  }
}
```

å½“ç„¶è¿™åªæ˜¯å¼€å§‹ã€‚å®¢æˆ·ç«¯å¯ä»¥æ›´æ–°ä½ çš„åº”ç”¨å’Œ GitHubï¼Œè€Œä¸éœ€è¦ä»»ä½•é¢å¤–çš„åç«¯é€»è¾‘ã€‚å¾ˆå¥½çš„å›¾è¡¨:

```
mutation ($userId: String!) {
  addFriend(userId: $userId) {
    user {
      name
      githubApi {
        mutation {
          followUser(input: {userId: $userId}) {
            user {
              bio
            }
          }
        }
      }
    }
  }
}
```

æœ‰äº† [nest-graphql-endpoint](https://github.com/ParabolInc/nest-graphql-endpoint) ï¼Œè¿™ç»ˆäºæˆä¸ºå¯èƒ½ğŸ‰ã€‚

# å•†ä¸šæ¡ˆä¾‹

ä»Šå¤©ï¼Œå»ºè®¾ä¸€ä¸ªæˆåŠŸçš„ SaaS æ„å‘³ç€åœ¨å®¢æˆ·æ‰€åœ¨çš„åœ°æ–¹ä¸ä»–ä»¬è§é¢â€”â€”é›†æˆä»–ä»¬å·²ç»ä½¿ç”¨çš„å·¥å…·ã€‚æˆ‘å·²ç»ä¸º Slack å’Œ Atlassian æ„å»ºäº†é›†æˆï¼Œä½†æ˜¯åœ¨æ„å»º GitHub é›†æˆæ—¶ï¼Œæˆ‘æ³¨æ„åˆ°æˆ‘åœ¨é‡æ–°åˆ›å»º GitHub çš„ API å·²ç»å†…ç½®çš„è®¸å¤šé€»è¾‘ã€‚

ä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„[è§„åˆ’æ‰‘å…‹ä¼šè®®](https://www.parabol.co/solutions/sprint-poker)ä» GitHub è·å–å›¢é˜Ÿçš„æ‰€æœ‰æ•…äº‹ï¼Œæä¾›ä¸€ç§æœ‰è¶£çš„ã€èº«ä¸´å…¶å¢ƒçš„æ–¹å¼ç»™æ¯ä¸ªæ•…äº‹æ‰“åˆ†ï¼Œå¹¶å°†åˆ†æ•°å¯¼å‡ºåˆ° GitHubã€‚æ²¡æœ‰åµŒå¥— GitHub çš„æ¨¡å¼ï¼Œæˆ‘åˆ›å»ºäº†è‡ªå·±çš„æœ‰ä¸€ä¸ª`repos`å­—æ®µçš„`GitHubIntegration`å¯¹è±¡ã€‚è¯¥å­—æ®µæœ‰ä¸€ä¸ªå®šåˆ¶çš„`resolve`å‡½æ•°ï¼Œé€šè¿‡ä½¿ç”¨æ‰‹å†™çš„ GraphQL å­—ç¬¦ä¸²ä» GitHub è·å– reposã€‚è¿™ä¸æ˜¯å¾ˆå¥½ï¼Œæœ‰å‡ ä¸ªåŸå› :

*   è¿™æ˜¯æˆ‘å¿…é¡»ç»´æŠ¤çš„é¢å¤–ä»£ç 
*   è¯¥æŸ¥è¯¢æ²¡æœ‰æ˜ç¡®æ˜¾ç¤ºå‰ç«¯å¼€å‘äººå‘˜å“ªäº›éƒ¨ä»¶æ¥è‡ª GitHub
*   å¦‚æœæ²¡æœ‰æ•°æ®åŠ è½½å™¨ï¼Œå¤šä¸ªæŸ¥è¯¢ä¼šå¯¼è‡´å¯¹ GitHub çš„å¤šæ¬¡æå–
*   å³ä½¿æœ‰äº†æ•°æ®åŠ è½½å™¨ï¼Œå¯¹ GitHub çš„å¤šæ¬¡æå–ä¹Ÿæ˜¯ä¸å¯é¿å…çš„ï¼Œé™¤éæ¯ä¸ªæŸ¥è¯¢éƒ½æ˜¯ç›¸åŒçš„(å› æ­¤ä¼šå¯¼è‡´è¿‡åº¦æå–)

æˆ‘éœ€è¦çš„æ˜¯ä¸€ç§æ–¹æ³•ï¼Œå°†æ‰€æœ‰å‘é€åˆ° GitHub çš„ç‰‡æ®µè¿›è¡Œæ‰¹å¤„ç†ï¼Œå°†å®ƒä»¬åˆå¹¶æˆä¸€ä¸ªç½‘ç»œè¯·æ±‚ï¼Œç„¶åå†å°†å“åº”è§£ææˆç›¸åº”çš„ç‰‡æ®µã€‚ä¸ºä»€ä¹ˆè¦æ‰¹å¤„ç†ï¼Ÿå› ä¸ºåœ¨ç°å®ä¸–ç•Œä¸­ï¼ŒæŸ¥è¯¢ä¼šå˜å¾—å¾ˆå¤§&ç»å¸¸é‡å¤:

```
query {
  viewer {
    githubApi {
      query {
        ...Bio
      }
    }
    myTasks {
      user {
        githubApi {
          query {
            ...Bio
            viewer {
              bio
              id
            }
          }
        }
      }
    }
  }
}fragment Bio on _extGitHubQuery {
  viewer {
    bio
  }
}
```

# å·¥ä½œåŸç†:nest-graphql-endpoint

è€ƒè™‘åˆ°æ‰€æœ‰è¿™äº›å¤æ‚æ€§ï¼Œæˆ‘éœ€è¦ä¸€ç§æ–¹æ³•ï¼Œåªç”¨ä¸€è¡Œä»£ç å°±èƒ½åœ¨æˆ‘çš„æ¨¡å¼ä¸­åµŒå¥—ç«¯ç‚¹:

```
const mergedSchema = nestGitHubEndpoint({
  parentSchema,
  fieldName: 'githubApi',
  parentType: 'User',
  resolveEndpointContext: (source) => ({accessToken: source.accessToken})
})
```

å°±æ˜¯è¿™æ ·ï¼æ‚¨çš„`User`å¯¹è±¡ç°åœ¨æœ‰äº†ä¸€ä¸ªåŒ…å«æŸ¥è¯¢ã€çªå˜å’Œé”™è¯¯çš„`githubApi`å¯¹è±¡ã€‚`resolveEndpointContext`å…è®¸æ‚¨è·å–å¹¶æä¾›è®¿é—®ç«¯ç‚¹æ‰€éœ€çš„å¯†é’¥ã€‚

åœ¨å¹•åï¼Œå®ƒæ˜¯è¿™æ ·å·¥ä½œçš„:

1.  å®ƒè·å– GitHub æ¨¡å¼å¹¶ä¸ºæ‰€æœ‰çš„`__typename`å­—æ®µæ·»åŠ å‰ç¼€ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥ç¼–å†™æŸ¥è¯¢ï¼Œè€Œä¸ç”¨æ‹…å¿ƒå‘½åå†²çª
2.  å®ƒæ”¶é›†äº†`gitHubApi`å¯¹è±¡ä¸­çš„æ‰€æœ‰ç‰‡æ®µ&å¹¶å°†å®ƒä»¬åˆå¹¶æˆä¸€ä¸ªæŸ¥è¯¢
3.  å®ƒåˆ é™¤äº†æœªä½¿ç”¨çš„å˜é‡ã€å˜é‡å®šä¹‰å’Œç‰‡æ®µ
4.  å®ƒå–æ¶ˆäº†`__typename`å­—æ®µçš„å‰ç¼€ï¼Œè¿™æ · GitHub å°±èƒ½ç†è§£è¿™ä¸ªæŸ¥è¯¢
5.  åœ¨åç§°å†²çªçš„æƒ…å†µä¸‹ï¼Œå®ƒä¼šåœ¨è·å–è¯·æ±‚ä¹‹å‰ç»™å­—æ®µèµ·åˆ«å
6.  å®ƒå–æ¶ˆå“åº”çš„åˆ«åï¼Œé‡æ–°åº”ç”¨`__typename`å‰ç¼€ï¼Œå¹¶é€šè¿‡è·¯å¾„è¿‡æ»¤é”™è¯¯

è®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å»ºé€ çš„ã€‚

# æ„å»º GitHub æ¨¡å¼

GitHub æä¾›äº†ä¸€ä¸ªå¾ˆæ£’çš„åŒ…å«åš[@ octo kit/graph QL-schema](https://github.com/octokit/graphql-schema)ã€‚å®ƒæä¾›äº†ä¸€ä¸ª GitHub æ¨¡å¼ï¼Œä¿è¯æ˜¯æœ€æ–°çš„ï¼Œæ‰€ä»¥æˆ‘ä¸éœ€è¦å¼‚æ­¥è·å–è‡ªçœæ¨¡å¼ã€‚ç„¶åï¼Œæˆ‘ä½¿ç”¨ [graphql-tools](https://www.graphql-tools.com/) ' `wrapSchema`åˆ°[ç”¨æˆ‘çš„å‰ç¼€](https://github.com/mattkrick/nest-graphql-endpoint/blob/main/src/nestGraphQLEndpoint.ts#L44)é‡å‘½åç±»å‹ã€‚`wrapSchema`å†…éƒ¨å¢åŠ ä¸€ä¸ªä»£ç†è§£æå™¨ï¼Œè°ƒç”¨ä»–ä»¬çš„`delegateToSchema`å‡½æ•°ã€‚ç”±äºæˆ‘ä»¬è‡ªå·±å¤„ç†æ‰€æœ‰çš„è·å–ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨é»˜è®¤çš„ GraphQL è§£æå™¨è¦†ç›–è¿™ä¸ªè§£æå™¨:

```
(source, _, _, info) => source[info.fieldName]
```

æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ graph QL-tools[å°†åŒ…è£…çš„æ¨¡å¼](https://github.com/mattkrick/nest-graphql-endpoint/blob/main/src/nestGraphQLEndpoint.ts#L77)åˆå¹¶åˆ°çˆ¶æ¨¡å¼ä¸­ã€‚è¿™ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„å¯¹è±¡æ‰©å±•:

```
user {
  githubApi {
    errors {...}
    query {...}
    mutation {...}
  }
}
```

è¯·æ³¨æ„ï¼Œ`errors`æ˜¯å®ƒè‡ªå·±çš„å­—æ®µï¼Œå°½ç®¡å®ƒå°†ç”±`query`æˆ–`mutation`çš„å“åº”å¡«å……ã€‚é€šè¿‡è®¾è®¡ï¼ŒGraphQL ä½¿å¾—ä¸€ä¸ªå­—æ®µä¼¼ä¹ä¸å¯èƒ½å¡«å……å¦ä¸€ä¸ªå­—æ®µçš„å“åº”ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ`errors`å­—æ®µè¿”å›ä¸€ä¸ªæ‰¿è¯º&é€šè¿‡æ”¹å˜`source`å°†`resolve`å›è°ƒæš´éœ²ç»™å…¶ä»–æ“ä½œã€‚ä½ å¯ä»¥ç§°å®ƒä¸º hackyï¼Œä½†æˆ‘è®¤ä¸ºå®ƒéå¸¸å¹²å‡€ğŸ˜ã€‚

# åˆ†æ‰¹å¤„ç†ç¢ç‰‡

åœ¨ Urqlã€Apollo å’Œ Relay Modern å‡ºç°ä¹‹å‰ï¼Œæˆ‘å†™äº†ä¸€ä¸ªç³Ÿç³•çš„ GraphQL å®¢æˆ·ç«¯ç¼“å­˜ï¼Œå«åš [Cashay](https://github.com/mattkrick/cashay) ã€‚è™½ç„¶è¿™ä¸ªé¡¹ç›®æ²¡æœ‰å–å¾—ä»»ä½•è¿›å±•ï¼Œä½†å®ƒæ•™ä¼šäº†æˆ‘å¾ˆå¤šå…³äº GraphQL AST çš„çŸ¥è¯†ã€‚ä¾‹å¦‚ï¼Œéå† AST å¾ˆç—›è‹¦ï¼Œä½†æ˜¯ GraphQL å†…ç½®äº†ä¸€ä¸ªèŠ‚ç‚¹è®¿é—®è€…å‡½æ•°ï¼

å‡è®¾æˆ‘ä»¬çš„æŸ¥è¯¢æœ‰ä¸€å †å˜é‡ï¼Œä½†å…¶ä¸­åªæœ‰ä¸€éƒ¨åˆ†éœ€è¦å‘é€åˆ° GitHubã€‚æˆ‘ä»¬å¦‚ä½•ç¡®å®šå“ªäº›å˜é‡éœ€è¦åˆ å‡ï¼Ÿè¿™å¾ˆç®€å•ï¼Œå› ä¸º:

```
const usedVariables = new Set<string>()
graphql.visit(selectionSet, {
  Variable(node) {
    usedVariables.add(node.name.value)
  },
})
```

åŒæ ·çš„æ¨¡å¼å¯ä»¥é‡å¤ç”¨äºç‰‡æ®µã€å˜é‡å®šä¹‰(çœ‹èµ·æ¥åƒ`$foo: String!, $bar: ID`çš„å—)ï¼Œç”šè‡³æ˜¯æˆ‘ä»¬åŠ å‰ç¼€çš„`__typename`å­—æ®µã€‚ä¸€æ—¦æ¯ä¸ªç‰‡æ®µéƒ½è¢«é‡æ„ä¸ºä¸€ä¸ªç‹¬ç«‹çš„æŸ¥è¯¢ï¼Œå°±åº”è¯¥å°†å°½å¯èƒ½å¤šçš„ç‰‡æ®µç»„åˆåœ¨ä¸€èµ·å¹¶è¿›è¡Œåˆå¹¶ã€‚

ä¸ºäº†å®Œæˆæ‰¹å¤„ç†ï¼Œæˆ‘ä»¬ä½¿ç”¨å…³é—­äº†ç¼“å­˜åŠŸèƒ½çš„[æ•°æ®åŠ è½½å™¨](https://github.com/mattkrick/nest-graphql-endpoint/blob/main/src/getDataLoader.ts#L9-L11)ã€‚ä¸ºä»€ä¹ˆæ²¡æœ‰ç¼“å­˜ï¼Ÿæ¯ä¸ªè¯·æ±‚éƒ½æœ‰ä¸€ä¸ªä¸å…¶ä»–è¯·æ±‚ç¨æœ‰ä¸åŒçš„æŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç‰‡æ®µå¯èƒ½è¦æ±‚`viewer {id}`ï¼Œè€Œå¦ä¸€ä¸ªç‰‡æ®µè¦æ±‚`viewer {id, bio}`ã€‚æˆ‘ä»¬*å¸Œæœ›*å°†å®ƒä»¬åˆå¹¶åœ¨ä¸€èµ·ï¼Œå¦‚æœæˆ‘ä»¬åŸºäºé”®è¿›è¡Œç¼“å­˜ï¼Œé‚£ä¹ˆå®ƒä»¬å°†è¢«åˆ†å¼€ä¿å­˜ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›[åœ¨æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ä¸­é‡ç”¨åŒä¸€ä¸ªæ•°æ®åŠ è½½å™¨](https://github.com/mattkrick/nest-graphql-endpoint/blob/main/src/getDataLoader.ts#L5)ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†æ‰€æœ‰çš„æ•°æ®åŠ è½½å™¨ä¿å­˜åœ¨ä¸€ä¸ª`WeakMap`ä¸­ï¼Œå…¶ä¸­é”®æ˜¯`context`ï¼Œå› ä¸ºæ¯æ¬¡è°ƒç”¨`GraphQL.execute`éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„`context`ã€‚é€šè¿‡ä½¿ç”¨`WeakMap`ï¼Œæˆ‘ä»¬é˜²æ­¢äº†å†…å­˜æ³„æ¼ï¼Œå› ä¸ºä¸€æ—¦`GraphQL.execute`ä¸å†å¼•ç”¨`context`ï¼Œå®ƒä¹Ÿå°†ä»`WeakMap`è¢«åƒåœ¾æ”¶é›†ã€‚

ä¸€æ—¦ä¸€ä¸ªæ»´ç­”è¿‡å»ï¼Œdataloader ç”¨ä¸€ä¸ªæŸ¥è¯¢æ•°ç»„[è°ƒç”¨å®ƒçš„æ‰¹å¤„ç†å‡½æ•°&å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›å˜é‡åˆå¹¶åœ¨ä¸€èµ·](https://github.com/mattkrick/nest-graphql-endpoint/blob/main/src/batchFn.ts#L25)ã€‚é¦–å…ˆï¼Œ[æˆ‘ä»¬åˆå¹¶æ‰€æœ‰å…·æœ‰å”¯ä¸€åç§°çš„å­—æ®µ](https://github.com/mattkrick/nest-graphql-endpoint/blob/main/src/mergeGQLDocuments.ts#L108)ã€‚ç„¶åï¼Œå¦‚æœä¸¤ä¸ªå­—æ®µå…±äº«ä¸€ä¸ªåç§°ï¼Œ[æˆ‘ä»¬æ¯”è¾ƒå®ƒä»¬çš„æ‰€æœ‰å­å­—æ®µ](https://github.com/mattkrick/nest-graphql-endpoint/blob/main/src/mergeGQLDocuments.ts#L124)ã€‚å¦‚æœä¸¤ä¸ªå­—æ®µä¸åŒï¼Œæˆ‘ä»¬[å°†å…¶ä¸­ä¸€ä¸ªå­—æ®µå‘½åä¸º](https://github.com/mattkrick/nest-graphql-endpoint/blob/main/src/mergeGQLDocuments.ts#L59-L67):

```
**# Before**
query {
  repository(name: "parabol", owner: "parabolinc") {
    id
  }
}
query {
  repository(name: "nest", owner: "mattkrick") {
    id
  }
}**# After**
query {
  repository(name: "parabol", owner: "parabolinc") {
    id
  }
  repository_2: repository(name: "nest", owner: "mattkrick") {
    id
  }
}
```

è¿™ç§ç­–ç•¥å…è®¸æˆ‘ä»¬å°†æ— é™æ•°é‡çš„ç‰‡æ®µä¸€èµ·æ‰¹å¤„ç†åˆ°ä¸€ä¸ªç½‘ç»œè¯·æ±‚ä¸­ã€‚æˆ‘ä»¬åªéœ€è¦ä¿å­˜æˆ‘ä»¬æ·»åŠ çš„åˆ«ååˆ—è¡¨ï¼Œè¿™æ ·æœ€ç»ˆçš„å“åº”çœ‹èµ·æ¥å°±åƒæ˜¯`**#Before**`è¯·æ±‚ã€‚

# å¤„ç†å“åº”

å½“ GitHub å“åº”æ—¶ï¼Œå®ƒå¯èƒ½ä¸æ˜¯ GraphQL å¯¹è±¡ã€‚GitHub [å¯èƒ½å…³é—­äº†](https://github.com/mattkrick/nest-graphql-endpoint/blob/main/src/nestGitHubEndpoint.ts#L48)ï¼Œæˆ–è€…[ç½‘å…³å¯èƒ½éœ€è¦å¤ªé•¿æ—¶é—´æ¥å“åº”](https://github.com/mattkrick/nest-graphql-endpoint/blob/main/src/nestGitHubEndpoint.ts#L37)ï¼Œæˆ–è€…å¦‚æœ auth ä»¤ç‰Œæ— æ•ˆï¼Œå®ƒå¯èƒ½åªæ˜¯å‘é€`{message}`ã€‚ä¸ºäº†å¤„ç†è¿™äº›æƒ…å†µï¼Œæ‰§è¡Œç¨‹åºç”¨ä¸€ä¸ªè¶…æ—¶&æ¥åŒ…è£…è·å–ã€‚å¦‚æœå“åº”çœ‹èµ·æ¥ä¸åƒä¸€ä¸ª`GraphQLExecutionResult`ï¼Œå®ƒå°†å¼ºåˆ¶å®ƒæˆä¸ºä¸€ä¸ªã€‚

ä¸€æ—¦æˆ‘ä»¬æœ‰äº†å½¢çŠ¶ä¸º`{data, errors}`çš„ä¸œè¥¿ï¼Œå‰©ä¸‹è¦åšçš„å°±æ˜¯[ä¸ºæ¯ä¸ªç‰‡æ®µ](https://github.com/mattkrick/nest-graphql-endpoint/blob/main/src/batchFn.ts#L54-L57)åˆ›å»ºä¸€ä¸ªå“åº”å¯¹è±¡ã€‚è¿™æ„å‘³ç€å–æ¶ˆæˆ‘ä»¬é‡å‘½åçš„å­—æ®µçš„åˆ«åï¼Œç»™`__typename`å­—æ®µé‡æ–°åŠ å‰ç¼€ï¼Œå¹¶ä¸”[é€šè¿‡ç‰‡æ®µ](https://github.com/ParabolInc/nest-graphql-endpoint/blob/main/src/filterErrorsForDocument.ts#L4-L23)è¿‡æ»¤é”™è¯¯ã€‚è¿‡æ»¤é”™è¯¯å¾ˆå®¹æ˜“ï¼Œå› ä¸ºå¤§å¤šæ•°é”™è¯¯éƒ½æœ‰ä¸€ä¸ªæ˜¾ç¤ºé”™è¯¯å‘ç”Ÿä½ç½®çš„`path`ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè·¯å¾„æ˜¯`['viewer', 'repository_2']`ï¼Œé‚£ä¹ˆæˆ‘ä»¬çŸ¥é“é”™è¯¯åº”è¯¥åªå‡ºç°åœ¨ç¬¬äºŒä¸ªç‰‡æ®µä¸­ã€‚

# ç»“è®º

åµŒå¥— GraphQL ç«¯ç‚¹æ˜¯ GraphQL ç»Ÿæ²»ä¸–ç•Œçš„ä¸‹ä¸€æ­¥ã€‚åœ¨æœªæ¥ï¼Œæ¯ä¸ªæœåŠ¡éƒ½ä½¿ç”¨ GraphQL æ¨¡å¼ï¼Œé›†æˆå°†è½»è€Œæ˜“ä¸¾åœ°å®ç°ï¼Œå¹¶ä¸”éœ€è¦æ›´å°‘çš„ä»£ç ã€‚å¬èµ·æ¥å¾ˆæœ‰è¶£ï¼Ÿæˆ‘ä»¬æ­£åœ¨æ‹›è˜ã€‚è®©æˆ‘ä»¬ä¸€èµ·åšäº›é…·çš„ä¸œè¥¿ã€‚