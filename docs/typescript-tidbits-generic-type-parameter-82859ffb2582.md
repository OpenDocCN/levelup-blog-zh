# TypeScript èŠ±çµ®â€”æ³›å‹ç±»å‹å‚æ•°

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/typescript-tidbits-generic-type-parameter-82859ffb2582>

å¶å°”ä½ å¯èƒ½ä¼šå‘ç°è‡ªå·±ç¼–å†™äº†ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥é‡‡ç”¨è®¸å¤šä¸åŒçš„ç±»å‹ã€‚Typescript å…è®¸æ‚¨ä¸ºæ­¤åˆ›å»ºä¸€ä¸ªæ³›å‹ç±»å‹å‚æ•°ã€‚

![](img/c5ab1afaea126d3b8afc7c64678679cc.png)

æ³›å‹ç±»å‹å‚æ•°æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒåœ¨å¤šä¸ªåœ°æ–¹å¼ºåˆ¶å®æ–½ç±»å‹çº§çº¦æŸã€‚å¦‚æœæˆ‘ä»¬æµè§ˆä¸€ä¸ªä¾‹å­ï¼Œè¿™æ˜¯æœ€ç®€å•çš„ã€‚

è®©æˆ‘ä»¬çœ‹çœ‹æ³›å‹çš„â€œHello worldâ€â€”â€”identity å‡½æ•°ã€‚identity å‡½æ•°åªæ˜¯è¿”å›ä¼ å…¥çš„å†…å®¹ã€‚åœ¨æ™®é€šçš„ JavaScript ä¸­ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·:

```
function identity(arg) {
  return arg
}
identity(2) // returns 2
identity("Hello") // returns "Hello"
```

åœ¨ Typescript ä¸­ç¼–å†™è¿™äº›å†…å®¹æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°è¯•ä½¿ç”¨`any`ç±»å‹æ¥æ¶µç›–æˆ‘ä»¬å¯ä»¥ä¼ å…¥çš„æ‰€æœ‰ç‰¹å®šæƒ…å†µ:

```
function identity(arg: any): any {
  return arg
}
```

å°½ç®¡è¿™æ ·åšæ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸¢å¤±äº†å¾ˆå¤šå…³äºå‡½æ•°è¿”å›ç±»å‹çš„ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ TypeScript æ²¡æœ‰å¾—åˆ°ä»»ä½•ä¸œè¥¿ã€‚

æˆ‘ä»¬å¯ä»¥é‡è½½è¿™ä¸ªå‡½æ•°ï¼Œèµ‹äºˆå®ƒå¤šç§ç±»å‹:

```
type Identity = [
  (arg: string): string
  (arg: number): number
]
function identity: Identity (arg) {
  return arg
}
```

è¯·æ³¨æ„ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘å·²ç»å°†ç±»å‹ç­¾ååˆ†å¼€ï¼Œä»¥ä½¿äº‹æƒ…æ›´æ•´æ´ã€‚è¿™ä¸ªæ–¹æ³•*å¯ä»¥*å·¥ä½œï¼Œä½†æ˜¯å®ƒè¿‡äºå†—é•¿ï¼Œå¹¶ä¸”å½“ä½ è¯•å›¾åŒ…å«æ‰€æœ‰éœ€è¦çš„ç±»å‹æ—¶ä¼šå˜å¾—æ··ä¹±ã€‚

å¹¸è¿çš„æ˜¯ï¼ŒTypeScript å…è®¸æ‚¨å®šä¹‰â€œæ³›å‹ç±»å‹å‚æ•°â€ã€‚æˆ‘ä»¬å¯ä»¥é‡å†™æˆ‘ä»¬çš„ç¤ºä¾‹æ¥åˆ©ç”¨è¿™ä¸€ç‚¹:

```
function identity<T>(arg: T): T {
  return arg
}
```

æ³¨æ„è¿™é‡Œæç¬‘çš„å°–æ‹¬å·(`<T>`)ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å¦‚ä½•å®šä¹‰ä¸€ä¸ªç±»å‹å˜é‡`T`ã€‚TypeScript å°†æŠŠä¼ é€’ç»™`identity`çš„ç±»å‹å­˜å‚¨åœ¨`T`å˜é‡ä¸­ï¼Œè¿™å…è®¸æˆ‘ä»¬åœ¨ç±»å‹ç­¾åä¸­å¼•ç”¨å®ƒã€‚

æˆ‘ä»¬ç°åœ¨å¯ä»¥ç”¨ä¸¤ç§æ–¹å¼æ¥ç§°å‘¼å®ƒã€‚

1.  æˆ‘ä»¬å¯ä»¥æ˜ç¡®æˆ‘ä»¬ä¼ å…¥çš„ç±»å‹:
    `let result = identity<string>(â€œHelloâ€) // typeof result === â€˜stringâ€™`
2.  æˆ‘ä»¬å¯ä»¥è®©ç¼–è¯‘å™¨æ¨æ–­å‡ºç±»å‹:
    `let result = identity(42) // typeof result === â€˜numberâ€™`

æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆç°åœ¨éå¸¸é€šç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥ä¸ä¸€ç³»åˆ—ç±»å‹ä¸€èµ·å·¥ä½œï¼Œä½†æ˜¯å®ƒæ¯”ä½¿ç”¨`any`æ›´ç²¾ç¡®ï¼Œå› ä¸ºæˆ‘ä»¬ä¸ä¼šä¸¢å¤±ä»»ä½•ä¿¡æ¯ã€‚

ä¸€ä¸ªæ—æ³¨â€”â€”å½“åƒè¿™æ ·å¯¹æ³›å‹ä½¿ç”¨ç±»å‹åˆ«åæ—¶:

```
type Identity<T> = {
  (arg: T): T
}
function identity: Identity (arg) {
  return arg
}
```

å½“æˆ‘ä»¬è°ƒç”¨å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬ç”¨**å’Œ**æ¥å®šä¹‰æˆ‘ä»¬çš„ç±»å‹ï¼Œå¦åˆ™æˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯:

```
let valid = identity<string>("Hello") 
// valid === "Hello"let invalid = identity("Hello") 
// Error TS2314: Generic type 'Identity' requires 1 type argument(s)
```

# çº¦æŸæˆ‘ä»¬çš„æ³›å‹ç±»å‹å‚æ•°

å‡è®¾æˆ‘ä»¬æƒ³è®©æˆ‘ä»¬çš„èº«ä»½å‡½æ•°ä¹Ÿè®°å½•å‚æ•°çš„é•¿åº¦ã€‚æˆ‘ä»¬å¯èƒ½ä¼šå¿ä¸ä½è¿™æ ·å†™:

```
function identity<T>(arg: T): T {
  console.log(arg.length)
  return arg
}
```

ç„¶è€Œï¼Œæˆ‘ä»¬çš„ç¼–è¾‘åº”è¯¥åœ¨è¿™é‡Œå¼ºè°ƒä¸€ä¸ªé”™è¯¯:

```
Property 'length' does not exist on type 'T'.
```

è¿™æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰å®šä¹‰å…·æœ‰é•¿åº¦å±æ€§çš„ç±»å‹ã€‚å¦‚æœæˆ‘ä»¬åªå¯¹ç”¨äºæ•°ç»„çš„å‡½æ•°æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»£ç æ›´æ”¹ä¸ºä»¥ä¸‹ä»£ç å¹¶æ¶ˆé™¤é”™è¯¯:

```
function identity<T>(arg: Array<T>): Array<T> {
  console.log(arg.length)
  return arg
}
```

è¿™å°†é€‚ç”¨äºä»»ä½•ç±»å‹çš„æ•°ç»„ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›å®ƒä¹Ÿèƒ½å¤„ç†ç®€å•çš„å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ¥å£:

```
interface HasLength {
  length: number
}

function identity<T extends HasLength>(arg: T): T {
  console.log(arg.length)
  return arg
}
```

ç°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨æ•°ç»„æˆ–å­—ç¬¦ä¸²æ¥è°ƒç”¨å®ƒï¼Œå®ƒä¼šåƒé¢„æœŸçš„é‚£æ ·å·¥ä½œï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬è¯•å›¾ç”¨ä¸€ä¸ªæ•°å­—æ¥è°ƒç”¨å®ƒï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸‹é¢çš„é”™è¯¯æ¶ˆæ¯:

```
Argument of type â€˜numberâ€™ is not assignable to parameter of type â€˜HasLengthâ€™.
```

## è„šæ³¨:

1.  æˆ‘ä»¬å¯ä»¥ä¸ºæˆ‘ä»¬çš„ç±»å‹å˜é‡(`T`)ä½¿ç”¨ä»»ä½•æˆ‘ä»¬å–œæ¬¢çš„åå­—ï¼Œä½†æ˜¯é€šå¸¸ä½¿ç”¨å•ä¸ªå¤§å†™å­—ç¬¦ã€‚
2.  å…è®¸ç¼–è¯‘å™¨å°½å¯èƒ½æ¨æ–­ç±»å‹é€šå¸¸æ›´å¥½ï¼Œä½†æ˜¯æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„åå¥½ã€‚

[*è·å¾—æ— é™åˆ¶çš„ä»‹è´¨*](https://richard-t-bell90.medium.com/membership)

# åˆ†çº§ç¼–ç 

æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼åœ¨ä½ ç¦»å¼€ä¹‹å‰:

*   ğŸ‘ä¸ºæ•…äº‹é¼“æŒï¼Œè·Ÿç€ä½œè€…èµ°ğŸ‘‰
*   ğŸ“°æŸ¥çœ‹[å‡çº§ç¼–ç å‡ºç‰ˆç‰©](https://levelup.gitconnected.com/?utm_source=pub&utm_medium=post)ä¸­çš„æ›´å¤šå†…å®¹
*   ğŸ””å…³æ³¨æˆ‘ä»¬:[Twitter](https://twitter.com/gitconnected)|[LinkedIn](https://www.linkedin.com/company/gitconnected)|[æ—¶äº‹é€šè®¯](https://newsletter.levelup.dev)

ğŸš€ğŸ‘‰ [**åŠ å…¥å‡çº§äººæ‰é›†ä½“ï¼Œæ‰¾åˆ°ä¸€ä»½ç¥å¥‡çš„å·¥ä½œ**](https://jobs.levelup.dev/talent/welcome?referral=true)