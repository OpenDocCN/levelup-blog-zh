<html>
<head>
<title>7 Differences Between Map Objects and Plain Objects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">7地图对象和普通对象的区别</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/7-differences-between-map-objects-and-plain-objects-9690a78fbc06?source=collection_archive---------9-----------------------#2022-03-28">https://levelup.gitconnected.com/7-differences-between-map-objects-and-plain-objects-9690a78fbc06?source=collection_archive---------9-----------------------#2022-03-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0ddd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">地图物体能代替平面物体吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ec6725680828c8c5c30aea9018e29573.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5mLamKd2h3tzFJJk4pBSBw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="5973" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在JavaScript中，普通对象和ES6的新Map都可以存储键值对，但它们之间有什么区别呢？本文将为您揭晓。</p><h1 id="ede1" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">1.初始化和使用</h1><p id="5254" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">普通对象可以直接用文字初始化，而Map需要Map()构造函数来初始化，如果想要有初始值，就需要传递一个数组或者其他元素是键值对的可迭代对象。这些键值对中的每一个都将被添加到一个新的映射中。</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="3b9a" class="mw lv it ms b gy mx my l mz na">const obj = {<br/>  name: 1,<br/>  age: 2,<br/>};<br/>const map = new Map([<br/>  ['name', 1],<br/>  ['age', 2],<br/>]);</span></pre><p id="f9b1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与普通对象相比，Map作为哈希表提供了许多有用的功能。比如判断一个键是否在哈希表中，在map中可以用<code class="fe nb nc nd ms b">has</code>方法轻松判断，但在plain对象中可能会增加复杂度。详情请参考我的<a class="ae ne" href="https://javascript.plainenglish.io/in-vs-hasown-vs-hasownproperty-in-javascript-885771d2d100" rel="noopener ugc nofollow" target="_blank">上一篇</a>。</p><p id="4f8f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">另外，<code class="fe nb nc nd ms b">set</code>方法可以为Map设置键值，<code class="fe nb nc nd ms b">get</code>方法可以获取值，size属性可以返回当前Map中键/值对的个数，而普通对象需要使用自己的方法手动计算等等。详见<a class="ae ne" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#instance_methods" rel="noopener ugc nofollow" target="_blank"> MDN </a>。</p><h1 id="1ac7" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">2.关键类型</h1><p id="b940" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">普通对象只接受字符串和符号作为键，其他类型会被强制为字符串类型，而Map可以接受任何类型的键(包括函数、对象或任何原语)。</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="14b8" class="mw lv it ms b gy mx my l mz na">const obj = {};<br/>const map = new Map();</span><span id="2b98" class="mw lv it ms b gy nf my l mz na">const key = function () {};</span><span id="e720" class="mw lv it ms b gy nf my l mz na">obj[key] = 1;<br/>map.set(key, 1);</span><span id="973d" class="mw lv it ms b gy nf my l mz na">// { 'function () {}': 1 }<br/>console.log('obj: ', obj);</span><span id="0d1b" class="mw lv it ms b gy nf my l mz na">// Map(1) { [Function: key] =&gt; 1 }<br/>console.log('map: ', map);</span></pre><h1 id="634d" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">3.意外钥匙</h1><p id="b250" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">普通对象从原型继承了很多属性键，比如构造函数等等。所以自己的键很可能与原型上的键冲突。但是默认情况下，Map不包含任何键，它只包含那些显式放入的键。</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="0275" class="mw lv it ms b gy mx my l mz na">const obj = {};<br/>const map = new Map();</span><span id="e040" class="mw lv it ms b gy nf my l mz na">console.log(obj.constructor); // ƒ Object() { [native code] }<br/>console.log(map.get('constructor')); // undefined</span></pre><h1 id="8197" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">4.关键订单</h1><p id="b7a8" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">虽然普通对象的键现在是有序的，但以前并不总是这样，而且排序很复杂。例如，如果对象中有需要转换为字符串的键，则不保留对象键的原始顺序。尽管Map以一种简单的方式排序，但它总是按照我们插入的顺序排序。</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="d2c2" class="mw lv it ms b gy mx my l mz na">const obj = {<br/>  name: 1,<br/>  age: 2,<br/>  3: 4,<br/>};</span><span id="cdbe" class="mw lv it ms b gy nf my l mz na">const map = new Map([<br/>  ['name', 1],<br/>  ['age', 2],<br/>  [3, 4],<br/>]);</span><span id="d679" class="mw lv it ms b gy nf my l mz na">// The original order is not preserved.<br/>// {3: 4, name: 1, age: 2}<br/>console.log('obj: ', obj);</span><span id="d8a1" class="mw lv it ms b gy nf my l mz na">// Map(3) { 'name' =&gt; 1, 'age' =&gt; 2, 3 =&gt; 4 }<br/>console.log('map: ', map);</span></pre><h1 id="a0d7" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">5.循环</h1><p id="33db" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">我们可以使用<code class="fe nb nc nd ms b">for...of</code>语句或Map.prototype.forEach直接迭代映射的属性，而不能直接迭代普通对象。</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="aa84" class="mw lv it ms b gy mx my l mz na">const obj = {<br/>  name: 1,<br/>  age: 2,<br/>};</span><span id="5eed" class="mw lv it ms b gy nf my l mz na">const map = new Map([<br/>  ['name', 1],<br/>  ['age', 2],<br/>]);</span><span id="0954" class="mw lv it ms b gy nf my l mz na">for (const [key, value] of map) {<br/>  console.log(`${key}: `, value); // name: 1, age: 2<br/>}</span><span id="9d5d" class="mw lv it ms b gy nf my l mz na">map.forEach((value, key) =&gt; {<br/>  console.log(`${key}: `, value); // name: 1, age: 2<br/>});</span><span id="7ea4" class="mw lv it ms b gy nf my l mz na">// Plain objects are not iterable directly.<br/>// But we can use functions like `Object.keys` to help us.<br/>Object.keys(obj).forEach((key) =&gt; {<br/>  console.log(`${key}: `, obj[key]); // name: 1, age: 2<br/>});</span></pre><p id="c6ef" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae ne" href="https://javascript.plainenglish.io/difference-between-for-of-and-for-in-7244104133bf" rel="noopener ugc nofollow" target="_blank">了解更多关于迭代对象的信息。</a></p><h1 id="ea0e" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">6.序列化和解析</h1><p id="3714" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">普通对象支持JSON序列化，但是默认情况下Map不能获得正确的数据。</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="fca0" class="mw lv it ms b gy mx my l mz na">const obj = {<br/>  name: 1,<br/>  age: 2,<br/>};</span><span id="c455" class="mw lv it ms b gy nf my l mz na">const map = new Map([<br/>  ['name', 1],<br/>  ['age', 2],<br/>]);</span><span id="c801" class="mw lv it ms b gy nf my l mz na">console.log(JSON.stringify(obj)); // "{"name":1,"age":2}"<br/>console.log(JSON.stringify(map)); // "{}"</span></pre><h1 id="c18c" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">7.表演</h1><p id="d20f" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">Map对象在涉及频繁添加和删除键-值对的场景中性能更好，而普通对象则没有得到优化。</p><h1 id="7b2c" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">结论</h1><p id="a214" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">那么平面对象是否应该用地图对象来代替呢？</p><blockquote class="ng nh ni"><p id="b29b" class="ky kz nj la b lb lc ju ld le lf jx lg nk li lj lk nl lm ln lo nm lq lr ls lt im bi translated">不，如果我们想在JSON和原始数据之间进行转换，或者包含特定的业务逻辑，那么我们应该使用普通对象。当您只想存储键值对和循环操作或者不断添加和删除属性时，使用Map对象是更好的选择。</p></blockquote><p id="79d2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然Map对象在底层也是继承了Object.prototype，但是它为我们提供了很多实用的方法来减轻我们的认知负担，比plain object更高级。</p></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><p id="0a00" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="nj">感谢阅读。如果你喜欢这样的故事，想支持我，请考虑成为</em> <a class="ae ne" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="nj">中等会员</em> </a> <em class="nj">。每月5美元，你可以无限制地访问媒体内容。如果你通过</em> <a class="ae ne" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="nj">我的链接</em> </a> <em class="nj">报名，我会得到一点佣金。</em></p><p id="f348" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你的支持对我来说非常重要——谢谢。</p></div></div>    
</body>
</html>