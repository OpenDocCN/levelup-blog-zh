<html>
<head>
<title>Intercept Errors with Angular ErrorHandler</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用角度误差处理器拦截误差</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/intercept-errors-with-angular-ce445f2e74eb?source=collection_archive---------12-----------------------#2020-02-25">https://levelup.gitconnected.com/intercept-errors-with-angular-ce445f2e74eb?source=collection_archive---------12-----------------------#2020-02-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/54fe5c08e6abaf0ad1192e75aad1635d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SqlQcdSbQya1J8hPNsN7yw.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">迈克尔·盖格在<a class="ae kf" href="https://unsplash.com/s/photos/computer-bug?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="e900" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作为开发人员，思考我们处理错误的方式很重要。当错误发生时，用户应该得到适当的通知，我们的开发者也应该得到通知，以便帮助修复错误。</p><p id="4c11" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">网络错误很容易处理，但是JavaScript错误通常是沉默的。这些错误是意想不到的，尤其让用户感到烦恼，因为他甚至没有得到关于发生了什么的通知。他可能会抱怨，但大多数时候不会向您提供详细的错误堆栈。然后你必须自己尝试重现错误，或者(这种情况经常发生)你放弃了，认为这只是一次小故障。</p><p id="a10e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该问题的解决方案是存储生产网站中发生的每个错误的堆栈。它将帮助您修复用户报告的错误，并可能发现没有人抱怨过的新错误。让我们来看看如何用Angular实现这一点。</p><h1 id="19df" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">角度误差处理器</h1><p id="05a6" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">让我们创建一个新的Angular应用程序，在主页上有一个基本错误:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="3e49" class="mq lf it mm b gy mr ms l mt mu">ng new error-logging</span></pre><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="e019" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">标题不会显示，您会在控制台中看到一个描述性很强的错误:</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mx"><img src="../Images/5bb1605d735d59aaffde6b4e78badeb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*joEl3nFMtwspl39KyGHaPw.png"/></div></div></figure><p id="0369" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">控制台中的这个错误，只要没有传到我们这里，对我们没有太大帮助。用户可能不会将它与他的错误报告一起发送，所以我们需要在错误发生时尽快将它发送给我们自己。</p><p id="c8d0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Angular让我们拦截每一个错误。为此，您需要构建自己的错误处理程序。</p><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="f390" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我称我的错误处理器<em class="my">为错误警报器</em>，因为它就是这么做的。它实现了Angular <em class="my"> ErrorHandler </em>，因此需要有一个<em class="my"> handleError </em>方法。在这种方法中，您可以按照自己的方式处理错误。我只是<em class="my">提醒</em>错误堆栈，在现实生活中，我会建议将它发送到服务器并保存在数据库中。但是后端部分不在讨论范围之内。</p><p id="b42d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我现在必须告诉Angular在我的模块中使用它:</p><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="24c1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">错误堆栈现在被<em class="my">警告。</em></p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/66c42f0b458fadd37add42ca6f7e59ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yk7jC11D7Go1Lj0gc0WnFw.png"/></div></div></figure><p id="c3ca" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">模块中发生的每一个错误(在应用程序中，如果你在根模块中提供你的错误处理器)都将被拦截。存储它们将为您提供详细的文档，并使错误修复方式更容易。您还可以利用处理程序来通知用户出现了错误。当用户看到错误信息时，通常比页面停止响应时更容易理解。</p><p id="536e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可以在这里找到完整的项目<a class="ae kf" href="https://github.com/Dornhoth/error-logging.git" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>