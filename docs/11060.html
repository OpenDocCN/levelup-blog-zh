<html>
<head>
<title>Plotting Choropleth Maps in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python绘制Choropleth地图</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/plotting-choropleth-maps-in-python-b74c53b8d0a6?source=collection_archive---------2-----------------------#2022-02-11">https://levelup.gitconnected.com/plotting-choropleth-maps-in-python-b74c53b8d0a6?source=collection_archive---------2-----------------------#2022-02-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="817e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">学习如何使用Plotly绘制choropleth地图</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/97f3a8df44fda8f3586a18ca1ca757d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NsHVE9G0nbXF4o3p"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@orbisterrae?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">gal Gaborel</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="cf53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">地图是一种非常有用的可视化技术，可以显示地理特征的汇总概要，如世界各国的人口或收入水平。在这篇文章中，我将向你展示如何使用Plotly来绘制choropleth地图。</p><blockquote class="lw lx ly"><p id="c085" class="kz la lv lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">Plotly是Python中的一个高级绘图库，用于创建交互式绘图。</p></blockquote><h1 id="a601" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">安装Plotly</h1><p id="a531" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">对于这篇文章，我将使用Jupyter笔记本。要安装Plotly，请在Juypter笔记本中使用以下命令:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="78c9" class="ne md it na b gy nf ng l nh ni">!pip install plotly</span></pre><h1 id="2463" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">绘制Choropleth地图</h1><p id="cd64" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在绘制地图之前，需要导入<code class="fe nj nk nl na b">graph_objs</code> ( <strong class="lb iu">图形对象</strong>)模块:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="123d" class="ne md it na b gy nf ng l nh ni">import plotly.graph_objs as go</span></pre><p id="0f34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后使用来自<strong class="lb iu">图形对象</strong>模块的<code class="fe nj nk nl na b">Figure</code>类来创建一个地图:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="00c0" class="ne md it na b gy nf ng l nh ni">choropleth_map = go.Figure(<br/>    data = {<br/>        'type':'choropleth',<br/>        'locationmode':'USA-states',        <br/>        'locations':['AL','CA','WA'],<br/>        'colorscale':'Portland',            <br/>        'text':['Alabama Population',<br/>                'California Population',<br/>                'Washington Population'],<br/>        'z':[5024279,39538223,7705281],                  <br/>        'colorbar':{'title':'USA Population'}<br/>    },     <br/>    layout = {<br/>      'geo':{<br/>          'scope':'usa'<br/>      }  <br/>    })</span><span id="3d8f" class="ne md it na b gy nm ng l nh ni">choropleth_map</span></pre><p id="0541" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码片段中，您向<code class="fe nj nk nl na b">Figure</code>的初始化器传递了两个参数。第一个参数是<code class="fe nj nk nl na b">data</code>，具有以下字典键和值:</p><ul class=""><li id="ca15" class="nn no it lb b lc ld lf lg li np lm nq lq nr lu ns nt nu nv bi translated"><code class="fe nj nk nl na b">type</code> —您正在创建的地图类型</li><li id="8112" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><code class="fe nj nk nl na b">locationmode</code> —可以是<code class="fe nj nk nl na b">ISO-3</code>(默认)、<code class="fe nj nk nl na b">USA-states</code>或<code class="fe nj nk nl na b">country names</code>。如果设置为<code class="fe nj nk nl na b">ISO-3</code>，那么<code class="fe nj nk nl na b">locations</code>键的值将包含三个字母的国家代码，例如<code class="fe nj nk nl na b">USA</code>代表美国，<code class="fe nj nk nl na b">JPN</code>代表日本，等等。更多细节见<a class="ae ky" href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3</a>。如果您将<code class="fe nj nk nl na b">locationmode</code>设置为<code class="fe nj nk nl na b">USA-states</code>，那么<code class="fe nj nk nl na b">locations</code>键将获取包含美国各州代码的值，例如<code class="fe nj nk nl na b">AL</code>代表阿拉巴马，<code class="fe nj nk nl na b">CA</code>代表加利福尼亚，等等。如果您将<code class="fe nj nk nl na b">locationmode</code>设置为<code class="fe nj nk nl na b">country names</code>，您可以将国家名称传递给<code class="fe nj nk nl na b">locations</code>键。</li><li id="b43c" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><code class="fe nj nk nl na b">colorscale</code> —要在地图上应用的热图的名称。点击此链接查看您可以使用的热图列表—<a class="ae ky" href="https://plotly.com/javascript/colorscales/#portland-heatmap." rel="noopener ugc nofollow" target="_blank">https://plot ly . com/JavaScript/color scales/# portland-heat map。</a></li><li id="ecbd" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><code class="fe nj nk nl na b">text</code> —当鼠标悬停在特定位置时显示在地图上的文本</li><li id="582c" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><code class="fe nj nk nl na b">z </code> —设置颜色栏上的颜色值</li><li id="0c02" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><code class="fe nj nk nl na b">colorbar</code> —显示地图上使用的值和颜色编码的图例</li></ul><p id="dff5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二个参数是<code class="fe nj nk nl na b">layout</code>，它允许你配置地图来显示世界的不同部分，以及地图的投影(稍后会详细介绍)。</p><p id="de27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您运行上述代码片段时，您将看到如下地图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/1b302fa34046a884dc94faad95308583.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*SYOAznLoFITeYFwtPetfiA.png"/></div></figure><p id="a74a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当鼠标悬停在三种状态之一上时，您将看到在<code class="fe nj nk nl na b">locations</code>、<code class="fe nj nk nl na b">text</code>和<code class="fe nj nk nl na b">z</code>键中指定的值。</p><h1 id="c949" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">绘制2019年美国人口</h1><p id="c3af" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，您已经了解了绘制choropleth地图的基本知识，让我们加载一个真实世界的数据集并显示2019年美国的人口。为此，您可以在以下位置找到数据集:<a class="ae ky" href="https://www.kaggle.com/peretzcohen/2019-census-us-population-data-by-state/version/3" rel="noopener ugc nofollow" target="_blank">https://www . ka ggle . com/peretzcohen/2019-census-us-population-data-by-state/version/3</a>。</p><p id="9459" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下载数据集并将CSV文件加载到Pandas数据框架中:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="b10b" class="ne md it na b gy nf ng l nh ni">import pandas as pd</span><span id="4740" class="ne md it na b gy nm ng l nh ni">df = \<br/> pd.read_csv('2019_Census_US_Population_Data_By_State_Lat_Long.csv')<br/>df.head()</span></pre><p id="eaa6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将看到以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/c485ba1d709c1d2a6bc4fe5c8dd49541.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*1OU2di7tr27jusvlrJdTcQ.png"/></div></figure><p id="cd03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，各州的名称都是完整的，但是<code class="fe nj nk nl na b">locationmode</code>键只支持州代码(例如，AL、NY等)、国家名称(中国、日本等)或国家代码(美国、JPN等)。因此，在这种情况下，您必须将STATE列转换为包含相应州代码的列。幸运的是，您可以从<a class="ae ky" href="https://worldpopulationreview.com/states/state-abbreviations" rel="noopener ugc nofollow" target="_blank">https://worldpopulationreview . com/States/state-abstracts</a>下载包含每个州代码的CSV文件。</p><p id="9ba7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下载CSV文件后，将其加载到熊猫数据框中:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="13b0" class="ne md it na b gy nf ng l nh ni">df_state_mapping = pd.read_csv('abbr-name.csv', <br/>                               header=None, <br/>                               names=['CODE', 'STATE'])<br/>df_state_mapping.head()</span></pre><p id="eb0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该看到以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/0a24f5915e6b61aadd6ea928c711a693.png" data-original-src="https://miro.medium.com/v2/resize:fit:324/format:webp/1*wlUHsp0_jyyLD8NBAqyRZA.png"/></div></figure><p id="1a56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您可以在两个数据帧之间执行内部连接:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="8420" class="ne md it na b gy nf ng l nh ni">df = df.merge(df_state_mapping, on='STATE')<br/>df.head()</span></pre><p id="2432" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更新后的<code class="fe nj nk nl na b">df</code>现在应该有一个名为<code class="fe nj nk nl na b">CODE</code>的附加列:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/25e3ef965be9b588100e130aff8a7606.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*S8kjGQXmTcOjYFyJXHqFzQ.png"/></div></figure><p id="48a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你现在可以开始绘制美国2019年的人口:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="6315" class="ne md it na b gy nf ng l nh ni">choropleth_map = go.Figure(<br/>    data = {<br/>        'type':'choropleth',<br/>        <strong class="na iu">'locations':df['CODE'],</strong><br/><strong class="na iu">        'locationmode':'USA-states',        </strong><br/><strong class="na iu">        'colorscale':'YlGnBu',            </strong><br/><strong class="na iu">        'text':df['STATE'],</strong><br/><strong class="na iu">        'z':df['POPESTIMATE2019'],</strong><br/>        'colorbar':{'title':'USA Population'}<br/>    },     <br/>    layout = {<br/>      'geo':{<br/>          'scope':'usa'<br/>      }  <br/>    })</span><span id="0367" class="ne md it na b gy nm ng l nh ni">choropleth_map</span></pre><p id="e6f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将看到以下地图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/e59e36f50c50bb9244bff53494c43f51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*ocfc5QJbW7qeD9exMUZkoA.png"/></div></figure><p id="636e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意上面的地图使用了<strong class="lb iu"> YlGnBu </strong>热图。</p><p id="f7f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们通过向<code class="fe nj nk nl na b">data</code>字典添加<code class="fe nj nk nl na b">marker</code>键来修改地图。此外，让我们也为<code class="fe nj nk nl na b">geo</code>字典添加两个额外的关键字:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="daba" class="ne md it na b gy nf ng l nh ni">choropleth_map = go.Figure(<br/>    data = {<br/>        'type':'choropleth',<br/>        'locations':df['CODE'],<br/>        'locationmode':'USA-states',        <br/>        'colorscale':'<strong class="na iu">Portland</strong>',            <br/>        'text':df['STATE'],<br/>        'z':df['POPESTIMATE2019'],<br/>        'colorbar':{'title':'USA Population'},<br/>  <strong class="na iu">      'marker': {<br/>            'line': {<br/>                'color':'rgb(255,255,255)',<br/>                'width':2<br/>            }<br/>        }</strong><br/>    },     <br/>    layout = {      <br/>      'geo':{<br/>          'scope':'usa', <br/>         <strong class="na iu"> 'showlakes': True,<br/>          'lakecolor':'rgb(85,173,240)'</strong><br/>      }  <br/>    })</span><span id="95d1" class="ne md it na b gy nm ng l nh ni">choropleth_map</span></pre><p id="114b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你现在应该看到显示湖泊的地图。此外，每个州都有一个白色的轮廓:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/42df36236d26bd52f6c1fa5e4c008001.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*WiiyET1yYoPN-MX_vANH1w.png"/></div></figure><p id="2bf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想显示河流，你也可以添加<code class="fe nj nk nl na b">showrivers</code>和<code class="fe nj nk nl na b">rivercolor</code>键:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="c593" class="ne md it na b gy nf ng l nh ni">    layout = {      <br/>      'geo':{<br/>          'scope':'usa', <br/>          'showlakes': True,                     <br/>          'lakecolor':'rgb(85,173,240)',         <br/>   <strong class="na iu">       'showrivers': True,                     <br/>          'rivercolor':'rgb(85,173,240)',</strong><br/>      }  <br/>    })</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/da3adff23728f35509f85d3d3fde480c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*XnG4f077-VXt7bo-3bcdMw.png"/></div></figure><h1 id="104e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">绘制世界人口图</h1><p id="30f5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们试试另一个例子。这一次，我想画出2020年的世界人口。可以从<a class="ae ky" href="https://www.kaggle.com/tanuprabhu/population-by-country-2020" rel="noopener ugc nofollow" target="_blank">https://www . ka ggle . com/tanu prabhu/population-by-country-2020</a>下载数据。一旦CSV文件下载完毕，将其加载到熊猫数据框架中:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="d97d" class="ne md it na b gy nf ng l nh ni">df = pd.read_csv('population_by_country_2020.csv')<br/>df</span></pre><p id="a8ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将看到以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/de1a9774cf4cd5344765da181faa297c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j4i1C2P0hXZ5A3_LtvPeew.png"/></div></div></figure><p id="598e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用<code class="fe nj nk nl na b"><strong class="lb iu">Country (or dependency)</strong></code> <strong class="lb iu"> </strong>列作为国家名称，并使用<code class="fe nj nk nl na b"><strong class="lb iu">Population (2020)</strong></code> <strong class="lb iu"> </strong>列显示每个国家的人口:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="9257" class="ne md it na b gy nf ng l nh ni">choropleth_map = go.Figure(<br/>    data = {<br/>        'type':'choropleth',<br/>        'locations':<strong class="na iu">df['Country (or dependency)']</strong>,<br/>        'locationmode':'<strong class="na iu">country names</strong>',<br/>        'colorscale':'Portland',<br/>        'z':<strong class="na iu">df['Population (2020)']</strong>,<br/>        'colorbar':{'title':'World Population in 2020'},<br/>        'marker': {<br/>            'line': {<br/>                'color':'rgb(255,255,255)',<br/>                'width':2<br/>            }<br/>        }<br/>    },     <br/>    layout = {      <br/>      'geo':{<br/>          'scope':'<strong class="na iu">world</strong>', <br/>      }  <br/>    })</span><span id="c5f3" class="ne md it na b gy nm ng l nh ni">choropleth_map</span></pre><blockquote class="lw lx ly"><p id="e540" class="kz la lv lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">注意你现在将<strong class="lb iu">示波器</strong>设置为<code class="fe nj nk nl na b">world</code>。可用的作用域有:'<code class="fe nj nk nl na b">world</code>'、<code class="fe nj nk nl na b">usa</code>'、<code class="fe nj nk nl na b">europe</code>'、<code class="fe nj nk nl na b">asia</code>'、<code class="fe nj nk nl na b">africa</code>'、<code class="fe nj nk nl na b">north america</code>和'<code class="fe nj nk nl na b">south america’</code>。</p></blockquote><p id="ee18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你现在应该可以看到世界地图了:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/9796d2ce3eec136f82ac995a82b42854.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QEKmkSu7rj4FYsUY2faMWA.png"/></div></div></figure><p id="e294" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以应用到世界地图上的一个有趣的投影是<code class="fe nj nk nl na b">orthographic:</code></p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="b75f" class="ne md it na b gy nf ng l nh ni">choropleth_map = go.Figure(<br/>    data = {<br/>        'type':'choropleth',<br/>        'locations':df['Country (or dependency)'],<br/>        'locationmode':'country names',        <br/>        'colorscale':'Portland',         <br/>        'z':df['Population (2020)'],<br/>        'colorbar':{'title':'World Population in 2020'},<br/>        'marker': {  <br/>            'line': {<br/>                'color':'rgb(255,255,255)',<br/>                'width':2<br/>            }<br/>        }<br/>    },<br/>    layout = {<br/>      'geo':{<br/><strong class="na iu">          'projection':{<br/>              'type':'orthographic'  # default is '</strong><strong class="na iu">equirectangular</strong><strong class="na iu">'<br/>          },</strong><br/>          'scope':'world',<br/>      }<br/>    })</span><span id="1311" class="ne md it na b gy nm ng l nh ni">choropleth_map</span></pre><p id="5dc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe nj nk nl na b">orthographic</code>投影，您可以使用鼠标旋转地球仪。你真的需要尝试一下，看看其中的乐趣！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/7cc3bce8f38fc527ea860087b76d533c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ABAdAuE7n9uL8q4C09z4vg.png"/></div></div></figure><p id="b3a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于色阶有一点。您可以通过在热图名称后附加一个<code class="fe nj nk nl na b">_r</code>来反转色标，例如:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="3a42" class="ne md it na b gy nf ng l nh ni">choropleth_map = go.Figure(<br/>    data = {<br/>        'type':'choropleth',<br/>        'locations':df['Country (or dependency)'],<br/>        'locationmode':'country names',        <br/>        'colorscale':'<strong class="na iu">Portland_r</strong>',         <br/>        'z':df['Population (2020)'],<br/>        'colorbar':{'title':'World Population in 2020'},<br/>        'marker': {  <br/>            'line': {<br/>                'color':'rgb(255,255,255)',<br/>                'width':2<br/>            }<br/>        }<br/>    },<br/>    layout = {<br/>      'geo':{<br/>          'projection':{<br/>              'type':'orthographic'<br/>          },<br/>          'scope':'world',<br/>      }<br/>    })</span><span id="2eb3" class="ne md it na b gy nm ng l nh ni">choropleth_map</span></pre><p id="bc3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将反转色阶:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/737cccb03ce0c4692ce0d21531fcbfd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tn5PFg0T0CKQWA52hN97lQ.png"/></div></div></figure><p id="305d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一种方法是将<code class="fe nj nk nl na b">reversescale</code>键值设置为<code class="fe nj nk nl na b">True</code>:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="63b8" class="ne md it na b gy nf ng l nh ni">data = {<br/>        'type':'choropleth',<br/>        'locations':df['Country (or dependency)'],<br/>        'locationmode':'country names',        <br/><strong class="na iu">        'colorscale':'Portland',<br/>        'reversescale' : True,<br/></strong>        'z':df['Population (2020)'],<br/>        'colorbar':{'title':'World Population in 2020'},<br/>        'marker': {  <br/>            'line': {<br/>                'color':'rgb(255,255,255)',<br/>                'width':2<br/>            }<br/>        }<br/>    },</span></pre><h1 id="243a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">调整地图的大小</h1><p id="912e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">最后，如果要调整地图的大小，可以在布局字典中设置地图的宽度和高度:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="bf30" class="ne md it na b gy nf ng l nh ni">    layout = {<br/><strong class="na iu">        'width':500,<br/>        'height':500,</strong><br/>        'geo':{<br/>            'projection':{<br/>                'type':'orthographic'<br/>            },<br/>            'scope':'world',<br/>        }<br/>    })</span></pre><p id="ced3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在将调整地图的大小:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/cfc3aac341d2a66ac3bd61c34ad3b589.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*sMY4-UD_RVK-ZtD4bFtIAQ.png"/></div></figure><h1 id="fc82" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">摘要</h1><p id="ea11" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在本文中，我展示了一些如何使用Plotly创建choropleth地图的例子。还有更多的特性需要探索，但是希望这篇文章能够帮助您开始！</p><div class="on oo gp gr op oq"><a href="https://weimenglee.medium.com/membership" rel="noopener follow" target="_blank"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd iu gy z fp ov fr fs ow fu fw is bi translated">加入媒介与我的介绍链接-李伟孟</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">weimenglee.medium.com</p></div></div><div class="oz l"><div class="pa l pb pc pd oz pe ks oq"/></div></div></a></div></div></div>    
</body>
</html>