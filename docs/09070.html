<html>
<head>
<title>When comments are scaffolding, they should not be permanent</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">当注释是脚手架时，它们不应该是永久的</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/when-comments-are-scaffolding-they-should-not-be-permanent-433f80927a2d?source=collection_archive---------6-----------------------#2021-07-02">https://levelup.gitconnected.com/when-comments-are-scaffolding-they-should-not-be-permanent-433f80927a2d?source=collection_archive---------6-----------------------#2021-07-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/6cdff77487ffb9edce5cce47a4350083.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CEsjyuQ51QA9GQQp"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@milkandbourbons?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">迪安·布瑞尔利</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="4aed" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在建筑过程中，工人们需要脚手架来帮助他们接近建筑物的较高部分。施工结束后，工人们拆除脚手架。</p><p id="6bca" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">计算机程序中的注释也有类似的作用。但是不像花费一千美元的搭建，似乎没有太多的动机从一个完成的程序中删除注释。</p><p id="689d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">脚手架可以被带到不同的建筑工地。注释通常不能以任何有意义的方式移植到不同的程序中。</p><p id="70ba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如我之前提到的，对评论的普遍看法赋予了它们一定程度的持久性。但事实是，如果它不是一个许可证头，也不是一个文档生成工具，注释肯定会失去它的用处。</p><p id="20fc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当一个评论不再有用时，它应该被删除，而不是被保留。一个过时的评论可能会适得其反，让团队成员和评审者感到困惑。</p><p id="abed" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">充其量，支架注释只是变得多余。</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="li lj l"/></div></figure><p id="4d5e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这种情况下，显而易见，注释可以简单地删除，因为它们的含义在子例程的名称中重复了。</p><p id="b3ca" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">其他时候，可能不清楚需要做什么。例如当将数学公式放入注释中时。</p><pre class="le lf lg lh gt lk ll lm ln aw lo bi"><span id="23bb" class="lp lq it ll b gy lr ls l lt lu">    // Kinetic energy formula:<br/>    // k = 1/2 mv^2, where k is kinetic energy,<br/>    // m is mass and v is velocity<br/>    double m = obj.getMass();<br/>    double v = obj.getVelocity();<br/>    double k = 0.5 * m * v * v;</span></pre><p id="d413" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我认为这里需要进行的重构是，单字母变量名应该由单词名代替。</p><pre class="le lf lg lh gt lk ll lm ln aw lo bi"><span id="4951" class="lp lq it ll b gy lr ls l lt lu">    // Kinetic energy formula:<br/>    // k = 1/2 mv^2, where k is kinetic energy,<br/>    // m is mass and v is velocity<br/>    double mass = obj.getMass();<br/>    double velocity = obj.getVelocity();<br/>    double kineticEnergy <br/>            = 0.5 * mass * velocity * velocity;</span></pre><p id="50c3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者将<em class="lv"> m </em>和<em class="lv"> v </em>变量保留为<code class="fe lw lx ly ll b">m</code>和<code class="fe lw lx ly ll b">v</code>就足够了。不管怎样，解释这是动能公式的评论现在变得没有必要了，可以安全地删除了。</p><p id="54c9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那个评论本质上是一个脚手架评论。程序员把数学公式记下来是有意义的，这样以后就不用再去查了。</p><p id="46b5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你们中的一些人可能会对Java中的<code class="fe lw lx ly ll b">^</code>操作符做了一些数学家不希望它做的事情感到恼火。评论不是抱怨的合适地方。</p><p id="864f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我在评论中看到过这种事情，指出你必须以某种方式做某事，因为你正在使用的编程语言或库中的特性或缺陷。</p><p id="5879" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可能会看到的另一种类型的评论基本上是这样的:“我不知道为什么这有效，但我尝试的所有其他方法都失败了。”</p><p id="c9ad" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这显然不是脚手架评论。同样，它不应该是一个永久的评论。不难想象，如果这样的注释在程序源代码中停留的时间超过了它应该停留的时间，它会成为一个问题。</p><p id="f375" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设你真的弄明白了为什么某样东西会起作用，并且也想出了一个更好的方法来做同样的事情。您将程序更改为更优雅的方式，但是您忽略了删除注释。</p><p id="91db" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个评论很可能会让你的团队感到困惑。它甚至会让你困惑。对项目质量的批评应该变成行动项目。例如，代替</p><pre class="le lf lg lh gt lk ll lm ln aw lo bi"><span id="96c4" class="lp lq it ll b gy lr ls l lt lu">// I don't know why this works, but nothing else did</span></pre><p id="c653" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">写</p><pre class="le lf lg lh gt lk ll lm ln aw lo bi"><span id="6359" class="lp lq it ll b gy lr ls l lt lu">// TODO: Figure out why this works</span></pre><p id="7a61" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">待办事项评论可能会像其他评论一样过时。但至少更清楚的是，该评论预计最终将变得没有必要。当这种情况发生时，可以安全地删除它。</p><p id="a595" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">面对你不太理解的待办事项，问题很简单:任务完成了吗？如果是，则应删除该评论。如果没有，问题还是很简单:任务还需要做吗？如果没有，则应删除该评论。就是这样。</p><p id="a36d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">随着我想的越来越多，我觉得所有的脚手架评论都应该是Do评论。这提供了另一种方法来衡量团队的项目进展。在开始的时候，项目会有很多待办事项的注释。随着项目的进展，待办事项的数量应该会下降。</p><p id="2b5e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我知道IntelliJ IDEA和Apache NetBeans都提供了一种收集和访问项目中所有待办事项注释的简单方法(它们属于NetBeans中的操作项类别，还有编译错误)。</p><p id="cf77" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当弄清楚为什么某些东西能工作时，有必要通过注释掉一些行来使它们失效。可能所有的集成开发环境都提供了一个简洁的键盘快捷键来实现这一点。</p><p id="08b6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是这种停用的行不能进入下一个版本控制提交。如果它们是必要的，它们必须被重新激活(取消注释)，如果它们是不必要的，它们必须被删除。</p><p id="3b40" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您错误地删除了被注释掉的行，而这些行后来被证明是必要的，那么您总是可以从远程存储库中检索它们，或者如果不能，从本地历史中检索它们。</p><p id="b4a8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">停用的行比过时的注释更有可能在以后迷惑程序员。</p><p id="1bf8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">简而言之，必须删除所有不必要的评论。</p><p id="a5a7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上述内容不适用于许可证头，许可证头是样板文件，不表示控制流，可能是您的法律部门所要求的，因此是必需的。</p><p id="1f06" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这也不适用于文档注释(如Javadoc ),这些注释对您、您的团队以及潜在的使用您的程序但无权访问程序源代码的人来说是真正有用的。</p><p id="a816" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我决定采纳一条个人原则，只使用三种类型的评论:</p><ul class=""><li id="a181" class="lz ma it ki b kj kk kn ko kr mb kv mc kz md ld me mf mg mh bi translated">许可证头(每个类或接口源代码列表的顶部各有一个)</li><li id="9b4a" class="lz ma it ki b kj mi kn mj kr mk kv ml kz mm ld me mf mg mh bi translated">文档注释(例如Javadoc)</li><li id="1b76" class="lz ma it ki b kj mi kn mj kr mk kv ml kz mm ld me mf mg mh bi translated">待办事项注释</li></ul><p id="b637" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我使我的存储库符合这个规则之前，还需要一段时间，但是我认为在达到完全符合之前，它将开始得到回报。</p></div></div>    
</body>
</html>