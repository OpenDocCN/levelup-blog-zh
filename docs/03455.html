<html>
<head>
<title>How to Add Redux into create-react-app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将Redux添加到create-react-app中</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-add-redux-into-create-react-app-a5003c08212?source=collection_archive---------7-----------------------#2020-05-10">https://levelup.gitconnected.com/how-to-add-redux-into-create-react-app-a5003c08212?source=collection_archive---------7-----------------------#2020-05-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="2873" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae ko" href="https://react-redux.js.org/introduction/quick-start" rel="noopener ugc nofollow" target="_blank"> Redux </a>是前端应用最流行的状态容器库。它帮助你以一种可预测和简单的方式管理你的状态。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi kp"><img src="../Images/21866ff901b0bdae4561ae310d096b27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*wgvIR-ZTUTS5jww1ToG-cQ.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">冗余流量</figcaption></figure><p id="60e1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这篇文章是关于在你新的/现有的React应用上设置Redux。</p><h1 id="d6b3" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">创建react APP </strong></h1><p id="2360" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">我采用了最流行的React-boilerplate(create-React-app)。</p><p id="3d6a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你是React新手，不知道create-react-app是什么，请点击下面的链接。</p><pre class="kq kr ks kt gt me mf mg mh aw mi bi"><span id="347f" class="mj lc it mf b gy mk ml l mm mn">npx create-react-app my-app<br/>cd my-app<br/>npm start</span></pre><p id="f833" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae ko" href="https://reactjs.org/docs/create-a-new-react-app.html" rel="noopener ugc nofollow" target="_blank">https://reactjs.org/docs/create-a-new-react-app.html</a></p><h1 id="070d" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak"> Redux文档</strong></h1><p id="7777" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">你可以在下面的链接中找到Redux的官方文档。</p><p id="723f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae ko" href="https://redux.js.org/introduction/getting-started" rel="noopener ugc nofollow" target="_blank">https://redux.js.org/introduction/getting-started</a></p><h1 id="ffc9" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">React里真的需要Redux吗？</strong></h1><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/7910d09108b52ebf07516e96e63884b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*EXFwvoysFR8MB4OdowCZ3g.jpeg"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来自<a class="ae ko" href="https://www.pexels.com/photo/clueless-woman-in-white-dress-shirt-3958872/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae ko" href="https://www.pexels.com/@polina-zimmerman?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">波琳娜·齐默曼</a>的照片</figcaption></figure><p id="572f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在实现Redux之前，我强烈推荐你去下面这个由Redux的创建者(<a class="ae ko" href="https://twitter.com/dan_abramov" rel="noopener ugc nofollow" target="_blank"> Dan Abramov </a>)写的帖子。</p><pre class="kq kr ks kt gt me mf mg mh aw mi bi"><span id="8ead" class="mj lc it mf b gy mk ml l mm mn"><a class="ae ko" href="https://medium.com/@dan_abramov/you-might-not-need-redux-be46360cf367" rel="noopener">https://medium.com/@dan_abramov/you-might-not-need-redux-be46360cf367</a></span></pre><p id="030e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，如果你确定要使用Redux than，那就开始吧。</p><h1 id="63b9" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">先决条件</h1><p id="8a20" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">JavaScript和React的基础知识。<br/>对create-react-app的基本了解。</p><h1 id="96a5" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">设置CRA(创建-反应-应用)</strong></h1><p id="576b" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">安装所需的软件包</p><p id="1cfe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">redux-基础包<br/>react-Redux-根据React使用Redux特性的包</p><p id="f1c1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">安装npm包</strong></p><pre class="kq kr ks kt gt me mf mg mh aw mi bi"><span id="32a3" class="mj lc it mf b gy mk ml l mm mn">npm install redux react-redux redux-saga</span></pre><h1 id="4b7d" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak"> Redux文件夹结构</strong></h1><p id="e16d" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">在src中创建一个名为Redux的文件夹，其中包含以下文件夹</p><ol class=""><li id="22d5" class="mp mq it js b jt ju jx jy kb mr kf ms kj mt kn mu mv mw mx bi translated">还原剂</li><li id="a69a" class="mp mq it js b jt my jx mz kb na kf nb kj nc kn mu mv mw mx bi translated">冒险故事</li></ol><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/e60242897d97cbdbf64ff48e40c78e73.png" data-original-src="https://miro.medium.com/v2/resize:fit:494/format:webp/1*rtzuaabwwTqB2lz9sSJYvA.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">APP-Foder结构</figcaption></figure><h1 id="12ea" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">导入库</strong></h1><p id="9bab" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">在index.js中，包含以下依赖项</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><pre class="kq kr ks kt gt me mf mg mh aw mi bi"><span id="78d2" class="mj lc it mf b gy mk ml l mm mn">// Redux Library Packages<br/> import { Provider } from “react-redux”;<br/> import createSagaMiddleware from ‘redux-saga’;<br/> import { createStore, applyMiddleware, compose } from “redux”;<br/> import { logger } from ‘redux-logger’;</span><span id="e963" class="mj lc it mf b gy nl ml l mm mn"> // Custom redux Elements<br/> import rootReducer from “./redux/reducers/index”;<br/>import rootSaga from “./redux/sagas/index”;</span></pre><h2 id="b9e9" class="mj lc it bd ld nm nn dn lh no np dp ll kb nq nr lp kf ns nt lt kj nu nv lx nw bi translated"><strong class="ak">将提供商连接到应用程序</strong></h2><pre class="kq kr ks kt gt me mf mg mh aw mi bi"><span id="9432" class="mj lc it mf b gy mk ml l mm mn">const userReducer = (state, action) =&gt;{<br/>switch (action.type) {<br/> case “USER_FETCH_REQUESTED”:<br/> return { …state, response: null, loading: true }<br/> case “USER_FETCH_SUCCEEDED”:<br/> return { …state, response: action.response, loading: false }<br/> default:<br/> return {<br/> response: “No Response”<br/> };<br/> }<br/>}</span></pre><h2 id="c8fb" class="mj lc it bd ld nm nn dn lh no np dp ll kb nq nr lp kf ns nt lt kj nu nv lx nw bi translated"><strong class="ak">添加减速器</strong></h2><pre class="kq kr ks kt gt me mf mg mh aw mi bi"><span id="050e" class="mj lc it mf b gy mk ml l mm mn">const globalReducer = createStore(<br/> rootReducer,<br/> compose( <br/> applyMiddleware(sagaMiddleware, logger)<br/> ));</span></pre><p id="1d0e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe nx ny nz mf b">&lt;Provider /&gt;</code>使Redux存储对任何使用<code class="fe nx ny nz mf b">useSelector</code>钩子的嵌套组件可用。</p><pre class="kq kr ks kt gt me mf mg mh aw mi bi"><span id="14c8" class="mj lc it mf b gy mk ml l mm mn"> &lt;Provider &gt;<br/>   &lt;App /&gt;<br/> &lt;/Provider&gt;</span></pre><p id="7c06" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">将减压器连接到供应器上</strong></p><pre class="kq kr ks kt gt me mf mg mh aw mi bi"><span id="5bc2" class="mj lc it mf b gy mk ml l mm mn">&lt;Provider store={globalReducer}&gt;<br/>  &lt;App /&gt;<br/>&lt;/Provider&gt;</span></pre><p id="ab00" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">将全局状态输入你的应用</strong></p><pre class="kq kr ks kt gt me mf mg mh aw mi bi"><span id="e062" class="mj lc it mf b gy mk ml l mm mn">import { useSelector } from “react-redux”;</span><span id="bbee" class="mj lc it mf b gy nl ml l mm mn">const globalState = useSelector(state =&gt; state);</span></pre><p id="99eb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">调度事件</strong>的动作</p><pre class="kq kr ks kt gt me mf mg mh aw mi bi"><span id="63ef" class="mj lc it mf b gy mk ml l mm mn">const getUserData = () =&gt; {<br/> // Get the Data for the User<br/> dispatch({ type: “USER_FETCH_REQUESTED”})<br/>}</span></pre><p id="9387" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">将API调用附加到动作</strong></p><pre class="kq kr ks kt gt me mf mg mh aw mi bi"><span id="350c" class="mj lc it mf b gy mk ml l mm mn">import { call, put, takeLatest } from ‘redux-saga/effects’<br/><br/>const getRecords = (uid = null) =&gt; {<br/>const results = fetch(‘<a class="ae ko" href="https://jsonplaceholder.typicode.com/todos/1'" rel="noopener ugc nofollow" target="_blank">https://jsonplaceholder.typicode.com/todos/1'</a>)<br/> .then(response =&gt; response.json()); <br/> return results;<br/>}</span><span id="195f" class="mj lc it mf b gy nl ml l mm mn">// worker Saga: will be fired on USER_FETCH_REQUESTED actions<br/>function* fetchUser(action) {<br/> try {<br/> const json = yield call(getRecords, 400);<br/> yield put({type: “USER_FETCH_SUCCEEDED”, response: json});<br/> } catch (e) {<br/> yield put({type: “USER_FETCH_FAILED”, message: e.message});<br/> }<br/>}</span><span id="8783" class="mj lc it mf b gy nl ml l mm mn">function* mySaga() {<br/> yield takeLatest(“USER_FETCH_REQUESTED”, fetchUser);<br/>}</span><span id="2c38" class="mj lc it mf b gy nl ml l mm mn">export default mySaga;</span></pre><p id="0c96" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">运行代码并查看操作</strong></p><p id="358c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">最终app.js文件</strong></p><p id="0a9e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您最终的app.js将如下所示。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="oa ob l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">最终APP.js文件</figcaption></figure><p id="e13a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">运行代码并查看操作</strong></p><p id="8cf0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">打开</p><pre class="kq kr ks kt gt me mf mg mh aw mi bi"><span id="d98a" class="mj lc it mf b gy mk ml l mm mn">localhost:3000/</span></pre><p id="f362" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">工作示例</strong></p><pre class="kq kr ks kt gt me mf mg mh aw mi bi"><span id="df95" class="mj lc it mf b gy mk ml l mm mn"><a class="ae ko" href="https://react-redux-example.netlify.app/" rel="noopener ugc nofollow" target="_blank">https://react-redux-example.netlify.app/</a></span></pre><p id="b8c1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">CodeSandBox</p><pre class="kq kr ks kt gt me mf mg mh aw mi bi"><span id="6990" class="mj lc it mf b gy mk ml l mm mn"><a class="ae ko" href="https://codesandbox.io/s/github/tarun-nagpal-github/react-redux-boilerplate" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/github/tarun-nagpal-github/react-redux-boilerplate</a></span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/c5d8a9dbdde154fc1b05773c69193d40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*mHz2T5ZmjIHbrcFXVpTpaw.jpeg"/></div></figure><p id="01fd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">本例中的GitHub Repo】</strong></p><pre class="kq kr ks kt gt me mf mg mh aw mi bi"><span id="3822" class="mj lc it mf b gy mk ml l mm mn"><a class="ae ko" href="https://github.com/tarun-nagpal-github/react-redux-boilerplate" rel="noopener ugc nofollow" target="_blank">https://github.com/tarun-nagpal-github/react-redux-boilerplate</a></span></pre><h1 id="506e" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">结论</strong></h1><p id="ba1b" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">在这篇文章中，我们选择了一个新的React应用程序，并用一个示例操作实现了Redux。</p><p id="766c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我刚刚建立了一个，但是您可以扩展它并在您的项目中使用它。欢迎在评论中寻求帮助。</p></div></div>    
</body>
</html>