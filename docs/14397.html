<html>
<head>
<title>How to format a Go string without printing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在不打印的情况下格式化Go字符串</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-format-go-string-without-printing-d3e3d8c1fc1e?source=collection_archive---------9-----------------------#2022-11-22">https://levelup.gitconnected.com/how-to-format-go-string-without-printing-d3e3d8c1fc1e?source=collection_archive---------9-----------------------#2022-11-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/0d1aa2b86332f72240d77e2efcc55912.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Kiuf3z_iH4iPtw6L"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@nathanfertig?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Nathan Fertig </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="310e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">寻找快速答案？这里，</p><pre class="le lf lg lh gt li lj lk bn ll lm bi"><span id="0288" class="ln lo it lj b be lp lq l lr ls">s := fmt.Sprintf("When old is %s? its %d years old.", "Eiffel tower", 135)</span></pre><p id="4144" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于“简单”的字符串，最简单的方法是使用<code class="fe lt lu lv lj b"><a class="ae kf" href="https://golang.org/pkg/fmt/#Sprintf" rel="noopener ugc nofollow" target="_blank">fmt.Sprintf()</a></code>及其不同的版本，如<code class="fe lt lu lv lj b"><a class="ae kf" href="https://golang.org/pkg/fmt/#Sprint" rel="noopener ugc nofollow" target="_blank">fmt.Sprint()</a></code>、<code class="fe lt lu lv lj b"><a class="ae kf" href="https://golang.org/pkg/fmt/#Sprintln" rel="noopener ugc nofollow" target="_blank">fmt.Sprintln()</a></code>。这些函数返回结果<code class="fe lt lu lv lj b">string</code>，而不是将它们打印到标准输出。</p><p id="8c0d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">提示:</strong>要连接不同数据类型的值，可以使用<code class="fe lt lu lv lj b">Sprint()</code></p><p id="09f2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">示例:</p><pre class="le lf lg lh gt li lj lk bn ll lm bi"><span id="fea7" class="ln lo it lj b be lp lq l lr ls">i := 135<br/>str := fmt.Sprint("years old :", i) // str will be "years old :135"</span></pre><p id="f163" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可以在连接字符串时使用<code class="fe lt lu lv lj b"><a class="ae kf" href="https://golang.org/pkg/strings/#Join" rel="noopener ugc nofollow" target="_blank">strings.Join()</a></code>，也可以指定一个自定义分隔符<code class="fe lt lu lv lj b">string</code>放置在字符串之间。</p><h1 id="cd4c" class="lw lo it bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated"><strong class="ak">高级格式:</strong></h1><p id="5238" class="pw-post-body-paragraph kg kh it ki b kj mt kl km kn mu kp kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated">如果你想要创建的字符串更复杂，比如一封多行的电子邮件，使用<code class="fe lt lu lv lj b">fmt.Sprintf()</code>会变得更难阅读，并且使用更多的内存，尤其是如果你必须做很多的话。</p><p id="1a43" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">标准库为此提供了包<code class="fe lt lu lv lj b"><a class="ae kf" href="https://golang.org/pkg/text/template/" rel="noopener ugc nofollow" target="_blank">text/template</a></code>和<code class="fe lt lu lv lj b"><a class="ae kf" href="https://golang.org/pkg/text/template/" rel="noopener ugc nofollow" target="_blank">html/template</a></code>。为了生成文本输出，这些包将数据驱动的模板放入action.HTML输出中，这样可以避免代码注入，并且可以使用<code class="fe lt lu lv lj b"><a class="ae kf" href="https://golang.org/pkg/text/template/" rel="noopener ugc nofollow" target="_blank">html/template</a></code>生成。它有与包<code class="fe lt lu lv lj b"><a class="ae kf" href="https://golang.org/pkg/text/template/" rel="noopener ugc nofollow" target="_blank">text/template</a></code>相同的用户界面，可以用于HTML输出。</p><p id="0bfd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用提供字符串形式的静态模板所需的模板包，该静态模板可能包含静态文本和动作，这些文本和动作在模板被处理并生成输出时被处理。</p><p id="7f55" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可以在生成时提供模板中包含/替换的参数。通常，这样的参数是结构和映射值。</p><p id="1ae9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">例如，</strong>如果我们需要生成以下需要打印成pdf的消息:</p><pre class="le lf lg lh gt li lj lk bn ll lm bi"><span id="1957" class="ln lo it lj b be lp lq l my ls">Hello [name]<br/><br/>Thanks for enrolling into class [year]<br/><br/>You have enrolled to following classes for this year:<br/>[class#1], [class#2], ... [class#n]</span></pre><p id="e987" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要生成这样的消息体，可以使用以下模板:</p><pre class="le lf lg lh gt li lj lk bn ll lm bi"><span id="e322" class="ln lo it lj b be lp lq l lr ls">const welcomeTemplate = `Hello {{.Name}}<br/><br/>Your account is ready, your user name is: {{.UserName}}<br/>Thanks for enrolling into class {{.Year}}<br/><br/>You have enrolled to following classes for this year:<br/>{{range $i, $c := .Classes}}{{if $i}}, {{end}}{{.}}{{end}}<br/>`</span></pre><p id="85d8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">并按如下方式注入数据:</p><pre class="le lf lg lh gt li lj lk bn ll lm bi"><span id="f5e5" class="ln lo it lj b be lp lq l lr ls">data := map[string]interface{}{<br/>    "Name":     "Rakesh",<br/>    "Year": "2022",<br/>    "Classes":    []string{"ds", "ui/ux", "algorithms"},<br/>}</span></pre><p id="f42f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">模板的输出被写入一个<code class="fe lt lu lv lj b"><a class="ae kf" href="https://golang.org/pkg/io/#Writer" rel="noopener ugc nofollow" target="_blank">io.Writer</a></code>，如果我们需要结果作为一个<code class="fe lt lu lv lj b">string</code>，可以创建并写入一个实现<code class="fe lt lu lv lj b">io.Writer</code>的<code class="fe lt lu lv lj b"><a class="ae kf" href="https://golang.org/pkg/bytes/#Buffer" rel="noopener ugc nofollow" target="_blank">bytes.Buffer</a></code>。</p><p id="670c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用数据执行上面的模板将产生<code class="fe lt lu lv lj b">string</code></p><pre class="le lf lg lh gt li lj lk bn ll lm bi"><span id="e421" class="ln lo it lj b be lp lq l lr ls">t := template.Must(template.New("letter").Parse(welcomeTemplate))<br/>buf := &amp;bytes.Buffer{}<br/>if err := t.Execute(buf, data); err != nil {<br/>    panic(err)<br/>}<br/>s := buf.String()</span></pre><p id="3f96" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将产生预期的输出:</p><pre class="le lf lg lh gt li lj lk bn ll lm bi"><span id="3daf" class="ln lo it lj b be lp lq l lr ls">Hello Rakesh,<br/><br/>Thanks for enrolling into class 2022<br/><br/>You have enrolled to following classes for this year:<br/>ds, ui/ux, algorithms</span></pre><h1 id="54e7" class="lw lo it bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">结论</h1><p id="7bb4" class="pw-post-body-paragraph kg kh it ki b kj mt kl km kn mu kp kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated">我们看到了两种格式化字符串的方法，如果您对Go中的片段连接有任何进一步的见解，欢迎留下您的评论。</p><p id="f5ad" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">编码快乐！</p></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="6820" class="lw lo it bd lx ly ng ma mb mc nh me mf mg ni mi mj mk nj mm mn mo nk mq mr ms bi translated">分级编码</h1><p id="ed13" class="pw-post-body-paragraph kg kh it ki b kj mt kl km kn mu kp kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="d47a" class="nl nm it ki b kj kk kn ko kr nn kv no kz np ld nq nr ns nt bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="4176" class="nl nm it ki b kj nu kn nv kr nw kv nx kz ny ld nq nr ns nt bi translated">📰查看<a class="ae kf" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="c675" class="nl nm it ki b kj nu kn nv kr nw kv nx kz ny ld nq nr ns nt bi translated">🔔关注我们:<a class="ae kf" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae kf" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae kf" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="7668" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">🚀👉<a class="ae kf" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>