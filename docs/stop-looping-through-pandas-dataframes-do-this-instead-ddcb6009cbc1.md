# åœæ­¢å¾ªç¯ç†ŠçŒ«æ•°æ®å¸§&æ”¹ä¸ºè¿™æ ·åš

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/stop-looping-through-pandas-dataframes-do-this-instead-ddcb6009cbc1>

å¤„ç† Pandas æ•°æ®å¸§å¯èƒ½æ˜¯ä¸€é¡¹ä¹å‘³ä¸”è€—æ—¶çš„ä»»åŠ¡ï¼Œå°¤å…¶æ˜¯åœ¨å¾ªç¯éå†å®ƒä»¬çš„æ—¶å€™ã€‚å¦‚æœæ‚¨åƒå¤§å¤šæ•° Python å¼€å‘äººå‘˜ä¸€æ ·ï¼Œæ‚¨å¯èƒ½å·²ç»èŠ±äº†å¤§é‡æ—¶é—´è¯•å›¾æ‰¾å‡ºæœ€æœ‰æ•ˆçš„æ–¹æ³•æ¥éå†æ•°æ®å¸§ã€‚ä½†æ˜¯å¦‚æœæœ‰æ›´ç®€å•çš„æ–¹æ³•å‘¢ï¼Ÿåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å‘æ‚¨å±•ç¤ºä¸éœ€è¦å¾ªç¯çš„å¤„ç† Pandas æ•°æ®å¸§çš„æ›´å¥½æ–¹æ³•ã€‚æˆ‘ä»¬å°†è®¨è®ºè¿™äº›æ–¹æ³•çš„ä¼˜ç‚¹ï¼Œå¹¶æä¾›ä¸€äº›å®é™…ä¾‹å­æ¥å¸®åŠ©æ‚¨å¼€å§‹ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ å·²ç»å‡†å¤‡å¥½åœæ­¢éå†ç†ŠçŒ«æ•°æ®å¸§ï¼Œå»åšä¸€äº›æ›´å¥½çš„äº‹æƒ…ï¼Œè¯·ç»§ç»­è¯»ä¸‹å»ï¼

![](img/b06831242ebf17ff31a479ae226e816e.png)

ç”±[ä½•å¡Â·é˜¿æ‹‰è´¡å†…å¡æ–¯](https://unsplash.com/@jodaarba?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

## ç›®å½•:

1.  ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦é«˜æ•ˆçš„ç¼–ç ï¼Ÿ
2.  ä½¿ç”¨æœ‰æ•ˆåœ°å¾ªç¯ã€‚iterrows()
3.  ä½¿ç”¨æœ‰æ•ˆå¾ªç¯ã€‚åº”ç”¨()
4.  ä½¿ç”¨çŸ¢é‡åŒ–æœ‰æ•ˆå¾ªç¯
5.  æœ€ä½³å®è·µæ€»ç»“

## æ‚¨å¯ä»¥åœ¨ GitHub çŸ¥è¯†åº“ä¸­æ‰¾åˆ°æœ¬æ–‡ä¸­ä½¿ç”¨çš„ä»£ç å’Œæ•°æ®é›†:

[](https://github.com/youssefHosni/Efficient-Python-for-Data-Scientists) [## GitHub-youssefHosni/é¢å‘æ•°æ®ç§‘å­¦å®¶çš„é«˜æ•ˆ Python

### ä½œä¸ºæ•°æ®ç§‘å­¦å®¶å­¦ä¹ å¦‚ä½•ç¼–å†™é«˜æ•ˆçš„ python ä»£ç å¦‚ä½•ç¼–å†™ Python å¹²å‡€çš„ä»£ç [æ–‡ç« ]ç¼–å†™é«˜æ•ˆâ€¦

github.com](https://github.com/youssefHosni/Efficient-Python-for-Data-Scientists) 

**å¦‚æœä½ æƒ³å…è´¹å­¦ä¹ æ•°æ®ç§‘å­¦å’Œæœºå™¨å­¦ä¹ ï¼Œçœ‹çœ‹è¿™äº›èµ„æº:**

*   å…è´¹äº’åŠ¨è·¯çº¿å›¾ï¼Œè‡ªå­¦æ•°æ®ç§‘å­¦å’Œæœºå™¨å­¦ä¹ ã€‚ä»è¿™é‡Œå¼€å§‹:[https://aigents.co/learn/roadmaps/intro](https://aigents.co/learn/roadmaps/intro)
*   æ•°æ®ç§‘å­¦å­¦ä¹ èµ„æºæœç´¢å¼•æ“(å…è´¹)ã€‚å°†ä½ æœ€å–œæ¬¢çš„èµ„æºåŠ å…¥ä¹¦ç­¾ï¼Œå°†æ–‡ç« æ ‡è®°ä¸ºå®Œæ•´ï¼Œå¹¶æ·»åŠ å­¦ä¹ ç¬”è®°ã€‚[https://aigents.co/learn](https://aigents.co/learn)
*   æƒ³è¦åœ¨å¯¼å¸ˆå’Œå­¦ä¹ ç¤¾åŒºçš„æ”¯æŒä¸‹ä»å¤´å¼€å§‹å­¦ä¹ æ•°æ®ç§‘å­¦å—ï¼Ÿå…è´¹åŠ å…¥è¿™ä¸ªå­¦ä¹ åœˆ:[https://community.aigents.co/spaces/9010170/](https://community.aigents.co/spaces/9010170/)

å¦‚æœä½ æƒ³åœ¨æ•°æ®ç§‘å­¦&äººå·¥æ™ºèƒ½é¢†åŸŸå¼€å§‹èŒä¸šç”Ÿæ¶¯ï¼Œä½†ä¸çŸ¥é“å¦‚ä½•å¼€å§‹ã€‚æˆ‘æä¾›æ•°æ®ç§‘å­¦æŒ‡å¯¼è¯¾ç¨‹å’Œé•¿æœŸèŒä¸šæŒ‡å¯¼:

*   é•¿æœŸæŒ‡å¯¼:[https://lnkd.in/dtdUYBrM](https://lnkd.in/dtdUYBrM)
*   è¾…å¯¼è¯¾ç¨‹:[https://lnkd.in/dXeg3KPW](https://lnkd.in/dXeg3KPW)

***åŠ å…¥*** [***ä¸­ç­‰ä¼šå‘˜***](https://youssefraafat57.medium.com/membership) ***è®¡åˆ’ç»§ç»­æ— é™åˆ¶å­¦ä¹ ã€‚å¦‚æœä½ ä½¿ç”¨ä¸‹é¢çš„é“¾æ¥ï¼Œæˆ‘ä¼šæ”¶åˆ°ä¸€å°éƒ¨åˆ†ä¼šå‘˜è´¹ï¼Œä¸éœ€è¦ä½ é¢å¤–ä»˜è´¹ã€‚***

[](https://youssefraafat57.medium.com/membership) [## åŠ å…¥æˆ‘çš„ä»‹ç»é“¾æ¥åª’ä½“-ä¼˜ç´ ç¦èƒ¡æ–¯å°¼

### é˜…è¯» Youssef Hosni(ä»¥åŠåª’ä½“ä¸Šæˆåƒä¸Šä¸‡çš„å…¶ä»–ä½œå®¶)çš„æ¯ä¸€ä¸ªæ•…äº‹ã€‚æ‚¨çš„ä¼šå‘˜è´¹ç›´æ¥æ”¯æŒâ€¦

youssefraafat57.medium.com](https://youssefraafat57.medium.com/membership) 

è´¯ç©¿æœ¬æ–‡ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ [**æ‰‘å…‹ç‰Œæ¸¸æˆæ•°æ®é›†**](https://github.com/youssefHosni/Advanced-Python-for-Data-Scientists/blob/main/Datasets/poker_hand.csv) **ã€‚**é¦–å…ˆï¼Œè®©æˆ‘ä»¬åŠ è½½å¹¶æµè§ˆæ•°æ®:

```
 poker_data = pd.read_csv('poker_hand.csv')
poker_data.head()
```

![](img/01c1c2f2306c95f4187c49809e2783f7.png)

åœ¨æ¯ä¸€è½®æ‰‘å…‹æ¸¸æˆä¸­ï¼Œæ¯ä¸ªç©å®¶æ‰‹é‡Œéƒ½æœ‰äº”å¼ ç‰Œï¼Œæ¯å¼ ç‰Œéƒ½æœ‰å…¶ç¬¦å·å’Œç­‰çº§ï¼Œç¬¦å·å¯ä»¥æ˜¯çº¢å¿ƒã€æ–¹å—ã€æ¢…èŠ±æˆ–é»‘æ¡ƒï¼Œç­‰çº§ä» 1 åˆ° 13 ä¸ç­‰ã€‚è¯¥æ•°æ®é›†ç”±ä¸€ä¸ªäººå¯èƒ½æ‹¥æœ‰çš„äº”å¼ å¡çš„æ‰€æœ‰å¯èƒ½ç»„åˆç»„æˆã€‚

*   Sn:ç¬¬ n å¼ ç‰Œçš„ç¬¦å·ï¼Œå…¶ä¸­:1(çº¢å¿ƒ)ï¼Œ2(æ–¹å—)ï¼Œ3(æ¢…èŠ±)ï¼Œ4(é»‘æ¡ƒ)
*   Rn:ç¬¬ n å¼ ç‰Œçš„ç­‰çº§ï¼Œå…¶ä¸­:1(ç‹ç‰Œ)ï¼Œ2â€“10ï¼Œ11(æ°å…‹)ï¼Œ12(ç‹å)ï¼Œ13(å›½ç‹)

# 1.ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦é«˜æ•ˆçš„ç¼–ç ï¼Ÿ

é«˜æ•ˆä»£ç æ˜¯æŒ‡æ‰§è¡Œé€Ÿåº¦æ›´å¿«ã€è®¡ç®—å†…å­˜æ›´å°‘çš„ä»£ç ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ **time()** å‡½æ•°æ¥æµ‹é‡è®¡ç®—æ—¶é—´ã€‚è¿™ä¸ªå‡½æ•°æµ‹é‡å½“å‰æ—¶é—´ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†åœ¨ä»£ç æ‰§è¡Œå‰å’Œæ‰§è¡ŒåæŠŠå®ƒèµ‹ç»™ä¸€ä¸ªå˜é‡ï¼Œç„¶åè®¡ç®—å·®å€¼ï¼Œå°±çŸ¥é“ä»£ç çš„è®¡ç®—æ—¶é—´ã€‚ä¸‹é¢çš„ä»£ç æ˜¾ç¤ºäº†ä¸€ä¸ªç®€å•çš„ä¾‹å­:

```
import time
# record time before execution
start_time = time.time()
# execute operation
result = 5 + 2
# record time after execution
end_time = time.time()
print("Result calculated in {} sec".format(end_time - start_time))
```

è®©æˆ‘ä»¬çœ‹ä¸€äº›åº”ç”¨é«˜æ•ˆä»£ç æ–¹æ³•å°†å¦‚ä½•æé«˜ä»£ç è¿è¡Œæ—¶é—´å’Œé™ä½è®¡ç®—æ—¶é—´å¤æ‚æ€§çš„ä¾‹å­:æˆ‘ä»¬å°†è®¡ç®—ä»é›¶åˆ°ä¸€ç™¾ä¸‡çš„æ¯ä¸ªæ•°å­—çš„å¹³æ–¹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ list comprehension æ¥æ‰§è¡Œè¿™ä¸ªæ“ä½œï¼Œç„¶åä½¿ç”¨ for å¾ªç¯é‡å¤ç›¸åŒçš„è¿‡ç¨‹ã€‚

ç¬¬ä¸€æ¬¡ä½¿ç”¨åˆ—è¡¨ç†è§£:

```
#using List comprehension 

list_comp_start_time = time.time()
result = [i*i for i in range(0,1000000)]
list_comp_end_time = time.time()
print("Time using the list_comprehension: {} sec".format(list_comp_end_time -
list_comp_start_time))
```

![](img/2f185e300f3ed73f968c51bd61338853.png)

ç°åœ¨æˆ‘ä»¬å°†ä½¿ç”¨ for å¾ªç¯æ¥æ‰§è¡Œç›¸åŒçš„æ“ä½œ:

```
# Using For loop

for_loop_start_time= time.time()
result=[]
for i in range(0,1000000):
  result.append(i*i)
for_loop_end_time= time.time()
print("Time using the for loop: {} sec".format(for_loop_end_time - for_loop_start_time))
```

![](img/835471044a2f946a5f88102507285248.png)

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒä»¬ä¹‹é—´æœ‰å¾ˆå¤§çš„å·®å¼‚ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ç™¾åˆ†æ¯”æ¥è®¡ç®—å®ƒä»¬ä¹‹é—´çš„å·®å¼‚:

```
list_comp_time = list_comp_end_time - list_comp_start_time
for_loop_time = for_loop_end_time - for_loop_start_time
print("Difference in time: {} %".format((for_loop_time - list_comp_time)/
list_comp_time*100))
```

![](img/516cc2c7468f6acd87c07ef4f0458287.png)

è¿™é‡Œæœ‰å¦ä¸€ä¸ªä¾‹å­æ¥å±•ç¤ºç¼–å†™é«˜æ•ˆä»£ç çš„æ•ˆæœã€‚æˆ‘ä»¬æƒ³è®¡ç®—ä» 1 åˆ° 100 ä¸‡çš„æ‰€æœ‰è¿ç»­æ•°å­—çš„æ€»å’Œã€‚æœ‰ä¸¤ç§æ–¹æ³•ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨è›®åŠ›ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°å¢åŠ åˆ°ä¸€ç™¾ä¸‡ã€‚

```
def sum_brute_force(N):
  res = 0
  for i in range(1,N+1):
    res+=i
  return res

# Using brute force
bf_start_time = time.time()
bf_result = sum_brute_force(1000000)
bf_end_time = time.time()

print("Time using brute force: {} sec".format(bf_end_time - bf_start_time))
```

![](img/202c5549d365bc9e3d5223b7274bcc08.png)

å¦ä¸€ä¸ªæ›´æœ‰æ•ˆçš„æ–¹æ³•æ˜¯ç”¨å…¬å¼æ¥è®¡ç®—ã€‚å½“æˆ‘ä»¬æƒ³è®¡ç®—ä» 1 åˆ°ä¸€ä¸ªæ•°çš„æ‰€æœ‰æ•´æ•°çš„å’Œæ—¶ï¼Œæ¯”å¦‚è¯´ Nï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ N ä¹˜ä»¥ N+1ï¼Œç„¶åé™¤ä»¥ 2ï¼Œè¿™æ ·å°±ä¼šå¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚è¿™ä¸ªé—®é¢˜å®é™…ä¸Šåœ¨ 19 ä¸–çºªå°±äº¤ç»™äº†å¾·å›½çš„ä¸€äº›å­¦ç”Ÿï¼Œä¸€ä¸ªåå«å¡å°”-å¼—é‡Œå¾·é‡Œå¸ŒÂ·é«˜æ–¯çš„èªæ˜å­¦ç”Ÿè®¾è®¡äº†è¿™ä¸ªå…¬å¼æ¥åœ¨å‡ ç§’é’Ÿå†…è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

```
def sum_formula(N):
  return N*(N+1)/2

# Using the formula
formula_start_time = time.time()
formula_result = sum_formula(1000000)
formula_end_time = time.time()

print("Time using the formula: {} sec".format(formula_end_time - formula_start_time))
```

![](img/9707e309e24e36c8ab6c9d86df44f90c.png)

è¿è¡Œè¿™ä¸¤ç§æ–¹æ³•åï¼Œæˆ‘ä»¬å®ç°äº†è¶…è¿‡ 160ï¼Œ000%çš„å·¨å¤§æ”¹è¿›ï¼Œè¿™æ¸…æ¥šåœ°è¡¨æ˜äº†ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦é«˜æ•ˆå’Œä¼˜åŒ–çš„ä»£ç ï¼Œå³ä½¿å¯¹äºç®€å•çš„ä»»åŠ¡ä¹Ÿæ˜¯å¦‚æ­¤ã€‚

ç¼–å†™ python ä»£ç çš„æœ€ä½æ•ˆçš„æ–¹æ³•ä¹‹ä¸€æ˜¯åœ¨ä»£ç ä¸­æœ‰è®¸å¤šå¾ªç¯ï¼Œå°¤å…¶æ˜¯å½“æ‚¨æœ‰å¤§é‡æ•°æ®æ—¶ã€‚ç”±äºä½œä¸ºä¸€åæ•°æ®ç§‘å­¦å®¶ï¼Œæ‚¨å°†éœ€è¦å¹¿æ³›åœ°è¿­ä»£æ‚¨çš„æ•°æ®æ¡†æ¶ï¼Œå°¤å…¶æ˜¯åœ¨æ•°æ®å‡†å¤‡å’Œæ¢ç´¢é˜¶æ®µï¼Œå› æ­¤èƒ½å¤Ÿé«˜æ•ˆåœ°å®Œæˆè¿™é¡¹å·¥ä½œéå¸¸é‡è¦ï¼Œå› ä¸ºè¿™å°†ä¸ºæ‚¨èŠ‚çœå¤§é‡æ—¶é—´ï¼Œå¹¶ä¸ºæ›´é‡è¦çš„å·¥ä½œç•™å‡ºç©ºé—´ã€‚æˆ‘ä»¬å°†é€šè¿‡ä¸‰ç§æ–¹æ³•è®©æ‚¨çš„å¾ªç¯æ›´å¿«ã€æ›´æœ‰æ•ˆ:

*   ä½¿ç”¨**å¾ªç¯ã€‚iterrows()** å‡½æ•°
*   ä½¿ç”¨**å¾ªç¯ã€‚apply()** å‡½æ•°
*   â€¦å‘é‡åŒ–â€¦

# 2.ä½¿ç”¨æœ‰æ•ˆå¾ªç¯ã€‚iterrows()

åœ¨æˆ‘ä»¬è°ˆè®ºå¦‚ä½•ä½¿ç”¨**ä¹‹å‰ã€‚iterrows()** å‡½æ•°ä¸ºäº†æ”¹è¿›å¾ªç¯è¿‡ç¨‹ï¼Œè®©æˆ‘ä»¬åˆ·æ–°ä¸€ä¸‹ç”Ÿæˆå™¨å‡½æ•°çš„æ¦‚å¿µã€‚

ç”Ÿæˆå™¨æ˜¯ä¸€ä¸ªåˆ›å»ºè¿­ä»£å™¨çš„ç®€å•å·¥å…·ã€‚åœ¨ç”Ÿæˆå™¨ä¸»ä½“å†…éƒ¨ï¼Œæ‚¨å°†å‘ç°åªæœ‰ **yield()** è¯­å¥ï¼Œè€Œä¸æ˜¯ return è¯­å¥ã€‚å¯ä»¥åªæœ‰ä¸€ä¸ªæˆ–å‡ ä¸ª **yield()** è¯­å¥ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œ **city_name_generator()** ï¼Œå®ƒç”Ÿæˆå››ä¸ªåŸå¸‚åã€‚ä¸ºç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†ç”Ÿæˆå™¨åˆ†é…ç»™å˜é‡ **city_names** ã€‚

```
def city_name_generator():
  yield('New York')
  yield('London')
  yield('Tokyo')
  yield('Sao Paolo')

city_names = city_name_generator()
```

ä¸ºäº†è®¿é—®ç”Ÿæˆå™¨ç”Ÿæˆçš„å…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Python çš„ **next()** å‡½æ•°ã€‚æ¯æ¬¡ä½¿ç”¨ **next()** å‘½ä»¤æ—¶ï¼Œç”Ÿæˆå™¨å°†ç”Ÿæˆä¸‹ä¸€ä¸ªè¦ç”Ÿæˆçš„å€¼ï¼Œç›´åˆ°ä¸å†æœ‰è¦ç”Ÿæˆçš„å€¼ã€‚æˆ‘ä»¬è¿™é‡Œæœ‰ 4 ä¸ªåŸå¸‚ã€‚è®©æˆ‘ä»¬è¿è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤å››æ¬¡ï¼Œçœ‹çœ‹å®ƒä¼šè¿”å›ä»€ä¹ˆ:

```
next(city_names)
```

![](img/50689efa4eeb6273acd1fea7accb3843.png)

```
next(city_names)
```

![](img/1e2d2ca2b11d160785dbadb0990a4881.png)

```
next(city_names)
```

![](img/6a729752602da0891943206f39fa8ef1.png)

æ­£å¦‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°çš„ï¼Œæ¯æ¬¡æˆ‘ä»¬è¿è¡Œ **next()** å‡½æ•°ï¼Œå®ƒéƒ½ä¼šæ‰“å°ä¸€ä¸ªæ–°çš„åŸå¸‚åã€‚

è®©æˆ‘ä»¬å›åˆ°ã€‚ **iterrows()** å‡½æ•°ã€‚**ã€‚iterrows()** å‡½æ•°æ˜¯æ¯ä¸ªç†ŠçŒ« DataFrame çš„å±æ€§ã€‚å½“è¢«è°ƒç”¨æ—¶ï¼Œå®ƒäº§ç”Ÿä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå…ƒç´ çš„åˆ—è¡¨ã€‚æˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ªç”Ÿæˆå™¨æ¥éå†æˆ‘ä»¬çš„**æ‰‘å…‹**æ•°æ®å¸§çš„æ¯ä¸€è¡Œã€‚ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯è¯¥è¡Œçš„ç´¢å¼•ï¼Œè€Œç¬¬äºŒä¸ªå…ƒç´ åŒ…å«è¯¥è¡Œæ¯ä¸ªç‰¹å¾çš„ç†ŠçŒ«ç³»åˆ—:äº”å¼ å¡ç‰‡ä¸­æ¯å¼ å¡ç‰‡çš„ç¬¦å·å’Œç­‰çº§ã€‚å®ƒéå¸¸ç±»ä¼¼äº **enumerate()** å‡½æ•°çš„æ¦‚å¿µï¼Œå½“åº”ç”¨äºåˆ—è¡¨æ—¶ï¼Œè¿”å›æ¯ä¸ªå…ƒç´ åŠå…¶ç´¢å¼•ã€‚

éå† Pandas æ•°æ®å¸§æœ€ç›´è§‚çš„æ–¹æ³•æ˜¯ä½¿ç”¨ **range()** å‡½æ•°ï¼Œè¿™é€šå¸¸è¢«ç§°ä¸ºç²—å¾ªç¯ã€‚ä¸‹é¢çš„ä»£ç æ˜¾ç¤ºäº†è¿™ä¸€ç‚¹:

```
start_time = time.time()
for index in range(poker_data.shape[0]):
  next
print("Time using range(): {} sec".format(time.time() - start_time))
```

![](img/bb0611cd857c87dda32475bcc9fd269c.png)

è¿­ä»£ç†ŠçŒ«æ•°æ®æ¡†æ¶çš„ä¸€ä¸ªæ›´èªæ˜çš„æ–¹æ³•æ˜¯ä½¿ç”¨**ã€‚iterrows()** å‡½æ•°ï¼Œè¯¥å‡½æ•°é’ˆå¯¹æ­¤ä»»åŠ¡è¿›è¡Œäº†ä¼˜åŒ–ã€‚æˆ‘ä»¬ç®€å•åœ°ç”¨ä¸¤ä¸ªè¿­ä»£å™¨å®šä¹‰äº†â€œ **for** â€å¾ªç¯ï¼Œä¸€ä¸ªç”¨äºæ¯è¡Œçš„ç¼–å·ï¼Œå¦ä¸€ä¸ªç”¨äºæ‰€æœ‰çš„å€¼ã€‚

åœ¨å¾ªç¯å†…éƒ¨ï¼Œ **next()** å‘½ä»¤æŒ‡ç¤ºå¾ªç¯ç§»åŠ¨åˆ°è¿­ä»£å™¨çš„ä¸‹ä¸€ä¸ªå€¼ï¼Œè€Œä¸å®é™…åšä»»ä½•äº‹æƒ…ã€‚

```
data_generator = poker_data.iterrows()
start_time = time.time()
for index, values in data_generator:
  next
print("Time using .iterrows(): {} sec".format(time.time() - start_time))
```

![](img/0a492cc4333477238a0f731bfd1a82e4.png)

æ¯”è¾ƒè¿™ä¸¤ä¸ªè®¡ç®—æ—¶é—´æˆ‘ä»¬è¿˜å¯ä»¥æ³¨æ„åˆ°**çš„ä½¿ç”¨ã€‚iterrows()** æ²¡æœ‰æé«˜éå† pandas æ•°æ®å¸§çš„é€Ÿåº¦ã€‚å½“æˆ‘ä»¬éœ€è¦ä¸€ç§æ›´ç®€æ´çš„æ–¹å¼æ¥ä½¿ç”¨æ¯ä¸€è¡Œçš„å€¼æ—¶ï¼Œå®ƒæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚

# 3.ä½¿ç”¨æœ‰æ•ˆå¾ªç¯ã€‚åº”ç”¨()

ç°åœ¨æˆ‘ä»¬å°†ä½¿ç”¨**ã€‚apply()** å‡½æ•°èƒ½å¤Ÿåœ¨éå†ç†ŠçŒ«æ•°æ®å¸§æ—¶æ‰§è¡Œç‰¹å®šçš„ä»»åŠ¡ã€‚**ã€‚apply()** å‡½æ•°ç¡®å®å¦‚å®ƒæ‰€è¯´çš„é‚£æ ·ï¼›å®ƒå¯¹æ•´ä¸ªæ•°æ®å¸§åº”ç”¨å¦ä¸€ä¸ªå‡½æ•°ã€‚

**çš„è¯­æ³•ã€‚apply()** å‡½æ•°å¾ˆç®€å•:æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ˜ å°„ï¼Œåœ¨æœ¬ä¾‹ä¸­ä½¿ç”¨ lambda å‡½æ•°ï¼Œç„¶åå£°æ˜æˆ‘ä»¬æƒ³è¦åº”ç”¨äºæ¯ä¸ªå•å…ƒæ ¼çš„å‡½æ•°ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å°†å¹³æ–¹æ ¹å‡½æ•°åº”ç”¨äºæ•°æ®å¸§çš„æ¯ä¸ªå•å…ƒæ ¼ã€‚å°±é€Ÿåº¦è€Œè¨€ï¼Œå®ƒä¸åœ¨æ•´ä¸ªæ•°æ®å¸§ä¸Šåªä½¿ç”¨ NumPy **sqrt()** å‡½æ•°çš„é€Ÿåº¦ç›¸å½“ã€‚

```
data_sqrt = poker_data.apply(lambda x: np.sqrt(x))
data_sqrt.head()
```

![](img/69b0e09f5cb85956147ccbaf817adccc.png)

è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå› ä¸ºæˆ‘ä»¬æƒ³å°†è¿™ä¸ªå‡½æ•°åº”ç”¨äºæ•°æ®å¸§ã€‚

ä½†æ˜¯ï¼Œå½“ç›®æ ‡å‡½æ•°æ¥å—å¤šä¸ªå•å…ƒæ ¼ä½œä¸ºè¾“å…¥æ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è®¡ç®—æ¯æ‰‹ç‰Œä¸­æ‰€æœ‰ç‰Œçš„æ’åä¹‹å’Œï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ã€‚apply()å‡½æ•°å’Œæˆ‘ä»¬ä¹‹å‰åšçš„ä¸€æ ·ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦åœ¨è¡Œå°¾æ·»åŠ  **'axis=1'** æ¥æŒ‡å®šæˆ‘ä»¬å°†å‡½æ•°åº”ç”¨åˆ°æ¯ä¸€è¡Œã€‚

```
apply_start_time = time.time()
poker_data[['R1', 'R2', 'R3', 'R4', 'R5']].apply(lambda x: sum(x), axis=1)
apply_end_time = time.time()
apply_time = apply_end_time - apply_start_time
print("Time using .apply(): {} sec".format(time.time() - apply_start_time))
```

![](img/4f7db2a1594c407a4687976f10a22241.png)

ç„¶åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨**ã€‚iterrows()** å‡½æ•°æˆ‘ä»¬ä»¥å‰è§è¿‡ï¼Œå¹¶æ¯”è¾ƒå®ƒä»¬çš„æ•ˆç‡ã€‚

```
for_loop_start_time = time.time()
for ind, value in poker_data.iterrows():
  sum([value[1], value[3], value[5], value[7], value[9]])
for_loop_end_time = time.time()

for_loop_time = for_loop_end_time - for_loop_start_time
print("Time using .iterrows(): {} sec".format(for_loop_time))
```

![](img/d9eca39ed688fb03f0060067d17bc0f7.png)

ä½¿ç”¨**ã€‚apply()** å‡½æ•°æ˜æ˜¾æ¯”**å¿«ã€‚iterrows()** å‡½æ•°ï¼Œå¹…åº¦çº¦ä¸º 400 %,è¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„æ”¹è¿›ï¼

```
print('The differnce: {} %'.format((for_loop_time - apply_time) / apply_time * 100))
```

![](img/308e4b594568c42dd012f12dba4bbe51.png)

æ­£å¦‚æˆ‘ä»¬å¯¹è¡Œæ‰€åšçš„é‚£æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹åˆ—åšå®Œå…¨ç›¸åŒçš„äº‹æƒ…ï¼›å¯¹æ¯åˆ—åº”ç”¨ä¸€ä¸ªå‡½æ•°ã€‚é€šè¿‡å°†**è½´=1** æ›¿æ¢ä¸º**è½´=0** ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯ä¸€åˆ—åº”ç”¨æ±‚å’Œå‡½æ•°ã€‚

```
apply_start_time = time.time()
poker_data[['R1', 'R2', 'R3', 'R4', 'R5']].apply(lambda x: sum(x), axis=0)
apply_end_time = time.time()
apply_time = apply_end_time - apply_start_time
print("Time using .apply(): {} sec".format(apply_time))
```

![](img/f75cc594a0e51903fefb53b1bf7fb64c.png)

é€šè¿‡æ¯”è¾ƒã€‚ **apply()** å‡½æ•°ç”¨åŸç”Ÿç†ŠçŒ«çš„å‡½æ•°å¯¹å¤šè¡Œæ±‚å’Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç†ŠçŒ«çš„åŸç”Ÿ**ã€‚sum()** å‡½æ•°æ‰§è¡Œç›¸åŒæ“ä½œçš„é€Ÿåº¦æ›´å¿«ã€‚

```
pandas_start_time = time.time()
poker_data[['R1', 'R1', 'R3', 'R4', 'R5']].sum(axis=0)
pandas_end_time = time.time()
pandas_time = pandas_end_time - pandas_start_time
print("Time using pandas: {} sec".format(pandas_time))
```

![](img/26924d88cef2866ff4bb4d1a08567036.png)

```
print('The differnce: {} %'.format((apply_time - pandas_time) / pandas_time * 100))
```

![](img/c759fb359e4bcca32b13681730ad9ccb.png)

**æ€»ä¹‹ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°ã€‚å½“æˆ‘ä»¬æƒ³è¦éå† pandas æ•°æ®å¸§çš„æ‰€æœ‰è¡Œæ—¶ï¼Œapply()å‡½æ•°æ‰§è¡Œå¾—æ›´å¿«ï¼Œä½†æ˜¯å½“æˆ‘ä»¬é€šè¿‡ä¸€åˆ—æ‰§è¡Œç›¸åŒçš„æ“ä½œæ—¶ï¼Œå®ƒæ‰§è¡Œå¾—æ›´æ…¢ã€‚**

# 4.ä½¿ç”¨çŸ¢é‡åŒ–æœ‰æ•ˆå¾ªç¯

ä¸ºäº†ç†è§£å¦‚ä½•å‡å°‘å‡½æ•°æ‰§è¡Œçš„è¿­ä»£æ¬¡æ•°ï¼Œå›æƒ³ä¸€ä¸‹ Pandas çš„åŸºæœ¬å•å…ƒ DataFrames å’Œ Series éƒ½æ˜¯åŸºäºæ•°ç»„çš„ã€‚å½“å¯¹æ•´ä¸ªæ•°ç»„æ‰§è¡Œæ“ä½œæ—¶ï¼ŒPandas çš„æ‰§è¡Œæ•ˆç‡æ¯”å¯¹æ¯ä¸ªå€¼å•ç‹¬æˆ–é¡ºåºæ‰§è¡Œæ›´é«˜ã€‚è¿™å¯ä»¥é€šè¿‡**çŸ¢é‡åŒ–**æ¥å®ç°ã€‚**çŸ¢é‡åŒ–**æ˜¯å¯¹æ•´ä¸ªæ•°ç»„æ‰§è¡Œæ“ä½œçš„è¿‡ç¨‹ã€‚

åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬è¦è®¡ç®—æ¯æ‰‹ç‰Œä¸­æ‰€æœ‰ç‰Œçš„ç­‰çº§ä¹‹å’Œã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯¹æ‰‘å…‹æ•°æ®é›†è¿›è¡Œåˆ‡ç‰‡ï¼Œåªä¿ç•™åŒ…å«æ¯å¼ ç‰Œçš„ç­‰çº§çš„åˆ—ã€‚ç„¶åï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå†…ç½®**ã€‚DataFrame çš„ sum()** å±æ€§ï¼Œä½¿ç”¨å‚æ•° axis = 1 æ¥è¡¨ç¤ºæˆ‘ä»¬éœ€è¦æ¯è¡Œçš„æ€»å’Œã€‚æœ€åï¼Œæˆ‘ä»¬æ‰“å°å‰äº”è¡Œæ•°æ®çš„æ€»å’Œã€‚

```
start_time_vectorization = time.time()

poker_data[['R1', 'R2', 'R3', 'R4', 'R5']].sum(axis=1)
end_time_vectorization = time.time()

vectorization_time = end_time_vectorization  - start_time_vectorization
print("Time using pandas vectorization: {} sec".format(vectorization_time))
```

![](img/5de67790c45965fe50f92532cc4d0c0e.png)

æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°äº†å„ç§æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•æ‰§è¡Œåº”ç”¨äºæ•°æ®å¸§çš„å‡½æ•°æ¯”ç®€å•åœ°éå†æ•°æ®å¸§çš„æ‰€æœ‰è¡Œè¦å¿«ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ‰¾åˆ°æ‰§è¡Œè¿™é¡¹ä»»åŠ¡çš„æœ€æœ‰æ•ˆçš„æ–¹æ³•ã€‚

*   ä½¿ç”¨**ã€‚iterrows()** å¾ªç¯éå†æ•°æ®å¸§:

```
data_generator = poker_data.iterrows()

start_time_iterrows = time.time()

for index, value in data_generator:
  sum([value[1], value[3], value[5], value[7]])

end_time_iterrows = time.time()
iterrows_time = end_time_iterrows - start_time_iterrows
print("Time using .iterrows() {} seconds " .format(iterrows_time))
```

![](img/f1d29cfba9afaae3c0fd78d3dcbede69.png)

*   ä½¿ç”¨ã€‚apply()æ–¹æ³•

```
start_time_apply = time.time()
poker_data[['R1', 'R2', 'R3', 'R4', 'R5']].apply(lambda x: sum(x),axis=1)
end_time_apply = time.time()

apply_time = end_time_apply - start_time_apply

print("Time using apply() {} seconds"  .format(apply_time))
```

![](img/d684b143d93f976bd99239e70f256f76.png)

ä½¿ç”¨**çŸ¢é‡åŒ–**å’Œ**æ¯”è¾ƒæ¯æ‰‹ç‰Œä¸­æ‰€æœ‰ç‰Œçš„ç­‰çº§ç›¸åŠ æ‰€éœ€çš„æ—¶é—´ã€‚iterrows()** å‡½æ•°ï¼Œä»¥åŠ**ã€‚apply()** å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°çŸ¢é‡åŒ–æ–¹æ³•çš„æ€§èƒ½è¦å¥½å¾—å¤šã€‚

æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å¦ä¸€ç§çŸ¢é‡åŒ–æ–¹æ³•æ¥æœ‰æ•ˆåœ°éå†æ•°æ®å¸§ï¼Œè¯¥æ–¹æ³•ä½¿ç”¨ Numpy æ•°ç»„å¯¹æ•°æ®å¸§è¿›è¡ŒçŸ¢é‡åŒ–ã€‚

NumPy åº“å°†è‡ªå·±å®šä¹‰ä¸ºâ€œPython ä¸­ç§‘å­¦è®¡ç®—çš„åŸºç¡€åŒ…â€ï¼Œå®ƒåœ¨ä¼˜åŒ–çš„é¢„ç¼–è¯‘ C ä»£ç ä¸­æ‰§è¡Œæ“ä½œã€‚ä¸ pandas å¤„ç†æ•°ç»„ç±»ä¼¼ï¼ŒNumPy å¯¹åä¸º **ndarrays** çš„æ•°ç»„è¿›è¡Œæ“ä½œã€‚Series å’Œ ndarrays ä¹‹é—´çš„ä¸€ä¸ªä¸»è¦åŒºåˆ«æ˜¯ ndarrays çœç•¥äº†è®¸å¤šæ“ä½œï¼Œå¦‚ç´¢å¼•ã€æ•°æ®ç±»å‹æ£€æŸ¥ç­‰ã€‚å› æ­¤ï¼Œåœ¨ NumPy é˜µåˆ—ä¸Šçš„æ“ä½œæ¯”åœ¨ pandas ç³»åˆ—ä¸Šçš„æ“ä½œè¦å¿«å¾—å¤šã€‚å½“ pandas ç³»åˆ—æä¾›çš„é™„åŠ åŠŸèƒ½ä¸é‡è¦æ—¶ï¼ŒNumPy é˜µåˆ—å¯ä»¥ç”¨æ¥ä»£æ›¿ pandas ç³»åˆ—ã€‚

å¯¹äºæˆ‘ä»¬åœ¨æœ¬æ–‡ä¸­æ¢ç´¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ NumPy ndarrays æ¥ä»£æ›¿ pandas ç³»åˆ—ã€‚å…³é”®çš„é—®é¢˜æ˜¯è¿™æ˜¯å¦ä¼šæ›´æœ‰æ•ˆç‡ã€‚

åŒæ ·ï¼Œæˆ‘ä»¬å°†è®¡ç®—æ¯æ‰‹ç‰Œä¸­æ‰€æœ‰ç‰Œçš„ç­‰çº§æ€»å’Œã€‚æˆ‘ä»¬ç®€å•åœ°é€šè¿‡ä½¿ç”¨**å°†æˆ‘ä»¬çš„ rank æ•°ç»„ä» pandas ç³»åˆ—è½¬æ¢æˆ NumPy æ•°ç»„ã€‚ç†ŠçŒ«ç³»åˆ—çš„ values** æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†ç†ŠçŒ«ç³»åˆ—ä½œä¸º NumPy **ndarray** è¿”å›ã€‚ä¸å¯¹åºåˆ—è¿›è¡ŒçŸ¢é‡åŒ–ä¸€æ ·ï¼Œå°† NumPy æ•°ç»„ç›´æ¥ä¼ é€’ç»™å‡½æ•°å°†å¯¼è‡´ pandas å°†å‡½æ•°åº”ç”¨äºæ•´ä¸ªçŸ¢é‡ã€‚

```
start_time = time.time()

poker_data[['R1', 'R2', 'R3', 'R4', 'R5']].values.sum(axis=1)

print("Time using NumPy vectorization: {} sec" .format(time.time() - start_time))
```

![](img/cf21c70a80887c482a30fcb9d5fab31b.png)

```
start_time = time.time()
poker_data[['R1', 'R2', 'R3', 'R4', 'R5']].sum(axis=1)
print("Results from the above operation calculated in %s seconds" % (time.time() - start_time))
```

![](img/72ee74df8fa53147c60400320bfc9603.png)

åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹ pandas ç³»åˆ—çš„çŸ¢é‡åŒ–å®ç°äº†æ—¥å¸¸è®¡ç®—çš„ç»å¤§å¤šæ•°ä¼˜åŒ–éœ€æ±‚ã€‚ç„¶è€Œï¼Œå¦‚æœé€Ÿåº¦æ˜¯æœ€é‡è¦çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ **NumPy** Python åº“çš„å½¢å¼æ¥å¯»æ±‚å¸®åŠ©ã€‚ä¸ä¹‹å‰æœ€å…ˆè¿›çš„ panda ä¼˜åŒ–æ–¹æ³•ç›¸æ¯”ï¼Œæˆ‘ä»¬ä»ç„¶åœ¨è¿è¡Œæ—¶é—´ä¸Šæœ‰æ‰€æ”¹è¿›ã€‚

# 5.æœ€ä½³å®è·µæ€»ç»“

*   ä½¿ç”¨ã€‚ **iterrows()** æ²¡æœ‰æé«˜éå†æ•°æ®å¸§çš„é€Ÿåº¦ï¼Œä½†æ•ˆç‡æ›´é«˜ã€‚
*   **ã€‚å½“æˆ‘ä»¬æƒ³è¦éå†ç†ŠçŒ«æ•°æ®å¸§çš„æ‰€æœ‰è¡Œæ—¶ï¼Œapply()** å‡½æ•°æ‰§è¡Œå¾—æ›´å¿«ï¼Œä½†æ˜¯å½“æˆ‘ä»¬é€šè¿‡ä¸€åˆ—æ‰§è¡Œç›¸åŒçš„æ“ä½œæ—¶ï¼Œæ‰§è¡Œå¾—æ›´æ…¢ã€‚
*   å¯¹ pandas ç³»åˆ—è¿›è¡ŒçŸ¢é‡åŒ–å¤„ç†å¯ä»¥æ»¡è¶³æ—¥å¸¸è®¡ç®—çš„ç»å¤§å¤šæ•°ä¼˜åŒ–éœ€æ±‚ã€‚ç„¶è€Œï¼Œå¦‚æœé€Ÿåº¦æ˜¯æœ€é‡è¦çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ **NumPy** Python åº“çš„å½¢å¼è°ƒç”¨å¢æ´ã€‚

***æ„Ÿè°¢é˜…è¯»ï¼å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·åŠ¡å¿…:***

*   **ğŸ‘ä¸ºè¿™ä¸ªæ•…äº‹é¼“æŒ(50 æ¬¡)å¹¶è·Ÿæˆ‘æ¥ğŸ‘‰**
*   **ğŸ“°æŸ¥çœ‹æˆ‘çš„ä¸ªäººèµ„æ–™ä¸­çš„æ›´å¤šå†…å®¹**
*   **ğŸ””å…³æ³¨æˆ‘:**[**LinkedIn**](https://www.linkedin.com/in/youssef-hosni-b2960b135/)**|**[**Medium**](https://medium.com/@youssefraafat57)**|**[**Twitter**](https://twitter.com/Youssef70125494)**|**[**GitHub**](https://github.com/youssefHosni)
*   *ğŸš€ğŸ‘‰* ***åŠ å…¥*** [***ä¸­ç­‰ä¼šå‘˜***](https://youssefraafat57.medium.com/membership) ***è®¡åˆ’ç»§ç»­æ— é™åˆ¶å­¦ä¹ ã€‚å¦‚æœä½ ä½¿ç”¨ä¸‹é¢çš„é“¾æ¥ï¼Œæˆ‘ä¼šæ”¶åˆ°ä¸€å°éƒ¨åˆ†ä¼šå‘˜è´¹ï¼Œä¸éœ€è¦ä½ é¢å¤–ä»˜è´¹ã€‚***

[](https://youssefraafat57.medium.com/membership) [## åŠ å…¥æˆ‘çš„ä»‹ç»é“¾æ¥åª’ä½“-ä¼˜ç´ ç¦èƒ¡æ–¯å°¼

### é˜…è¯» Youssef Hosni(ä»¥åŠåª’ä½“ä¸Šæˆåƒä¸Šä¸‡çš„å…¶ä»–ä½œå®¶)çš„æ¯ä¸€ä¸ªæ•…äº‹ã€‚æ‚¨çš„ä¼šå‘˜è´¹ç›´æ¥æ”¯æŒâ€¦

youssefraafat57.medium.com](https://youssefraafat57.medium.com/membership)