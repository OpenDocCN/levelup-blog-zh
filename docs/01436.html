<html>
<head>
<title>Fluttering Dart: Libraries and Packages</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">飞舞的飞镖:库和包</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/fluttering-dart-libraries-and-packages-972edf864ff9?source=collection_archive---------1-----------------------#2019-12-31">https://levelup.gitconnected.com/fluttering-dart-libraries-and-packages-972edf864ff9?source=collection_archive---------1-----------------------#2019-12-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="db95" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" rel="noopener ugc nofollow" target="_blank" href="https://levelup.gitconnected.com/fluttering-dart/home">飘动的飞镖</a></h2><div class=""/><div class=""><h2 id="96de" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">如何使用、构建、重用和共享您的代码</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/784c349197c3b7f61ac526d5b45770d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S0zj6ABC4wGSUcHiObW6RQ.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@goldensson?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">海顿·戈尔登</a>在<a class="ae lh" href="https://unsplash.com/collections/9242643/m/0267731cfd50cb7de643e1e165a506cd?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="3cab" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果你需要在模块化的基础上构建你的项目，库将会帮助你。</p><p id="0440" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">它们允许你将一些代码或模块分割成多个文件，并与其他开发者共享。</p><p id="ba2f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">除了代码结构化之外，库的另一个好处是它们允许库封装(确定什么对其他库可见或不可见)。</p><h1 id="d091" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">Dart库</h1><p id="e357" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">要定义一个库，所有需要做的就是创建一个包含一些代码的Dart文件。</p><p id="bdaa" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了<strong class="lk jd">导入</strong>它，我们可以在文件的开头添加<code class="fe nb nc nd ne b">import path_to_your_library;</code>语句。</p><p id="2ddf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当导入时，我们可以使用<code class="fe nb nc nd ne b">show</code>和<code class="fe nb nc nd ne b">hide</code>关键字来导入我们将在代码中使用的一些标识符，或者分别排除那些我们确定不想导入的标识符。</p><p id="1279" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，为了只使用Dart数学核心库中的Point类，我们将编写:</p><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="6ddf" class="nj mf it ne b gy nk nl l nm nn">import 'dart:math' <strong class="ne jd">show </strong>Point<strong class="ne jd">;</strong></span></pre><p id="faf8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">或者使用除Point类之外的所有其他类，我们将编写:</p><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="e33a" class="nj mf it ne b gy nk nl l nm nn">import 'dart:math' <strong class="ne jd">hide </strong>Point<strong class="ne jd">;</strong></span></pre><p id="ce55" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当我们想要导入定义相同标识符的库时，我们还必须使用<code class="fe nb nc nd ne b">as</code>关键字。这样我们可以避免潜在的冲突。</p><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="2208" class="nj mf it ne b gy nk nl l nm nn">import 'dart:math' <strong class="ne jd">as </strong>Math<strong class="ne jd">;</strong></span></pre><p id="ed18" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">仅此而已！</p><h2 id="cef3" class="nj mf it bd mg no np dn mk nq nr dp mo lr ns nt mq lv nu nv ms lz nw nx mu iz bi translated">导入库的方式</h2><p id="0042" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">要导入库，我们有多种选择:</p><ul class=""><li id="b0e1" class="ny nz it lk b ll lm lo lp lr oa lv ob lz oc md od oe of og bi translated"><strong class="lk jd">文件的相对路径</strong>—当库在同一文件夹中时使用</li><li id="f8ac" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><strong class="lk jd">文件的绝对路径</strong>——通过添加<code class="fe nb nc nd ne b">file://</code> URI前缀，我们可以引用计算机上的库文件</li><li id="428f" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><strong class="lk jd">一个web URL</strong>——与绝对路径的情况相同，但是使用了<code class="fe nb nc nd ne b">http://</code>协议</li><li id="ca39" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><strong class="lk jd">一个包</strong> —这是导入库的最流行和推荐的选项；我们指定从<code class="fe nb nc nd ne b">package</code>根到库文件的路径</li></ul><h2 id="e3d6" class="nj mf it bd mg no np dn mk nq nr dp mo lr ns nt mq lv nu nv ms lz nw nx mu iz bi translated">创建库</h2><p id="7acc" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">Dart库可以由单个文件(最常见和推荐的方式)或多个文件组成。</p><p id="8029" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">正如所料，我们得到了可选的关键字<code class="fe nb nc nd ne b">library</code>来定义一个库。这在创建分布在多个文件中的库或在发布库之前为库创建文档时非常有用。</p><p id="2b67" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">小型库由单个文件组成。可以将库定义拆分为多个文件，但如果没有必要，不建议这样做。拆分对<a class="ae lh" href="https://medium.com/@constanting/fluttering-dart-oop-8b92cd89a7f0" rel="noopener">封装</a>以及库本身的导入和使用方式都有影响。</p><p id="90ae" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在Dart中，默认情况下，一切都是公开的。为了标记私有的东西，我们使用了<code class="fe nb nc nd ne b">_</code>(下划线)字符。我们也可以使用由<strong class="lk jd">元</strong> Dart包提供的<code class="fe nb nc nd ne b">@protected</code>注释。当添加到类成员时，它指示该成员应该只在类或其子类型中使用。</p><p id="9363" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">两种方式(或者是<code class="fe nb nc nd ne b">_</code>或者是<code class="fe nb nc nd ne b">@protected</code>)都将被标记的成员设置为私有，私有会阻止其外部访问。</p><p id="7a6a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当定义单个文件库时，我们只需在一个文件中编写所有代码，仅此而已。</p><p id="a067" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当定义多文件库时，我们可以使用组合的<code class="fe nb nc nd ne b">part</code>、<code class="fe nb nc nd ne b">part of</code>和<code class="fe nb nc nd ne b">library</code>语句:</p><ul class=""><li id="cf07" class="ny nz it lk b ll lm lo lp lr oa lv ob lz oc md od oe of og bi translated"><code class="fe nb nc nd ne b">part</code> —允许库提及其组成的库部件</li><li id="d822" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><code class="fe nb nc nd ne b">part of</code> —在库部件中使用，说明它属于哪个库</li><li id="75bd" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><code class="fe nb nc nd ne b">library</code>-在<code class="fe nb nc nd ne b">part</code>语句之前，将零件链接到库的<code class="fe nb nc nd ne b">main</code>零件</li></ul><p id="99f7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">更好的方法是完全避免使用上述语句进行组合，而只是将库拆分成小的单个库。之后，使用<code class="fe nb nc nd ne b">export</code>语句在库的<code class="fe nb nc nd ne b">main</code>中创建组合。通过这种方式，库用户只需导入一个文件，所有在其中导出的较小的库也将可用。</p><h1 id="4707" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">镖包</h1><p id="52fb" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">每个Dart项目都有一个相应的Dart包。</p><p id="5a6d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用包的主要好处是包内的代码可以重用和共享。使用<code class="fe nb nc nd ne b">pub</code>工具将依赖项发送和提取到pub.dartlang.org网站和存储库。</p><p id="39c5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在我们的项目中使用一个库包使得这个包和<strong class="lk jd">直接依赖</strong>。这种依赖性可能有自己的依赖性，这些依赖性被称为<strong class="lk jd">传递依赖性</strong>。</p><p id="f6f1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在Dart中，有两种类型的包:</p><ul class=""><li id="b095" class="ny nz it lk b ll lm lo lp lr oa lv ob lz oc md od oe of og bi translated"><strong class="lk jd">应用</strong>包</li><li id="782d" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><strong class="lk jd">库</strong>包</li></ul><p id="97bd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">应用程序本身就是包。这些包并不意味着依赖于其他包。</p><p id="b08d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">库包是可以重用和共享的包。这些可以用作依赖项。</p><p id="fb56" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这些类型的包的推荐结构几乎是相同的。用途和目的是不同的。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/214158034d646b35b13cf51b35272940.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*8GIfQ9c-VJp33SkKepZUsg.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">Dart包装工具</figcaption></figure><p id="f3ce" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们看一下上面的每一项:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/6abe910785ffe5d214063b9f66caafaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*Igf4PDQbHwiRDpR5ql1xKg.jpeg"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">在已发布的软件包中用于用法演示。</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/c987c143f75ab6e6eebdb731201e6795.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*USIh_EXBdqSBbASoomnOvw.jpeg"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">这些是源代码所在的文件夹。</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/0e2b3af1e76bdd3dfe4a0d5cb27b6703.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*u7H-qFtaRiyW6jDBXnz62Q.jpeg"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">这通常与包的名称相同。它可以用来<strong class="bd mg">导出</strong>本地<strong class="bd mg"> src </strong>库。</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/0a0af3ee188a5a1d04012a881d15b71d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*5nBuF5UCf_sD0Hz0jXzBWw.jpeg"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">单元测试和基准分析将放在这个文件夹中。</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/f6739513f13c0d15a43e4fd1dac18fe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*-aemp4Zx0h3zm0gmR2WftA.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">声明将要从Git中排除的文件。</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/33590558a2c414544c3f02b984744a1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*7-xVTq942nrgh-3YQ23Tsg.jpeg"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">映射本地系统的pub缓存中的依赖关系。</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/f0ee40a25802cecb5dd18bb371a939b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*Wv_XSFq0-yjwHhiYQ14_sg.jpeg"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">对于自定义lint检查、样式分析和其他预编译检查非常有用。</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/dd80f12843854a93f7d877e9fd2706eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*7GE7rQe6YbBN5MwoWoAyzw.jpeg"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">提供变更日志信息的降价文件。</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/cb120d6f5c812792f8fe05390f30c2ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*mBIyPB3L2ZnZq-4R5sFUHw.jpeg"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">锁定的包兼容依赖项。</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/a8deff283bd6d38fc9c87e7185990325.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*YlZVw-g6yTuTzlAdJW_QwQ.jpeg"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">向发布库描述它的基本包文件。</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/b76414723a40f329bb90df45bf3cb228.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*kw9Ho8nbP7OUJMSSAb73tw.jpeg"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">提供关于包的一般信息的降价文件。</figcaption></figure><p id="cf04" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">正如我们将在未来看到的，一个Flutter项目结构类似于一个Dart包。</p><h2 id="2cdc" class="nj mf it bd mg no np dn mk nq nr dp mo lr ns nt mq lv nu nv ms lz nw nx mu iz bi translated">pubspec.yaml文件</h2><p id="74f9" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">这是飞镖包的核心。理解这种文件结构对于描述包是至关重要的。</p><p id="183d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">该文件使用了<code class="fe nb nc nd ne b"><a class="ae lh" href="https://en.wikipedia.org/wiki/YAML" rel="noopener ugc nofollow" target="_blank">YAML</a></code>语法。这种格式通常用于配置文件，具有可读的结构。</p><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="7d18" class="nj mf it ne b gy nk nl l nm nn"><strong class="ne jd">name</strong>: fluttering_dart<br/>description: A starting point for Dart libraries or applications.<br/>version: 1.0.0<br/>homepage: <a class="ae lh" href="https://www.example.com" rel="noopener ugc nofollow" target="_blank">https://www.constanting.com</a><br/>author: Constantin Stan &lt;aflutterdev+medium@gmail.com&gt;</span><span id="0475" class="nj mf it ne b gy on nl l nm nn">environment:<br/>  sdk: '&gt;=2.7.0 &lt;3.0.0'</span><span id="41c8" class="nj mf it ne b gy on nl l nm nn">dependencies:<br/>  path: ^1.6.0</span><span id="8bb4" class="nj mf it ne b gy on nl l nm nn">dev_dependencies:<br/>  pedantic: ^1.8.0<br/>  test: ^1.6.0</span></pre><p id="31dd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这个文件提供了包元数据信息，当我们想要发布包时很有用，定义了第三方依赖和Dart <a class="ae lh" href="https://en.wikipedia.org/wiki/Software_development_kit" rel="noopener ugc nofollow" target="_blank"> SDK </a>版本。</p><p id="942c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们检查一下<code class="fe nb nc nd ne b">pubspec</code>组件:</p><ul class=""><li id="5908" class="ny nz it lk b ll lm lo lp lr oa lv ob lz oc md od oe of og bi translated"><code class="fe nb nc nd ne b">name</code>—<strong class="lk jd">必需的</strong>包的标识符，应该只包含小写字母、数字和<code class="fe nb nc nd ne b">_</code>字符；它也应该是一个有效的Dart标识符(不以数字开头，并且不是一个<a class="ae lh" href="https://dart.dev/guides/language/language-tour#keywords" rel="noopener ugc nofollow" target="_blank">保留字</a></li><li id="e739" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><code class="fe nb nc nd ne b">description</code> —用于描述软件包用途的可选组件(仅在发布软件包时需要)</li><li id="1b32" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><code class="fe nb nc nd ne b">version</code> —如果没有发布到<code class="fe nb nc nd ne b">pub</code>存储库也是可选的，并且有助于跟踪当前的包版本</li><li id="dd36" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><code class="fe nb nc nd ne b">homepage</code> —可选，但很重要，因为一旦发布，它将链接到包的页面上</li><li id="cc2c" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><code class="fe nb nc nd ne b">author</code> —也是可选的，但对于提供联系信息很重要；如果有不止一个作者，那么应该使用<a class="ae lh" href="https://en.wikipedia.org/wiki/YAML#Syntax" rel="noopener ugc nofollow" target="_blank"> YAML列表语法</a>来提供<code class="fe nb nc nd ne b">authors</code></li><li id="9090" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><code class="fe nb nc nd ne b">environment</code> —指定任何Dart包的主要依赖，即Dart SDK利用这一点，我们提到了目标和支持的SDK版本</li><li id="57bc" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><code class="fe nb nc nd ne b">dependencies</code>和<code class="fe nb nc nd ne b">dev_dependencies</code> —它们定义了库的使用和开发所需的第三方包</li></ul><p id="7801" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">上述组件在<code class="fe nb nc nd ne b">pubspec</code>文件中最常见。有关完整的概述和其他组件，您可以在此处进一步阅读<a class="ae lh" href="https://dart.dev/tools/pub/pubspec" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="a312" class="nj mf it bd mg no np dn mk nq nr dp mo lr ns nt mq lv nu nv ms lz nw nx mu iz bi translated">属国</h2><p id="d498" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated"><code class="fe nb nc nd ne b">pubspec.yaml</code>文件最重要的作用是添加依赖关系。</p><p id="b3a1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在开始我们的项目后，使用像Stagehand这样的生成器工具或者手动操作，运行<code class="fe nb nc nd ne b">pub get</code>命令是要做的第一件事。</p><p id="c8f3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">下面我们来考虑一下<code class="fe nb nc nd ne b">pubspec</code>:</p><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="98be" class="nj mf it ne b gy nk nl l nm nn"><strong class="ne jd">name</strong>: fluttering_dart</span></pre><p id="afa9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">对其运行<code class="fe nb nc nd ne b">pub get</code>命令将为我们提供以下输出:</p><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="d58e" class="nj mf it ne b gy nk nl l nm nn">Resolving dependencies...<br/>Got dependencies!</span></pre><p id="45af" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">它还会生成两个新文件:</p><ul class=""><li id="a964" class="ny nz it lk b ll lm lo lp lr oa lv ob lz oc md od oe of og bi translated"><code class="fe nb nc nd ne b">.packages</code> —如前所述，这映射了系统的pub缓存中的依赖关系；在包被映射后，它们可以被导入并在我们的Dart代码中使用；这个文件应该从像Git这样的代码管理系统中排除</li><li id="6c27" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><code class="fe nb nc nd ne b">pubspec.lock</code> —此文件包含包的所有依赖图(所有直接和传递依赖及其确切版本和额外元数据)；这个文件应该包含在版本控制系统中，因为它有助于复制精确的环境</li></ul><p id="eade" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">以上文件由pub工具自动生成，不建议手动编辑。</p><p id="4881" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在<code class="fe nb nc nd ne b">pubspec.yaml</code>示例中，我们添加了<code class="fe nb nc nd ne b"><a class="ae lh" href="https://pub.dev/packages/path" rel="noopener ugc nofollow" target="_blank">path</a></code>包依赖关系。</p><p id="049d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们使用来自<code class="fe nb nc nd ne b">pubspec</code>文件的<code class="fe nb nc nd ne b">dependencies</code>来指定依赖关系。这样做的语法是:</p><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="7451" class="nj mf it ne b gy nk nl l nm nn">&lt;package&gt;<strong class="ne jd">:</strong> &lt;constraints&gt;</span></pre><p id="e963" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">应该使用<strong class="lk jd">包</strong>名称和<strong class="lk jd">约束</strong>(版本和源代码)来指定依赖关系。如果没有提供约束，那么将使用该包的任何可用版本(最新版本)，默认源代码将是<a class="ae lh" href="https://pub.dartlang.org" rel="noopener ugc nofollow" target="_blank"><strong class="lk jd">【pub.dartlang.org】</strong></a>(重定向到<a class="ae lh" href="https://pub.dev" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd"> pub.dev </strong> </a>)</p><p id="a625" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">版本</strong>约束有多种提及方式:</p><ul class=""><li id="5255" class="ny nz it lk b ll lm lo lp lr oa lv ob lz oc md od oe of og bi translated"><strong class="lk jd">任何/空</strong> — <code class="fe nb nc nd ne b">path:</code>或<code class="fe nb nc nd ne b">path: any</code></li><li id="c450" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><strong class="lk jd">具体版本</strong>——<code class="fe nb nc nd ne b">path: 1.6.0</code></li><li id="6588" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><strong class="lk jd">最小界限</strong>——<code class="fe nb nc nd ne b">path: '&gt;1.6.0'</code>或<code class="fe nb nc nd ne b">path: '&gt;=1.6.0'</code></li><li id="b9d8" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><strong class="lk jd">最大界限</strong> — <code class="fe nb nc nd ne b">path: '&lt;1.6.0'</code>或<code class="fe nb nc nd ne b">path: '&lt;=1.6.0'</code></li><li id="fd0e" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><strong class="lk jd">范围</strong> — <code class="fe nb nc nd ne b">path: '&gt;=1.6.0 &lt;=1.6.4'</code></li><li id="b17b" class="ny nz it lk b ll oh lo oi lr oj lv ok lz ol md od oe of og bi translated"><strong class="lk jd">语义范围</strong> — <code class="fe nb nc nd ne b">path: ^1.6.0</code>类似于<code class="fe nb nc nd ne b">path: '&gt;=1.6.0 &lt;2.0.0'</code>(最小指定版本到不再兼容的版本)</li></ul><p id="90e1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">源</strong>约束也有多种指定方式:</p><ul class=""><li id="5329" class="ny nz it lk b ll lm lo lp lr oa lv ob lz oc md od oe of og bi translated"><strong class="lk jd">主持</strong>来源:</li></ul><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="c100" class="nj mf it ne b gy nk nl l nm nn">dependencies:<br/><strong class="ne jd">  path</strong>:<br/>    <strong class="ne jd">hosted</strong>:<br/>      <strong class="ne jd">name</strong>: path<br/>      <strong class="ne jd">url</strong>: https://private-pub-api-compliant-server.com</span></pre><ul class=""><li id="c607" class="ny nz it lk b ll lm lo lp lr oa lv ob lz oc md od oe of og bi translated"><strong class="lk jd">路径</strong>源(由于我们的示例包名，这可能会有点混乱):</li></ul><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="c6b2" class="nj mf it ne b gy nk nl l nm nn">dependencies:<br/><strong class="ne jd">  path</strong>: # package is on this line <br/>    <strong class="ne jd">path</strong>: /some/path/to/path</span></pre><ul class=""><li id="2727" class="ny nz it lk b ll lm lo lp lr oa lv ob lz oc md od oe of og bi translated"><strong class="lk jd"> Git </strong>源代码(从Git存储库中指定一个包):</li></ul><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="7eed" class="nj mf it ne b gy nk nl l nm nn">dependencies:<br/><strong class="ne jd">  path</strong>:<br/>    <strong class="ne jd">git</strong>:<br/>      <strong class="ne jd">url</strong>: git://github.com/dart-lang/path.git<br/>      <strong class="ne jd">path</strong>: /<br/>      <strong class="ne jd">ref</strong>: master</span></pre><ul class=""><li id="4ceb" class="ny nz it lk b ll lm lo lp lr oa lv ob lz oc md od oe of og bi translated"><strong class="lk jd"> SDK </strong>来源:</li></ul><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="666a" class="nj mf it ne b gy nk nl l nm nn">dependencies:<br/>  <strong class="ne jd">flutter_driver</strong>:<br/>    <strong class="ne jd">sdk</strong>: flutter<br/>    <strong class="ne jd">version</strong>: ^0.0.1</span></pre><p id="cd7c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最后一种方法仅用于Flutter SDK依赖项。</p><p id="ab65" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在提高生产率方面，第三方依赖至关重要。</p></div><div class="ab cl oo op hx oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="im in io ip iq"><p id="ab8b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="https://flutter.dev" rel="noopener ugc nofollow" target="_blank"> Flutter </a>项目既可以使用特定平台代码，也可以使用跨平台代码。后者是用<a class="ae lh" href="https://dart.dev" rel="noopener ugc nofollow" target="_blank"> Dart </a>写的，而且，构建Flutter apps，需要一些Dart的基础知识。</p><p id="1013" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="https://medium.com/tag/fluttering-dart/archive" rel="noopener"/></p><p id="aff5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在本系列的前几部分中，我们介绍了Dart <a class="ae lh" href="/@constanting/fluttering-dart-9a3e74b0d9c5" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd">内置数据类型</strong> </a> <strong class="lk jd">，</strong> <a class="ae lh" href="/@constanting/fluttering-dart-b37110f4d1bf" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd">函数</strong> </a> <strong class="lk jd">，</strong> <a class="ae lh" href="/@constanting/fluttering-dart-ee493f4b0440" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd">运算符</strong> </a> <strong class="lk jd">，</strong> <a class="ae lh" href="/@constanting/fluttering-dart-the-flow-7be2080763ad" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd">控制流语句</strong> </a> <strong class="lk jd">，</strong> <a class="ae lh" href="/@constanting/fluttering-dart-oop-8b92cd89a7f0" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd">面向对象编程</strong> </a> <strong class="lk jd">(类、对象等等)</strong></p><p id="7fbf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这一部分中，我们深入研究了Dart库和包。</p><p id="147e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在<a class="ae lh" href="https://medium.com/tag/fluttering-dart/archive" rel="noopener"> <strong class="lk jd">飘飘镖</strong> </a>系列的下一部分，我们将深入探讨<a class="ae lh" href="https://medium.com/@constanting/fluttering-dart-unit-testing-f58dae6bc1f" rel="noopener">单元测试</a>。</p><div class="ov ow gp gr ox oy"><a href="https://medium.com/@constanting/fluttering-dart-unit-testing-f58dae6bc1f" rel="noopener follow" target="_blank"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd jd gy z fp pd fr fs pe fu fw jc bi translated">飞舞的飞镖:单元测试</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">如何编写模块化、高效、无bug的代码</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">medium.com</p></div></div><div class="ph l"><div class="pi l pj pk pl ph pm lb oy"/></div></div></a></div><p id="f25e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">就这些！</p></div></div>    
</body>
</html>