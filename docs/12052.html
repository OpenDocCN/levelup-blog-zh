<html>
<head>
<title>The Difference Between the Composition API and Options API in Vue</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue中组合API和选项API的区别</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/the-difference-between-the-composition-api-and-options-api-in-vue-c5f70f6a86ad?source=collection_archive---------19-----------------------#2022-05-10">https://levelup.gitconnected.com/the-difference-between-the-composition-api-and-options-api-in-vue-c5f70f6a86ad?source=collection_archive---------19-----------------------#2022-05-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0e55831763f844bcd0a225d2656f8f74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_76dA1I0L4qk1KwPYDyu8A.png"/></div></div></figure><p id="b480" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Vue 2之前，只有一种方法可以在Vue中创建组件。在Vue 3中，引入了一种叫做<strong class="ka ir">组合API </strong>的新方法。现在，如果我们想在Vue中制作一个组件，我们有两种方法。您可能想知道到底有什么不同，所以让我们来看看新的Composition API与Vue 2方法有什么不同，Vue 2方法现在被称为<strong class="ka ir"> Options API </strong></p><h1 id="a475" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">Vue中的Composition和Options API有什么区别？</h1><p id="2a85" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">简而言之就是<strong class="ka ir">语法</strong>。Composition API允许我们创建组件，而不需要像Options API中那样的大的单个可导出对象。例如，如果我们想用选项API制作一个简单的计数器组件，它看起来像下面的代码。</p><h1 id="2417" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">选项API</h1><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="1710" class="mi kx iq me b gy mj mk l ml mm">&lt;template&gt;<br/>    &lt;h1&gt;{{ counter }}&lt;/h1&gt;<br/>    &lt;button @click="incrCounter"&gt;Click Me&lt;/button&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>export default {<br/>    data() {<br/>        return {<br/>            counter: 0<br/>        }<br/>    },<br/>    methods: {<br/>        incrCounter: function() {<br/>            this.counter += 1;<br/>        }<br/>    }<br/>}<br/>&lt;/script&gt;</span></pre><p id="76d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">相反，如果我们想用<strong class="ka ir">组合API </strong>编写相同的代码，它看起来会像这样。</p><h1 id="6bb8" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">组合API</h1><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="08cc" class="mi kx iq me b gy mj mk l ml mm">&lt;template&gt;<br/>    &lt;h1&gt;{{ counter }}&lt;/h1&gt;<br/>    &lt;button @click="incrCounter"&gt;Click Me&lt;/button&gt;<br/>&lt;/template&gt;<br/>&lt;script setup&gt;<br/>    import { ref } from 'vue'</span><span id="a4d9" class="mi kx iq me b gy mn mk l ml mm">    let counter = ref(0);</span><span id="2d57" class="mi kx iq me b gy mn mk l ml mm">    const incrCounter = function() {<br/>        counter.value += 1;<br/>    }<br/>&lt;/script&gt;</span></pre><p id="c77a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您会注意到一些不同之处:</p><ul class=""><li id="2ef5" class="mo mp iq ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated">我们导入了一个叫做<code class="fe mx my mz me b">ref</code>的东西——这让我们可以创建反应变量</li><li id="a6a4" class="mo mp iq ka b kb na kf nb kj nc kn nd kr ne kv mt mu mv mw bi translated">当我们增加计数器时，我们实际上增加了<code class="fe mx my mz me b">counter.value</code>，因为<code class="fe mx my mz me b">ref</code>返回一个对象。</li><li id="26e9" class="mo mp iq ka b kb na kf nb kj nc kn nd kr ne kv mt mu mv mw bi translated">我们避免了使用整个原型，取而代之的是一个简单的函数</li></ul><h1 id="f932" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">组合API中的反应性</h1><p id="7a86" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">除了<code class="fe mx my mz me b">ref</code>，我们还可以用<code class="fe mx my mz me b">reactive</code>来表示物体。这两者都赋予变量反应能力，意味着我们不会失去任何功能。</p><h1 id="6e26" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">组合API的好处</h1><p id="a958" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">正如您所看到的，组合API比选项API更加精简，并且需要的代码更少。它还有另外一个好处就是<strong class="ka ir">划分</strong>代码。让我们考虑一个有两个计数器的愚蠢例子——一个按钮将输出增加1，另一个增加2。在<strong class="ka ir">选项API </strong>中，我们可以这样写:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="367e" class="mi kx iq me b gy mj mk l ml mm">&lt;template&gt;<br/>    &lt;h1&gt;{{ counter }}, {{ doubleCounter }} &lt;/h1&gt;<br/>    &lt;button @click="incrCounter"&gt;Click Me&lt;/button&gt;<br/>    &lt;button @click="increaseByTwo"&gt;Click Me For 2&lt;/button&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>export default {<br/>    data() {<br/>        return {<br/>            counter: 0,<br/>            doubleCounter: 0 <br/>        }<br/>    },<br/>    methods: {<br/>        incrCounter: function() {<br/>            this.counter += 1;<br/>        },<br/>        increaseByTwo: function() {<br/>            this.doubleCounter += 2;<br/>        }<br/>    }<br/>}<br/>&lt;/script&gt;</span></pre><p id="7efc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另一方面，在<strong class="ka ir">组件API </strong>中，它可能看起来像这样:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="bb89" class="mi kx iq me b gy mj mk l ml mm">&lt;template&gt;<br/>    &lt;h1&gt;{{ counter }}, {{ doubleCounter }} &lt;/h1&gt;<br/>    &lt;button @click="incrCounter"&gt;Click Me&lt;/button&gt;<br/>    &lt;button @click="increaseByTwo"&gt;Click Me For 2&lt;/button&gt;<br/>&lt;/template&gt;</span><span id="9b58" class="mi kx iq me b gy mn mk l ml mm">&lt;script setup&gt;<br/>    import { ref } from 'vue'</span><span id="1e6e" class="mi kx iq me b gy mn mk l ml mm">    let counter = ref(0);<br/>    const incrCounter = function() {<br/>        counter.value += 1;<br/>    }</span><span id="e235" class="mi kx iq me b gy mn mk l ml mm">    let doubleCounter = ref(0);<br/>    const increaseByTwo = function() {<br/>        doubleCounter.value += 2;<br/>    }<br/>&lt;/script&gt;</span></pre><p id="699c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">差别很小，但是您可能会注意到一些有趣的事情——在<strong class="ka ir">组合API </strong>上，所有相关的代码都保持在一起，所以您不必抱太大希望。在下图中，您可以看到，具有相似功能的代码以相同的颜色突出显示。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/4cbdaee3f935bf010f9ca6cc26796df4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hnGZ0cy97pqfcUDTsdaNDg.png"/></div></div></figure><p id="4009" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在右边,<strong class="ka ir">组合API </strong>把它的代码都放在同一个地方。在小项目中，这并没有很大的区别——但是在大项目中，可维护性增加了。</p><h1 id="f14a" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">组合API的其他好处</h1><ul class=""><li id="b66f" class="mo mp iq ka b kb lu kf lv kj ng kn nh kr ni kv mt mu mv mw bi translated"><strong class="ka ir">取代mixins </strong>，以及随之而来的名称冲突等所有问题。</li><li id="08f4" class="mo mp iq ka b kb na kf nb kj nc kn nd kr ne kv mt mu mv mw bi translated"><strong class="ka ir">更好的类型支持</strong>，因为它使用的大多是普通的函数和变量，在TypeScript中不需要复杂的类型。</li><li id="cfde" class="mo mp iq ka b kb na kf nb kj nc kn nd kr ne kv mt mu mv mw bi translated"><strong class="ka ir">更小的文件</strong> —如前所述，组合API需要更少的代码。</li></ul><h1 id="934b" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">我现在需要使用组合API吗？</h1><p id="bf22" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated"><strong class="ka ir">不！如果Options API对您来说仍然很好，那么没有理由将您的代码切换到Composition API。Options API没有任何用处，相反，Composition API提供了一种创建Vue组件的替代方法。</strong></p><p id="a3f2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在某些情况下，Options API可能仍然是更好的选择。</p><h1 id="eedd" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">复合API比选项API好吗？</h1><p id="ada9" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">这个问题没有简单的答案。这两种方法各有千秋，在某些情况下可能会有用。无论您决定使用什么都完全没问题，但是组合API确实解决了Options API带来的一些问题。</p></div></div>    
</body>
</html>