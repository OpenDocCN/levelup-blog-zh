<html>
<head>
<title>Up and Running: Deploying Vue.js to AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">启动和运行:将Vue.js部署到AWS</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/deploying-vue-js-to-aws-with-https-and-a-custom-domain-name-3ae1f79fe188?source=collection_archive---------0-----------------------#2020-04-04">https://levelup.gitconnected.com/deploying-vue-js-to-aws-with-https-and-a-custom-domain-name-3ae1f79fe188?source=collection_archive---------0-----------------------#2020-04-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/e48c61e3c45960c6c8d9ead1abbfd7dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IToHuFFexDiY0q4t8M_rOQ.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="ab38" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">部署Vue的快速入门教程。Js在AWS S3和CloudFront的应用</h2></div><p id="4862" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">作为初创企业的原型开发人员，我最近需要部署一个Vue.js前端应用程序，作为一个更大项目的一部分。我的要求是:使用<strong class="kv jf"> AWS </strong>，使用<strong class="kv jf"> HTTPS </strong>，使用<strong class="kv jf">自定义域名</strong>，快速启动并运行<strong class="kv jf"/>。</p><p id="0526" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">出于<a class="ae lp" href="https://www.swyx.io/writing/learn-in-public/" rel="noopener ugc nofollow" target="_blank"> <em class="lq">公开学习</em> </a>的兴趣，我在这里分享我的过程，作为一个循序渐进的教程，帮助那些可能有类似需求的人。</p><blockquote class="lr"><p id="93cf" class="ls lt je bd lu lv lw lx ly lz ma lo dk translated">在这个快速入门教程中，我们将设置一个基本的Vue.js应用程序。然后，我们将介绍将应用程序部署到AWS S3以便立即托管的步骤。最后，我们将利用AWS CloudFront来确保我们的应用程序支持HTTPS，并且可以通过自定义域名访问。</p></blockquote><p id="5e5a" class="pw-post-body-paragraph kt ku je kv b kw mb kf ky kz mc ki lb lc md le lf lg me li lj lk mf lm ln lo im bi translated">以下是我们将要采取的步骤:</p><ol class=""><li id="bbe4" class="mg mh je kv b kw kx kz la lc mi lg mj lk mk lo ml mm mn mo bi translated">使用<code class="fe mp mq mr ms b">vue-cli</code>创建新的应用程序。</li><li id="2654" class="mg mh je kv b kw mt kz mu lc mv lg mw lk mx lo ml mm mn mo bi translated">设置S3与静态网站托管桶。</li><li id="006d" class="mg mh je kv b kw mt kz mu lc mv lg mw lk mx lo ml mm mn mo bi translated">设置一个IAM用户和策略，这样我们就可以通过编程方式写入S3存储桶。</li><li id="e0c3" class="mg mh je kv b kw mt kz mu lc mv lg mw lk mx lo ml mm mn mo bi translated">使用<code class="fe mp mq mr ms b">aws-cli</code>将我们构建的应用程序部署到S3。</li><li id="bacd" class="mg mh je kv b kw mt kz mu lc mv lg mw lk mx lo ml mm mn mo bi translated">使用<code class="fe mp mq mr ms b">https</code>设置AWS CloudFront来安全地提供我们的S3桶。</li><li id="c388" class="mg mh je kv b kw mt kz mu lc mv lg mw lk mx lo ml mm mn mo bi translated">使用AWS CertificateManager为自定义域名创建SSL证书。</li><li id="ef2e" class="mg mh je kv b kw mt kz mu lc mv lg mw lk mx lo ml mm mn mo bi translated">将CNAME记录添加到我们根域的DNS设置中，以完成证书请求，并将我们的自定义域指向我们的CloudFront发行版。</li><li id="a047" class="mg mh je kv b kw mt kz mu lc mv lg mw lk mx lo ml mm mn mo bi translated">配置我们的CloudFront发行版以接受我们的自定义域名作为别名。</li></ol><p id="b45f" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">本教程假设您有一个AWS 的<a class="ae lp" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank">帐户，以及一个可以修改DNS设置的注册域名。您不需要对Vue.js有太多的经验，但是您应该对从命令行在NodeJS空间中工作比较熟悉。</a></p><h2 id="0476" class="my mz je bd na nb nc dn nd ne nf dp ng lc nh ni nj lg nk nl nm lk nn no np nq bi translated">使用<code class="fe mp mq mr ms b">vue-cli</code>设置Vue.js应用程序</h2><p id="f668" class="pw-post-body-paragraph kt ku je kv b kw nr kf ky kz ns ki lb lc nt le lf lg nu li lj lk nv lm ln lo im bi translated">我们的目标是<em class="lq">不要构建</em>一个令人敬畏的Vue.js应用程序。我们只想向<em class="lq">展示如何部署</em>我们的应用程序。因此，我们将使用<code class="fe mp mq mr ms b">vue-cli</code>来创建应用程序——初始应用程序是我们所需要的。</p><p id="c530" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">创建一个新的项目文件夹(我们称之为<code class="fe mp mq mr ms b">vue-deploy-aws</code>)。我们将使用<code class="fe mp mq mr ms b">yarn</code>作为我们的包管理器。在那个文件夹里，运行<code class="fe mp mq mr ms b">yarn init</code>，根据自己的情况回答提示问题。唯一需要回答的非默认问题是<em class="lq">入口点</em>，我们应该将其设置为<code class="fe mp mq mr ms b">index.html</code>。这实际上一点也不影响我们的功能，但是它会帮助你在查看你的<code class="fe mp mq mr ms b">package.json</code>文件时避免混淆。</p><pre class="nw nx ny nz gt oa ms ob oc aw od bi"><span id="68af" class="my mz je ms b gy oe of l og oh">~/vue-deploy-aws$ <strong class="ms jf">yarn init<br/></strong>...<br/>question entry point (index.js): <strong class="ms jf">index.html<br/>...</strong></span></pre><p id="fad9" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">接下来，添加<code class="fe mp mq mr ms b">vue-cli</code>包。</p><pre class="nw nx ny nz gt oa ms ob oc aw od bi"><span id="f4c6" class="my mz je ms b gy oe of l og oh">~/vue-deploy-aws$ <strong class="ms jf">yarn add @vue/cli</strong></span></pre><p id="094d" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">现在，使用<code class="fe mp mq mr ms b">vue-cli</code>，创建一个新项目，使用当前文件夹作为项目根。一路上会问你几个问题。<strong class="kv jf">注意:</strong>别忘了句号(<strong class="kv jf">)。</strong>)在下面命令的末尾。</p><pre class="nw nx ny nz gt oa ms ob oc aw od bi"><span id="4755" class="my mz je ms b gy oe of l og oh">~/vue-deploy-aws$ <strong class="ms jf">yarn vue create .<br/></strong># Generate project in current directory? <strong class="ms jf">Y</strong><br/># Please pick a preset: <strong class="ms jf">default (babel, eslint)</strong></span></pre><p id="7fd0" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">就这样，我们有了一个工作应用程序。您可以运行<code class="fe mp mq mr ms b">yarn serve</code>在本地提供站点服务。然后，在浏览器中打开<code class="fe mp mq mr ms b"><a class="ae lp" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/</a></code>查看Vue.js应用程序:</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/c1eb439d014a2f2c5f24f65adc5912c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*dw_ZhcvL4dfV8ptHB5Go_A.png"/></div></figure><p id="12b3" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">太棒了。现在，您已经有了一个可以工作的Vue.js应用程序，可以部署了。回到命令行，运行<code class="fe mp mq mr ms b">yarn build</code>。</p><pre class="nw nx ny nz gt oa ms ob oc aw od bi"><span id="7778" class="my mz je ms b gy oe of l og oh">~/vue-deploy-aws$ <strong class="ms jf">yarn build<br/></strong>DONE  Compiled successfully in 5129ms<br/>...<br/>DONE  Build complete. The <strong class="ms jf">dist</strong> directory is ready to be deployed.</span></pre><p id="01e0" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这个命令将您的应用程序打包到一个名为<code class="fe mp mq mr ms b">dist/</code>的子文件夹中。这个<code class="fe mp mq mr ms b">dist/</code>文件夹是我们将部署到AWS S3作为静态网站的内容。前进！</p><h2 id="af23" class="my mz je bd na nb nc dn nd ne nf dp ng lc nh ni nj lg nk nl nm lk nn no np nq bi translated">为静态网站托管创建一个AWS S3桶</h2><p id="8e85" class="pw-post-body-paragraph kt ku je kv b kw nr kf ky kz ns ki lb lc nt le lf lg nu li lj lk nv lm ln lo im bi translated">现在我们有了Vue.js应用程序，我们需要一个AWS S3桶来保存<code class="fe mp mq mr ms b">dist/</code>文件夹的内容。该桶将被配置为一个静态网站，可供公众阅读。</p><p id="a7fe" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">登录你的<a class="ae lp" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"> AWS控制台</a>，然后导航到S3。点击<strong class="kv jf">创建桶</strong>。</p><p id="cd66" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">为您的存储桶选择名称。<a class="ae lp" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingBucket.html" rel="noopener ugc nofollow" target="_blank"> AWS S3文档</a>指出，S3存储桶名称是全球唯一的，因此您可能无法使用我们在本教程的示例中使用的相同存储桶名称。</p><p id="e82d" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">接下来，为您的存储桶选择一个AWS区域。对于本教程，我们将使用<code class="fe mp mq mr ms b">us-west-2</code>。您可以选择您喜欢的任何地区——只要确保您在本教程的剩余部分中为我们将使用的其他AWS服务选择相同的地区。如果不知道选哪个地区，就用<code class="fe mp mq mr ms b">us-west-2</code>好了。</p><p id="31de" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">最后，<em class="lq">取消选中</em>的“阻止所有公共访问”选项，并点击复选框，确认您了解您的存储桶可能会被公共访问。这对于公开提供一个网站是必要的。</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/9baeb0022f88fea11cf3a354e322f08d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*FeSuIVSUWWElX4XSrdKL8w.png"/></div><figcaption class="ok ol gj gh gi om on bd b be z dk translated">确保<strong class="bd na"> <em class="oo">取消勾选</em> </strong>“阻止所有公共访问”，然后向下确认您想要这样做。</figcaption></figure><p id="7204" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">有了这些选项，点击<strong class="kv jf">创建存储桶</strong>。你现在会在你的S3桶列表中看到它。点击你新创建的桶来打开它。打开桶，点击<strong class="kv jf">属性</strong>标签，然后点击<strong class="kv jf">静态网站托管</strong>面板。选择“使用此桶托管网站”选项，并将索引文档设置为<code class="fe mp mq mr ms b">index.html</code>:</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div class="gh gi op"><img src="../Images/071ed760993ff374612281bb53c12e21.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*enYSZa6zjBlHPGccGeUr-Q.png"/></div></figure><p id="6e5c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">记下显示的<em class="lq">端点</em> URL。我们一会儿会用到它。所有这些就绪后，点击<strong class="kv jf">保存</strong>。</p><p id="ff2c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在设置我们的bucket时，我们还需要做一件事，那就是<a class="ae lp" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteAccessPermissionsReqd.html" rel="noopener ugc nofollow" target="_blank">创建一个bucket policy </a>，授予公众访问我们的bucket内容的权限。</p><p id="ff53" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">点击您的存储桶的<em class="lq">权限</em>选项卡，然后点击<strong class="kv jf">存储桶策略</strong>。粘贴以下要点的JSON，将<code class="fe mp mq mr ms b">BUCKET-NAME-GOES-HERE</code>替换为您的S3桶的名称:</p><figure class="nw nx ny nz gt iv"><div class="bz fp l di"><div class="oq or l"/></div><figcaption class="ok ol gj gh gi om on bd b be z dk translated">允许公众访问您的S3存储桶的存储桶策略</figcaption></figure><p id="d188" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">点击<strong class="kv jf">保存</strong>。</p><p id="f1cd" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">现在，我们的bucket被设置为一个静态网站。</p><h2 id="ae7a" class="my mz je bd na nb nc dn nd ne nf dp ng lc nh ni nj lg nk nl nm lk nn no np nq bi translated">设置IAM以编程方式访问S3时段</h2><p id="7a4b" class="pw-post-body-paragraph kt ku je kv b kw nr kf ky kz ns ki lb lc nt le lf lg nu li lj lk nv lm ln lo im bi translated">我们最终会希望将本地机器的<code class="fe mp mq mr ms b">dist/</code>文件夹与这个S3桶同步。为此，我们将使用<code class="fe mp mq mr ms b">aws-cli</code>。我们需要凭证来表明我们被授权写那个S3桶。为此，我们将创建一个IAM策略和用户。</p><p id="2f97" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">从AWS控制台，导航到IAM。在左侧菜单中，导航至<em class="lq">策略</em>。我们需要一个策略来读写我们刚刚创建的S3存储桶。在策略页面上，点击<strong class="kv jf">创建策略</strong>。然后点击<em class="lq"> JSON </em>选项卡。</p><p id="311e" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">您可以从以下要点复制并粘贴JSON。将<code class="fe mp mq mr ms b">BUCKET-NAME-GOES-HERE</code>替换为您的存储桶的名称。</p><figure class="nw nx ny nz gt iv"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="e805" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">点击<strong class="kv jf">查看策略</strong>，然后为您的策略提供一个名称，并点击<strong class="kv jf">创建策略</strong>。</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi os"><img src="../Images/8460878a8ff522c136eee06141e51a99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ff3j3SHha0ERo80_IEh7QQ.png"/></div></div></figure><p id="c194" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">接下来，我们将创建一个IAM用户，并将该策略附加到他的权限集。我们将在<code class="fe mp mq mr ms b">aws-cli</code>中使用这个用户的凭证。在左侧菜单中，点击<em class="lq">用户</em>。然后，点击<strong class="kv jf">添加用户</strong>。</p><p id="151e" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">为您的用户选择一个名称，并选中“编程访问”的<em class="lq">访问类型</em>框点击<strong class="kv jf">下一步:权限</strong>。这里，我们将添加上面创建的策略。点击“直接附加现有保单”选项</p><p id="2ab9" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在这里，您将选择要授予您的用户的策略(权限)。您可以“过滤策略”以仅显示“客户管理的”策略，这样可以更容易地找到我们刚刚创建的策略。在列表中找到该策略，并选中它旁边的框。</p><p id="2c2e" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">点击<strong class="kv jf">下一页:标签</strong>。我们不需要在这里做任何事情。</p><p id="a255" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">点击<strong class="kv jf">下一步:复习</strong>。</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi os"><img src="../Images/1da25c3b9e1cf7500bb5c340c7672ba2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5RS_zWUyk7R-9SuQPzjF2A.png"/></div></div></figure><p id="73f0" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">点击<strong class="kv jf">创建用户</strong>完成。您将看到新创建的用户，以及一个<em class="lq">访问密钥ID </em>和一个<em class="lq">秘密访问密钥</em>。让这扇窗户开着。我们将在几分钟后回到这个话题。</p><p id="1d5e" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我们返回到命令行来使用<code class="fe mp mq mr ms b">aws-cli</code>，并确保我们可以访问我们的S3桶。</p><h2 id="0a90" class="my mz je bd na nb nc dn nd ne nf dp ng lc nh ni nj lg nk nl nm lk nn no np nq bi translated">部署:从命令行同步我们的S3存储桶</h2><p id="13c6" class="pw-post-body-paragraph kt ku je kv b kw nr kf ky kz ns ki lb lc nt le lf lg nu li lj lk nv lm ln lo im bi translated">对于这一步，您需要确保在您的本地机器上安装了<code class="fe mp mq mr ms b">aws-cli</code> <a class="ae lp" href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html" rel="noopener ugc nofollow" target="_blank">。首先，我们将设置一个本地AWS概要文件。确保准备好上述步骤中的<em class="lq">访问密钥ID </em>和<em class="lq">秘密访问密钥</em>。我们将使用<code class="fe mp mq mr ms b">aws configure</code>在本地机器上建立一个配置文件:</a></p><pre class="nw nx ny nz gt oa ms ob oc aw od bi"><span id="6273" class="my mz je ms b gy oe of l og oh">~/vue-deploy-aws$ <strong class="ms jf">aws configure --profile vue-deployer</strong><br/>AWS Access Key ID [************]: PASTE ACCESS KEY ID FROM AWS<br/>AWS Secret Access Key [********]: PASTE SECRET ACCESS KEY FROM AWS<br/>Default region name [None]: <strong class="ms jf">us-west-2</strong><br/>Default output format [None]: None</span></pre><p id="d18f" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们将我们的AWS概要文件命名为<code class="fe mp mq mr ms b">vue-deployer</code>，只是为了与我们创建的IAM用户保持一致；但是，您可以选择任何您喜欢的档案名称。顺便说一下，运行<code class="fe mp mq mr ms b">aws configure</code>会在一个文件中设置凭证，这个文件可以在<code class="fe mp mq mr ms b">~/.aws/credentials</code>中找到。</p><p id="4a43" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">设置好我们的概要文件后，我们现在可以从命令行访问我们的S3存储桶(用您的存储桶名称替换<code class="fe mp mq mr ms b">BUCKET-NAME-GOES-HERE</code>):</p><pre class="nw nx ny nz gt oa ms ob oc aw od bi"><span id="fd00" class="my mz je ms b gy oe of l og oh">~/vue-deploy-aws$ <strong class="ms jf">aws --region us-west-2 --profile vue-deployer s3 ls s3://BUCKET-NAME-GOES-HERE</strong></span></pre><p id="3f06" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">仔细分析一下我们上面做的事情:我们使用<code class="fe mp mq mr ms b">aws-cli</code>向S3发出命令。但是首先，我们用<code class="fe mp mq mr ms b">--region us-west-2</code>设置我们的区域，我们用<code class="fe mp mq mr ms b">--profile vue-deployer</code>设置我们要使用的配置文件。这告诉<code class="fe mp mq mr ms b">aws-cli</code>引用我们上面设置的<code class="fe mp mq mr ms b">vue-deployer</code>概要文件的访问密钥ID和秘密访问密钥。然后，我们想使用<code class="fe mp mq mr ms b">s3</code>在我们的bucket上运行一个<code class="fe mp mq mr ms b">ls</code>命令。对于<code class="fe mp mq mr ms b">s3</code>命令，bucket总是用一个<code class="fe mp mq mr ms b">S3Uri</code>来引用，基本上是<code class="fe mp mq mr ms b">s3://</code>后跟您的bucket的名称。</p><p id="de05" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">如果一切都设置正确，那么运行上面的命令<strong class="kv jf">应该看起来像什么都没发生</strong>。别担心——这是好事！记住，我们的S3桶目前是空的，所以一个T10命令T28应该不会返回任何东西。最重要的是，我们没有遇到任何错误(如<code class="fe mp mq mr ms b">NoSuchBucket</code>或<code class="fe mp mq mr ms b">AccessDenied</code>)。这意味着我们的IAM用户和策略已经正确设置，并且我们的<code class="fe mp mq mr ms b">aws-cli</code>配置文件凭证也已经正确设置。</p><p id="2dc4" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">非常好。现在，让我们同步我们的<code class="fe mp mq mr ms b">dist/</code>文件夹到我们的S3桶。记住，<code class="fe mp mq mr ms b">dist/</code>文件夹是我们之前运行<code class="fe mp mq mr ms b">yarn build</code>时创建的。以下是我们同步文件夹和存储桶所需的命令(用您的存储桶名称替换<code class="fe mp mq mr ms b">BUCKET-NAME-GOES-HERE</code>):</p><pre class="nw nx ny nz gt oa ms ob oc aw od bi"><span id="13e2" class="my mz je ms b gy oe of l og oh">~/vue-deploy-aws$ <strong class="ms jf">aws --region us-west-2 --profile vue-deployer s3 sync ./dist s3://BUCKET-NAME-GOES-HERE --delete</strong></span></pre><p id="7748" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">当您运行这个命令时，您应该会看到一个<code class="fe mp mq mr ms b">upload</code>消息列表，显示您的<code class="fe mp mq mr ms b">dist/</code>文件夹中的每个文件是如何上传到您的bucket的。</p><p id="1e55" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">顺便说一下，上面的<code class="fe mp mq mr ms b">--delete</code>标志告诉<code class="fe mp mq mr ms b">aws-cli</code>如果一个文件在我们的S3桶中，但不再在我们的<code class="fe mp mq mr ms b">dist/</code>文件夹中，那么它应该从S3桶中删除。这是我们未来想要的，因为<code class="fe mp mq mr ms b">dist/</code>文件夹的内容(而不是其他)应该成为S3桶中提供的内容的标准。</p><p id="b0f7" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我们做一些手动检查，以确保一切都按照预期的方式工作。首先，转到AWS控制台并导航到S3。找到您创建的bucket并单击它。它应该不再是空的。相反，它应该看起来像是你的<code class="fe mp mq mr ms b">dist/</code>文件夹中的一面镜子。</p><p id="35f9" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">接下来，点击S3桶的<em class="lq">属性</em>选项卡。点击面板进行<em class="lq">静态网站托管</em>。在顶部，有一个用于存储桶的<em class="lq">端点</em> URL。当你把这个URL粘贴到你的浏览器中时，你会看到你的Vue.js应用程序，通过你的S3桶提供。</p><p id="18ee" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">您的应用程序已上线！</p><p id="dba4" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">为了更加方便，我建议从上面获取整个<code class="fe mp mq mr ms b">s3 sync</code>命令，并将其复制到<code class="fe mp mq mr ms b">package.json</code>文件的<code class="fe mp mq mr ms b">scripts</code>部分。命名脚本命令<code class="fe mp mq mr ms b">deploy</code>:</p><pre class="nw nx ny nz gt oa ms ob oc aw od bi"><span id="03b9" class="my mz je ms b gy oe of l og oh">...<br/>"scripts": {<br/>    "serve": "vue-cli-service serve",<br/>    "build": "vue-cli-service build",<br/>    "lint": "vue-cli-service lint",<br/>    <strong class="ms jf">"deploy": "aws --profile vue-deployer --region us-west-2 s3 sync ./dist s3://BUCKET-NAME-GOES-HERE --delete"</strong><br/>  },<br/>...</span></pre><p id="39a9" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这样，你可以随时快速运行<code class="fe mp mq mr ms b">yarn deploy</code>来同步你的S3桶和你的<code class="fe mp mq mr ms b">dist/</code>文件夹的当前内容。</p><h2 id="c51c" class="my mz je bd na nb nc dn nd ne nf dp ng lc nh ni nj lg nk nl nm lk nn no np nq bi translated">把申请交给HTTPS</h2><p id="0337" class="pw-post-body-paragraph kt ku je kv b kw nr kf ky kz ns ki lb lc nt le lf lg nu li lj lk nv lm ln lo im bi translated">静态网站托管这种方式的局限性之一是，<a class="ae lp" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteEndpoints.html" rel="noopener ugc nofollow" target="_blank"> <em class="lq"> S3网站端点不支持HTTPS </em> </a> <em class="lq">。</em>这就是AWS CloudFront的用武之地——我们将使用CloudFront在HTTPS交付我们的网站内容。</p><p id="ecac" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在AWS控制台中，导航到CloudFront。点击<strong class="kv jf">创建分销</strong>。我们将使用<em class="lq">网站</em>作为我们内容的交付方式。点击<strong class="kv jf">开始</strong>。</p><p id="4fca" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">对于<em class="lq">源域名</em>，粘贴您的S3桶的网站端点URL。这是您在浏览器中用来查看部署的Vue.js应用程序的URL。<em class="lq">源域名</em>的输入字段可能会有下拉选项供您选择，其中一些选项可能看起来与您的端点URL非常相似。不要选择那些中的任何一个——它们很相似，但又不完全相同。我们需要在这里输入的是网站端点URL，正如它在我们的S3存储桶属性中显示给我们的。</p><p id="eb08" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">为<em class="lq">原点ID </em>输入您选择的任何值。</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/ab1f905eb8202a76fd6b03b0571f18a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*SIvyZWoa7Da5A2q3pQDt9Q.png"/></div><figcaption class="ok ol gj gh gi om on bd b be z dk translated">使用您的S3水桶网站端点URL作为原始域名</figcaption></figure><p id="2701" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">为<em class="lq">查看器协议策略</em>选择“将HTTP重定向到HTTPS”。</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/bd31436740d83905e0991ef644a9eb64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*VFlWgFFFrJ0VqEtDQJy93A.png"/></div><figcaption class="ok ol gj gh gi om on bd b be z dk translated">确保“将HTTP重定向到HTTPS”</figcaption></figure><p id="6b47" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">对于分销设置<em class="lq">价格等级</em>，现在选择“仅使用美国、加拿大和欧洲”。这更经济，虽然性能较差。但是对于本教程，选择这个选项就足够了。</p><p id="10be" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">对于<em class="lq"> SSL证书</em>，现在选择“默认CloudFront证书”。我们将在以后附加自定义域名时对此进行更改。</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/5a8588855d2fc0ef1de07d282cf4ade0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*tUy0twIWxprwXyTOXVD0gQ.png"/></div></figure><p id="415b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">保留其余的默认选项。点击<strong class="kv jf">创建分销</strong>。</p><p id="646d" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">现在，您将在CloudFront dashboard的列表中看到新创建的发行版。设置此分发时，您的分发状态将为“进行中”</p><p id="6672" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">您的CloudFront发行版可能需要几分钟来设置(我的大约需要5分钟)。坐着别动。舒展一下筋骨。去把你的咖啡加满。</p><p id="284b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">当所有设置完成后，您的发行版的状态将变为“已部署”现在，当您单击列表中的发行版名称时，您将看到您的发行版的所有属性。它应该是这样的(当然，不完全是这样):</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi gj"><img src="../Images/0101c23bc232455210ddaedd0b818255.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MMp1jpd5MaHpgs6qEnGeKQ.png"/></div></div></figure><p id="f67a" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">请特别注意以<code class="fe mp mq mr ms b">cloudfront.net</code>结尾的<em class="lq">域名</em>。复制域名并将其粘贴到您的浏览器中。您应该看到您的Vue.js应用程序，现在使用HTTPS服务于一个<code class="fe mp mq mr ms b">cloudfront.net</code>地址。</p><p id="762b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">进步很大！剩下要做的就是连接一个自定义域名。</p><h2 id="3a17" class="my mz je bd na nb nc dn nd ne nf dp ng lc nh ni nj lg nk nl nm lk nn no np nq bi translated">为您的自定义域名创建SSL证书</h2><p id="61d1" class="pw-post-body-paragraph kt ku je kv b kw nr kf ky kz ns ki lb lc nt le lf lg nu li lj lk nv lm ln lo im bi translated">要在CloudFront中使用自定义域名，您需要一个有效的SSL证书，该证书通过AWS Certificate Manager创建和验证。</p><p id="5899" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在AWS控制台中，导航到证书管理器。<strong class="kv jf">重要:为了让CloudFront发行版使用自定义证书，必须为</strong> <code class="fe mp mq mr ms b"><strong class="kv jf">us-east-1</strong></code> <strong class="kv jf"> (N. Virginia)地区</strong>生成该证书。<strong class="kv jf"> </strong>在证书管理器中，您需要做的第一件事是将您的区域(右上角)切换到<code class="fe mp mq mr ms b">us-east-1.</code></p><p id="a6fc" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">点击<strong class="kv jf">请求证书</strong>。(您<em class="lq">可以</em>导入您已经拥有的证书，但是我们将完成生成新证书的步骤。)</p><p id="531e" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们想要“请求公共证书”然后，您将添加想要用于您的证书的域名。这需要是您可以修改DNS设置的域名。对于本教程，我将为我控制的域名生成一个证书:<code class="fe mp mq mr ms b">vue-deployment.ootbdev.com</code>。</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/f562ec08815269c67f1f647a2dc07168.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*URdC5EcIeajn0BWePrTxFg.png"/></div></figure><p id="2d9b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">点击<strong class="kv jf">下一个</strong>。</p><p id="d53b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">选择<em class="lq"> DNS验证</em>作为验证方法，然后再次点击<strong class="kv jf">下一步</strong>。</p><p id="6550" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">不需要添加任何标签。点击<strong class="kv jf">查看</strong>。</p><p id="b750" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">最后，<strong class="kv jf">确认并请求</strong>。</p><p id="4c49" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">您的证书申请将显示为“等待验证”此时，您需要根据此处提供的值，在您的域名的DNS设置中创建一个CNAME记录。</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi os"><img src="../Images/b18e60e1fee9ab06aa546440952ec496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OKTRWIgl5I9xWXeZfcmCuw.png"/></div></div></figure><p id="0b1b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">所有域名注册商的流程应该非常相似。</p><p id="78ba" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">当您在那里修改DNS记录时，除了这个记录之外，您还需要添加另一个记录来进行证书验证。我们<strong class="kv jf">还需要一个CNAME记录，将我们的域名指向我们的CloudFront分发域</strong>。</p><p id="3f37" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">为此，添加一个CNAME记录，其中主机名是您的自定义子域。在我上面的例子中，主机名应该是<code class="fe mp mq mr ms b">vue-deployment</code>。该值应该是CloudFront域名。在我上面的例子中，这将是<code class="fe mp mq mr ms b">d36ssnm6cjwpxw.cloudfront.net</code>。</p><p id="df32" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">总而言之，你应该增加两项CNAME记录。我的DNS记录看起来如下(你的应该看起来相似，但略有不同):</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ox"><img src="../Images/b09fecd60822b7436c78f024a48c2dc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6S5ffdGqlWMiVlgra9bPPw.png"/></div></div></figure><p id="8eb2" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">回到AWS证书管理器，当您刷新证书列表时，您可能会看到您请求的证书仍处于“待验证”状态。根据您的注册商，此验证可能需要几分钟到几小时不等。如果您通过AWS Route53管理您的域，那么这肯定会产生最快的(几乎是即时的)验证。我的证书验证花了大约45分钟，在Linode进行了DNS更改。</p><p id="5c35" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">您可以随时使用<a class="ae lp" href="https://mxtoolbox.com/CnameLookup.aspx" rel="noopener ugc nofollow" target="_blank">这个CNAME查找工具</a>来检查您的CNAME记录更改是否已经传播。如果您输入CNAME记录主机名并进行查找，您将看到记录值(一旦您的更改已传播):</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oy"><img src="../Images/dc1c1bc76680b7388f9673c54dd5f52e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jsq7hJCdOszdUz78DX9v_Q.png"/></div></div><figcaption class="ok ol gj gh gi om on bd b be z dk translated">验证您的CNAME记录更改是否有效</figcaption></figure><h2 id="dd5d" class="my mz je bd na nb nc dn nd ne nf dp ng lc nh ni nj lg nk nl nm lk nn no np nq bi translated">修改CloudFront发行版以接受使用自定义域名的请求</h2><p id="3989" class="pw-post-body-paragraph kt ku je kv b kw nr kf ky kz ns ki lb lc nt le lf lg nu li lj lk nv lm ln lo im bi translated">现在，随着我们的AWS证书的验证和生成，以及CNAME记录将我们的自定义域名与我们的CloudFront发行版进行别名化，我们需要对我们的CloudFront发行版进行一些修改，以便将它们结合在一起。</p><p id="24a4" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">返回AWS CloudFront并打开您创建的发行版，显示它的属性。在<em class="lq">常规</em>选项卡下，点击<strong class="kv jf">编辑</strong>。</p><p id="a99b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">您需要对您的发行版进行两项更改。首先，在<em class="lq">备用域名(CNAMEs)的输入中添加您的自定义域名。</em>其次，在<em class="lq"> SSL证书</em>下，选择“自定义SSL证书”然后，当您点击文本输入来选择要使用的证书时，您新请求的证书(来自<code class="fe mp mq mr ms b"><strong class="kv jf">us-east-1</strong></code>地区，请记住)应该会出现。选择那个。</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi os"><img src="../Images/d2528bebce6333a7fb0b0724d3c2e6b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ps_seIPjDlShKE2HMyq0Cw.png"/></div></div><figcaption class="ok ol gj gh gi om on bd b be z dk translated">更新“备用域名”并选择“自定义SSL证书”</figcaption></figure><p id="380c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">最后，点击<strong class="kv jf">编辑</strong>提交您的更改。</p><p id="223d" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">您的发行版将再次处于“进行中”状态。更新和部署这些发行版更改需要几分钟时间。</p><p id="2f1c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">完成发行版部署后，您可以尝试在浏览器中访问您的自定义域。您应该看到您部署的Vue.js应用程序，并且您应该看到您到自定义域的连接是安全的，与HTTPS连接。</p><p id="2f6c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">仅此而已。我们做到了！</p><h2 id="5d6d" class="my mz je bd na nb nc dn nd ne nf dp ng lc nh ni nj lg nk nl nm lk nn no np nq bi translated">审查和结论</h2><p id="d02b" class="pw-post-body-paragraph kt ku je kv b kw nr kf ky kz ns ki lb lc nt le lf lg nu li lj lk nv lm ln lo im bi translated">本教程的目标是向我们介绍将Vue.js应用程序部署到AWS进行托管的步骤，进行必要的调整以支持HTTPS和自定义域名。</p><p id="1521" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我们简要回顾一下我们在这里做了什么:</p><ol class=""><li id="1cde" class="mg mh je kv b kw kx kz la lc mi lg mj lk mk lo ml mm mn mo bi translated">用<code class="fe mp mq mr ms b">vue-cli</code>设置一个新的Vue.js应用。</li><li id="26a6" class="mg mh je kv b kw mt kz mu lc mv lg mw lk mx lo ml mm mn mo bi translated">创建了一个AWS S3桶来保存我们的Vue.js项目的<code class="fe mp mq mr ms b">dist/</code>文件夹的内容，将这个桶配置为一个静态网站。</li><li id="3a1c" class="mg mh je kv b kw mt kz mu lc mv lg mw lk mx lo ml mm mn mo bi translated">创建了一个AWS IAM策略和用户，我们在本地机器上使用<code class="fe mp mq mr ms b">aws-cli</code>来将我们的应用程序部署到S3。</li><li id="3c9d" class="mg mh je kv b kw mt kz mu lc mv lg mw lk mx lo ml mm mn mo bi translated">使用<code class="fe mp mq mr ms b">aws-cli</code>为我们创建的IAM用户配置凭证，然后调用<code class="fe mp mq mr ms b">s3 sync</code>来同步我们的S3桶和我们的<code class="fe mp mq mr ms b">dist/</code>文件夹。我们还在我们的<code class="fe mp mq mr ms b">package.json</code>文件中添加了一个快捷方式，这样我们就可以运行<code class="fe mp mq mr ms b">yarn deploy</code>来执行这个<code class="fe mp mq mr ms b">s3 sync</code>操作。</li><li id="edd9" class="mg mh je kv b kw mt kz mu lc mv lg mw lk mx lo ml mm mn mo bi translated">创建了AWS CloudFront分发版，通过HTTPS提供我们的S3 bucket网站。</li><li id="6d87" class="mg mh je kv b kw mt kz mu lc mv lg mw lk mx lo ml mm mn mo bi translated">在AWS证书管理器中创建了一个SSL证书，用于我们的自定义域名。</li><li id="1f58" class="mg mh je kv b kw mt kz mu lc mv lg mw lk mx lo ml mm mn mo bi translated">将CNAME记录添加到我们的自定义域的DNS设置中——一个用于证书验证，一个用于对我们的CloudFront域名的别名请求。</li><li id="aa34" class="mg mh je kv b kw mt kz mu lc mv lg mw lk mx lo ml mm mn mo bi translated">修改了我们的CloudFront发行版，使用我们的自定义域名作为备用域，并使用我们新创建的SSL证书。</li></ol><p id="147a" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">设置好基础设施后(本教程可供您参考)，以后您需要做的就是在准备好部署对Vue.js应用程序所做的更改时运行<code class="fe mp mq mr ms b">yarn deploy</code>。</p><p id="644d" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">今天干得不错，朋友们。现在，去喝杯咖啡休息一下吧。</p></div><div class="ab cl oz pa hx pb" role="separator"><span class="pc bw bk pd pe pf"/><span class="pc bw bk pd pe pf"/><span class="pc bw bk pd pe"/></div><div class="im in io ip iq"><p id="0709" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><em class="lq">阿尔文·李</em>是亚利桑那州凤凰城的一名全栈开发人员和远程工作者。他专门从事web开发、技术咨询以及为初创公司和小型企业构建原型。他在Moonlight上有空，在那里你可以<a class="ae lp" href="https://www.moonlightwork.com/app/users/2862/profile" rel="noopener ugc nofollow" target="_blank">查看他的个人资料</a>或者<a class="ae lp" href="https://www.moonlightwork.com/r/2862" rel="noopener ugc nofollow" target="_blank">请求雇佣他提供服务</a>。</p></div></div>    
</body>
</html>