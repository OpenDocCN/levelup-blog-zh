<html>
<head>
<title>Here is Why and How You Can Write Native Code in Flutter for Both Kotlin and Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以下是为什么以及如何用Flutter为Kotlin和Swift编写本地代码</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/here-is-why-and-how-you-can-write-native-code-in-flutter-for-both-kotlin-and-swift-91fd020ed4f5?source=collection_archive---------3-----------------------#2022-11-13">https://levelup.gitconnected.com/here-is-why-and-how-you-can-write-native-code-in-flutter-for-both-kotlin-and-swift-91fd020ed4f5?source=collection_archive---------3-----------------------#2022-11-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/627e3dda2b25bdc95f84a24a9ec3e48c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uY9jg5OwfFeqFnQAKDHIxQ.png"/></div></div></figure><p id="27d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">欢迎来到我的编写Kotlin和Swift原生集成代码的Flutter教程。</p><p id="0da6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面的内容是一个用Kotlin和Swift编写的本地示例，用于检索设备的名称和电池电量。</p><p id="2cb8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我在这里使用GetX作为状态管理(我不再推荐它了。但是您可以在自己的实现中使用任何您想要的状态管理。</p><h1 id="c35f" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">为什么我们需要写原生代码？</h1><p id="9dc4" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">正如你可能知道的，我们有<a class="ae lz" href="https://pub.dev/" rel="noopener ugc nofollow" target="_blank">https://pub.dev/</a>来支持我们日常的Flutter开发者生活，比如相机、许可处理、设备信息等等。</p><p id="44ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是，如果我们没有任何本地编程语言经验，也没有任何像获取设备信息、处理权限或能够调用相机这样的包，那该怎么办呢？</p><p id="b8d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当然，你会立即被解雇，由过去在Kotlin或Swift工作过的人接替你:)</p><p id="df6b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢上帝我们有pub.dev没有让Flutter Devs失业。</p><h2 id="0a20" class="ma kx iq bd ky mb mc dn lc md me dp lg kj mf mg lk kn mh mi lo kr mj mk ls ml bi translated">职业</h2><p id="f130" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">当我面试Flutter jobs时，10家公司中有6家向我询问Kotlin知识。当然，我并不是说如果你不了解科特林，你就不能在Flutter找到工作。现在看来这是个谎言。</p><p id="e29a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但如果你了解科特林或斯威夫特，你真的可以在比赛中走得很远。</p><h2 id="52d6" class="ma kx iq bd ky mb mc dn lc md me dp lg kj mf mg lk kn mh mi lo kr mj mk ls ml bi translated">编写定制集成或包</h2><p id="c9cd" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">如果您的公司使用定制的第三方软件包，您可能需要本地代码知识来进行集成。</p><p id="88e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你的公司希望你为设备的平台实现新的特性，如果在pub.dev中没有任何这样的包，你需要本地代码知识才能做到这一点。</p><p id="0d6b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，学习一些新的东西并没有坏处，如果你像我一样考虑长期投资，你应该学习科特林或者斯威夫特。</p><h1 id="2b4e" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">密码</h1><p id="f3b7" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">首先，我们将创建一个视图和一个控制器。作为一个例子，我将只检索设备名称和电池电量(注意，如果你使用模拟器，你不能检索电池电量，因为你需要一个真实的设备)</p><h2 id="9dc6" class="ma kx iq bd ky mb mc dn lc md me dp lg kj mf mg lk kn mh mi lo kr mj mk ls ml bi translated">视角</h2><p id="e0d3" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">这只是一个简单的视图，我使用GetX controller将值作为文本小部件放入UI。</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mm"><img src="../Images/7fe1edb869be4db491689de187decf1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TsnwBMzQv75MMgVtoW0Iig.png"/></div></div></figure><h2 id="2026" class="ma kx iq bd ky mb mc dn lc md me dp lg kj mf mg lk kn mh mi lo kr mj mk ls ml bi translated">控制器</h2><p id="01cc" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">这里我们有处理跨平台通道调用的控制器。</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mr"><img src="../Images/3e2341c9c85210577ec19c6ef543186d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*keK2Q2cDnG3GShkcJa0-zQ.png"/></div></div></figure><p id="1a0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们需要定义一个具有给定名称的MethodChannel变量，如下所示:</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/710017d217734bdf18098b8bd84fa4fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xj6B8xSQBHs81hdANPvh2A.png"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">示例通道名称将在我们的本机代码文件中使用。我的是“本地的”</figcaption></figure><p id="4306" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，我将创建两个名为getBatteryLevel和getDeviceName的函数，它们将在onInit生命周期方法的初始启动时被调用。</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mx"><img src="../Images/2d2f2919c9872b72feaa2baf958d9f04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PdXiPTL1pJ100_FdicO0ew.png"/></div></div></figure><p id="1b77" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当两个方法将被调用时。它将使用示例频道名称(我们的是“<strong class="ka ir">本地</strong>”)调用基于平台的功能</p><h1 id="8fb7" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">科特林</h1><p id="96a0" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">在“Android/app/src/main/kotlin/com/example/flutter _ native/”路径中，我们将找到“MainActivity.kt”文件来编写我们的自定义kot Lin代码。</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/f3678144dfafbd2dfd5e79d1f74609a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ipnvyz1J6J2KDDsuV85DXw.png"/></div></div></figure><p id="c99e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">先做最重要的事情；顶部的channel变量应该与我们的dart代码中的CHANNEL名称相同，以便进行集成。</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/f7fe5f5204b12dc072253aca8eb1bf57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IgHMbkDvF1bodJC4wftycw.png"/></div></div></figure><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/710017d217734bdf18098b8bd84fa4fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xj6B8xSQBHs81hdANPvh2A.png"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">example_channel_name应称为“native ”,与本机代码中的名称相同。</figcaption></figure><p id="5404" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，我们将创建configureFlutterEngine函数。</p><p id="00ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将允许我们从dart代码中处理方法调用，并执行业务逻辑。</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi na"><img src="../Images/11f4b0234b8b3f91139faee47585cc9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qaqy9c3Iyk-vzHffloGieQ.png"/></div></div></figure><p id="4054" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如您所见，我们正在为我们的业务逻辑实现检查方法名，如“getBatteryLevel”。我们确实在前面的控制器中给invoke方法起了一个名字。</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nb"><img src="../Images/ee8df3c20e3c852bbe31064c2ef16b19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3fdXhAn9wnqydB1xprgasA.png"/></div></div></figure><p id="1140" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">获取电池电量和设备名称的函数</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nc"><img src="../Images/94c3bc2c7d6885f4b68d880b9bbd99e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xhrgahsdsdAQ8acqhTmj6Q.png"/></div></div></figure><h1 id="e806" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">迅速发生的</h1><p id="b4bc" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">它有一个非常相似的本地代码处理实现，就像Kotlin一样。</p><p id="f6b8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在“ios/Runner/”路径中，我们将找到“AppDelegate.swift”文件来编写我们的自定义swift代码。</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/682c1d691aaf225a5c163231e8fb3f30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ucjVB6ieAV9Lie1OSTAX8g.png"/></div></div></figure><p id="b3bf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在应用程序函数内部，我们将编写我们的方法处理</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/870764594817cdf130926a912bd7a7b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GVfAC5s1NC3s0DTZGXbkcA.png"/></div></div></figure><p id="66a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">获取电池电量和设备名称的函数:</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/300b35e34365fdd379a4d8629294b87c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nk0Au7yzCI9PAuuMI0QKPA.png"/></div></div></figure></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><p id="cc60" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢您的阅读。</p><p id="139e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以在此处找到相关的存储库:</p><p id="ac18" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae lz" href="https://github.com/umutarpat/flutter_native" rel="noopener ugc nofollow" target="_blank">https://github.com/umutarpat/flutter_native</a></p></div></div>    
</body>
</html>