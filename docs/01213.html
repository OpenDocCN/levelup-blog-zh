<html>
<head>
<title>How to Build Ionic Apps with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用React构建Ionic应用</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-build-ionic-apps-with-react-73963c6a0fc0?source=collection_archive---------3-----------------------#2019-11-28">https://levelup.gitconnected.com/how-to-build-ionic-apps-with-react-73963c6a0fc0?source=collection_archive---------3-----------------------#2019-11-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/92e535a70dae49930c8876fbbe7fc448.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Gz9ZUymfM2lonv8m"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">塞巴斯蒂安·皮克勒在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="ebd8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有了最新版本的Ionic framework，一个让你用web技术编写移动应用的工具，你就可以用React来构建你的移动应用了。在v4之前，Ionic只为Angular提供组件，但现在React已经完全支持组件。</p><p id="88fc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Ionic 4是一个手机app框架，也是一个组件库。您可以构建移动应用程序、渐进式web应用程序和普通web应用程序。组件库也可以单独使用。当然，如果您愿意，硬件支持仍然可供您使用。</p><p id="759d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Ionic的React版本的完整参考资料位于https://ionicframework.com/docs的<a class="ae kf" href="https://ionicframework.com/docs" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="68c0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将使用Ionic构建一个React web应用程序来进行货币兑换。主页将显示最新的汇率列表，另一页将有一个表格来转换您选择的货币。为了获得数据，我们使用位于<a class="ae kf" href="https://exchangeratesapi.io/" rel="noopener ugc nofollow" target="_blank">https://exchangeratesapi.io/</a>的外汇汇率API。我们使用位于<a class="ae kf" href="https://openexchangerates.org/" rel="noopener ugc nofollow" target="_blank">https://openexchangerates.org/</a>的公开汇率API来获取货币列表。</p><h2 id="46a3" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">入门指南</h2><p id="57ee" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">首先，我们将安装Ionic CLI。我们运行:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="1997" class="le lf it mh b gy ml mm l mn mo">npm install -g ionic@latest</span></pre><p id="0823" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们运行:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="4eab" class="le lf it mh b gy ml mm l mn mo">ionic start currency-converter --type=react</span></pre><p id="64dc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们选择Sidenav选项来创建一个带有左侧栏的Ionic项目。</p><p id="c8c9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还需要安装一些其他的软件包。我们需要Axios进行HTTP请求，需要MobX进行状态管理。在我们的项目文件夹中运行<code class="fe mp mq mr mh b">npm i axios mobx mobx-react</code>来安装它们。</p><p id="21c8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们准备创建一些页面。在<code class="fe mp mq mr mh b">pages</code>文件夹中，创建<code class="fe mp mq mr mh b">ConvertCurrencyPage.jsx</code>并添加:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="4855" class="le lf it mh b gy ml mm l mn mo">import {<br/>  IonButtons,<br/>  IonContent,<br/>  IonHeader,<br/>  IonItem,<br/>  IonList,<br/>  IonMenuButton,<br/>  IonPage,<br/>  IonTitle,<br/>  IonToolbar,<br/>  IonInput,<br/>  IonLabel,<br/>  IonSelect,<br/>  IonSelectOption,<br/>  IonButton<br/>} from "<a class="ae kf" href="http://twitter.com/ionic/react" rel="noopener ugc nofollow" target="_blank">@ionic/react</a>";</span><span id="44ba" class="le lf it mh b gy ms mm l mn mo">import React from "react";<br/>import { observer } from "mobx-react";<br/>import { getExchangeRates } from "../requests";</span><span id="fa64" class="le lf it mh b gy ms mm l mn mo">const ConvertCurrencyPage = ({ currenciesStore }) =&gt; {<br/>  const [fromCurrencies, setFromCurrencies] = React.useState({});<br/>  const [toCurrencies, setToCurrencies] = React.useState({});<br/>  const [values, setValues] = React.useState({ amount: 0 } as any);<br/>  const [submitting, setSubmitting] = React.useState(false);<br/>  const [toAmount, setToAmount] = React.useState(0);</span><span id="88a6" class="le lf it mh b gy ms mm l mn mo">const convertCurrency = async () =&gt; {<br/>    setSubmitting(true);<br/>    if (values.amount &lt;= 0 || !values.from || !values.to) {<br/>      return;<br/>    }<br/>    const { data } = await getExchangeRates(values.from);<br/>    const rate = data.rates[values.to];<br/>    setToAmount(values.amount * rate);<br/>  };</span><span id="500f" class="le lf it mh b gy ms mm l mn mo">React.useEffect(() =&gt; {<br/>    const fromCurrencies = {};<br/>    for (let key in currenciesStore.currencies) {<br/>      if (key != values.to) {<br/>        fromCurrencies[key] = currenciesStore.currencies[key];<br/>      }<br/>    }<br/>    setFromCurrencies(fromCurrencies);</span><span id="9169" class="le lf it mh b gy ms mm l mn mo">const toCurrencies = {};<br/>    for (let key in currenciesStore.currencies) {<br/>      if (key != values.from) {<br/>        toCurrencies[key] = currenciesStore.currencies[key];<br/>      }<br/>    }<br/>    setToCurrencies(toCurrencies);<br/>  }, [currenciesStore.currencies, values.from, values.to]);</span><span id="bdf0" class="le lf it mh b gy ms mm l mn mo">return (<br/>    &lt;IonPage&gt;<br/>      &lt;IonHeader&gt;<br/>        &lt;IonToolbar&gt;<br/>          &lt;IonButtons slot="start"&gt;<br/>            &lt;IonMenuButton /&gt;<br/>          &lt;/IonButtons&gt;<br/>          &lt;IonTitle&gt;Convert Currency&lt;/IonTitle&gt;<br/>        &lt;/IonToolbar&gt;<br/>      &lt;/IonHeader&gt;</span><span id="2660" class="le lf it mh b gy ms mm l mn mo">&lt;IonContent&gt;<br/>        &lt;IonList lines="none"&gt;<br/>          &lt;IonItem&gt;<br/>            &lt;IonInput<br/>              type="number"<br/>              value={values.amount}<br/>              color={!values.amount &amp;&amp; submitting ? "danger" : undefined}<br/>              min="0"<br/>              onIonChange={ev =&gt;<br/>                setValues({ ...values, amount: (ev.target as any).value })<br/>              }<br/>            &gt;&lt;/IonInput&gt;<br/>          &lt;/IonItem&gt;</span><span id="7b8a" class="le lf it mh b gy ms mm l mn mo">&lt;IonItem&gt;<br/>            &lt;IonLabel&gt;Currency to Convert From&lt;/IonLabel&gt;<br/>            &lt;IonSelect<br/>              placeholder="Select One"<br/>              color={!values.from &amp;&amp; submitting ? "danger" : undefined}<br/>              onIonChange={ev =&gt;<br/>                setValues({ ...values, from: (ev.target as any).value })<br/>              }<br/>            &gt;<br/>              {Object.keys(fromCurrencies).map(key =&gt; {<br/>                return (<br/>                  &lt;IonSelectOption value={key} key={key}&gt;<br/>                    {(fromCurrencies as any)[key]}<br/>                  &lt;/IonSelectOption&gt;<br/>                );<br/>              })}<br/>            &lt;/IonSelect&gt;<br/>          &lt;/IonItem&gt;</span><span id="a83f" class="le lf it mh b gy ms mm l mn mo">&lt;IonItem&gt;<br/>            &lt;IonLabel&gt;Currency to Convert To&lt;/IonLabel&gt;<br/>            &lt;IonSelect<br/>              placeholder="Select One"<br/>              color={!values.to &amp;&amp; submitting ? "danger" : undefined}<br/>              onIonChange={ev =&gt;<br/>                setValues({ ...values, to: (ev.target as any).value })<br/>              }<br/>            &gt;<br/>              {Object.keys(toCurrencies).map(key =&gt; {<br/>                return (<br/>                  &lt;IonSelectOption value={key} key={key}&gt;<br/>                    {(toCurrencies as any)[key]}<br/>                  &lt;/IonSelectOption&gt;<br/>                );<br/>              })}<br/>            &lt;/IonSelect&gt;<br/>          &lt;/IonItem&gt;</span><span id="d801" class="le lf it mh b gy ms mm l mn mo">&lt;IonItem&gt;<br/>            &lt;IonButton size="default" fill="solid" onClick={convertCurrency}&gt;<br/>              Convert<br/>            &lt;/IonButton&gt;<br/>          &lt;/IonItem&gt;</span><span id="9512" class="le lf it mh b gy ms mm l mn mo">{toAmount ? (<br/>            &lt;IonItem&gt;<br/>              {values.amount} {values.from} is {toAmount} {values.to}.<br/>            &lt;/IonItem&gt;<br/>          ) : (<br/>            undefined<br/>          )}<br/>        &lt;/IonList&gt;<br/>      &lt;/IonContent&gt;<br/>    &lt;/IonPage&gt;<br/>  );<br/>};</span><span id="81d5" class="le lf it mh b gy ms mm l mn mo">export default observer(ConvertCurrencyPage);</span></pre><p id="2235" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这添加了一个将货币从一种货币转换成另一种货币的表单。在此表单中，我们通过从第一个下拉列表中排除要兑换的货币，并从第二个下拉列表中排除要兑换的货币，按选择进行筛选。此外，我们还有一个用于转换金额的<code class="fe mp mq mr mh b">ion-input</code>。我们从<code class="fe mp mq mr mh b">currenciesStore</code>中获取货币的值，这是MobX存储，从它获取货币列表。在<code class="fe mp mq mr mh b">IonSelect</code>组件中，我们将<code class="fe mp mq mr mh b">onIonChange</code>属性设置为设置下拉列表值的处理函数。我们还为所有输入和选择设置了占位符。在<code class="fe mp mq mr mh b">IonInput</code>组件中，我们对<code class="fe mp mq mr mh b">onIonChange</code>处理程序做同样的事情。我们通过在变更事件期间使用在<code class="fe mp mq mr mh b">values</code>对象中设置的变量来显示正确的值。</p><p id="de88" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当用户点击Convert时，我们运行<code class="fe mp mq mr mh b">convertCurrency</code>函数。在运行其余代码之前，我们检查这些值是否设置正确。如果成功，那么我们运行从<code class="fe mp mq mr mh b">requests.js</code>导入的<code class="fe mp mq mr mh b">getExchangeRates</code>函数，然后我们通过将比率乘以金额来设置最终的<code class="fe mp mq mr mh b">toAmount</code>。</p><p id="d256" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mp mq mr mh b">useEffect</code>回调用于从待兑换货币列表中排除待兑换货币，反之亦然。第二个参数<code class="fe mp mq mr mh b">useEffect</code>中的数组指定要监视哪些值。</p><p id="efeb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后一行中的<code class="fe mp mq mr mh b">observer</code>函数用于指定组件监视来自MobX存储的最新值。</p><p id="1f52" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来在<code class="fe mp mq mr mh b">Home.tsx</code>中，我们将现有代码替换为:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="5aaa" class="le lf it mh b gy ml mm l mn mo">import {<br/>  IonButtons,<br/>  IonContent,<br/>  IonHeader,<br/>  IonItem,<br/>  IonLabel,<br/>  IonList,<br/>  IonListHeader,<br/>  IonMenuButton,<br/>  IonPage,<br/>  IonTitle,<br/>  IonToolbar,<br/>  IonSelect,<br/>  IonSelectOption<br/>} from "<a class="ae kf" href="http://twitter.com/ionic/react" rel="noopener ugc nofollow" target="_blank">@ionic/react</a>";<br/>import React from "react";<br/>import "./Home.css";<br/>import { getExchangeRates } from "../requests";<br/>import { CurrencyStore } from "../stores";<br/>import { observer } from "mobx-react";</span><span id="a611" class="le lf it mh b gy ms mm l mn mo">const HomePage = ({ currencyStore, currenciesStore }) =&gt; {<br/>  const [rates, setRates] = React.useState({});</span><span id="ba25" class="le lf it mh b gy ms mm l mn mo">const getRates = async () =&gt; {<br/>    const { data } = await getExchangeRates(<br/>      (currencyStore as CurrencyStore).currency<br/>    );<br/>    setRates(data.rates);<br/>  };</span><span id="d4fd" class="le lf it mh b gy ms mm l mn mo">React.useEffect(() =&gt; {<br/>    getRates();<br/>  }, [(currencyStore as CurrencyStore).currency]);<br/>  return (<br/>    &lt;IonPage&gt;<br/>      &lt;IonHeader&gt;<br/>        &lt;IonToolbar&gt;<br/>          &lt;IonButtons slot="start"&gt;<br/>            &lt;IonMenuButton /&gt;<br/>          &lt;/IonButtons&gt;<br/>          &lt;IonTitle&gt;Home&lt;/IonTitle&gt;<br/>        &lt;/IonToolbar&gt;<br/>      &lt;/IonHeader&gt;<br/>      &lt;IonContent&gt;<br/>        &lt;IonList lines="none"&gt;<br/>          &lt;IonListHeader&gt;Latest Exchange Rates&lt;/IonListHeader&gt;</span><span id="2712" class="le lf it mh b gy ms mm l mn mo">          &lt;IonItem&gt;<br/>            &lt;IonLabel&gt;Currency&lt;/IonLabel&gt;<br/>            &lt;IonSelect<br/>              placeholder="Select One"<br/>              onIonChange={ev =&gt; {<br/>                (currencyStore as CurrencyStore).setCurrency(<br/>                  ev.target &amp;&amp; (ev.target as any).value<br/>                );<br/>              }}<br/>            &gt;<br/>              {Object.keys(currenciesStore.currencies).map(key =&gt; {<br/>                return (<br/>                  &lt;IonSelectOption<br/>                    value={key}<br/>                    key={key}<br/>                    selected={<br/>                      (currencyStore as CurrencyStore).currency<br/>                        ? key == (currencyStore as CurrencyStore).currency<br/>                        : key == "AUD"<br/>                    }<br/>                  &gt;<br/>                    {(currenciesStore.currencies as any)[key]}<br/>                  &lt;/IonSelectOption&gt;<br/>                );<br/>              })}<br/>            &lt;/IonSelect&gt;<br/>          &lt;/IonItem&gt;<br/>        &lt;/IonList&gt;</span><span id="ceee" class="le lf it mh b gy ms mm l mn mo">        &lt;IonList lines="none"&gt;<br/>          &lt;IonListHeader&gt;Exchange Rates&lt;/IonListHeader&gt;<br/>          {Object.keys(rates).map(key =&gt; {<br/>            console.log(rates);<br/>            return (<br/>              &lt;IonItem&gt;<br/>                {key}: {rates[key]}<br/>              &lt;/IonItem&gt;<br/>            );<br/>          })}<br/>        &lt;/IonList&gt;<br/>      &lt;/IonContent&gt;<br/>    &lt;/IonPage&gt;<br/>  );<br/>};</span><span id="60ae" class="le lf it mh b gy ms mm l mn mo">export default observer(HomePage);</span></pre><p id="d143" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个文件中，我们显示了来自API的汇率。我们从<code class="fe mp mq mr mh b">currenciesStore</code>中获取货币，这样用户就可以看到基于不同货币的汇率。这些物品显示在Ionic提供的<code class="fe mp mq mr mh b">IonList</code>中。</p><p id="7bed" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后一行中的<code class="fe mp mq mr mh b">observer</code>函数用于指定组件监视来自MobX存储的最新值。</p><p id="117a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来在<code class="fe mp mq mr mh b">App.tsx</code>中，将以下代码替换为:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="3c8d" class="le lf it mh b gy ml mm l mn mo">import React from "react";<br/>import { Redirect, Route } from "react-router-dom";<br/>import { IonApp, IonRouterOutlet, IonSplitPane } from "<a class="ae kf" href="http://twitter.com/ionic/react" rel="noopener ugc nofollow" target="_blank">@ionic/react</a>";<br/>import { IonReactRouter } from "<a class="ae kf" href="http://twitter.com/ionic/react-router" rel="noopener ugc nofollow" target="_blank">@ionic/react-router</a>";<br/>import { AppPage } from "./declarations";</span><span id="8e7a" class="le lf it mh b gy ms mm l mn mo">import Menu from "./components/Menu";<br/>import Home from "./pages/Home";<br/>import { home, cash } from "ionicons/icons";</span><span id="c279" class="le lf it mh b gy ms mm l mn mo">/* Core CSS required for Ionic components to work properly */<br/>import "<a class="ae kf" href="http://twitter.com/ionic/react" rel="noopener ugc nofollow" target="_blank">@ionic/react</a>/css/core.css";</span><span id="a382" class="le lf it mh b gy ms mm l mn mo">/* Basic CSS for apps built with Ionic */<br/>import "<a class="ae kf" href="http://twitter.com/ionic/react" rel="noopener ugc nofollow" target="_blank">@ionic/react</a>/css/normalize.css";<br/>import "<a class="ae kf" href="http://twitter.com/ionic/react" rel="noopener ugc nofollow" target="_blank">@ionic/react</a>/css/structure.css";<br/>import "<a class="ae kf" href="http://twitter.com/ionic/react" rel="noopener ugc nofollow" target="_blank">@ionic/react</a>/css/typography.css";</span><span id="bbf1" class="le lf it mh b gy ms mm l mn mo">/* Optional CSS utils that can be commented out */<br/>import "<a class="ae kf" href="http://twitter.com/ionic/react" rel="noopener ugc nofollow" target="_blank">@ionic/react</a>/css/padding.css";<br/>import "<a class="ae kf" href="http://twitter.com/ionic/react" rel="noopener ugc nofollow" target="_blank">@ionic/react</a>/css/float-elements.css";<br/>import "<a class="ae kf" href="http://twitter.com/ionic/react" rel="noopener ugc nofollow" target="_blank">@ionic/react</a>/css/text-alignment.css";<br/>import "<a class="ae kf" href="http://twitter.com/ionic/react" rel="noopener ugc nofollow" target="_blank">@ionic/react</a>/css/text-transformation.css";<br/>import "<a class="ae kf" href="http://twitter.com/ionic/react" rel="noopener ugc nofollow" target="_blank">@ionic/react</a>/css/flex-utils.css";<br/>import "<a class="ae kf" href="http://twitter.com/ionic/react" rel="noopener ugc nofollow" target="_blank">@ionic/react</a>/css/display.css";</span><span id="3045" class="le lf it mh b gy ms mm l mn mo">/* Theme variables */<br/>import "./theme/variables.css";<br/>import ConvertCurrencyPage from "./pages/ConvertCurrencyPage";<br/>import { CurrencyStore, CurrenciesStore } from "./stores";<br/>import { getCurrenciesList } from "./requests";</span><span id="e1cd" class="le lf it mh b gy ms mm l mn mo">const currencyStore = new CurrencyStore();<br/>const currenciesStore = new CurrenciesStore();</span><span id="ae90" class="le lf it mh b gy ms mm l mn mo">const appPages: AppPage[] = [<br/>  {<br/>    title: "Home",<br/>    url: "/home",<br/>    icon: home<br/>  },<br/>  {<br/>    title: "Convert Currency",<br/>    url: "/convertcurrency",<br/>    icon: cash<br/>  }<br/>];</span><span id="06bb" class="le lf it mh b gy ms mm l mn mo">const App: React.FC = () =&gt; {<br/>  const [initialized, setInitialized] = React.useState(false);</span><span id="f16e" class="le lf it mh b gy ms mm l mn mo">  const getCurrencies = async () =&gt; {<br/>    const { data } = await getCurrenciesList();<br/>    currenciesStore.setCurrencies(data);<br/>    setInitialized(true);<br/>  };</span><span id="c4df" class="le lf it mh b gy ms mm l mn mo">React.useEffect(() =&gt; {<br/>    if (!initialized) {<br/>      getCurrencies();<br/>    }<br/>  });</span><span id="c697" class="le lf it mh b gy ms mm l mn mo">  return (<br/>    &lt;IonApp&gt;<br/>      &lt;IonReactRouter&gt;<br/>        &lt;IonSplitPane contentId="main"&gt;<br/>          &lt;Menu appPages={appPages} /&gt;<br/>          &lt;IonRouterOutlet id="main"&gt;<br/>            &lt;Route<br/>              path="/home"<br/>              render={() =&gt; (<br/>                &lt;Home<br/>                  currencyStore={currencyStore}<br/>                  currenciesStore={currenciesStore}<br/>                /&gt;<br/>              )}<br/>              exact={true}<br/>            /&gt;<br/>            &lt;Route<br/>              path="/convertcurrency"<br/>              render={() =&gt; (<br/>                &lt;ConvertCurrencyPage<br/>                  currenciesStore={currenciesStore}<br/>                /&gt;<br/>              )}<br/>              exact={true}<br/>            /&gt;<br/>            &lt;Route exact path="/" render={() =&gt; &lt;Redirect to="/home" /&gt;} /&gt;<br/>          &lt;/IonRouterOutlet&gt;<br/>        &lt;/IonSplitPane&gt;<br/>      &lt;/IonReactRouter&gt;<br/>    &lt;/IonApp&gt;<br/>  );<br/>};</span><span id="a195" class="le lf it mh b gy ms mm l mn mo">export default App;</span></pre><p id="5d32" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们修改了路由，因此我们使用了<code class="fe mp mq mr mh b">render</code>属性而不是<code class="fe mp mq mr mh b">component</code>属性，因为我们想要将我们的MobX存储传递到组件中。存储区包含当前为主页选择的货币以及两个页面的货币列表。</p><p id="ff40" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们在这里获取/设置两个组件的货币列表。</p><p id="ade8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，在<code class="fe mp mq mr mh b">src</code>文件夹中创建<code class="fe mp mq mr mh b">requests.ts</code>并添加:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="001e" class="le lf it mh b gy ml mm l mn mo">const axios = require('axios');<br/>const APIURL = '<a class="ae kf" href="https://api.exchangeratesapi.io'" rel="noopener ugc nofollow" target="_blank">https://api.exchangeratesapi.io'</a>;<br/>const OPEN_EXCHANGE_RATES_URL = '<a class="ae kf" href="http://openexchangerates.org/api/currencies.json'" rel="noopener ugc nofollow" target="_blank">http://openexchangerates.org/api/currencies.json'</a>;</span><span id="930a" class="le lf it mh b gy ms mm l mn mo">export const getExchangeRates = (baseCurrency: string) =&gt; axios.get(`${APIURL}/latest?base=${baseCurrency}`)</span><span id="08f9" class="le lf it mh b gy ms mm l mn mo">export const getCurrenciesList = () =&gt; axios.get(OPEN_EXCHANGE_RATES_URL)</span></pre><p id="94d2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是发出HTTP请求以获取货币和汇率的代码。</p><p id="b5b4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来创建<code class="fe mp mq mr mh b">store.ts</code>并添加:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="de9e" class="le lf it mh b gy ml mm l mn mo">import { observable, action } from "mobx";</span><span id="ef37" class="le lf it mh b gy ms mm l mn mo">class CurrencyStore {<br/>    <a class="ae kf" href="http://twitter.com/observable" rel="noopener ugc nofollow" target="_blank">@observable</a> currency: string = 'AUD';</span><span id="a4e9" class="le lf it mh b gy ms mm l mn mo"><a class="ae kf" href="http://twitter.com/action" rel="noopener ugc nofollow" target="_blank">    @action</a> setCurrency(currency: string) {<br/>        this.currency = currency;<br/>    }<br/>}</span><span id="0468" class="le lf it mh b gy ms mm l mn mo">class CurrenciesStore {<br/>    <a class="ae kf" href="http://twitter.com/observable" rel="noopener ugc nofollow" target="_blank">@observable</a> currencies = {};</span><span id="62cf" class="le lf it mh b gy ms mm l mn mo"><a class="ae kf" href="http://twitter.com/action" rel="noopener ugc nofollow" target="_blank">    @action</a> setCurrencies(currencies) {<br/>        this.currencies = currencies;<br/>    }<br/>}</span><span id="a97e" class="le lf it mh b gy ms mm l mn mo">export { CurrencyStore, CurrenciesStore };</span></pre><p id="656e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mp mq mr mh b">CurrencyStore</code>用于在主页中存储所选货币，并显示基于所选货币的汇率。<code class="fe mp mq mr mh b">currency</code>是主页观察到的值，<code class="fe mp mq mr mh b">setCurrency</code>设置货币值。类似地，<code class="fe mp mq mr mh b">CurrenciesStore</code>存储在<code class="fe mp mq mr mh b">App.tsx</code>中检索的货币列表，其中<code class="fe mp mq mr mh b">setCurrencies</code>被调用。</p><p id="5de4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来在<code class="fe mp mq mr mh b">tsconfig.json</code>中，我们将现有代码替换为:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="7fa5" class="le lf it mh b gy ml mm l mn mo">{<br/>  "compilerOptions": {<br/>      "experimentalDecorators": true,<br/>    "target": "es5",<br/>    "lib": [<br/>      "dom",<br/>      "dom.iterable",<br/>      "esnext"<br/>    ],<br/>    "allowJs": true,<br/>    "skipLibCheck": true,<br/>    "esModuleInterop": true,<br/>    "allowSyntheticDefaultImports": true,<br/>    "strict": true,<br/>    "forceConsistentCasingInFileNames": true,<br/>    "module": "esnext",<br/>    "moduleResolution": "node",<br/>    "resolveJsonModule": true,<br/>    "isolatedModules": true,<br/>    "noEmit": true,<br/>    "jsx": "preserve",<br/>    "noImplicitAny": false<br/>  },<br/>  "include": [<br/>    "src"<br/>  ]<br/>}</span></pre><p id="bece" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将改变<code class="fe mp mq mr mh b">noImplicitAny</code>并将其设置为<code class="fe mp mq mr mh b">true</code>。</p><p id="b2a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所有的艰苦工作完成后，我们得到:</p><figure class="mc md me mf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mt"><img src="../Images/a374895d0f4364febc73986834ac0276.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ViEamI3DZKT8MzKZR6LkIQ.png"/></div></div></figure><figure class="mc md me mf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mt"><img src="../Images/d98c8887f1c94e4f19b1f4ace930b2f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uzYgHor7q7nmVKWO-dDl2A.png"/></div></div></figure><figure class="mc md me mf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mt"><img src="../Images/4cda20c2ebcf849e8b3b16c410939316.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OtKJ6Se1tyRetRg_6ZPUeg.png"/></div></div></figure></div></div>    
</body>
</html>