<html>
<head>
<title>React Context and the useContext Hook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React上下文和useContext挂钩</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/react-context-and-the-usecontext-hook-dfa3f8a00a1b?source=collection_archive---------5-----------------------#2022-06-23">https://levelup.gitconnected.com/react-context-and-the-usecontext-hook-dfa3f8a00a1b?source=collection_archive---------5-----------------------#2022-06-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="ec6b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">React是一个用于构建用户界面的JavaScript库。如果你不熟悉JavaScript，那么看看这篇文章——<a class="ae kl" href="https://medium.com/@abongsjoel/javascript-a-brief-introduction-e995ae5a2494" rel="noopener">JavaScript，简介</a>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/be03f6831138333a7725992b914e8252.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gcX_IgI1drKm5KIcxw40xA.jpeg"/></div></div></figure><p id="7f7c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本文假设您熟悉JavaScript框架<strong class="jp ir"> React </strong>。</p><p id="cada" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将关注React上下文——它是什么以及如何使用它。</p><h1 id="df88" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">反应上下文</h1><p id="a367" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">React Context提供了一种通过组件树传递数据的方式，而不必在每一层手动向下传递属性。</p><p id="157e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Context旨在共享可以被视为React组件树的“全局”数据，例如当前经过身份验证的用户、主题或首选语言。</p><p id="a830" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">我们如何使用React上下文？</strong></p><p id="fa63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用React上下文有三个主要步骤，即:</p><ol class=""><li id="c20c" class="mb mc iq jp b jq jr ju jv jy md kc me kg mf kk mg mh mi mj bi translated">使用<code class="fe mk ml mm mn b">createContext</code>方法创建一个上下文。</li></ol><pre class="kn ko kp kq gt mo mn mp mq aw mr bi"><span id="98ab" class="ms kz iq mn b gy mt mu l mv mw">const MyContext = React.createContext();</span></pre><p id="9f35" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.将创建的上下文中的<code class="fe mk ml mm mn b">Provider</code>方法包装在组件树周围，并将组件要使用的数据作为<code class="fe mk ml mm mn b">value</code>传递给它。</p><pre class="kn ko kp kq gt mo mn mp mq aw mr bi"><span id="55fe" class="ms kz iq mn b gy mt mu l mv mw">export default function App() {<br/>  return (<br/>    &lt;MyContext.Provider value="Some data to pass down"&gt;<br/>      &lt;MyCompenent /&gt;<br/>    &lt;/MyContext.Provider&gt;<br/>  )<br/>}</span></pre><p id="85e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.使用上下文使用者读取任何子组件中传递的值。</p><pre class="kn ko kp kq gt mo mn mp mq aw mr bi"><span id="130d" class="ms kz iq mn b gy mt mu l mv mw">function ChildComponent() {<br/>  return (<br/>    &lt;MyContext.Consumer&gt;<br/>      {value =&gt; &lt;h1&gt;{value}&lt;/h1&gt;} <br/>    &lt;/MyContext.Consumer&gt;<br/>  )<br/>}</span></pre><p id="bc6b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意:当我们调用<code class="fe mk ml mm mn b">React.createContext</code>时，我们可以将一个初始值传递给我们的value prop。创建的上下文是一个带有属性的对象:<code class="fe mk ml mm mn b">Provider</code>和<code class="fe mk ml mm mn b">Consumer</code>，它们是上面看到的组件。</p><p id="a3a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了使用我们传递下来的值，我们使用所谓的render props模式，这只是消费者组件作为道具提供给我们的一个函数。在那个函数的返回中，我们可以返回并使用<code class="fe mk ml mm mn b">value</code>。</p><h1 id="6ce7" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">useContext挂钩</h1><p id="df7c" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">随着React钩子的出现，React 16.8提供了另一种使用上下文的方式。</p><p id="0af7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">简单地说，钩子是React中的一个特性，它让我们不用写类就可以使用状态和其他React特性。</p><p id="1806" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，我们现在可以使用useContext挂钩来使用上下文，如下所示:</p><pre class="kn ko kp kq gt mo mn mp mq aw mr bi"><span id="a761" class="ms kz iq mn b gy mt mu l mv mw">function ChildComponent() {<br/>  const value = React.useContext(MyContext)</span><span id="b72a" class="ms kz iq mn b gy mx mu l mv mw">  return &lt;h1&gt;{value}&lt;/h1&gt;} <br/>}</span></pre><p id="3b5a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以清楚地看到useContext钩子如何通过使我们的组件更加简洁易读来简化我们的生活。</p><h1 id="014f" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">结论</h1><p id="c679" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">如果我们不更新状态，而仅仅是将它传递到组件树中，我们就不需要像Redux这样的全局状态管理库。在这种情况下，我们可以简单地使用React上下文。</p><p id="355e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然可以将React context与一个类似useReducer的挂钩结合起来，创建一个临时的状态管理库，而不需要任何第三方库，但出于性能原因，通常不建议这样做。</p><p id="2560" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi">—-</p><p id="0211" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你喜欢这篇文章，请留下几个(或很多)掌声，如果你还没有，请确保在Medium上关注我。您也可以订阅，以便在我发布时收到电子邮件。谢了。</p></div></div>    
</body>
</html>