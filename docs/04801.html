<html>
<head>
<title>Getting started with Ceph on Openshift using rook operator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用rook运算符在Openshift上开始使用Ceph</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/getting-started-with-ceph-on-openshift-using-rook-operator-67d19df9e1a8?source=collection_archive---------5-----------------------#2020-07-16">https://levelup.gitconnected.com/getting-started-with-ceph-on-openshift-using-rook-operator-67d19df9e1a8?source=collection_archive---------5-----------------------#2020-07-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/0c78ddfa45c0a3234f646eeb2e59bf91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z87HW_X6Nkrx-QxHgjb8UA.png"/></div></div></figure><p id="23f5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Ceph是一个软件解决方案，旨在解决存储问题。它被设计用来解决对象、块和文件系统的存储问题，我们很少在其他软件系统中看到这种情况。</p><p id="3b45" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Ceph厉害！它是最可靠、最稳定的存储软件平台之一。一周前我听说了ceph，我的第一个想法是，“它是新的吗？有多靠谱？”。Ceph自2006年以来一直存在，它的第一个稳定版本是在2012年左右，并且一直在积极开发中，最近的一个版本是在几天前。当我说它功能强大时，我指的是它的可靠性、敏捷性、灵活性以及它支持的不同存储类型的阵列。</p><h2 id="f719" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">为什么在Openshift上使用ceph？</h2><p id="13e1" class="pw-post-body-paragraph kb kc it kd b ke ls kg kh ki lt kk kl km lu ko kp kq lv ks kt ku lw kw kx ky im bi translated">Ceph非常适合当今的云技术。它是安全可靠的。它处理工作量。它是可以缩放的。为什么不呢？</p><h2 id="1ac8" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">什么是车，它在这里做什么？</h2><p id="e4f1" class="pw-post-body-paragraph kb kc it kd b ke ls kg kh ki lt kk kl km lu ko kp kq lv ks kt ku lw kw kx ky im bi translated">我们上面谈到的ceph集群是由rook操作符管理的。正如他们在rook.io中所说，“它将分布式存储系统转变为自我管理、自我扩展、自我修复的存储服务”。</p><blockquote class="lx ly lz"><p id="10b8" class="kb kc ma kd b ke kf kg kh ki kj kk kl mb kn ko kp mc kr ks kt md kv kw kx ky im bi translated">在这里，Rook还为Ceph集群部署osd、mon、mgr和rgw守护进程作为Kubernetes pods。</p></blockquote><h1 id="2423" class="me la it bd lb mf mg mh le mi mj mk lh ml mm mn lk mo mp mq ln mr ms mt lq mu bi translated">现在让我们开始吧…</h1><p id="7df6" class="pw-post-body-paragraph kb kc it kd b ke ls kg kh ki lt kk kl km lu ko kp kq lv ks kt ku lw kw kx ky im bi translated">假设您已经设置好OpenShift客户端CLI，并且已经登录。</p><p id="86c0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以从下面提到的git repo中克隆所需的YAML文件。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="5f9f" class="kz la it na b gy ne nf l ng nh">git clone <a class="ae ni" href="https://github.com/Streaming-multiple-video-sources-Edge/Ceph-setup-YAML-files.git" rel="noopener ugc nofollow" target="_blank">https://github.com/Streaming-multiple-video-sources-Edge/Ceph-setup-YAML-files.git</a><br/>cd &lt;location where the files are downloaded&gt;</span></pre><p id="a271" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们从部署公共资源开始</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="dae1" class="kz la it na b gy ne nf l ng nh">oc create -f common.yaml</span></pre><figure class="mv mw mx my gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nj"><img src="../Images/777dfe45ea94b62ec0c6683db5aafffa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fp9Q2EP-PbbrL6X5VSJ4og.png"/></div></div></figure><p id="c5dc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你看到这些项目，你会看到新创建的rook-ceph。将当前项目改为<strong class="kd iu"> rook-ceph </strong>。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="e1e5" class="kz la it na b gy ne nf l ng nh">oc project rook-ceph</span></pre><figure class="mv mw mx my gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nk"><img src="../Images/722996f56f5f001456dcbf0499c432be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N8q0QISKaZPv2T921lOkCg.png"/></div></div></figure><p id="f095" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们在上一节谈到了车操作符，下面我们部署车操作符。这将监控存储守护程序，并确保进程的健康状态。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="f681" class="kz la it na b gy ne nf l ng nh">oc apply -f <a class="ae ni" href="https://raw.githubusercontent.com/rook/rook/v1.3.6/cluster/examples/kubernetes/ceph/operator-openshift.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/rook/rook/v1.3.6/cluster/examples/kubernetes/ceph/operator-openshift.yaml</a></span><span id="e651" class="kz la it na b gy nl nf l ng nh">or </span><span id="c9f9" class="kz la it na b gy nl nf l ng nh">oc create -f operator-openshift.yaml</span></pre><figure class="mv mw mx my gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nm"><img src="../Images/8376f45efc56e39fd8333c299d7a856a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EXVSW3WYCkq4nwU5LuHDGg.png"/></div></div></figure><p id="be05" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在你可以看到车舱开始运行。</p><figure class="mv mw mx my gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nn"><img src="../Images/c7bb95b30e305155724c3c6029ec745a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cw4tVNaQEVhrTS9GKNZOeA.png"/></div></div></figure><p id="8bc6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这样我们就可以部署ceph集群了。在部署该集群之前，您需要记住两件主要事情:</p><ul class=""><li id="b387" class="no np it kd b ke kf ki kj km nq kq nr ku ns ky nt nu nv nw bi translated">在这个yaml文件中，如果我们希望使用它来执行大规模任务，我们必须将存储设置为至少100 GB，在本例中，10 GB就足够了。所以你可以根据自己的需求来提尺寸。</li><li id="bd08" class="no np it kd b ke nx ki ny km nz kq oa ku ob ky nt nu nv nw bi translated">默认情况下，在这个yaml中，存储类名是注释的，但是类名<code class="fe oc od oe na b">gp2</code>是指AWS实例的默认类，为了部署到集群的默认<code class="fe oc od oe na b">storageClass</code>,您可以使用注释了它的yaml文件。</li></ul><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="01ec" class="kz la it na b gy ne nf l ng nh">oc create -f cluster-on-pvc.yaml</span></pre><figure class="mv mw mx my gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi of"><img src="../Images/cba0574135c127a4fe0e6e8270cabc8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*joyD90r_1VozWyVaJOJcYg.png"/></div></div></figure><p id="5167" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，我们设置对象，</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="16d1" class="kz la it na b gy ne nf l ng nh">oc create -f object-openshift.yaml</span></pre><figure class="mv mw mx my gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi of"><img src="../Images/0d0192e42bfee604e5ce22e7e54952cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zfNbJox9uRZCLxmWgC6Ovg.png"/></div></div></figure><p id="629a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，我们通过运行以下命令创建一个名为<code class="fe oc od oe na b">ceph-demo-user</code>的新Ceph对象存储用户:</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="b3e2" class="kz la it na b gy ne nf l ng nh">oc create -f object-user.yaml</span></pre><figure class="mv mw mx my gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi of"><img src="../Images/d9ebac781330b0852bf72462c5959c7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iRVKEBXMZuK0Q8JFm2PrAw.png"/></div></div></figure><p id="5459" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">一旦以上所有命令运行，几分钟后<code class="fe oc od oe na b">osd,mon,mgr,and rgw </code>吊舱将被部署。下面提到的所有pod都已启动并运行，您可以确认到目前为止设置是正确的，没有任何问题。</p><p id="4381" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">检查下面的所有pod是否都已启动并运行，以确认到目前为止您的设置是否正确。</p><figure class="mv mw mx my gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi og"><img src="../Images/11ba1b79bd4f51cc2f785374d985be53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H_i7m2Mad_WQvlVZf5qTvw.png"/></div></div></figure><p id="fc91" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，我们需要在ceph集群内部创建路由来管理外部流量。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="ca44" class="kz la it na b gy ne nf l ng nh">oc create -f route.yaml</span></pre><figure class="mv mw mx my gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oh"><img src="../Images/755266d0d5f048153ba224d54d3731c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pz_kWu9j2LoqMKtQNXMmgg.png"/></div></div></figure><p id="848e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">和安装工具箱，运行命令来检查ceph集群。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="93da" class="kz la it na b gy ne nf l ng nh">oc create -f toolbox.yaml</span></pre><figure class="mv mw mx my gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oh"><img src="../Images/99a77243da23a68571c227d90fc1452b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w4PvJTba0DfJVxorqG7ibQ.png"/></div></div></figure><p id="37bb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">若要访问工具箱容器，请运行以下命令。进入工具箱后，您可以检查ceph集群的状态。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="064c" class="kz la it na b gy ne nf l ng nh">oc -n rook-ceph exec -it $<strong class="na iu">(</strong>kubectl -n rook-ceph get pod -l "app=rook-ceph-tools" -o jsonpath<strong class="na iu">=</strong>'{.items[0].metadata.name}'<strong class="na iu">)</strong> bash</span></pre><p id="4317" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">有时建立连接可能需要一些时间，您会遇到如下所示的错误，您只需要运行几次该命令，或者等待并运行以建立连接。</p><figure class="mv mw mx my gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi og"><img src="../Images/84f1f203544f3f040d2475702bbf2c69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*COpQtklg22oIhAMuq_yKlA.png"/></div></div></figure><h2 id="36e8" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">工具箱窗格中有用的ceph命令</h2><p id="c483" class="pw-post-body-paragraph kb kc it kd b ke ls kg kh ki lt kk kl km lu ko kp kq lv ks kt ku lw kw kx ky im bi translated">检查集群状态</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="a0c4" class="kz la it na b gy ne nf l ng nh">bash-4.2$ ceph status</span></pre><p id="eb90" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们获得关于集群健康、服务和数据的信息。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="68fe" class="kz la it na b gy ne nf l ng nh">bash-4.2$ ceph status<br/> cluster:<br/> id: XXXX-XXXX–XXXX–XXXX-XXXXXXXXXXXX<br/> health: HEALTH_OK<br/> <br/> services:<br/> mon: 3 daemons, quorum a,b,c (age 8m)<br/> mgr: a(active, since 7m)<br/> osd: 3 osds: 3 up (since 6m), 3 in (since 6m)<br/> rgw: 1 daemon active (my.store.a)<br/> <br/> data:<br/> pools: 7 pools, 80 pgs<br/> objects: 203 objects, 4.2 KiB<br/> usage: 3.0 GiB used, 297 GiB / 300 GiB avail<br/> pgs: 80 active+clean</span></pre><p id="1ace" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">有时我们会得到，</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="3069" class="kz la it na b gy ne nf l ng nh">health: HEALTH_WARN<br/> clock skew detected on mon.b, mon.c</span></pre><p id="df6a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是因为时间不同步，你可以正常进行，因为这不是大问题，否则你可以终止pod<strong class="kd iu">mon b</strong>和<strong class="kd iu">mon c</strong>pod，然后等待它们再次创建(这是隐式发生的)。</p><p id="0d6f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你可以按照这个文档来获得更多关于ceph命令【https://docs.ceph.com/docs/giant/rados/operations/control/<a class="ae ni" href="https://docs.ceph.com/docs/giant/rados/operations/control/" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><h2 id="b886" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">测试我们的Ceph集群</h2><p id="91a5" class="pw-post-body-paragraph kb kc it kd b ke ls kg kh ki lt kk kl km lu ko kp kq lv ks kt ku lw kw kx ky im bi translated">现在我们的ceph集群已经启动，我们将通过上传和下载图像来测试它。</p><p id="8c61" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您首先需要S3命令变量，您可以使用下面的命令获得所需的变量。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="c58b" class="kz la it na b gy ne nf l ng nh"># run the below command to get the end point URL<br/>oc get route ceph-route -o jsonpath={.spec.host}<br/># run the below command to get access key and secret access key<br/>oc get secrets rook-ceph-object-user-my-store-ceph-demo-user -o jsonpath={.data}</span></pre><figure class="mv mw mx my gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oi"><img src="../Images/27c85db3439e53f182c84112a8c568bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KWFuQqzyZjkaMc__N5c-sg.png"/></div></div></figure><p id="501c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">用下一节提到的python代码在下面的空白处填写上面得到的细节。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="bb19" class="kz la it na b gy ne nf l ng nh">s3_endpoint_url = ""<br/>s3_access_key_id = ""<br/>s3_secret_access_key = ""</span></pre><p id="f11e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在您可以运行演示并测试您的ceph集群了！</p><h2 id="95b1" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">常见问题</h2><p id="8148" class="pw-post-body-paragraph kb kc it kd b ke ls kg kh ki lt kk kl km lu ko kp kq lv ks kt ku lw kw kx ky im bi translated">我面对了很多…在这个过程中有很多问题，但是某些人和博客在这个过程中帮助了我。</p><p id="b93a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">rook—<a class="ae ni" href="https://github.com/rook/rook/blob/master/Documentation/common-issues.md" rel="noopener ugc nofollow" target="_blank">https://github . com/rook/rook/blob/master/Documentation/common-issues . MD</a></p><p id="33a5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ceph—<a class="ae ni" href="https://github.com/rook/rook/blob/master/Documentation/ceph-common-issues.md" rel="noopener ugc nofollow" target="_blank">https://github . com/rook/rook/blob/master/Documentation/ceph-common-issues . MD</a></p><h2 id="245f" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">测试我们的集群！</h2><p id="f1bc" class="pw-post-body-paragraph kb kc it kd b ke ls kg kh ki lt kk kl km lu ko kp kq lv ks kt ku lw kw kx ky im bi translated">最后，我们运行python代码来测试下载和上传特性。</p><p id="884c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">注意:</strong> <em class="ma">准备一个视频文件，准备测试出来。</em></p><figure class="mv mw mx my gt ju"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="6011" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在上面的代码中，您需要按照上一节提到的命令填写<em class="ma">‘端点URL’，【访问密钥id】</em>和<em class="ma">‘秘密访问密钥’</em>。</p><p id="93e8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">简单地说一下代码，我们从配置Boto S3客户端和S3资源开始。然后，我们获取存储桶名称并进行设置，然后上传一个演示视频文件。</p><p id="8883" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在第62行，我们提到了将要上传的视频代码文件，在第72行，我们提到了下载细节，我们可以包括位置和我们计划在这里使用的名称。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="658e" class="kz la it na b gy ne nf l ng nh">python firstCeph.py</span></pre><p id="cf27" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，您可以在第72行中提到的位置看到您上传的文件正在被下载。你可以去代码中提到的位置，或者你可以提到你自己的位置并去那里。</p><h2 id="bd50" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated"><strong class="ak">删除集群</strong></h2><p id="c723" class="pw-post-body-paragraph kb kc it kd b ke ls kg kh ki lt kk kl km lu ko kp kq lv ks kt ku lw kw kx ky im bi translated">删除ceph集群是一个细致的过程，错过一个步骤或不按顺序运行下面的命令将导致分散的pod运行，找到它们将成为一个乏味的过程。</p><blockquote class="lx ly lz"><p id="7e7e" class="kb kc ma kd b ke kf kg kh ki kj kk kl mb kn ko kp mc kr ks kt md kv kw kx ky im bi translated">在尝试下面的代码之前，你需要安装<strong class="kd iu">头盔</strong>。</p></blockquote><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="446d" class="kz la it na b gy ne nf l ng nh">oc delete -f &lt;all_above_mentioned_YAML_files&gt;</span><span id="3ef3" class="kz la it na b gy nl nf l ng nh">oc -n rook-ceph patch clusters.ceph.rook.io rook-ceph -p ‘{“metadata”:{“finalizers”: []}}’ –type=merge</span><span id="a5db" class="kz la it na b gy nl nf l ng nh">oc -n rook-ceph delete cephcluster rook-ceph</span><span id="e357" class="kz la it na b gy nl nf l ng nh">helm delete –purge rook</span><span id="6528" class="kz la it na b gy nl nf l ng nh">oc delete namespace rook-ceph</span></pre><p id="31a7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">连接到每台机器并删除</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="da22" class="kz la it na b gy ne nf l ng nh">/var/lib/rook</span></pre><p id="6946" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">或由指定的路径</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="469b" class="kz la it na b gy ne nf l ng nh">dataDirHostPath</span></pre><p id="9275" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在尝试了这个简单的上传之后，您可以尝试多部分上传和其他存储类型，并实现ceph的不同应用程序。</p><p id="d3c7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">希望你在浏览博客时玩得开心！感谢您的反馈。</p><p id="fbd7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">感谢您的宝贵时间！这是成为开源开发社区一员的大好时机。</p></div></div>    
</body>
</html>