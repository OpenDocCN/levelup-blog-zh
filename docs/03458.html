<html>
<head>
<title>Vue Tips — Filters and Errors</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue提示—过滤器和错误</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/vue-tips-filters-and-errors-f29a1fd501b1?source=collection_archive---------10-----------------------#2020-05-10">https://levelup.gitconnected.com/vue-tips-filters-and-errors-f29a1fd501b1?source=collection_archive---------10-----------------------#2020-05-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/ce2694a6191120d6d00e345e920b9c82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kKlA2oc2X0wHFpD9"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@wx1993?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Raychan </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="c2e2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Vue.js是一个易于使用的web应用框架，我们可以用它来开发交互式前端应用。</p><p id="14cc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将了解如何使用过滤器来格式化屏幕上的数据，以及如何避免控制台中的错误。</p><h1 id="37cc" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">创建筛选器以重复使用格式</h1><p id="06ed" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">在屏幕上格式化数据可能很烦人。我们必须处理数字、百分比、日期、货币等多种格式。事情变得很复杂。</p><p id="f400" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是为什么我们想做一段可重用的代码，这样我们只需要处理这些问题一次，然后就忘记了。</p><p id="de68" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">幸运的是，Vue有过滤器，我们可以定义过滤器来格式化数据。它通过消除模板和组件中的格式化代码，使模板更加整洁。</p><p id="c429" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以定义一个Vue过滤器，并按如下方式使用:</p><p id="03cb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">index.js</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="ca51" class="mt lf it mk b gy mu mv l mw mx">Vue.filter("localeDateString", date =&gt; {<br/>  return date.toLocaleDateString();<br/>});</span><span id="c30e" class="mt lf it mk b gy my mv l mw mx">new Vue({<br/>  el: "#app",<br/>  data: {<br/>    date: new Date()<br/>  }<br/>});</span></pre><p id="6eff" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">index.html</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="00c6" class="mt lf it mk b gy mu mv l mw mx">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      {{date | localeDateString}}<br/>    &lt;/div&gt;<br/>    &lt;script src="index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="cf37" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们使用了<code class="fe mh mi mj mk b">Vue.filter</code>方法来定义一个过滤器。第一个参数是过滤器的名称。第二个是一个函数，它接受一个我们想要格式化的值，然后我们返回一个格式化的字符串。</p><p id="971b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们将<code class="fe mh mi mj mk b">date</code>值设置为<code class="fe mh mi mj mk b">new Date()</code>，并用管道操作符将<code class="fe mh mi mj mk b">localeDateString</code>应用于它。</p><p id="46c3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以在任何地方重用它，因为它是一个全局过滤器声明。我们还可以使用组件选项对象中的<code class="fe mh mi mj mk b">filters</code>属性进行本地过滤器声明，如下所示:</p><p id="a353" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">index.js</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="be0e" class="mt lf it mk b gy mu mv l mw mx">new Vue({<br/>  el: "#app",<br/>  data: {<br/>    date: new Date()<br/>  },<br/>  filters: {<br/>    localeDateString(date) {<br/>      return date.toLocaleDateString();<br/>    }<br/>  }<br/>});</span></pre><p id="70d3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">index.html</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="a073" class="mt lf it mk b gy mu mv l mw mx">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      {{date | localeDateString}}<br/>    &lt;/div&gt;<br/>    &lt;script src="index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="3c0c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">唯一的区别是我们将过滤函数移到了<code class="fe mh mi mj mk b">filters</code>对象中。我们只能在组件中使用局部过滤器。</p><p id="cbe5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以将参数传递给过滤器，如下所示:</p><p id="6c94" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">index.js</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="1fb3" class="mt lf it mk b gy mu mv l mw mx">Vue.filter("readMore", (text, moreText) =&gt; {<br/>  return `${text.toUpperCase()} ${moreText}`;<br/>});</span><span id="d0f3" class="mt lf it mk b gy my mv l mw mx">new Vue({<br/>  el: "#app",<br/>  data: {<br/>    message: "foo"<br/>  }<br/>});</span></pre><p id="5537" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">index.html</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="a71d" class="mt lf it mk b gy mu mv l mw mx">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      {{message | readMore('bar')}}<br/>    &lt;/div&gt;<br/>    &lt;script src="index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="4b6b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们只是像其他函数一样传入参数，除了参数以第二个参数的值结束。</p><p id="9aa8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们可以按照我们希望应用过滤器的顺序，从左到右逐个添加过滤器，从而将它们链接起来。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/1662cd4d623f140a70475cb642b690b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fBxxk6IHJwF6UA2m"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@carstyler?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">泰勒B </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="3c6c" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">避免恼人的错误和警告</h1><p id="f623" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们应该知道开发人员控制台中显示的错误和警告的原因，这样我们就可以在不花费太长时间的情况下消除它们。</p><p id="853c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，属性或方法“prop”没有在实例上定义，而是在渲染时被引用…”当我们引用模板中的数据，但我们没有在用<code class="fe mh mi mj mk b">data</code>返回的对象中初始化它时，就会出现错误。</p><p id="d3da" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们有一个属性或变量，但我们拼错了属性或变量的名称，也会发生这种情况。</p><p id="c499" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这种情况下，我们应该检查错别字。例如，如果我们有这样的错误，我们会得到:</p><p id="0980" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">index.js</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="3a82" class="mt lf it mk b gy mu mv l mw mx">new Vue({<br/>  el: "#app",<br/>  data: {<br/>    message: "foo"<br/>  }<br/>});</span></pre><p id="9930" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">index.html</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="384e" class="mt lf it mk b gy mu mv l mw mx">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      {{messag}}<br/>    &lt;/div&gt;<br/>    &lt;script src="index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="2a5e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，模板中有<code class="fe mh mi mj mk b">{{messag}}</code>，但是组件代码中有<code class="fe mh mi mj mk b">message: “foo”</code>。</p><p id="b667" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以我们应该确定它们是一样的，这样错误就不会存在了。</p><p id="2790" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还在模板引用的不同组件的属性中定义了它。这也是我们常犯的错误。</p><h1 id="7c45" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="e818" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">创建和使用过滤器使得在模板上格式化数据变得容易。我们可以对它们进行全局或局部定义。我们可以通过链接来组合它们，也可以向它们传递参数来更改选项。</p><p id="bf00" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">来自Vue的最常见的错误消息是“属性或方法“prop”未在实例上定义，但在渲染过程中被引用…”错误。</p><p id="b92d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这意味着我们正在引用模板中的项目，这些项目没有被定义为我们用<code class="fe mh mi mj mk b">data</code>返回的对象中的属性。</p></div></div>    
</body>
</html>