<html>
<head>
<title>What are .env files and how to use them in Nuxt</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是？env文件以及如何在Nuxt中使用它们</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-are-env-files-and-how-to-use-them-in-nuxt-7f194f083e3d?source=collection_archive---------2-----------------------#2020-06-12">https://levelup.gitconnected.com/what-are-env-files-and-how-to-use-them-in-nuxt-7f194f083e3d?source=collection_archive---------2-----------------------#2020-06-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/73ba3179344382907994b0c20ab3c399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*neWIKhLXxM8FtRddTLduDg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">什么是？env文件以及如何在Nuxt中使用它们</figcaption></figure><p id="7e9d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">注意:</strong>2020年6月18日，Nuxt发布了v2.13，其中包括Nuxt.js运行时配置，这是一种处理环境变量的新方式——这将在适当的时候反映在本文中。</p><h1 id="7319" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">什么是. env文件？</h1><p id="2ee9" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">一个<code class="fe md me mf mg b">.env</code>文件或<code class="fe md me mf mg b">dotenv</code>文件是一个简单的文本配置文件，用于控制应用程序的环境常数。在本地、过渡和生产环境之间，应用程序的大部分不会改变。然而，在许多应用程序中，存在需要在不同环境之间改变某些配置的情况。环境之间常见的配置更改可能包括但不限于URL和API密钥。</p><h1 id="2987" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">做什么。env文件看起来像什么？</h1><p id="a807" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated"><code class="fe md me mf mg b">.env</code>文件是换行的文本文件，这意味着每一行代表一个变量。按照惯例<code class="fe md me mf mg b">.env</code>变量名是由下划线分隔的大写单词。变量名后面直接跟一个<code class="fe md me mf mg b">=</code>，后者后面直接跟一个值，例如:</p><pre class="mh mi mj mk gt ml mg mm mn aw mo bi"><span id="5bbb" class="mp lb iq mg b gy mq mr l ms mt">VARIABLE_NAME=value</span></pre><h1 id="18cf" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">如何使用。Nuxt中的env文件</h1><h1 id="45b8" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">安装dotenv模块</h1><p id="42dd" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">要在Nuxt中使用<code class="fe md me mf mg b">.env</code>文件，首先需要安装Nuxt <code class="fe md me mf mg b">dotenv</code>模块。要安装该模块，请打开终端并导航到项目的根目录。从项目的根目录运行以下命令:</p><pre class="mh mi mj mk gt ml mg mm mn aw mo bi"><span id="5d83" class="mp lb iq mg b gy mq mr l ms mt">npm install @nuxtjs/dotenv</span></pre><h1 id="951d" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">注册dotenv模块</h1><p id="9763" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">一旦模块安装完毕，你需要注册它。要注册该模块，打开您的<code class="fe md me mf mg b">nuxt.config.js</code>文件并导航到<code class="fe md me mf mg b">buildModules</code>数组，然后像这样添加:<code class="fe md me mf mg b">@nuxtjs/dotenv</code>:</p><pre class="mh mi mj mk gt ml mg mm mn aw mo bi"><span id="7aee" class="mp lb iq mg b gy mq mr l ms mt">buildModules: [<br/>    '@nuxtjs/dotenv'<br/>],</span></pre><h1 id="be07" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">创建您的。环境文件</h1><p id="94d5" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">一旦你注册了你的模块，你就可以创建你的<code class="fe md me mf mg b">.env</code>文件。在您最喜欢的代码编辑器中打开您的项目，并在项目的根目录下创建一个名为<code class="fe md me mf mg b">.env</code>的新文件。一旦创建了<code class="fe md me mf mg b">.env</code>文件，就可以创建第一个<code class="fe md me mf mg b">.env</code>变量了。打开<code class="fe md me mf mg b">.env</code>文件并创建一个测试变量:</p><pre class="mh mi mj mk gt ml mg mm mn aw mo bi"><span id="3747" class="mp lb iq mg b gy mq mr l ms mt">TEST_VARIABLE=Hello world</span></pre><p id="afa6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="mu">注意:</em>您需要重启您的应用程序来访问您的变量</p><h1 id="4266" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">访问您的。应用程序中的env变量</h1><p id="d929" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">一旦成功安装了<code class="fe md me mf mg b">dotenv</code>模块并创建了<code class="fe md me mf mg b">.env</code>文件，在应用程序中引用变量就很容易了。为了确保你的<code class="fe md me mf mg b">.env</code>文件按预期工作，打开你的Nuxt主页(<code class="fe md me mf mg b">/pages/index.vue</code>)并创建/导航到你的<code class="fe md me mf mg b">mounted</code>钩子。在挂载的钩子中，你需要<code class="fe md me mf mg b">console.log()</code>你的<code class="fe md me mf mg b">.env</code>变量。要引用<code class="fe md me mf mg b">.env</code>文件，您需要以<code class="fe md me mf mg b">process.env.</code>为前缀的变量名称，例如:</p><pre class="mh mi mj mk gt ml mg mm mn aw mo bi"><span id="6021" class="mp lb iq mg b gy mq mr l ms mt">mounted() {<br/>    console.log(process.env.TEST_VARIABLE)<br/>}</span></pre><p id="d1c8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">安装后，您的应用程序将<code class="fe md me mf mg b">Hello world</code>登录到您的控制台。</p><h1 id="68df" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">定制您的。环境变量前缀</h1><p id="a96c" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">不是每个人都喜欢<code class="fe md me mf mg b">process.env.</code>前缀，就我个人而言，我选择坚持使用这个默认前缀，但是如果你喜欢不同的前缀，可以直接在Nuxt中设置。首先在您的域的根目录下创建一个名为<code class="fe md me mf mg b">env.js</code>的新文件。在这个<code class="fe md me mf mg b">env.js</code>文件中，您需要导出一个对象，该对象带有引用您的<code class="fe md me mf mg b">.env</code>文件变量的键值对。例如，在您的<code class="fe md me mf mg b">.env</code>中，您可能有许多Google API键和ID，如下所示:</p><pre class="mh mi mj mk gt ml mg mm mn aw mo bi"><span id="153a" class="mp lb iq mg b gy mq mr l ms mt">GOOGLE_MAPS_API_KEY=xxxxxxxxxxxxxx<br/>GOOGLE_TAG_MANAGER_KEY=xxxxxxxxxxxxxx</span></pre><p id="2e54" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然后，您可以在您的<code class="fe md me mf mg b">env.js</code>文件中引用它们，如下所示:</p><pre class="mh mi mj mk gt ml mg mm mn aw mo bi"><span id="e9e0" class="mp lb iq mg b gy mq mr l ms mt">export default {<br/>    googleMapsApiKey: process.env.GOOGLE_MAPS_API_KEY,<br/>    googleTagManagerKey: process.env.GOOGLE_TAG_MANAGER_KEY<br/>}</span></pre><p id="67a9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">或者，如果你更喜欢按组来组织你的变量，你可以决定创建一个<code class="fe md me mf mg b">google</code>属性组，将你所有的Google关键字放在一起，就像这样:</p><pre class="mh mi mj mk gt ml mg mm mn aw mo bi"><span id="2e34" class="mp lb iq mg b gy mq mr l ms mt">export default {<br/>    google: {<br/>        mapsApiKey: process.env.GOOGLE_MAPS_API_KEY,<br/>        tagManagerKey: process.env.GOOGLE_TAG_MANAGER_KEY<br/>    }<br/>}</span></pre><p id="2827" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">要在Nuxt应用程序中访问新的<code class="fe md me mf mg b">env.js</code>变量，只需导入<code class="fe md me mf mg b">env.js</code>文件并引用变量，例如，如果您想在挂载时将<code class="fe md me mf mg b">mapsApiKey</code>记录到控制台，您可以这样做:</p><pre class="mh mi mj mk gt ml mg mm mn aw mo bi"><span id="c532" class="mp lb iq mg b gy mq mr l ms mt">&lt;script&gt;<br/>    import ENV from '@/env'</span><span id="a85f" class="mp lb iq mg b gy mv mr l ms mt">    export default {<br/>        mounted() {<br/>            console.log(ENV.google.mapsApiKey)<br/>        }<br/>    }<br/>&lt;/script&gt;</span></pre><h1 id="c6e8" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">不要犯错误。要Git的env文件</h1><p id="b46e" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">您的<code class="fe md me mf mg b">.env</code>可能包含敏感信息，如API秘密、数据库用户名和密码等，保证这些信息的安全非常重要。</p><h1 id="c4b9" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">添加中。环境到。gitignore</h1><p id="9ea5" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">如果你正在使用Git，找到你的<code class="fe md me mf mg b">.gitignore</code>文件，在新的一行添加<code class="fe md me mf mg b">.env</code>，这将确保Git不存储你的<code class="fe md me mf mg b">.env</code>文件，保证你的敏感信息安全。</p><h1 id="191d" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">确认身份。环境变量when。环境被Git忽略</h1><p id="7477" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">您可能会问:“如果您忽略了<code class="fe md me mf mg b">.env</code>，开发人员将如何知道哪些<code class="fe md me mf mg b">.env</code>文件是运行您的应用程序所必需的？”。幸运的是，有一个简单的解决方案，如果你选择创建一个<code class="fe md me mf mg b">env.js</code>文件，这可能就足够了，但是使用<code class="fe md me mf mg b">.env</code>文件创建一个可提交的<code class="fe md me mf mg b">.env.example</code>文件是常见的做法。您的<code class="fe md me mf mg b">.env.example</code>文件应该是您的<code class="fe md me mf mg b">.env</code>文件的精确副本，但是变量值为空。这将允许开发人员下载您的应用程序的新安装，以快速了解在您的项目中开始工作需要哪些变量。</p><p id="11da" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果您不想手动复制您的<code class="fe md me mf mg b">.env</code>文件，您可以通过导航到您的项目的根目录并使用以下命令从您的终端生成它:<br/> <code class="fe md me mf mg b">sed 's/=.*/=/' .env &gt; .env.example</code></p><p id="eeb2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="mu">注意:</em>如果你使用的是Windows，你可能需要通过终端模拟器运行命令，比如<a class="ae mw" href="https://conemu.github.io/" rel="noopener ugc nofollow" target="_blank"> ConEmu </a></p><h1 id="d693" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">结论</h1><p id="2a9f" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">文件对于环境特定的变量来说是极好的，并且是保护敏感信息的好方法，我强烈建议你考虑在下一个项目中使用它们。</p><p id="da62" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你觉得这篇文章有用，请关注我的<a class="ae mw" href="https://medium.com/@wearethreebears" rel="noopener">媒体</a>、<a class="ae mw" href="https://dev.to/wearethreebears" rel="noopener ugc nofollow" target="_blank">发展到</a>和/或<a class="ae mw" href="https://www.twitter.com/wearethreebears" rel="noopener ugc nofollow" target="_blank">推特</a>。</p></div></div>    
</body>
</html>