<html>
<head>
<title>An Easy Guide to Learn Abstract Factory in Golang</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习Golang抽象工厂的简单指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-easy-guide-to-learn-abstract-factory-in-golang-6e27c1453999?source=collection_archive---------7-----------------------#2021-06-27">https://levelup.gitconnected.com/a-easy-guide-to-learn-abstract-factory-in-golang-6e27c1453999?source=collection_archive---------7-----------------------#2021-06-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/03db30daa491f720464b967cf130f851.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lG5L59KR2ghqGIX9"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@carlosaranda?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卡洛斯·阿兰达</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="59de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">抽象工厂设计模式解决了在不指定具体类的情况下创建整个产品组的问题。</p><h1 id="52a7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">问题</h1><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/18bc34b8e4ed34b146f3d703e750c845.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pAOdmYB4_pELcroksW5HdA.png"/></div></div></figure><p id="4fc7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设您正在创建一家运动服装店。您的代码可以由表示以下内容的类组成:</p><ol class=""><li id="afc0" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la mj mk ml mm bi translated">一组相关产品:<code class="fe mn mo mp mq b">Shirt</code> + <code class="fe mn mo mp mq b">Short</code></li><li id="2619" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mj mk ml mm bi translated">该组的变体。例如，产品<code class="fe mn mo mp mq b">Shirt</code> + <code class="fe mn mo mp mq b">Short</code>在这些变体中可用:<code class="fe mn mo mp mq b">Brand A</code> + <code class="fe mn mo mp mq b">Brand B</code></li></ol><p id="7342" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当顾客收到不相配的运动服时，他们会不高兴。需要一种方法来创建单独的运动服装对象，以便它们与同一组的其他对象相匹配。</p><p id="1819" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有另一个问题，运动服供应商经常更新他们的目录，你不想每次都改变代码源代码。</p><p id="ca8f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下是解决方案…</p><h1 id="b73a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">解决办法</h1><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/718f81d212ad0de2ada5effe468e5f17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LeqoRlxwM6kLIt9F"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@homajob?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">斯科特·格雷厄姆</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><ul class=""><li id="f7f5" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la mw mk ml mm bi translated">为产品组的每个不同产品显式声明接口</li><li id="2394" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mw mk ml mm bi translated">然后让产品的所有变体都遵循这些接口</li><li id="7542" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mw mk ml mm bi translated">例如，所有的shorts变体都可以实现<code class="fe mn mo mp mq b">Short</code>接口等等</li></ul><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/0aa528e1f62793d5173740b83c073598.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*TrVYAT1hctmSTgHJCPKIPA.png"/></div></figure><ul class=""><li id="7671" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la mw mk ml mm bi translated">声明抽象工厂——一个包含产品组中所有产品的创建方法列表的接口(例如，<code class="fe mn mo mp mq b">makeShirt</code>、<code class="fe mn mo mp mq b">makeShort</code>等)</li><li id="0c67" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mw mk ml mm bi translated">这些方法必须返回由前面提取的接口表示的抽象产品类型:<code class="fe mn mo mp mq b">Shirt</code>、<code class="fe mn mo mp mq b">Short</code>等</li></ul><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/32f0bb201a10dabe4f7b9991111fd7f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N5p_fkXcuh-z3XJT4l_DkA.png"/></div></div></figure><ul class=""><li id="7627" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la mw mk ml mm bi translated">对于产品组的每个变体，基于AbstractFactory接口创建一个单独的工厂类</li><li id="a935" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mw mk ml mm bi translated">客户端代码必须通过工厂和产品各自的抽象接口与它们一起工作</li><li id="a6c4" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mw mk ml mm bi translated">这允许更改传递给客户端代码的工厂类型，以及客户端代码接收的产品变体，而不会破坏实际的客户端代码</li></ul><h1 id="3a3e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">图表</h1><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/7f71cf5314acdb9b145470d54cc402f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AqssHDs0qTCKof9yezzyFg.png"/></div></div></figure><h1 id="b565" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">利弊</h1><p id="21cb" class="pw-post-body-paragraph kd ke iq kf b kg na ki kj kk nb km kn ko nc kq kr ks nd ku kv kw ne ky kz la ij bi translated">当然，抽象工厂设计模式也有自己的权衡。下面是这种设计模式的一些优点和缺点。</p><h2 id="e2f1" class="nf lc iq bd ld ng nh dn lh ni nj dp ll ko nk nl lp ks nm nn lt kw no np lx nq bi translated">赞成的意见</h2><ul class=""><li id="ac36" class="me mf iq kf b kg na kk nb ko nr ks ns kw nt la mw mk ml mm bi translated">一个工厂的产品相互兼容</li><li id="177a" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mw mk ml mm bi translated">避免具体产品和客户代码之间的紧密耦合</li><li id="ac65" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mw mk ml mm bi translated">履行<em class="nu">单一责任原则</em></li><li id="61ef" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mw mk ml mm bi translated">满足<em class="nu">打开/关闭原则</em></li></ul><h2 id="78df" class="nf lc iq bd ld ng nh dn lh ni nj dp ll ko nk nl lp ks nm nn lt kw no np lx nq bi translated">骗局</h2><ul class=""><li id="0487" class="me mf iq kf b kg na kk nb ko nr ks ns kw nt la mw mk ml mm bi translated">代码可能会变得比它应该变得复杂</li></ul><h1 id="8599" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">如何用Golang编写一个简单的抽象工厂？</h1><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nv"><img src="../Images/91e33f53b54c361adeb3de8bcb741f28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*G9Wpmn9bO4AjUHWc"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">伊利亚·巴甫洛夫在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h2 id="4233" class="nf lc iq bd ld ng nh dn lh ni nj dp ll ko nk nl lp ks nm nn lt kw no np lx nq bi translated">iShoe界面</h2><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="2b92" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">声明一个实现<code class="fe mn mo mp mq b">shoe</code>功能的接口。</p><h2 id="eb53" class="nf lc iq bd ld ng nh dn lh ni nj dp ll ko nk nl lp ks nm nn lt kw no np lx nq bi translated">iShort接口</h2><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="8396" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">声明一个实现<code class="fe mn mo mp mq b">short</code>功能的接口。</p><h2 id="3b90" class="nf lc iq bd ld ng nh dn lh ni nj dp ll ko nk nl lp ks nm nn lt kw no np lx nq bi translated">给鞋打上商标</h2><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="b22c" class="nf lc iq bd ld ng nh dn lh ni nj dp ll ko nk nl lp ks nm nn lt kw no np lx nq bi translated">给短裤打上烙印</h2><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="7675" class="nf lc iq bd ld ng nh dn lh ni nj dp ll ko nk nl lp ks nm nn lt kw no np lx nq bi translated">给混凝土工厂打上商标</h2><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="f1d1" class="nf lc iq bd ld ng nh dn lh ni nj dp ll ko nk nl lp ks nm nn lt kw no np lx nq bi translated">品牌B鞋</h2><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="b900" class="nf lc iq bd ld ng nh dn lh ni nj dp ll ko nk nl lp ks nm nn lt kw no np lx nq bi translated">品牌B短</h2><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="cc82" class="nf lc iq bd ld ng nh dn lh ni nj dp ll ko nk nl lp ks nm nn lt kw no np lx nq bi translated">品牌B混凝土厂</h2><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="e0e1" class="nf lc iq bd ld ng nh dn lh ni nj dp ll ko nk nl lp ks nm nn lt kw no np lx nq bi translated">运动服工厂界面</h2><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="07e2" class="nf lc iq bd ld ng nh dn lh ni nj dp ll ko nk nl lp ks nm nn lt kw no np lx nq bi translated">主要的</h2><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="ae22" class="nf lc iq bd ld ng nh dn lh ni nj dp ll ko nk nl lp ks nm nn lt kw no np lx nq bi translated">说明</h2><ul class=""><li id="6209" class="me mf iq kf b kg na kk nb ko nr ks ns kw nt la mw mk ml mm bi translated">定义一个接口来创建所有不同的产品，但是将实际的产品创建留给具体的工厂</li><li id="9644" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mw mk ml mm bi translated">每种工厂类型都与产品种类非常相似</li><li id="e023" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mw mk ml mm bi translated"><code class="fe mn mo mp mq b">main</code>将调用工厂对象的创建方法，而不是直接创建产品</li><li id="2314" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mw mk ml mm bi translated">由于每个工厂类型都与一个产品种类非常相似，所以它的所有产品都是兼容的</li><li id="82ba" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mw mk ml mm bi translated"><code class="fe mn mo mp mq b">main</code>只通过它们的抽象接口与工厂和产品一起工作</li></ul><h2 id="ccec" class="nf lc iq bd ld ng nh dn lh ni nj dp ll ko nk nl lp ks nm nn lt kw no np lx nq bi translated">怎么跑</h2><p id="b73f" class="pw-post-body-paragraph kd ke iq kf b kg na ki kj kk nb km kn ko nc kq kr ks nd ku kv kw ne ky kz la ij bi translated">命令:<code class="fe mn mo mp mq b">go run .</code></p><pre class="ma mb mc md gt ny mq nz oa aw ob bi"><span id="fd8d" class="nf lc iq mq b gy oc od l oe of"># go run .<br/>Logo: brandB<br/>Size: 14<br/>Logo: brandB<br/>Size: 14<br/>Logo: brandA<br/>Size: 14<br/>Logo: brandA<br/>Size: 14</span></pre><h1 id="1896" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">外卖食品</h1><p id="492c" class="pw-post-body-paragraph kd ke iq kf b kg na ki kj kk nb km kn ko nc kq kr ks nd ku kv kw ne ky kz la ij bi translated">我希望您理解如何用Golang编写一个简单的抽象工厂，更重要的是理解抽象工厂设计模式如何帮助您更好地设计代码并确保可维护性。</p><p id="3eb0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里是我的github页面的链接，提供了Golang中抽象工厂设计模式的所有源代码:<a class="ae kc" href="https://github.com/leonardyeoxl/go-patterns/tree/update_creational_patterns/creational/abstract_factory" rel="noopener ugc nofollow" target="_blank">https://github . com/leonardyoexl/go-patterns/tree/update _ creation _ patterns/creation/abstract _ factory</a></p><p id="e4c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在下一篇文章中，我可能会探索用Golang编写的责任链设计模式。敬请关注！和平！✌️</p></div></div>    
</body>
</html>