<html>
<head>
<title>Pace your Kubernetes development with this awesome tool</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用这款出色的工具加快您的Kubernetes开发速度</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/pace-your-kubernetes-development-with-this-awesome-tool-8c0cdfd6f30b?source=collection_archive---------7-----------------------#2021-09-26">https://levelup.gitconnected.com/pace-your-kubernetes-development-with-this-awesome-tool-8c0cdfd6f30b?source=collection_archive---------7-----------------------#2021-09-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="acc3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在为我之前关于如何在Kubernetes 上管理多租户的博客<a class="ae kl" href="https://medium.com/geekculture/how-to-manage-multitenancy-on-kubernetes-62ed5d95fcfc" rel="noopener">开发Loft之后，我偶然发现了Loft的另一个产品。这个工具是为开发Kubernetes的开发人员准备的，他们希望在实际的环境中开发他们的应用程序，也就是在集群中。</a></p><p id="7239" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">凭借配置模板化、热重装、日志流和交互终端等特性，<a class="ae kl" href="https://devspace.sh/" rel="noopener ugc nofollow" target="_blank"> DevSpace </a>是解决方案。事不宜迟，让我们开始设置它并检查它的特性。</p><h1 id="bb24" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">先决条件</h1><h2 id="0e55" class="lk kn iq bd ko ll lm dn ks ln lo dp kw jy lp lq la kc lr ls le kg lt lu li lv bi translated">1.安装devspace CLI</h2><p id="16cc" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">安装devspace CLI有很多方法，我选择了brew</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="9083" class="lk kn iq mg b gy mk ml l mm mn">brew install devspace</span></pre><p id="b028" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过运行<code class="fe mo mp mq mg b">devspace</code>检查安装，它应该列出所有可能的命令</p><h2 id="56f7" class="lk kn iq bd ko ll lm dn ks ln lo dp kw jy lp lq la kc lr ls le kg lt lu li lv bi translated">2.准备应用程序代码</h2><p id="ffee" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">对于这个演示，我将创建一个用Python编写的简单Flask应用程序，它将在其一个端点上提供以下HTML文件。</p><figure class="mb mc md me gt mr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><blockquote class="mu mv mw"><p id="bca3" class="jn jo mx jp b jq jr js jt ju jv jw jx my jz ka kb mz kd ke kf na kh ki kj kk ij bi translated">注意:HTML文件存储在名为static的目录中</p></blockquote><p id="a464" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">python代码看起来会像这样</p><figure class="mb mc md me gt mr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="43f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，一个Dockerfile文件来封装应用程序。</p><figure class="mb mc md me gt mr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h2 id="1298" class="lk kn iq bd ko ll lm dn ks ln lo dp kw jy lp lq la kc lr ls le kg lt lu li lv bi translated">3.准备好您的Kubernetes集群</h2><p id="53cc" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">我为此创建了一个minikube集群，并且我的kubeconfig已经配置好了。您可以从任何Kubernetes发行版中进行选择</p><figure class="mb mc md me gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nb"><img src="../Images/0ee398a91c688a3f8ebbefb0b7abbd0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lHdaLBqBMF_JKzUYh210zw.png"/></div></div></figure><p id="799c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们准备好探索DevSpace了！</p><h1 id="750f" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">演练</h1><h2 id="1d0f" class="lk kn iq bd ko ll lm dn ks ln lo dp kw jy lp lq la kc lr ls le kg lt lu li lv bi translated">4.初始化</h2><p id="f298" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">只需在您的工作目录中运行<code class="fe mo mp mq mg b">devspace init</code>,您将看到以下提示</p><figure class="mb mc md me gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ni"><img src="../Images/86f5c005cd5506fe0ebc16f331a3fe46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WcC7oo4ctvfY6Uyc6t2jSA.png"/></div></div></figure><p id="b06b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，您将看到4个部署选项。我们将选择第一个选项，让devspace处理所有的配置，但是你也可以从舵图、清单YAMLs和kustomization中选择。</p><figure class="mb mc md me gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ni"><img src="../Images/52e1fb625f10186da1c226778c833cee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZyeG1qwwVCKiJWZ93AZSCA.png"/></div></div></figure><p id="a273" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们选择构建过程。我们的是现有目录中的docker文件，所以我们可以继续前进。</p><figure class="mb mc md me gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ni"><img src="../Images/13d894779c78b8c7f15dc94acd793866.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2-LPPw4YJlU_zfMFZ8VI7g.png"/></div></div></figure><p id="2907" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后一个提示是一个可选功能，您可以在其中配置您的映像注册表并从CLI登录，devspace也会为您推送映像。但是现在，让我们把它保持在本地(并跳过这个特性)。</p><figure class="mb mc md me gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ni"><img src="../Images/725cb40b37d310fb3db4c3a57b76827c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SokBD8MBu6sgAm_uCn4pHg.png"/></div></div></figure><p id="d8a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的配置完成了。它将创建一堆文件，如下图所示。</p><figure class="mb mc md me gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nj"><img src="../Images/4d6e658a3a8f4e569a61e9628cdb44d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ujfQFtsr9l1L37vXPe45Xw.png"/></div></div></figure><p id="98a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> devspace.yaml </strong>是通过这个过程创建的清单，而<strong class="jp ir"> devspace_start.sh </strong>是可以用来部署它的shell脚本。</p><p id="364b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，还有一个文件夹。<strong class="jp ir"> devspace </strong>将获取所有的临时文件。这个目录会自动添加到gitignore和dockerignore(如果存在的话)。</p><h2 id="b3ba" class="lk kn iq bd ko ll lm dn ks ln lo dp kw jy lp lq la kc lr ls le kg lt lu li lv bi translated">5.一些隔离，以防万一</h2><p id="630a" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">出于理智，我使用命令创建了一个名为<code class="fe mo mp mq mg b">devspace</code>的名称空间</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="fdaf" class="lk kn iq mg b gy mk ml l mm mn">kubectl create ns devspace</span></pre><p id="ce88" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并通过运行以下命令将其设置为devspace上下文</p><figure class="mb mc md me gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ni"><img src="../Images/037500f4c8c382ea655b71226be26fb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c0Pj0a0qmvfB5irpTgwMdA.png"/></div></div></figure><p id="76e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并选择该名称空间。</p><blockquote class="mu mv mw"><p id="d38d" class="jn jo mx jp b jq jr js jt ju jv jw jx my jz ka kb mz kd ke kf na kh ki kj kk ij bi translated">注意:也可以直接运行<code class="fe mo mp mq mg b">devspace use namespace &lt;namespace_name&gt;</code></p></blockquote><h2 id="966c" class="lk kn iq bd ko ll lm dn ks ln lo dp kw jy lp lq la kc lr ls le kg lt lu li lv bi translated">6.表演时间到了。🎬</h2><p id="2ed5" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">现在对于神奇的部分，我们将通过运行<code class="fe mo mp mq mg b">devspace dev</code>开始开发</p><figure class="mb mc md me gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nk"><img src="../Images/58cee6bc3f5a8538cf6024fa5da7ac97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-PTYNbCGL2pjdaf9KomXMA.jpeg"/></div></div></figure><p id="3c08" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此过程以部署的形式部署应用程序，创建一个服务来公开5050端口，端口转发它，以便您可以在您的浏览器上测试它。您可以通过运行以下命令来查看这些资源</p><figure class="mb mc md me gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nl"><img src="../Images/579b42cfee106cf5f041367f09a3c304.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kn5Mjc6-W9QrtF_PWdiEUg.png"/></div></div></figure><p id="0af6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它还部署了一个类似这样的仪表板</p><figure class="mb mc md me gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nm"><img src="../Images/db141cb2933c9cfbdaf1c89368861f9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K97pxXBVRBmoWwJVDxJ0ZA.png"/></div></div></figure><p id="9d99" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个UI不限于Devspace管理的资源。它可以用来访问任何名称空间中任何pod的日志！点击pod旁边的<code class="fe mo mp mq mg b">&gt;_</code>图标可以直接进入pod终端。</p><p id="bc63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，如果你看前面截图的最后一行，你会看到我的提示已经从<code class="fe mo mp mq mg b">vaibhavrajput@Vaibhavs-MacBook-Air devspace-tutorial %</code>变成了<code class="fe mo mp mq mg b">root@devspace-tutorial-54cb4ff8fc-kgnnq-6jzsd:/app#</code>，这意味着我现在在容器内部。</p><p id="ea81" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于Flask是一个开发服务器，该应用程序现在还没有上线。因此，我们将运行<code class="fe mo mp mq mg b">python main.py</code>来启动它。如果它是一个WSGI或另一个服务器，它将在部署期间启动。</p><p id="84d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，如果我点击端点<code class="fe mo mp mq mg b">localhost:5050/file</code>，我会看到下面的页面</p><figure class="mb mc md me gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nn"><img src="../Images/ff313682a973d6cc5e81f5d16a6adbe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VcAty-KTeb0kH8XngquqBw.png"/></div></div></figure><p id="bbb0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这也会反映在日志中，就像这样</p><figure class="mb mc md me gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi no"><img src="../Images/8fa84ff255d19e28cb1922f83aa4eba5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jsm6j0-PAlDynaeS_lmnhg.png"/></div></div></figure><p id="751b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于它处于部署模式，如果我简单地更新HTML文件并添加另一行，如下所示</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="bc3c" class="lk kn iq mg b gy mk ml l mm mn">&lt;p&gt;Now we are running version 2.&lt;/p&gt;</span></pre><p id="daaf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">页面将更改为</p><figure class="mb mc md me gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi np"><img src="../Images/f6a1b59b277f4802b0b371b617a7fc6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zb9GE-USRRSI8VGr--x2VA.png"/></div></div></figure><blockquote class="nq"><p id="934a" class="nr ns iq bd nt nu nv nw nx ny nz kk dk translated">这意味着我们已经有效地连接到kubernetes集群中部署的pod内的工作区，并且我们可以通过即时热重装继续开发。</p></blockquote><h1 id="98be" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx oa kz la lb ob ld le lf oc lh li lj bi translated">离别赠言</h1><p id="ffad" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">DevSpace解决了一个主要问题，但并不仅限于此。要探索它的所有特性，请访问<a class="ae kl" href="https://devspace.sh/cli/docs/introduction" rel="noopener ugc nofollow" target="_blank"> DevSpace文档页面</a>并尝试<a class="ae kl" href="https://devspace.sh/cli/docs/configuration/hooks/basics" rel="noopener ugc nofollow" target="_blank">挂钩</a>、<a class="ae kl" href="https://devspace.sh/cli/docs/configuration/pullSecrets/basics" rel="noopener ugc nofollow" target="_blank">秘密管理</a>、<a class="ae kl" href="https://devspace.sh/cli/docs/guides/plugins" rel="noopener ugc nofollow" target="_blank">插件</a>等等。</p></div></div>    
</body>
</html>