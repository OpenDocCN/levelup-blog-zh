<html>
<head>
<title>5 TypeScript Coding Tips You Might Ignore</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你可能忽略的5个打字稿编码技巧</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/5-typescript-coding-tips-you-might-ignore-ac16b1fe9699?source=collection_archive---------12-----------------------#2022-08-03">https://levelup.gitconnected.com/5-typescript-coding-tips-you-might-ignore-ac16b1fe9699?source=collection_archive---------12-----------------------#2022-08-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="092a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">希望对你有帮助</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9258ed1d07321dcd2f5dc5c97c95d0d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HoDS5rap8yQQs4pz"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@rleija_?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">鲁本·莱贾</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="257d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">TypeScript让前端开发更加严谨，让我们的重构更加容易。它实际上非常灵活，本文将介绍你可能忽略的5个小技巧。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e89e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.更好的评论</h1><p id="3abe" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">类型可以用<code class="fe mz na nb nc b">/** */</code>注释来标记，编辑器会有更好的提示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="ef60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看上面的例子，把鼠标移到使用的地方，就可以查看我们写的评论了。</p><p id="834d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注释可以让我们的代码更容易理解。但是并不是所有的代码都需要注释，查看这篇文章可以写出更好的注释:</p><div class="nf ng gp gr nh ni"><a rel="noopener  ugc nofollow" target="_blank" href="/stop-commenting-bad-code-rewrite-it-d469079fa55b"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd iu gy z fp nn fr fs no fu fw is bi translated">停止评论糟糕的代码。重写一遍。</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">如何写出更好的评论？</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw ks ni"/></div></div></a></div><h1 id="84ed" class="mc md it bd me mf nx mh mi mj ny ml mm jz nz ka mo kc oa kd mq kf ob kg ms mt bi translated">2.<code class="fe mz na nb nc b">this</code>参数</h1><p id="59ec" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">先看代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="6b7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的例子打印的是<code class="fe mz na nb nc b">fake</code>而不是<code class="fe mz na nb nc b">test</code>，这不是我想要的结果。但是TypeScript没有给我任何提示。我们可以给这个方法添加<code class="fe mz na nb nc b">this</code>类型。像下面这样:</p><pre class="kj kk kl km gt oc nc od oe aw of bi"><span id="8174" class="og md it nc b gy oh oi l oj ok">class Test {<br/>  name = 'test';</span><span id="0a3c" class="og md it nc b gy ol oi l oj ok">  printName(this: Test) {<br/>    console.log(this.name);<br/>  }<br/>}</span><span id="cea8" class="og md it nc b gy ol oi l oj ok">const test = new Test();</span><span id="f7cf" class="og md it nc b gy ol oi l oj ok">// Argument of type '{ name: string; }' is not assignable to parameter of type 'Test'.<br/>test.printName.call({ name: 'fake' });</span></pre><p id="7e0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此时，TypeScript会抱怨我们的行为。</p><p id="9c3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是注意箭头功能不能添加<code class="fe mz na nb nc b">this</code>类型。我们使用<code class="fe mz na nb nc b">call</code>、<code class="fe mz na nb nc b">apply</code>等方式。改变<code class="fe mz na nb nc b">this</code>也不起作用。箭头功能和传统功能的区别:</p><div class="nf ng gp gr nh ni"><a rel="noopener  ugc nofollow" target="_blank" href="/7-differences-between-an-arrow-function-and-a-traditional-function-bbf8a6dc8ca4"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd iu gy z fp nn fr fs no fu fw is bi translated">7箭头功能和传统功能的区别</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">箭头函数能完全取代传统函数吗？</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="nr l"><div class="om l nt nu nv nr nw ks ni"/></div></div></a></div><h1 id="62ed" class="mc md it bd me mf nx mh mi mj ny ml mm jz nz ka mo kc oa kd mq kf ob kg ms mt bi translated">3.通用参数默认值</h1><p id="12a8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">泛型可以提高语言的灵活性，但在某些情况下，显式输入可以省略，这使我们的代码更干净。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><h1 id="657b" class="mc md it bd me mf nx mh mi mj ny ml mm jz nz ka mo kc oa kd mq kf ob kg ms mt bi translated">4.<code class="fe mz na nb nc b">-</code>修改器</h1><p id="62d5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们可以使用TypeScript中内置的<code class="fe mz na nb nc b">Partial&lt;T&gt;</code>使可索引类型的所有属性都是可选的。同样，它也提供了<code class="fe mz na nb nc b">Required&lt;T&gt;</code>来使所有的属性成为必需的。</p><p id="535c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">他们的定义是<a class="ae ky" href="https://github.com/microsoft/TypeScript/blob/main/lib/lib.es5.d.ts#L1471" rel="noopener ugc nofollow" target="_blank">这里</a>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/255e85a1dbd6983fb668250434f21569.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*1WK30weesdBLYrY3viH2dg.png"/></div></figure><p id="e0c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以看到大家熟悉的<code class="fe mz na nb nc b">?</code>修饰语，那么<code class="fe mz na nb nc b">-?</code>其实就是一个组合修饰语，意思是将<em class="oo">去掉</em> <code class="fe mz na nb nc b"><em class="oo">?</em></code>。</p><p id="a4d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">类似于<code class="fe mz na nb nc b">-readonly</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/84c32fa25c7449a34feb8b9616a599c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wzr5mrE8JzTSts7duDKjJw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://github.com/microsoft/TypeScript/blob/v4.7.4/lib/lib.es2015.promise.d.ts#L41" rel="noopener ugc nofollow" target="_blank"> GitHub </a></figcaption></figure><p id="8bba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">内置高级类型介绍:</p><div class="nf ng gp gr nh ni"><a href="https://javascript.plainenglish.io/7-typescript-built-in-utility-types-you-must-know-d7a73a489d7" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd iu gy z fp nn fr fs no fu fw is bi translated">您必须知道的7种TypeScript内置实用程序类型</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">提高对内置类型的理解。</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nr l"><div class="oq l nt nu nv nr nw ks ni"/></div></div></a></div><h1 id="3150" class="mc md it bd me mf nx mh mi mj ny ml mm jz nz ka mo kc oa kd mq kf ob kg ms mt bi translated">5.断言函数</h1><p id="051a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">一个经典的例子是当我们使用<code class="fe mz na nb nc b">document.getElementById</code>或<code class="fe mz na nb nc b">document.querySelector</code>得到一个元素时，我们得到类型<code class="fe mz na nb nc b">HTMLElement | null</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/f87a47504ee69c64760d91542056ceff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*hjDZtbq83SbzsgKEJePEjg.png"/></div></figure><p id="c54a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后如果我们要对这个选择元素进行操作，比如绑定事件，获取信息等。，我们需要确保它不是<code class="fe mz na nb nc b">null</code>。</p><p id="dc82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么我们可以先使用非空断言操作符<code class="fe mz na nb nc b">!</code></p><div class="kj kk kl km gt ab cb"><figure class="os kn ot ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/3746455ece929dcdfa04c838c1218db5.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/1*OjJ89sj_3b-OmNtlztQ1Vg.png"/></div></figure><figure class="os kn oy ou ov ow ox paragraph-image"><img src="../Images/45088ecc1901de7c3932300bb3321094.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*g8NQOpoZh-etwEXAdG8wew.png"/></figure></div><p id="80e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是使用非空断言操作符是不安全的，在编译成JavaScript代码时会被移除。在这种情况下，如果元素不存在，就会发生错误。不建议使用非空断言操作符，除非您确实确保它存在。</p><p id="c447" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除此之外，我们可以在使用它之前做一个空检查。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/2944c79777722071321c46484695fd74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*m7n8OEwcbNYZ_sgovahHTw.png"/></div></figure><p id="d4f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们编写一个公共函数来完成这个任务时:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/f466edb511fe5f7a44b0a800354926a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*DDt_YveJGQaWRT0EZcrruA.png"/></div></figure><p id="1a0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然代码逻辑很好，但TypeScript编译器会抱怨。此时，我们可以使用<code class="fe mz na nb nc b">is</code>关键字进行类型断言，以消除空值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/936853ca0f14213d125ced10a71e960d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/1*Kao0Hx0rEuIXBVflkkg7gg.png"/></div></figure><p id="5138" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除此之外，您还可以编写断言函数:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/7b60e2983ff3d1a60b2f37300ab3921f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ajM7-TavhqsRDLBEG0CONg.png"/></div></div></figure><p id="5b1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以这种方式使用函数声明(函数表达式需要显式类型注释)让TypeScript显式地知道<code class="fe mz na nb nc b">assertIsDefined</code>是一个断言函数。该函数断言该值为非空，否则将引发错误。关键字<code class="fe mz na nb nc b">asserts</code>帮助我们做到这一点。</p><p id="64cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不仅断言非空，我们还可以用它来断言其他需要的类型。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="791d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oo">感谢阅读。如果你喜欢这样的故事，想支持我，请考虑成为</em> <a class="ae ky" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="oo">中会员</em> </a> <em class="oo">。每月5美元，你可以无限制地访问媒体内容。如果你通过</em> <a class="ae ky" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="oo">我的链接</em> </a> <em class="oo">报名，我会得到一点佣金。</em></p><p id="c0df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的支持对我来说很重要——谢谢。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="74a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="5a75" class="pd pe it lb b lc ld lf lg li pf lm pg lq ph lu pi pj pk pl bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="1c21" class="pd pe it lb b lc pm lf pn li po lm pp lq pq lu pi pj pk pl bi translated">📰查看<a class="ae ky" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="0eb7" class="pd pe it lb b lc pm lf pn li po lm pp lq pq lu pi pj pk pl bi translated">🔔关注我们:<a class="ae ky" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae ky" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae ky" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="23cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">🚀👉<a class="ae ky" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">加入升级达人集体，找到一份惊艳的工作</strong> </a></p></div></div>    
</body>
</html>