<html>
<head>
<title>Getting started with Redis: It’s easier than you think</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Redis入门:比您想象的要简单</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/getting-started-with-redis-its-easier-than-you-think-23d3729230fa?source=collection_archive---------1-----------------------#2019-05-16">https://levelup.gitconnected.com/getting-started-with-redis-its-easier-than-you-think-23d3729230fa?source=collection_archive---------1-----------------------#2019-05-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/97b0064dc40899dee641c825fd715fb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*77Vo1RFQ-5DcLKdeHbb2-A.png"/></div></div></figure><p id="dc32" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Redis是一种数据存储，它提供了优于传统数据库的性能优势。然而，它远不是数据库的替代品，而是一个小型、快速、易于使用的工具，可以补充您现有的应用程序。</p><p id="1b52" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这篇简短的文章中，我们将分析Redis是什么以及它是如何工作的。更重要的是，我们还将了解Redis不是什么，以便您可以就如何使用它做出正确的决定。在此过程中，我们还将介绍一些示例代码，以便您可以了解它是如何工作的。</p><h1 id="0502" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">Redis架构</h1><p id="269b" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">Redis有两个关键特性，使其成为一些软件挑战的理想解决方案:</p><ol class=""><li id="0229" class="mc md it kd b ke kf ki kj km me kq mf ku mg ky mh mi mj mk bi translated">Redis是一个键值数据存储。这意味着键是散列的，因此我们可以在常数O(1)时间内查找数据。我们不需要查询数据库，只需要询问Redis这个键是否存在。如果是，Redis将返回值。</li><li id="ddfc" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated">Redis在内存中运行。在硬件层面上，Redis在RAM中而不是在磁盘上保存和操作数据。如果你学过计算机科学，你就会知道RAM的操作比磁盘的读/写要快得多。</li></ol><p id="61a3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当然，Redis在内存中运行的事实对数据持久性有影响。因此，Redis也能够将数据的当前快照保存到磁盘。</p><h1 id="3ee5" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">Redis架构的实际意义</h1><p id="9157" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">Redis背后的这些架构决策导致了有趣的结果:</p><p id="a533" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">优点:</p><ul class=""><li id="e78f" class="mc md it kd b ke kf ki kj km me kq mf ku mg ky mq mi mj mk bi translated">与数据库相比，Redis的速度快得离谱，大约每秒100，000次读/写</li><li id="8412" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mq mi mj mk bi translated">Redis实现了高效的数据结构来操作数据，而不需要编写类似SQL的查询</li><li id="4c8b" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mq mi mj mk bi translated">因为太简单了，Redis的开销很小。这是一个大约16，000行C代码的小应用程序</li></ul><p id="4272" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">缺点:</p><ul class=""><li id="c954" class="mc md it kd b ke kf ki kj km me kq mf ku mg ky mq mi mj mk bi translated">因为它在RAM上，所以数据持久性可能是一个问题，所以如果您进行重要的更改，您需要指示Redis将快照保存到磁盘上</li><li id="ee43" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mq mi mj mk bi translated">Redis在创建数据对象之间的关系方面能力有限——它不能替代关系数据库(如MySQL)或基于文档的数据库(如MongoDB)</li><li id="c75d" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mq mi mj mk bi translated">如果没有合适的规则，生产应用程序中的集群和密钥管理可能会是一个挑战</li></ul><h1 id="808c" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">我可以用Redis做什么？</h1><p id="f228" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">Redis有许多潜在的应用，可以满足您快速访问数据的需求:</p><ul class=""><li id="7bb5" class="mc md it kd b ke kf ki kj km me kq mf ku mg ky mq mi mj mk bi translated">当您知道数据不太可能发生显著变化时，跨不同的页面缓存昂贵的数据库查询的结果</li><li id="c6f8" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mq mi mj mk bi translated">缓存最近的更改/更新/帖子/事件，为您网站的“最近添加”部分提供动力，无需像<code class="fe mr ms mt mu b">SELECT * FROM posts WHERE ... ORDER BY time DESC LIMIT 10;</code>一样查询整个数据库即可动态更新</li><li id="52ff" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mq mi mj mk bi translated">在排行榜中缓存和统计新的分数/价格/展示次数，以支持您网站的“最高分数”或“热门故事”部分，方法是使用Redis的增量命令来统计展示次数，或者如果某个集合是唯一的且其分数超过某个阈值，则向该集合添加一个关键字</li><li id="4271" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mq mi mj mk bi translated">创建一个发布-订阅模型，在该模型中，Redis以本机方式管理向订阅者推送新事件</li><li id="af43" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mq mi mj mk bi translated">创建和维护一个独立的消息队列，用于在应用程序中的服务之间传递数据，因为Redis列表可以在固定的时间内从头部或尾部推送和弹出</li><li id="97d8" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mq mi mj mk bi translated">在站点的各个页面上缓存用户的会话数据，这样您就不需要重新查询数据库来获取不太可能改变的用户信息</li></ul><h1 id="17a3" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">Redis代码是什么样子的？</h1><p id="a43e" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">Redis有大量的特性——太多了，我无法在这里深入介绍。然而，Redis中的基本数据类型如下:</p><h2 id="6996" class="mv la it bd lb mw mx dn lf my mz dp lj km na nb ln kq nc nd lr ku ne nf lv ng bi translated">用线串</h2><p id="71c0" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">这些是Redis中的基本键值对。设置给定键的值，并在以后访问/更新它。</p><pre class="nh ni nj nk gt nl mu nm nn aw no bi"><span id="b3a4" class="mv la it mu b gy np nq l nr ns">127.0.0.1:6379&gt; SET coffees_drunk 0<br/>OK<br/>127.0.0.1:6379&gt; INCR coffees_drunk<br/>(integer) 1<br/>127.0.0.1:6379&gt; INCR coffees_drunk<br/>(integer) 2<br/>127.0.0.1:6379&gt; INCR coffees_drunk<br/>(integer) 3<br/>127.0.0.1:6379&gt; GET coffees_drunk<br/>"3"</span></pre><h2 id="eb44" class="mv la it bd lb mw mx dn lf my mz dp lj km na nb ln kq nc nd lr ku ne nf lv ng bi translated">列表</h2><p id="1dc0" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">大多数编程语言将列表实现为一个堆栈。所以，你可以追加到列表的末尾，然后弹出列表中的最后一项。但是如果你想得到列表中的第一项(类似队列的行为)，那么这需要O(n)时间，因为整个列表需要被移回来。</p><p id="f793" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因为Redis是用C写的，他们可以做一些内存管理，使得在O(1)时间内在列表的左边和右边进行push/pop。</p><pre class="nh ni nj nk gt nl mu nm nn aw no bi"><span id="10a1" class="mv la it mu b gy np nq l nr ns">127.0.0.1:6379&gt; LPUSH mylist "apple"<br/>(integer) 1<br/>127.0.0.1:6379&gt; LPUSH mylist "banana"<br/>(integer) 2<br/>127.0.0.1:6379&gt; RPUSH mylist "carrot"<br/>(integer) 3<br/>127.0.0.1:6379&gt; LRANGE mylist 0 -1<br/>1) "banana"<br/>2) "apple"<br/>3) "carrot"</span></pre><h2 id="e848" class="mv la it bd lb mw mx dn lf my mz dp lj km na nb ln kq nc nd lr ku ne nf lv ng bi translated">设置</h2><p id="e186" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">集合是无序的数据组，集合中的所有项目都是唯一的。Redis还允许您比较和组合集合。</p><pre class="nh ni nj nk gt nl mu nm nn aw no bi"><span id="e321" class="mv la it mu b gy np nq l nr ns">127.0.0.1:6379&gt; SADD cars "Accord"<br/>(integer) 1<br/>127.0.0.1:6379&gt; SADD cars "Camry"<br/>(integer) 1<br/>127.0.0.1:6379&gt; SADD cars "Focus"<br/>(integer) 1<br/>127.0.0.1:6379&gt; SISMEMBER cars "Camry"<br/>(integer) 1<br/>127.0.0.1:6379&gt; SISMEMBER cars "Jetta"<br/>(integer) 0<br/>127.0.0.1:6379&gt; SMEMBERS cars<br/>1) "Accord"<br/>2) "Camry"<br/>3) "Focus"</span></pre><h2 id="ef3f" class="mv la it bd lb mw mx dn lf my mz dp lj km na nb ln kq nc nd lr ku ne nf lv ng bi translated">有序集合</h2><p id="6802" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">有些情况下，您希望数据分组且唯一(像集合一样)，但顺序也很重要。Redis有序集稍微复杂一点，但是当你需要它们的时候，它们非常强大。</p><p id="51e7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">比如按出生年份排序的总统:</p><pre class="nh ni nj nk gt nl mu nm nn aw no bi"><span id="2792" class="mv la it mu b gy np nq l nr ns">127.0.0.1:6379&gt; ZADD presidents 1732 "washington"<br/>(integer) 1<br/>127.0.0.1:6379&gt; ZADD presidents 1743 "jefferson"<br/>(integer) 1<br/>127.0.0.1:6379&gt; ZADD presidents 1917 "kennedy"<br/>(integer) 1<br/>127.0.0.1:6379&gt; ZADD presidents 1809 "lincoln"<br/>(integer) 1<br/>127.0.0.1:6379&gt; ZADD presidents 1856 "wilson"<br/>(integer) 1<br/>127.0.0.1:6379&gt; ZRANGE presidents 0 -1<br/>1) "washington"<br/>2) "jefferson"<br/>3) "lincoln"<br/>4) "wilson"<br/>5) "kennedy"</span></pre><h2 id="26ee" class="mv la it bd lb mw mx dn lf my mz dp lj km na nb ln kq nc nd lr ku ne nf lv ng bi translated">混杂</h2><p id="5bd6" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">哈希允许你像对待对象一样对待键。每个键现在存储一组相关信息。例如，您可以创建一个<code class="fe mr ms mt mu b">user</code>键，其中包含用户的用户名、电子邮件、姓名、地址等信息。</p><pre class="nh ni nj nk gt nl mu nm nn aw no bi"><span id="8786" class="mv la it mu b gy np nq l nr ns">127.0.0.1:6379&gt; HSET superhero:1 name "Superman"<br/>(integer) 1<br/>127.0.0.1:6379&gt; HSET superhero:1 power "Strength"<br/>(integer) 1<br/>127.0.0.1:6379&gt; HSET superhero:1 aka "Clark Kent"<br/>(integer) 1<br/>127.0.0.1:6379&gt; HMSET superhero:2 name "Flash" power "Speed" aka "Barry Allen"<br/>OK<br/>127.0.0.1:6379&gt; HMSET superhero:3 name "Batman" power "Wealth" aka "Bruce Wayne"<br/>OK<br/>127.0.0.1:6379&gt; HGET superhero:1 name<br/>"Superman"<br/>127.0.0.1:6379&gt; HGETALL superhero:2<br/>1) "name"<br/>2) "Flash"<br/>3) "power"<br/>4) "Speed"<br/>5) "aka"<br/>6) "Barry Allen"</span></pre><h1 id="f0cf" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">学习Redis的基础知识</h1><p id="8ccf" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">Redis用一种有趣的方式向您介绍语法。有一个<a class="ae nt" href="https://try.redis.io/" rel="noopener ugc nofollow" target="_blank">在线互动教程</a>会带你了解所有的基础知识。</p><h1 id="e386" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">在本地安装Redis</h1><p id="72b0" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">准备好自己开始玩Redis了吗？</p><pre class="nh ni nj nk gt nl mu nm nn aw no bi"><span id="ddf8" class="mv la it mu b gy np nq l nr ns">$ wget <a class="ae nt" href="http://download.redis.io/releases/redis-5.0.5.tar.gz" rel="noopener ugc nofollow" target="_blank">http://download.redis.io/releases/redis-5.0.5.tar.gz</a><br/>$ tar xzf redis-5.0.5.tar.gz<br/>$ cd redis-5.0.5<br/>$ make</span></pre><p id="e087" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="nu">注意:这是在撰写本文时Redis的当前版本。如果你正在阅读这篇文章，你真的应该访问</em> <a class="ae nt" href="https://redis.io/download" rel="noopener ugc nofollow" target="_blank"> <em class="nu"> Redis下载页面</em> </a> <em class="nu">获取最新版本。</em></p><h1 id="8ffe" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">在应用程序中使用Redis</h1><p id="8b39" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">对于大多数应用程序框架来说，让Redis在您的应用程序中工作非常容易。以下是一些最常见的:</p><ul class=""><li id="a715" class="mc md it kd b ke kf ki kj km me kq mf ku mg ky mq mi mj mk bi translated">Spring Boot: <a class="ae nt" href="https://docs.spring.io/spring-data/data-redis/docs/current/reference/html/" rel="noopener ugc nofollow" target="_blank">春季数据Redis </a></li><li id="7ac7" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mq mi mj mk bi translated">轨道:<a class="ae nt" href="https://github.com/redis-store/redis-rails" rel="noopener ugc nofollow" target="_blank"> redis-rails </a></li><li id="8ab8" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mq mi mj mk bi translated">姜戈:<a class="ae nt" href="https://github.com/niwinz/django-redis" rel="noopener ugc nofollow" target="_blank">姜戈-雷迪斯</a></li><li id="8bd4" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mq mi mj mk bi translated">拉勒维尔:<a class="ae nt" href="https://laravel.com/docs/5.8/redis" rel="noopener ugc nofollow" target="_blank">预测</a></li><li id="9a63" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mq mi mj mk bi translated">NodeJS: <a class="ae nt" href="https://github.com/NodeRedis/node_redis" rel="noopener ugc nofollow" target="_blank"> node_redis </a></li></ul><p id="f926" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当然，不仅仅是web应用程序可以使用Redis。任何应用程序都可能受益于Redis服务器。所有主要语言都有客户。Redis网站上有完整的客户名单。</p><h1 id="d902" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">让您的应用更上一层楼</h1><p id="f731" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">Redis是一个提高应用程序性能的神奇工具。当您缓存数据或将最近的条目/计数器保存在内存中时，可以显著减少用户的加载时间。</p><p id="0ba3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最精彩的部分？入门没那么难！您可以在现有工具的基础上使用Redis，没有任何缺点。试试吧！</p></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><h1 id="5ba0" class="kz la it bd lb lc oc le lf lg od li lj lk oe lm ln lo of lq lr ls og lu lv lw bi translated">喜欢你在这里读到的吗？</h1><p id="a763" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我免费与我的电子邮件列表分享我最好的内容。</p><p id="9562" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae nt" href="https://sunny-architect-5371.ck.page/0a60026a5d" rel="noopener ugc nofollow" target="_blank">加入我的电子邮件系列中目前的500名其他开发人员。</a></p></div></div>    
</body>
</html>