<html>
<head>
<title>Creating a Custom Cookie Consent Popup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建自定义Cookie同意弹出窗口</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-a-custom-cookie-consent-popup-69d0c0c6485a?source=collection_archive---------7-----------------------#2020-10-22">https://levelup.gitconnected.com/creating-a-custom-cookie-consent-popup-69d0c0c6485a?source=collection_archive---------7-----------------------#2020-10-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="79fd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在我的网站上遵守GDPR和CCPA</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/73669185b03e8a75c8d1e57e8517c74a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Qf9oN5ZzvwV4E0KI"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">总是被饼干困扰，照片由<a class="ae ky" href="https://unsplash.com/@starvingartistfoodphotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯蒂娜·布兰科</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="e3f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着欧盟GDPR或加利福尼亚州CCPA的出台，全球越来越多的地区正在引入更严格的数据保护法规。正如您肯定注意到的，大多数网站会在您第一次访问时显示横幅或弹出窗口，要求您同意他们的cookie和数据政策，这是这些新法规的要求。为了不那么违法，我想是时候为我的个人博客网站创建一个自定义的cookie同意弹出窗口了。</p><h1 id="3136" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">GDPR</h1><p id="bfb4" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">通用数据保护条例(<a class="ae ky" href="https://en.wikipedia.org/wiki/General_Data_Protection_Regulation" rel="noopener ugc nofollow" target="_blank"> GDPR </a>)是一项欧盟条例，旨在提供处理个人个人数据的指导方针。GDPR于2016年通过，并于2018年开始实施，它迫使数据控制者披露任何数据收集以及数据是否与第三方共享。它已经成为其他数据保护法律的典范，如加州消费者隐私法(<a class="ae ky" href="https://en.wikipedia.org/wiki/California_Consumer_Privacy_Act" rel="noopener ugc nofollow" target="_blank"> CCPA </a>)。</p><h2 id="d9a4" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">它适用于谁？</h2><p id="a07c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">GDPR不仅适用于企业，也适用于任何其他拥有网站或处理个人数据的实体或个人。这意味着我的个人博客<a class="ae ky" href="https://pingpoli.de" rel="noopener ugc nofollow" target="_blank">网站</a>也需要遵守。我的网站不使用任何cookies，我使用我自己的<a class="ae ky" href="https://medium.com/swlh/creating-my-own-web-analytics-tool-dca5a1c720e3" rel="noopener">网络分析工具</a>来统计访客，我在设计时考虑到了隐私，因此按照GDPR的要求，IP是匿名的。然而，我不能向自己出售广告，所以我使用谷歌广告，它需要cookies才能发挥作用。因此，我需要获得用户的同意来存储这些cookies并链接到Google条款。此外，我添加了一个广告个性化选项，只有当用户选择时才打开。</p><h1 id="d0c2" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">Cookie同意弹出菜单</h1><p id="ec34" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">您可以在互联网上找到许多cookie同意解决方案，从非常简单的到企业级的都有。然而，使用一个复杂的第三方cookie许可管理器来收集用户数据本身，在最小化收集的个人数据量时，似乎有点落后。我喜欢创建自己的解决方案，所以我知道他们在做什么，收集了多少数据。在这种情况下，它不收集任何数据，它只创建一个cookie来保存设置，因此弹出窗口只需要显示一次。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/26a8837863aba43a6e385b5037c56828.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eqATIUDZiMdxfvkHmX4ghw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">我的自定义cookie同意弹出，由作者图像。</figcaption></figure><h2 id="927b" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">履行</h2><p id="0e51" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">cookie同意弹出窗口的基本思想非常简单。检查用户是否已经同意:如果没有，显示弹出窗口，否则，获取用户的cookie设置并执行它们。除了设置一个cookie来保存cookie设置，我的网站不使用任何cookie，我使用的唯一第三方工具是Google AdSense，所以我只需要一个选项，但很容易添加更多的复选框来添加我将来可能会使用的其他工具和cookie。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">主cookie同意弹出功能，完整代码见<a class="ae ky" href="https://gist.github.com/pingpoli/789f9c0e7226d5ffb10e6faf112a70d1" rel="noopener ugc nofollow" target="_blank">这里</a>。</figcaption></figure><h2 id="2918" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">使用</h2><p id="70f4" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">使用我的cookie许可管理器非常简单。它只需要调用一个函数，这个函数要么显示弹出窗口，要么根据用户的cookie设置设置一些变量。这应该在任何其他需要同意的代码之前完成。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="ac9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如前所述，我使用的唯一第三方工具是Google AdSense，用户可以选择观看个性化广告。根据用户在cookie偏好中的选择，我们需要告诉Google加载哪种类型的广告。因为<code class="fe nh ni nj nk b">CCM_showPersonalizedAds</code>默认设置为<code class="fe nh ni nj nk b">false</code>，如果用户还没有表示同意，他只会看到正常的广告。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><p id="c678" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在拖延了两年之后，我终于在我的个人网站上添加了一个cookie同意弹出窗口。为了遵守欧盟GDPR法案，每个网站都需要向用户披露收集了哪些数据，并获得存储cookies的许可。虽然所有的法律问题都非常复杂和难以理解，但从技术角度来看，创建一个cookie同意弹出窗口是非常容易的。无论你是大企业还是私人，你都应该或者说必须在你的网站上添加一个。</p></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><p id="9113" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ns">免责声明:我不是律师，虽然我相信我正在尽我所能遵循GDPR，但我不能提供任何法律建议。这是关于cookie同意弹出的技术实现。如果您使用我的准则，请确保根据您的情况进行调整，并在必要时咨询律师。</em></p></div></div>    
</body>
</html>