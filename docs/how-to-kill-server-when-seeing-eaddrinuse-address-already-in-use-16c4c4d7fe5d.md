# å½“çœ‹åˆ°â€œEADDRINUSE:åœ°å€å·²è¢«ä½¿ç”¨â€æ—¶å¦‚ä½•æ€æ­»æœåŠ¡å™¨

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/how-to-kill-server-when-seeing-eaddrinuse-address-already-in-use-16c4c4d7fe5d>

å…³äºå¦‚ä½•åœ¨ Mac/Linux å’Œ Windows ä¸Šå‘ç”Ÿâ€œEADDRINUSEâ€æ—¶æ‰‹åŠ¨**ç»ˆæ­¢è¿›ç¨‹**çš„æ•™ç¨‹ã€‚

![](img/84b1f887d74d2acd6bbb6ea3608df975.png)

Nodejs ç›‘å¬ EADDRINUSE:åœ°å€å·²è¢«ä½¿ç”¨

# é—®é¢˜æ˜¯

å½“å°è¯•é‡æ–°å¯åŠ¨ä¸€ä¸ªèŠ‚ç‚¹åº”ç”¨ç¨‹åºæ—¶ï¼Œå‰ä¸€ä¸ªæ²¡æœ‰æ­£å¸¸å…³é—­ï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°ä¸€ä¸ªâ€œ**listen EADDRINUSE:address in use**â€é”™è¯¯ï¼Œä¾‹å¦‚:

å¬ç€ EADDRINUSE:åœ°å€å·²ç»è¢«ä½¿ç”¨

## è¿™ä¸ªé—®é¢˜èƒŒåçš„åŸå› 

è¿™èƒŒåçš„åŸå› æ˜¯

> å½“è¿›ç¨‹å´©æºƒæˆ–ç»ˆæ­¢æ—¶ï¼Œä¸è°ƒç”¨ã€‚å®ƒåªåœ¨äº‹ä»¶å¾ªç¯ç»“æŸæ—¶è¢«è°ƒç”¨ï¼Œå› ä¸º`server.close()` *ç±»ä¼¼äº*ç»“æŸäº‹ä»¶å¾ªç¯(å®ƒä»ç„¶éœ€è¦ç­‰å¾…å½“å‰æ­£åœ¨è¿è¡Œçš„å †æ ˆ),æ‰€ä»¥æŠŠå®ƒæ”¾åœ¨é€€å‡ºäº‹ä»¶ä¸­æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚

## è§£å†³åŠæ³•

å¯¹è¯¥åº”ç”¨ç¨‹åºçš„æ­£ç¡®ä¿®å¤åº”è¯¥æ˜¯

*   å´©æºƒæ—¶ï¼Œåš`*process.on('uncaughtException', ..)*`
*   å¹¶ä¸”åœ¨æ€åš`*process.on('SIGTERM', ..)*`

å½“è¿™ä¸ª **EADDRINUSE** é—®é¢˜å·²ç»å‘ç”Ÿæ—¶ï¼Œä¸ºäº†è§£å†³å®ƒï¼Œæ‚¨éœ€è¦**æ‰‹åŠ¨ç»ˆæ­¢è¿›ç¨‹**ã€‚ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦æ‰¾åˆ°è¿›ç¨‹çš„è¿›ç¨‹ id (PID)ã€‚æ‚¨çŸ¥é“è¯¥è¿›ç¨‹æ­£åœ¨å ç”¨æ‚¨çš„æœºå™¨æˆ–æœåŠ¡å™¨ä¸Šçš„ç‰¹å®šç«¯å£ã€‚

# æ‰‹åŠ¨ç»ˆæ­¢è¿›ç¨‹

## é€‚ç”¨äº Mac/Linux

ä¸ºäº†æ‰¾åˆ°ä¸ç«¯å£ç›¸å…³è”çš„è¿›ç¨‹ id (PID)

```
â‡’ lsof -i tcp:3000 
COMMAND PID   USER  FD  TYPE DEVICE             SIZE/OFF NODE NAME 
node    44475 chen5 31u IPv4 0x8b1721168764e4bf 0t0 TCP *:strexec-s (LISTEN)
```

ç„¶åç»ˆæ­¢è¯¥è¿›ç¨‹

```
kill -9 44475
```

ä½¿ç”¨`-9`é€‰é¡¹ç¡®ä¿è¿›ç¨‹ç«‹å³ç»ˆæ­¢

å¦‚æœä½ å¾—åˆ°æƒé™é”™è¯¯ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨`sudo`å…³é”®å­—ï¼Œä¾‹å¦‚:

```
sudo kill -9 44475
```

## å¯¹äº Windows

**è§£å†³æ–¹æ¡ˆ 1:ä»»åŠ¡ç®¡ç†å™¨**

ä»**è¿›ç¨‹**æˆ–**æœåŠ¡**é€‰é¡¹å¡ä¸­æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨åº”ç”¨ç¨‹åº(**taskman.exe**)ï¼ŒæŒ‰ **PID** åˆ—æ’åºã€‚è¦æ˜¾ç¤º **PID** æ ï¼Œå³å‡»æ ‡é¢˜è¡Œå¹¶ä»åˆ—è¡¨ä¸­é€‰æ‹© **PID** ã€‚å³é”®å•å‡»æƒ³è¦åœæ­¢çš„æµç¨‹å¹¶é€‰æ‹©**ç»“æŸä»»åŠ¡**ã€‚

![](img/80d9780560418f23e601e419493d28d7.png)

Windows ä¸­çš„ç¤ºä¾‹ï¼Œæ¥æºäºäº’è”ç½‘

**è§£å†³æ–¹æ¡ˆ 2:ä½¿ç”¨å‘½ä»¤æç¤ºç¬¦**

å¯¼èˆªåˆ°**å¼€å§‹>è¿è¡Œ>** é”®å…¥**å‘½ä»¤** **>** å³é”®å•å‡»**å‘½ä»¤æç¤ºç¬¦**ï¼Œç„¶åé€‰æ‹©**ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ**ã€‚

![](img/3573d6798bee4c109cfc75d65f418202.png)

æ¥æºäºè°·æ­Œæœç´¢

ä½¿ç”¨ [netstat](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/netstat) å‘½ä»¤åˆ—å‡ºæ‰€æœ‰æ´»åŠ¨ç«¯å£ã€‚`-a`å¼€å…³æ˜¾ç¤ºæ‰€æœ‰æ­£åœ¨ä½¿ç”¨çš„ç«¯å£ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸å½“å‰ç”¨æˆ·ç›¸å…³çš„ç«¯å£ã€‚`-n`é€‰é¡¹åœæ­¢ä¸»æœºåæŸ¥æ‰¾(è¿™éœ€è¦å¾ˆé•¿æ—¶é—´)ã€‚`-o`é€‰é¡¹åˆ—å‡ºäº†è´Ÿè´£ç«¯å£æ´»åŠ¨çš„è¿›ç¨‹ IDã€‚`findstr`å‘½ä»¤åŒ¹é…åŒ…å« PID å­—ç¬¦ä¸²çš„æ ‡é¢˜è¡Œï¼Œæ‚¨æ­£åœ¨å¯»æ‰¾çš„ç«¯å£ï¼Œåœ¨å‰é¢å¸¦æœ‰å†’å·çš„ç«¯å£æ ¼å¼ä¸­ï¼Œæ˜¯ **:3000** ã€‚

```
C:\Users\admin>netstat -ano|findstr "PID :3000" 
Proto Local Address Foreign Address State PID 
TCP 0.0.0.0:3000 0.0.0.0:0 LISTENING 18264
```

è¦æ€æ­»è¿™ä¸ªè¿›ç¨‹(å…¶ä¸­ **/f** æ˜¯ force):

```
taskkill /pid 18264 /f
```

# å°½æƒ…äº«å—å§ï¼

å¤§æ¦‚å°±æ˜¯è¿™æ ·ã€‚æ„Ÿè°¢é˜…è¯»

# åˆ†çº§ç¼–ç 

æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼å‡çº§æ­£åœ¨æ”¹å˜æŠ€æœ¯æ‹›è˜ã€‚ [**åœ¨æœ€å¥½çš„å…¬å¸æ‰¾åˆ°ä½ çš„å®Œç¾å·¥ä½œ**](https://jobs.levelup.dev/talent/welcome?referral=true)**ã€‚**

**[](https://jobs.levelup.dev/talent/welcome?referral=true) [## å‡çº§â€”è½¬å˜æŠ€æœ¯æ‹›è˜

### å‡çº§â€”è½¬å˜æŠ€æœ¯æ‹›è˜ğŸ”¥ä½¿è½¯ä»¶å·¥ç¨‹å¸ˆèƒ½å¤Ÿæ‰¾åˆ°å®Œç¾çš„è§’è‰²â€¦

ä½œä¸š. levelup.dev](https://jobs.levelup.dev/talent/welcome?referral=true)**