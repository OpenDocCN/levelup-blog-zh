<html>
<head>
<title>Improve Signup Rates with django-allauth</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">提高django-allauth的注册率</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/improve-signup-rates-with-django-allauth-6a11b11a15b6?source=collection_archive---------3-----------------------#2021-03-12">https://levelup.gitconnected.com/improve-signup-rates-with-django-allauth-6a11b11a15b6?source=collection_archive---------3-----------------------#2021-03-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/168630435976bdb63aa33e253f9238b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZbsibAXRvm92nfCBFDNwcw.png"/></div></div></figure><h1 id="53af" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak">姜戈-阿劳斯是什么？</strong></h1><p id="abb3" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><a class="ae lx" href="https://www.intenct.nl/projects/django-allauth/" rel="noopener ugc nofollow" target="_blank"> Django-allauth </a>是一款可重复使用的Django应用，允许注册社交账户，如脸书、谷歌、推特、Instagram。支持的功能包括注册本地和社交账户的能力，以及用于其他问题的可插拔注册表单。基本上，django-allauth将允许您快速处理和创建注册流，而不是使用django内置的UserCreationForm。以下是所有支持的提供商列表:</p><ul class=""><li id="7ea1" class="ly lz it lb b lc ma lg mb lk mc lo md ls me lw mf mg mh mi bi translated">亚马逊(OAuth2)</li><li id="2569" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">AngelList (OAuth2)</li><li id="d0d6" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">比特里(OAuth2)</li><li id="4a93" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">收存箱(OAuth)</li><li id="907b" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">脸书(OAuth2和JS SDK)</li><li id="aaae" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">Feedly (OAuth2)</li><li id="ccc7" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">Github (OAuth2)</li><li id="cffa" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">谷歌(OAuth2)</li><li id="2d4f" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">Instagram (OAuth2)</li><li id="17c9" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">LinkedIn (OAuth，OAuth2)</li><li id="2762" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">OpenId</li><li id="2910" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">Paypal (OAuth2)</li><li id="0297" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">人物角色</li><li id="87ce" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">SoundCloud (OAuth2)</li><li id="e61a" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">堆栈交换(OAuth2)</li><li id="d546" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">Twitch (OAuth2)</li><li id="0f15" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">推特(OAuth)</li><li id="5d0a" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">维梅奥语(OAuth)</li><li id="656d" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">VK (OAuth2)</li><li id="f6d1" class="ly lz it lb b lc mj lg mk lk ml lo mm ls mn lw mf mg mh mi bi translated">微博(OAuth2)</li></ul><h1 id="a549" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">django-allauth如何提高注册率？</h1><p id="2aef" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">大多数消费者已经拥有至少一个以上列出的帐户。因此，添加一个社交登录可以大大提高注册率，因为它减少了用户为他们可能还没有准备好注册的网站创建另一个用户名和密码的需要。此外，看到谷歌或脸书的标志作为注册选项，可以立即增加网站的可信度，同时减少创建帐户的时间。记住，让用户注册总是比加入更难。使注册过程尽可能简单，并在创建帐户后开始，而不是在创建帐户时。</p><p id="461c" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">有了大量受支持的提供者，django-allauth还允许开发人员添加与其目标受众相匹配的提供者。例如，<a class="ae lx" href="https://dev.to/" rel="noopener ugc nofollow" target="_blank"> dev.to </a>只允许用户注册Twitter或Github账户。考虑到开发者对这些平台的亲和力，提供用户已经习惯的注册选项是有意义的。作为另一个例子，一个游戏网站可能想要实现Twitch注册，而一个电子商务商店可以从Paypal注册中受益。至于我们自己的社交登录体验，只需添加一个谷歌注册按钮，我们的注册率就提高了大约25%。</p><p id="57b9" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">让我们回顾一下我们是如何做到这一点的。</p><h1 id="35c9" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak"> Django设置</strong></h1><p id="5730" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">首先设置您的虚拟环境。注:对于macOS/ubuntu用户，将<code class="fe mr ms mt mu b">py</code>替换为<code class="fe mr ms mt mu b">python3</code></p><pre class="mv mw mx my gt mz mu na nb aw nc bi"><span id="33da" class="nd kc it mu b gy ne nf l ng nh">C:\Users\Owner\Desktop\code&gt;py -m venv social</span></pre><p id="c447" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">接下来激活虚拟环境，使用包管理器安装Django，创建一个项目(mysite)，最后创建一个应用程序(main)。</p><pre class="mv mw mx my gt mz mu na nb aw nc bi"><span id="a5fc" class="nd kc it mu b gy ne nf l ng nh">C:\Users\Owner\Desktop\code&gt;cd social</span><span id="ae35" class="nd kc it mu b gy ni nf l ng nh">C:\Users\Owner\Desktop\code\social&gt;Scripts\activate</span><span id="caa4" class="nd kc it mu b gy ni nf l ng nh">(social) C:\Users\Owner\Desktop\code\social&gt;pip install Django</span><span id="b52f" class="nd kc it mu b gy ni nf l ng nh">(social) C:\Users\Owner\Desktop\code\social&gt;django-admin startproject mysite</span><span id="2642" class="nd kc it mu b gy ni nf l ng nh">(social) C:\Users\Owner\Desktop\code\social&gt;cd mysite</span><span id="3c31" class="nd kc it mu b gy ni nf l ng nh">(social) C:\Users\Owner\Desktop\code\social\mysite&gt;py manage.py startapp main</span></pre><p id="579c" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">将主应用添加到settings.py中的INSTALLED_APPS。</p><pre class="mv mw mx my gt mz mu na nb aw nc bi"><span id="3108" class="nd kc it mu b gy ne nf l ng nh">#<em class="nj">mysite/settings.py</em></span><span id="2f34" class="nd kc it mu b gy ni nf l ng nh">INSTALLED_APPS = [<br/>    'main.apps.MainConfig', #add this<br/>    'django.contrib.admin',<br/>    'django.contrib.auth',<br/>    'django.contrib.contenttypes',<br/>    'django.contrib.sessions',<br/>    'django.contrib.messages',<br/>    'django.contrib.staticfiles',<br/>]</span></pre><p id="d896" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">创建一个超级用户来登录Django admin。</p><pre class="mv mw mx my gt mz mu na nb aw nc bi"><span id="bbb1" class="nd kc it mu b gy ne nf l ng nh">(social) C:\Users\Owner\Desktop\code\social\mysite&gt;py manage.py createsuperuser</span></pre><p id="34ec" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">进行迁移和迁移。</p><pre class="mv mw mx my gt mz mu na nb aw nc bi"><span id="1c35" class="nd kc it mu b gy ne nf l ng nh">(social) C:\Users\Owner\Desktop\code\social\mysite&gt;py manage.py makemigrations<br/>...<br/>(social) C:\Users\Owner\Desktop\code\social\mysite&gt;py manage.py migrate</span></pre><p id="f0a3" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">用你的包管理器安装django-allauth。然后将django-allauth添加到settings.py中的INSTALLED_APPS中，并包含多个认证后端。此外，添加一个重定向URL来指定用户使用社交身份验证登录后将被重定向到的位置。</p><pre class="mv mw mx my gt mz mu na nb aw nc bi"><span id="7cda" class="nd kc it mu b gy ne nf l ng nh">(social) C:\Users\Owner\Desktop\code\social\mysite&gt;pip install django-allauth</span><span id="0dfa" class="nd kc it mu b gy ni nf l ng nh">#<em class="nj">mysite/settings.py</em></span><span id="2a82" class="nd kc it mu b gy ni nf l ng nh">INSTALLED_APPS = [<br/>    'main.apps.MainConfig', <br/>    'django.contrib.admin',<br/>    'django.contrib.auth',<br/>    'django.contrib.contenttypes',<br/>    'django.contrib.sessions',<br/>    'django.contrib.messages',<br/>    'django.contrib.staticfiles',</span><span id="70aa" class="nd kc it mu b gy ni nf l ng nh">    #add the following<br/>    'django.contrib.sites',<br/>    'allauth',<br/>    'allauth.account',<br/>    'allauth.socialaccount', <br/></span><span id="9b2e" class="nd kc it mu b gy ni nf l ng nh">]</span><span id="d8c5" class="nd kc it mu b gy ni nf l ng nh">AUTHENTICATION_BACKENDS = (<br/> #used for default signin such as loggin into admin panel<br/> 'django.contrib.auth.backends.ModelBackend', <br/>  <br/> #used for social authentications<br/> 'allauth.account.auth_backends.AuthenticationBackend',<br/> )</span><span id="c0c1" class="nd kc it mu b gy ni nf l ng nh">SITE_ID = 1</span><span id="3921" class="nd kc it mu b gy ni nf l ng nh">LOGIN_REDIRECT_URL = '/tutorials'</span></pre><p id="1cf8" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">在mysite/urls.py中包含allauth.urls。</p><pre class="mv mw mx my gt mz mu na nb aw nc bi"><span id="65be" class="nd kc it mu b gy ne nf l ng nh">#<em class="nj">mysite/urls.py</em></span><span id="4e3a" class="nd kc it mu b gy ni nf l ng nh">from django.contrib import admin<br/>from django.urls import path, include</span><span id="f75d" class="nd kc it mu b gy ni nf l ng nh">urlpatterns = [<br/>    path('admin/', admin.site.urls),<br/>    path('accounts/', include('allauth.urls')),<br/>]</span></pre><h1 id="f626" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak">注册谷歌</strong></h1><p id="9c57" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">将特定于提供程序的设置添加到settings.py。</p><pre class="mv mw mx my gt mz mu na nb aw nc bi"><span id="f189" class="nd kc it mu b gy ne nf l ng nh">#<em class="nj">mysite/settings.py</em></span><span id="9d9c" class="nd kc it mu b gy ni nf l ng nh">INSTALLED_APPS = [<br/>    'main.apps.MainConfig', <br/>    'django.contrib.admin',<br/>    'django.contrib.auth',<br/>    'django.contrib.contenttypes',<br/>    'django.contrib.sessions',<br/>    'django.contrib.messages',<br/>    'django.contrib.staticfiles',</span><span id="24de" class="nd kc it mu b gy ni nf l ng nh">    'django.contrib.sites',<br/>    'allauth',<br/>    'allauth.account',<br/>    'allauth.socialaccount', </span><span id="a87d" class="nd kc it mu b gy ni nf l ng nh">    'allauth.socialaccount.providers.google', #for google auth</span><span id="f52d" class="nd kc it mu b gy ni nf l ng nh">]</span><span id="d7ee" class="nd kc it mu b gy ni nf l ng nh">...<br/></span><span id="1216" class="nd kc it mu b gy ni nf l ng nh">SOCIALACCOUNT_PROVIDERS = {<br/>    'google': {<br/>        'SCOPE': [<br/>            'profile',<br/>            'email',<br/>        ],<br/>        'AUTH_PARAMS': {<br/>            'access_type': 'online',<br/>        }<br/>    }<br/>}</span></pre><p id="82eb" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">迁移更改。</p><pre class="mv mw mx my gt mz mu na nb aw nc bi"><span id="109b" class="nd kc it mu b gy ne nf l ng nh">(social) C:\Users\Owner\Desktop\code\social\mysite&gt;py manage.py migrate</span></pre><p id="6481" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">好吧，让我们建立一个注册页面。首先，在主应用程序中创建新的urls.py文件，并将URL包含在mysite/urls.py中。</p><pre class="mv mw mx my gt mz mu na nb aw nc bi"><span id="850b" class="nd kc it mu b gy ne nf l ng nh">#<em class="nj">main/urls.py</em></span><span id="ff2f" class="nd kc it mu b gy ni nf l ng nh">from django.urls import path<br/>from . import views</span><span id="0698" class="nd kc it mu b gy ni nf l ng nh">app_name = "main"   </span><span id="cf5b" class="nd kc it mu b gy ni nf l ng nh">urlpatterns = [<br/>  path("", views.homepage, name="homepage"),<br/>  path("register", views.register, name="register"),</span><span id="2881" class="nd kc it mu b gy ni nf l ng nh">]</span><span id="1662" class="nd kc it mu b gy ni nf l ng nh">#<em class="nj">mysite/urls.py</em></span><span id="6ec1" class="nd kc it mu b gy ni nf l ng nh">from django.contrib import admin<br/>from django.urls import path, include</span><span id="a389" class="nd kc it mu b gy ni nf l ng nh">urlpatterns = [<br/>    path('', include('main.urls')),<br/>    path('admin/', admin.site.urls),<br/>    path('accounts/', include('allauth.urls')),<br/>]</span></pre><p id="5906" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">向views.py添加适当的视图函数。注意，我们也在设置传统的注册表单。然而，我们还需要从我们的设置中指定正确的后端。</p><pre class="mv mw mx my gt mz mu na nb aw nc bi"><span id="c886" class="nd kc it mu b gy ne nf l ng nh">#<em class="nj">main/views.py</em></span><span id="ad75" class="nd kc it mu b gy ni nf l ng nh">from django.shortcuts import render, redirect<br/>from django.contrib.auth.forms import UserCreationForm<br/>from django.contrib.auth import login, authenticate, logout</span><span id="eff7" class="nd kc it mu b gy ni nf l ng nh">def homepage(request):<br/>  return render(request, "home.html")</span><span id="4a57" class="nd kc it mu b gy ni nf l ng nh">def register(request):<br/>  if request.method == "POST":<br/>    form = UserCreationForm(request.POST)<br/>    if form.is_valid():<br/>      user = form.save()<br/>      username = form.cleaned_data.get('username')<br/>      messages.success(request, f"New account created: {username}")<br/>      login(request, user, backend='django.contrib.auth.backends.ModelBackend')<br/>    else:<br/>      messages.error(request,"Account creation failed")</span><span id="c611" class="nd kc it mu b gy ni nf l ng nh">    return redirect("main:homepage")</span><span id="1d32" class="nd kc it mu b gy ni nf l ng nh">  form = UserCreationForm()<br/>  return render(request,"register.html", {"form": form})</span></pre><p id="d2a3" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">创建register.html模板。在模板中，我们将添加传统的注册表单以及Google注册。注意:我们还使用django-crisp-forms来呈现我们的注册表单。跟随这个<a class="ae lx" href="https://www.ordinarycoders.com/blog/article/render-forms-with-django-crispy-forms" rel="noopener ugc nofollow" target="_blank">指南</a>了解更多。</p><pre class="mv mw mx my gt mz mu na nb aw nc bi"><span id="4388" class="nd kc it mu b gy ne nf l ng nh">#<em class="nj">templates/register.html</em></span><span id="2337" class="nd kc it mu b gy ni nf l ng nh">{% extends "home.html" %}</span><span id="a29a" class="nd kc it mu b gy ni nf l ng nh">{% block content %}</span><span id="4759" class="nd kc it mu b gy ni nf l ng nh">{% load crispy_forms_tags %}<br/>{% load socialaccount %}<br/>{% load static %}</span><span id="9305" class="nd kc it mu b gy ni nf l ng nh">&lt;div class="container mx-5"&gt;<br/></span><span id="089a" class="nd kc it mu b gy ni nf l ng nh">  &lt;div class=" signin text-center"&gt;</span><span id="a8e5" class="nd kc it mu b gy ni nf l ng nh">    &lt;a href="{% provider_login_url 'google' %}" class="text-dark"&gt;&lt;img src="{% static "btn_google_signin_light_normal_web@2x.png" %}" style="width:14rem; height:auto"&gt;&lt;/a&gt;<br/>  &lt;/div&gt;</span><span id="4815" class="nd kc it mu b gy ni nf l ng nh">  &lt;br&gt;&lt;br&gt;</span><span id="3ba0" class="nd kc it mu b gy ni nf l ng nh">  &lt;div style="width: 100%; height: 15px; border-bottom: 1px solid lightgray; text-align: center"&gt;<br/>    &lt;span class="text-muted" style="margin-top:-15% <strong class="mu iu">!important</strong>; font-size: 11px; background-color: white; padding: 0px 10px;"&gt;<br/>      OR<br/>    &lt;/span&gt;<br/>  &lt;/div&gt;</span><span id="f6c4" class="nd kc it mu b gy ni nf l ng nh">  &lt;br&gt;&lt;br&gt;</span><span id="6011" class="nd kc it mu b gy ni nf l ng nh">  &lt;form method="post"&gt;<br/>    {% csrf_token %}<br/>    {{ form|crispy }}<br/>    &lt;button type="submit"  class="btn btn-primary"&gt;Register&lt;/button&gt;</span><span id="fc30" class="nd kc it mu b gy ni nf l ng nh">  &lt;/form&gt;</span><span id="71de" class="nd kc it mu b gy ni nf l ng nh">&lt;/div&gt;</span><span id="8ed1" class="nd kc it mu b gy ni nf l ng nh">{% endblock %}</span></pre><figure class="mv mw mx my gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nk"><img src="../Images/273d56525df36408f92dc3bddde1b24e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MbEz3Cyt0MY8YLG5.PNG"/></div></div></figure><p id="2565" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">太棒了，现在我们只需要用我们之前创建的超级用户登录到管理面板，获取我们的Google OAuth凭证，并添加适当的信息。登录后，点击管理面板底部的“社交应用”，然后点击“添加社交应用”。</p><figure class="mv mw mx my gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nl"><img src="../Images/135be2bc4baa0953af91b801daa8f66a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xAH8dWXj55zLFra-.PNG"/></div></div></figure><p id="dd52" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">在我们输入这些信息之前，我们需要获得我们的Google OAuth证书。访问<a class="ae lx" href="https://console.developers.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌开发者控制台</a>。转到侧面导航栏中的“凭据”。要创建凭据，您首先需要创建一个新项目和同意书。单击“创建项目”，输入与您的web应用程序相关的名称，然后点击“创建”。接下来，将提示您填写OAuth同意书。选择“外部”，这样任何用户都可以通过Google OAuth注册。输入应用程序的相关名称和电子邮件。只有这些字段是必需的。最后，返回到凭证，单击创建凭证，并选择OAuth客户端ID。</p><figure class="mv mw mx my gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nm"><img src="../Images/ae1ad1a0bd34be0cbf12548108600a18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-wwueZz1oAuhGc8b.PNG"/></div></div></figure><p id="64a0" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">选择“Web应用程序”，输入名称，并指定来源和重定向URI的。在我们的例子中，由于我们正在开发服务器上工作，我们将输入<a class="ae lx" href="https://www.ordinarycoders.com/" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:8000/ </a>作为我们的源URI，输入<a class="ae lx" href="https://www.ordinarycoders.com/accounts/google/login/callback/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/accounts/Google/log in/callback/</a>作为我们的重定向URI。我们之前在包含allauth.urls时将该路径添加到mysite/urls.py中。</p><figure class="mv mw mx my gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nn"><img src="../Images/52e7199f1636ef4d1ba187701e43ca53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TdKFXzGY_chFDB_r.PNG"/></div></div></figure><p id="52c5" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">单击“创建”接收您的客户ID和客户密码。回到您的Django管理页面，选择“Google”作为提供商，输入“Google”作为名称，输入客户端ID，输入密钥，最后添加example.com站点</p><p id="eaa8" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">回到你的注册页面，点击“与谷歌签约”按钮。您应该会被重定向到可用的Google登录选项。选择一个帐户并通过Google OAuth登录。要检查您当前是否以新用户身份登录，请访问管理页面，该页面会提示您不允许使用该用户，或者在您的home.html模板上输入以下代码:</p><pre class="mv mw mx my gt mz mu na nb aw nc bi"><span id="ae4d" class="nd kc it mu b gy ne nf l ng nh">{% if user.is_authenticated %}<br/>        &lt;h2 class="text-center"&gt;{{ user.username }}&lt;/h2&gt;<br/>{% endif %}</span></pre><p id="e57b" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated">请确保遵守提供商关于您的社交认证按钮的徽标使用和放置的规则。对于生产，用您正在使用的域替换您的本地服务器地址。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><p id="a9d0" class="pw-post-body-paragraph kz la it lb b lc ma le lf lg mb li lj lk mo lm ln lo mp lq lr ls mq lu lv lw im bi translated"><em class="nj">最初发表于</em><a class="ae lx" href="https://www.ordinarycoders.com/blog/article/django-allauth" rel="noopener ugc nofollow" target="_blank"><em class="nj">【https://www.ordinarycoders.com】</em></a><em class="nj">。</em></p></div></div>    
</body>
</html>