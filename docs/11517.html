<html>
<head>
<title>Scrape Free Stuff From Reddit With This Simple One-liner</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用这个简单的一行程序从Reddit上刮下免费的东西</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/scrape-free-stuff-from-reddit-with-this-simple-one-liner-33a2a61f73aa?source=collection_archive---------20-----------------------#2022-03-22">https://levelup.gitconnected.com/scrape-free-stuff-from-reddit-with-this-simple-one-liner-33a2a61f73aa?source=collection_archive---------20-----------------------#2022-03-22</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><figure class="gm go js jt ju jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj jr"><img src="../Images/6f9a75fbd64cdb0b4e523b9ea6ed2276.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9s2L5xFlXs_SJNkmeCx0xA.png"/></div></div><figcaption class="kc kd gk gi gj ke kf bd b be z dk translated">唐·坎瓦设计</figcaption></figure><p id="fa9b" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">从网上搜集资料很有趣，尤其是当你得到有用的东西时。</p><p id="4d1a" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">说到有用，从网上抓取一些有价值的东西可能需要一些手工劳动。</p><p id="2779" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">手工操作既费时又麻烦。开发者喜欢相反的情况。自动化。</p><p id="672c" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">现在，让我们从Reddit上搜集有价值的数据，并获得推广免费东西的帖子。可能是免费课程，免费产品，或者其他什么。</p><p id="3049" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">在本教程中，您将使用终端从Reddit获取数据。我会解释如何抓取像Udemy这样的subreddits来获取Reddit用户发布的最新优惠券。我对它进行了定制，这样你就可以在任何其他子编辑上应用它。</p><h1 id="fef5" class="le lf iu bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">最小示例</h1><p id="0948" class="pw-post-body-paragraph kg kh iu ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld in bi translated">我们一步一步来，看看怎么刮Reddit。</p><p id="1fdf" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">首先，您需要API凭证来获取这些信息吗？不，你只需要知道你想要的终点。然后使用命令行实用程序通过使用<code class="fe mh mi mj mk b">curl</code>或<code class="fe mh mi mj mk b">wget</code>从该端点获取请求。</p><pre class="ml mm mn mo gu mp mk mq mr aw ms bi"><span id="ed38" class="mt lf iu mk b gz mu mv l mw mx"><strong class="mk iv">$</strong> curl -sA 'udemy subreddit scraper' 'https://www.reddit.com/r/udemy/top.json?t=month'</span></pre><p id="4f91" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">这一行返回了上个月来自<em class="my"> udemy </em>子编辑的热门数据的JSON。</p><p id="5d32" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">您可以在这些选项中使用<code class="fe mh mi mj mk b">curl</code>:</p><ul class=""><li id="9f12" class="mz na iu ki b kj kk kn ko kr nb kv nc kz nd ld ne nf ng nh bi translated"><code class="fe mh mi mj mk b">-s</code>以静默模式下载</li><li id="11e1" class="mz na iu ki b kj ni kn nj kr nk kv nl kz nm ld ne nf ng nh bi translated"><code class="fe mh mi mj mk b">-A</code>以字符串形式添加用户代理</li></ul><h1 id="9265" class="le lf iu bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">获取子编辑帖子的标题</h1><p id="41f1" class="pw-post-body-paragraph kg kh iu ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld in bi translated">如果您想看到JSON格式的层次结构，请使用最后的<code class="fe mh mi mj mk b">jq</code>程序管道:</p><pre class="ml mm mn mo gu mp mk mq mr aw ms bi"><span id="c687" class="mt lf iu mk b gz mu mv l mw mx"><strong class="mk iv">$</strong> curl -sA 'udemy subreddit scraper' 'https://www.reddit.com/r/udemy/top.json?t=month' <strong class="mk iv">|</strong> <strong class="mk iv">jq</strong> '.'</span></pre><p id="795d" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">让我们更具体地获取那些热门Reddit帖子的标题。</p><p id="cb73" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">为此，获取<em class="my">标题</em>键的值。它位于父<em class="my">数据</em>的内部，父<em class="my">数据</em>是<em class="my">子</em>散列列表的一个叶。<em class="my">孩子</em>实际上是父<em class="my">数据</em>的孩子。</p><pre class="ml mm mn mo gu mp mk mq mr aw ms bi"><span id="2a9d" class="mt lf iu mk b gz mu mv l mw mx"><strong class="mk iv">$</strong> curl -sA 'udemy subreddit scraper' 'https://www.reddit.com/r/udemy/top.json?t=month' <strong class="mk iv">|</strong> <strong class="mk iv">jq</strong> '.data.children[].data.title'</span></pre><h1 id="251a" class="le lf iu bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">得到免费的东西</h1><p id="627b" class="pw-post-body-paragraph kg kh iu ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld in bi translated">现在，我们用<em class="my">免费</em>关键词过滤标题。</p><p id="7da3" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">假设只有当Reddit发帖人在标题中明确写下关键字'<em class="my"> Free </em>'时，免费的东西才存在:</p><pre class="ml mm mn mo gu mp mk mq mr aw ms bi"><span id="58b0" class="mt lf iu mk b gz mu mv l mw mx"><strong class="mk iv">$</strong> curl -sA 'udemy subreddit scraper' 'https://www.reddit.com/r/udemy/top.json?t=month' <strong class="mk iv">|</strong> <strong class="mk iv">jq</strong> '.data.children[].data | select(.title|test("Free")).title'<br/>"Top 30 Udemy Paid Courses For Free With Certificate 19 March 2022"<br/>"Best 50 FreeCourses for 18 March 2022"<br/>"Best 44 Udemy Paid Courses For Free With Certificate 12 March 2022"<br/>"Free Courses for 05 March 2022"<br/>"Hurry up, limited time only ! 40 Free Courses for 04 March 2022"<br/>"Udemy Paid Courses For Free With Certificate 06 March 2022"<br/>"3D modeling for Free"</span></pre><p id="6f7b" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">在这里，您使用了<code class="fe mh mi mj mk b">select</code>来过滤子<em class="my">标题</em>的具体值。你用<code class="fe mh mi mj mk b">test</code>函数来处理正则表达式。这个正则表达式包含了<em class="my"> Free </em>单词及其后面的任何字符。</p><p id="0625" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">但是这个命令有一个问题。我们没有任何结果的标题有<em class="my">自由</em>字(大写)或该字的任何变体。例如，<em class="my"> free </em>、<em class="my"> FRee </em>、<em class="my"> FREe </em>和<em class="my"> FREE </em>不会通过该命令返回。所以我们可以通过在<code class="fe mh mi mj mk b">test</code>函数中添加不区分大小写的参数<code class="fe mh mi mj mk b">"i"</code>来解决这个问题。</p><pre class="ml mm mn mo gu mp mk mq mr aw ms bi"><span id="3803" class="mt lf iu mk b gz mu mv l mw mx"><strong class="mk iv">$</strong> curl -sA 'udemy subreddit scraper' 'https://www.reddit.com/r/udemy/top.json?t=month' <strong class="mk iv">|</strong> <strong class="mk iv">jq</strong> '.data.children[].data | select(.title|test("free"; "i")).title'</span><span id="bcb6" class="mt lf iu mk b gz nn mv l mw mx">"Top 30 Udemy Paid Courses For Free With Certificate 19 March 2022"<br/>"Top 50 Premium Courses FREE for Wednesday, March 16, 2022"<br/>"Best 50 FreeCourses for 18 March 2022"<br/>"Best 44 Udemy Paid Courses For Free With Certificate 12 March 2022"<br/>"Free Courses for 05 March 2022"<br/>"Hurry up, limited time only ! 40 Free Courses for 04 March 2022"<br/>"Udemy Paid Courses For Free With Certificate 06 March 2022"<br/>"Browse Udemy courses that have gone free Today"<br/>"3D modeling for Free"</span></pre><p id="5f8d" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">现在，您有了更多包含其他变化的结果。即使有<em class="my">免费的</em>关键词和任何其他变化，在我们的例子中，你可以看到它。</p><p id="59f1" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">让我们对其进行定制，并将其放入bash脚本中:</p><pre class="ml mm mn mo gu mp mk mq mr aw ms bi"><span id="f736" class="mt lf iu mk b gz mu mv l mw mx">SUBREDDIT="$1"<br/><strong class="mk iv">curl</strong> -sA 'subreddit reader' \<br/>'https://www.reddit.com/r/'${SUBREDDIT}'/top.json?t=month' \<br/><strong class="mk iv">|</strong> <strong class="mk iv">jq</strong> '.data.children[].data | select(.title|test("free"; "i")).title'</span></pre><p id="2edd" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">您将subreddit名称作为一个参数。将bash脚本保存为例如<em class="my"> top_free.sh </em>，然后输入您想要从中获取免费内容的子编辑的名称:</p><pre class="ml mm mn mo gu mp mk mq mr aw ms bi"><span id="94af" class="mt lf iu mk b gz mu mv l mw mx"><strong class="mk iv">$</strong> chmod u+x top_free.sh # give access to that shell script<br/><strong class="mk iv">$</strong> ./top_free.sh udemy   # replace udemy with whatever subreddit you want</span></pre><h1 id="a258" class="le lf iu bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">更加定制的命令行</h1><p id="d8b1" class="pw-post-body-paragraph kg kh iu ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld in bi translated">让我们甚至在bash脚本中创建更多的定制。添加查询参数作为您想要的变元变量，而不是硬编码“free”:</p><pre class="ml mm mn mo gu mp mk mq mr aw ms bi"><span id="893c" class="mt lf iu mk b gz mu mv l mw mx">SUBREDDIT="$1"<br/>QUERY="${2:-free}"<br/><strong class="mk iv">curl</strong> -sA 'subreddit reader' \<br/>'https://www.reddit.com/r/'${SUBREDDIT}'/top.json?t=month' \<br/><strong class="mk iv">|</strong> <strong class="mk iv">jq</strong> '.data.children[].data | select(.title|test("'"${QUERY}"'"; "i")) | .title'</span></pre><p id="190e" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">参数扩展<code class="fe mh mi mj mk b">${2:-free}</code>意味着<em class="my">查询</em>将是第二个参数。如果为空，查询将分配给单词<em class="my"> free </em>。</p><p id="3bb5" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">让我们将这个bash脚本保存为<em class="my"> top_stuff.sh </em>并查看带有关键字<em class="my"> courses </em>的标题:</p><pre class="ml mm mn mo gu mp mk mq mr aw ms bi"><span id="a33a" class="mt lf iu mk b gz mu mv l mw mx"><strong class="mk iv">$</strong> chmod u+x top_stuff.sh<br/><strong class="mk iv">$</strong> ./top_stuff.sh udemy courses</span><span id="83ec" class="mt lf iu mk b gz nn mv l mw mx">"Winning at Udemy: What the most successful courses have in common"<br/>"Top 30 Udemy Paid Courses For Free With Certificate 19 March 2022"<br/>"Top 50 Premium Courses FREE for Wednesday, March 16, 2022"<br/>"Best 50 FreeCourses for 18 March 2022"<br/>"Best 44 Udemy Paid Courses For Free With Certificate 12 March 2022"<br/>"Free Courses for 05 March 2022"<br/>"https://www.reddit.com/r/Udemy/comments/t793wh/free_courses_for_05_march_2022/"<br/>"Hurry up, limited time only ! 40 Free Courses for 04 March 2022"<br/>"Best Courses for 10 March 2022"<br/>"40 Courses for 09 March 2022 added Today Wednesday March 9, 2022 Don't miss out on these exciting offers"<br/>"Best Courses for 07 March 2022"<br/>"Udemy Paid Courses For Free With Certificate 06 March 2022"<br/>"Browse Udemy courses that have gone free Today"<br/>"Do all courses go on sale at some point, or can some Sellers request not to be included in sales?"</span></pre><h1 id="15a9" class="le lf iu bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">获取标题和URL</h1><p id="58ef" class="pw-post-body-paragraph kg kh iu ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld in bi translated">现在，我们有了想要的标题。为什么我们不返回每个标题的URL，这样我们就可以点击它并浏览subreddit帖子和评论了？</p><pre class="ml mm mn mo gu mp mk mq mr aw ms bi"><span id="6d03" class="mt lf iu mk b gz mu mv l mw mx">SUBREDDIT="$1"<br/>QUERY="${2:-free}"<br/><strong class="mk iv">curl</strong> -sA 'subreddit reader' \<br/>'https://www.reddit.com/r/'${SUBREDDIT}'/top.json?t=month' \<br/><strong class="mk iv">|</strong> <strong class="mk iv">jq</strong> '.data.children[].data | select(.title|test("'"${QUERY}"'"; "i")) | {title, url} | .[]'</span></pre><p id="e2d3" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">这里，您已经使用<code class="fe mh mi mj mk b">jq</code>文档中的对象构造添加了两个子节点:<em class="my"> title </em>和<em class="my"> url </em>。</p><p id="6594" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">当您再次运行该命令时，您会得到:</p><pre class="ml mm mn mo gu mp mk mq mr aw ms bi"><span id="e006" class="mt lf iu mk b gz mu mv l mw mx">"Winning at Udemy: What the most successful courses have in common"<br/>"https://www.reddit.com/r/Udemy/comments/tgj25n/winning_at_udemy_what_the_most_successful_courses/"<br/>"Top 30 Udemy Paid Courses For Free With Certificate 19 March 2022"<br/>"https://www.reddit.com/r/Udemy/comments/thu0er/top_30_udemy_paid_courses_for_free_with/"<br/>"Top 50 Premium Courses FREE for Wednesday, March 16, 2022"<br/>"https://www.reddit.com/r/Udemy/comments/tfev3o/top_50_premium_courses_free_for_wednesday_march/"<br/>"Best 50 FreeCourses for 18 March 2022"<br/>"https://www.reddit.com/r/Udemy/comments/tgybkw/best_50_freecourses_for_18_march_2022/"<br/>"Best 44 Udemy Paid Courses For Free With Certificate 12 March 2022"<br/>"https://www.reddit.com/r/Udemy/comments/tcf5x6/best_44_udemy_paid_courses_for_free_with/"<br/>"Free Courses for 05 March 2022"<br/>"https://www.reddit.com/r/Udemy/comments/t793wh/free_courses_for_05_march_2022/"<br/>"Hurry up, limited time only ! 40 Free Courses for 04 March 2022"<br/>"https://www.reddit.com/r/Udemy/comments/t6fzna/hurry_up_limited_time_only_40_free_courses_for_04/"<br/>"Best Courses for 10 March 2022"<br/>"https://www.reddit.com/r/Udemy/comments/tavdbg/best_courses_for_10_march_2022/"<br/>"40 Courses for 09 March 2022 added Today Wednesday March 9, 2022 Don't miss out on these exciting offers"<br/>"https://www.reddit.com/r/Udemy/comments/ta4lct/40_courses_for_09_march_2022_added_today/"<br/>"Best Courses for 07 March 2022"<br/>"https://www.reddit.com/r/Udemy/comments/t8mesy/best_courses_for_07_march_2022/"<br/>"Udemy Paid Courses For Free With Certificate 06 March 2022"<br/>"https://www.reddit.com/r/Udemy/comments/t7xruf/udemy_paid_courses_for_free_with_certificate_06/"<br/>"Browse Udemy courses that have gone free Today"<br/>"https://www.reddit.com/r/Udemy/comments/te3f97/browse_udemy_courses_that_have_gone_free_today/"<br/>"Do all courses go on sale at some point, or can some Sellers request not to be included in sales?"<br/>"https://www.reddit.com/r/Udemy/comments/t4a0d6/do_all_courses_go_on_sale_at_some_point_or_can/"</span></pre><h1 id="e70c" class="le lf iu bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">最后的想法</h1><p id="ef0e" class="pw-post-body-paragraph kg kh iu ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld in bi translated">在本教程中，您已经看到了如何从任何子编辑中获取每月免费的顶级内容。您已经获取了该帖子的标题和URL，如果您愿意，您可以查看该帖子并加入社区。</p><p id="3edc" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">我们还将其一般化，以包括您想要在子编辑中搜索的任何关键字。</p><p id="91bf" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">如果您还有任何问题，请告诉我！或者想要更多的刮贴，就在下面评论吧！</p><p id="cc9b" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">尽情享受吧！</p><p id="e740" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">你可能会对我使用了<code class="fe mh mi mj mk b">jq</code>的这个教程感兴趣</p></div></div>    
</body>
</html>