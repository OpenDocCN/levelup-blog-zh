<html>
<head>
<title>Implement TabLayout with ViewPager in Android Jetpack Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Android Jetpack Compose中用ViewPager实现TabLayout</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/implement-tablayout-with-viewpager-in-android-jetpack-compose-d509fc6e2d8e?source=collection_archive---------2-----------------------#2021-07-14">https://levelup.gitconnected.com/implement-tablayout-with-viewpager-in-android-jetpack-compose-d509fc6e2d8e?source=collection_archive---------2-----------------------#2021-07-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="71c7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我们如何使用带有标签页的分页器，以流畅的动画和良好的无限循环效果在页面间滑动。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/86c367743da597b41175b541ebbef9a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/1*YXyXDwFaVsHrOAPQeGOvcQ.gif"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://dribbble.com/shots/5369346-UI-Tabs-Animation" rel="noopener ugc nofollow" target="_blank">https://dribbble.com/shots/5369346-UI-Tabs-Animation</a></figcaption></figure><h1 id="a5a8" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">介绍</h1><p id="2931" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">页面之间的滑动在诸如onboarding、设置向导等ui中很常见…我想你已经知道如何使用<code class="fe mj mk ml mm b">ViewPager</code>进行页面滑动。如果你正在寻找Compose中的<code class="fe mj mk ml mm b">ViewPager</code>的替代品，我建议你看看这个<code class="fe mj mk ml mm b">Pager</code>库。</p><p id="38c4" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">这个库目前是实验性的。所有的API都标记为<code class="fe mj mk ml mm b">@ExperimentalPagerApi</code>，但是它很好地处理了核心分页功能。</p><p id="68e6" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">在这篇文章中，让我们来看看如何使用带有标签的分页器在页面间滑动，并具有流畅的动画和良好的无限循环效果。</p><p id="67cd" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">我们开始吧！🥰</p><h1 id="846f" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">步骤1:项目设置</h1><p id="bd39" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">首先请查看<a class="ae ku" href="https://github.com/google/accompanist/tree/main/pager" rel="noopener ugc nofollow" target="_blank">传呼机网站</a>获取最新版本。</p><p id="3f4c" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">然后将以下内容添加到您的应用程序的<code class="fe mj mk ml mm b">build.gradle</code>:</p><pre class="kj kk kl km gt ms mm mt mu aw mv bi"><span id="c780" class="mw kw it mm b gy mx my l mz na">dependencies {<br/>    implementation "com.google.accompanist:accompanist-pager:0.12.0"<br/>}</span></pre><h1 id="c621" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">第二步:横向页面</h1><p id="5ee5" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">为了实现选项卡，我们将使用两个组件<code class="fe mj mk ml mm b">HorizontalPager</code>和<code class="fe mj mk ml mm b">PagerState</code>。</p><p id="61da" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated"><code class="fe mj mk ml mm b">HorizontalPager</code>是一个在编写环境中的ViewPager，允许用户在页面之间水平滑动。没有必要一次创建所有的页面，因为这样做会占用大量的内存，用户也不会浏览所有的页面。默认情况下，<code class="fe mj mk ml mm b">HorizontalPager</code>仅创建当前页面以及当前页面左侧和右侧的离屏页面。超出此限制的页面将被删除。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nb"><img src="../Images/dc063e9ee24e9299d87e4ac196d485fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gCD18UIRG_GRB1UKPbFgww.png"/></div></div></figure><p id="3475" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">这个问题的解决方法是什么？</p><p id="e47d" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">耶有:<code class="fe mj mk ml mm b">PagerState</code></p><p id="8a89" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">这是<code class="fe mj mk ml mm b">HorizontalPager</code> <strong class="lp iu"> </strong>的一种状态，我们希望跨构图<em class="ng">保持。</em>让我们来看看<code class="fe mj mk ml mm b">PagerState</code>的方法签名:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="3c3f" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">我们可以看到，有5个可用属性可以传递给<code class="fe mj mk ml mm b">rememberPagerState</code>函数:</p><ul class=""><li id="8f47" class="nj nk it lp b lq mn lt mo lw nl ma nm me nn mi no np nq nr bi translated"><code class="fe mj mk ml mm b"><strong class="lp iu">pageCount</strong></code>:页数。这是必需的。</li><li id="61a7" class="nj nk it lp b lq ns lt nt lw nu ma nv me nw mi no np nq nr bi translated"><code class="fe mj mk ml mm b">initialPage</code>:初始页面，默认值为0。</li><li id="d867" class="nj nk it lp b lq ns lt nt lw nu ma nv me nw mi no np nq nr bi translated"><code class="fe mj mk ml mm b">initialPageOffset</code>:初始页面偏移量。</li><li id="3573" class="nj nk it lp b lq ns lt nt lw nu ma nv me nw mi no np nq nr bi translated"><code class="fe mj mk ml mm b">initialOffscreenLimit</code>:定义当前页面两侧应保留的页数。该值至少需要1个屏幕外页面。您需要密切关注内存管理。如果有很多像图像和动画这样的项目，如果你缓存所有的项目，这可能会导致一个<em class="ng"> OutOfMemoryError。</em></li><li id="5dd1" class="nj nk it lp b lq ns lt nt lw nu ma nv me nw mi no np nq nr bi translated"><code class="fe mj mk ml mm b">infiniteLoop</code>:得心应手的属性。如果为真，您只需一步即可从第一页滑动到最后一页。</li></ul><p id="9627" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">记住这些属性，我们可以创建一个<code class="fe mj mk ml mm b">PagerState</code>，并将其传递给<code class="fe mj mk ml mm b">HorizontalPager</code> <strong class="lp iu">。</strong></p><p id="8eb6" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">让我们来看看<code class="fe mj mk ml mm b">HorizontalPager:</code>的方法签名</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="3ebb" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">我们可以看到，有9个可用属性可以传递给<code class="fe mj mk ml mm b">HorizontalPager</code>函数:</p><ul class=""><li id="9157" class="nj nk it lp b lq mn lt mo lw nl ma nm me nn mi no np nq nr bi translated"><code class="fe mj mk ml mm b"><strong class="lp iu">state</strong></code>:我们上面创建的<code class="fe mj mk ml mm b">PagerState</code>。这是必需的。</li><li id="9d84" class="nj nk it lp b lq ns lt nt lw nu ma nv me nw mi no np nq nr bi translated"><code class="fe mj mk ml mm b">modifier</code>:应用于页面的修饰符。</li><li id="8fc1" class="nj nk it lp b lq ns lt nt lw nu ma nv me nw mi no np nq nr bi translated"><code class="fe mj mk ml mm b">reverseLayout</code>:当真项从结束到开始合成时。</li><li id="a70d" class="nj nk it lp b lq ns lt nt lw nu ma nv me nw mi no np nq nr bi translated"><code class="fe mj mk ml mm b">itemSpacing</code>:项目间添加的水平间距。</li><li id="7ac1" class="nj nk it lp b lq ns lt nt lw nu ma nv me nw mi no np nq nr bi translated"><code class="fe mj mk ml mm b">dragEnabled</code>:为false时，用户不能在页面间滑动。</li><li id="7ea6" class="nj nk it lp b lq ns lt nt lw nu ma nv me nw mi no np nq nr bi translated"><code class="fe mj mk ml mm b">flingBehavior</code>:描述投掷行为的逻辑。</li><li id="5534" class="nj nk it lp b lq ns lt nt lw nu ma nv me nw mi no np nq nr bi translated"><code class="fe mj mk ml mm b">verticalAlignment</code>、<code class="fe mj mk ml mm b">horizontalAlignment</code>:帮助对齐布局的子项。</li><li id="59b3" class="nj nk it lp b lq ns lt nt lw nu ma nv me nw mi no np nq nr bi translated"><code class="fe mj mk ml mm b">content</code>:使用另一个可组合函数创建页面。</li></ul><h1 id="227c" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">步骤3:与选项卡集成</h1><p id="467f" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">你可以查看这个<a class="ae ku" href="https://mr-umbrella.medium.com/implement-tab-in-jetpack-compose-ac0d6fe2dc83" rel="noopener">链接</a>来看看我的文章如何在jetpack compose中实现tab。</p><div class="nx ny gp gr nz oa"><a href="https://mr-umbrella.medium.com/implement-tablayout-with-viewpager-in-jetpack-compose-88e56fab3cd6" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">在Jetpack Compose中用ViewPager实现TabLayout</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">介绍</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">mr-umbrella.medium.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo ko oa"/></div></div></a></div><p id="b12a" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">让我们创建一个包含4个选项卡和一个指向它们的页面链接的屏幕。我已经将离屏设置为2，打开无限循环，初始页面在第二页。当选项卡被点击时，会有一个动画将页面滑动到该选项卡。以下是代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/39aceb7de7986fc62f47c1db4ed37aea.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/1*HTbOg3Gf5y-28JNCxfM6mQ.gif"/></div></figure><p id="e129" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">我使用<code class="fe mj mk ml mm b">animateScrollToPage()</code>根据用户按下的标签动画跳转到相应的页面。改为使用<code class="fe mj mk ml mm b">scrollToPage()</code>即时跳转，不看其他页面。这两个方法都是挂起函数，所以被包装到一个协同作用域中。</p><p id="a90b" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">如果您在执行代码片段时发现问题，请查看GitHub repo <a class="ae ku" href="https://github.com/PhongHuynh93/Tab-Compose" rel="noopener ugc nofollow" target="_blank"> Tab-Compose </a>获取帮助。</p><div class="nx ny gp gr nz oa"><a href="https://github.com/PhongHuynh93/Tab-Compose" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">phonghuynh 93/Tab-撰写</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">通过jetpack compose实现带有寻呼机的选项卡。在GitHub上创建一个帐户，为PhongHuynh93/Tab-Compose开发做贡献。</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">github.com</p></div></div><div class="oj l"><div class="oq l ol om on oj oo ko oa"/></div></div></a></div></div><div class="ab cl or os hx ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="im in io ip iq"><p id="5a44" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">在这篇文章中，我们快速浏览了Jetpack Compose的页面组件。非常感谢你阅读我的文章。<em class="ng">如果你喜欢这个故事，请点击</em><strong class="lp iu"><em class="ng"/></strong>👏<strong class="lp iu"> <em class="ng">按钮和</em> </strong> <em class="ng">分享它来帮助别人吧！</em>关注我的<a class="ae ku" href="https://mr-umbrella.medium.com/" rel="noopener"> Medium </a> <em class="ng">获取更多牛逼安卓小技巧</em>。你也可以在<a class="ae ku" href="https://www.linkedin.com/in/huynh-phong-3649a7131/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上找到我。祝您愉快！😄</p><h1 id="3a11" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">参考</h1><p id="d8d3" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/implement-android-tablayout-in-jetpack-compose-e61c113add79">在Jetpack Compose中实现tab layout</a></p><h1 id="f216" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">继续读Android的东西</h1><p id="abbe" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/how-to-create-like-button-animation-in-android-part-1-f99e2792143d">如何在Android中创建like按钮动画</a></p><p id="7fed" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/shared-element-using-materialcontainertransform-in-android-6d420e74b122">Android中使用MaterialContainerTransform的共享元素</a></p><p id="93e8" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/android-button-morphing-animation-bc3bed740501">安卓按钮变形动画</a></p><p id="cd79" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/motionlayout-collapsing-toolbar-d0ce8dd874b6">运动布局——折叠工具栏</a></p><h1 id="5642" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">Jetpack撰写</h1><p id="a41a" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/implement-android-snackbar-in-jetpack-compose-d83df5ff5b47">在Jetpack Compose中实现snack bar</a></p><p id="cfb2" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/create-an-auto-scroll-viewpager-with-transformation-and-ken-burns-effect-in-android-jetpack-compose-efdf46f2e8ed">在Jetpack Compose中创建一个带有变形和ken burns效果的自动滚动浏览器</a></p></div></div>    
</body>
</html>