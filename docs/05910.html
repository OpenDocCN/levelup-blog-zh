<html>
<head>
<title>How to Write Custom Routes in Rails</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Rails中编写自定义路线</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-write-custom-routes-in-rails-872df2ca4d39?source=collection_archive---------2-----------------------#2020-10-12">https://levelup.gitconnected.com/how-to-write-custom-routes-in-rails-872df2ca4d39?source=collection_archive---------2-----------------------#2020-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/517abf63724c69fcbb25b1e1b995e895.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k5zwELea_5BPgS8N"/></div></div></figure><p id="c5ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我项目的大部分后端都是用Ruby on Rails 构建的。在Flatiron工作期间，我学习并使用Ruby on Rails。我喜欢Ruby，并且发现它比我在查塔胡奇技术学院学习的Java和C#更容易使用和理解。</p><p id="1d47" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您曾经使用过Rails，您可能知道"<strong class="ka ir"> routes </strong>"是我们如何在特定的"<strong class="ka ir">控制器</strong>上访问或调用特定的"<strong class="ka ir">方法</strong>"。routes文件位于config文件夹中。每次更新路由文件时，请<strong class="ka ir">确保</strong>您<strong class="ka ir">重启</strong>您的服务器(如果它当前正在运行)。一个项目的普通路线可能看起来像下面的例子，我将分解每一部分的含义。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="f2ec" class="lf lg iq lb b gy lh li l lj lk">get “/users”, to: “users#index”</span></pre><p id="5ea3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本例中的<strong class="ka ir"> HTTP动词</strong>是“<strong class="ka ir"> get </strong>”。“get”将检索信息或数据。<strong class="ka ir">"/用户"</strong>是后端将寻找的URL路径。所以如果你在<strong class="ka ir"> http://localhost:3000/ </strong>上为你的项目或应用，访问“用户”的URL是<strong class="ka ir">http://localhost:3000/users</strong>。<strong class="ka ir"> "to:" </strong>是一个关键字，指引路线应该往哪里走。最后，我们有<strong class="ka ir">“用户数量指数”</strong>。<strong class="ka ir">用户</strong>左边的井号是控制器的名称。右边的<strong class="ka ir">索引</strong>是我们想要在<strong class="ka ir">用户</strong>控制器上调用的方法的名称。所以基本上，这条路线是检索所有用户(通常index是检索所有条目，show是针对某个特定条目)。</p><p id="c834" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果我们不需要任何自定义路线，我们可以<strong class="ka ir">懒惰</strong>或<strong class="ka ir">高效</strong>并在“用户”控制器的路线文件中编写以下内容。</p><p id="efbd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ll lm ln lb b">resources <strong class="ka ir">:users</strong></code></p><p id="b53f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">上面这一行将给我们<strong class="ka ir">访问</strong>控制器上的以下方法或动作。</p><p id="fb0e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">索引</strong> —显示所有项目</p><p id="0f0b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">显示</strong> —显示一个项目</p><p id="5dac" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">创建</strong> —创建一个新项目</p><p id="cca1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">新建</strong> —返回用于创建项目的HTML表单</p><p id="26ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">更新</strong> —更新现有的项目</p><p id="c394" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">编辑</strong> —返回用于更新项目的HTML表单</p><p id="3f7a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">销毁</strong> —删除一个项目</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><p id="56aa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是如果我们需要访问用户控制器上的一个动作，而上面的列表中没有提供<strong class="ka ir">呢？我们怎样才能做到这一点？</strong></p><h2 id="814d" class="lf lg iq bd lv lw lx dn ly lz ma dp mb kj mc md me kn mf mg mh kr mi mj mk ml bi translated">海关路线，就是这样！</h2><p id="5d89" class="pw-post-body-paragraph jy jz iq ka b kb mm kd ke kf mn kh ki kj mo kl km kn mp kp kq kr mq kt ku kv ij bi translated">我现在将逐步解释如何在Rails中实现一个<strong class="ka ir">自定义路由</strong>！</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h2 id="ea4f" class="lf lg iq bd lv lw lx dn ly lz ma dp mb kj mc md me kn mf mg mh kr mi mj mk ml bi translated">场景示例:编写一个自定义路线来为用户添加朋友</h2><p id="d679" class="pw-post-body-paragraph jy jz iq ka b kb mm kd ke kf mn kh ki kj mo kl km kn mp kp kq kr mq kt ku kv ij bi translated">我们将假设有<strong class="ka ir"> 2 </strong>关系:用户和用户朋友。一个用户<strong class="ka ir">有很多</strong>好友，用户好友<strong class="ka ir">属于</strong> o个用户。我们将在用户控制器上编写一个自定义路由，为用户添加一个新朋友，而不是创建另一个控制器。我们<strong class="ka ir">不会</strong>实际编写代码或逻辑来给用户添加好友。我们将<strong class="ka ir">仅</strong>展示如何在控制器上写入和访问路线。让我们得到它！</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h2 id="057b" class="lf lg iq bd lv lw lx dn ly lz ma dp mb kj mc md me kn mf mg mh kr mi mj mk ml bi translated">1.写路线</h2><p id="e443" class="pw-post-body-paragraph jy jz iq ka b kb mm kd ke kf mn kh ki kj mo kl km kn mp kp kq kr mq kt ku kv ij bi translated">访问<strong class="ka ir">配置</strong>文件夹中的路线文件。在这里，我们将编写一个自定义路由来为用户添加朋友。</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="44a4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们的<strong class="ka ir"> HTTP动词</strong>将是“<strong class="ka ir"> post </strong>”，因为我们将<strong class="ka ir">为用户创建</strong>一个新的UserFriend。<strong class="ka ir"> /add_friend </strong>是我们在用户控制器上访问该操作的路径。如果我们当前使用的是localhost，URL可能如下所示:</p><p id="a20f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">http://localhost:3000/add _ friend</strong></p><p id="44c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们希望将路由"<strong class="ka ir">指向:</strong>"用户控制器，并希望在用户控制器上调用add_friend操作。如果对configs文件夹中的任何内容进行了更改，请记得<strong class="ka ir">重启</strong>您的服务器。你<strong class="ka ir">不会</strong>注意到或者看到任何更新，直到服务器<strong class="ka ir">重启</strong>。如果不小心的话，这会导致大量的挫折。<strong class="ka ir">相信我</strong>，我知道！</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h2 id="2144" class="lf lg iq bd lv lw lx dn ly lz ma dp mb kj mc md me kn mf mg mh kr mi mj mk ml bi translated">2.在控制器上编写自定义操作</h2><p id="3880" class="pw-post-body-paragraph jy jz iq ka b kb mm kd ke kf mn kh ki kj mo kl km kn mp kp kq kr mq kt ku kv ij bi translated">剩下的工作就是<strong class="ka ir">在用户控制器上创建</strong>自定义动作。我们所要做的就是导航到用户控制器并创建“<strong class="ka ir"> add_friend </strong>”动作。用户控制器将包含在<strong class="ka ir">控制器</strong>文件夹中，该文件夹位于<strong class="ka ir">应用</strong>文件夹中。</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="62cf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在上面的代码文件中，我们在用户控制器上有两个动作。第一个动作可能是对一个控制器来说最<strong class="ka ir">常见的</strong>动作，即<strong class="ka ir">指标</strong>动作。理想情况下，索引操作返回数据库或数据表的所有项目。如果您不熟悉第6行的“<strong class="ka ir"> include </strong>”，它允许一个“<strong class="ka ir">有</strong> <strong class="ka ir">多个</strong>”的关系返回它的<strong class="ka ir">属于</strong>的每一项(如果存在)。如果你以前从未使用过，这是一个很棒的特性。第10–12行包含我们的自定义操作！如你所见，我<strong class="ka ir">没有</strong>写添加好友的逻辑，因为这不是本文的<strong class="ka ir">重点</strong>。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h2 id="b6be" class="lf lg iq bd lv lw lx dn ly lz ma dp mb kj mc md me kn mf mg mh kr mi mj mk ml bi translated">3.测试您的新定制路线！</h2><p id="d89a" class="pw-post-body-paragraph jy jz iq ka b kb mm kd ke kf mn kh ki kj mo kl km kn mp kp kq kr mq kt ku kv ij bi translated">作为程序员，我们测试一切！这是确保一切按照我们期望的方式运行的唯一方法。我喜欢在<strong class="ka ir"> add_friend </strong>动作中丢一个“<strong class="ka ir"> byebug </strong>”来保证路线和动作设置正确。Byebug是我最喜欢用来测试Rails的工具。</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="08df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们需要访问我们当前的用户，以便为该用户添加一个朋友。我喜欢通过使用第12行来测试，以确定<strong class="ka ir">返回的是什么。如果我们调用<strong class="ka ir">前端</strong>到<strong class="ka ir">后端</strong>的fetch来添加一个朋友，并且后端点击byebug，我们就知道自定义路由被正确设置<strong class="ka ir"/>！加好友的逻辑不一定成立，但是<strong class="ka ir">至少</strong>我们击中了byebug。<strong class="ka ir">确保</strong>我们的自定义路线和自定义动作成功同步<strong class="ka ir"/>。在byebug中，您可以四处玩耍并<strong class="ka ir">探索</strong>哪些<strong class="ka ir">参数</strong>或<strong class="ka ir">参数</strong>会返回给您，以便高效地<strong class="ka ir">识别</strong>添加好友的算法。</strong></p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="mt ms l"/></div></figure><p id="8978" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您现在知道如何编写自定义路线了！在成功地写完你的第一个之后，它们是如此的容易实现。<strong class="ka ir">感谢</strong>的阅读，希望你发现这篇文章<strong class="ka ir">有益</strong>。如果您有任何问题或想要联系我，请不要犹豫！你可以在<a class="ae mu" href="https://www.linkedin.com/in/genecampbell3/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> LinkedIn </strong> </a>上联系我，或者在这里 查看我的作品集网站<a class="ae mu" href="http://www.genecampbell3.net/" rel="noopener ugc nofollow" target="_blank">！我祝你度过美好的一天！</a></p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h2 id="829c" class="lf lg iq bd lv lw lx dn ly lz ma dp mb kj mc md me kn mf mg mh kr mi mj mk ml bi translated">来源:</h2><div class="mv mw gp gr mx my"><a href="https://www.tutorialspoint.com/ruby-on-rails/rails-routes.htm" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd ir gy z fp nd fr fs ne fu fw ip bi translated">Ruby on Rails - Routes</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">路由模块提供了本地Ruby中的URL重写。这是一种将传入请求重定向到控制器和…</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">www.tutorialspoint.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm jw my"/></div></div></a></div></div></div>    
</body>
</html>