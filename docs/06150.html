<html>
<head>
<title>Custom Object Detection using TensorFlow — (From Scratch)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用TensorFlow的自定义对象检测—(从头开始)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/custom-object-detection-using-tensorflow-part-1-from-scratch-41114cd2b403?source=collection_archive---------6-----------------------#2020-10-30">https://levelup.gitconnected.com/custom-object-detection-using-tensorflow-part-1-from-scratch-41114cd2b403?source=collection_archive---------6-----------------------#2020-10-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/a1ee863440fda1e0d2842f2396669d51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/1*rU3jatrshqQ7J1mYkuAQng.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">作者图片(哈希尔，2020)</figcaption></figure><p id="cc3c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本教程中，我们将使用预训练的SSD MobileNet V2模型来创建和训练我们自己的面罩检测器。</p><p id="5d20" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们将创建自己的图像数据集，稍后我们将看到如何训练一个自定义的对象检测模型(本地和谷歌Colab！)</p><h1 id="b81f" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">1.装置</h1><h2 id="9acc" class="lu kx iq bd ky lv lw dn lc lx ly dp lg kj lz ma lk kn mb mc lo kr md me ls mf bi translated">1.1张量流</h2><p id="db2f" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">使用以下命令安装Tensorflow:</p><p id="8c9b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ml mm mn mo b">$ pip install tensorflow or pip install tensorflow==1.15</code></p><p id="3523" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您有可以与Tensorflow一起使用的GPU:</p><p id="29dd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ml mm mn mo b">$ pip install tensorflow-gpu</code></p><h2 id="f3b0" class="lu kx iq bd ky lv lw dn lc lx ly dp lg kj lz ma lk kn mb mc lo kr md me ls mf bi translated">1.2其他依赖关系</h2><p id="b3d9" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated"><code class="fe ml mm mn mo b">$ pip install pillow Cython lxml jupyter matplotlib</code></p><p id="a053" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用自制软件安装protobuf(你可以在这里了解更多关于自制软件的知识)</p><p id="ad0c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ml mm mn mo b">$ brew install protobuf</code></p><p id="4168" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于在其他操作系统上安装protobuf，请遵循此处的说明<a class="ae mp" href="http://google.github.io/proto-lens/installing-protoc.html" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="e1ee" class="lu kx iq bd ky lv lw dn lc lx ly dp lg kj lz ma lk kn mb mc lo kr md me ls mf bi translated">1.3克隆Tensorflow模型库</h2><p id="f3fc" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">在本教程中，我们将使用Tensorflow模型存储库中的资源。因为Tensorflow安装没有附带它，所以我们需要从他们的Github repo中克隆它:</p><p id="a887" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先进入张量流目录:</p><pre class="mq mr ms mt gt mu mo mv mw aw mx bi"><span id="7ca4" class="lu kx iq mo b gy my mz l na nb"># <em class="nc">For example: ~/anaconda/envs/&lt;your_env_name&gt;/lib/python3.6/site-packages/tensorflow</em>$ cd &lt;path_to_your_tensorflow_installation&gt;</span></pre><p id="f030" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">克隆Tensorflow模型库:</p><p id="a50f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ml mm mn mo b">$ git clone <a class="ae mp" href="https://github.com/tensorflow/models.git" rel="noopener ugc nofollow" target="_blank">https://github.com/tensorflow/models.git</a></code></p><p id="0de7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">从此时起，该目录将被称为</strong> <code class="fe ml mm mn mo b"><strong class="ka ir">models</strong></code> <strong class="ka ir">目录</strong></p><h2 id="78e4" class="lu kx iq bd ky lv lw dn lc lx ly dp lg kj lz ma lk kn mb mc lo kr md me ls mf bi translated">1.4设置环境</h2><p id="4cda" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">每当您启动一个新的终端窗口来处理预训练的模型时，编译Protobuf并更改您的<code class="fe ml mm mn mo b">PYTHONPATH</code>是非常重要的。</p><p id="81a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从终端运行以下命令:</p><pre class="mq mr ms mt gt mu mo mv mw aw mx bi"><span id="dd24" class="lu kx iq mo b gy my mz l na nb">$ cd &lt;path_to_your_tensorflow_installation&gt;/models/research/$ protoc object_detection/protos/*.proto --python_out=.$ export PYTHONPATH=$PYTHONPATH:`pwd`:`pwd`/slim</span></pre><p id="008a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">运行快速测试以确认对象检测API工作正常:</p><p id="fcc3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ml mm mn mo b">$ python object_detection/builders/model_builder_test.py</code></p><h1 id="50a3" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">2.形象</h1><p id="138e" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">对于数据集图像，我使用的是口罩图像，你可以使用自己的数据集图像或从谷歌下载。在google中启用<strong class="ka ir"> fatkun批量下载</strong>扩展。下载大量图像，并从下载的文件夹中删除不需要的图像。</p><figure class="mq mr ms mt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi nd"><img src="../Images/f2becbc0da631b4d25a346a108bb4ecf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-bv0e-UCCfatuESEfQSCWQ.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">作者图片(哈希尔，2020)</figcaption></figure><p id="2c73" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在进入tensorflow object_Detection目录<strong class="ka ir">删除数据文件夹。创建一个新的空数据文件夹，“训练”文件夹，“图像”文件夹。</strong></p><p id="40de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在在图像文件夹中创建2个新的空文件夹'测试，'训练'。它看起来会像这样。<strong class="ka ir">复制你下载的图片并粘贴到模型中&gt;研究&gt;物体_探测&gt;图片</strong></p><pre class="mq mr ms mt gt mu mo mv mw aw mx bi"><span id="5421" class="lu kx iq mo b gy my mz l na nb">object_detection<br/>    ├── data<br/>    |   <br/>    ├── training<br/>    |<br/>    ├── images<br/>    |   ├── test<br/>    |   ├── train<br/>    |   ├── ...</span></pre><h2 id="2455" class="lu kx iq bd ky lv lw dn lc lx ly dp lg kj lz ma lk kn mb mc lo kr md me ls mf bi translated">2.1图像标记</h2><p id="e66c" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">现在来标记镜像克隆—<a class="ae mp" href="https://github.com/tzutalin/labelImg" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"/></a>repo，转到anaconda cmd提示符和cd到labelImg路径</p><pre class="mq mr ms mt gt mu mo mv mw aw mx bi"><span id="a463" class="lu kx iq mo b gy my mz l na nb">C:\Users\path\labelImg&gt; python labelImg.py</span></pre><p id="3435" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您在运行cmd时遇到任何错误，请pip install lxml。标签窗口打开后，选择打开目录并将目录保存到object_detection中的images文件夹。</p><figure class="mq mr ms mt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi ni"><img src="../Images/c872d121a0d049b6d03f1d0e99cc31a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rKReqVyJzK1e4_b2t9tKrA.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">作者截图(哈希尔，2020)</figcaption></figure><p id="3fd7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在使用<strong class="ka ir"> W </strong>来裁剪图片并给你的图片贴上标签，并以img的相同名称保存到images文件夹中。以同样的方式裁剪和标记所有图像。如果你有一个以上的标签，确保你可以用不同的名称。确保您获得的img和xml文件具有相同的名称(没有空格)。</p><p id="68ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在您已经标记了所有的图像，将10%的图像和xml文件复制到测试中，其余的复制到训练中。</p><pre class="mq mr ms mt gt mu mo mv mw aw mx bi"><span id="9e12" class="lu kx iq mo b gy my mz l na nb">object_detection<br/>  ├── images<br/>    ├── test<br/>    |   ├── cmimage1.jpg<br/>    |   ├── cmimage1.xml<br/>        ├── cmimage2.jpg<br/>    |   ├── cmimage2.xml <br/>    ├── train<br/>    |   ├── ...</span></pre><figure class="mq mr ms mt gt jr"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">作者将xml转换为CSV python(har shil，2020)</figcaption></figure><p id="aeda" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在制作<strong class="ka ir"> xml_to_csv.py </strong>文件，并将上面的代码粘贴到其中。制作模型中的文件路径&gt;研究&gt;对象_检测。现在创建一个新的文件generatetfrecord，并将下面的代码粘贴到其中。</p><figure class="mq mr ms mt gt jr"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">作者的tfreorcrd python(har shil，2020)</figcaption></figure><p id="fd66" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在为你的模型替换obj上的标签和数字。现在打开conda cmd和cd到models/research/object _ detection并运行-</p><pre class="mq mr ms mt gt mu mo mv mw aw mx bi"><span id="5fe1" class="lu kx iq mo b gy my mz l na nb">path/object_detection&gt; python xml_to_csv.py</span></pre><p id="c21d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在2个文件将被创建到你的数据文件夹中。打开这两个文件，检查标签和图像的数量。</p><h2 id="9388" class="lu kx iq bd ky lv lw dn lc lx ly dp lg kj lz ma lk kn mb mc lo kr md me ls mf bi translated">2.2生成_tfrecord</h2><p id="9e3b" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">既然您已经生成了csv文件，现在cd/ to dir。</p><figure class="mq mr ms mt gt jr"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">作者的命令(哈希尔，2020年)</figcaption></figure><p id="2acf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你有任何错误，检查图像的文件名和目录。一旦您成功运行两个命令，您将获得2个<strong class="ka ir">。将文件记录到数据文件夹</strong>。这是第一部分，如果你已经生成。记录文件你做得很好。<strong class="ka ir">确保使用正确的版本、文件名和目录。项目的路径。</strong></p><p id="815e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">我在本次回购中添加了一些imp文件—</strong><a class="ae mp" href="https://github.com/its-harshil/tensorflow-custom-objectdetection" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">https://github . com/its-harsh il/tensor flow-custom-object detection</strong></a></p></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><p id="ca10" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">现在我们将训练一个用于对象检测的自定义模型(Local和Google Colab！)</strong></p><h1 id="b796" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">1.张量流检测模型</h1><div class="ns nt gp gr nu nv"><a href="https://github.com/tensorflow/models/blob/master/research/object_detection/g3doc/tf1_detection_zoo.md" rel="noopener  ugc nofollow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd ir gy z fp oa fr fs ob fu fw ip bi translated">张量流/模型</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">我们提供了一组在COCO数据集、Kitti数据集、开放图像上预先训练的检测模型…</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">github.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj js nv"/></div></div></a></div><p id="8c06" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">打开上面的repo，下载你想要的任何模型，把文件夹放到models &gt; research &gt; object _ detection。我用的是<strong class="ka ir"> ssd_mobilenet_v1_coco </strong></p><p id="c85f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在将<a class="ae mp" href="https://github.com/Bengemon825/TF_Object_Detection2020/blob/master/masks/training/ssd_mobilenet_v1_pets.config" rel="noopener ugc nofollow" target="_blank">https://github . com/benge mon 825/TF _ Object _ detection 2020/blob/master/masks/training/SSD _ mobilenet _ v1 _ pets . config</a>pet文件添加到‘training’文件夹中。</p><p id="6004" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">修改你拥有的对象的路径和数量</strong></p><p id="5721" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在复制<strong class="ka ir"> ssd_mobilenet_v1_coco中的pipline.conifg文件，粘贴到培训文件夹中。它应该看起来像这样</strong></p><pre class="mq mr ms mt gt mu mo mv mw aw mx bi"><span id="247b" class="lu kx iq mo b gy my mz l na nb">object_detection<br/>  ├── data<br/>    ├── object_detection.pbtxt<br/>    ├── train.record<br/>    ├── test.record<br/>    ├── train_lables.csv<br/>    ├── test_labels.csv<br/> ├── training<br/>    ├── object_detection.pbtxt<br/>    ├── pipline.config<br/>    ├── ssd_mobilenet_v1_pets.config</span></pre><h1 id="6ba5" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">2.PBTX文件</h1><p id="01bd" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">在training文件夹中创建一个. txt文件并粘贴下面的代码</p><pre class="mq mr ms mt gt mu mo mv mw aw mx bi"><span id="3af6" class="lu kx iq mo b gy my mz l na nb">item { id: 1 name: 'cloth_mask'}</span></pre><p id="5f7d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">现在点击另存为，将其命名为‘object-detection . Pb txt ’,选择所有文件并保存</strong>。如果有n个标签用于对象检测，请确保使用与csv文件中相同的标签名称。<strong class="ka ir">现在复制这个pbtxt文件并粘贴到数据文件夹中。</strong></p><h1 id="89f0" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">3.培养</h1><p id="8ee4" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">现在您已经在数据和培训文件夹中添加了pbtxt文件。打开anaconda cmd cd到models \ research \ object _ Detection并运行-</p><pre class="mq mr ms mt gt mu mo mv mw aw mx bi"><span id="8469" class="lu kx iq mo b gy my mz l na nb">set PYTHONPATH=$PYTHONPATH:"pwd":"pwd"/slim'</span></pre><p id="931a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后</p><pre class="mq mr ms mt gt mu mo mv mw aw mx bi"><span id="571b" class="lu kx iq mo b gy my mz l na nb">python train.py --train_dir=training/ --pipeline_config_path=training/ssd_mobilenet_v1_pets.config --logtostderr</span></pre><p id="f7c9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您得到错误消息说没有找到模块，那么只需复制文件并粘贴到object_detection中。确保你只是复制它，而不是从主目录中删除它。</p><p id="437b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果显示任何其他错误，请确保检查您的。记录文件，generate_tfrecord文件。请确保它们不为空或有任何错误。</p><p id="4a78" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦你成功地运行了cmd，你就能看到这个模型是在损失和时间的情况下进行训练的。它看起来会像这样-</p><pre class="mq mr ms mt gt mu mo mv mw aw mx bi"><span id="3048" class="lu kx iq mo b gy my mz l na nb">I1030 12:52:00.296686  3708 learning.py:768] Starting Queues.<br/>INFO:tensorflow:global_step/sec: 0<br/>I1030 12:52:09.401392 30180 supervisor.py:1099] global_step/sec: 0<br/>INFO:tensorflow:Recording summary at step 3217.<br/>I1030 12:52:21.126251 16976 supervisor.py:1050] Recording summary at step 3217.<br/>INFO:tensorflow:global step 3218: loss = 1.7246 (21.576 sec/step)<br/>I1030 12:52:22.335144  3708 learning.py:507] global step 3218: loss = 1.7246 (21.576 sec/step)<br/>INFO:tensorflow:global step 3219: loss = 1.6730 (3.673 sec/step)<br/>I1030 12:52:26.409953  3708 learning.py:507] global step 3219: loss = 1.6730 (3.673 sec/step)<br/>INFO:tensorflow:global step 3220: loss = 1.8269 (4.190 sec/step)<br/>I1030 12:52:30.603331  3708 learning.py:507] global step 3220: loss = 1.8269 (4.190 sec/step)<br/>INFO:tensorflow:global step 3221: loss = 1.9480 (4.277 sec/step)<br/>I1030 12:52:34.883605  3708 learning.py:507] global step 3221: loss = 1.9480 (4.277 sec/step)<br/>INFO:tensorflow:global step 3222: loss = 1.5400 (5.243 sec/step)<br/>I1030 12:52:40.129421  3708 learning.py:507] global step 3222: loss = 1.5400 (5.243 sec/step)<br/>INFO:tensorflow:global step 3223: loss = 1.3421 (5.265 sec/step)<br/>I1030 12:52:45.397172  3708 learning.py:507] global step 3223: loss = 1.3421 (5.265 sec/step)</span></pre><p id="cb25" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">确保你正在产生损失，一旦你的损失率等于或小于1，按CTRL+C停止训练。</p><h1 id="1b36" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">4.导出图表</h1><p id="5084" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">现在，您的培训已经结束，请转到object_Detection文件夹并打开培训文件夹。你会看到数据，索引，元文件产生了相同的名称。查看最新文件，如<strong class="ka ir"> model.ckpt-3217 </strong></p><p id="9959" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在运行，用你最新的文件编辑cmd下面的ckpt文件名。</p><pre class="mq mr ms mt gt mu mo mv mw aw mx bi"><span id="67e4" class="lu kx iq mo b gy my mz l na nb">python export_inference_graph.py --input_type image_tensor --pipeline_config_path training/ssd_mobilenet_v1_pets.config --trained_checkpoint_prefix training/<strong class="mo ir">model.ckpt-3217</strong> --output_directory new_graph</span></pre><p id="0366" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在转到object_detection文件夹，将生成新的_graph文件夹。</p><h1 id="d1bf" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">5.网络摄像头检测</h1><p id="00d6" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">在object_detection目录中创建一个自定义网络摄像机检测python文件。，粘贴在代码下面—</p><figure class="mq mr ms mt gt jr"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">作者定制的网络摄像头python(har shil，2020)</figcaption></figure><p id="5a0c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在打开pycharm并运行上面的文件。您的网络摄像头将弹出，您将检测到带有标签和准确性的面罩。您甚至可以在cmd提示符下运行它。</p><figure class="mq mr ms mt gt jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/fc0a50c9d15c41b036bcb9272ef9f8e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/0*JHjdqECrpNmw_4-o.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">作者图片(哈希尔，2020)</figcaption></figure><p id="9b1e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">如果您无法运行任何cmd </strong> —</p><ul class=""><li id="07ec" class="ok ol iq ka b kb kc kf kg kj om kn on kr oo kv op oq or os bi translated">检查版本代码</li><li id="fd8d" class="ok ol iq ka b kb ot kf ou kj ov kn ow kr ox kv op oq or os bi translated">检查路径</li><li id="fd28" class="ok ol iq ka b kb ot kf ou kj ov kn ow kr ox kv op oq or os bi translated">检查。记录，。csv，。config等文件在那里</li><li id="23e9" class="ok ol iq ka b kb ot kf ou kj ov kn ow kr ox kv op oq or os bi translated">安装了lxml、slim和其他</li><li id="aa15" class="ok ol iq ka b kb ot kf ou kj ov kn ow kr ox kv op oq or os bi translated">检查标签名称，它应该在csv中相同，生成tf记录文件和pbtxt文件。</li><li id="fc15" class="ok ol iq ka b kb ot kf ou kj ov kn ow kr ox kv op oq or os bi translated">每个物体使用大约100多张图片</li></ul><h1 id="a120" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">6.Google Colab</h1><p id="e16f" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated"><a class="ae mp" href="https://github.com/Bengemon825/TF_Object_Detection2020/blob/master/ModelTrainingOnColab.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> ipynb </strong> </a> <strong class="ka ir">文件—</strong><a class="ae mp" href="https://github.com/Bengemon825/TF_Object_Detection2020/blob/master/ModelTrainingOnColab.ipynb" rel="noopener ugc nofollow" target="_blank">https://github . com/benge mon 825/TF _ Object _ detection 2020/blob/master/modeltrainingoncollab . ipynb</a></p><p id="27ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，运行ipynb文件中给出的所有代码，并将生成的图形下载到object detection文件夹，并在新图形上命名。现在运行网络摄像头检测python文件并测试您的模型。</p><h1 id="06e8" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">7.TENSORBORAD(可选)</h1><p id="6331" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">TensorBoard提供了机器学习实验所需的可视化和工具:</p><ul class=""><li id="65d6" class="ok ol iq ka b kb kc kf kg kj om kn on kr oo kv op oq or os bi translated">跟踪和可视化损失和准确性等指标</li><li id="0d6c" class="ok ol iq ka b kb ot kf ou kj ov kn ow kr ox kv op oq or os bi translated">可视化模型图(操作和层)</li><li id="90ec" class="ok ol iq ka b kb ot kf ou kj ov kn ow kr ox kv op oq or os bi translated">查看权重、偏差或其他张量随时间变化的直方图</li><li id="da43" class="ok ol iq ka b kb ot kf ou kj ov kn ow kr ox kv op oq or os bi translated">将嵌入投影到低维空间</li><li id="b0a4" class="ok ol iq ka b kb ot kf ou kj ov kn ow kr ox kv op oq or os bi translated">显示图像、文本和音频数据</li><li id="93a7" class="ok ol iq ka b kb ot kf ou kj ov kn ow kr ox kv op oq or os bi translated">剖析张量流程序</li></ul><p id="e959" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在打开另一个anaconda cmd并在object_detection中运行</p><pre class="mq mr ms mt gt mu mo mv mw aw mx bi"><span id="3175" class="lu kx iq mo b gy my mz l na nb">tensorboard — logdir=training/</span></pre><p id="cb31" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它将提供到您的本地主机的链接，就像这样<a class="ae mp" href="http://localhost:6006/#scalars" rel="noopener ugc nofollow" target="_blank"> http://localhost:6006/# </a></p><figure class="mq mr ms mt gt jr gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/bcb7578f3c20b10bb13eba1e493a0534.png" data-original-src="https://miro.medium.com/v2/resize:fit:120/0*HI28zM-p0eeGKKCX"/></div></figure><figure class="mq mr ms mt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi nd"><img src="../Images/ec49d76ffa8eabe41cde6ef412062cbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2_CVp_6Jmvoaq-XL.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">作者截图(哈希尔，2020)</figcaption></figure><h1 id="3b1b" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">现在用更多的物体和更多的图像练习，快乐编码！！！</h1><p id="bbe5" class="pw-post-body-paragraph jy jz iq ka b kb mg kd ke kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ij bi translated">Imp —链接</p><ul class=""><li id="d4e5" class="ok ol iq ka b kb kc kf kg kj om kn on kr oo kv op oq or os bi translated"><a class="ae mp" href="https://github.com/tzutalin/labelImg" rel="noopener ugc nofollow" target="_blank">https://github.com/tzutalin/labelImg</a></li><li id="ba8b" class="ok ol iq ka b kb ot kf ou kj ov kn ow kr ox kv op oq or os bi translated"><a class="ae mp" href="https://github.com/datitran/raccoon_dataset" rel="noopener ugc nofollow" target="_blank">https://github.com/datitran/raccoon_dataset</a></li><li id="2838" class="ok ol iq ka b kb ot kf ou kj ov kn ow kr ox kv op oq or os bi translated"><a class="ae mp" href="https://chrome.google.com/webstore/detail/fatkun-batch-download-ima/nnjjahlikiabnchcpehcpkdeckfgnohf?hl=en" rel="noopener ugc nofollow" target="_blank">https://chrome . Google . com/web store/detail/fat Kun-batch-download-IMA/nnjjahlikiabnchcpehcpkdeckfgnohf？hl=en </a></li></ul></div></div>    
</body>
</html>