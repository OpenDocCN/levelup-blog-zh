<html>
<head>
<title>Localization in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Native中的本地化</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/incorporating-react-native-localization-in-react-native-eee822cdae93?source=collection_archive---------7-----------------------#2020-06-25">https://levelup.gitconnected.com/incorporating-react-native-localization-in-react-native-eee822cdae93?source=collection_archive---------7-----------------------#2020-06-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/8982dc08c714af68ec62576d04b1d8a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fuEuluy9QqLEfwESZjx_CQ.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">memegenerator.net</figcaption></figure><p id="477d" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我正在建立一个反应本地应用程序，我必须提供3种不同的语言，即英语，印地语和马拉地语的支持。我开始阅读各种提供本地化支持的React本地库。我选择了<a class="ae ld" href="https://github.com/stefalda/ReactNativeLocalization" rel="noopener ugc nofollow" target="_blank"> React原生本地化</a>。文档看起来简洁明了，并提供了支持。不再赘述，让我列出安装这个库的步骤，然后您将看到如何在您的项目中使用它。</p><h1 id="cfd6" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">装置</h1><ul class=""><li id="1552" class="mc md it kh b ki me km mf kq mg ku mh ky mi lc mj mk ml mm bi translated">在你的根目录下运行<code class="fe mn mo mp mq b">yarn add react-native-localization &amp;&amp; npx pod-install</code>。</li><li id="254b" class="mc md it kh b ki mr km ms kq mt ku mu ky mv lc mj mk ml mm bi translated">卸载以前安装的应用程序并运行新版本</li><li id="9fab" class="mc md it kh b ki mr km ms kq mt ku mu ky mv lc mj mk ml mm bi translated">运行<code class="fe mn mo mp mq b">yarn start --reset-cache</code></li><li id="ce7b" class="mc md it kh b ki mr km ms kq mt ku mu ky mv lc mj mk ml mm bi translated">瞧啊。</li></ul><h1 id="59e5" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">实例化</h1><p id="a3c8" class="pw-post-body-paragraph kf kg it kh b ki me kk kl km mf ko kp kq mw ks kt ku mx kw kx ky my la lb lc im bi translated">创建一个<code class="fe mn mo mp mq b">translations.js</code>文件，并将其添加到<code class="fe mn mo mp mq b">utils</code>文件夹中。将下面给出的代码片段添加到文件中</p><pre class="mz na nb nc gt nd mq ne nf aw ng bi"><span id="6f21" class="nh lf it mq b gy ni nj l nk nl">import React from 'react';<br/>import LocalizedStrings from 'react-native-localization';</span><span id="4c0d" class="nh lf it mq b gy nm nj l nk nl">export const translations = new LocalizedStrings({</span><span id="605f" class="nh lf it mq b gy nm nj l nk nl">  'en-US': {</span><span id="a0d8" class="nh lf it mq b gy nm nj l nk nl">    tagline: 'Appointments made easy',</span><span id="8ac9" class="nh lf it mq b gy nm nj l nk nl">  },</span><span id="7421" class="nh lf it mq b gy nm nj l nk nl">  'en-IN': {</span><span id="7841" class="nh lf it mq b gy nm nj l nk nl">    tagline: 'Appointments made easy',</span><span id="d851" class="nh lf it mq b gy nm nj l nk nl">  },</span><span id="4d21" class="nh lf it mq b gy nm nj l nk nl">  en: {</span><span id="d184" class="nh lf it mq b gy nm nj l nk nl">    tagline: 'Appointments made easy',</span><span id="0c7f" class="nh lf it mq b gy nm nj l nk nl">  },</span><span id="e367" class="nh lf it mq b gy nm nj l nk nl">  hi: {</span><span id="b47a" class="nh lf it mq b gy nm nj l nk nl">    tagline: 'नियुक्तियों को आसान बनाया',</span><span id="8a71" class="nh lf it mq b gy nm nj l nk nl">  },</span><span id="0a18" class="nh lf it mq b gy nm nj l nk nl">  mr: {</span><span id="2dd4" class="nh lf it mq b gy nm nj l nk nl">    tagline: 'नेमणुका सुलभ केल्या',</span><span id="6736" class="nh lf it mq b gy nm nj l nk nl">  },</span><span id="2e44" class="nh lf it mq b gy nm nj l nk nl">});</span><span id="c072" class="nh lf it mq b gy nm nj l nk nl">export const setLocale = (locale: DynamicObject) =&gt; {</span><span id="acbc" class="nh lf it mq b gy nm nj l nk nl">const prevTranslations = { ...translations.getContent() };</span><span id="648a" class="nh lf it mq b gy nm nj l nk nl">const newTranslations: DynamicObject = {};</span><span id="0c89" class="nh lf it mq b gy nm nj l nk nl">Object.keys(locale).forEach((langCode) =&gt; {</span><span id="5666" class="nh lf it mq b gy nm nj l nk nl">  newTranslations[langCode] = {</span><span id="466e" class="nh lf it mq b gy nm nj l nk nl">      ...(prevTranslations &amp;&amp; Object.keys(prevTranslations)</span><span id="3419" class="nh lf it mq b gy nm nj l nk nl">        ? prevTranslations[langCode]</span><span id="4334" class="nh lf it mq b gy nm nj l nk nl">        : {}),</span><span id="9ea4" class="nh lf it mq b gy nm nj l nk nl">      ...locale[langCode],</span><span id="7ef2" class="nh lf it mq b gy nm nj l nk nl">    };</span><span id="b48a" class="nh lf it mq b gy nm nj l nk nl">  });</span><span id="f55f" class="nh lf it mq b gy nm nj l nk nl">  translations.setContent(newTranslations);</span><span id="7d7d" class="nh lf it mq b gy nm nj l nk nl">};</span><span id="763b" class="nh lf it mq b gy nm nj l nk nl">const TranslationContext = React.createContext(translations);</span></pre><p id="bd96" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们传递我们将在站点中使用的带有文本字符串的区域设置，并创建一个<code class="fe mn mo mp mq b">Localization</code>类的实例，然后将其导出。正如您所观察到的,<strong class="kh iu">属性名称保持不变，但是每个地区的内容都不同。</strong>考虑一下，这是一个文件，我们在其中添加了要在整个站点使用的常用/重复文本字符串。您可以创建一个单独的<code class="fe mn mo mp mq b">locale.json</code>文件，为每个地区添加通用的文本字符串。</p><p id="9007" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们还导出了一个函数，帮助我们为各自的屏幕设置新的语言环境。</p><h1 id="b718" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">设置语言代码</h1><p id="2b3d" class="pw-post-body-paragraph kf kg it kh b ki me kk kl km mf ko kp kq mw ks kt ku mx kw kx ky my la lb lc im bi translated">在我们开始使用应用程序之前，我们必须为本地化库设置语言的语言代码，以便用我们选择的语言显示文本。让我们假设，我们想在应用程序启动之前设置它。将下面给出的代码添加到您的<code class="fe mn mo mp mq b">AppNavigation.js</code>文件中。</p><pre class="mz na nb nc gt nd mq ne nf aw ng bi"><span id="e2f7" class="nh lf it mq b gy ni nj l nk nl">import React from 'react';<br/>import { translations, TranslationContext } from '../utils/translations';</span><span id="dce7" class="nh lf it mq b gy nm nj l nk nl">const AppNavigation = () =&gt; {<br/>  const [isReady, setIsReady] = React.useState(false);</span><span id="0f5f" class="nh lf it mq b gy nm nj l nk nl">  React.useEffect(() =&gt; {</span><span id="23b1" class="nh lf it mq b gy nm nj l nk nl">    if (!isReady) {</span><span id="a463" class="nh lf it mq b gy nm nj l nk nl">      translations.setLanguage('hi'); // hi = hindi<br/>      setIsReady(true);</span><span id="43ad" class="nh lf it mq b gy nm nj l nk nl">    }</span><span id="9bbb" class="nh lf it mq b gy nm nj l nk nl">  }, [isReady]);</span><span id="a267" class="nh lf it mq b gy nm nj l nk nl">  if(!isReady) {<br/>    return null;<br/>  }</span><span id="4510" class="nh lf it mq b gy nm nj l nk nl">  return (<br/>    &lt;TranslationContext.Provider value={translations}&gt;</span><span id="d447" class="nh lf it mq b gy nm nj l nk nl">      &lt;NavigationContainer&gt;<br/>        &lt;Stack.Navigator&gt;<br/>          &lt;Stack.Screen name="SelectLanguage" component={SelectLanguage} /&gt;</span><span id="c8d6" class="nh lf it mq b gy nm nj l nk nl">        &lt;/Stack.Navigator&gt;</span><span id="60bb" class="nh lf it mq b gy nm nj l nk nl">      &lt;/NavigationContainer&gt;<br/>    &lt;TranslationContext.Provider value={}&gt;</span><span id="dbc8" class="nh lf it mq b gy nm nj l nk nl">  );</span><span id="710c" class="nh lf it mq b gy nm nj l nk nl">};</span></pre><p id="3442" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们使用库提供的<code class="fe mn mo mp mq b">setlanguage</code>方法设置语言的语言代码，重新渲染组件。为了使本地化库以所选语言呈现正确的文本，我们必须在设置语言代码后重新呈现。</p><h1 id="1883" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用</h1><p id="a66b" class="pw-post-body-paragraph kf kg it kh b ki me kk kl km mf ko kp kq mw ks kt ku mx kw kx ky my la lb lc im bi translated">假设我要渲染一个名为<code class="fe mn mo mp mq b">SelectLanguage</code>的屏幕。我将在<code class="fe mn mo mp mq b">screens</code>文件夹中创建<code class="fe mn mo mp mq b">Selectlanguage/Selectlanguage.js</code>和<code class="fe mn mo mp mq b">Selectlanguage/locale.json</code>。<code class="fe mn mo mp mq b">locale.json</code>将由显示在<code class="fe mn mo mp mq b">SelectLanguage</code>屏幕上的文本字符串的地区组成。举个例子，</p><pre class="mz na nb nc gt nd mq ne nf aw ng bi"><span id="d48a" class="nh lf it mq b gy ni nj l nk nl">{</span><span id="88bf" class="nh lf it mq b gy nm nj l nk nl">"en-US": {</span><span id="feb9" class="nh lf it mq b gy nm nj l nk nl">"selectLanguage": "Select your language"</span><span id="310e" class="nh lf it mq b gy nm nj l nk nl">},</span><span id="4f57" class="nh lf it mq b gy nm nj l nk nl">"en-IN": {</span><span id="a1d8" class="nh lf it mq b gy nm nj l nk nl">"selectLanguage": "Select your language"</span><span id="7335" class="nh lf it mq b gy nm nj l nk nl">},</span><span id="ec2e" class="nh lf it mq b gy nm nj l nk nl">"en": {</span><span id="97e7" class="nh lf it mq b gy nm nj l nk nl">"selectLanguage": "Select your language"</span><span id="ea71" class="nh lf it mq b gy nm nj l nk nl">},</span><span id="5a52" class="nh lf it mq b gy nm nj l nk nl">"hi": {</span><span id="35db" class="nh lf it mq b gy nm nj l nk nl">"selectLanguage": "अपनी भाषा का चयन करें"</span><span id="23b0" class="nh lf it mq b gy nm nj l nk nl">},</span><span id="30ef" class="nh lf it mq b gy nm nj l nk nl">"mr": {</span><span id="d501" class="nh lf it mq b gy nm nj l nk nl">"selectLanguage": "आपली भाषा निवडा"</span><span id="840d" class="nh lf it mq b gy nm nj l nk nl">}</span><span id="5d72" class="nh lf it mq b gy nm nj l nk nl">}</span></pre><p id="4385" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">然后，我们可以在我们的屏幕<code class="fe mn mo mp mq b">SelectLanguage.js</code>中使用它，就像这样:</p><pre class="mz na nb nc gt nd mq ne nf aw ng bi"><span id="73a7" class="nh lf it mq b gy ni nj l nk nl">// Screens/<!-- -->SelectLanguage/SelectLanguage.js<br/>import React, { useContext} from 'react';<br/>import { setLocale, TranslationContext } from '@utils/translations';</span><span id="257c" class="nh lf it mq b gy nm nj l nk nl">setLocale(locale);</span><span id="3c38" class="nh lf it mq b gy nm nj l nk nl">const SelectLanguageScreen = () =&gt; {<br/>  ....Business Logic....<br/>  const translations = useContext();</span><span id="8f93" class="nh lf it mq b gy nm nj l nk nl">return (<br/>    &lt;SelectLanguage translations={translations} /&gt;<br/>  );</span><span id="9a0e" class="nh lf it mq b gy nm nj l nk nl">}</span></pre><p id="5987" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><code class="fe mn mo mp mq b">translations</code>保存所有的文本字符串，你可以像这样使用它<code class="fe mn mo mp mq b">translations.selectLanguage</code>。该库将以您选择的语言呈现文本。<code class="fe mn mo mp mq b">translations</code>应该只在组件内部使用<strong class="kh iu">。</strong></p></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><p id="64d6" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">因此，总结一下我们的帖子，我们需要用地区和文本字符串实例化库(属性名称保持不变，但是每个地区的内容会发生变化)，设置语言代码，然后使用翻译。</p><p id="d396" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">就是这样！</p><p id="4086" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">以圣父、圣子和圣灵的名义，您的应用程序已经本地化。</p></div></div>    
</body>
</html>