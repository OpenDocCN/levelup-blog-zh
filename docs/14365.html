<html>
<head>
<title>Implementing Custom Deep Learning Model Into Flask App For Image Recognition</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将定制深度学习模型实现到Flask应用中以进行图像识别</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/implementing-custom-deep-learning-model-into-flask-app-for-image-recognition-3ccd4e451839?source=collection_archive---------16-----------------------#2022-11-20">https://levelup.gitconnected.com/implementing-custom-deep-learning-model-into-flask-app-for-image-recognition-3ccd4e451839?source=collection_archive---------16-----------------------#2022-11-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ddebd6031039ee657e0d3a874e3c6602.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*06FfoA06S5nFnS3L040GJw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd kc">来源:作者(</strong><a class="ae kd" href="https://geekpython.in/flask-app-for-image-recognition" rel="noopener ugc nofollow" target="_blank"><strong class="bd kc">GeekPython</strong></a><strong class="bd kc">)</strong></figcaption></figure><p id="a385" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我们将制作的web应用程序是关于预测手势语数字的图像。该模型在Kaggle上找到的名为“<a class="ae kd" href="https://www.kaggle.com/datasets/rayeed045/american-sign-language-digit-dataset" rel="noopener ugc nofollow" target="_blank">美国手语</a>”的数据集上进行训练。</p><p id="e457" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">本教程将重点介绍使用Flask web框架制作web应用程序，因此所有必要的后端流程，包括数据准备、数据预处理和训练模型，都已经完成。</p><p id="f14e" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我们将通过在客户端嵌入模型来实现我们的模型。</p><h1 id="9ca0" class="lc ld iq bd kc le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">概观</h1><p id="1f86" class="pw-post-body-paragraph ke kf iq kg b kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx md kz la lb ij bi translated">该web应用程序有一个漂亮的用户界面，其中我们有一个<strong class="kg ir">图像上传</strong>区域和一个<strong class="kg ir">图像预览</strong>部分，在这里我们可以看到上传图像的预览。所有这些都是使用<strong class="kg ir"> Bootstrap、CSS和JS </strong>制作的。web应用程序有一个负责处理预测和呈现预测页面的按钮，在这里我们将看到使用自定义模型预测图像所获得的结果。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/8df996ebf9a5422a33a384a8c37fbb7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AsjlGIzS5tknYaS4"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd kc">来源:作者(</strong><a class="ae kd" href="https://geekpython.in/flask-app-for-image-recognition" rel="noopener ugc nofollow" target="_blank"><strong class="bd kc">geek python</strong></a><strong class="bd kc">)</strong></figcaption></figure><p id="141e" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">点击<a class="ae kd" href="https://user-images.githubusercontent.com/72191416/201943098-c8f5fd8b-ec7d-4e5d-883d-8b69109b946f.mp4" rel="noopener ugc nofollow" target="_blank">这里</a>看一眼app。</p><p id="bd4b" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我们使用<strong class="kg ir"> Bootstrap </strong>构建我们的客户端界面并预览用户将要上传的图像，我们使用<strong class="kg ir">自定义CSS和JS </strong>，我们使用<strong class="kg ir"> Keras、NumPy和Pillow </strong>在后端识别和预测图像。</p><h1 id="436c" class="lc ld iq bd kc le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">属国</h1><p id="e718" class="pw-post-body-paragraph ke kf iq kg b kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx md kz la lb ij bi translated">我们需要以下依赖关系来开始这个项目。</p><h1 id="3b4d" class="lc ld iq bd kc le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">安装依赖项</h1><p id="e7d3" class="pw-post-body-paragraph ke kf iq kg b kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx md kz la lb ij bi translated">我们需要安装上面看到的依赖项。打开您的终端并运行以下命令，使用<strong class="kg ir"> <em class="mj"> pip </em> </strong>安装库。</p><pre class="mf mg mh mi gt mk ml mm bn mn mo bi"><span id="d9c5" class="mp ld iq ml b be mq mr l ms mt">pip install Flask tensorflow numpy Pillow</span></pre><p id="9a92" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">该命令将开始在您的基本Python环境中安装库。如果您的环境中已经安装了这些库，则该命令会将这些库升级到更新版本，或者提示一条消息，说明已经满足要求。</p><p id="1492" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">然而，建议您使用将库保存在<strong class="kg ir">隔离Python环境</strong>中的<strong class="kg ir">虚拟环境</strong>，避免相同依赖项的不同版本之间的冲突，这样您的其他项目就不会因为依赖项版本的变化而受到<strong class="kg ir">影响</strong>。</p><p id="662e" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="kg ir"> <em class="mj">要创建Python虚拟环境，请参见下面的详细指南。</em>T13】</strong></p><div class="mu mv gp gr mw mx"><a href="https://geekpython.in/python-virtual-environments-venv" rel="noopener  ugc nofollow" target="_blank"><div class="my ab fo"><div class="mz ab na cl cj nb"><h2 class="bd ir gy z fp nc fr fs nd fu fw ip bi translated">Python虚拟环境[VENV] -什么是虚拟环境，如何设置</h2><div class="ne l"><h3 class="bd b gy z fp nc fr fs nd fu fw dk translated">除了您的主要Python环境之外，您是否需要一个隔离的环境来管理不同的…</h3></div><div class="nf l"><p class="bd b dl z fp nc fr fs nd fu fw dk translated">geekpython.in</p></div></div><div class="ng l"><div class="nh l ni nj nk ng nl jw mx"/></div></div></a></div><p id="e4a7" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在项目目录中成功地设置了虚拟环境并安装了所需的依赖项之后，继续进行编码部分。</p><h1 id="6473" class="lc ld iq bd kc le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建flask服务器</h1><p id="6f99" class="pw-post-body-paragraph ke kf iq kg b kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx md kz la lb ij bi translated">我们将创建一个基本的Flask服务器，在本地主机上使用默认的<strong class="kg ir">端口号5000 </strong>启动我们的web应用程序。</p><p id="8628" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在项目目录的根文件夹中，创建一个名为<code class="fe nm nn no ml b">app.py</code>的文件，并添加以下代码来启动flask服务器。</p><pre class="mf mg mh mi gt mk ml mm bn mn mo bi"><span id="2dce" class="mp ld iq ml b be mq mr l ms mt">from flask import Flask<br/><br/>app = Flask(__name__)<br/><br/>@app.route('/')<br/>def hello_world():<br/>    return '&lt;h1&gt;Hello, World!&lt;/h1&gt;'</span></pre><p id="f9a5" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">要运行该应用程序，请打开您的终端并将目录更改为项目目录，或者打开与IDE  (PyCharm)或<strong class="kg ir">代码编辑器</strong> (VS Code)集成的<strong class="kg ir">终端，并执行以下命令。</strong></p><pre class="mf mg mh mi gt mk ml mm bn mn mo bi"><span id="725a" class="mp ld iq ml b be mq mr l ms mt">&gt;flask --app app.py run</span></pre><p id="f59f" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">了解如何从终端运行flask应用程序。以下指南将帮助您了解不同标志的 <code class="fe nm nn no ml b"><em class="mj">flask run</em></code> <em class="mj">命令的用法。</em></p><div class="mu mv gp gr mw mx"><a href="https://geekpython.in/run-flask-app-from-the-command-line-in-windows" rel="noopener  ugc nofollow" target="_blank"><div class="my ab fo"><div class="mz ab na cl cj nb"><h2 class="bd ir gy z fp nc fr fs nd fu fw ip bi translated">如何在Windows中从命令行运行Flask App</h2><div class="ne l"><h3 class="bd b gy z fp nc fr fs nd fu fw dk translated">Flask是一个纯粹用Python编写的微型web框架，它允许我们构建web应用程序。烧瓶是…</h3></div><div class="nf l"><p class="bd b dl z fp nc fr fs nd fu fw dk translated">geekpython.in</p></div></div><div class="ng l"><div class="np l ni nj nk ng nl jw mx"/></div></div></a></div><p id="5f4e" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这将在端口号为<strong class="kg ir"> 5000 </strong>的<strong class="kg ir"> localhost </strong>上启动我们的开发服务器，我们可以访问网址为<code class="fe nm nn no ml b"><a class="ae kd" href="http://127.0.0.1:5000." rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:5000</a></code> <a class="ae kd" href="http://127.0.0.1:5000." rel="noopener ugc nofollow" target="_blank">的web app。</a></p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nq"><img src="../Images/5128a2eab0e89dc0535097a5c6559e81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fPpIp8qVBBUuRsJP"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">烧瓶应用预览</figcaption></figure><p id="72cc" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我们的flask应用程序已经准备好了，我们将开始把我们的应用程序构建成一个好的web应用程序。但是首先，我们必须编写我们的后端。</p><h1 id="65da" class="lc ld iq bd kc le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">后端编码</h1><p id="0616" class="pw-post-body-paragraph ke kf iq kg b kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx md kz la lb ij bi translated">在编写用户界面之前，我们需要创建<strong class="kg ir">函数</strong>，它将处理上传图像的<strong class="kg ir">预处理和对上传图像的预测</strong>。</p><p id="499c" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">创建一个名为<code class="fe nm nn no ml b">model.py</code>的Python文件，我们处理图像预处理和预测的所有函数都放在这个文件中。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="c4f1" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">首先，我们导入了将在代码中进一步使用的库。</p><ul class=""><li id="b6dc" class="nt nu iq kg b kh ki kl km kp nv kt nw kx nx lb ny nz oa ob bi translated"><strong class="kg ir">来自<code class="fe nm nn no ml b">keras.model</code>的load_model </strong>将用于加载模型。</li><li id="efea" class="nt nu iq kg b kh oc kl od kp oe kt of kx og lb ny nz oa ob bi translated"><strong class="kg ir">来自<code class="fe nm nn no ml b">keras.utils</code>的img_to_array </strong>将用于将图像转换成数组。</li><li id="9776" class="nt nu iq kg b kh oc kl od kp oe kt of kx og lb ny nz oa ob bi translated">numpy用于将图像转换成一个数组，但是我们将在预测函数中使用它。</li><li id="496a" class="nt nu iq kg b kh oc kl od kp oe kt of kx og lb ny nz oa ob bi translated">来自<strong class="kg ir"> PIL </strong> (Python图像库)的<strong class="kg ir">图像</strong>将用于加载图像。</li></ul><p id="395b" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在下一节中，我们使用<code class="fe nm nn no ml b">load_model</code>函数加载我们的模型，在其中指定我们的训练模型的路径，并将其存储在名为<code class="fe nm nn no ml b">model</code>的变量中。</p><p id="582f" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">然后，我们定义了预处理图像的函数，它采用图像的<strong class="kg ir">路径</strong>，然后我们使用<code class="fe nm nn no ml b">Image.open</code>函数加载图像。然后，我们将加载的图像调整为224 x 224的尺寸，因为我们使用迁移学习技术来训练我们的模型。<strong class="kg ir">我们用于迁移学习的</strong><a class="ae kd" href="https://keras.io/api/applications/mobilenet/" rel="noopener ugc nofollow" target="_blank"><strong class="kg ir">MobileNet</strong></a><strong class="kg ir">模型是用224 x 224尺寸的图像</strong>进行预训练的。然后，我们创建了调整过大小的图像的<strong class="kg ir">数组</strong>，通过将其除以<strong class="kg ir"> 255.0 </strong>，我们将图像像素范围从<strong class="kg ir"> 0转换为1 </strong>，然后将其整形为所需的形状并返回。</p><p id="4c02" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">最后，我们建立了一个函数来预测预处理图像的结果。</p><h1 id="4917" class="lc ld iq bd kc le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">前端编码</h1><p id="dd0d" class="pw-post-body-paragraph ke kf iq kg b kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx md kz la lb ij bi translated">后端部分完成。现在我们将编写web应用程序的前端部分。在<code class="fe nm nn no ml b">app.py</code>文件中，添加以下代码。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="103b" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">最初，我们导入了所需的库和函数来帮助我们在这段代码中前进。</p><ul class=""><li id="89e9" class="nt nu iq kg b kh ki kl km kp nv kt nw kx nx lb ny nz oa ob bi translated"><strong class="kg ir">烧瓶</strong>将用于创建或服务我们的应用程序。</li><li id="c228" class="nt nu iq kg b kh oc kl od kp oe kt of kx og lb ny nz oa ob bi translated"><strong class="kg ir"> render_template </strong>将用于渲染我们的HTML文件。</li><li id="2bed" class="nt nu iq kg b kh oc kl od kp oe kt of kx og lb ny nz oa ob bi translated"><strong class="kg ir">请求</strong>在我们的应用程序前端访问用户上传的图像。</li></ul><p id="afc6" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><code class="fe nm nn no ml b">preprocess_img</code>和<code class="fe nm nn no ml b">predict_result</code>是我们在<code class="fe nm nn no ml b">model.py</code>文件中创建的函数。</p><p id="d397" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">之后，我们创建了home route，在这里我们用path ( <code class="fe nm nn no ml b">/</code>)和函数<code class="fe nm nn no ml b">main</code>定义了decorator <code class="fe nm nn no ml b">@app.route("/")</code>来呈现HTML模板<code class="fe nm nn no ml b">index.html</code>。</p><p id="d9df" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="kg ir">index.html</strong>文件包括web应用程序的用户界面，它有一个上传图像的表单、一个图像预览部分和一个提交按钮。</p><p id="329b" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在flask应用程序中添加HTML文件。在目录的根文件夹中创建一个名为<code class="fe nm nn no ml b">templates</code>的文件夹，然后创建名为<code class="fe nm nn no ml b">layout.html</code>和<code class="fe nm nn no ml b">index.html</code>的文件。</p><p id="2504" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="kg ir"><em class="mj">layout.html</em></strong></p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="b67a" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">layout.html文件包含HTML样板文件，我们在其中包含了定制的CSS和JS文件。</p><p id="4f9d" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="kg ir"><em class="mj">index.html</em></strong></p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="d3a2" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在图像上传部分，我们添加了将处理<strong class="kg ir">图像上传、预处理和预测</strong>的<strong class="kg ir"> URL </strong>。此外，我们添加了<code class="fe nm nn no ml b">method='post'</code>来处理<strong class="kg ir"> POST </strong>请求。我们将在本教程之前定义<code class="fe nm nn no ml b">predict_image_file</code>的逻辑。</p><p id="9b90" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">现在，添加自定义CSS和JS文件，这些文件将添加样式和功能，以便用户预览上传的图像。</p><p id="31b0" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在项目目录的根文件夹中创建一个名为<code class="fe nm nn no ml b">static</code>的文件夹，然后在文件夹中创建子文件夹<code class="fe nm nn no ml b">css</code>和<code class="fe nm nn no ml b">js</code>，然后分别添加<code class="fe nm nn no ml b">custom.css</code>和<code class="fe nm nn no ml b">image_upload.js</code>文件。</p><p id="f67f" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="kg ir">T33】custom . CSST35】</strong></p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="a361" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这个<strong class="kg ir"> CSS </strong>文件为我们的web应用程序的用户界面提供了额外的样式。</p><p id="60c0" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="kg ir">T39】image _ upload . jsT41】</strong></p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="12c2" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这个<strong class="kg ir"> JS </strong>文件显示了上传到我们web应用程序上的图片预览。</p><p id="918a" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><em class="mj">制作我们web app的UI的参考，这里是取自</em><a class="ae kd" href="https://jsfiddle.net/bootstrapious/8w7a50n2" rel="noopener ugc nofollow" target="_blank"><em class="mj"/></a><em class="mj">。</em></p><p id="8b3c" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在添加了所有的HTML、CSS和JS文件之后，有趣的部分来了。</p><p id="e92d" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">然后我们定义了另一条路径，它包含了一个<strong class="kg ir"> POST </strong>请求的代码，图像的<strong class="kg ir">预处理</strong>，然后是<strong class="kg ir">预测</strong>。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="a978" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在<code class="fe nm nn no ml b">app.py</code>文件的这一部分，我们使用装饰器<code class="fe nm nn no ml b">@app.route('/prediction', methods=['POST'])</code>创建了预测路由，其中我们指定了路径<code class="fe nm nn no ml b">/prediction</code>并将方法设置为<code class="fe nm nn no ml b">POST</code>以处理<strong class="kg ir"> post请求</strong>。</p><p id="a905" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">然后定义函数<code class="fe nm nn no ml b">predict_image_file</code>，其中代码获取用户上传的图像的<strong class="kg ir">图像流</strong>，并且<strong class="kg ir">使用来自<code class="fe nm nn no ml b">model.py</code>文件的函数<code class="fe nm nn no ml b">preprocess_img</code>执行预处理</strong>，然后<strong class="kg ir">使用<code class="fe nm nn no ml b">predict_result</code>函数预测结果</strong>，然后最终呈现我们可以看到结果的<code class="fe nm nn no ml b">result.html</code>页面。</p><p id="d31d" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">为了避免任何错误，我们将代码包装在<code class="fe nm nn no ml b">try-except</code>块中，其中如果用户上传了一个无法处理的文件，那么代码将在前端显示错误。</p><p id="1acb" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">要添加结果页面，在templates文件夹中创建一个名为<code class="fe nm nn no ml b">result.html</code>的文件，并添加以下HTML。</p><p id="1b04" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="kg ir"><em class="mj">result.html</em></strong></p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="924c" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">如果用户上传的图像被成功处理，该页面负责显示预测。否则，将显示错误消息。</p><p id="281a" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="kg ir"> <em class="mj">获取这个app的源代码👇</em> </strong></p><div class="mu mv gp gr mw mx"><a href="https://github.com/Sachin-crypto/Flask_Image_Recognition" rel="noopener  ugc nofollow" target="_blank"><div class="my ab fo"><div class="mz ab na cl cj nb"><h2 class="bd ir gy z fp nc fr fs nd fu fw ip bi translated">GitHub-Sachin-crypto/Flask _ Image _ Recognition:这个Flask webapp是关于预测牌型的…</h2><div class="ne l"><h3 class="bd b gy z fp nc fr fs nd fu fw dk translated">这个Flask webapp是基于深度学习模型预测手势数字图像的，该模型使用…</h3></div><div class="nf l"><p class="bd b dl z fp nc fr fs nd fu fw dk translated">github.com</p></div></div><div class="ng l"><div class="oh l ni nj nk ng nl jw mx"/></div></div></a></div><h1 id="9e67" class="lc ld iq bd kc le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="a856" class="pw-post-body-paragraph ke kf iq kg b kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx md kz la lb ij bi translated">在本教程中，我们学习了基于深度学习模型创建用于图像识别的Flask应用程序。</p><p id="4f60" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我们在制作应用程序时学到了一些要点:</p><ul class=""><li id="abce" class="nt nu iq kg b kh ki kl km kp nv kt nw kx nx lb ny nz oa ob bi translated"><strong class="kg ir">在app中实现深度学习模型</strong></li><li id="5606" class="nt nu iq kg b kh oc kl od kp oe kt of kx og lb ny nz oa ob bi translated"><strong class="kg ir">创建烧瓶应用程序</strong></li><li id="8073" class="nt nu iq kg b kh oc kl od kp oe kt of kx og lb ny nz oa ob bi translated"><strong class="kg ir">使用自定义模型预测图像</strong></li><li id="a135" class="nt nu iq kg b kh oc kl od kp oe kt of kx og lb ny nz oa ob bi translated"><strong class="kg ir">图像预处理</strong></li></ul><p id="97a2" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">前往我的<a class="ae kd" href="https://github.com/Sachin-crypto/Flask_Image_Recognition" rel="noopener ugc nofollow" target="_blank"> GitHub </a>获取<strong class="kg ir">源代码</strong>开始这个项目。</p></div><div class="ab cl oi oj hu ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ij ik il im in"><p id="1204" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">🏆<strong class="kg ir">如果你喜欢这篇文章，你可能会喜欢的其他文章</strong></p><p id="af8e" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="kg ir"> ✅ </strong> <a class="ae kd" href="https://medium.com/@geekpython/python-web-app-under-100-lines-of-code-using-streamlit-f862d2f1693b" rel="noopener"> <strong class="kg ir">搭建一个Streamlit app，对新冠肺炎数据</strong> </a> <strong class="kg ir">进行可视化分析。</strong></p><p id="e385" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="kg ir"> ✅ </strong> <a class="ae kd" href="https://medium.com/@geekpython/how-to-deploy-streamlit-app-to-heroku-server-a8c4a657808d" rel="noopener"> <strong class="kg ir">用简单的步骤在Heroku服务器上部署你的Streamlit应用</strong> </a> <strong class="kg ir">。</strong></p><p id="c38b" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="kg ir"> ✅ </strong> <a class="ae kd" href="https://medium.com/@geekpython/contact-form-for-your-blog-get-emails-save-in-db-dynamically-8faaa5d8c5b6" rel="noopener"> <strong class="kg ir">为你的博客创建一个功能齐全的联系表单，每当用户发送消息时，你都会收到一封电子邮件，并将被动态保存在数据库中</strong> </a> <strong class="kg ir">。</strong></p><p id="e1a8" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="kg ir"> ✅ </strong> <a class="ae kd" href="https://medium.com/@geekpython/asyncio-how-to-use-async-await-in-python-ef4372a8c2c5" rel="noopener"> <strong class="kg ir">如何在Python中使用async/await</strong></a><strong class="kg ir">。</strong></p><p id="6423" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="kg ir"> ✅ </strong> <a class="ae kd" href="https://medium.com/@geekpython/using-exec-to-execute-dynamically-generated-code-in-python-758ae20b3a7c" rel="noopener"> <strong class="kg ir">如何执行Python中动态生成的代码</strong> </a> <strong class="kg ir">。</strong></p><p id="c6c9" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="kg ir">暂时就这些了</strong></p><p id="7c34" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="kg ir">保住Coding✌✌ </strong></p></div><div class="ab cl oi oj hu ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ij ik il im in"><p id="a7e0" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><em class="mj">原发布于</em><a class="ae kd" href="https://geekpython.in/flask-app-for-image-recognition" rel="noopener ugc nofollow" target="_blank"><em class="mj">https://geek python . in</em></a><em class="mj">。</em></p></div><div class="ab cl oi oj hu ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ij ik il im in"><h1 id="b82d" class="lc ld iq bd kc le op lg lh li oq lk ll lm or lo lp lq os ls lt lu ot lw lx ly bi translated">分级编码</h1><p id="b83b" class="pw-post-body-paragraph ke kf iq kg b kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx md kz la lb ij bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="da8f" class="nt nu iq kg b kh ki kl km kp nv kt nw kx nx lb ny nz oa ob bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="3dcf" class="nt nu iq kg b kh oc kl od kp oe kt of kx og lb ny nz oa ob bi translated">📰查看<a class="ae kd" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="4d10" class="nt nu iq kg b kh oc kl od kp oe kt of kx og lb ny nz oa ob bi translated">🔔关注我们:<a class="ae kd" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae kd" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae kd" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="0659" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">🚀👉<a class="ae kd" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kg ir">加入升级人才集体，找到一份惊艳的工作</strong> </a></p></div></div>    
</body>
</html>