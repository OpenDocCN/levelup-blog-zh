<html>
<head>
<title>How To Build a Color Picker with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ä½¿ç”¨Reactæ„å»ºé¢œè‰²é€‰æ‹©å™¨</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/how-to-build-a-color-picker-5fbacc54f16c?source=collection_archive---------2-----------------------#2019-08-13">https://levelup.gitconnected.com/how-to-build-a-color-picker-5fbacc54f16c?source=collection_archive---------2-----------------------#2019-08-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="91f2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å½“æˆ‘å¼€å§‹å­¦ä¹ JavaScript T4æ—¶ï¼Œåˆ¶ä½œä¸€ä¸ªé¢œè‰²é€‰æ‹©å™¨æ˜¯æˆ‘å°è¯•çš„ç¬¬ä¸€ä¸ªé¡¹ç›®ã€‚å¦‚æœæˆ‘æ²¡è®°é”™çš„è¯ï¼Œä»–ä»¬å®Œå…¨ä»¤äººåŒæ¶ã€‚æœ€è¿‘ï¼Œæˆ‘çš„æœ€æ–°é¡¹ç›®<a class="ae kp" href="https://benjaminadk.netlify.com/posts/how-to-build-a-color-picker/" rel="noopener ugc nofollow" target="_blank">è°ƒè‰²æ¿ä¼™ä¼´</a>éœ€è¦ä¸€ä¸ªç®€å•çš„é¢œè‰²é€‰æ‹©å™¨ã€‚æœ¬æ–‡å°†é€æ­¥ä»‹ç»è¿™ä¸€è¿‡ç¨‹ã€‚</p><p id="dcb2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æœ¬æ–‡çš„ç›®æ ‡è¯»è€…å¯èƒ½æœ‰ä¸€äº›ä½¿ç”¨<em class="ko"> React </em>çš„ç»éªŒï¼Œä½†ç»ä¸éœ€è¦ä¸“ä¸šèƒ½åŠ›ã€‚æˆ‘å°†å°½åŠ›ä¿æŒä¸€ä¸ªç¼“æ…¢çš„è¿›åº¦ï¼Œå¹¶è§£é‡Šç»„ä»¶ç»„åˆèƒŒåçš„æ€æƒ³ä»¥åŠå„ä¸ªéƒ¨åˆ†æ˜¯å¦‚ä½•é…åˆçš„ã€‚</p></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><p id="f0fc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å¦‚æœæ‚¨æœ€ç»ˆå–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·æŸ¥çœ‹ç»­é›†<a class="ae kp" href="https://benjaminadk.netlify.com/posts/using-local-storage-to-persist-data/" rel="noopener ugc nofollow" target="_blank">https://Benjamin Brooke . me/posts/using-local-storage-to-persist-data/</a>ï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­æ·»åŠ äº†ä½¿ç”¨æœ¬åœ°å­˜å‚¨å°†é¢œè‰²ä¿å­˜åˆ°è°ƒè‰²æ¿çš„åŠŸèƒ½ã€‚</p></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><figure class="kx ky kz la gt lb"><div class="bz fp l di"><div class="lc ld l"/></div></figure><h1 id="ffb1" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">å…¥é—¨æŒ‡å—</h1><p id="b58c" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">é¦–å…ˆç”¨<em class="ko"> React </em>æ¨¡æ¿åˆ›å»ºä¸€ä¸ªæ–°çš„<a class="ae kp" href="https://codesandbox.io/" rel="noopener ugc nofollow" target="_blank">ä»£ç æ²™ç®±</a>ã€‚è¿™æ˜¯ä¸€ä¸ªå…è´¹çš„æœåŠ¡ï¼Œæœ‰ä¸€ä¸ªç°å®çš„æ–‡ä»¶ç»“æ„ï¼Œèƒ½å¤Ÿä»¥ä¸€ç§è¶…çº§ç®€å•çš„æ–¹å¼æ·»åŠ ä¾èµ–å…³ç³»ã€‚æœ¬æ•™ç¨‹å°†ä½¿ç”¨<a class="ae kp" href="https://www.styled-components.com" rel="noopener ugc nofollow" target="_blank">æ ·å¼çš„ç»„ä»¶</a>ï¼Œå› æ­¤å®‰è£…å®ƒå¹¶åˆ é™¤<code class="fe mh mi mj mk b">.css</code>æ–‡ä»¶åŠå…¶<code class="fe mh mi mj mk b">import</code>è¯­å¥ã€‚å¦‚æœä½ ä¸ç†Ÿæ‚‰<em class="ko">é£æ ¼çš„ç»„ä»¶</em>ä¸ç”¨å®³æ€•ï¼Œ90%éƒ½åªæ˜¯<em class="ko"> CSS </em>ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæ‰€æœ‰æ–‡ä»¶éƒ½å°†æ”¾åœ¨<code class="fe mh mi mj mk b">src</code>ç›®å½•ä¸­ã€‚è¿™é‡Œæ˜¯ä¸€äº›åŸºæœ¬çš„å¯åŠ¨ä»£ç ã€‚</p><h2 id="2bdb" class="ml lf it bd lg mm mn dn lk mo mp dp lo kb mq mr ls kf ms mt lw kj mu mv ma mw bi translated">ç´¢å¼•. js</h2><pre class="kx ky kz la gt mx mk my mz aw na bi"><span id="9835" class="ml lf it mk b gy nb nc l nd ne">import React from 'react'<br/>import ReactDOM from 'react-dom'<br/>import styled from 'styled-components'<br/>import Picker from './Picker'<br/>import { GlobalStyle } from './GlobalStyle'<br/><br/>const AppWrapper = styled.div`<br/>  height: 100vh;<br/>  display: grid;<br/>  align-items: center;<br/>  justify-items: center;<br/>`<br/><br/>function App() {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;GlobalStyle /&gt;<br/>      &lt;AppWrapper&gt;<br/>        &lt;Picker /&gt;<br/>      &lt;/AppWrapper&gt;<br/>    &lt;/&gt;<br/>  )<br/>}<br/><br/>const rootElement = document.getElementById('root')<br/>ReactDOM.render(&lt;App /&gt;, rootElement)</span></pre><h2 id="908e" class="ml lf it bd lg mm mn dn lk mo mp dp lo kb mq mr ls kf ms mt lw kj mu mv ma mw bi translated">GlobalStyle.js</h2><pre class="kx ky kz la gt mx mk my mz aw na bi"><span id="4fb4" class="ml lf it mk b gy nb nc l nd ne">import React from 'react'<br/>import { createGlobalStyle } from 'styled-components'<br/><br/>export const GlobalStyle = createGlobalStyle`<br/>html {<br/>  box-sizing: border-box;<br/>  font-size: 10px;<br/>}<br/>body {<br/>  font-family: monospace;<br/>  font-weight: bold;<br/>  margin: 0;<br/>}<br/>*, *:before, *:after {<br/>  box-sizing: inherit;<br/>}<br/>`</span></pre><h2 id="8df6" class="ml lf it bd lg mm mn dn lk mo mp dp lo kb mq mr ls kf ms mt lw kj mu mv ma mw bi translated">Picker.js</h2><pre class="kx ky kz la gt mx mk my mz aw na bi"><span id="25a2" class="ml lf it mk b gy nb nc l nd ne">import React, { useState, useRef, useEffect } from 'react'<br/>import styled from 'styled-components'<br/><br/>export const PickerWrapper = styled.div`<br/>  .swatch {<br/>    width: 100px;<br/>    height: 50px;<br/>    background: ${p =&gt; p.color};<br/>  }<br/>`<br/><br/>const Picker = () =&gt; {<br/>  const [color, setColor] = useState('#000000')<br/><br/>  return (<br/>    &lt;&gt;<br/>      &lt;PickerWrapper color={color}&gt;<br/>        &lt;div className='swatch' /&gt;<br/>      &lt;/PickerWrapper&gt;<br/>    &lt;/&gt;<br/>  )<br/>}<br/><br/>export default Picker</span></pre><p id="b4c8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">è¿™ä¸ªæ ·æ¿æ–‡ä»¶åº”è¯¥ä¼šåœ¨å±å¹•ä¸­é—´äº§ç”Ÿä¸€ä¸ªé»‘è‰²çš„çŸ©å½¢ã€‚ç›®æ ‡æ˜¯è®©é¢œè‰²é€‰æ‹©å™¨åœ¨è¿™ä¸ªçŸ©å½¢è¢«ç‚¹å‡»æ—¶å‡ºç°ï¼Œå¹¶æ ¹æ®ç”¨æˆ·è¾“å…¥åŠ¨æ€è®¾ç½®å®ƒçš„èƒŒæ™¯é¢œè‰²ã€‚é¦–å…ˆéœ€è¦çš„æ˜¯æŸç§å®¹å™¨æ¥å®¹çº³é¢œè‰²é€‰æ‹©å™¨ï¼Œå®ƒçš„è¡Œä¸ºå°±åƒä¸€ä¸ª<em class="ko">æ¨¡æ€</em>ï¼Œå½“çŸ©å½¢è¢«ç‚¹å‡»æ—¶æ‰“å¼€ï¼Œå¹¶ä¸”èƒ½å¤Ÿé€šè¿‡æŒ‰é’®æˆ–ç‚¹å‡»<em class="ko">é€‰æ‹©å™¨</em>å¤–çš„å±å¹•æ¥å…³é—­ã€‚</p></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="ca62" class="le lf it bd lg lh nf lj lk ll ng ln lo lp nh lr ls lt ni lv lw lx nj lz ma mb bi translated">æƒ…æ€çš„</h1><h2 id="3e7d" class="ml lf it bd lg mm mn dn lk mo mp dp lo kb mq mr ls kf ms mt lw kj mu mv ma mw bi translated">Modal.js</h2><pre class="kx ky kz la gt mx mk my mz aw na bi"><span id="0785" class="ml lf it mk b gy nb nc l nd ne">import React from 'react'<br/>import styled, { keyframes } from 'styled-components'<br/><br/>const zoom = keyframes`<br/>  from {<br/>    transform: scale(0) translate(-50%, -50%);<br/>  }<br/>  to {<br/>    transform: scale(1) translate(-50%, -50%);<br/>  }<br/>`<br/><br/>export const Backdrop = styled.div`<br/>  position: fixed;<br/>  z-index: 1;<br/>  top: 0;<br/>  bottom: 0;<br/>  left: 0;<br/>  right: 0;<br/>  display: ${p =&gt; (p.show ? 'block' : 'none')};<br/>  background: rgba(0, 0, 0, 0.3);<br/>`<br/><br/>export const ModalWrapper = styled.div`<br/>  position: fixed;<br/>  top: 50%;<br/>  left: 50%;<br/>  z-index: 2;<br/>  transform: translate(-50%, -50%);<br/>  transform-origin: left top;<br/>  max-width: 100%;<br/>  height: auto;<br/>  display: ${p =&gt; (p.show ? 'block' : 'none')};<br/>  animation: ${zoom} 0.2s;<br/>`<br/>const Modal = ({ modal, show, onClose, children }) =&gt; {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;Backdrop show={show} onClick={onClose} /&gt;<br/>      &lt;ModalWrapper ref={modal} show={show}&gt;<br/>        {children}<br/>      &lt;/ModalWrapper&gt;<br/>    &lt;/&gt;<br/>  )<br/>}<br/><br/>export default Modal</span></pre><p id="1bf1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æ¨¡æ€ç»„ä»¶é€šè¿‡å°†èƒŒæ™¯å’Œå†…éƒ¨å®¹å™¨åˆ†å±‚æ¥å·¥ä½œã€‚ä½¿ç”¨<code class="fe mh mi mj mk b">z-index</code>å±æ€§å°†èƒŒæ™¯å›ºå®šåœ¨æ¨¡æ€çš„åé¢ã€‚è¿™å…è®¸èƒŒæ™¯ç›‘å¬ç‚¹å‡»å¹¶å…³é—­æ•´ä¸ªç»„ä»¶ï¼Œè€Œå‰æ™¯å¯ä»¥è¢«ç‚¹å‡»è€Œä¸è§¦å‘å…³é—­ã€‚çœ‹èµ·æ¥æ»‘ç¨½çš„æ‹¬å·<code class="fe mh mi mj mk b">&lt;&gt;&lt;/&gt;</code>æ˜¯<em class="ko">ååº”çš„ç®€å†™ã€‚ç‰‡æ®µåŒ–</em>å¹¶å…è®¸ç»„ä»¶è¿”å›å…„å¼Ÿå…ƒç´ ã€‚<code class="fe mh mi mj mk b">show</code>é“å…·æ˜¯ç”±<em class="ko">æ‹¾å–å™¨</em>ä¼ ä¸‹æ¥çš„<code class="fe mh mi mj mk b">Boolean</code>æ¥æ§åˆ¶<code class="fe mh mi mj mk b">display</code>é£æ ¼ã€‚å½“<code class="fe mh mi mj mk b">show</code>ä¸º<code class="fe mh mi mj mk b">false</code>æ—¶ï¼Œé£æ ¼è®¾ç½®ä¸º<code class="fe mh mi mj mk b">display: none</code>ã€‚<em class="ko">æ ·å¼ç»„ä»¶</em>è¿˜å¸¦æœ‰ä¸€ä¸ª<code class="fe mh mi mj mk b">keyframes</code>è¾…åŠ©å‡½æ•°ï¼Œå½“<em class="ko">æ‹¾å–å™¨</em>å‡ºç°æ—¶ï¼Œè¯¥å‡½æ•°ä¸<code class="fe mh mi mj mk b">transform: scale()</code>ä¸€èµ·ä½¿ç”¨ä»¥ç»™å‡ºç¼©æ”¾æ•ˆæœã€‚<code class="fe mh mi mj mk b">children</code> propåœ¨<em class="ko"> React </em>ä¸­çš„æ‰€æœ‰ç»„ä»¶ä¸Šéƒ½å¯ç”¨ï¼Œå¹¶å…è®¸<em class="ko">æ¨¡æ€</em>æˆä¸ºå¯é‡ç”¨çš„åŒ…è£…å™¨ç»„ä»¶ã€‚æœ€åï¼Œ<code class="fe mh mi mj mk b">modal</code>æ”¯æŸ±æ˜¯ä¸€ä¸ª<code class="fe mh mi mj mk b">ref</code>,ç¨åå°†åœ¨å®šä½è®¡ç®—ä¸­ä½¿ç”¨ã€‚</p><p id="9ce6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">é¡ºä¾¿æä¸€ä¸‹ï¼Œè¿™ä¸ªåŸºæœ¬çš„<em class="ko">æ¨¡å¼</em>å¯ä»¥ç”¨äºä»»ä½•ä¸œè¥¿â€”â€”æ³¨å†Œã€è¡¨å•ã€å›¾åƒã€è§†é¢‘ç­‰ç­‰ã€‚è¯€çªæ˜¯50%çš„å®šä½å’Œè½¬æ¢ï¼Œè‡ªåŠ¨å°†å†…å®¹å±…ä¸­ã€‚è°ƒæ•´åŠ¨ç”»é£æ ¼ï¼Œå˜æ¢åŸç‚¹å’Œå®½åº¦ä»¥é€‚åº”ç‰¹å®šçš„ä½¿ç”¨æƒ…å†µã€‚æ­¤å¤–ï¼Œå°†<code class="fe mh mi mj mk b">show</code>çš„å€¼è®¾ç½®ä¸ºtrueä»¥åŠ å¿«å¼€å‘é€Ÿåº¦ã€‚è¿™å°†æ¶ˆé™¤æ¯æ¬¡æ›´æ–°æ—¶ç‚¹å‡»æ ·æœ¬çš„çƒ¦äººæ­¥éª¤ã€‚</p><h2 id="7087" class="ml lf it bd lg mm mn dn lk mo mp dp lo kb mq mr ls kf ms mt lw kj mu mv ma mw bi translated">Picker.js</h2><pre class="kx ky kz la gt mx mk my mz aw na bi"><span id="189e" class="ml lf it mk b gy nb nc l nd ne">const Picker = () =&gt; {<br/>  const [show, setShow] = useState(false)<br/>  const [color, setColor] = useState("#000000")<br/><br/>  const modal = useRef(null)<br/><br/>  return (<br/>    &lt;&gt;<br/>      &lt;PickerWrapper color={color}&gt;<br/>        &lt;div className="swatch" onClick={() =&gt; setShow(true)} /&gt;<br/>        &lt;Modal modal={modal} show={show} onClose={() =&gt; setShow(false)}&gt;<br/>          &lt;div&gt;ğŸ˜&lt;/div&gt;<br/>        &lt;/Modal&gt;<br/>      &lt;/PickerWrapper&gt;<br/>    &lt;/&gt;<br/>  )<br/>}</span></pre><p id="0310" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ç¡®ä¿<code class="fe mh mi mj mk b">import</code>æ¨¡æ€ç»„ä»¶è¿›å…¥æ‹¾å–å™¨ã€‚ç”¨<code class="fe mh mi mj mk b">useState</code>åˆ›å»º<code class="fe mh mi mj mk b">show</code>å’Œ<code class="fe mh mi mj mk b">setShow</code>ï¼Œç”¨<code class="fe mh mi mj mk b">useRef</code>åˆ›å»º<code class="fe mh mi mj mk b">modal</code>ã€‚ç°åœ¨å•å‡»çŸ©å½¢å°†æ‰“å¼€æ¨¡å¼å’ŒğŸ˜åº”è¯¥ä¼šå‡ºç°ã€‚<code class="fe mh mi mj mk b">&lt;div&gt;ğŸ˜&lt;/div&gt;</code>æˆä¸ºä¸Šä¸€æ­¥å¼•ç”¨çš„<code class="fe mh mi mj mk b">children</code>é“å…·ã€‚</p></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="d912" class="le lf it bd lg lh nf lj lk ll ng ln lo lp nh lr ls lt ni lv lw lx nj lz ma mb bi translated">é…ç½®</h1><p id="547e" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">åœ¨ç»§ç»­ä¹‹å‰ï¼Œåˆ›å»ºä¸€ä¸ª<code class="fe mh mi mj mk b">config.js</code>æ–‡ä»¶æ¥ä¿å­˜ä¸€äº›å¸¸é‡ã€‚</p><h2 id="a0ac" class="ml lf it bd lg mm mn dn lk mo mp dp lo kb mq mr ls kf ms mt lw kj mu mv ma mw bi translated">é…ç½®æ–‡ä»¶</h2><pre class="kx ky kz la gt mx mk my mz aw na bi"><span id="29ac" class="ml lf it mk b gy nb nc l nd ne">export default {<br/>  squareSize: 200,<br/>  barSize: 20,<br/>  crossSize: 15,<br/>  inputSize: 40,<br/>  delay: 150<br/>}</span></pre><p id="c8e4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe mh mi mj mk b">squareSize</code>å°†æ˜¯<em class="ko">é¥±å’Œåº¦</em> / <em class="ko">äº®åº¦</em>æ­£æ–¹å½¢çš„å®½åº¦å’Œé«˜åº¦ã€‚<code class="fe mh mi mj mk b">barSize</code>æ˜¯<em class="ko">è‰²ç›¸</em>ç»„ä»¶çš„é«˜åº¦ï¼Œä¹Ÿæ˜¯<em class="ko">æ‰‹æŸ„</em>çš„å®½åº¦å’Œé«˜åº¦(ç”¨æˆ·æ‹–åŠ¨æ­¤é¡¹è®¾ç½®è‰²ç›¸)ã€‚<code class="fe mh mi mj mk b">crossSize</code>æ˜¯å°†ç”¨åœ¨<em class="ko">æ–¹å—</em>ä¸Šçš„å¯æ‹–åŠ¨å›¾æ ‡çš„å®½åº¦å’Œé«˜åº¦ã€‚<code class="fe mh mi mj mk b">inputSize</code>æ˜¯ä¸€è¡Œè¾“å…¥çš„é«˜åº¦ã€‚<code class="fe mh mi mj mk b">delay</code>å€¼å°†ä¸<code class="fe mh mi mj mk b">lodash.throttle</code>ä¸€èµ·ä½¿ç”¨ï¼Œåè€…åº”ä½œä¸ºä¾èµ–é¡¹æ·»åŠ ã€‚è¯¥ç»„ä»¶å°†å®ç°å„ç§å¯ä»¥ä¸æ–­è§¦å‘çš„é¼ æ ‡äº‹ä»¶ç›‘å¬å™¨ï¼Œè¿™å¯èƒ½ä¼šé™ä½åº”ç”¨ç¨‹åºçš„é€Ÿåº¦ã€‚å›è°ƒå‡½æ•°å°†è¢«èŠ‚æµï¼Œå› æ­¤å®ƒä»¬åªèƒ½æ¯<code class="fe mh mi mj mk b">delay</code>ç§’æ‰§è¡Œä¸€æ¬¡ã€‚ç°åœ¨ç†è§£ä¸€åˆ‡å¹¶ä¸é‡è¦ï¼Œå› ä¸ºéšç€æœ¬æ–‡çš„è¿›è¡Œï¼Œè¿™äº›ç¢ç‰‡å°†ä¼šç»„åˆåœ¨ä¸€èµ·ã€‚</p></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="5b58" class="le lf it bd lg lh nf lj lk ll ng ln lo lp nh lr ls lt ni lv lw lx nj lz ma mb bi translated">é¡ºåŒ–(è¶Šå—åŸå¸‚)</h1><p id="867b" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">è¿™ç§é¢œè‰²é€‰æ‹©å™¨å¯ä»¥æ•´åˆå„ç§é¢œè‰²æ ¼å¼ï¼Œä½†ç›®å‰<a class="ae kp" href="https://en.wikipedia.org/wiki/HSL_and_HSV" rel="noopener ugc nofollow" target="_blank"> HSL </a>æˆ–<em class="ko">è‰²è°ƒã€é¥±å’Œåº¦ã€äº®åº¦</em>æœ€é€‚åˆç”¨æˆ·è¾“å…¥ã€‚<em class="ko">è‰²è°ƒ</em>ç»„ä»¶æ˜¯ä¸€ä¸ªçŸ©å½¢æ¡ï¼Œæ˜¾ç¤ºä»0åˆ°360åº¦çš„å…¨éƒ¨è‰²è°ƒã€‚</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/fc37fafb93c3675013a9b5c044488a7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/0*wMoYYC_t2TpSMrjt.png"/></div></figure><p id="cfd3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">è‰²è°ƒ</em>æ æœ¬èº«å®é™…ä¸Šæ˜¯ä¸€ä¸ª<em class="ko"> HTMLç”»å¸ƒ</em>å…ƒç´ ã€‚å½“<em class="ko">æ‹¾å–å™¨</em>åŠ è½½æ—¶ï¼Œè‡ªå®šä¹‰<em class="ko">ååº”</em>é’©ç”¨äºç»˜åˆ¶360åº¦é¢œè‰²ã€‚ä¸€ä¸ªåˆ°åº•å±‚<em class="ko"> DOM </em>èŠ‚ç‚¹çš„<code class="fe mh mi mj mk b">ref</code>è¢«ä¼ é€’ç»™é’©å­ï¼Œè¿™æ ·å°±å¯ä»¥è°ƒç”¨<code class="fe mh mi mj mk b">Canvas.getContext()</code>ã€‚é’©å­ä½¿ç”¨<code class="fe mh mi mj mk b">ctx.createLinearGradient()</code>å’Œ<code class="fe mh mi mj mk b">for</code>å¾ªç¯ä¸ºæ¸å˜æ·»åŠ å¿…è¦çš„é¢œè‰²åœæ­¢ã€‚ä½¿ç”¨<em class="ko"> HSL </em>é¢œè‰²æ ¼å¼ä½¿è¿™ä¸ªè¿‡ç¨‹å˜å¾—å®¹æ˜“ã€‚è‡ªå®šä¹‰æŒ‚é’©ä¸æ˜¯å¿…éœ€çš„ï¼Œä½†å®ƒç¡®å®å¯ä»¥åˆ†ç¦»å…³æ³¨ç‚¹ã€‚</p><h2 id="7ba2" class="ml lf it bd lg mm mn dn lk mo mp dp lo kb mq mr ls kf ms mt lw kj mu mv ma mw bi translated">usePaintHue.js</h2><pre class="kx ky kz la gt mx mk my mz aw na bi"><span id="a09a" class="ml lf it mk b gy nb nc l nd ne">import React, { useEffect } from 'react'<br/>import config from './config'<br/><br/>const { squareSize, barSize } = config<br/><br/>const usePaintHue = canvas =&gt; {<br/>  useEffect(() =&gt; {<br/>    const ctx = canvas.current.getContext('2d')<br/>    ctx.rect(0, 0, squareSize, barSize)<br/><br/>    const gradient = ctx.createLinearGradient(0, 0, squareSize, 0)<br/>    for (let i = 0; i &lt;= 360; i += 30) {<br/>      gradient.addColorStop(i / 360, `hsl(${i}, 100%, 50%)`)<br/>    }<br/>    ctx.fillStyle = gradient<br/>    ctx.fill()<br/>  }, [canvas])<br/>}<br/><br/>export default usePaintHue</span></pre><p id="1f17" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">æ‹¾å–å™¨</em>å°†è®°å½•æ›´å¤šå—<em class="ko">è‰²è°ƒ</em>å½±å“çš„çŠ¶æ€ã€‚<code class="fe mh mi mj mk b">hue</code>å€¼å°†æ˜¯0åˆ°360ä¹‹é—´çš„ä¸€ä¸ªæ•°å­—ï¼Œ<code class="fe mh mi mj mk b">hueX</code>æ˜¯æ‰‹æŸ„çš„ä½ç½®ï¼Œ<code class="fe mh mi mj mk b">offsetLeft/offsetTop</code>å°†æ¥è‡ª<code class="fe mh mi mj mk b">modal</code> refå¹¶å¸®åŠ©è®¡ç®—ã€‚æ³¨æ„å½“<em class="ko">æ¨¡æ€</em>æ‰“å¼€æ—¶<code class="fe mh mi mj mk b">useEffect</code>åŠé’©æ­£åœ¨è®¡ç®—åç§»é‡ã€‚å®ƒè¿˜ä¸º<code class="fe mh mi mj mk b">resize</code>äº‹ä»¶é™„åŠ äº†ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ã€‚è¿™äº›åç§»é‡æ˜¯<em class="ko">æ¨¡æ€</em>å’Œå®ƒæœ€è¿‘çš„çˆ¶ä½“ä¹‹é—´çš„è·ç¦»ï¼Œæ‰€ä»¥å½“çª—å£å°ºå¯¸æ”¹å˜æ—¶ï¼Œè¿™äº›å€¼ä¹Ÿä¼šæ”¹å˜ã€‚è¿™ç§å˜åŒ–ä¼šæ¸—é€åˆ°å¤´å¯¸è®¡ç®—ä¸­ï¼Œå› æ­¤éœ€è¦åŠ ä»¥è€ƒè™‘ã€‚æœ€åï¼Œæ·»åŠ å¦ä¸€ä¸ªé’©å­æ¥è§‚å¯Ÿ<code class="fe mh mi mj mk b">hue</code>å€¼çš„å˜åŒ–ã€‚å½“<code class="fe mh mi mj mk b">hue</code>æ”¹å˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æ›´æ–°<code class="fe mh mi mj mk b">color</code>çŠ¶æ€ã€‚</p><h2 id="26b7" class="ml lf it bd lg mm mn dn lk mo mp dp lo kb mq mr ls kf ms mt lw kj mu mv ma mw bi translated">Picker.js</h2><pre class="kx ky kz la gt mx mk my mz aw na bi"><span id="bf8c" class="ml lf it mk b gy nb nc l nd ne">import React, { useState, useRef, useEffect } from 'react'<br/>import styled from 'styled-components'<br/>import Modal from './Modal'<br/>import Hue from './Hue'<br/>import config from './config'<br/><br/>const { squareSize, barSize } = config<br/><br/>export const PickerWrapper = styled.div`<br/>  user-select: none;<br/>  .swatch {<br/>    width: 100px;<br/>    height: 50px;<br/>    background: ${p =&gt; p.color};<br/>  }<br/>`<br/><br/>export const PickerOuter = styled.div`<br/>  width: ${squareSize + 20}px;<br/>  display: grid;<br/>  border-radius: 2px;<br/>  background: #ffffff;<br/>  box-shadow: 0 3px 3px rgba(0, 0, 0, 0.3);<br/>`<br/><br/>export const PickerInner = styled.div`<br/>  display: grid;<br/>  grid-template-rows: ${squareSize + 20}px 20px 1fr;<br/>  align-items: center;<br/>  justify-items: center;<br/>`<br/><br/>const Picker = () =&gt; {<br/>  const [show, setShow] = useState(true)<br/>  const [hue, setHue] = useState(180)<br/>  const [hueX, setHueX] = useState(() =&gt; squareSize / 2 - barSize / 2)<br/>  const [offsetTop, setOffsetTop] = useState(0)<br/>  const [offsetLeft, setOffsetLeft] = useState(0)<br/>  const [color, setColor] = useState(`hsla(180, 100%, 50%, 1)`)<br/><br/>  const modal = useRef(null)<br/><br/>  useEffect(() =&gt; {<br/>    function setOffsets() {<br/>      setOffsetTop(modal.current.offsetTop)<br/>      setOffsetLeft(modal.current.offsetLeft)<br/>    }<br/>    if (show) {<br/>      setOffsets()<br/>      window.addEventListener('resize', setOffsets)<br/>    } else {<br/>      window.removeEventListener('resize', setOffsets)<br/>    }<br/><br/>    return () =&gt; {<br/>      window.removeEventListener('resize', setOffsets)<br/>    }<br/>  }, [show])<br/><br/>  useEffect(() =&gt; {<br/>    setColor(`hsla(${hue}, 100%, 50%, 1)`)<br/>  }, [hue])<br/><br/>  return (<br/>    &lt;&gt;<br/>      &lt;PickerWrapper color={color}&gt;<br/>        &lt;div className='swatch' onClick={() =&gt; setShow(true)} /&gt;<br/>        &lt;Modal modal={modal} show={show} onClose={() =&gt; setShow(false)}&gt;<br/>          &lt;PickerOuter&gt;<br/>            &lt;PickerInner&gt;<br/>              &lt;div&gt;sqaure&lt;/div&gt;<br/>              &lt;Hue hueX={hueX} offsetLeft={offsetLeft} setHueX={setHueX} setHue={setHue} /&gt;<br/>              &lt;div&gt;inputs&lt;/div&gt;<br/>            &lt;/PickerInner&gt;<br/>          &lt;/PickerOuter&gt;<br/>        &lt;/Modal&gt;<br/>      &lt;/PickerWrapper&gt;<br/>    &lt;/&gt;<br/>  )<br/>}<br/><br/>export default Picker</span></pre></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><p id="f4c3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">åœ¨è‰²è°ƒéƒ¨åˆ†æœ‰ç›¸å½“å¤šçš„ä¸œè¥¿åœ¨è¿›è¡Œã€‚æœ‰ä¸€ä¸ªåŒ…è£…å™¨å®¹çº³<em class="ko">ç”»å¸ƒ</em>å’Œ<em class="ko">æ‰‹æŸ„</em>ç»„ä»¶ã€‚refç”¨äºç”¨<em class="ko"> usePaintHue </em>æŒ‚é’©ç»™<em class="ko">ç”»å¸ƒ</em>ä¸Šè‰²ã€‚<em class="ko">å¥æŸ„</em>ä½¿ç”¨ç»å¯¹å®šä½ï¼Œç‰¹åˆ«æ˜¯<code class="fe mh mi mj mk b">left</code>å±æ€§æ¥ç¡®å®šå…¶ä½ç½®ã€‚è¯¥ç»„ä»¶åº”ç”¨äº‹ä»¶ä¾¦å¬å™¨å¾ªç¯ã€‚ä¸€åˆ‡éƒ½æ˜¯ç”±<code class="fe mh mi mj mk b">mousedown</code>äº‹ä»¶å¼•å‘çš„ã€‚è¿™è§¦å‘äº†å¦å¤–ä¸¤ä¸ªäº‹ä»¶ç›‘å¬å™¨çš„åˆ†é…ï¼Œä¸€ä¸ªç”¨äº<code class="fe mh mi mj mk b">mouseup</code>ï¼Œå¦ä¸€ä¸ªç”¨äº<code class="fe mh mi mj mk b">mousemove</code>ã€‚è¿™ä¸ªæƒ³æ³•æ˜¯åªåœ¨é€‚å½“çš„æ—¶å€™ç›‘å¬éœ€è¦çš„äº‹ä»¶ã€‚æ¢å¥è¯è¯´ï¼Œå½“é¼ æ ‡è¢«æŒ‰ä¸‹å¹¶ç§»åŠ¨æ—¶ï¼Œç”¨æˆ·æ­£åœ¨ç§»åŠ¨<em class="ko">æ‰‹æŸ„</em>ã€‚</p><p id="24fa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe mh mi mj mk b">mousemove</code>äº‹ä»¶ç›‘å¬å™¨è¿æ¥åˆ°<code class="fe mh mi mj mk b">document.body</code>å…ƒç´ ï¼Œå› ä¸ºå½“æ‹–åŠ¨è¿™æ ·çš„å¥æŸ„æ—¶ï¼Œç”¨æˆ·ä¸å¤ªå¯èƒ½åœç•™åœ¨<em class="ko">é€‰æ‹©å™¨</em>çš„èŒƒå›´å†…ã€‚äº‹ä»¶å¤„ç†å™¨é€šè¿‡<code class="fe mh mi mj mk b">lodash.throttle</code>èŠ‚æµï¼Œæ‰€ä»¥å®ƒåªèƒ½æ¯<code class="fe mh mi mj mk b">delay</code>ç§’è§¦å‘ä¸€æ¬¡ã€‚å°è¯•æ”¹å˜<code class="fe mh mi mj mk b">delay</code>å’Œè®°å½•<code class="fe mh mi mj mk b">x</code>(<code class="fe mh mi mj mk b">computePosition</code>åŠŸèƒ½çš„ç»“æœ)ã€‚æ­£å¦‚æ‚¨å°†çœ‹åˆ°çš„ï¼ŒèŠ‚æµä¼šäº§ç”Ÿå¾ˆå¤§çš„ä¸åŒã€‚å½“<em class="ko">æ–¹å½¢</em>ç»„ä»¶è¢«æ„å»ºæ—¶ï¼Œç”±äºç”»å¸ƒé‡ç”»å¢åŠ äº†å¤„ç†å™¨è´Ÿè½½ï¼Œè¿™å°†å˜å¾—æ›´åŠ é‡è¦ã€‚</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gh gi nn"><img src="../Images/557e165716273accba0fba5fdbfa61f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4VaoeCnDu5mNCkpH.gif"/></div></div></figure><p id="149b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å¦‚æœæœ‰äº›è®¡ç®—çœ‹èµ·æ¥ä»¤äººå›°æƒ‘ï¼Œé‚£æ˜¯å› ä¸ºå®ƒä»¬ç¡®å®å¦‚æ­¤ã€‚ä½¿ç”¨<code class="fe mh mi mj mk b">barSize</code>æ˜¯å› ä¸ºå®ƒä¹Ÿæ˜¯ä¸<em class="ko">æ‰‹æŸ„</em>çš„å®½åº¦å’Œé«˜åº¦ç›¸åŒçš„å€¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<em class="ko">æ‰‹æŸ„</em>çš„å®½åº¦æ˜¯è®¡ç®—<code class="fe mh mi mj mk b">left</code>ä½ç½®çš„ä¸€éƒ¨åˆ†ã€‚è®©æˆ‘ä»¬æµè§ˆä¸€ä¸‹è§¦å‘<code class="fe mh mi mj mk b">mousemove</code>äº‹ä»¶å¤„ç†ç¨‹åºæ—¶å‘ç”Ÿçš„æ­¥éª¤ã€‚</p><ol class=""><li id="6cb4" class="ns nt it js b jt ju jx jy kb nu kf nv kj nw kn nx ny nz oa bi translated">äº‹ä»¶å¯¹è±¡è¢«ä¼ é€’ç»™<code class="fe mh mi mj mk b">computePosition</code></li><li id="d714" class="ns nt it js b jt ob jx oc kb od kf oe kj of kn nx ny nz oa bi translated"><code class="fe mh mi mj mk b">Math.max</code>ç”¨äºç¡®ä¿è¿”å›çš„æœ€å°å€¼æ˜¯<em class="ko">æ‰‹æŸ„</em>æˆ–<code class="fe mh mi mj mk b">(barSize / -2)</code>å®½åº¦çš„è´Ÿä¸€åŠã€‚è¿™æ˜¯å½“<code class="fe mh mi mj mk b">hue</code>ä¸º0æ—¶çš„<code class="fe mh mi mj mk b">left</code>å€¼ã€‚ä¸ºäº†ä½¿UIåœ¨<code class="fe mh mi mj mk b">hue</code>ä¸º0æ—¶çœ‹èµ·æ¥åˆé€‚ï¼ŒåŠä¸ª<em class="ko">æ‰‹æŸ„</em>åº”è¯¥æ‚¬æŒ‚åœ¨<em class="ko">å¤–å£³</em>çš„å·¦ä¾§ã€‚è¿™æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºè¯¥å‡½æ•°ä½¿ç”¨çš„æ˜¯é¡µé¢ä¸Šçš„xå…‰æ ‡ä½ç½®<code class="fe mh mi mj mk b">e.clientX</code>ã€‚è¿˜æœ‰å…¶ä»–é€‰æ‹©â€”â€”æ¯”å¦‚å°†<code class="fe mh mi mj mk b">mousemove</code>ç›‘å¬å™¨åº”ç”¨åˆ°å…¶ä»–å…ƒç´ ï¼Œä½†æ˜¯æˆ‘å‘ç°è¿™ç§è®¾ç½®æä¾›äº†æœ€å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</li><li id="9042" class="ns nt it js b jt ob jx oc kb od kf oe kj of kn nx ny nz oa bi translated">ä»<code class="fe mh mi mj mk b">Math.min</code>äº§ç”Ÿçš„å€¼ç¡®ä¿è¿”å›çš„å€¼ä¸ä¼šå¤§äº<em class="ko">æ‰‹æŸ„</em>æ‚¬æŒ‚åœ¨<em class="ko">å¥—ç­’</em>å³ç«¯çš„ä¸€åŠã€‚<code class="fe mh mi mj mk b">squareSize - barSize / 2</code>çš„å€¼ä»£è¡¨è¿™ä¸ªæœ€å¤§å€¼ã€‚</li><li id="96c6" class="ns nt it js b jt ob jx oc kb od kf oe kj of kn nx ny nz oa bi translated">å½“<em class="ko">æ‰‹æŸ„</em>ä½äº<em class="ko">å¥—ç­’</em>ä¸¤ç«¯ä¹‹é—´çš„ä»»ä½•ä½ç½®æ—¶ï¼Œè¡¨è¾¾å¼<code class="fe mh mi mj mk b">e.clientX - offsetLeft + squareSize / 2 - barSize / 2</code>ç”¨äºè®¡ç®—<code class="fe mh mi mj mk b">left</code>ã€‚</li><li id="243c" class="ns nt it js b jt ob jx oc kb od kf oe kj of kn nx ny nz oa bi translated"><code class="fe mh mi mj mk b">hueX</code>å€¼ç”¨äºæ’è¡¥<code class="fe mh mi mj mk b">hue</code>ã€‚è¡¨è¾¾å¼<code class="fe mh mi mj mk b">x + barSize / 2</code>è·å–<em class="ko">æ‰‹æŸ„</em>çš„ä¸­å¿ƒå€¼ã€‚è®°ä½<code class="fe mh mi mj mk b">x</code>æ˜¯åŸºäº<em class="ko">æ‰‹æŸ„</em>å·¦è¾¹ç¼˜çš„<code class="fe mh mi mj mk b">left</code>ä½ç½®ã€‚360Â°ä¸<em class="ko">å¥—ç­’</em>å®½åº¦çš„ç®€å•æ¯”å€¼ä¹˜ä»¥<code class="fe mh mi mj mk b">x</code>è®¡ç®—å‡º<code class="fe mh mi mj mk b">hue</code>ã€‚</li></ol><h2 id="5688" class="ml lf it bd lg mm mn dn lk mo mp dp lo kb mq mr ls kf ms mt lw kj mu mv ma mw bi translated">è‰²ç›¸. js</h2><pre class="kx ky kz la gt mx mk my mz aw na bi"><span id="5c1f" class="ml lf it mk b gy nb nc l nd ne">import React, { useRef, useEffect } from 'react'<br/>import styled from 'styled-components'<br/>import throttle from 'lodash.throttle'<br/>import Svg from './Svg'<br/>import usePaintHue from './usePaintHue'<br/>import config from './config'<br/><br/>const { squareSize, barSize, delay } = config<br/><br/>export const HueWrapper = styled.div`<br/>  position: relative;<br/>  width: ${squareSize + 'px'};<br/>  height: ${barSize + 'px'};<br/>  cursor: ew-resize;<br/>`<br/><br/>export const Canvas = styled.canvas.attrs(p =&gt; ({<br/>  width: squareSize,<br/>  height: barSize<br/>}))``<br/><br/>export const Handle = styled.div.attrs(p =&gt; ({<br/>  style: {<br/>    left: p.left + 'px',<br/>    transition: p.animate ? 'top .75s ease-out' : '0s'<br/>  }<br/>}))`<br/>  position: absolute;<br/>  top: 0px;<br/>  display: flex;<br/>  align-items: center;<br/>  justify-content: space-between;<br/>  width: ${barSize}px;<br/>  height: ${barSize}px;<br/>  pointer-events: none;<br/>  svg {<br/>    width: 100%;<br/>    height: 100%;<br/>  }<br/>`<br/><br/>const Hue = ({ hueX, offsetLeft, setHueX, setHue }) =&gt; {<br/>  const bar = useRef(null)<br/>  const canvas = useRef(null)<br/><br/>  usePaintHue(canvas)<br/><br/>  useEffect(() =&gt; {<br/>    function computePosition(e) {<br/>      return Math.max(<br/>        barSize / -2,<br/>        Math.min(e.clientX - offsetLeft + squareSize / 2 - barSize / 2, squareSize - barSize / 2)<br/>      )<br/>    }<br/><br/>    function computeHue(x) {<br/>      return Math.round((x + barSize / 2) * (360 / squareSize))<br/>    }<br/><br/>    const onMouseMove = throttle(e =&gt; {<br/>      const x = computePosition(e)<br/>      const hue = computeHue(x)<br/><br/>      setHueX(x)<br/>      setHue(hue)<br/>    }, delay)<br/><br/>    function onMouseUp(e) {<br/>      const x = computePosition(e)<br/>      const hue = computeHue(x)<br/>      setHueX(x)<br/>      setHue(hue)<br/>      document.body.removeEventListener('mousemove', onMouseMove)<br/>      document.body.removeEventListener('mouseup', onMouseUp)<br/>    }<br/><br/>    function onMouseDown(e) {<br/>      document.body.addEventListener('mousemove', onMouseMove)<br/>      document.body.addEventListener('mouseup', onMouseUp)<br/>    }<br/><br/>    const barRef = bar.current<br/>    barRef.addEventListener('mousedown', onMouseDown)<br/><br/>    return () =&gt; {<br/>      barRef.removeEventListener('mousedown', onMouseDown)<br/>      document.body.removeEventListener('mousemove', onMouseMove)<br/>      document.body.removeEventListener('mouseup', onMouseUp)<br/>    }<br/>  }, [offsetLeft, setHue, setHueX])<br/><br/>  return (<br/>    &lt;HueWrapper ref={bar}&gt;<br/>      &lt;Handle left={hueX}&gt;<br/>        &lt;Svg name='handle' /&gt;<br/>      &lt;/Handle&gt;<br/>      &lt;Canvas ref={canvas} /&gt;<br/>    &lt;/HueWrapper&gt;<br/>  )<br/>}<br/><br/>export default Hue</span></pre></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="4ebd" class="le lf it bd lg lh nf lj lk ll ng ln lo lp nh lr ls lt ni lv lw lx nj lz ma mb bi translated">æŒ½æ•‘ï¼ˆsavingçš„ç®€å†™ï¼‰</h1><p id="7adf" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated"><em class="ko">è‰²è°ƒ</em>ç»„ä»¶æœ‰ä¸€ä¸ªæ‰‹æŸ„ï¼Œå®ƒå®é™…ä¸Šæ˜¯æˆ‘ç”¨<a class="ae kp" href="https://boxy-svg.com/" rel="noopener ugc nofollow" target="_blank">æ–¹å½¢Svg </a>åˆ¶ä½œçš„<em class="ko"> Svg </em>ã€‚å…³äºæˆ‘çš„<em class="ko"> Svg </em>å·¥ä½œæµç¨‹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹<a class="ae kp" href="http://benjaminadk.netlify.com/posts/svg-icons-with-no-artistic-ability/" rel="noopener ugc nofollow" target="_blank">æ²¡æœ‰è‰ºæœ¯èƒ½åŠ›çš„Svgå›¾æ ‡</a>ã€‚ç›®å‰è¿™ä¸ªé¡¹ç›®åªéœ€è¦å‡ ä¸ªSvgå›¾æ ‡ã€‚åªéœ€å¯¼å…¥<em class="ko"> Svg </em>ç»„ä»¶ï¼Œå¹¶ä¼ é€’ä¸€ä¸ªä¸<code class="fe mh mi mj mk b">switch</code>è¯­å¥ä¸­çš„å­—ç¬¦ä¸²åŒ¹é…çš„<code class="fe mh mi mj mk b">name</code>å±æ€§ã€‚</p><h2 id="50d8" class="ml lf it bd lg mm mn dn lk mo mp dp lo kb mq mr ls kf ms mt lw kj mu mv ma mw bi translated">SVG . j</h2><pre class="kx ky kz la gt mx mk my mz aw na bi"><span id="f738" class="ml lf it mk b gy nb nc l nd ne">import React from 'react'<br/><br/>const Svg = ({ name, ...rest }) =&gt; {<br/>  const getPath = p =&gt; {<br/>    switch (p) {<br/>      case 'check':<br/>        return (<br/>          &lt;&gt;<br/>            &lt;path d='M2.2326 30.1008l3.7139-5.9333L23.072 34.8882l19.2522-30.41 5.914 3.744-23.001 36.3315-5.914-3.744.0037-.0067z' /&gt;<br/>          &lt;/&gt;<br/>        )<br/>      case 'cross':<br/>        return (<br/>          &lt;&gt;<br/>            &lt;path<br/>              d='M34.3656 3.0593000000000004A24.084 24.084 0 1 0 15.166 47.2354 24.084 24.084 0 1 0 34.3656 3.0593zM32.0123 8.474a18.18 18.18 0 0 1-14.493 33.3467A18.18 18.18 0 0 1 32.0123 8.474z'<br/>              fill='#dfdfdf'<br/>            /&gt;<br/>            &lt;path<br/>              d='M36.7852 11.4797A18.168 18.168 0 1 0 12.8026 38.777a18.168 18.168 0 1 0 23.9826-27.2973zM33.6263 15.0752a13.382 13.382 0 0 1-17.6649 20.1063 13.382 13.382 0 0 1 17.6649-20.1063z'<br/>              fill='#363636'<br/>            /&gt;<br/>          &lt;/&gt;<br/>        )<br/>      case 'handle':<br/>        return (<br/>          &lt;&gt;<br/>            &lt;path d='M34.736998 0v49.921h-5.578V0zm-16.737 49.921V0h5.578v49.921z' fill='#dfdfdf' /&gt;<br/>            &lt;path fill='#363636' d='M31.371873.078V50h-2.316V.078zM23.470873 0v49.922h-2.316V0z' /&gt;<br/>          &lt;/&gt;<br/>        )<br/><br/>      default:<br/>        throw new Error('must provide a name prop to Svg')<br/>    }<br/>  }<br/><br/>  return (<br/>    &lt;svg viewBox='0 0 50 50' xmlns='http://www.w3.org/2000/svg' {...rest}&gt;<br/>      {getPath(name)}<br/>    &lt;/svg&gt;<br/>  )<br/>}<br/><br/>export default Svg</span></pre></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="ec5a" class="le lf it bd lg lh nf lj lk ll ng ln lo lp nh lr ls lt ni lv lw lx nj lz ma mb bi translated">å¹³æ–¹</h1><p id="3d66" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">å¦‚æœè¯´<em class="ko">çš„è‰²è°ƒ</em>ä»¤äººå›°æƒ‘ï¼Œé‚£ä¹ˆ<em class="ko">çš„æ–¹å½¢</em>ä¼šæ›´ç³Ÿç³•ï¼<em class="ko">æ–¹å—</em>ç”¨äºæ‰¾åˆ°é¢œè‰²çš„<em class="ko">é¥±å’Œåº¦</em>å’Œ<em class="ko">äº®åº¦</em>ã€‚<em class="ko">æ­£æ–¹å½¢</em>å­˜åœ¨äºäºŒç»´ç©ºé—´ä¸­ï¼Œè€Œä¸æ˜¯åœ¨ä¸€ç»´ç©ºé—´ä¸­å·¥ä½œã€‚<em class="ko">æ–¹å—</em>ä¼šæ ¹æ®å½“å‰çš„<code class="fe mh mi mj mk b">hue</code>æ”¹å˜é¢œè‰²ï¼Œç”¨æˆ·å¯ä»¥æ‹–åŠ¨åå­—å‡†çº¿æ¥é€‰æ‹©ä»–ä»¬æƒ³è¦çš„é¢œè‰²ã€‚</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div class="gh gi og"><img src="../Images/74c2bd5a5ca058f70f19907950a28756.png" data-original-src="https://miro.medium.com/v2/resize:fit:492/format:webp/0*nKAOMuFAMBDxSAxn.png"/></div></figure><p id="dc74" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å†æ¬¡ä½¿ç”¨ä¸€ä¸ªå®šåˆ¶çš„é’©å­æ¥å¡«å……<em class="ko">æ­£æ–¹å½¢</em>ã€‚ä¸åƒ<em class="ko">è‰²è°ƒ</em>ç»˜ç”»æŒ‚é’©é‚£æ ·åªåœ¨é¡µé¢åŠ è½½æ—¶è§¦å‘ï¼Œè¿™ä¸ªæŒ‚é’©ä¼šåœ¨æ¯æ¬¡<code class="fe mh mi mj mk b">hue</code>æ”¹å˜æ—¶è§¦å‘ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆèŠ‚æµå¾ˆé‡è¦ã€‚æ¯ç§’é‡æ–°ç»˜åˆ¶<em class="ko">æ–¹å—</em> 100æ¬¡æ˜¯ä¸å¿…è¦çš„ï¼Œè€Œä¸”ä¼šé™ä½åº”ç”¨ç¨‹åºçš„é€Ÿåº¦ã€‚</p><p id="6b7b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ç»˜ç”»è¿‡ç¨‹ä»ç®€å•åœ°ç”¨å½“å‰çš„<code class="fe mh mi mj mk b">hue</code>å¡«å……ç”»å¸ƒå¼€å§‹ã€‚ä¸‹ä¸€æ­¥æ˜¯ä»å·¦åˆ°å³æ·»åŠ ç™½è‰²åˆ°é€æ˜çš„çº¿æ€§æ¸å˜ã€‚æœ€åä¸€æ­¥ä»ä¸Šåˆ°ä¸‹æ·»åŠ ä¸€ä¸ªé€æ˜åˆ°é»‘è‰²çš„çº¿æ€§æ¸å˜ã€‚å…‰æ ‡ä¸‹æ–¹çš„é¢œè‰²æœ€ç»ˆæ˜¯æ‰€é€‰çš„é¢œè‰²ã€‚</p><h2 id="85ff" class="ml lf it bd lg mm mn dn lk mo mp dp lo kb mq mr ls kf ms mt lw kj mu mv ma mw bi translated">usePaintSquare.js</h2><pre class="kx ky kz la gt mx mk my mz aw na bi"><span id="346e" class="ml lf it mk b gy nb nc l nd ne">import React, { useEffect } from 'react'<br/>import config from './config'<br/><br/>const { squareSize } = config<br/><br/>const usePaintSquare = (canvas, hue) =&gt; {<br/>  useEffect(() =&gt; {<br/>    const ctx = canvas.current.getContext('2d')<br/>    ctx.fillStyle = `hsl(${hue}, 100%, 50%)`<br/>    ctx.fillRect(0, 0, squareSize, squareSize)<br/>    const gradientWhite = ctx.createLinearGradient(0, 0, squareSize, 0)<br/>    gradientWhite.addColorStop(0, `rgba(255, 255, 255, 1)`)<br/>    gradientWhite.addColorStop(1, `rgba(255, 255, 255, 0)`)<br/>    ctx.fillStyle = gradientWhite<br/>    ctx.fillRect(0, 0, squareSize, squareSize)<br/>    const gradientBlack = ctx.createLinearGradient(0, 0, 0, squareSize)<br/>    gradientBlack.addColorStop(0, `rgba(0, 0, 0, 0)`)<br/>    gradientBlack.addColorStop(1, `rgba(0, 0, 0, 1)`)<br/>    ctx.fillStyle = gradientBlack<br/>    ctx.fillRect(0, 0, squareSize, squareSize)<br/>  }, [canvas, hue])<br/>}<br/><br/>export default usePaintSquare</span></pre><p id="5121" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•å°†å…‰æ ‡åœ¨<em class="ko">æ­£æ–¹å½¢</em>ä¸­çš„ä½ç½®è½¬æ¢ä¸º<em class="ko">é¥±å’Œåº¦</em>å’Œ<em class="ko">äº®åº¦</em>å€¼ã€‚å…³äº<em class="ko">ç”»å¸ƒ</em>çš„é…·çš„éƒ¨åˆ†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="fe mh mi mj mk b">imageData</code>æ¥è·å¾—ä»»ä½•åƒç´ çš„é¢œè‰²ã€‚ä¸é‚£ä¹ˆé…·çš„éƒ¨åˆ†æ˜¯ï¼Œè¿™ä¸ªæ•°æ®æ˜¯åœ¨<em class="ko"> RGB </em>æ ¼å¼ï¼Œæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨<em class="ko"> HSL </em>ã€‚è¿™æ„å‘³ç€åœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè½¬æ¢å‡½æ•°ã€‚ç†è§£è¿™ä¸ªå‡½æ•°å¹¶ä¸é‡è¦ï¼Œä½†çŸ¥é“å®ƒçš„ç­¾åæ‰é‡è¦ã€‚<code class="fe mh mi mj mk b">convertRGBtoHSL</code>å‡½æ•°æ¥å—ä¸€ä¸ªè¡¨ç¤ºé¢œè‰²çš„çº¢ã€ç»¿ã€è“å€¼çš„æ•´æ•°æ•°ç»„ï¼Œå¹¶å°†è¿”å›ä¸€ä¸ªè¡¨ç¤ºé¢œè‰²çš„è‰²è°ƒã€é¥±å’Œåº¦å’Œäº®åº¦çš„æ•´æ•°æ•°ç»„ã€‚ç®€å•çš„ğŸ¤“ï¼</p><h2 id="b876" class="ml lf it bd lg mm mn dn lk mo mp dp lo kb mq mr ls kf ms mt lw kj mu mv ma mw bi translated">å®ç”¨å·¥å…·</h2><pre class="kx ky kz la gt mx mk my mz aw na bi"><span id="4378" class="ml lf it mk b gy nb nc l nd ne">export const convertRGBtoHSL = rgb =&gt; {<br/>  const r = rgb[0] / 255<br/>  const g = rgb[1] / 255<br/>  const b = rgb[2] / 255<br/>  const min = Math.min(r, g, b)<br/>  const max = Math.max(r, g, b)<br/>  const delta = max - min<br/>  let h<br/>  let s<br/><br/>  if (max === min) {<br/>    h = 0<br/>  } else if (r === max) {<br/>    h = (g - b) / delta<br/>  } else if (g === max) {<br/>    h = 2 + (b - r) / delta<br/>  } else if (b === max) {<br/>    h = 4 + (r - g) / delta<br/>  }<br/><br/>  h = Math.min(h * 60, 360)<br/><br/>  if (h &lt; 0) {<br/>    h += 360<br/>  }<br/><br/>  const l = (min + max) / 2<br/><br/>  if (max === min) {<br/>    s = 0<br/>  } else if (l &lt;= 0.5) {<br/>    s = delta / (max + min)<br/>  } else {<br/>    s = delta / (2 - max - min)<br/>  }<br/><br/>  return [Math.round(h), Math.round(s * 100), Math.round(l * 100)]<br/>}</span></pre><p id="aa0e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æœ‰äº†åŸºç¡€ï¼Œå°±å¯ä»¥å®ç°<em class="ko">æ–¹å½¢</em>ç»„ä»¶ã€‚<em class="ko"> Square </em>çš„å·¥ä½œæ–¹å¼ä¸<em class="ko"> Hue </em>ç±»ä¼¼ï¼Œä½†æ˜¯è®¡ç®—å…¶å¥æŸ„çš„<code class="fe mh mi mj mk b">left</code>å’Œ<code class="fe mh mi mj mk b">top</code>å€¼çš„ä½ç½®ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ç§°ä¸º<em class="ko"> Cross </em>åªæ˜¯ä¸ºäº†å‡å°‘å‘½åçº¦å®šçš„æ··ä¹±ã€‚é¢å¤–çš„æ­¥éª¤å‘ç”Ÿåœ¨è®¡ç®—ä½ç½®ä¹‹åã€‚<code class="fe mh mi mj mk b">x</code>å’Œ<code class="fe mh mi mj mk b">y</code>å€¼æ˜¯<em class="ko">åå­—</em>çš„ä½ç½®ï¼Œä½œä¸º<code class="fe mh mi mj mk b">[x, y]</code>å­˜å‚¨åœ¨<code class="fe mh mi mj mk b">sqaureXY</code>çŠ¶æ€å˜é‡ä¸­ã€‚<code class="fe mh mi mj mk b">x1</code>å’Œ<code class="fe mh mi mj mk b">y1</code>æ˜¯ä½äº<em class="ko">åå­—</em>ä¸­å¿ƒçš„åƒç´ åæ ‡ï¼Œä¸<code class="fe mh mi mj mk b">ctx.getImageData</code>ä¸€èµ·ä½¿ç”¨ï¼Œä»¥è·å¾—è¯¥åƒç´ çš„<em class="ko"> RGB </em>å€¼ã€‚é€šè¿‡è½¬æ¢å‡½æ•°è¾“å…¥<em class="ko"> RGB </em>å€¼ï¼Œå¹¶è¿”å›<em class="ko"> HSL </em>å€¼ã€‚è‰²è°ƒå·²çŸ¥ï¼Œ<code class="fe mh mi mj mk b">s</code>å’Œ<code class="fe mh mi mj mk b">l</code>ç»„åˆæˆ<code class="fe mh mi mj mk b">square</code>çŠ¶æ€ï¼Œç§°ä¸º<code class="fe mh mi mj mk b">[s, l]</code>ã€‚</p><h2 id="ccc7" class="ml lf it bd lg mm mn dn lk mo mp dp lo kb mq mr ls kf ms mt lw kj mu mv ma mw bi translated">å¹¿åœº. js</h2><pre class="kx ky kz la gt mx mk my mz aw na bi"><span id="6932" class="ml lf it mk b gy nb nc l nd ne">import React, { useRef, useEffect } from 'react'<br/>import styled from 'styled-components'<br/>import throttle from 'lodash.throttle'<br/>import { convertRGBtoHSL } from './utils'<br/>import Svg from './Svg'<br/>import usePaintSquare from './usePaintSquare'<br/>import config from './config'<br/><br/>const { squareSize, crossSize, delay } = config<br/><br/>export const SquareWrapper = styled.div`<br/>  position: relative;<br/>  width: ${squareSize + 'px'};<br/>  height: ${squareSize + 'px'};<br/>  cursor: crosshair;<br/>  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);<br/>`<br/><br/>export const Canvas = styled.canvas.attrs(p =&gt; ({<br/>  width: squareSize,<br/>  height: squareSize<br/>}))``<br/><br/>export const Cross = styled.div.attrs(p =&gt; ({<br/>  style: {<br/>    top: p.top + 'px',<br/>    left: p.left + 'px',<br/>    width: crossSize + 'px',<br/>    height: crossSize + 'px',<br/>    transition: p.animate ? 'top .25s ease-out, left .25s ease-out' : '0s'<br/>  }<br/>}))`<br/>  position: absolute;<br/>  display: grid;<br/>  justify-items: center;<br/>  align-items: center;<br/>  svg {<br/>    width: 100%;<br/>    height: 100%;<br/>  }<br/>`<br/><br/>const Square = ({ hue, squareXY, setSquare, offsetTop, offsetLeft, setSquareXY }) =&gt; {<br/>  const square = useRef(null)<br/>  const canvas = useRef(null)<br/><br/>  usePaintSquare(canvas, hue)<br/><br/>  useEffect(() =&gt; {<br/>    const canvasRef = canvas.current<br/>    const ctx = canvasRef.getContext('2d')<br/><br/>    function computePosition(e) {<br/>      const x = Math.max(<br/>        crossSize / -2,<br/>        Math.min(<br/>          e.clientX - offsetLeft + squareSize / 2 - crossSize / 2,<br/>          squareSize - crossSize / 2<br/>        )<br/>      )<br/>      const y = Math.max(<br/>        crossSize / -2,<br/>        Math.min(e.clientY - offsetTop + squareSize / 2 + crossSize / 2, squareSize - crossSize / 2)<br/>      )<br/><br/>      return [x, y]<br/>    }<br/><br/>    function changeColor(e) {<br/>      const [x, y] = computePosition(e)<br/>      const x1 = Math.min(x + crossSize / 2, squareSize - 1)<br/>      const y1 = Math.min(y + crossSize / 2, squareSize - 1)<br/>      const [r, g, b] = ctx.getImageData(x1, y1, 1, 1).data<br/>      const [h, s, l] = convertRGBtoHSL([r, g, b])<br/>      setSquare([s, l])<br/>      setSquareXY([x, y])<br/>    }<br/><br/>    const onMouseMove = throttle(e =&gt; {<br/>      changeColor(e)<br/>    }, delay)<br/><br/>    function onMouseUp(e) {<br/>      changeColor(e)<br/>      document.body.removeEventListener('mousemove', onMouseMove)<br/>      document.body.removeEventListener('mouseup', onMouseUp)<br/>    }<br/><br/>    function onMouseDown(e) {<br/>      document.body.addEventListener('mousemove', onMouseMove)<br/>      document.body.addEventListener('mouseup', onMouseUp)<br/>    }<br/><br/>    canvasRef.addEventListener('mousedown', onMouseDown)<br/><br/>    return () =&gt; {<br/>      canvasRef.removeEventListener('mousedown', onMouseDown)<br/>    }<br/>  }, [offsetTop, offsetLeft, setSquare, setSquareXY])<br/><br/>  return (<br/>    &lt;SquareWrapper ref={square}&gt;<br/>      &lt;Cross top={squareXY[1]} left={squareXY[0]}&gt;<br/>        &lt;Svg name='cross' /&gt;<br/>      &lt;/Cross&gt;<br/>      &lt;Canvas ref={canvas} /&gt;<br/>    &lt;/SquareWrapper&gt;<br/>  )<br/>}<br/><br/>export default Square</span></pre></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><p id="a38e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æœ‰äº†æ¥è‡ª<em class="ko">æ–¹å—</em>çš„æ•°å€¼åœ¨æ‰‹ï¼Œ<em class="ko">æ‹¾å–å™¨</em>ç»„ä»¶å¯ä»¥è¾“å‡ºä¸€ä¸ªå®Œæ•´çš„<em class="ko"> HSL </em>é¢œè‰²ã€‚æˆ‘è°ƒæ•´äº†ä¸€äº›åˆ°åˆå§‹çŠ¶æ€ï¼Œè¿™æ ·<em class="ko">æ‹¾å–å™¨</em>ä»<code class="fe mh mi mj mk b">hsla(180, 100%, 50%, 1)</code>å¼€å§‹ã€‚æ›´æ–°<code class="fe mh mi mj mk b">color</code>çš„<code class="fe mh mi mj mk b">useEffect</code>é’©å­ç°åœ¨ç›‘å¬<code class="fe mh mi mj mk b">square</code>å€¼çš„å˜åŒ–ã€‚</p><h2 id="de7a" class="ml lf it bd lg mm mn dn lk mo mp dp lo kb mq mr ls kf ms mt lw kj mu mv ma mw bi translated">Picker.js</h2><pre class="kx ky kz la gt mx mk my mz aw na bi"><span id="6235" class="ml lf it mk b gy nb nc l nd ne">import React, { useState, useRef, useEffect } from 'react'<br/>import styled from 'styled-components'<br/>import Modal from './Modal'<br/>import Hue from './Hue'<br/>import Square from './Square'<br/>import config from './config'<br/><br/>const { squareSize, barSize, crossSize } = config<br/><br/>export const PickerWrapper = styled.div`<br/>  user-select: none;<br/>  .swatch {<br/>    width: 100px;<br/>    height: 50px;<br/>    background: ${p =&gt; p.color};<br/>  }<br/>`<br/><br/>export const PickerOuter = styled.div`<br/>  width: ${squareSize + 20}px;<br/>  display: grid;<br/>  border-radius: 2px;<br/>  background: #ffffff;<br/>`<br/><br/>export const PickerInner = styled.div`<br/>  display: grid;<br/>  grid-template-rows: ${squareSize + 20}px 20px 1fr;<br/>  align-items: center;<br/>  justify-items: center;<br/>`<br/><br/>const Picker = () =&gt; {<br/>  const [show, setShow] = useState(true)<br/>  const [hue, setHue] = useState(180)<br/>  const [hueX, setHueX] = useState(() =&gt; squareSize / 2 - barSize / 2)<br/>  const [square, setSquare] = useState([100, 50])<br/>  const [squareXY, setSquareXY] = useState(() =&gt; [squareSize - crossSize / 2, crossSize / -2])<br/>  const [offsetTop, setOffsetTop] = useState(0)<br/>  const [offsetLeft, setOffsetLeft] = useState(0)<br/>  const [color, setColor] = useState(`hsla(180, 100%, 50%, 1)`)<br/><br/>  const modal = useRef(null)<br/><br/>  useEffect(() =&gt; {<br/>    function setOffsets() {<br/>      setOffsetTop(modal.current.offsetTop)<br/>      setOffsetLeft(modal.current.offsetLeft)<br/>    }<br/>    if (show) {<br/>      setOffsets()<br/>      window.addEventListener('resize', setOffsets)<br/>    } else {<br/>      window.removeEventListener('resize', setOffsets)<br/>    }<br/><br/>    return () =&gt; {<br/>      window.removeEventListener('resize', setOffsets)<br/>    }<br/>  }, [show])<br/><br/>  useEffect(() =&gt; {<br/>    setColor(`hsla(${hue}, ${square[0]}%, ${square[1]}%, 1)`)<br/>  }, [hue, square])<br/><br/>  return (<br/>    &lt;&gt;<br/>      &lt;PickerWrapper color={color}&gt;<br/>        &lt;div className='swatch' onClick={() =&gt; setShow(true)} /&gt;<br/>        &lt;Modal modal={modal} show={show} onClose={() =&gt; setShow(false)}&gt;<br/>          &lt;PickerOuter&gt;<br/>            &lt;PickerInner&gt;<br/>              &lt;Square<br/>                hue={hue}<br/>                squareXY={squareXY}<br/>                offsetTop={offsetTop}<br/>                offsetLeft={offsetLeft}<br/>                setSquare={setSquare}<br/>                setSquareXY={setSquareXY}<br/>              /&gt;<br/>              &lt;Hue hueX={hueX} offsetLeft={offsetLeft} setHueX={setHueX} setHue={setHue} /&gt;<br/>              &lt;div&gt;inputs&lt;/div&gt;<br/>            &lt;/PickerInner&gt;<br/>          &lt;/PickerOuter&gt;<br/>        &lt;/Modal&gt;<br/>      &lt;/PickerWrapper&gt;<br/>    &lt;/&gt;<br/>  )<br/>}<br/><br/>export default Picker</span></pre></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="6b55" class="le lf it bd lg lh nf lj lk ll ng ln lo lp nh lr ls lt ni lv lw lx nj lz ma mb bi translated">æŠ•å…¥</h1><p id="afbe" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">å„ç§å„æ ·çš„è¾“å…¥å¯ä»¥æ·»åŠ åˆ°è¿™ä¸ªé¢œè‰²é€‰æ‹©å™¨ä¸­ï¼Œä»¥æ¥æ”¶ç”¨æˆ·æ•°æ®ã€‚å¯¹äºè¿™ç§å®ç°ï¼Œæˆ‘ä»¬å°†ä¸º<em class="ko">è‰²è°ƒ</em>ã€<em class="ko">é¥±å’Œåº¦</em>å’Œ<em class="ko">äº®åº¦</em>æä¾›å•ä¸ªè¾“å…¥ã€‚å³ä½¿è¾“å…¥ç±»å‹æ˜¯<em class="ko">æ•°å­—</em>ï¼Œæˆ‘ä»¬ä¹Ÿå°†ä½¿ç”¨æ–‡æœ¬è¾“å…¥ã€‚æˆ‘ä¸å–œæ¬¢é»˜è®¤çš„ç®­å¤´ã€‚<em class="ko">è¾“å…¥</em>ç»„ä»¶æ¥æ”¶ä¸€ä¸ª<code class="fe mh mi mj mk b">value</code>ä»¥åŠ<code class="fe mh mi mj mk b">min</code>ã€<code class="fe mh mi mj mk b">max</code>å’Œ<code class="fe mh mi mj mk b">defaultValue</code>ã€‚å½“ç”¨æˆ·è¾“å…¥è¿›æ¥æ—¶ï¼Œå®ƒè¢«æ£€æŸ¥ä»¥ç¡®ä¿å®ƒæ˜¯ä¸€ä¸ªæ•°å­—ã€‚å¦‚æœæ•°å€¼è¶…å‡ºäº†<code class="fe mh mi mj mk b">min</code> / <code class="fe mh mi mj mk b">max</code>ç•Œé™ï¼Œåˆ™è‡ªåŠ¨è¿”å›åˆ°<code class="fe mh mi mj mk b">defaultValue</code>ã€‚å¦‚æœè¾“å…¥ä¸ºç©ºï¼Œä¸€ä¸ª<code class="fe mh mi mj mk b">onBlur</code>äº‹ä»¶å¤„ç†ç¨‹åºèµ·åˆ°ç±»ä¼¼çš„ä½œç”¨ã€‚</p><h2 id="453a" class="ml lf it bd lg mm mn dn lk mo mp dp lo kb mq mr ls kf ms mt lw kj mu mv ma mw bi translated">è¾“å…¥. js</h2><pre class="kx ky kz la gt mx mk my mz aw na bi"><span id="8c0f" class="ml lf it mk b gy nb nc l nd ne">import React, { useRef } from 'react'<br/>import styled from 'styled-components'<br/><br/>export const InputWrapper = styled.div`<br/>  display: flex;<br/>  align-items: center;<br/>  user-select: none;<br/>  label {<br/>    font-size: 11px;<br/>    margin-right: 5px;<br/>  }<br/>  input {<br/>    width: 40px;<br/>    text-align: center;<br/>    border: 1px solid #ddd;<br/>    outline: 0;<br/>    font-family: monospace;<br/>    font-size: 10px;<br/>    padding: 4px 4px;<br/>    user-select: none;<br/>    &amp;:focus {<br/>      background: #fafafa;<br/>    }<br/>    &amp;::selection {<br/>      background: #ddd;<br/>    }<br/>  }<br/>`<br/><br/>const Input = ({ label, value, max, min, defaultValue, setValue }) =&gt; {<br/>  const input = useRef(null)<br/><br/>  function onBlur(e) {<br/>    if (e.target.value === '') {<br/>      setValue(defaultValue)<br/>    } else if (e.target.value &lt; min) {<br/>      setValue(min)<br/>    }<br/>  }<br/><br/>  function onChange(e) {<br/>    const isDigit = /^\d\*\$/<br/>    var newValue<br/>    if (isDigit.test(e.target.value)) {<br/>      if (Number(e.target.value) &gt; max) {<br/>        newValue = max<br/>      } else {<br/>        newValue = Number(e.target.value)<br/>      }<br/>    } else {<br/>      newValue = defaultValue<br/>    }<br/>    setValue(newValue)<br/>  }<br/><br/>  return (<br/>    &lt;InputWrapper&gt;<br/>      &lt;label&gt;{label}&lt;/label&gt;<br/>      &lt;input ref={input} value={value} onChange={onChange} onBlur={onBlur} autoFocus={false} /&gt;<br/>    &lt;/InputWrapper&gt;<br/>  )<br/>}<br/><br/>export default Input</span></pre><p id="e533" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">éœ€è¦æ–°çš„åŠŸèƒ½æ¥è®¾ç½®<em class="ko">æ‰‹æŸ„</em>å’Œ<em class="ko">åå­—</em>çš„ä½ç½®ã€‚æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ä¸€äº›ç»„ä»¶ä¸­åŸºäº<code class="fe mh mi mj mk b">animate</code>é“å…·çš„ä¸€äº›æ ·å¼é€»è¾‘ã€‚æœ¬è´¨ä¸Šï¼Œå½“ä½¿ç”¨<em class="ko">è¾“å…¥</em>æ—¶ï¼Œ<em class="ko">æ‰‹æŸ„</em>å’Œ<em class="ko">åå­—</em>å°†åŠ¨ç”»æ˜¾ç¤ºåˆ°å®ƒä»¬çš„æ–°ä½ç½®ã€‚å½“ç”¨æˆ·æ‹–åŠ¨æ—¶<code class="fe mh mi mj mk b">animate</code>å°†ä¸ºå‡ã€‚<code class="fe mh mi mj mk b">animate</code>é“å…·å’Œ<code class="fe mh mi mj mk b">setAnimate</code>å¿…é¡»ä¼ ç»™<em class="ko">è‰²ç›¸</em>å’Œ<em class="ko">æ–¹</em>ã€‚åªéœ€å°†<code class="fe mh mi mj mk b">setAnimate(false)</code>æ·»åŠ åˆ°<code class="fe mh mi mj mk b">mousedown</code>äº‹ä»¶å¤„ç†ç¨‹åºä¸­ã€‚åœ¨<em class="ko">è¾“å…¥</em>å‘¨å›´è¿˜éœ€è¦ä¸€ä¸ªåŒ…è£…å™¨ã€‚</p><p id="b877" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æ„Ÿè°¢é˜…è¯»ï¼è¿™ç¯‡æ–‡ç« æ¯”æˆ‘æœ€åˆæ‰“ç®—çš„è¦é•¿å¾—å¤šï¼Œè€Œä¸”åªæ¶‰åŠäº†åŸºç¡€çŸ¥è¯†ã€‚å¦‚æœä½ èƒ½èµ°åˆ°è¿™ä¸€æ­¥ï¼Œæ­å–œä½ è‡ªå·±ã€‚æˆ‘å¸Œæœ›è¿™è¶³ä»¥è®©ä½ èµ°ä¸Šæ­£è½¨ã€‚ä»ç„¶æœ‰è®¸å¤šé¢å¤–çš„åŠŸèƒ½å¯ä»¥æ·»åŠ ï¼Œä»¥å¢å¼ºè¿™ä¸ªé¢œè‰²é€‰æ‹©å™¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æƒ³æ³•:</p><ul class=""><li id="977b" class="ns nt it js b jt ju jx jy kb nu kf nv kj nw kn oh ny nz oa bi translated">æ·»åŠ ä¸€ä¸ªè°ƒè‰²æ¿ï¼Œè®©ç”¨æˆ·ä¿å­˜é¢œè‰²â€” <code class="fe mh mi mj mk b">localStorage</code>ä¹Ÿè®¸</li><li id="07ea" class="ns nt it js b jt ob jx oc kb od kf oe kj of kn oh ny nz oa bi translated">æ·»åŠ è‰²æ¿ä»¥åœ¨æ‹¾è‰²å™¨ä¸­æ˜¾ç¤ºé€‰å®šçš„é¢œè‰²</li><li id="08ca" class="ns nt it js b jt ob jx oc kb od kf oe kj of kn oh ny nz oa bi translated">æ·»åŠ ç¡®è®¤æŒ‰é’®</li><li id="4d44" class="ns nt it js b jt ob jx oc kb od kf oe kj of kn oh ny nz oa bi translated">ä»¥<em class="ko"> HSL </em>ã€<em class="ko"> RGB </em>ã€<em class="ko"> HEX </em>æˆ–å…¶ä»–æ ¼å¼æ·»åŠ é¢œè‰²å­—ç¬¦ä¸²çš„æ˜¾ç¤º</li><li id="b533" class="ns nt it js b jt ob jx oc kb od kf oe kj of kn oh ny nz oa bi translated">ä¸ºå…¶ä»–é¢œè‰²æ ¼å¼æ·»åŠ è¾“å…¥</li><li id="941a" class="ns nt it js b jt ob jx oc kb od kf oe kj of kn oh ny nz oa bi translated">æ·»åŠ ä¸€ä¸ªå¯ä»¥æ¥å—3æˆ–6ä½åå…­è¿›åˆ¶ä»£ç çš„è§£æå™¨</li><li id="cc61" class="ns nt it js b jt ob jx oc kb od kf oe kj of kn oh ny nz oa bi translated">æ·»åŠ alphaæ¡æ¥è®¾å®šé¢œè‰²çš„ä¸é€æ˜åº¦</li></ul></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><p id="4e16" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æŸ¥çœ‹æœ¬æ–‡ç»­é›†<a class="ae kp" href="https://benjaminadk.netlify.com/posts/using-local-storage-to-persist-data/" rel="noopener ugc nofollow" target="_blank">https://Benjamin Brooke . me/posts/using-local-storage-to-persist-data/</a></p><p id="d828" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">åŸè½½äº2019å¹´8æœˆ13æ—¥</em><a class="ae kp" href="https://benjaminadk.netlify.com/posts/how-to-build-a-color-picker/" rel="noopener ugc nofollow" target="_blank"><em class="ko">https://benjaminadk.netlify.com</em></a><em class="ko">ã€‚</em></p></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><div class="kx ky kz la gt oi"><a href="https://gitconnected.com/learn/react" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd iu gy z fp on fr fs oo fu fw is bi translated">å­¦ä¹ React -æœ€ä½³Reactæ•™ç¨‹(2019) | gitconnected</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">Reactæ˜¯ä¸€ä¸ªç°ä»£JavaScriptåº“ï¼Œå‰ç«¯webå¼€å‘äººå‘˜ä½¿ç”¨å®ƒæ¥æ„å»ºç”¨æˆ·ç•Œé¢(UI)ã€‚å®ƒç”¨äºâ€¦</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">gitconnected.com</p></div></div><div class="or l"><div class="os l ot ou ov or ow nl oi"/></div></div></a></div></div></div>    
</body>
</html>