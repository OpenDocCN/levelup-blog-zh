<html>
<head>
<title>Pass Data into Ng-Bootstrap Modal in Angular 8</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将数据传入角度为8的Ng-Bootstrap模式</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/pass-data-into-ng-bootstrap-modal-in-angular-8-65608361093a?source=collection_archive---------2-----------------------#2020-01-10">https://levelup.gitconnected.com/pass-data-into-ng-bootstrap-modal-in-angular-8-65608361093a?source=collection_archive---------2-----------------------#2020-01-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4cd3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在弹出模式中编辑用户配置文件信息</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/342f425c6ef396d995e08086dd463872.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h6JHKK6yeIFi8FTQIOdctg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">以Ng-Bootstrap模式传递数据</figcaption></figure><p id="6f8c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本教程中，我们将学习如何在Angular版本8中使用Ng-Bootstrap将数据传递给一个模态。</p><p id="19fa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Ng-Bootrap是Bootstrap UI组件的角度适应版本。通过使用ng-bootstrap，我们可以轻松地将bootstrap库集成到我们的Angular项目中，并轻松地使用它的UI组件。</p><p id="aeea" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们开始构建我们的应用程序。</p><h1 id="1a9a" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">设置我们的应用程序</h1><p id="1cc1" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">在运行以下命令之前，确保我们已经在环境中安装了<a class="ae mr" href="https://cli.angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular CLI </a>和<a class="ae mr" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node JS </a>。然后，运行下面的命令。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="8f3e" class="mx lv it mt b gy my mz l na nb">ng new modalApp<br/>cd modalApp</span></pre><p id="b2eb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，通过以下方式安装ng-bootstrap:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="8c17" class="mx lv it mt b gy my mz l na nb">npm install @ng-bootstrap/ng-bootstrap --save</span></pre><p id="8100" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">安装完成后，导入<strong class="la iu"> app.module.ts </strong>中的<code class="fe nc nd ne mt b">NgbModule</code>和<code class="fe nc nd ne mt b">ReacticeFormsModule</code>。稍后我们将在应用程序中使用反应式。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="a6b9" class="mx lv it mt b gy my mz l na nb">import { BrowserModule } from '@angular/platform-browser';<br/>import { NgModule } from '@angular/core';<br/>import { AppRoutingModule } from './app-routing.module';<br/>import { AppComponent } from './app.component';<br/>import { ReactiveFormsModule } from '@angular/forms';<br/>import { NgbModule } from '@ng-bootstrap/ng-bootstrap';</span><span id="6050" class="mx lv it mt b gy nf mz l na nb">@NgModule({<br/>  declarations: [<br/>    AppComponent<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    AppRoutingModule,<br/>    NgbModule,<br/>    ReactiveFormsModule<br/>  ],<br/>  providers: [],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule { }</span></pre><p id="a274" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，通过运行以下命令安装引导程序:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="d504" class="mx lv it mt b gy my mz l na nb">npm install bootstrap --save</span></pre><p id="4c84" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">并在<strong class="la iu"> angular.json </strong>中导入下面的代码。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="6d60" class="mx lv it mt b gy my mz l na nb">"styles": [<br/>  "src/styles.scss",<br/>  "node_modules/bootstrap/dist/css/bootstrap.min.css"<br/>],<br/>"scripts": []</span></pre><p id="33e2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们不需要在应用程序中添加<strong class="la iu"> bootstrap.js </strong>或<strong class="la iu"> bootstrap.min.js </strong>，因为ng-bootstrap的目标是完全取代组件的JavaScript实现。我们也不应该包含其他依赖项，如jQuery或popper.js。这是不必要的，可能会干扰ng bootstrap代码。</p><h1 id="a5f0" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">创建数据表</h1><p id="65f3" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">接下来，我们将添加一个数据表，它包含一个用户列表和一些细节，以及一个将触发弹出模式的编辑功能。更新下面的文件。</p><p id="03b4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">app.component.html</strong></p><p id="acf3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用户表有6列，包括用户详细信息——id、名字、姓氏、用户名、电子邮件和操作。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="d503" class="mx lv it mt b gy my mz l na nb">&lt;div class="container"&gt;<br/> &lt;div class="row"&gt;<br/>  &lt;div class="col-md-12 py-4 text-center"&gt;<br/>   &lt;h1&gt;List of Users&lt;/h1&gt;<br/>  &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;div class="row justify-content-center"&gt;<br/>  &lt;div class="col-md-12 py-4"&gt;<br/>   &lt;table class="table table-striped"&gt;<br/>    &lt;thead&gt;<br/>     &lt;tr&gt;<br/>      &lt;th scope="col"&gt;#&lt;/th&gt;<br/>      &lt;th scope="col"&gt;First Name&lt;/th&gt;<br/>      &lt;th scope="col"&gt;Last Name&lt;/th&gt;<br/>      &lt;th scope="col"&gt;Username&lt;/th&gt;<br/>      &lt;th scope="col"&gt;Email&lt;/th&gt;<br/>      &lt;th scope="col"&gt;Action&lt;/th&gt;<br/>     &lt;/tr&gt;<br/>    &lt;/thead&gt;</span><span id="f7d8" class="mx lv it mt b gy nf mz l na nb">    &lt;tbody&gt;<br/>     &lt;tr *ngFor="let user of userList"&gt;<br/>      &lt;th scope="row"&gt;{{ user.id }}&lt;/th&gt;<br/>      &lt;td&gt;{{ user.firstname }}&lt;/td&gt;<br/>      &lt;td&gt;{{ user.lastname }}&lt;/td&gt;<br/>      &lt;td&gt;{{ user.username }}&lt;/td&gt;<br/>      &lt;td&gt;{{ user.email }}&lt;/td&gt;<br/>      &lt;td&gt;<br/>       &lt;button type="button" class="btn btn-primary" (click)="openModal(editProfileModal, user)"&gt;Edit&lt;/button&gt;<br/>      &lt;/td&gt;<br/>     &lt;/tr&gt;<br/>    &lt;/tbody&gt;<br/>   &lt;/table&gt;<br/>  &lt;/div&gt;<br/> &lt;/div&gt;<br/>&lt;/div&gt;</span><span id="bc0e" class="mx lv it mt b gy nf mz l na nb">&lt;ng-template #editProfileModal let-modal&gt;<br/> &lt;div class="modal-header"&gt;<br/>  &lt;h5 class="modal-title" id="editProfileLabel"&gt;Edit Profile&lt;/h5&gt;<br/>  &lt;button type="button" class="close" (click)="modal.dismiss()" aria-label="Close"&gt;<br/>   &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;<br/>  &lt;/button&gt;<br/> &lt;/div&gt;<br/> <br/> &lt;div class="modal-body"&gt;<br/>  &lt;form [formGroup]="editProfileForm" (ngSubmit)="onSubmit()"&gt;<br/>   &lt;div class="form-group row"&gt;<br/>    &lt;label for="firstname" class="col-sm-4 col-form-label"&gt;First Name&lt;/label&gt;<br/>    &lt;div class="col-sm-8"&gt;<br/>     &lt;input type="text" class="form-control" formControlName="firstname" id="firstname"&gt;<br/>    &lt;/div&gt;<br/>   &lt;/div&gt;</span><span id="aebb" class="mx lv it mt b gy nf mz l na nb">   &lt;div class="form-group row"&gt;<br/>    &lt;label for="lastname" class="col-sm-4 col-form-label"&gt;Last Name&lt;/label&gt;<br/>    &lt;div class="col-sm-8"&gt;<br/>     &lt;input type="text" class="form-control" formControlName="lastname" id="lastname"&gt;<br/>    &lt;/div&gt;<br/>   &lt;/div&gt;</span><span id="ebc1" class="mx lv it mt b gy nf mz l na nb">   &lt;div class="form-group row"&gt;<br/>    &lt;label for="username" class="col-sm-4 col-form-label"&gt;Username&lt;/label&gt;<br/>    &lt;div class="col-sm-8"&gt;<br/>     &lt;input type="text" class="form-control" formControlName="username" id="username"&gt;<br/>    &lt;/div&gt;<br/>   &lt;/div&gt;</span><span id="9687" class="mx lv it mt b gy nf mz l na nb">   &lt;div class="form-group row"&gt;<br/>    &lt;label for="email" class="col-sm-4 col-form-label"&gt;Email&lt;/label&gt;<br/>    &lt;div class="col-sm-8"&gt;<br/>     &lt;input type="email" class="form-control" formControlName="email" id="email"&gt;<br/>    &lt;/div&gt;<br/>   &lt;/div&gt;</span><span id="8def" class="mx lv it mt b gy nf mz l na nb">   &lt;div class="modal-footer"&gt;<br/>    &lt;button type="button" class="btn btn-secondary" (click)="modal.dismiss()"&gt;Close&lt;/button&gt;<br/>    &lt;button type="submit" class="btn btn-primary"&gt;Save changes&lt;/button&gt;<br/>   &lt;/div&gt;<br/>  &lt;/form&gt;<br/> &lt;/div&gt;<br/>&lt;/ng-template&gt;</span></pre><p id="992d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe nc nd ne mt b">#editProfileModal</code>是一个弹出模式，包含一个编辑用户详细信息的表单。</p><p id="1bfe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了打开模态，我们使用带有两个参数的<code class="fe nc nd ne mt b">openModal()</code>方法——<strong class="la iu">目标模态id </strong>和<strong class="la iu">选择的用户</strong>。</p><p id="6c6f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了关闭模态，我们使用解散方法— <code class="fe nc nd ne mt b">modal.dismiss()</code>。</p><p id="59c1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> app.component.ts </strong></p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="b78e" class="mx lv it mt b gy my mz l na nb">import { Component, OnInit } from '@angular/core';<br/>import { FormGroup, FormBuilder } from '@angular/forms';<br/>import { NgbModal } from '@ng-bootstrap/ng-bootstrap';</span><span id="e94e" class="mx lv it mt b gy nf mz l na nb">@Component({<br/> selector: 'app-root',<br/> templateUrl: './app.component.html',<br/> styleUrls: ['./app.component.scss']<br/>})</span><span id="8b88" class="mx lv it mt b gy nf mz l na nb">export class AppComponent implements OnInit{<br/> title = 'modal2';<br/> editProfileForm: FormGroup;</span><span id="35b9" class="mx lv it mt b gy nf mz l na nb"> userList = [<br/> {<br/>  id: "1",<br/>  firstname: "Aiman",<br/>  lastname: "Rahmat", <br/>  username: "aimanrahmat",<br/>  email: "aimanrahmat@gmail.com"<br/> },<br/> {<br/>  id: "2",<br/>  firstname: "Christiano",<br/>  lastname: "Ronaldo",<br/>  username: "ronaldo7",<br/>  email: "ronaldo7@gmail.com"<br/> },<br/> {<br/>  id: "3",<br/>  firstname: "Wayne",<br/>  lastname: "Rooney",<br/>  username: "rooney8",<br/>  email: "rooney8@gmail.com"<br/> }];</span><span id="b808" class="mx lv it mt b gy nf mz l na nb"> constructor(private fb: FormBuilder, private modalService: NgbModal) {}</span><span id="7bca" class="mx lv it mt b gy nf mz l na nb"> ngOnInit() {<br/>  this.editProfileForm = this.fb.group({<br/>   firstname: [''],<br/>   lastname: [''],<br/>   username: [''],<br/>   email: ['']<br/>  });<br/> }</span><span id="1934" class="mx lv it mt b gy nf mz l na nb"> openModal(targetModal, user) {<br/>  this.modalService.open(targetModal, {<br/>   centered: true,<br/>   backdrop: 'static'<br/>  });<br/> <br/>  this.editProfileForm.patchValue({<br/>   firstname: user.firstname,<br/>   lastname: user.lastname,<br/>   username: user.username,<br/>   email: user.email<br/>  });<br/> }</span><span id="8349" class="mx lv it mt b gy nf mz l na nb"> onSubmit() {<br/>  this.modalService.dismissAll();<br/>  console.log("res:", this.editProfileForm.getRawValue());<br/> }<br/>}</span></pre><p id="ee48" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在<code class="fe nc nd ne mt b">userList</code>中，我们有3个用户及其详细信息——id、名字、姓氏、用户名和电子邮件。</p><p id="fe14" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了打开和关闭ng引导模式，我们使用一个名为<a class="ae mr" href="https://ng-bootstrap.github.io/#/components/modal/api" rel="noopener ugc nofollow" target="_blank">NGB model</a>的服务。你可以点击链接了解更多关于这项服务的信息。</p><p id="f61e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe nc nd ne mt b">Static</code>为back end，表示在模态外点击时模态不关闭。</p><p id="ae8b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当所选用户被发送到开始模式时，使用<code class="fe nc nd ne mt b">patchValue</code>根据所选用户的详细信息设置<code class="fe nc nd ne mt b">editProfileForm</code>的值。</p><p id="3a7a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是最后的结局。我们可以看到，用户详细信息在模式中相应地被填充。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/ff6b3b7e084532bb6818515671e69a07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qz-dHqo2sqnfg4wozcQxiw.gif"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">最后结局</figcaption></figure><p id="323f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">尝试更改用户详细信息中的任何内容，然后单击“保存更改”。新的更改将显示在您的控制台日志中，如下图所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/c663425b082660da0034722c30b2c675.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t41RgVvCbcLiEOT4Au2JyQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">新变化</figcaption></figure></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="ed27" class="lu lv it bd lw lx np lz ma mb nq md me jz nr ka mg kc ns kd mi kf nt kg mk ml bi translated">资源</h1><ol class=""><li id="908b" class="nu nv it la b lb mm le mn lh nw ll nx lp ny lt nz oa ob oc bi translated">https://ng-bootstrap.github.io/#/getting-started<a class="ae mr" href="https://ng-bootstrap.github.io/#/getting-started" rel="noopener ugc nofollow" target="_blank"/></li></ol></div></div>    
</body>
</html>