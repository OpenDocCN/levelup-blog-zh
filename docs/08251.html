<html>
<head>
<title>How to use Linked Lists in C</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在C中使用链表</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-use-linked-lists-in-c-eda420d31568?source=collection_archive---------12-----------------------#2021-04-14">https://levelup.gitconnected.com/how-to-use-linked-lists-in-c-eda420d31568?source=collection_archive---------12-----------------------#2021-04-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/ba33a8b07bf8a183cb5b14005965a16e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u_dzCrBgWzqGvcfC"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@andrewtneel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">安德鲁·尼尔</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><pre class="kg kh ki kj gt kk kl km kn aw ko bi"><span id="c3e5" class="kp kq it kl b gy kr ks l kt ku">-------------------------             ------------------------<br/>|           |           |           \ |          |           |<br/>|   DATA    |    NEXT   |-------------|   DATA   |    NEXT   |<br/>|           |           |           / |          |           |<br/>-------------------------             ------------------------</span></pre><p id="1913" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">在C中拥有动态数据结构的方法之一是使用链表。在本文中，我将介绍添加、删除和搜索项目的基本方法。</p><p id="f7fe" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">对于这些例子，我们使用的数据结构如下:</p><pre class="kg kh ki kj gt kk kl km kn aw ko bi"><span id="9d10" class="kp kq it kl b gy kr ks l kt ku">typedef struct listas {<br/>    int info;<br/>    struct listas * next;<br/>} list_t;</span></pre><h2 id="86b9" class="kp kq it bd lt lu lv dn lw lx ly dp lz lg ma mb mc lk md me mf lo mg mh mi mj bi translated">添加项目到<strong class="ak">头:</strong></h2><pre class="kg kh ki kj gt kk kl km kn aw ko bi"><span id="e0c8" class="kp kq it kl b gy kr ks l kt ku">list_t * listaddhead (list_t * t, int val)<br/>{<br/>    list_t * new_item;</span><span id="276e" class="kp kq it kl b gy mk ks l kt ku">    if((new_item = malloc(sizeof(list_t)))){<br/>        new_item-&gt;info = val;<br/>        new_item-&gt;next = t;<br/>        t = new_item;<br/>    } else<br/>        printf("out of memory");<br/>    return t;<br/>}</span></pre><p id="3bc4" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">让我们详细看看，在头部添加的方法接收指向列表第一个元素的<strong class="kx iu">指针和添加到列表</strong>的<strong class="kx iu">值。</strong></p><p id="0f6f" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我们将使用<strong class="kx iu"> MALLOC </strong>实例化内存。如果有足够的内存，我们将把从方法的输入中得到的值赋给新元素，在列表的开头，我们将把指针赋给下一个元素。列表的新头部将是指向新创建的元素的指针。</p><p id="4b60" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">为了更清楚，我将画一些图，变量的名字和代码中的一样。</p><p id="f536" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">这是最初的情况:</p><pre class="kg kh ki kj gt kk kl km kn aw ko bi"><span id="b16c" class="kp kq it kl b gy kr ks l kt ku">-------------             ------------------------<br/>|           |           \ |          |           |           \<br/>|  T(HEAD)  |-------------|   INFO   |    NEXT   |-------------<br/>|           |           / |          |           |           /<br/>-------------             ------------------------</span><span id="84fe" class="kp kq it kl b gy mk ks l kt ku">-------------             ------------<br/>|           |           \ |          |<br/>| <!-- -->new_item<!-- -->  |-------------|   NULL   |<br/>|           |           / |          |<br/>-------------             ------------</span></pre><p id="0a54" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">首先我们要实例化内存空间</p><pre class="kg kh ki kj gt kk kl km kn aw ko bi"><span id="684a" class="kp kq it kl b gy kr ks l kt ku">(new_item = malloc(sizeof(list_t))</span><span id="de6f" class="kp kq it kl b gy mk ks l kt ku">-------------             ------------------------<br/>|           |           \ |          |           |      \<br/>|  T(HEAD)  |-------------|   INFO   |    NEXT   |-------<br/>|           |           / |          |           |      /<br/>-------------             ------------------------</span><span id="006f" class="kp kq it kl b gy mk ks l kt ku">-------------             ------------------------<br/>|           |           \ |          |           |      \<br/>| <!-- -->new_item<!-- -->  |-------------|   INFO   |    NEXT   |------- NULL<br/>|           |           / |          |           |      /<br/>-------------             ------------------------</span></pre><p id="7936" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">现在我们将头部分配给下一个新元素</p><pre class="kg kh ki kj gt kk kl km kn aw ko bi"><span id="c30c" class="kp kq it kl b gy kr ks l kt ku">new_item-&gt;next = t;</span><span id="6847" class="kp kq it kl b gy mk ks l kt ku">-------------             ------------------------<br/>|           |           \ |          |           |      \<br/>|  T(HEAD)  |-------------|   INFO   |    NEXT   |-------<br/>|           |      |    / |          |           |      /<br/>-------------      |      ------------------------<br/>                   |<!-- --> <br/>                   ----------------------------------<br/>                                                    |<br/>-------------             ------------------------  |<br/>|           |           \ |          |           |  |<br/>| <!-- -->new_item<!-- -->  |-------------|   INFO   |    NEXT   |---<br/>|           |           / |          |           |<br/>-------------             ------------------------</span></pre><p id="b85f" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我们让head指向新元素，它是方法返回的元素</p><pre class="kg kh ki kj gt kk kl km kn aw ko bi"><span id="f581" class="kp kq it kl b gy kr ks l kt ku">t = new_item;</span><span id="7be8" class="kp kq it kl b gy mk ks l kt ku">-------------             ------------------------<br/>|           |           \ |          |           |      \<br/>|  T(HEAD)  |---   -------|   INFO   |    NEXT   |-------<br/>|           |  |   |    / |          |           |      /<br/>-------------  |   |      ------------------------<br/>               |   |<!-- --> <br/>               |   ----------------------------------<br/>               |                                    |<br/>-------------  |          ------------------------  |<br/>|           |  |        \ |          |           |  |<br/>| <!-- -->new_item<!-- -->  |-------------|   INFO   |    NEXT   |---<br/>|           |           / |          |           |<br/>-------------             ------------------------</span></pre><h2 id="d2e8" class="kp kq it bd lt lu lv dn lw lx ly dp lz lg ma mb mc lk md me mf lo mg mh mi mj bi translated">将项目添加到尾部:</h2><pre class="kg kh ki kj gt kk kl km kn aw ko bi"><span id="21a1" class="kp kq it kl b gy kr ks l kt ku">list_t * listaddtail (list_t * t, int val) /* add in queue */<br/>{<br/>    list_t * new_item;<br/>    list_t * tmp1;<br/>    list_t * tmp2;</span><span id="6638" class="kp kq it kl b gy mk ks l kt ku">    int i;<br/>    for(tmp2 = t, i = 0; tmp2; tmp1 = tmp2, tmp2 = tmp2-&gt;next)<br/>        i++;</span><span id="cca1" class="kp kq it kl b gy mk ks l kt ku">    if(i){<br/>        if((new_item = malloc(sizeof(list_t)))){<br/>            new_item-&gt;info = val;<br/>            new_item-&gt;next = NULL;</span><span id="e81d" class="kp kq it kl b gy mk ks l kt ku">           tmp1-&gt;next = new_item;<br/>        } else<br/>            printf("out of memory");<br/>    } else<br/>        t = listaddhead(t, val);<br/>    return t;<br/>}</span></pre><p id="2487" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">如何在列表末尾添加一个元素？首先，我将列表向下滚动到最后一个元素，如果列表为空，我将调用开头的add方法，如果不为空，我将实例化新元素的内存，将从该方法接收到的输入值赋给新元素，并将指向下一个对象的指针设置为空。<br/>除了列表中的最后一个元素，我们还将使它指向新创建的元素。</p><p id="bc63" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">这是最初的情况:</p><pre class="kg kh ki kj gt kk kl km kn aw ko bi"><span id="a851" class="kp kq it kl b gy kr ks l kt ku">     --------------------      --------------------      <br/>   \ |        |         |    \ |        |         |    \ <br/>-----|  INFO  |   NEXT  |------|  INFO  |   NEXT  |------ NULL<br/>   / |        |         |    / |        |         |    / <br/>     --------------------      --------------------</span></pre><p id="be9d" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">首先我们要实例化内存空间</p><pre class="kg kh ki kj gt kk kl km kn aw ko bi"><span id="ad4e" class="kp kq it kl b gy kr ks l kt ku">(new_item = malloc(sizeof(list_t)</span><span id="e2b7" class="kp kq it kl b gy mk ks l kt ku">                                      TMP1                TMP2<br/>     --------------------      --------------------      <br/>   \ |        |         |    \ |        |         |    \ <br/>-----|  INFO  |   NEXT  |------|  INFO  |   NEXT  |------ NULL<br/>   / |        |         |    / |        |         |    / <br/>     --------------------      --------------------</span><span id="e9d4" class="kp kq it kl b gy mk ks l kt ku">------------       --------------------   <br/>|          |     \ |        |         |     \ <br/>| new_item | ------|  INFO  |   NEXT  |------ NULL<br/>|          |     / |        |         |     / <br/>------------       --------------------</span></pre><p id="eeb1" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">现在让我们将列表的最后一个元素指向新元素</p><pre class="kg kh ki kj gt kk kl km kn aw ko bi"><span id="079d" class="kp kq it kl b gy kr ks l kt ku">tmp1-&gt;next = new_item;</span><span id="8e21" class="kp kq it kl b gy mk ks l kt ku">                                      TMP1<br/>     --------------------      --------------------      <br/>   \ |        |         |    \ |        |         |     <br/>-----|  INFO  |   NEXT  |------|  INFO  |   NEXT  |----<br/>   / |        |         |    / |        |         |   | <br/>     --------------------      --------------------   |  <br/>              -----------------------------------------<br/>------------  |    --------------------   <br/>|          |  |  \ |        |         |     \ <br/>| new_item | ------|  INFO  |   NEXT  |------ NULL<br/>|          |     / |        |         |     / <br/>------------       --------------------</span></pre><h2 id="10f2" class="kp kq it bd lt lu lv dn lw lx ly dp lz lg ma mb mc lk md me mf lo mg mh mi mj bi translated">删除元素</h2><p id="806d" class="pw-post-body-paragraph kv kw it kx b ky ml la lb lc mm le lf lg mn li lj lk mo lm ln lo mp lq lr ls im bi translated">要删除一个项目，我滚动列表直到找到该项目，当滚动列表时，我保持指向当前项目的指针和指向前一个项目的指针。<br/>一旦找到元素，我就用要删除的元素后面的元素的指针更新前一个元素的指针。然后我们释放想要删除的元素的内存。</p><p id="dd17" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">首先，我们找到要删除的元素</p><pre class="kg kh ki kj gt kk kl km kn aw ko bi"><span id="0517" class="kp kq it kl b gy kr ks l kt ku">for(tmp1 = NULL, tmp2 = t; tmp2-&gt;next &amp;&amp; tmp2-&gt;info != val; tmp1 = tmp2, tmp2 = tmp2-&gt;next);<br/></span><span id="ff27" class="kp kq it kl b gy mk ks l kt ku">          TMP1         TMP2 (TO DELETE)<br/>    ---------------    ---------------    ---------------    <br/>  \ |      |      |  \ |      |      |  \ |      |      |  \ <br/>----| INFO | NEXT |----| INFO | NEXT |----| INFO | NEXT |----<br/>  / |      |      |  / |      |      |  / |      |      |  / <br/>    ---------------    ---------------    ---------------</span></pre><p id="7188" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我们更新指针</p><pre class="kg kh ki kj gt kk kl km kn aw ko bi"><span id="4e95" class="kp kq it kl b gy kr ks l kt ku">tmp1-&gt;next = tmp2-&gt;next;<br/>free (tmp2);</span><span id="a755" class="kp kq it kl b gy mk ks l kt ku">          TMP1         TMP2 (TO DELETE)<br/>    ---------------    ---------------    ---------------    <br/>  \ |      |      |    |      |      |  \ |      |      |  \ <br/>----| INFO | NEXT |--  | INFO | NEXT | ---| INFO | NEXT |----<br/>  / |      |      | |  |      |      | |/ |      |      |  / <br/>    --------------- |  --------------- |  ---------------    <br/>                    --------------------</span></pre><p id="ebea" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">释放内存</p><pre class="kg kh ki kj gt kk kl km kn aw ko bi"><span id="f9d2" class="kp kq it kl b gy kr ks l kt ku">free (tmp2);</span><span id="766a" class="kp kq it kl b gy mk ks l kt ku">          TMP1<br/>    ---------------                       ---------------    <br/>  \ |      |      |                     \ |      |      |  \ <br/>----| INFO | NEXT |--                  ---| INFO | NEXT |----<br/>  / |      |      | |                  |/ |      |      |  / <br/>    --------------- |                  |  ---------------    <br/>                    --------------------</span></pre><p id="a5a6" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">这些是在c中管理列表的基本方法。</p><p id="e8a5" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我在这里放了完整的代码和一个试图执行代码的main</p><figure class="kg kh ki kj gt ju"><div class="bz fp l di"><div class="mq mr l"/></div></figure><pre class="kg kh ki kj gt kk kl km kn aw ko bi"><span id="9ed3" class="kp kq it kl b gy kr ks l kt ku">Compile:<br/>gcc -include list.c main.c</span><span id="99cc" class="kp kq it kl b gy mk ks l kt ku">Run:<br/>./a.out</span></pre><p id="1533" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">如果你有任何问题或者你已经用其他方式解决了它们，不要犹豫，在评论中写下它们！</p><p id="187d" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">为了获得无限的故事，你也可以考虑只花5美元注册成为媒体会员。如果你用我的 <a class="ae kf" href="https://pietrocolombo.medium.com/membership" rel="noopener"> <em class="ms">链接</em> </a> <em class="ms">注册，我会收到一点佣金。</em></p></div></div>    
</body>
</html>