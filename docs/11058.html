<html>
<head>
<title>How to create a docker image with AWS CLI and Serverless installed</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建安装了AWS CLI和无服务器的docker映像</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-create-a-simple-docker-image-with-aws-cli-and-serverless-installed-d1cc2901946?source=collection_archive---------0-----------------------#2022-02-11">https://levelup.gitconnected.com/how-to-create-a-simple-docker-image-with-aws-cli-and-serverless-installed-d1cc2901946?source=collection_archive---------0-----------------------#2022-02-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="7c75" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如何创建一个简单的docker映像并将其托管在docker hub上的分步指南</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/1e6ae224282906f7498e08c64afdbff3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A25oxBwse90VQNE21w4lNA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">Docker很酷！</figcaption></figure><p id="abea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">关于如何创建自己的docker映像并将其托管在docker hub上的简单易行的分步指南。在本教程中，我们将创建一个安装了以下软件的映像</p><ul class=""><li id="c307" class="le lf it js b jt ju jx jy kb lg kf lh kj li kn lj lk ll lm bi translated">Nodejs (v14)</li><li id="5566" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">饭桶</li><li id="985b" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">尝试</li><li id="922b" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">卷曲</li><li id="9f37" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">openssh</li><li id="bb15" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">py3-pip</li><li id="fde8" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">wget</li><li id="3723" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">aws cli</li><li id="b416" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">无服务器</li></ul><blockquote class="ls lt lu"><p id="d891" class="jq jr lv js b jt ju jv jw jx jy jz ka lw kc kd ke lx kg kh ki ly kk kl km kn im bi translated">第一步:在docker hub网站上创建一个账户，点击这里-<a class="ae lz" href="https://hub.docker.com/signup" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com/signup</a></p></blockquote><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ma"><img src="../Images/a4c8ae22d6f1064ee4daf710a8429fd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xPVxR2M_I8-OqYmSl_rDUA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">注册docker hub帐户</figcaption></figure><blockquote class="ls lt lu"><p id="0966" class="jq jr lv js b jt ju jv jw jx jy jz ka lw kc kd ke lx kg kh ki ly kk kl km kn im bi translated">第二步:在你的docker hub账户上创建一个新的存储库</p></blockquote><p id="b652" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae lz" href="https://hub.docker.com/repository/create?namespace=metacollective" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com/repository/create?namespace=</a>【你的账户名】。您可以根据需要将其标记为私有或公共。如果是私有的，那么只有那些你想要的人才能访问，对于公共的，它是为每个人准备的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mb"><img src="../Images/4ded6339129e9af09718da16f0f356a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U6iyEBwUPWmy87X19CcgAw.png"/></div></div></figure><blockquote class="ls lt lu"><p id="5417" class="jq jr lv js b jt ju jv jw jx jy jz ka lw kc kd ke lx kg kh ki ly kk kl km kn im bi translated">第三步:安装docker for desktop。你可以从https://www.docker.com/products/docker-desktop<a class="ae lz" href="https://www.docker.com/products/docker-desktop" rel="noopener ugc nofollow" target="_blank">下载可安装程序</a></p></blockquote><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mc"><img src="../Images/034a53cb202533994bf42030c1074fd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HZJZmIB1fA5eHAkYCpAbDQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">在你的机器上安装docker</figcaption></figure><blockquote class="ls lt lu"><p id="d056" class="jq jr lv js b jt ju jv jw jx jy jz ka lw kc kd ke lx kg kh ki ly kk kl km kn im bi translated">第四步:使用你的docker hub账户登录你的桌面docker</p></blockquote><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi md"><img src="../Images/0864b3d576c0ab1ef9c7f2515c91285b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*9oYp57yKv_p9iumDPPXgQQ.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">使用docker hub帐户登录</figcaption></figure><blockquote class="ls lt lu"><p id="0b29" class="jq jr lv js b jt ju jv jw jx jy jz ka lw kc kd ke lx kg kh ki ly kk kl km kn im bi translated">步骤5:打开你的编辑器(例如:visual studio代码)并添加一个名为Dockerfile的新文件。将以下几行添加到文件中</p></blockquote><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="me mf l"/></div></figure><blockquote class="ls lt lu"><p id="86eb" class="jq jr lv js b jt ju jv jw jx jy jz ka lw kc kd ke lx kg kh ki ly kk kl km kn im bi translated">FROM node:14-alpine:此图片基于流行的<a class="ae lz" href="https://alpinelinux.org/" rel="noopener ugc nofollow" target="_blank"> Alpine Linux项目</a>，可在<a class="ae lz" href="https://hub.docker.com/_/alpine" rel="noopener ugc nofollow" target="_blank"/><code class="fe mg mh mi mj b"><a class="ae lz" href="https://hub.docker.com/_/alpine" rel="noopener ugc nofollow" target="_blank">alpine</a></code><a class="ae lz" href="https://hub.docker.com/_/alpine" rel="noopener ugc nofollow" target="_blank">官方图片</a>中获得。Alpine Linux比大多数发行版基础映像要小得多(大约5MB)，因此一般来说映像也要小得多。</p></blockquote><p id="1939" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">像这样安装你想在这个映像中安装的各种包</p><blockquote class="ls lt lu"><p id="9c30" class="jq jr lv js b jt ju jv jw jx jy jz ka lw kc kd ke lx kg kh ki ly kk kl km kn im bi translated">运行apk更新&amp;&amp; apk添加—更新—无缓存\<br/>git \<br/>bash \<br/>curl \<br/>OpenSSH \<br/>python 3 \<br/>py3-pip \<br/>py-cryptography \<br/>wget \<br/>curl</p></blockquote><p id="3da2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">更新NPM</p><blockquote class="ls lt lu"><p id="dd2c" class="jq jr lv js b jt ju jv jw jx jy jz ka lw kc kd ke lx kg kh ki ly kk kl km kn im bi translated">运行npm配置集unsafe-perm true <br/>运行npm更新-g</p></blockquote><p id="85a3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">安装AWS CLI</p><blockquote class="ls lt lu"><p id="b045" class="jq jr lv js b jt ju jv jw jx jy jz ka lw kc kd ke lx kg kh ki ly kk kl km kn im bi translated">运行pip安装—升级pip &amp;&amp; \ <br/> pip安装—升级awscli</p></blockquote><p id="424e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">全局安装无服务器框架。您必须全局安装无服务器框架才能使其工作。如果你通过一个项目安装它，那么它将无法工作，你的任何无服务器命令将在这个镜像的容器中失败</p><blockquote class="ls lt lu"><p id="aee4" class="jq jr lv js b jt ju jv jw jx jy jz ka lw kc kd ke lx kg kh ki ly kk kl km kn im bi translated">运行npm install -g无服务器</p></blockquote><p id="be9b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，您已经准备好将该图像上传到docker hub。</p><p id="1156" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">转到您的终端，运行以下命令，从这个docker文件构建一个映像-</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="me mf l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">构建图像</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mk"><img src="../Images/648f88a773bedd29548d5aeb1fd7dce8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0SNKSNW4-OOLweuVnAQ1RQ.png"/></div></div></figure><p id="c599" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">构建完成后，您可以通过运行以下命令在本地机器上找到您的映像-</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="bdff" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，只需将您的图像推送到docker hub</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ml"><img src="../Images/076a7ec6d6e0fad761b6d578277384b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Oy64aNbqp23EyNwq_1Hnpw.png"/></div></div></figure><p id="44e3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">检查您的docker hub帐户，您的图像应该在那里。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mm mf l"/></div></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><p id="3a72" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">GitHub repo→<a class="ae lz" href="https://github.com/metacollective9/serverless_ci" rel="noopener ugc nofollow" target="_blank">https://github.com/metacollective9/serverless_ci</a></p><p id="c248" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">码头枢纽→ <code class="fe mg mh mi mj b">docker pull metacollective/serverless_ci</code></p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><p id="5c08" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢您的阅读，如果您想支持我，请关注我，成为会员，支持更广泛的社区。</p><div class="mu mv gp gr mw mx"><a href="https://medium.com/@metacollective/membership" rel="noopener follow" target="_blank"><div class="my ab fo"><div class="mz ab na cl cj nb"><h2 class="bd iu gy z fp nc fr fs nd fu fw is bi translated">通过我的推荐链接加入媒体Meta Collective</h2><div class="ne l"><h3 class="bd b gy z fp nc fr fs nd fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nf l"><p class="bd b dl z fp nc fr fs nd fu fw dk translated">medium.com</p></div></div><div class="ng l"><div class="nh l ni nj nk ng nl ky mx"/></div></div></a></div></div></div>    
</body>
</html>