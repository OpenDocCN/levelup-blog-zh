<html>
<head>
<title>The story of returning GraphQL errors while not knowing the standard.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä¸çŸ¥é“æ ‡å‡†å´è¿”å›GraphQLé”™è¯¯çš„æ•…äº‹ã€‚</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/the-story-of-returning-graphql-errors-while-not-knowing-the-standard-42f909ab2efa?source=collection_archive---------9-----------------------#2021-01-21">https://levelup.gitconnected.com/the-story-of-returning-graphql-errors-while-not-knowing-the-standard-42f909ab2efa?source=collection_archive---------9-----------------------#2021-01-21</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><h1 id="dac9" class="jr js iu bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated"><strong class="ak">TLï¼›DRåœ¨æ‚¨çš„GraphQLè°ƒç”¨ä¸Šè¿”å›çŠ¶æ€ä»£ç 200ã€‚</strong></h1></div><div class="ab cl kp kq hy kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="in io ip iq ir"><figure class="kx ky kz la gu lb gi gj paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gi gj kw"><img src="../Images/2f6a63c4f9dfcbc8cf652a3dd77d0acb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6BUme_7tRm5njbmL"/></div></div><figcaption class="li lj gk gi gj lk ll bd b be z dk translated">ç…§ç‰‡ç”±<a class="ae lm" href="https://unsplash.com/@ramche?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">æ‹‰ç±³å…¹Â·å¾·è¾¾ç§‘ç»´å¥‡</a>åœ¨<a class="ae lm" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„</figcaption></figure><p id="1680" class="pw-post-body-paragraph ln lo iu lp b lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk in bi translated">å¦‚æœä½ åƒæˆ‘ä¸€æ ·æ²¡æœ‰ä½¿ç”¨AppSyncå°±åœ¨å¼€å‘ä¸€ä¸ªGraphQL APIï¼Œä½ å¾ˆå¯èƒ½æ˜¯åœ¨ä½¿ç”¨API Gateway + Lambdaæ¥æ„å»ºä½ çš„GraphQLç«¯ç‚¹ã€‚</p><p id="3ed8" class="pw-post-body-paragraph ln lo iu lp b lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk in bi translated">åœ¨å‰ç«¯ï¼Œä½ å¯ä»¥åŒæ—¶ä½¿ç”¨Reactå’ŒAmplifyã€‚</p><p id="5334" class="pw-post-body-paragraph ln lo iu lp b lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk in bi translated">æ‚¨å·²ç»ç¼–å†™äº†æ‚¨çš„æ¨¡å¼ï¼Œå¹¶åœ¨åç«¯æ„å»ºäº†æ‚¨çš„æŸ¥è¯¢/å˜åŒ–ï¼›åœ¨å‰ç«¯ç¼–ç ä¸€äº›ç”¨æˆ·ç•Œé¢ã€‚ç„¶åï¼Œæ‚¨è®¤ä¸ºåº”è¯¥å¤„ç†æ¥è‡ªGraphQLçš„é”™è¯¯ï¼Œè¿™æ ·ï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œæ‚¨å¯ä»¥æ˜¾ç¤ºä¸€æ¡æ¼‚äº®çš„é”™è¯¯æ¶ˆæ¯ï¼Œé¿å…ç”¨æˆ·çš„å¤±æœ›ã€‚</p><p id="69bd" class="pw-post-body-paragraph ln lo iu lp b lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk in bi translated">æ‚¨è®¤ä¸ºè‡ªå·±å¾ˆèªæ˜ï¼Œä¸ºæ‚¨çš„GraphQLç«¯ç‚¹ç¼–å†™äº†ä»¥ä¸‹ä»£ç :</p><pre class="kx ky kz la gu ml mm mn mo aw mp bi"><span id="1def" class="mq js iu mm b gz mr ms l mt mu">export const handler = async event =&gt; {<br/>  try {<br/>    const body = JSON.parse(event.body)<br/>    const reply = await executeGraphql(body)<br/>    if (reply.errors) {<br/>      const errors = reply.errors<br/>      throw errors[0]<br/>    }<br/><br/>    return { statusCode: 200, reply }<br/>  } catch (err) {<br/>    return { statusCode: 400, err }<br/>  }<br/>}</span></pre><p id="57a8" class="pw-post-body-paragraph ln lo iu lp b lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk in bi translated">åœ¨ä½ çš„å‰ç«¯æœ‰è¿™æ ·çš„ä¸œè¥¿:</p><pre class="kx ky kz la gu ml mm mn mo aw mp bi"><span id="25af" class="mq js iu mm b gz mr ms l mt mu">import { API, graphqlOperation } from 'aws-amplify'<br/><br/>export const deleteAccount = async params =&gt; {<br/>  const mutation = `<br/>    mutation deleteAccount ($id: ID!) {<br/>      deleteAccount (id: $id) {<br/>        id<br/>      }<br/>    }<br/>  `<br/><br/>  try {<br/>    const operation = graphqlOperation(mutation, params)<br/>    const response = await API.graphql(operation)<br/>    return { result: response.data.deleteAccount }<br/>  } catch (err) {<br/>    return { error: err.errors[0] }<br/>  }<br/>}</span></pre><p id="6d42" class="pw-post-body-paragraph ln lo iu lp b lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk in bi translated">ä¸€åˆ‡éƒ½å‡†å¤‡å¥½äº†ï¼Œä½ å†³å®šè¯•ç€æ•…æ„å‡ºé”™ï¼Œè¿™æ ·ä½ å°±å¯ä»¥å¤„ç†é‚£äº›ç”¨æˆ·ç»å¸¸å‘ç°çš„è¾¹ç¼˜æƒ…å†µã€‚å½“æ‚¨è®°å½•é”™è¯¯æ—¶ï¼Œæ‚¨åªä¼šçœ‹åˆ°:</p><pre class="kx ky kz la gu ml mm mn mo aw mp bi"><span id="1d0e" class="mq js iu mm b gz mr ms l mt mu">Request failed with status code 400</span></pre><p id="0c2a" class="pw-post-body-paragraph ln lo iu lp b lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk in bi translated">æ‚¨æ„Ÿåˆ°æ²®ä¸§ï¼Œå› ä¸ºæ‚¨çš„åç«¯å·¥ä½œæ­£å¸¸ï¼Œå°†é”™è¯¯å‘é€å›å‰ç«¯ã€‚ä½†æ˜¯Amplifyåªæ˜¾ç¤ºä¸€èˆ¬çš„é”™è¯¯ï¼Œè€Œä¸æ˜¯å®é™…çš„é”™è¯¯ã€‚ä½ éª‚ä¸€ç‚¹ï¼Œè®¤å®šåº“æœ‰bugï¼Œå‰å›è´­ï¼Œå¼€ä¸€æœŸï¼Œåšä¸ªPRï¼Œç­‰ã€‚</p><p id="d2ec" class="pw-post-body-paragraph ln lo iu lp b lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk in bi translated">ç»ˆäºæœ‰äººå›å¤ä½ çš„é—®é¢˜äº†ã€‚ä½ æ¥å›èµ°äº†ä¸€ä¼šå„¿ï¼Œç„¶åä½ å‘ç°ä½ é”™äº†ï¼Œè€Œä¸æ˜¯å›¾ä¹¦é¦†ã€‚æ‚¨æ„è¯†åˆ°æ‚¨ä¸çŸ¥é“HTTPä¸Šçš„GraphQLå“åº”çŠ¶æ€ä»£ç çš„æ ‡å‡†æ˜¯ä»€ä¹ˆã€‚</p><h1 id="6cb9" class="jr js iu bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">æ˜¯200ã€‚</h1><p id="6248" class="pw-post-body-paragraph ln lo iu lp b lq mv ls lt lu mw lw lx ly mx ma mb mc my me mf mg mz mi mj mk in bi translated">æ‚¨å°†GraphQLç«¯ç‚¹ä»£ç æ›´æ”¹ä¸º:</p><pre class="kx ky kz la gu ml mm mn mo aw mp bi"><span id="7fdd" class="mq js iu mm b gz mr ms l mt mu">export const handler = async event =&gt; {<br/>  try {<br/>    const body = JSON.parse(event.body)<br/>    const reply = await executeGraphql(body)<br/>    return { statusCode: 200, reply }<br/>  } catch (err) {<br/>    return { statusCode: 400, err }<br/>  }<br/>}</span></pre><p id="6cba" class="pw-post-body-paragraph ln lo iu lp b lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk in bi translated">å½“åœ¨å‰ç«¯è®°å½•é”™è¯¯æ—¶ï¼Œæ‚¨ä¼šä»GraphQLè·å¾—å®é™…çš„é”™è¯¯ï¼Œè€Œä¸æ˜¯ä¸€èˆ¬çš„é”™è¯¯ã€‚</p><p id="59e3" class="pw-post-body-paragraph ln lo iu lp b lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk in bi translated">ä½ ä»¬ğŸ¤¦â€â™‚ä½ è‡ªå·±ï¼Œæ„Ÿè°¢å¸®åŠ©ä½ çš„äººï¼Œç»“æŸè¿™ä¸ªé—®é¢˜ã€‚</p><p id="00a1" class="pw-post-body-paragraph ln lo iu lp b lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk in bi translated">æ¯ä¸ªäººéƒ½å¾ˆå¼€å¿ƒğŸ‰</p><p id="11d6" class="pw-post-body-paragraph ln lo iu lp b lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk in bi translated">è­¦å¯Ÿã€‚å®é™…çš„Githubé—®é¢˜æ˜¯è¿™é‡Œçš„<a class="ae lm" href="https://github.com/aws-amplify/amplify-js/issues/7535" rel="noopener ugc nofollow" target="_blank"/>ã€‚</p><div class="na nb gq gs nc nd"><a href="https://blog.jagonzalr.com/membership" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fp"><div class="nf ab ng cl cj nh"><h2 class="bd iv gz z fq ni fs ft nj fv fx it bi translated">åŠ å…¥æˆ‘çš„ä»‹ç»é“¾æ¥åª’ä½“-ä½•å¡å®‰ä¸œå°¼å¥¥å†ˆè¨é›·æ–¯ç½—å¾·é‡Œæ ¼æ–¯</h2><div class="nk l"><h3 class="bd b gz z fq ni fs ft nj fv fx dk translated">ä½œä¸ºä¸€ä¸ªåª’ä½“ä¼šå‘˜ï¼Œä½ çš„ä¼šå‘˜è´¹çš„ä¸€éƒ¨åˆ†ä¼šç»™ä½ é˜…è¯»çš„ä½œå®¶ï¼Œä½ å¯ä»¥å®Œå…¨æ¥è§¦åˆ°æ¯ä¸€ä¸ªæ•…äº‹â€¦</h3></div><div class="nl l"><p class="bd b dl z fq ni fs ft nj fv fx dk translated">blog.jagonzalr.com</p></div></div><div class="nm l"><div class="nn l no np nq nm nr lg nd"/></div></div></a></div></div></div>    
</body>
</html>