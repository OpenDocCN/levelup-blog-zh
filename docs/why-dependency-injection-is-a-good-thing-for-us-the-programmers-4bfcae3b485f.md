# 为什么依赖注入对我们程序员来说是一件好事

> 原文：<https://levelup.gitconnected.com/why-dependency-injection-is-a-good-thing-for-us-the-programmers-4bfcae3b485f>

## 这都是关于松散耦合的。让我们休息一会儿，我会解释这一切。

![](img/a70613a4a112b33e573c4113980d6438.png)

Christophe Hautier 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 拍摄的照片

这些例子是用 Kotlin 编写的，但是没有利用它特殊的语法功能，以便每个程序员都能理解。

如果我们的咖啡机不在咖啡站呢？如果相反，有一个空的空间，每次我们想喝咖啡，我们都必须从头开始建造机器。

在软件中，一切都比现实运行速度快一百万倍，所以编写这样的代码是合理的:

但问题是，在现实中，没有一台咖啡机可以用空的构造器来构建。虽然结构性能可能不是一个因素，但使用咖啡机时涉及的结构复杂性肯定会:

你能从代码中看出程序员在休息时间做什么吗？仅仅因为一个程序员没能造出咖啡机，她就应该不喝咖啡工作吗？在喝咖啡之前，怎么可能和所有这些人交谈呢？所有这些现在都是穷人`programmer`关心的问题，她只想喝她的咖啡。

## 但是你可以把它全部转移到另一个负责创建咖啡机的类中，对吗？

好主意。这正是[工厂设计模式](https://en.wikipedia.org/wiki/Factory_method_pattern)的意义所在。

它清理了代码，但是迟早它将不得不再次改变。这是因为我们这些程序员被宠坏了:我们喜欢品尝来自不同机器的咖啡，而这些机器不一定是在同一个工厂制造的。

如你所见，**工厂推迟了建造复杂性**但并没有使其消失。

## 好的。那么你的建议是什么？

在现实生活中，工具的构造和使用是两个相互分离的不同过程。人类总是利用这一点。想想吧。史前人类在准备刺猛犸象之前造出了他的矛吗？

我们程序员休息的时候不需要忙着咖啡机的搭建。她当然不需要从工厂带新机器来。咖啡机只是程序员用来快速煮咖啡的工具，这样她就可以回到真正的工作:写代码！

## 不错的理论。依赖注入与此有什么关系？

依赖注入是一种架构方法，其中类的构造代码和它们的使用被系统地分离。**如何？**有几种技巧，但其中之一是[](https://en.wikipedia.org/wiki/Dependency_inversion_principle)****构式依存倒置。**这意味着`CoffeeMachine`结构不应该与使用它的`Programmer`紧密耦合。相反:`Programmer`的建造，毫无疑问，应该依靠`CoffeeMachine`:**

## **但是这不就是把咖啡机构造移到了容纳程序员的类吗？**

**不一定。以一个希望持有一个`Programmer`的`SoftwareCompanyX`为例:通过再次遵循**依赖反转原则**，我们将仅仅使`SoftwareCompanyX`的结构依赖于`Programmer`，而不是将`Programmer`的结构与`SoftwareCompanyX`紧密耦合:**

**这很棒，因为`Programmer`可以轻松地移动到另一个`SoftwareCompany`并在那里休息。她所需要的只是有人给她提供一份`CoffeeMachine`的推荐信，她就可以重操旧业了！**

## **你在开玩笑吗？最终，有人将不得不建造一切**

**没错。这个人将是**唯一一个需要处理一个特定类簇的构造细节的人。这也将是他的单一责任。这个组合的根在大多数依赖注入框架中被称为`Module`。****

**所以`SoftwareCompanyModule`负责连接所有东西，只对外公开`SoftwareCompany`。**

## **有意思。那么我为什么需要依赖注入框架呢？**

**仍然有一些问题需要答案:**

*   **谁应该实例化一个模块？**
*   **如果一个模块依赖于其他模块怎么办？**
*   **如何在几个地方共享同一个对象实例？**
*   **单元测试呢？**

**依赖注入框架有助于应对这些挑战，因此您可以专注于自己领域的挑战，而不是重新发明轮子。**

**咖啡休息时间已经结束了。谢谢你的倾听，我希望你学到了新的东西。我很想听听你的想法，并回答你可能有的关于这个话题的问题。**

# **分级编码**

**感谢您成为我们社区的一员！ [**订阅我们的 YouTube 频道**](https://www.youtube.com/channel/UC3v9kBR_ab4UHXXdknz8Fbg?sub_confirmation=1) 或者加入 [**Skilled.dev 编码面试课程**](https://skilled.dev) 。**

**[](https://skilled.dev) [## 编写面试问题

### 掌握编码面试的过程

技术开发](https://skilled.dev)**