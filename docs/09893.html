<html>
<head>
<title>Visualize Your Python Execution in Real Time</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实时可视化您的Python执行</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/visualize-your-python-execution-in-real-time-5be3c2270279?source=collection_archive---------5-----------------------#2021-09-28">https://levelup.gitconnected.com/visualize-your-python-execution-in-real-time-5be3c2270279?source=collection_archive---------5-----------------------#2021-09-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="84c4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用PyHeat和HeartRate运行、调试和可视化Python脚本运行时</h2></div><p id="d9b2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一幅画胜过千言万语。这是真的，尤其是在编程中，程序会变得越来越复杂和困难。想象一下，有一天你不得不从别人那里接管一个程序，事先不知道，也可能没有未来的支持。理解程序可能需要一段时间，更不用说调试了。介绍<code class="fe le lf lg lh b">PyHeat</code>和<code class="fe le lf lg lh b">HeartRate</code>，这两个Python库可以通过可视化程序的运行时或执行来帮助解决这些问题！</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi li"><img src="../Images/859b15c145238290bb5aa7351d845340.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*evDpGn_0Ttgtkl5N"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">马库斯·温克勒在<a class="ae ly" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="569b" class="md me it lh b gy mf mg l mh mi"><strong class="lh iu">Table of Content</strong><br/>1. PyHeat<br/>2. HeartRate</span></pre><blockquote class="mj mk ml"><p id="6e9a" class="ki kj mm kk b kl km ju kn ko kp jx kq mn ks kt ku mo kw kx ky mp la lb lc ld im bi translated">请订阅我的<a class="ae ly" href="https://tinyurl.com/2npw2fnz" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">电子邮件简讯</strong> </a>，在那里我会定期用简单的英语和漂亮的可视化语言总结编程技巧和人工智能研究论文。</p></blockquote></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="479d" class="mx me it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">PyHeat</h1><p id="d031" class="pw-post-body-paragraph ki kj it kk b kl no ju kn ko np jx kq kr nq kt ku kv nr kx ky kz ns lb lc ld im bi translated">首先，让我们使用<code class="fe le lf lg lh b">pip</code>安装<code class="fe le lf lg lh b">PyHeat</code>，如下所示:</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="d15d" class="md me it lh b gy mf mg l mh mi">pip install py-heat</span></pre><p id="540f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们要写一个<code class="fe le lf lg lh b">heap_sort.py</code>的样本程序。你可以在这里找到代码<a class="ae ly" href="https://www.geeksforgeeks.org/heap-sort/" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="b693" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建Python程序后，我们可以开始逐行可视化<code class="fe le lf lg lh b">heap_sort.py</code>的运行时:</p><ul class=""><li id="c2b6" class="nt nu it kk b kl km ko kp kr nv kv nw kz nx ld ny nz oa ob bi translated">导入<code class="fe le lf lg lh b">pyheat</code>库和<code class="fe le lf lg lh b">PyHeat</code>类</li></ul><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="ea61" class="md me it lh b gy mf mg l mh mi">from pyheat import PyHeat</span></pre><ul class=""><li id="151e" class="nt nu it kk b kl km ko kp kr nv kv nw kz nx ld ny nz oa ob bi translated">创建并显示热图</li></ul><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="9d50" class="md me it lh b gy mf mg l mh mi">ph = PyHeat('heap_sort.py')<br/>ph.create_heatmap()<br/>ph.show_heatmap()</span></pre><p id="1fec" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">完成后，将绘制如下图:</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/5d4dcb206004430b3179526fceca57aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*eiZUiDaxsNaFCHZ9LxrcBg.png"/></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">PyHeat热图(图片来自作者)</figcaption></figure><p id="cae5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在热图中，我们可以分析程序的运行时是什么样子的。如前所述，以下代码运行时间较长(这是意料之中的):<code class="fe le lf lg lh b">loops</code>、<code class="fe le lf lg lh b">conditional if/else</code>和<code class="fe le lf lg lh b">recursion</code>。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="ad74" class="mx me it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">心率</h1><p id="31c2" class="pw-post-body-paragraph ki kj it kk b kl no ju kn ko np jx kq kr nq kt ku kv nr kx ky kz ns lb lc ld im bi translated">与<code class="fe le lf lg lh b">PyHeat</code>类似，<code class="fe le lf lg lh b">HeartRate</code>允许您实时地逐行分析您的Python代码。但是不同之处在于<code class="fe le lf lg lh b">HeartRate</code>能够在本地网络服务器上显示诊断信息。此外，<code class="fe le lf lg lh b">HeartRate</code>直接合并到您的代码中，而不是像<code class="fe le lf lg lh b">PyHeat</code>那样单独合并。</p><p id="64c9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们要安装类似PyHeat的库。</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="156c" class="md me it lh b gy mf mg l mh mi">pip install heartrate</span></pre><p id="9598" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们将把<code class="fe le lf lg lh b">HeartRate</code>合并到我们的<code class="fe le lf lg lh b">heap_sort.py</code>程序中，如下所示(我已经编辑了主程序，并且只强调了<code class="fe le lf lg lh b">HeartRate)</code>的用法。</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="f88f" class="md me it lh b gy mf mg l mh mi">import heartrate<br/>heartrate.trace(browser=True)</span><span id="a7a8" class="md me it lh b gy od mg l mh mi">def heapify():<br/>....</span></pre><p id="ac68" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">并在终端中运行您的程序:</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="c1a7" class="md me it lh b gy mf mg l mh mi">python heap_sort.py</span></pre><p id="2760" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过键入以下命令(<code class="fe le lf lg lh b">HeartRate</code>正在使用端口<code class="fe le lf lg lh b">9999</code>)，您将能够在本地浏览器中访问诊断信息:</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="74b0" class="md me it lh b gy mf mg l mh mi">http://localhost:9999/file/?filename=&lt;PROGRAM_NAME&gt;</span></pre><p id="c110" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们的例子中，浏览器URL是这样的:</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="b8a9" class="md me it lh b gy mf mg l mh mi">http://localhost:9999/file/?filename=heap_sort.py</span></pre><p id="67fc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您将得到的视觉效果如下图所示，其中行号旁边的蓝色框表示程序的预计运行时间。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi oe"><img src="../Images/44b6ec484052c093a21f2094c074b899.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IW8IHGrNFN3NPL-W40XeqA.png"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">心率诊断(图片来自作者)</figcaption></figure><p id="0714" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">与<code class="fe le lf lg lh b">PyHeat</code>类似，循环、条件语句和递归调用占用了大部分运行时和执行资源。这些观察是意料之中的，表明我们的程序按照要求工作！</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="d50a" class="mx me it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">结束语</h1><p id="df07" class="pw-post-body-paragraph ki kj it kk b kl no ju kn ko np jx kq kr nq kt ku kv nr kx ky kz ns lb lc ld im bi translated">所以教程到此为止！在这篇文章中，我们学习了如何安装和使用<code class="fe le lf lg lh b">PyHeat</code>和<code class="fe le lf lg lh b">HeartRate</code>。两者各有利弊。虽然<code class="fe le lf lg lh b">PyHeat</code>允许我们看到精确的执行时间，但是<code class="fe le lf lg lh b">HeartRate</code>允许你将库直接嵌入到你的程序中。根据您的使用案例和需求，它们中的任何一个都可能是有价值的诊断资产。一个可能的用例是监控您的程序在真实环境中的运行情况，在高压力条件下是否存在可能的瓶颈。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="3c68" class="mx me it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">完整代码</h1><p id="930b" class="pw-post-body-paragraph ki kj it kk b kl no ju kn ko np jx kq kr nq kt ku kv nr kx ky kz ns lb lc ld im bi translated">如果您发现很难获得<code class="fe le lf lg lh b">heap_sort.py</code>的完整代码，下面的代码片段可能会有用。</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="8c50" class="md me it lh b gy mf mg l mh mi">def heapify(arr, n, i):<br/>    largest = i<br/>    l = 2 * i + 1 <br/>    r = 2 * i + 2 </span><span id="9a58" class="md me it lh b gy od mg l mh mi">    if l &lt; n and arr[i] &lt; arr[l]: largest = l<br/>    if r &lt; n and arr[largest] &lt; arr[r]: largest = r<br/>    if largest != i:<br/>        arr[i],arr[largest] = arr[largest],arr[i]<br/>        heapify(arr, n, largest)</span><span id="b143" class="md me it lh b gy od mg l mh mi"><br/>def heapSort(arr):<br/>    n = len(arr)<br/>    for i in range(n // 2 - 1, -1, -1): heapify(arr, n, i)</span><span id="e00f" class="md me it lh b gy od mg l mh mi">    for i in range(n-1, 0, -1):<br/>        arr[i], arr[0] = arr[0], arr[i]<br/>        heapify(arr, i, 0)</span><span id="1e41" class="md me it lh b gy od mg l mh mi"># Driver code to test above<br/>arr = [ 12, 11, 13, 5, 6, 7]<br/>heapSort(arr)<br/>n = len(arr)<br/>print ("Sorted array is")</span><span id="100a" class="md me it lh b gy od mg l mh mi">for i in range(n):<br/>    print ("%d" %arr[i]),</span></pre></div></div>    
</body>
</html>