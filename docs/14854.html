<html>
<head>
<title>Interacting with the Ethereum Network using Java and Web3j</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨Javaå’ŒWeb3jä¸ä»¥å¤ªç½‘äº¤äº’</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/interacting-with-the-ethereum-network-using-java-and-web3j-cea2fe5d8aef?source=collection_archive---------16-----------------------#2022-12-28">https://levelup.gitconnected.com/interacting-with-the-ethereum-network-using-java-and-web3j-cea2fe5d8aef?source=collection_archive---------16-----------------------#2022-12-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="64a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç”¨Javaè¿›è¡ŒERC 20ä»¤ç‰Œç®¡ç†çš„å®è·µæŒ‡å—</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/c260a5edb923ea2521da51f529ba57b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wd-omZw6whg1C1GB5vjvJw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">æ¥æº:https://docs.web3j.io/latest/</figcaption></figure><h1 id="710e" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">ä»‹ç»</h1><p id="0617" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated"><strong class="jp ir">ä»¥å¤ªåŠ</strong>æ˜¯ä¸€ä¸ªå»ä¸­å¿ƒåŒ–ã€å¼€æºçš„åŒºå—é“¾å¹³å°ï¼Œæ”¯æŒæ™ºèƒ½åˆçº¦å’Œå»ä¸­å¿ƒåŒ–åº”ç”¨(dApps)çš„åˆ›å»ºã€‚ä½œä¸ºå¸‚å€¼ç¬¬äºŒå¤§çš„åŒºå—é“¾å¹³å°ï¼Œä»¥å¤ªåŠå› å…¶çµæ´»æ€§å’ŒåŠŸèƒ½è€Œè¢«å¹¿æ³›é‡‡ç”¨ã€‚</p><p id="21f3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">åˆ†æ•£åº”ç”¨</strong>ï¼Œæˆ–dAppsï¼Œæ˜¯è¿è¡Œåœ¨åŒºå—é“¾ç½‘ç»œä¹‹ä¸Šçš„åº”ç”¨ã€‚å®ƒä»¬æä¾›äº†å„ç§å¥½å¤„ï¼Œå¦‚é€æ˜æ€§ã€åˆ†æ•£æ€§å’ŒæŠ—æ”»å‡»æ€§ã€‚ç”±äºè¿™äº›ä¼˜åŠ¿ï¼ŒdAppsåœ¨å„ç§ç”¨ä¾‹ä¸­éƒ½å¾ˆå—æ¬¢è¿ï¼ŒåŒ…æ‹¬æ¸¸æˆã€é‡‘èã€ç¤¾äº¤åª’ä½“ç­‰ã€‚ä¸ºäº†å‘æŒ¥åŠŸèƒ½ï¼ŒdAppséœ€è¦ä¸€ç§æ–¹æ³•æ¥ä¸å®ƒä»¬è¿è¡Œçš„åŒºå—é“¾é€šä¿¡ã€‚è¿™å°±æ˜¯ä»¥å¤ªåŠRPCèŠ‚ç‚¹å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚</p><p id="a5cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ºäº†å®ç°dAppså’Œä»¥å¤ªåŠç½‘ç»œä¹‹é—´çš„é€šä¿¡ï¼Œä½¿ç”¨äº†<strong class="jp ir">ä»¥å¤ªåŠRPC </strong>èŠ‚ç‚¹ã€‚è¿™äº›èŠ‚ç‚¹ä¿ƒè¿›äº†dAppså’Œä»¥å¤ªåŠåŒºå—é“¾ä¹‹é—´çš„è¿æ¥ï¼Œå…è®¸dAppsåœ¨ç½‘ç»œä¸Šè®¿é—®ä¿¡æ¯å’Œè¿›è¡Œäº¤æ˜“ã€‚è¿™æ ·ä¸€æ¥ï¼Œä»¥å¤ªåŠRPCèŠ‚ç‚¹å°±æ˜¯dappå¼€å‘ä¸­å¿…ä¸å¯å°‘çš„å…ƒç´ ï¼Œæ¯ä¸ªä»¥å¤ªåŠå®¢æˆ·ç«¯éƒ½å®ç°äº†ä¸€ä¸ªJSON-RPCè§„èŒƒï¼Œä¸ºdappæä¾›ä¸€ç»„ç»Ÿä¸€çš„æ–¹æ³•ä¾›å…¶ä½¿ç”¨ï¼Œè€Œä¸è€ƒè™‘å…·ä½“çš„èŠ‚ç‚¹æˆ–å®¢æˆ·ç«¯å®ç°ã€‚</p><p id="44f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨è¿™ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ¢ç´¢å¦‚ä½•ä½¿ç”¨Web3jä¸ä»¥å¤ªç½‘è¿›è¡Œäº¤äº’ï¼ŒWeb3jæ˜¯æµè¡Œçš„web 3æŠ½è±¡åº“çš„Javaå®ç°ã€‚æˆ‘ä»¬å°†è®¨è®ºè¿æ¥ä»¥å¤ªåŠèŠ‚ç‚¹ã€ä½¿ç”¨æ™ºèƒ½åˆçº¦å’Œç®¡ç†ERC-20ä»¤ç‰Œç­‰ä¸»é¢˜ã€‚åœ¨æœ¬æ–‡ç»“æŸæ—¶ï¼Œæ‚¨å°†ä¼šæ›´å¥½åœ°ç†è§£å¦‚ä½•ä½¿ç”¨Web3jåœ¨ä»¥å¤ªç½‘ä¸Šæ„å»ºå’Œéƒ¨ç½²åˆ†æ•£å¼åº”ç”¨ç¨‹åºã€‚</p><h1 id="f5ee" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">ä½¿ç”¨Web3jå’ŒJavaä¸ä»¥å¤ªç½‘äº¤äº’</h1><p id="7914" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">Web3jæ˜¯ä¸€ä¸ªè½»é‡çº§ã€é«˜åº¦æ¨¡å—åŒ–ã€ååº”å¼ã€ç±»å‹å®‰å…¨çš„Javaå’ŒAndroidåº“ï¼Œç”¨äºä¸æ™ºèƒ½åˆçº¦äº¤äº’ä»¥åŠä¸ä»¥å¤ªåŠç½‘ç»œä¸Šçš„å®¢æˆ·ç«¯(èŠ‚ç‚¹)é›†æˆã€‚é€šè¿‡ä½¿ç”¨Web3jï¼Œå¼€å‘äººå‘˜å¯ä»¥è½»æ¾åœ°ä½¿ç”¨ä»¥å¤ªåŠåŒºå—é“¾ï¼Œè€Œæ— éœ€ç¼–å†™è‡ªå·±çš„é›†æˆä»£ç ã€‚æ‚¨å¯ä»¥åœ¨ä¸‹é¢çš„GitHubèµ„æºåº“ä¸­æ‰¾åˆ°Web3jçš„å·¥ä½œç¤ºä¾‹:<a class="ae lb" href="https://github.com/apappascs/erc20-java-web3j" rel="noopener ugc nofollow" target="_blank">https://github.com/apappascs/erc20-java-web3j</a>ã€‚</p><p id="62a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¦å¼€å§‹ä½¿ç”¨Web3jï¼Œæ‚¨éœ€è¦ä½¿ç”¨Ethereum RPCç«¯ç‚¹è®¾ç½®ä¸€ä¸ªWeb3jæä¾›è€…ã€‚è¿™å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç æ¥å®Œæˆ:</p><pre class="km kn ko kp gt mf mg mh bn mi mj bi"><span id="d952" class="mk ld iq mg b be ml mm l mn mo">public class Web3Provider {<br/>    private static final String PUBLIC_RPC = "https://cloudflare-eth.com";<br/>    public static final Web3j web3j = Web3j.build(new HttpService(PUBLIC_RPC));<br/>}</span></pre><p id="f80e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨ä¸Šé¢çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯Cloudflareæä¾›çš„å…¬å…±ä»¥å¤ªåŠRPCç«¯ç‚¹ã€‚ç„¶è€Œï¼Œä½ å¯ä»¥ä½¿ç”¨ä»»ä½•æä¾›è€…ï¼Œæ¯”å¦‚Alchemyï¼ŒInfuraï¼Œæ¯”ç‰¹å¸åŸºåœ°äº‘ï¼Œæˆ–è€…Moralisç­‰ç­‰ã€‚</p><p id="f0cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾ä»¥å¤ªåŠæä¾›è€…å’Œå…¬å…±ç«¯ç‚¹çš„åˆ—è¡¨ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹RPCèŠ‚ç‚¹å’Œæä¾›è€…çš„<a class="ae lb" href="https://github.com/arddluma/awesome-list-rpc-nodes-providers" rel="noopener ugc nofollow" target="_blank">ç‰›é€¼åˆ—è¡¨ã€‚æ­¤èµ„æºæä¾›äº†ä¸€ä¸ªä»¥å¤ªåŠæä¾›å•†å’Œå…¬å…±ä»¥å¤ªåŠRPCç«¯ç‚¹çš„åˆ—è¡¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥è¿æ¥åˆ°ä»¥å¤ªåŠç½‘ç»œã€‚</a></p><p id="f660" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»å»ºç«‹äº†ä¸€ä¸ªWeb3jæä¾›è€…ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹ä¸ä»¥å¤ªåŠç½‘ç»œäº¤äº’äº†ã€‚Web3jæä¾›äº†å¤§é‡ä½¿ç”¨ä»¥å¤ªåŠèŠ‚ç‚¹çš„æ–¹æ³•ï¼Œæ¯”å¦‚æŸ¥è¯¢ä»¥å¤ªåŠåœ°å€çš„ä½™é¢æˆ–è°ƒç”¨æ™ºèƒ½å¥‘çº¦æ–¹æ³•ã€‚</p><p id="51b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¼€å‘äººå‘˜å¯èƒ½å¸Œæœ›æ‰§è¡Œçš„ä¸€ä¸ªå¸¸è§ä»»åŠ¡æ˜¯æ£€æŸ¥å½“å‰çš„å¤©ç„¶æ°”ä»·æ ¼ã€‚æ°”ä»·æ˜¯åœ¨ä»¥å¤ªåŠç½‘ç»œä¸Šæ‰§è¡Œäº¤æ˜“éœ€è¦æ”¯ä»˜çš„ä¹™é†šé‡ã€‚æ‚¨å¯ä»¥ä½¿ç”¨Web3jæä¾›çš„<code class="fe mp mq mr mg b">ethGasPrice</code>æ–¹æ³•æ¥æ£€ç´¢å½“å‰çš„å¤©ç„¶æ°”ä»·æ ¼ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤º:</p><pre class="km kn ko kp gt mf mg mh bn mi mj bi"><span id="26ef" class="mk ld iq mg b be ml mm l mn mo">public static BigDecimal getEthGasPrice() throws Exception {<br/>    EthGasPrice ethGasPrice = web3j.ethGasPrice().send();<br/>    return Convert.fromWei(ethGasPrice.getGasPrice().toString(), Convert.Unit.GWEI);<br/>}</span></pre><p id="0e8f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦ä¸€ä¸ªå¸¸è§çš„ä»»åŠ¡æ˜¯æ£€æŸ¥ä»¥å¤ªåŠåœ°å€çš„ä½™é¢ã€‚æ‚¨å¯ä»¥ä½¿ç”¨Web3jæä¾›çš„<code class="fe mp mq mr mg b">ethGetBalance</code>æ–¹æ³•æ¥æ£€ç´¢ç»™å®šåœ°å€çš„ä½™é¢ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤º:</p><pre class="km kn ko kp gt mf mg mh bn mi mj bi"><span id="233b" class="mk ld iq mg b be ml mm l mn mo">public static BigDecimal getEthGetBalance(final String walletAddress) throws Exception {<br/>    EthGetBalance ethBalance = web3j.ethGetBalance(walletAddress, DefaultBlockParameterName.LATEST).send();<br/>    return Convert.fromWei(ethBalance.getBalance().toString(), Convert.Unit.ETHER);<br/>}</span></pre><p id="6a7a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™äº›åªæ˜¯Web3jæä¾›çš„ä¸ä»¥å¤ªåŠèŠ‚ç‚¹äº¤äº’çš„è®¸å¤šæ–¹æ³•ä¸­çš„å‡ ä¸ªä¾‹å­ã€‚ä½ å¯ä»¥åœ¨Web3jæ–‡æ¡£é¡µé¢<a class="ae lb" href="https://docs.web3j.io" rel="noopener ugc nofollow" target="_blank"> https://docs.web3j.io </a>ä¸Šæ‰¾åˆ°æ›´å¤šä¿¡æ¯ã€‚</p><h2 id="abe9" class="ms ld iq bd le mt mu dn li mv mw dp lm jy mx my lq kc mz na lu kg nb nc ly nd bi translated">ERC-20ä»¤ç‰Œç®¡ç†</h2><p id="b0d9" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">https://eips.ethereum.org/EIPS/eip-20<a class="ae lb" href="https://eips.ethereum.org/EIPS/eip-20" rel="noopener ugc nofollow" target="_blank">çš„ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆ(EIP) 20ä¸­å®šä¹‰äº†ERC-20ï¼Œè¿™æ˜¯ä¸€ä¸ªåœ¨ä»¥å¤ªåŠç½‘ç»œä¸Šåˆ›å»ºå’Œå‘è¡Œä»¤ç‰Œçš„æµè¡Œæ ‡å‡†ã€‚è¯¥æ ‡å‡†å®šä¹‰äº†ä¸€ç»„è§„åˆ™ï¼Œä»»ä½•å¸Œæœ›è¢«è§†ä¸ºERC-20ä»¤ç‰Œçš„ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦éƒ½å¿…é¡»éµå¾ªè¿™äº›è§„åˆ™ï¼Œä»¥ç¡®ä¿ä¸æ”¯æŒERC-20ä»¤ç‰Œçš„å…¶ä»–åˆçº¦å’Œé’±åŒ…å…¼å®¹ã€‚</a></p><p id="9af2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¦ä½¿ç”¨Web3jå¤„ç†ERC-20ä»¤ç‰Œï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code class="fe mp mq mr mg b">ERC20.load()</code>æ–¹æ³•æ¥åŠ è½½å¥‘çº¦å¹¶è°ƒç”¨å…¶å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯ä»¥ä½¿ç”¨Web3jé€šè¿‡ERC-20ä»¤ç‰Œæ‰§è¡Œçš„å¸¸è§ä»»åŠ¡çš„ç¤ºä¾‹:</p><pre class="km kn ko kp gt mf mg mh bn mi mj bi"><span id="c15d" class="mk ld iq mg b be ml mm l mn mo">private static final ContractGasProvider contractGasProvider = new DefaultGasProvider();<br/>private static final TransactionManager readOnlyTransactionManager = new ReadonlyTransactionManager(web3j, FROM_ADDRESS);<br/><br/>private static final ERC20 loadERC20Contract(final String contractAddress) {<br/>    return ERC20.load(contractAddress, web3j, readOnlyTransactionManager, contractGasProvider);<br/>}<br/>    <br/>public static String getName(final String contractAddress) throws Exception {<br/>    return loadERC20Contract(contractAddress).name().send();<br/>}<br/><br/>public static String getSymbol(final String contractAddress) throws Exception {<br/>    return loadERC20Contract(contractAddress).symbol().send();<br/>}<br/><br/>public static BigDecimal getTotalSupply(final String contractAddress) throws Exception {<br/>    BigInteger totalSupply = loadERC20Contract(contractAddress).totalSupply().send();<br/>    return Convert.fromWei(totalSupply.toString(), Convert.Unit.ETHER);<br/>}<br/><br/>public static BigDecimal getBalanceOf(final String contractAddress, final String walletAddress) throws Exception {<br/>    BigInteger balanceOf = loadERC20Contract(contractAddress).balanceOf(walletAddress).send();<br/>    return Convert.fromWei(balanceOf.toString(), Convert.Unit.ETHER);<br/>}</span></pre><p id="6c7a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ–¹æ³•<code class="fe mp mq mr mg b">name()</code>è¿”å›ä¸ç»™å®šåˆåŒåœ°å€ç›¸å…³è”çš„ERC-20ä»¤ç‰Œçš„åç§°ã€‚<code class="fe mp mq mr mg b">symbol()</code>æ–¹æ³•è¿”å›ä»¤ç‰Œçš„ç¬¦å·ã€‚<code class="fe mp mq mr mg b">totalSupply()</code>æ–¹æ³•è¿”å›ä»¤ç‰Œçš„æ€»ä¾›åº”é‡ã€‚å¹¶ä¸”<code class="fe mp mq mr mg b">balanceOf()</code>æ–¹æ³•è¿”å›ç»™å®šé’±åŒ…åœ°å€çš„ERC-20ä»¤ç‰Œçš„ä½™é¢ã€‚</p><h2 id="cc06" class="ms ld iq bd le mt mu dn li mv mw dp lm jy mx my lq kc mz na lu kg nb nc ly nd bi translated">Web3j â€”æŸ¥è¯¢æ™ºèƒ½åˆçº¦çš„çŠ¶æ€</h2><p id="8b76" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">è¦ä½¿ç”¨Web3jæŸ¥è¯¢æ™ºèƒ½åˆçº¦çš„çŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨<code class="fe mp mq mr mg b">eth_call</code> JSON-RPCæ–¹æ³•(<a class="ae lb" href="https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_call" rel="noopener ugc nofollow" target="_blank">https://ether eum . org/en/developers/docs/APIs/JSON-RPC/# eth _ call</a>)ã€‚æ­¤æ–¹æ³•å…è®¸æ‚¨è°ƒç”¨æ™ºèƒ½åå®šä¸Šçš„æ–¹æ³•æ¥æŸ¥è¯¢å…¶çŠ¶æ€ï¼Œè€Œæ— éœ€åœ¨åŒºå—é“¾ä¸Šåˆ›å»ºäº‹åŠ¡ã€‚</p><p id="4c71" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¦ä½¿ç”¨<code class="fe mp mq mr mg b">eth_call</code>ï¼Œæ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ª<code class="fe mp mq mr mg b">Function</code>å¯¹è±¡æ¥è¡¨ç¤ºæ‚¨æƒ³è¦è°ƒç”¨çš„æ–¹æ³•ã€‚æ‚¨å¯ä»¥é€šè¿‡æŒ‡å®šæ–¹æ³•åã€è¡¨ç¤ºæ–¹æ³•å‚æ•°çš„è¾“å…¥<code class="fe mp mq mr mg b">Type</code>å¯¹è±¡åˆ—è¡¨å’Œè¡¨ç¤ºæ–¹æ³•è¿”å›ç±»å‹çš„<code class="fe mp mq mr mg b">TypeReference</code>å¯¹è±¡åˆ—è¡¨æ¥å®ç°è¿™ä¸€ç‚¹ã€‚</p><p id="0d6d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸€æ—¦åˆ›å»ºäº†<code class="fe mp mq mr mg b">Function</code>å¯¹è±¡ï¼Œå°±å¯ä»¥ä½¿ç”¨<code class="fe mp mq mr mg b">FunctionEncoder</code>ç±»å°†å®ƒç¼–ç æˆå¯ä»¥åœ¨<code class="fe mp mq mr mg b">eth_call</code>è¯·æ±‚ä¸­ä½¿ç”¨çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code class="fe mp mq mr mg b">web3j.ethCall</code>æ–¹æ³•å‘é€<code class="fe mp mq mr mg b">eth_call</code>è¯·æ±‚ï¼Œå°†è¡¨ç¤ºè°ƒç”¨çš„<code class="fe mp mq mr mg b">Transaction</code>å¯¹è±¡ã€å¥‘çº¦åœ°å€å’Œç¼–ç å‡½æ•°æŒ‡å®šä¸ºå‚æ•°ã€‚</p><p id="4bfc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¦ä»<code class="fe mp mq mr mg b">eth_call</code>è¯·æ±‚ä¸­è·å¾—å“åº”ï¼Œæ‚¨å¯ä»¥è°ƒç”¨<code class="fe mp mq mr mg b">sendAsync</code>æ–¹æ³•å¹¶ä½¿ç”¨<code class="fe mp mq mr mg b">FunctionReturnDecoder</code>ç±»å°†å“åº”å€¼è§£ç æˆä¸€ä¸ªè¡¨ç¤ºå‡½æ•°è¿”å›å€¼çš„<code class="fe mp mq mr mg b">Type</code>å¯¹è±¡åˆ—è¡¨ã€‚</p><p id="5d11" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨Web3jæŸ¥è¯¢æ™ºèƒ½åˆçº¦çŠ¶æ€çš„ç¤ºä¾‹:</p><pre class="km kn ko kp gt mf mg mh bn mi mj bi"><span id="b3d3" class="mk ld iq mg b be ml mm l mn mo">// Solidity Types in smart contract functions<br/>List&lt;Type&gt; inputParameters = Arrays.asList(new Type(value));<br/>List&lt;TypeReference&lt;Type&gt;&gt; outputParameters = Arrays.asList(new TypeReference&lt;Type&gt;() {});<br/>Function function = new Function("functionName", inputParameters, outputParameters);<br/>String encodedFunction = FunctionEncoder.encode(function);<br/>EthCall response = web3j.ethCall(Transaction.createEthCallTransaction(fromWalletAddress, contractAddress, encodedFunction),DefaultBlockParameterName.LATEST).sendAsync().get();<br/>List&lt;Type&gt; result = FunctionReturnDecoder.decode(response.getValue(), function.getOutputParameters());</span></pre><p id="697b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ³¨æ„:å¦‚æœè¿›è¡Œäº†æ— æ•ˆçš„å‡½æ•°è°ƒç”¨ï¼Œæˆ–è€…å¾—åˆ°äº†ç©ºç»“æœï¼Œè¿”å›å€¼å°†æ˜¯<code class="fe mp mq mr mg b">Collections.emptyList()</code>çš„ä¸€ä¸ªå®ä¾‹ã€‚</p><h2 id="5272" class="ms ld iq bd le mt mu dn li mv mw dp lm jy mx my lq kc mz na lu kg nb nc ly nd bi translated">å…¶ä»–web3jç‰¹æ€§</h2><p id="fdc3" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">Web3jæä¾›åˆ›å»ºå’Œç®¡ç†ä»¥å¤ªåŠé’±åŒ…ä»¥åŠç­¾ç½²äº¤æ˜“çš„åŠŸèƒ½ã€‚æ‚¨å¯ä»¥åˆ›å»ºæ–°çš„walletæ–‡ä»¶ï¼Œæˆ–è€…ä½¿ç”¨é€‚å½“çš„æ–¹æ³•ä»ç°æœ‰çš„walletæ–‡ä»¶ä¸­åŠ è½½èº«ä»½è¯æ˜ã€‚è¦ç­¾ç½²äº¤æ˜“ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code class="fe mp mq mr mg b">RawTransaction</code>ç±»å‹å’Œ<code class="fe mp mq mr mg b">TransactionEncoder.signMessage</code>æ–¹æ³•ã€‚ä¸€æ—¦äº‹åŠ¡è¢«ç­¾åï¼Œæ‚¨å°±å¯ä»¥ä½¿ç”¨<code class="fe mp mq mr mg b">Numeric.toHexString</code>æ–¹æ³•å¯¹å®ƒè¿›è¡Œç¼–ç ï¼Œå¹¶ä½¿ç”¨<code class="fe mp mq mr mg b">eth_sendRawTransaction</code>æ–¹æ³•å‘é€å®ƒã€‚</p><p id="a53a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä»¥ä¸‹æ˜¯å¦‚ä½•åˆ›å»ºæ–°çš„ä»¥å¤ªåŠé’±åŒ…æ–‡ä»¶å¹¶ä½¿ç”¨Web3jç­¾ç½²äº¤æ˜“çš„ç¤ºä¾‹:</p><pre class="km kn ko kp gt mf mg mh bn mi mj bi"><span id="c13c" class="mk ld iq mg b be ml mm l mn mo">String fileName = WalletUtils.generateNewWalletFile(<br/>        "your password",<br/>        new File("/path/to/destination"));<br/>Credentials credentials = WalletUtils.loadCredentials(<br/>        "your password",<br/>        "/path/to/walletfile");<br/>EthGetTransactionCount ethGetTransactionCount = web3j.ethGetTransactionCount(<br/>        credentials.getAddress(), DefaultBlockParameterName.LATEST).sendAsync().get();<br/>BigInteger nonce = ethGetTransactionCount.getTransactionCount();<br/>RawTransaction rawTransaction  = RawTransaction.createEtherTransaction(<br/>        nonce, &lt;gas price&gt;, &lt;gas limit&gt;, &lt;toAddress&gt;, &lt;value&gt;);<br/>byte[] signedMessage = TransactionEncoder.signMessage(rawTransaction, credentials);<br/>String hexValue = Numeric.toHexString(signedMessage);<br/>EthSendTransaction ethSendTransaction = web3j.ethSendRawTransaction(hexValue).sendAsync().get();<br/>String transactionHash = ethSendTransaction.getTransactionHash();</span></pre><p id="86ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¦æŸ¥çœ‹ä½¿ç”¨Web3jåˆ›å»ºå’Œå‘é€åŸå§‹äº‹åŠ¡çš„å®Œæ•´ç¤ºä¾‹ï¼Œå¯ä»¥å‚è€ƒweb3j GitHubé¡µé¢ä¸Šçš„é›†æˆæµ‹è¯•<a class="ae lb" href="https://github.com/web3j/web3j/blob/master/integration-tests/src/test/java/org/web3j/protocol/scenarios/CreateRawTransactionIT.java" rel="noopener ugc nofollow" target="_blank"> CreateRawTransactionIT </a>ã€‚</p><p id="d05d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Web3jè¿˜æä¾›äº†ä¸ä»¥å¤ªåŠåç§°æœåŠ¡(ENS)äº¤äº’çš„èƒ½åŠ›ï¼ŒENSæ˜¯ä¸€ä¸ªå»ºç«‹åœ¨ä»¥å¤ªåŠåŒºå—é“¾ä¹‹ä¸Šçš„å»ä¸­å¿ƒåŒ–ã€å¼€æºçš„å‘½åç³»ç»Ÿã€‚ENSå…è®¸ç”¨æˆ·æ³¨å†Œå’Œè§£æä»¥å¤ªåŠåœ°å€çš„äººç±»å¯è¯»åç§°ã€‚</p><p id="85b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¦ä½¿ç”¨Web3jå¤„ç†ENSï¼Œæ‚¨å¯ä»¥ä½¿ç”¨EnsResolverç±»ï¼Œå®ƒæä¾›äº†å°†ENSåç§°è§£æä¸ºä»¥å¤ªåŠåœ°å€çš„æ–¹æ³•ï¼Œåä¹‹äº¦ç„¶ã€‚</p><p id="abfc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸‹é¢æ˜¯ä¸€ä¸ªå¦‚ä½•åœ¨Web3jä¸­ä½¿ç”¨EnsResolverç±»çš„ç¤ºä¾‹:</p><pre class="km kn ko kp gt mf mg mh bn mi mj bi"><span id="c9bc" class="mk ld iq mg b be ml mm l mn mo">EnsResolver ensResolver = new EnsResolver(web3j);<br/>String address = ensResolver.resolve("myname.eth");<br/>String ens = ensResolver.reverseResolve(address);</span></pre><p id="077a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ­¤ä»£ç å°†æŠŠENSåç§°â€œmyname.ethâ€è§£æä¸ºä»¥å¤ªåŠåœ°å€ï¼Œç„¶åå°†è¯¥åœ°å€åå‘è§£æä¸ºç›¸åº”çš„ENSåç§°ã€‚ä½¿ç”¨EnsResolverç±»ç®€åŒ–äº†åœ¨Javaä»£ç ä¸­ä½¿ç”¨ENSåç§°å’Œåœ°å€çš„è¿‡ç¨‹ã€‚</p><h1 id="81a8" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">æ¦‚è¿°</h1><p id="123f" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">æ€»ä¹‹ï¼ŒWeb3jæ˜¯ä¸€ä¸ªå¼ºå¤§çš„åº“ï¼Œå®ƒç®€åŒ–äº†ä¸ä»¥å¤ªåŠåŒºå—é“¾çš„äº¤äº’è¿‡ç¨‹ï¼Œå¹¶åœ¨Javaä¸­æ„å»ºäº†åˆ†æ•£çš„åº”ç”¨ç¨‹åºã€‚å®ƒæä¾›äº†å¹¿æ³›çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬æŸ¥è¯¢æ™ºèƒ½åˆçº¦çš„çŠ¶æ€ã€ç®¡ç†æˆ–åˆ›å»ºä»¥å¤ªåŠé’±åŒ…ã€ä¸ä»¥å¤ªåŠåç§°æœåŠ¡(ENS)äº¤äº’ã€éƒ¨ç½²æ™ºèƒ½åˆçº¦ä»¥åŠæ¥æ”¶ä»¥å¤ªåŠç½‘ç»œä¸­å‘ç”Ÿçš„æŸäº›äº‹ä»¶çš„é€šçŸ¥ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºWeb3jçš„çŸ¥è¯†ï¼Œå¯ä»¥è€ƒè™‘è¯•è¯•è¿™ä¸ªåº“ã€‚å¯¹äºä»»ä½•å¯¹ä»¥å¤ªåŠåŒºå—é“¾æ„Ÿå…´è¶£çš„Javaå¼€å‘äººå‘˜æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå¿…ä¸å¯å°‘çš„å·¥å…·ï¼Œä¸ç®¡ä»–ä»¬çš„ä»¥å¤ªåŠç»éªŒæ°´å¹³å¦‚ä½•ã€‚</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="9b0a" class="lc ld iq bd le lf nl lh li lj nm ll lm ln nn lp lq lr no lt lu lv np lx ly lz bi translated">åˆ†çº§ç¼–ç </h1><p id="8ff0" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼åœ¨ä½ ç¦»å¼€ä¹‹å‰:</p><ul class=""><li id="98d6" class="nq nr iq jp b jq jr ju jv jy ns kc nt kg nu kk nv nw nx ny bi translated">ğŸ‘ä¸ºæ•…äº‹é¼“æŒï¼Œè·Ÿç€ä½œè€…èµ°ğŸ‘‰</li><li id="8884" class="nq nr iq jp b jq nz ju oa jy ob kc oc kg od kk nv nw nx ny bi translated">ğŸ“°æ›´å¤šå†…å®¹è¯·æŸ¥çœ‹<a class="ae lb" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">å‡çº§ç¼–ç åˆŠç‰©</a></li><li id="163a" class="nq nr iq jp b jq nz ju oa jy ob kc oc kg od kk nv nw nx ny bi translated">ğŸ””å…³æ³¨æˆ‘ä»¬:<a class="ae lb" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">æ¨ç‰¹</a> | <a class="ae lb" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a> | <a class="ae lb" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">æ—¶äº‹é€šè®¯</a></li></ul><p id="ee75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ğŸš€ğŸ‘‰<a class="ae lb" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">åŠ å…¥å‡çº§äººæ‰é›†ä½“ï¼Œæ‰¾åˆ°ä¸€ä»½ç¥å¥‡çš„å·¥ä½œ</strong> </a></p></div></div>    
</body>
</html>