<html>
<head>
<title>Internationalize your multi-module Spring Boot Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">国际化您的多模块Spring Boot应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/internationalize-your-multi-module-spring-boot-application-33dc83c36dc6?source=collection_archive---------3-----------------------#2020-09-03">https://levelup.gitconnected.com/internationalize-your-multi-module-spring-boot-application-33dc83c36dc6?source=collection_archive---------3-----------------------#2020-09-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/6b370fdf05e1bc86f4426f69378baccc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CXHHzNCKFXIPFaAHrv-Xdw.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="15e8" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated"><em class="kt">如何以及在哪里定义面向用户的字符串。</em></h2></div><h1 id="0f62" class="ku kv je bd kw kx ky kz la lb lc ld le kk lf kl lg kn lh ko li kq lj kr lk ll bi translated">消息.属性</h1><p id="1658" class="pw-post-body-paragraph lm ln je lo b lp lq kf lr ls lt ki lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">你可能已经读过了<code class="fe mi mj mk ml b">messages.properties</code>文件。它允许您定义希望呈现给最终用户的任何字符串。</p><p id="b91d" class="pw-post-body-paragraph lm ln je lo b lp mm kf lr ls mn ki lu lv mo lx ly lz mp mb mc md mq mf mg mh im bi translated"><code class="fe mi mj mk ml b">messages.properties</code>:</p><figure class="mr ms mt mu gt iv"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="5dd1" class="pw-post-body-paragraph lm ln je lo b lp mm kf lr ls mn ki lu lv mo lx ly lz mp mb mc md mq mf mg mh im bi translated">要在代码中检索这些字符串之一，你首先需要得到一个<code class="fe mi mj mk ml b">MessageSource</code>。这是通过<a class="ae mx" href="https://www.baeldung.com/spring-dependency-injection" rel="noopener ugc nofollow" target="_blank">弹簧依赖性注射</a>提供的。</p><p id="82e2" class="pw-post-body-paragraph lm ln je lo b lp mm kf lr ls mn ki lu lv mo lx ly lz mp mb mc md mq mf mg mh im bi translated">构造函数注入:</p><pre class="mr ms mt mu gt my ml mz na aw nb bi"><span id="f7cf" class="nc kv je ml b gy nd ne l nf ng">@Service // Or some other `Component` annotation<br/>class SomeService( private val messageSource: MessageSource )</span></pre><p id="8c70" class="pw-post-body-paragraph lm ln je lo b lp mm kf lr ls mn ki lu lv mo lx ly lz mp mb mc md mq mf mg mh im bi translated">属性注入:</p><pre class="mr ms mt mu gt my ml mz na aw nb bi"><span id="9faa" class="nc kv je ml b gy nd ne l nf ng">@Autowired private lateinit var messageSource: MessageSource</span></pre><p id="c423" class="pw-post-body-paragraph lm ln je lo b lp mm kf lr ls mn ki lu lv mo lx ly lz mp mb mc md mq mf mg mh im bi translated">然后你可以调用getMessage:</p><pre class="mr ms mt mu gt my ml mz na aw nb bi"><span id="a5b8" class="nc kv je ml b gy nd ne l nf ng">messageSource.getMessage("title.example", null, LocaleContextHolder.getLocale())</span></pre><p id="bf81" class="pw-post-body-paragraph lm ln je lo b lp mm kf lr ls mn ki lu lv mo lx ly lz mp mb mc md mq mf mg mh im bi translated"><code class="fe mi mj mk ml b">args</code>可提供换弦。例如:</p><pre class="mr ms mt mu gt my ml mz na aw nb bi"><span id="b121" class="nc kv je ml b gy nd ne l nf ng">messageSource.getMessage("message.hello", arrayOf("Joe Bloggs"), LocaleContextHolder.getLocale())</span></pre><h1 id="868c" class="ku kv je bd kw kx ky kz la lb lc ld le kk lf kl lg kn lh ko li kq lj kr lk ll bi translated">国际化</h1><p id="da13" class="pw-post-body-paragraph lm ln je lo b lp lq kf lr ls lt ki lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">注意上面，我们将<code class="fe mi mj mk ml b">LocaleContextHolder.getLocale()</code>作为<code class="fe mi mj mk ml b">Locale</code>传递给<code class="fe mi mj mk ml b">getMessage</code>调用。这告诉<code class="fe mi mj mk ml b">MessageSource</code>提供哪种语言。</p><p id="7dd0" class="pw-post-body-paragraph lm ln je lo b lp mm kf lr ls mn ki lu lv mo lx ly lz mp mb mc md mq mf mg mh im bi translated"><code class="fe mi mj mk ml b">LocaleContextHolder</code>提供spring知道的电流<code class="fe mi mj mk ml b">Locale</code>。这是一个强大的机制。我们不需要添加任何自定义代码到我们的<code class="fe mi mj mk ml b">RestController</code>中或者以其他方式来确定<code class="fe mi mj mk ml b">Locale</code>。调用者可以将区域设置为请求头，spring将使其可用。</p><p id="e250" class="pw-post-body-paragraph lm ln je lo b lp mm kf lr ls mn ki lu lv mo lx ly lz mp mb mc md mq mf mg mh im bi translated">为了提供其他语言字符串，我们添加了一个新的消息文件，<code class="fe mi mj mk ml b">messages_fr.properties</code>:</p><figure class="mr ms mt mu gt iv"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="4944" class="pw-post-body-paragraph lm ln je lo b lp mm kf lr ls mn ki lu lv mo lx ly lz mp mb mc md mq mf mg mh im bi translated">要了解更多信息，请查看本<a class="ae mx" href="https://www.baeldung.com/spring-boot-internationalization" rel="noopener ugc nofollow" target="_blank">指南</a>。</p><h1 id="45ca" class="ku kv je bd kw kx ky kz la lb lc ld le kk lf kl lg kn lh ko li kq lj kr lk ll bi translated">模块化</h1><p id="6c98" class="pw-post-body-paragraph lm ln je lo b lp lq kf lr ls lt ki lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">当模块化你的应用程序时，你可能会遇到麻烦。默认情况下，每个模块的<code class="fe mi mj mk ml b">messages.properties</code>文件会相互冲突。只有一组消息可用。</p><p id="272f" class="pw-post-body-paragraph lm ln je lo b lp mm kf lr ls mn ki lu lv mo lx ly lz mp mb mc md mq mf mg mh im bi translated">为了避免这种情况，所有的消息文件需要有不同的名称。一个好的习惯是使用你的模块名。比如:<code class="fe mi mj mk ml b">messages-application.properties</code>、<code class="fe mi mj mk ml b">messages-application_fr.properties</code>、<code class="fe mi mj mk ml b">messages-library.properties</code>、<code class="fe mi mj mk ml b">messages-library_fr.properties</code>。</p><p id="9479" class="pw-post-body-paragraph lm ln je lo b lp mm kf lr ls mn ki lu lv mo lx ly lz mp mb mc md mq mf mg mh im bi translated">现在我们需要将这些暴露给<code class="fe mi mj mk ml b">MessageSource</code>。默认情况下，只会找到名为<code class="fe mi mj mk ml b">message.properties</code>的文件。</p><p id="85a5" class="pw-post-body-paragraph lm ln je lo b lp mm kf lr ls mn ki lu lv mo lx ly lz mp mb mc md mq mf mg mh im bi translated">在您的<code class="fe mi mj mk ml b">application.properties</code>文件中添加:</p><pre class="mr ms mt mu gt my ml mz na aw nb bi"><span id="3b96" class="nc kv je ml b gy nd ne l nf ng">spring.messages.basename=messages-application,messages-library</span></pre><p id="2994" class="pw-post-body-paragraph lm ln je lo b lp mm kf lr ls mn ki lu lv mo lx ly lz mp mb mc md mq mf mg mh im bi translated">请注意，我们在这里没有包括语言扩展名或文件扩展名。</p><p id="de04" class="pw-post-body-paragraph lm ln je lo b lp mm kf lr ls mn ki lu lv mo lx ly lz mp mb mc md mq mf mg mh im bi translated"><strong class="lo jf">就这样。现在，您可以在每个不同的模块中提供字符串。</strong></p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><p id="ba96" class="pw-post-body-paragraph lm ln je lo b lp mm kf lr ls mn ki lu lv mo lx ly lz mp mb mc md mq mf mg mh im bi translated"><em class="no">最初发表于</em><a class="ae mx" href="https://www.brightec.co.uk/blog/internationalize-your-multi-module-spring-boot-application" rel="noopener ugc nofollow" target="_blank"><em class="no">【https://www.brightec.co.uk】</em></a><em class="no">。</em></p></div></div>    
</body>
</html>