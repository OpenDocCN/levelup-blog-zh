<html>
<head>
<title>Code Smell 157 — Balance at 0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">代码气味157 —平衡值为0</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/code-smell-157-balance-at-0-eefc9bf7c061?source=collection_archive---------5-----------------------#2022-08-14">https://levelup.gitconnected.com/code-smell-157-balance-at-0-eefc9bf7c061?source=collection_archive---------5-----------------------#2022-08-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f030" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">今天我在钱包里期待一笔付款。余额为0。我慌了。</h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/28a1b0a3b41870816b193ed72651105b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I4mYYZhgnl2ZxxNul95DAw.jpeg"/></div></div></figure><blockquote class="ks kt ku"><p id="21df" class="kv kw kx ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="iq">TL；DR: Null不等于0。错误不为0。刚好0就是0。</em></p></blockquote><h1 id="3744" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">问题</h1><ul class=""><li id="5ae6" class="mk ml iq ky b kz mm lc mn mo mp mq mr ms mt lr mu mv mw mx bi translated"><a class="ae my" href="https://codeburst.io/null-the-billion-dollar-mistake-c2918c92f7e0" rel="noopener" target="_blank">空值</a></li><li id="9a99" class="mk ml iq ky b kz mz lc na mo nb mq nc ms nd lr mu mv mw mx bi translated">UX</li><li id="5aee" class="mk ml iq ky b kz mz lc na mo nb mq nc ms nd lr mu mv mw mx bi translated">可用性</li></ul><h1 id="8f5b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">解决方法</h1><ol class=""><li id="fe3f" class="mk ml iq ky b kz mm lc mn mo mp mq mr ms mt lr ne mv mw mx bi translated">明确区分零和错误。</li></ol><h1 id="2a27" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">语境</h1><p id="5786" class="pw-post-body-paragraph kv kw iq ky b kz mm jr lb lc mn ju le mo nf lh li mq ng ll lm ms nh lp lq lr ij bi translated">我读过很多关于安全问题的文章。</p><p id="6f9b" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mo lg lh li mq lk ll lm ms lo lp lq lr ij bi translated">尤其是在加密方面。</p><p id="1f1b" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mo lg lh li mq lk ll lm ms lo lp lq lr ij bi translated">上周，我读到了一个<a class="ae my" href="https://twitter.com/stephenlacy/status/1554697083331891201" rel="noopener ugc nofollow" target="_blank">加密黑客线程</a>。</p><p id="1ded" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mo lg lh li mq lk ll lm ms lo lp lq lr ij bi translated">当我的钱包显示余额为0时，我慌了。</p><p id="63e9" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mo lg lh li mq lk ll lm ms lo lp lq lr ij bi translated">那只是UX的味道。</p><p id="cb76" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mo lg lh li mq lk ll lm ms lo lp lq lr ij bi translated">区块链遥不可及💩</p><h1 id="6925" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">示例代码</h1><h2 id="e19c" class="ni lt iq bd lu nj nk dn ly nl nm dp mc mo nn no me mq np nq mg ms nr ns mi nt bi translated">错误的</h2><pre class="kh ki kj kk gt nu nv nw nx aw ny bi"><span id="6819" class="ni lt iq nv b gy nz oa l ob oc">"""<br/>Below code is automatically generated by code-davinci-002 on GTP3 Codex</span><span id="cf7b" class="ni lt iq nv b gy od oa l ob oc">1. check balance with blokchain<br/>2. If blockchain is unreachable show 0 as the balance<br/>"""</span><span id="26ea" class="ni lt iq nv b gy od oa l ob oc">import requests<br/>import json</span><span id="b104" class="ni lt iq nv b gy od oa l ob oc">def get_balance(address):<br/>    url = "https://blockchain.info/q/addressbalance/" + address<br/>    response = requests.get(url)<br/>    if response.status_code == 200:<br/>        return response.text<br/>    else:<br/>        return 0</span></pre><h2 id="c7ea" class="ni lt iq bd lu nj nk dn ly nl nm dp mc mo nn no me mq np nq mg ms nr ns mi nt bi translated">对吧</h2><pre class="kh ki kj kk gt nu nv nw nx aw ny bi"><span id="c604" class="ni lt iq nv b gy nz oa l ob oc">"""<br/>Below code is automatically generated by code-davinci-002 on GTP3 Codex</span><span id="0c2a" class="ni lt iq nv b gy od oa l ob oc">1. check balance with blockchain<br/>2. If blockchain is unreachable throw an error<br/>"""</span><span id="f4aa" class="ni lt iq nv b gy od oa l ob oc">import requests<br/>import json</span><span id="8e40" class="ni lt iq nv b gy od oa l ob oc">def get_balance(address):<br/>    url = "https://blockchain.info/q/addressbalance/" + address<br/>    response = requests.get(url)<br/>    if response.status_code == 200:<br/>        return response.text<br/>    else:<br/>        raise BlockchainNotReachableError("Error reaching blockchain")</span></pre><h1 id="ca3e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">侦查</h1><p id="f6d0" class="pw-post-body-paragraph kv kw iq ky b kz mm jr lb lc mn ju le mo nf lh li mq ng ll lm ms nh lp lq lr ij bi translated">[X]手册</p><p id="d9da" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mo lg lh li mq lk ll lm ms lo lp lq lr ij bi translated">这是一种设计气味。</p><p id="9449" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mo lg lh li mq lk ll lm ms lo lp lq lr ij bi translated">当一个<a class="ae my" href="https://blog.devgenius.io/code-smell-73-exceptions-for-expected-cases-ea870197d5fc" rel="noopener ugc nofollow" target="_blank">异常</a>或<a class="ae my" href="https://blog.devgenius.io/code-smell-72-return-codes-1b869fb53f54" rel="noopener ugc nofollow" target="_blank">返回代码</a>被抛出并用0屏蔽时，我们可以找到模式。</p><h1 id="d55a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">标签</h1><ul class=""><li id="28d6" class="mk ml iq ky b kz mm lc mn mo mp mq mr ms mt lr mu mv mw mx bi translated">UX</li></ul><h1 id="d63c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="236b" class="pw-post-body-paragraph kv kw iq ky b kz mm jr lb lc mn ju le mo nf lh li mq ng ll lm ms nh lp lq lr ij bi translated">始终遵循<a class="ae my" href="https://en.wikipedia.org/wiki/Principle_of_least_astonishment" rel="noopener ugc nofollow" target="_blank">最小惊讶原则</a>作为指导。</p><h1 id="1ec0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">关系</h1><div class="oe of gp gr og oh"><a href="https://blog.devgenius.io/code-smell-12-null-64fbd7792a7c" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">代码气味12 —空</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">程序员使用Null作为不同的标志。它可以提示缺席、未定义的值、错误等。</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">blog.devgenius.io</p></div></div><div class="oq l"><div class="or l os ot ou oq ov kq oh"/></div></div></a></div><div class="oe of gp gr og oh"><a rel="noopener  ugc nofollow" target="_blank" href="/code-smell-139-business-code-in-the-user-interface-83b0941b657a"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">代码味道139 —用户界面中的业务代码</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">验证是否应该在接口上？</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oq l"><div class="ow l os ot ou oq ov kq oh"/></div></div></a></div><div class="oe of gp gr og oh"><a href="https://blog.devgenius.io/code-smell-73-exceptions-for-expected-cases-ea870197d5fc" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">代码气味73 —预期情况的例外</h2><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">blog.devgenius.io</p></div></div><div class="oq l"><div class="ox l os ot ou oq ov kq oh"/></div></div></a></div><div class="oe of gp gr og oh"><a href="https://blog.devgenius.io/code-smell-72-return-codes-1b869fb53f54" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">代码气味72 —返回代码</h2><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">blog.devgenius.io</p></div></div><div class="oq l"><div class="oy l os ot ou oq ov kq oh"/></div></div></a></div><h1 id="4ce8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">更多信息</h1><div class="oe of gp gr og oh"><a href="https://codeburst.io/null-the-billion-dollar-mistake-c2918c92f7e0" rel="noopener follow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">Null:十亿美元的错误</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">他不是我们的朋友。它不会简化生活，也不会让我们更有效率。只是更懒。是时候停止了…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">codeburst.io</p></div></div><div class="oq l"><div class="oz l os ot ou oq ov kq oh"/></div></div></a></div><h1 id="fa5b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">信用</h1><p id="0372" class="pw-post-body-paragraph kv kw iq ky b kz mm jr lb lc mn ju le mo nf lh li mq ng ll lm ms nh lp lq lr ij bi translated">照片由<a class="ae my" href="https://unsplash.com/@jasmin_sessler" rel="noopener ugc nofollow" target="_blank"> Jasmin Sessler </a>在<a class="ae my" href="https://unsplash.com/s/photos/panic" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p><h1 id="e7d1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">放弃</h1><p id="3fde" class="pw-post-body-paragraph kv kw iq ky b kz mm jr lb lc mn ju le mo nf lh li mq ng ll lm ms nh lp lq lr ij bi translated">代码气味只是我的<a class="ae my" href="https://mcsee.medium.com/i-wrote-more-than-90-articles-on-2021-here-is-what-i-learned-76c238f9936f" rel="noopener">观点</a>。</p><blockquote class="ks kt ku"><p id="2d5b" class="kv kw kx ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我对Null的真正批评是，它又一次不必要地带来了必须选择是不检查就快速运行程序还是检查就慢速运行程序的痛苦。</p></blockquote><p id="da8f" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mo lg lh li mq lk ll lm ms lo lp lq lr ij bi translated">东尼·霍尔(无效发明者)</p><div class="oe of gp gr og oh"><a href="https://blog.devgenius.io/software-engineering-great-quotes-3af63cea6782" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">软件工程名言</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">有时一个简短的想法可以带来惊人的想法。</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">blog.devgenius.io</p></div></div><div class="oq l"><div class="pa l os ot ou oq ov kq oh"/></div></div></a></div></div><div class="ab cl pb pc hu pd" role="separator"><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg"/></div><div class="ij ik il im in"><p id="7240" class="pw-post-body-paragraph kv kw iq ky b kz la jr lb lc ld ju le mo lg lh li mq lk ll lm ms lo lp lq lr ij bi translated">本文是CodeSmell系列的一部分。</p><div class="oe of gp gr og oh"><a href="https://blog.devgenius.io/how-to-find-the-stinky-parts-of-your-code-fa8df47fc39c" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">如何找到你的代码中有问题的部分</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">代码很难闻。让我们看看如何改变香味。</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">blog.devgenius.io</p></div></div><div class="oq l"><div class="pi l os ot ou oq ov kq oh"/></div></div></a></div></div></div>    
</body>
</html>