# å¦‚ä½•åœ¨ React Native ä¸Šâ€œç™»å½•è‹¹æœâ€

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/how-to-sign-in-with-apple-on-react-native-4c445de5ff8c>

åœ¨ React Native å’Œ Node.js ä¸Šä½¿ç”¨ Apple è®¤è¯ç”¨æˆ·çš„ç®€å•æŒ‡å—

![](img/d1d7def263e3360c8c613caf8a26468a.png)

Unsplash: [Sascha Sturm](https://unsplash.com/@saschasturm)

æœ€è¿‘ï¼Œæˆ‘ä»¬çš„ä¸€ä¸ªå®¢æˆ·åœ¨ App Store ä¸Šè¢«æ‹’ç»äº†ï¼Œå› ä¸ºæˆ‘ä»¬å¯ç”¨äº†ç¬¬ä¸‰æ–¹è®¤è¯(è„¸ä¹¦),ä½†æ²¡æœ‰æ·»åŠ â€œç™»å½•è‹¹æœâ€ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸å¾—ä¸å¤„ç†å®ƒï¼Œå¹¶åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­å®ç°â€œç™»å½•è‹¹æœâ€ã€‚æˆ‘ä»¬å¸Œæœ›æ‹¥æœ‰:

*   â€œä½¿ç”¨ Apple ç™»å½•â€æŒ‰é’®
*   é“¾æ¥â€œè‹¹æœå¸æˆ·â€ä¸æˆ‘ä»¬çš„åç«¯å¸æˆ·ã€‚

## ä»€ä¹ˆæ˜¯â€œç™»å½•è‹¹æœâ€ï¼Ÿ

â€œç™»å½• Appleâ€æ˜¯ä¸€ç§é‰´å®šæ–¹æ³•ï¼Œå…è®¸æˆ‘ä»¬:

*   ä½¿ç”¨åŒå› ç´ èº«ä»½éªŒè¯ä¿æŠ¤å¸æˆ·
*   ç»™ç”¨æˆ·ç”µå­é‚®ä»¶æˆ–ä¸ç»™åº”ç”¨ç¨‹åº(å¦‚æœæ²¡æœ‰ï¼Œè‹¹æœä¼šç»™ä¸€ä¸ªåˆ«å)
*   è·å–ç”¨æˆ·ä¿¡æ¯
*   ç­‰ç­‰â€¦

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç®€å•çš„ç™»å½•ç³»ç»Ÿï¼Œå¹¶è®¡ç®—ç”¨æˆ·ç™»å½•çš„æ¬¡æ•°

# è®¾ç½®

è¦é˜…è¯»æœ¬æ–‡ï¼Œæ‚¨éœ€è¦:

*   ä¸€ä¸ª React åœŸè‘—(çœŸçš„ï¼ŸğŸ˜‚)
*   è‹¹æœå¼€å‘è€…è´¦æˆ·
*   Node.js åç«¯

ç°åœ¨ï¼Œæˆ‘ä»¬å°†åœ¨è‹¹æœå¼€å‘è€…ç½‘ç«™ä¸Šé…ç½®æˆ‘ä»¬çš„åº”ç”¨ã€‚

## åˆ›å»ºæ‚¨çš„åº”ç”¨ ID

åœ¨è¯ä¹¦ã€æ ‡è¯†ç¬¦å’Œé…ç½®æ–‡ä»¶>æ ‡è¯†ç¬¦ä¸Š:

![](img/a9f04853ec1c1da23c5ab0c732404ed1.png)

åˆ›å»ºåº”ç”¨ ID

åœ¨ App ID åŠŸèƒ½ä¸­æ·»åŠ â€œç™»å½• Apple â€:

![](img/648323f7dd007cb0fa33882af7254269.png)

æ·»åŠ åŠŸèƒ½

## åˆ›å»ºå¯†é’¥

ç°åœ¨åº”ç”¨ç¨‹åº ID å·²ç»å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå¯†é’¥æ¥ä¸ Node.js ä¸€èµ·ä½¿ç”¨ã€‚è¿™ä¸€æ¬¡æˆ‘ä»¬éœ€è¦ç»§ç»­:è¯ä¹¦ã€æ ‡è¯†ç¬¦å’Œé…ç½®æ–‡ä»¶>å¯†é’¥

å¹¶æ·»åŠ ä¸€ä¸ªé”®:

*   ç»™å®ƒä¸€ä¸ªåå­—
*   é€‰ä¸­â€œç™»å½• Appleâ€
*   é…ç½®â€œç™»å½•è‹¹æœâ€ï¼Œé€‰æ‹©ä½ çš„åº”ç”¨ç¨‹åº ID
*   æ³¨å†Œå¯†é’¥
*   **ä¸‹è½½**(ä½ å°†æ— æ³•é‡æ–°ä¸‹è½½)

![](img/ad3335e1fe418846eb04cf0b51375292.png)

## åœ¨ Xcode ä¸­ä¿®æ”¹é¡¹ç›®

åˆ›å»ºåº”ç”¨ ID å’Œå¯†é’¥åï¼Œæ‚¨å¯ä»¥åœ¨ Xcode ä¸Šæ·»åŠ åŠŸèƒ½ã€‚

æ‚¨éœ€è¦é€‰æ‹©å¦‚ä¸‹å¼€å‘å›¢é˜Ÿ:

åœ¨â€œç­¾åå’ŒåŠŸèƒ½â€ä¸­ï¼Œé€‰æ‹©æ‚¨çš„å¼€å‘å›¢é˜Ÿ:

![](img/33f60ce1ca7839d14f95dec7623a169a.png)

ç„¶åï¼Œæ‚¨å¯ä»¥æ·»åŠ ä¸€é¡¹åŠŸèƒ½:

![](img/338631de8b3c888b46142541456b6254.png)

# æ·»åŠ ç™»å½•æŒ‰é’®

æˆ‘ä»¬çš„ app å·²ç»å¯ä»¥ä½¿ç”¨â€œç™»å½•è‹¹æœâ€äº†ã€‚æˆ‘ä»¬å°†é€šè¿‡ä½¿ç”¨**@è”—ç³–é…¶/react-native-apple-authentic ation**åŒ…æ¥æ·»åŠ ä¸€ä¸ªä½¿ç”¨è¯¥æ–¹æ³•çš„æŒ‰é’®:

```
yarn add @invertase/react-native-apple-authentication
```

å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘å·²ç»ç”¨ Expo minimal (TypeScript)åˆ›å»ºäº†ä¸€ä¸ªé¡¹ç›®ã€‚å¹¶åœ¨ App.tsx ä¸Šæ·»åŠ äº†å¦‚ä¸‹çš„ç™»å½•æŒ‰é’®:

ç™»å½•çš„å·¥ä½œæ–¹å¼å¦‚ä¸‹:

*   ç”¨æˆ·æŒ‰ä¸‹æŒ‰é’®->è°ƒç”¨ onAppleButtonPress()
*   æˆ‘ä»¬å‘è‹¹æœå…¬å¸æå‡ºè¯·æ±‚
*   æˆ‘ä»¬è·å¾—ç”¨æˆ·å‡­è¯
*   å¦‚æœç”¨æˆ·è¢«æˆæƒï¼Œæˆ‘ä»¬è°ƒç”¨ API

ååº”åŸç”Ÿéƒ¨åˆ†åˆ°æ­¤ä¸ºæ­¢ğŸ˜

# æˆ‘ä»¬çš„åç«¯éƒ¨åˆ†

å¦‚å‰æ‰€è¿°ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ API ä¸­å°† Apple auth é“¾æ¥åˆ°æˆ‘ä»¬çš„å¸æˆ·ã€‚æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ªç¤ºä¾‹ APIï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°:[dmg.link/blog-apple-signin-api-repo](https://dmg.link/blog-apple-signin-api-repo)ã€‚å¦‚æœä½ å·²ç»åšäº†ä¸€ä¸ª REST APIï¼Œä½ å°±ä¼šæ˜ç™½ HTTP è¯·æ±‚æ˜¯å¦‚ä½•å¤„ç†çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†åªçœ‹åˆ°æˆæƒéƒ¨åˆ†ğŸ˜‰

æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ§åˆ¶å™¨ï¼Œå®ƒå°†:

*   ä» Post è¯·æ±‚ä¸­è·å–ä»¤ç‰Œ(AccessToken)
*   ä» AccessToken è·å– Apple æ•°æ®
*   è·å– appleId
*   ç»Ÿè®¡ç”¨æˆ·çš„è¿æ¥æ•°
*   è¿”å›ç”¨æˆ·

å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘æ­£åœ¨ä» utils æ–‡ä»¶å¤¹å¯¼å…¥â€œAppleAuthâ€æ–‡ä»¶ã€‚æ­¤æ–‡ä»¶ç”¨äºåˆ›å»ºä¸ Apple æœåŠ¡å™¨çš„è¿æ¥:

# äº«å—è¿™ä¸ªåº”ç”¨ç¨‹åº

æˆ‘ä»¬çš„åç«¯å’Œåº”ç”¨ç¨‹åºç°åœ¨å·²ç»å‡†å¤‡å¥½ç™»å½•è‹¹æœã€‚æˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹ğŸ˜ï¼š

## åœ¨åº”ç”¨ç¨‹åºä¸Š

![](img/d450e222067c89b9d4f48d4bc4221506.png)

æ¼”ç¤ºåº”ç”¨ç¨‹åº

## åœ¨æ•°æ®åº“ä¸­

![](img/37d7835154ee869c6707a73cee649312.png)

MongoDB é›†åˆ

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç”¨æˆ·é€šè¿‡ Apple ID é“¾æ¥ï¼Œå¹¶ä¸”å·²ç»ç™»å½•äº† 5 æ¬¡ã€‚

ç°åœ¨ï¼Œä½ å¯ä»¥å®ç°â€œç”¨è‹¹æœç™»å½•â€ï¼Œè®©ä½ çš„ç”¨æˆ·æ›´å¿«åœ°ç™»å½•ã€‚

GitLab å›è´­:

*   app:[dmg.link/blog-apple-signin-app-repo](https://dmg.link/blog-apple-signin-app-repo)
*   API:ã€dmg.link/blog-apple-signin-api-repo 

**ä½ å¯ä»¥åœ¨è¿™é‡Œ** **æ‰¾åˆ°æˆ‘çš„å…¶ä»–æ–‡ç« å¹¶å…³æ³¨æˆ‘** [**ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œæˆ‘å¸Œæœ›ä½ ä»Šå¤©å­¦åˆ°äº†ä¸€äº›æ–°ä¸œè¥¿ğŸš€**](https://dmg.link/blog)

[](/automate-your-react-native-app-with-fastlane-ea516b4a893) [## ä½¿ç”¨æµªå­è‡ªåŠ¨åŒ–æ‚¨çš„ React åŸç”Ÿåº”ç”¨ç¨‹åº

### ç®€åŒ–æˆªå›¾ã€æµ‹è¯•ç‰ˆéƒ¨ç½²ã€åº”ç”¨å•†åº—éƒ¨ç½²å’Œ React åŸç”Ÿåº”ç”¨çš„ç™»å½•ğŸš€

levelup.gitconnected.com](/automate-your-react-native-app-with-fastlane-ea516b4a893) [](https://medium.com/swlh/how-to-use-face-id-with-react-native-or-expo-134231a25fe4) [## å¦‚ä½•åœ¨ React Native æˆ– Expo ä¸­ä½¿ç”¨ Face ID

### å°†ç”Ÿç‰©è®¤è¯åº”ç”¨åˆ° React Native æˆ– Expo åº”ç”¨ä¸­ã€‚è®©æ‚¨çš„ç”¨æˆ·ä½¿ç”¨å®ƒç™»å½•ã€‚

medium.com](https://medium.com/swlh/how-to-use-face-id-with-react-native-or-expo-134231a25fe4)