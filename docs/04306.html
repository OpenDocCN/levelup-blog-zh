<html>
<head>
<title>Pandas Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/pandas-complete-guide-fba59b69598c?source=collection_archive---------5-----------------------#2020-06-19">https://levelup.gitconnected.com/pandas-complete-guide-fba59b69598c?source=collection_archive---------5-----------------------#2020-06-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bdf5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">对熊猫陌生？你来对地方了。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2acc201ace1f9e458d60e337b4573f78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rXjxdbUxOUoVAhgp"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@introspectivedsgn?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">埃里克·麦克莱恩</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="ad55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文可以作为熊猫python库的参考。我们将介绍加载/存储不同文件格式、清理和操作数据集所需的基本功能。我们还将把数据帧转换成numpy数组，这些数组将用于输入到<code class="fe lv lw lx ly b">sklearn</code>库的机器学习模型中。</p><p id="b138" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开始吧。</p><p id="66ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用以下方式安装pandas:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="9698" class="md me it ly b gy mf mg l mh mi">pip3 install pandas</span></pre><p id="2578" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常是这样导入的:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="9b06" class="md me it ly b gy mf mg l mh mi">import pandas as pd</span></pre><h1 id="4458" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">数据结构</strong></h1><p id="bc5e" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">pandas中有两种数据结构:</p><ol class=""><li id="0b61" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated"><strong class="lb iu">系列</strong></li></ol><p id="85a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Series是一个类似一维数组的对象，包含一系列值(与NumPy类型类似)和一个相关的数据标签数组，称为其<em class="no">索引</em>。</p><p id="9dd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">示例:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="7a69" class="md me it ly b gy mf mg l mh mi">In [2]: obj = pd.Series(['a','b','c','d'])</span><span id="ef71" class="md me it ly b gy np mg l mh mi">In [3]: obj<br/>Out[3]:<br/>0    a<br/>1    b<br/>2    c<br/>3    d<br/>dtype: object</span></pre><p id="df1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas从0开始自动分配<em class="no">索引</em>。您可以使用<code class="fe lv lw lx ly b">obj.loc[index]</code>调用特定的行。前往<a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.html?highlight=series#pandas.Series" rel="noopener ugc nofollow" target="_blank">该</a>获取文件。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="533b" class="md me it ly b gy mf mg l mh mi">In [4]: obj.loc[0]<br/>Out[4]: 'a'</span></pre><p id="aeb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.<strong class="lb iu">数据帧</strong></p><p id="c3d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">DataFrame代表一个矩形数据表，包含一个有序的列集合，每个列可以是不同的值类型(数字、字符串、布尔等)。).<strong class="lb iu"><em class="no">data frame既有行列索引</em></strong>；它可以被认为是一系列共享相同索引的字典。</p><p id="0c70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">示例:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="1249" class="md me it ly b gy mf mg l mh mi">In [5]: df = pd.DataFrame({'c1':['a','b'],'c2':['c','d'],'c3':['e','f']})  #as a dict of series</span><span id="58c5" class="md me it ly b gy np mg l mh mi">In [6]: df<br/>Out[6]:<br/>       c1      c2      c3<br/>0       a       c       e<br/>1       b       d       f</span><span id="4076" class="md me it ly b gy np mg l mh mi">In [10]: df.loc[1] #outputs a series datatype<br/>Out[10]:<br/>c1    b<br/>c2    d<br/>c3    f<br/>Name: 1, dtype: object</span></pre><p id="0ef1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您也可以像这样指定索引:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="d48d" class="md me it ly b gy mf mg l mh mi">In [8]: df = pd.DataFrame({'c1':['a','b'],'c2':['c','d'],'c3':['e','f']}, index=['zero','one'])</span><span id="75ec" class="md me it ly b gy np mg l mh mi">In [9]: df<br/>Out[9]:<br/>          c1      c2      c3<br/>zero       a       c       e<br/>one        b       d       f</span></pre><p id="8248" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">DataFrame对象可以用许多参数初始化。前往<a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html?highlight=dataframe#pandas.DataFrame" rel="noopener ugc nofollow" target="_blank">此</a>获取文件。</p><p id="1b14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">熊猫数据框架有两个轴。行是<code class="fe lv lw lx ly b">axis=0</code>，列是<code class="fe lv lw lx ly b">axis=1</code>。</p><h1 id="4111" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">读取文件/保存数据帧</strong></h1><p id="231d" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">假设您有一个数据文件。它可以是任何格式(csv、xlsx、xls、json、html或sql查询)。Pandas提供了读取所有文件类型的功能。您也可以从指向数据文件的url读取数据。</p><p id="81d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，您也可以将清理和处理后的数据保存为您选择的文件格式。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="d7e8" class="md me it ly b gy mf mg l mh mi"><strong class="ly iu">file_type</strong>     <strong class="ly iu">read</strong>                          <strong class="ly iu">save</strong></span><span id="15f2" class="md me it ly b gy np mg l mh mi">csv           pd.read_csv('file.csv')       df.to_csv('name.csv')</span><span id="9819" class="md me it ly b gy np mg l mh mi">xlsx          pd.read_excel('file.xlsx')    df.to_excel('name.xlsx')  </span><span id="aadd" class="md me it ly b gy np mg l mh mi">xls           pd.read_excel('file.xls')     df.to_excel('name.xls')</span><span id="4c17" class="md me it ly b gy np mg l mh mi">json          pd.read_json('file.json')     df.to_json('name.json')</span><span id="3253" class="md me it ly b gy np mg l mh mi">html          pd.read_html(html_file)       df.to_html(html_file)</span><span id="76d4" class="md me it ly b gy np mg l mh mi">sql           pd.read_sql(sql_query)        df.to_sql(sql)</span><span id="4c44" class="md me it ly b gy np mg l mh mi">              or corresponding file urls</span></pre><p id="d490" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以上所有函数在读取时都有不同的参数。有关详细的参数描述，请参见<a class="ae ky" href="https://pandas.pydata.org/docs/user_guide/io.html?highlight=reading" rel="noopener ugc nofollow" target="_blank">和</a>。</p><p id="cd4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将使用汽车功能数据集来演示熊猫的使用。让我们阅读csv文件。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="1be6" class="md me it ly b gy mf mg l mh mi">df=pd.read_csv('cars.csv')<br/>df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/84313df46e15f7ef8b366f6c75622834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oy9U429tmnMXWftIMHKTkQ.png"/></div></div></figure><h1 id="f67b" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">列名</strong></h1><p id="7859" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">现在，我们的第一步是让列名知道它们各自代表什么。我们可以使用以下方法获得列名列表:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="09a4" class="md me it ly b gy mf mg l mh mi">df.columns</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/9f5c6a051fa85b2041bbcd4b94f6a4df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2_4FwqnwDusSqMYrw9Is_g.png"/></div></div></figure><p id="bb60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas自动将列名设置为数据集的第一行，除非read函数中的<code class="fe lv lw lx ly b">header</code>参数被指定为<code class="fe lv lw lx ly b">None</code>。</p><h1 id="5ac4" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">检查数据类型</strong></h1><p id="02fa" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">每一列的数据类型可以使用以下方法检索:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="1361" class="md me it ly b gy mf mg l mh mi">df.dtypes</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/b0f4d055efd1f352f880cfd419e642a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xGDT8B7z0k4BYSbUZ3VDMw.png"/></div></div></figure><p id="740b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您也可以使用:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="9b47" class="md me it ly b gy mf mg l mh mi">df.summary()</span></pre><h1 id="b309" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">删除重复项</strong></h1><p id="e98f" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">可以使用<code class="fe lv lw lx ly b">drop_duplicates</code>方法删除重复行:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="4faa" class="md me it ly b gy mf mg l mh mi">df.drop_duplicates()</span></pre><p id="437c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成此操作后，比较与前一数据框相比减少的行数。</p><h1 id="ebb1" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">独特的价值观:</strong></h1><p id="ee5e" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">您可以使用<code class="fe lv lw lx ly b">df[column].unique()</code>获得每一列的唯一值，也可以使用<code class="fe lv lw lx ly b">df[column].value_counts()</code>获得计数。让我们看看它是如何工作的。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="fa77" class="md me it ly b gy mf mg l mh mi">df['Make'].unique()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/52d6e936eedecbfd3a8774f472a7ce7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*myu7RyMlKifgfJ6mn4XBTQ.png"/></div></div></figure><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="224f" class="md me it ly b gy mf mg l mh mi">df['Make'].value_counts()[:5] <strong class="ly iu">#get only top 5</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/a5d4e6bbfb7814fb5c9e53a092b2b698.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AtaLsgxwM3KbAx08c0Hrcg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">计数前5名制造商</figcaption></figure><h1 id="0d69" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">分拣</strong></h1><p id="2d0d" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">假设您想通过<code class="fe lv lw lx ly b">highway MPG</code>按降序对表格进行排序，可以使用:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="5885" class="md me it ly b gy mf mg l mh mi">df.sort_values(by='highway MPG', ascending = False).head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/f7a395ae6616b11891305c3b6fbefd8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c3geu3z6ezklJAF40OZUdQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">按下行公路MPG排序的数据</figcaption></figure><h1 id="6691" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">条件提取</strong></h1><p id="6c31" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">比方说，你想得到公路行驶里程超过100英里的汽车。这可以通过以下方式实现:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="8f87" class="md me it ly b gy mf mg l mh mi">df[df['highway MPG']&gt;100].head(10)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/5ec8457ba8db105603943694fe5bbc4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0hvQyeTiV1fw_OjaRsE-pA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">公路MPG &gt; 100的行</figcaption></figure><p id="a46a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还可以添加多个条件。假设您希望<code class="fe lv lw lx ly b">highway MPG</code>大于<code class="fe lv lw lx ly b">Make</code>菲亚特100的行。这可以通过以下方式实现:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="9a2d" class="md me it ly b gy mf mg l mh mi">df[(df['highway MPG']&gt;100) &amp; (df['Make']=='FIAT')]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/f4e8ade1e0652bda0f2339ed01d671d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fML8QK-JeVn_58Uiyab9nQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">公路MPG &gt; 100的菲亚特汽车</figcaption></figure><p id="e988" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">菲亚特连续三年有三款车价格不变，MPG递减。</p><p id="fa71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意:</strong>这些方法不会改变原始数据帧。它只是提取过滤后的数据并显示出来。您需要将其赋回原始数据框变量或新变量，以便使用它。</p><h1 id="a6b2" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">删除/过滤列</strong></h1><p id="d253" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">假设您需要删除<code class="fe lv lw lx ly b">Engine Cylinders</code>和<code class="fe lv lw lx ly b">Engine HP</code>列，您可以使用:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="2264" class="md me it ly b gy mf mg l mh mi">df = df.drop(['Engine Cylinder', '<!-- -->Engine HP'<!-- -->], axis=1)</span></pre><p id="5d94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将删除列并将其分配回<code class="fe lv lw lx ly b">df</code>。我们也可以把柱子放在这样的地方:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="89c8" class="md me it ly b gy mf mg l mh mi">df.drop(['Engine Cylinder', '<!-- -->Engine HP'<!-- -->] , axis=1, inplace=True)</span></pre><p id="9a86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以上两个代码做的是同样的事情。在后一种情况下，你不必把它赋回给变量。相反，删除了列的数据集在变量<code class="fe lv lw lx ly b">df</code>中被更改。</p><p id="0a6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="no">也可以通过输入相应的行索引和设置</em> </strong> <code class="fe lv lw lx ly b"><strong class="lb iu"><em class="no">axis=0</em></strong></code> <strong class="lb iu"> <em class="no">来删除行。</em>T13】</strong></p><p id="0fff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，假设您需要删除许多列，并且只需要<code class="fe lv lw lx ly b">Make, Model and Year</code>列，您可以使用<code class="fe lv lw lx ly b">drop</code>方法或<strong class="lb iu"> <em class="no">您可以像这样过滤出您需要的列</em> </strong>:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="3c5f" class="md me it ly b gy mf mg l mh mi">new_df = df[['Make','Model','Year']] </span></pre><h1 id="64d0" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">替换数值</strong></h1><p id="951b" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">让我们看看<code class="fe lv lw lx ly b">Vehicle Size</code>列中的唯一值。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="c296" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; df['Vehicle Size'].unique()<br/>array(['Compact', 'Midsize', 'Large'], dtype=object)</span></pre><p id="b99e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将数据特征输入机器学习模型时，所有分类字符串值都必须转换为数字(整数)。<code class="fe lv lw lx ly b">Vehicle Size</code>栏有3个类别。我们用<code class="fe lv lw lx ly b">0, 1 and 2</code>来代替吧。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="948b" class="md me it ly b gy mf mg l mh mi">#create dict to replace values<br/>key_val = {'Compact':0,'Midsize':1,'Large':2}</span><span id="6b4d" class="md me it ly b gy np mg l mh mi">df['Vehicle Size'] = df['Vehicle Size'].replace(key_val)</span><span id="5a51" class="md me it ly b gy np mg l mh mi"><strong class="ly iu">#Or use the inplace parameter</strong><br/>df['Vehicle Size'].replace(key_val, inplace=True)</span></pre><h1 id="f761" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">缺失值</strong></h1><p id="a731" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">每列缺失值的数量可以使用以下方法找到:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="bf7d" class="md me it ly b gy mf mg l mh mi">df.isna().sum()</span></pre><p id="be72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以用某个值来填充缺少的值，如下所示:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="be27" class="md me it ly b gy mf mg l mh mi">#filling all missing values in dataframe<br/>df.fillna(value)</span><span id="35c5" class="md me it ly b gy np mg l mh mi">#for filling values in a particular column<br/>df[column].fillna(value, inplace=True)</span></pre><h1 id="239e" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">转换为Numpy</h1><p id="520a" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">在清理和操作DataFrame中的数据后，我们需要将其转换为numpy数组，以提供给机器学习模型。DataFrame作为一个整体可以转换为numpy数组，如下所示:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="a7e5" class="md me it ly b gy mf mg l mh mi">df.values</span></pre><p id="76a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将返回一个numpy数组，DataFrame中的每一行都作为一个元素。我们可以分别过滤掉特征和目标，因为它们将被分别提供给机器学习模型。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="1d56" class="md me it ly b gy mf mg l mh mi">X = df[list_of_feature_columns].values<br/>y = df[target_column].values</span><span id="30ec" class="md me it ly b gy np mg l mh mi">model=some_model()<br/>model.fit(X,y)</span></pre><h1 id="85f1" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">结论</h1><p id="760b" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">本文没有涵盖Pandas库的所有功能，尽管它涵盖了清理和操作数据所需的基本操作。</p></div></div>    
</body>
</html>