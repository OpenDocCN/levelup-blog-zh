<html>
<head>
<title>Vue.js Transition Effects — Enter and Leave</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.js过渡效果—进入和离开</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/vue-js-transition-effects-enter-and-leave-38fd917a618d?source=collection_archive---------6-----------------------#2020-03-31">https://levelup.gitconnected.com/vue-js-transition-effects-enter-and-leave-38fd917a618d?source=collection_archive---------6-----------------------#2020-03-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/40a44a1d6a44348926f04cc9bc0680dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aci1aKpR0dAB8fr6"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@shimikumi32?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">清水久美子</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="d6a0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Vue.js是一个易于使用的web应用框架，我们可以用它来开发交互式前端应用。</p><p id="908e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我们将看看如何创建基本的过渡效果和动画。</p><h1 id="5b4a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">过渡单个元素/组件</h1><p id="4e8c" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">Vue为我们提供了在DOM中添加、更新或删除元素时应用过渡效果的多种方式。它可以执行的操作包括:</p><ul class=""><li id="1f18" class="mh mi it ki b kj kk kn ko kr mj kv mk kz ml ld mm mn mo mp bi translated">自动为CSS过渡和动画应用类</li><li id="a9e5" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated">集成第三方CSS动画库</li><li id="b134" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated">在转换过程中使用JavaScript直接操作DOM</li><li id="2073" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated">集成第三方JavaScript动画库</li></ul><p id="9542" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Vue有一个<code class="fe mv mw mx my b">transition</code>包装器组件，让我们在以下上下文中为元素或组件添加进入和离开转换:</p><ul class=""><li id="d944" class="mh mi it ki b kj kk kn ko kr mj kv mk kz ml ld mm mn mo mp bi translated">用<code class="fe mv mw mx my b">v-if</code>进行条件渲染</li><li id="c628" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated">用<code class="fe mv mw mx my b">v-show</code>进行条件显示</li><li id="5d12" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated">动态组件</li><li id="6198" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated">组件根节点</li></ul><p id="b15d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以定义一个简单的渐变过渡，如下所示:</p><p id="a099" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx my b">src/index.js</code>:</p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="11ab" class="nh lf it my b gy ni nj l nk nl">new Vue({<br/>  el: "#app",<br/>  data: { show: false }<br/>});</span></pre><p id="6d03" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx my b">src/styles.css</code>:</p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="c02f" class="nh lf it my b gy ni nj l nk nl">.fade-enter-active,<br/>.fade-leave-active {<br/>  transition: opacity 0.5s;<br/>}<br/>.fade-enter,<br/>.fade-leave-to {<br/>  opacity: 0;<br/>}</span></pre><p id="0305" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx my b">index.html</code>:</p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="e0d7" class="nh lf it my b gy ni nj l nk nl">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;meta charset="UTF-8" /&gt;<br/>    &lt;script src="<a class="ae kf" href="https://cdn.jsdelivr.net/npm/vue/dist/vue.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/vue/dist/vue.js</a>"&gt;&lt;/script&gt;<br/>    &lt;link<br/>      rel="stylesheet"<br/>      type="text/css"<br/>      href="./src/styles.css"<br/>      media="screen"<br/>    /&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button v-on:click="show = !show"&gt;<br/>        Toggle<br/>      &lt;/button&gt;<br/>      &lt;transition name="fade"&gt;<br/>        &lt;p v-if="show"&gt;hi&lt;/p&gt;<br/>      &lt;/transition&gt;<br/>    &lt;/div&gt;<br/>    &lt;script src="src/index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="6355" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们将<code class="fe mv mw mx my b">name</code>属性设置为<code class="fe mv mw mx my b">fade</code>。</p><p id="347b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这意味着在CSS代码中，我们必须给类加上前缀<code class="fe mv mw mx my b">fade</code>。</p><p id="5bae" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在代码中:</p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="b4ae" class="nh lf it my b gy ni nj l nk nl">.fade-enter-active,<br/>.fade-leave-active {<br/>  transition: opacity 0.5s;<br/>}<br/>.fade-enter,<br/>.fade-leave-to {<br/>  opacity: 0;<br/>}</span></pre><p id="59e4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx my b">enter-active</code>、<code class="fe mv mw mx my b">leave-active</code>、<code class="fe mv mw mx my b">enter</code>和<code class="fe mv mw mx my b">leave-to</code>是Vue的默认类名后缀，用于确定应用于各种过渡状态的样式。</p><h2 id="8f90" class="nh lf it bd lg nm nn dn lk no np dp lo kr nq nr ls kv ns nt lw kz nu nv ma nw bi translated">过渡类</h2><p id="34e2" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">有6个类适用于进入/离开过渡:</p><ul class=""><li id="d247" class="mh mi it ki b kj kk kn ko kr mj kv mk kz ml ld mm mn mo mp bi translated"><code class="fe mv mw mx my b">v-enter</code> —进入的开始状态。在插入元素之前添加，在插入元素之后移除一帧。</li><li id="c508" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated"><code class="fe mv mw mx my b">v-enter-active</code> —进入活动状态。适用于整个进入阶段。在插入元素之前添加，并在过渡完成时移除。该类可用于定义进入过渡的持续时间、延迟和缓和。</li><li id="1d7e" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated"><code class="fe mv mw mx my b">v-enter-to</code> —从Vue 2.1.8开始提供。进入的结束状态。在插入元素后增加一帧，与移除<code class="fe mv mw mx my b">v-enter</code>的时间相同。过渡完成时移除。</li><li id="28d3" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated"><code class="fe mv mw mx my b">v-leave</code> —休假开始状态。当离开过渡被触发并在一帧后移除时添加。</li><li id="8315" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated"><code class="fe mv mw mx my b">v-leave-active</code> —休假活动状态，适用于整个休假阶段。当离开转换被触发时添加，当转换完成时删除。该类可用于定义进入过渡的持续时间、延迟和缓和。</li><li id="521f" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated"><code class="fe mv mw mx my b">v-leave-to</code> —从Vue 2.1.8开始提供。休假结束状态。离开过渡被触发后增加一帧，同时<code class="fe mv mw mx my b">v-leave</code>被移除。当过渡完成时，它会被移除。</li></ul><p id="4192" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">整个工作流程如下:</p><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nx"><img src="../Images/f0e5f5fafcd5c9902c9439d6fd553c7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WZDB3_fceo-zs0tEYr0BBQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">https://vuejs.org/的好意</figcaption></figure><p id="9cfc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx my b">v-</code>是未设置<code class="fe mv mw mx my b">name</code>属性时的默认前缀。否则，<code class="fe mv mw mx my b">v-</code>会被我们设置的名字替换。在上面的例子中，我们用<code class="fe mv mw mx my b">fade-</code>替换<code class="fe mv mw mx my b">v-</code>。</p><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ny"><img src="../Images/ad567c073cf11ddb68d2514006864d93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XGnifsEwXX9CVtOB"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">格伦·卡斯滕斯-彼得斯在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h2 id="5532" class="nh lf it bd lg nm nn dn lk no np dp lo kr nq nr ls kv ns nt lw kz nu nv ma nw bi translated">CSS过渡</h2><p id="3faf" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以如下指定CSS转换:</p><p id="eb37" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx my b">src/index.js</code>:</p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="c67a" class="nh lf it my b gy ni nj l nk nl">new Vue({<br/>  el: "#app",<br/>  data: { show: false }<br/>});</span></pre><p id="aa61" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx my b">src/style.css</code>:</p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="396b" class="nh lf it my b gy ni nj l nk nl">.fade-enter-active {<br/>  transition: all 0.3s ease;<br/>}</span><span id="7bb9" class="nh lf it my b gy nz nj l nk nl">.fade-leave-active {<br/>  transition: all 0.8s cubic-bezier(0.3, 0.5, 0.8, 1);<br/>}<br/>.fade-enter,<br/>.fade-leave-to {<br/>  transform: translateX(15px);<br/>  opacity: 0;<br/>}</span></pre><p id="6eab" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx my b">index.html</code>:</p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="af99" class="nh lf it my b gy ni nj l nk nl">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;meta charset="UTF-8" /&gt;<br/>    &lt;script src="<a class="ae kf" href="https://cdn.jsdelivr.net/npm/vue/dist/vue.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/vue/dist/vue.js</a>"&gt;&lt;/script&gt;<br/>    &lt;link<br/>      rel="stylesheet"<br/>      type="text/css"<br/>      href="./src/styles.css"<br/>      media="screen"<br/>    /&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button v-on:click="show = !show"&gt;<br/>        Toggle<br/>      &lt;/button&gt;<br/>      &lt;transition name="fade"&gt;<br/>        &lt;p v-if="show"&gt;hi&lt;/p&gt;<br/>      &lt;/transition&gt;<br/>    &lt;/div&gt;<br/>    &lt;script src="src/index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="b1bb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们在文本被切换时滑动它。我们还定义了淡入淡出效果的缓和。</p><p id="da8a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们用<code class="fe mv mw mx my b">cubic-bezier</code>改变不同阶段的速度。参数是线条中用于滑动文本的点。</p><h2 id="64b4" class="nh lf it bd lg nm nn dn lk no np dp lo kr nq nr ls kv ns nt lw kz nu nv ma nw bi translated">CSS动画</h2><p id="6cf5" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们也可以应用CSS动画，比如CSS过渡。不同之处在于<code class="fe mv mw mx my b">v-enter</code>不是在元素插入后立即移除，而是在<code class="fe mv mw mx my b">animationend</code>事件发生时移除。</p><p id="171e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当使用<code class="fe mv mw mx my b">v-if</code>切换内容时，我们可以创建弹跳动画效果，如下所示:</p><p id="e4e0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx my b">src/index.js</code>:</p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="8c28" class="nh lf it my b gy ni nj l nk nl">new Vue({<br/>  el: "#app",<br/>  data: { show: false }<br/>});</span></pre><p id="32db" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx my b">src/styles.css</code>:</p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="e48b" class="nh lf it my b gy ni nj l nk nl">.bounce-enter-active {<br/>  animation: bounce-in 1s;<br/>}<br/>.bounce-leave-active {<br/>  animation: bounce-in 0.75s reverse;<br/>}<br/><a class="ae kf" href="http://twitter.com/keyframes" rel="noopener ugc nofollow" target="_blank">@keyframes</a> bounce-in {<br/>  0% {<br/>    transform: scale(1.5);<br/>  }<br/>  50% {<br/>    transform: scale(0.6);<br/>  }<br/>  100% {<br/>    transform: scale(1);<br/>  }<br/>}</span></pre><p id="f6df" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx my b">index.html:</code></p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="fdcf" class="nh lf it my b gy ni nj l nk nl">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;meta charset="UTF-8" /&gt;<br/>    &lt;script src="<a class="ae kf" href="https://cdn.jsdelivr.net/npm/vue/dist/vue.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/vue/dist/vue.js</a>"&gt;&lt;/script&gt;<br/>    &lt;link<br/>      rel="stylesheet"<br/>      type="text/css"<br/>      href="./src/styles.css"<br/>      media="screen"<br/>    /&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button v-on:click="show = !show"&gt;<br/>        Toggle<br/>      &lt;/button&gt;<br/>      &lt;transition name="bounce"&gt;<br/>        &lt;p v-if="show"&gt;hi&lt;/p&gt;<br/>      &lt;/transition&gt;<br/>    &lt;/div&gt;<br/>    &lt;script src="src/index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="ec9b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">动画代码在<code class="fe mv mw mx my b">src/styles.css</code>中，这里我们定义了<code class="fe mv mw mx my b">bounce-in</code>动画的关键帧，用<code class="fe mv mw mx my b">scale</code>拉伸和挤压文本。小于1表示挤压，大于1表示拉伸。</p><h1 id="6e78" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="f35a" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过为Vue用来呈现过渡的各种类设置CSS样式来定义基本的进入和离开过渡。</p><p id="fa84" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们可以为它们定义动画和关键帧，以看到与使用过渡类相同的效果。唯一的区别是<code class="fe mv mw mx my b">v-enter</code>不是在元素插入后立即移除，而是在<code class="fe mv mw mx my b">animationend</code>事件发生时移除。</p></div></div>    
</body>
</html>