<html>
<head>
<title>Build and Run Your First Go Application with Bazel</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Bazel构建并运行您的第一个Go应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/build-and-run-your-first-go-application-with-bazel-ab83acb747f5?source=collection_archive---------5-----------------------#2022-01-17">https://levelup.gitconnected.com/build-and-run-your-first-go-application-with-bazel-ab83acb747f5?source=collection_archive---------5-----------------------#2022-01-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="72f2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用Bazel构建和运行您的第一个Go应用程序的分步指南。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/fc1c68831fae1f55099efbbc18396205.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WJFwTrRFwND6VXXvNAemnQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">巴泽尔</figcaption></figure><p id="04b2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">要求</strong></p><ul class=""><li id="d4ef" class="le lf it js b jt ju jx jy kb lg kf lh kj li kn lj lk ll lm bi translated"><a class="ae ln" href="https://docs.bazel.build/versions/main/install.html" rel="noopener ugc nofollow" target="_blank"> Bazel已安装</a></li></ul><p id="1f07" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Bazel很容易安装，支持Ubuntu Linux、macOS和Windows。</p><p id="6b6e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你像我一样在macOS上运行，安装Bazel最简单的方法就是使用自制软件:</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="8d9e" class="lt lu it lp b gy lv lw l lx ly"># Install Homebrew if not already done<br/>/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"</span><span id="127f" class="lt lu it lp b gy lz lw l lx ly"># Install bazel via Homebrew<br/>brew install bazel</span><span id="b2af" class="lt lu it lp b gy lz lw l lx ly"># Verify that bazel is working by checking the installed version<br/>bazel --version <br/># -&gt; "bazel 4.2.2-homebrew"</span><span id="2f6b" class="lt lu it lp b gy lz lw l lx ly"># If you have already installed bazel you can easily upgrade it via Homebrew<br/>brew ugprade bazel</span></pre><p id="7639" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">同样，像往常一样，我准备了一个<a class="ae ln" href="https://github.com/Abszissex/medium-bazel-getting-started" rel="noopener ugc nofollow" target="_blank">极简的GitHub库</a>供你查看整个安装项目:</p><div class="ma mb gp gr mc md"><a href="https://github.com/Abszissex/medium-bazel-getting-started" rel="noopener  ugc nofollow" target="_blank"><div class="me ab fo"><div class="mf ab mg cl cj mh"><h2 class="bd iu gy z fp mi fr fs mj fu fw is bi translated">GitHub-abszisex/medium-bazel-入门</h2><div class="mk l"><h3 class="bd b gy z fp mi fr fs mj fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ml l"><p class="bd b dl z fp mi fr fs mj fu fw dk translated">github.com</p></div></div><div class="mm l"><div class="mn l mo mp mq mm mr ky md"/></div></div></a></div><h2 id="dca7" class="lt lu it bd ms mt mu dn mv mw mx dp my kb mz na nb kf nc nd ne kj nf ng nh ni bi translated">设置项目</h2><p id="505c" class="pw-post-body-paragraph jq jr it js b jt nj jv jw jx nk jz ka kb nl kd ke kf nm kh ki kj nn kl km kn im bi translated">一个典型的Bazel项目至少包括以下基本要素:</p><ul class=""><li id="ccfc" class="le lf it js b jt ju jx jy kb lg kf lh kj li kn lj lk ll lm bi translated"><code class="fe no np nq lp b">WORKSPACE.bazel</code> —工作空间文件定义项目的Bazel工作空间。Bazel可以在整个项目中使用该文件中定义的所有内容。然而，它通常用于加载扩展，然后注册它们的工具、函数，并根据项目的需要构建规则。文件扩展名<code class="fe no np nq lp b">.bazel</code>是可选的，但是如果两种扩展名都可用，Bazel将使用带有该扩展名的文件。</li><li id="c97a" class="le lf it js b jt nr jx ns kb nt kf nu kj nv kn lj lk ll lm bi translated"><code class="fe no np nq lp b">BUILD.bazel</code> —构建文件包含该路径所有可能的构建目标。Bazel要正常工作，每个目录需要一个构建文件。此外，你必须有一个规则的构建文件，即使它是空的。<code class="fe no np nq lp b">.bazel</code>文件扩展名是可选的，但是如果两种扩展名都可用，Bazel将使用带有该扩展名的文件。</li><li id="68aa" class="le lf it js b jt nr jx ns kb nt kf nu kj nv kn lj lk ll lm bi translated">第三，您需要应用程序的实际源代码。您可能已经猜到，您需要一些源代码来构建。你如何构建它完全取决于你。尽管如此，我还是建议创建一个专用的“src”文件夹，存放所有的应用程序代码，这样你就不会把它和任何根级配置搞混了。</li></ul><p id="79c9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">项目结构</strong></p><p id="ee7e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们来看看一个示例项目结构可能是什么样的:</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="2436" class="lt lu it lp b gy lv lw l lx ly">/<br/>|- WORKSPACE.bazel<br/>|- BUILD.bazel<br/>|- src/<br/>   |- app1/<br/>     |- BUILD.bazel<br/>     |- go.mod<br/>     |- main.go<br/>   |- app2/<br/>     |- BUILD.bazel<br/>     |- go.mod<br/>     |- main.go</span></pre><p id="aa53" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在你的项目的根中，你总是需要<code class="fe no np nq lp b">WORKSPACE.bazel</code>和<code class="fe no np nq lp b">BUILD.bazel</code>，特别是因为<code class="fe no np nq lp b">WORKSPACE.bazel</code>本身定义了你的项目根。拥有多个<code class="fe no np nq lp b">WORKSPACE.bazel</code>文件和“子项目”也是可能的，但是这不应该是本文的一部分。在这个例子中，根目录上的<code class="fe no np nq lp b">BUILD.bazel</code>文件保持为空。</p><p id="5b3c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">除此之外，还有一个包含所有应用程序的<code class="fe no np nq lp b">src</code>文件夹。在这种情况下，我们有两个名为<code class="fe no np nq lp b">app1</code>和<code class="fe no np nq lp b">app2</code>的应用程序。这两个应用程序都只是简单的hello-world Go应用程序，用来演示如何通过Bazel构建和运行它们。</p><p id="36f0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">workspace . bazel文件</strong></p><p id="494a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在下面的代码片段中，您可以看到<code class="fe no np nq lp b">WORKSPACE.bazel</code>的内容</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="1205" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">起初，它可能看起来与您目前所看到的不同，所以让我们解释一下。</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="8e3b" class="lt lu it lp b gy lv lw l lx ly">load("@bazel_tools//tools/build_defs/repo:http.bzl", "http_archive")</span></pre><p id="ef9a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用<code class="fe no np nq lp b">load()</code>,我们将函数<code class="fe no np nq lp b">http_archive</code>从其<code class="fe no np nq lp b">http.bzl</code>扩展的官方<code class="fe no np nq lp b">@bazel_tools</code>库中加载到Bazel中。所有扩展名文件都以<code class="fe no np nq lp b">.bzl</code>结尾。<code class="fe no np nq lp b">@bazel_tools</code>是Bazel的预安装库，不需要像我们在下一步中看到的其他库那样被明确下载。</p><p id="0297" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我们将<code class="fe no np nq lp b">http_archive</code>函数加载到Bazel中之后，当您运行一个命令时，Bazel将动态下载存储库。之后我们可以立即直接使用它。<code class="fe no np nq lp b">http_archive</code>是一个常用的函数，它下载一个已定义的存储库作为压缩档案，解压缩它，并使它的目标可用于绑定。</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="b149" class="lt lu it lp b gy lv lw l lx ly">http_archive(<br/>    name = "io_bazel_rules_go",<br/>    sha256 = "2b1641428dff9018f9e85c0384f03ec6c10660d935b750e3fa1492a281a53b0f",<br/>    urls = [<br/>        "https://mirror.bazel.build/github.com/bazelbuild/rules_go/releases/download/v0.29.0/rules_go-v0.29.0.zip",<br/>        "https://github.com/bazelbuild/rules_go/releases/download/v0.29.0/rules_go-v0.29.0.zip",<br/>    ],<br/>)</span></pre><p id="4f78" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这种情况下，Bazeil将在特定提交时从GitHub下载<a class="ae ln" href="https://github.com/bazelbuild/rules_go" rel="noopener ugc nofollow" target="_blank"> rules_go </a>存储库，由<code class="fe no np nq lp b">sha256</code>定义。</p><p id="01ca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我们定义了想要下载的存储库之后，我们可以通过再次使用<code class="fe no np nq lp b">load()</code>函数来访问存储库中的扩展。</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="569a" class="lt lu it lp b gy lv lw l lx ly">load("@io_bazel_rules_go//go:deps.bzl", "go_register_toolchains", "go_rules_dependencies")</span></pre><p id="501a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如您所看到的<code class="fe no np nq lp b">@io_bazel_rules_go</code>，扩展路径以开始，与我们的<code class="fe no np nq lp b">http_archive</code>的<code class="fe no np nq lp b">name</code>属性的值相同。从已定义的扩展中，我们想让两个函数<code class="fe no np nq lp b">go_register_toolchains</code>和<code class="fe no np nq lp b">go_rules_dependencies</code>在我们的工作空间中可用。</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="5b1e" class="lt lu it lp b gy lv lw l lx ly">go_rules_dependencies()<br/><br/>go_register_toolchains(version = "1.17.1")</span></pre><p id="6924" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe no np nq lp b">go_rules_dependencies</code>是Bazel在运行该扩展定义的任何其他<code class="fe no np nq lp b">go_rules</code>之前需要运行的函数，因为它注册了其他规则所需的所有外部依赖关系。</p><p id="39a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如你所料，Bazel需要注册Go工具链，这样Bazel就可以运行Go命令来构建、测试和运行你的Go文件。在上面的例子中，我明确定义了使用的Go版本为<code class="fe no np nq lp b">1.17.1</code>。或者，你也可以设置<code class="fe no np nq lp b">"host"</code>。使用<code class="fe no np nq lp b">"host"</code> Bazel将使用主机系统上安装的工具链，Bazel试图在<code class="fe no np nq lp b">GOROOT</code>或<code class="fe no np nq lp b">PATH</code>找到该工具链。尽管我建议定义一个固定的版本，这样所有的东西都可以在其他安装了另一个Go版本的机器上正常运行。</p><p id="cda3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> Go应用代码</strong></p><p id="09a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我们的每个应用程序中都有三个文件，不同之处仅在于应用程序的<code class="fe no np nq lp b">fmt.println(...)</code>方法的输出。终端输出应该是相同的，以验证Bazel将在运行Bazel命令时构建两个不同的应用程序。</p><p id="74ed" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先是<code class="fe no np nq lp b">main.go</code>文件。它尽可能简单，只向终端打印一些东西，所以我们可以看到它正在工作。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="ea87" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe no np nq lp b">go.mod</code>文件也是绝对最小配置，只定义模块名和使用的Go版本。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="7103" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您是第一次尝试使用Bazel构建Go应用程序，那么激动人心的部分可能对您来说是全新的。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="b317" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe no np nq lp b">load()</code>功能你应该已经很熟悉了。在这里，我们再次访问<code class="fe no np nq lp b">@io_bazel_rules_go</code>存储库并导入函数，然后注册该函数。</p><p id="f88b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe no np nq lp b">go_binary</code>是导入存储库的核心规则之一。您可能已经猜到它是为了根据名称从Go应用程序代码中构建二进制文件。</p><p id="bdeb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们检查一下所用的参数。</p><ul class=""><li id="b936" class="le lf it js b jt ju jx jy kb lg kf lh kj li kn lj lk ll lm bi translated"><code class="fe no np nq lp b">name</code> —这是目标的名称。在本文的后面，我们将需要这里定义的值在我们的命令中引用它。另外，<code class="fe no np nq lp b">name</code>属性在<code class="fe no np nq lp b">BUILD.bazel</code>文件中需要是唯一的。</li><li id="7c5c" class="le lf it js b jt nr jx ns kb nt kf nu kj nv kn lj lk ll lm bi translated"><code class="fe no np nq lp b">srcs</code> —包含Bazel应该用来创建二进制文件的Go源文件列表的字符串数组。</li></ul><h2 id="2907" class="lt lu it bd ms mt mu dn mv mw mx dp my kb mz na nb kf nc nd ne kj nf ng nh ni bi translated">跑步巴泽尔</h2><p id="3a6b" class="pw-post-body-paragraph jq jr it js b jt nj jv jw jx nk jz ka kb nl kd ke kf nm kh ki kj nn kl km kn im bi translated">现在有趣的部分开始了。Bazel命令的实际运行。</p><p id="44be" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">巴泽尔建</strong></p><p id="72f6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，让我们通过<code class="fe no np nq lp b">bazel build //src/app1:hello</code>构建我们的<code class="fe no np nq lp b">app1</code>应用程序，看看是否一切正常。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ny"><img src="../Images/62033accf1259f96b4b42e5f0d70d3e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f4NkOnmAyCFpazjnH7hTDQ.png"/></div></div></figure><p id="ebf4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如你在上面的图片中看到的，我的本地Bazel服务器还没有运行，所以Bazel启动了它。如果它已经运行，Bazel将跳过这一步。</p><p id="adf2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们来研究一下上面的命令。</p><ul class=""><li id="f169" class="le lf it js b jt ju jx jy kb lg kf lh kj li kn lj lk ll lm bi translated"><code class="fe no np nq lp b">bazel</code> —使用Bazel命令</li><li id="c431" class="le lf it js b jt nr jx ns kb nt kf nu kj nv kn lj lk ll lm bi translated"><code class="fe no np nq lp b">build</code> —巴泽尔将建造指定的目标；然而，目标的实际实现可能是这样的。这个案例将源文件作为输入，并输出一个二进制文件。</li><li id="3513" class="le lf it js b jt nr jx ns kb nt kf nu kj nv kn lj lk ll lm bi translated"><code class="fe no np nq lp b">//src/app1:hello</code> —我们想要建立的目标。<code class="fe no np nq lp b">//</code>是当前存储库的缩写，由<code class="fe no np nq lp b">WORKSPACE.bazel</code>文件定义。<code class="fe no np nq lp b">src/app1</code>是我们的目标所在的<code class="fe no np nq lp b">BUILD.bazel</code>文件的路径。而<code class="fe no np nq lp b">hello</code>是我们为<code class="fe no np nq lp b">go_binary</code>定义的目标的名称，用冒号分隔。</li></ul><p id="b34f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以用简单的话来说，我们告诉巴泽尔:</p><blockquote class="nz oa ob"><p id="8d26" class="jq jr oc js b jt ju jv jw jx jy jz ka od kc kd ke oe kg kh ki of kk kl km kn im bi translated">Bazel，请运行由<code class="fe no np nq lp b">go_binary</code>定义的构建步骤，您可以在<code class="fe no np nq lp b">./src/app1</code>找到该步骤，并且可以通过名称<code class="fe no np nq lp b">hello</code>进行识别。</p></blockquote><p id="0a3c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在上面的例子中值得注意的是，构建花费了11秒，这对于一个简单的hello-world Go应用程序来说是相当长的时间。但是由于Bazel必须先做大量的内部检查、创建缓存和建立一些依赖图，所以这是“没问题的”。如果您要重新运行相同的命令，应该用不了1秒钟。在我的例子中，由于缓存，它需要0.2-0.4秒。</p><p id="71af" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您现在更改了<code class="fe no np nq lp b">src/app1/main.go</code>文件中的某些内容，比如<code class="fe no np nq lp b">fmt.println(...)</code>的文本，并重新运行构建命令，您会注意到这需要更长的时间，但即使这样，也只有1.5秒。</p><p id="8d30" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">巴泽尔跑</strong></p><p id="6e22" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">构建您的应用程序是很棒的，但是通常，您会想要一种简单的方法来直接运行您的应用程序。巴泽尔让你来了。除了<code class="fe no np nq lp b">bazel build</code>之外，还有<code class="fe no np nq lp b">bazel run</code>命令可以立即运行构建应用程序。</p><p id="bb3c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如您在下图中看到的，您必须用<code class="fe no np nq lp b">run</code>替换<code class="fe no np nq lp b">build</code>，Bazel将构建并随后执行您构建的二进制文件。在这种情况下，它将打印“Hello，app1！”到终点站。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi og"><img src="../Images/fde1056b2195b8d21c46aa51219dfe80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PjtgQ45n7BITsxfLF_I0qg.png"/></div></div></figure><p id="bbb6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">可以想象，对于其他应用程序来说也是如此。所以现在我们想运行我们的<code class="fe no np nq lp b">app2</code>而不是<code class="fe no np nq lp b">app1</code>。为此，我们只需调整路径，将<code class="fe no np nq lp b">app1</code>替换为<code class="fe no np nq lp b">app2</code>，就可以了，因为在两种情况下目标的名称都是<code class="fe no np nq lp b">:hello</code>。这种改变的结果，可以在下图中看到:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oh"><img src="../Images/198b4e10a819e2121e346a9fb9da8c75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9EqPPb3qELG3IKAKX6-87A.png"/></div></div></figure><h2 id="ffea" class="lt lu it bd ms mt mu dn mv mw mx dp my kb mz na nb kf nc nd ne kj nf ng nh ni bi translated">自动生成的文件和文件夹</h2><p id="ea22" class="pw-post-body-paragraph jq jr it js b jt nj jv jw jx nk jz ka kb nl kd ke kf nm kh ki kj nn kl km kn im bi translated">如果你一步一步地遵循这个教程，你会注意到创建了几个新的文件夹和里面的许多文件。</p><p id="4459" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">长话短说</strong>:最好把这些文件夹放进你的<code class="fe no np nq lp b">.gitignore</code>文件夹里，尽量不要碰它们。这些文件夹应该由Bazel单独管理。其中的数据是Bazel需要的，因为它的缓存机制，除了其他内部功能，许多文件在不同的文件夹之间链接。此外，我们之前生成的二进制文件位于这些文件夹中，例如在<code class="fe no np nq lp b">/bazel-bin/src/app1/hello_/hello</code>中。因此，理论上，您可以通过提到的路径直接执行创建的二进制文件。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/b49c5caee371326f60ab9eb2d8a3b420.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*mwafkV9ELJO0PBN9ClKubw.png"/></div></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="8913" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你不小心弄乱了这些文件夹中的文件或者想清理它们，你可以使用<code class="fe no np nq lp b">bazel clean</code>。让巴泽尔一眨眼就把这些文件夹拿走。</p><p id="5614" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您应该记住，如果您清除这些文件夹，您的构建步骤将再次花费更长的时间，因为您刚刚清除了缓存的文件。</p><h2 id="16cc" class="lt lu it bd ms mt mu dn mv mw mx dp my kb mz na nb kf nc nd ne kj nf ng nh ni bi translated">摘要</h2><p id="08ae" class="pw-post-body-paragraph jq jr it js b jt nj jv jw jx nk jz ka kb nl kd ke kf nm kh ki kj nn kl km kn im bi translated">在本教程中，您学习了设置Bazel项目并使用<code class="fe no np nq lp b">bazel build</code>和<code class="fe no np nq lp b">bazel run</code>构建和运行您的Go应用程序的基本知识。</p><p id="d351" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望这篇短文能帮助你在使用Bazel的旅途中走得更远。</p><h2 id="4efc" class="lt lu it bd ms mt mu dn mv mw mx dp my kb mz na nb kf nc nd ne kj nf ng nh ni bi translated">你想联系吗？</h2><p id="6350" class="pw-post-body-paragraph jq jr it js b jt nj jv jw jx nk jz ka kb nl kd ke kf nm kh ki kj nn kl km kn im bi translated">如果你想联系我，请在LinkedIn上打电话给我。</p><p id="c598" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另外，请随意查看<a class="ae ln" href="https://medium.com/@mr-pascal/my-book-recommendations-4b9f73bf961b" rel="noopener">我的书籍推荐</a>📚。</p></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><div class="kp kq kr ks gt md"><a href="https://mr-pascal.medium.com/my-book-recommendations-4b9f73bf961b" rel="noopener follow" target="_blank"><div class="me ab fo"><div class="mf ab mg cl cj mh"><h2 class="bd iu gy z fp mi fr fs mj fu fw is bi translated">我的书籍推荐</h2><div class="mk l"><h3 class="bd b gy z fp mi fr fs mj fu fw dk translated">在接下来的章节中，你可以找到我对所有日常生活话题的书籍推荐，它们对我帮助很大。</h3></div><div class="ml l"><p class="bd b dl z fp mi fr fs mj fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="mm l"><div class="oq l mo mp mq mm mr ky md"/></div></div></a></div><div class="ma mb gp gr mc md"><a href="https://mr-pascal.medium.com/membership" rel="noopener follow" target="_blank"><div class="me ab fo"><div class="mf ab mg cl cj mh"><h2 class="bd iu gy z fp mi fr fs mj fu fw is bi translated">通过我的推荐链接加入Medium—Pascal Zwikirsch</h2><div class="mk l"><h3 class="bd b gy z fp mi fr fs mj fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ml l"><p class="bd b dl z fp mi fr fs mj fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="mm l"><div class="or l mo mp mq mm mr ky md"/></div></div></a></div></div></div>    
</body>
</html>