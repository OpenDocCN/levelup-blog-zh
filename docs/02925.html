<html>
<head>
<title>A Short Introduction to SQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQL简介</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-short-introduction-to-sql-bb46ff07cd10?source=collection_archive---------16-----------------------#2020-04-10">https://levelup.gitconnected.com/a-short-introduction-to-sql-bb46ff07cd10?source=collection_archive---------16-----------------------#2020-04-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/b40065431e9b72dd23137dcaa2bd414a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Auc-2jA0HAjwE0Fe21KRLQ.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">泰勒·维克在<a class="ae kf" href="https://unsplash.com/s/photos/network?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="b617" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">SQL代表结构化查询语言，用于存储、操作和检索数据库中的数据。有各种类型的数据库管理系统，有些可能包括:SQL Server、MySql、Postgres、Oracle等。</p><p id="0614" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，不管数据库系统如何，查询语言的基础很可能保持不变，尽管它们之间有一些语法差异。</p><p id="0f8f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">SQL允许您从关系数据库的表中查询数据。这允许系统检查一个表中的值是否与另一个表匹配。由于能够提取分析所需的相关数据，SQL是一种有用的数据库编程语言。</p><p id="7ea3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我想与大家分享SQL查询中常用的命令，并将在下面的例子中使用PostgreSQL。</p><h2 id="0759" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">1)选择&amp;从</h2><p id="b9ff" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">对于所有SQL查询，必须使用SELECT函数提取列名列表。此外，我们计划使用FROM函数提取列的数据集或表。</p><p id="e322" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如:</p><p id="383e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">SELECT函数将使我们能够从customer_id和amount列中提取数据。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/aa98222cc618dc579891bcff6a9f4ef8.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*u70DnzDCalIg91yZzyVtYQ.png"/></div></figure><p id="718b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们希望从数据集中的所有列收集数据，我们可以用星号*替换列名</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/296d7b2ba7259a310c25360e071fd004.png" data-original-src="https://miro.medium.com/v2/resize:fit:428/format:webp/1*tWyBqZzJ50-_zqwSL32qsA.png"/></div></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mi"><img src="../Images/93bc6a15d88da2c6e91f0e44e275a13f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v8QLsINqDJtuANF5Ppf-Qg.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">查询的示例数据输出</figcaption></figure><h2 id="cb30" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">2)不同的&amp;排序依据</h2><p id="f8b2" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">从上面的输出示例可以看出，同一个客户(customer_id)有各种重复的交易。要删除重复的值并只保留每个记录中的一个，也就是<em class="mj">唯一值</em>，我们可以在SELECT函数后使用DISTINCT。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/e1160addcd5ba78512d4b04488c17f53.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/1*eHzHQUfVpC3hlQta9tCUMw.png"/></div></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/41c8c771ab9505a70ecb09d6294eaf23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*SslXVEUmTEPglrluIVhGSQ.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">查询的示例数据输出</figcaption></figure><p id="88ba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们还可以使用ORDER BY函数以升序<em class="mj"> (asc) </em>或降序<em class="mj"> (dsc) </em>格式对数据进行排序。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/7608e2efb354fcab0dac8c84f09f97d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*CHOWQoPfSvNQDPMT6R7VDA.png"/></div></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/7981d63590c9ac2ddd5807e17a433cd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*ADofPrQNLamlt5sJ2vqDnw.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">按升序排序的查询的示例数据输出</figcaption></figure><h2 id="7cd9" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">3)聚合(计数、总和、AVG、最小值、最大值)和分组依据</h2><p id="ee21" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">在处理连续或数字变量时，通常可以使用计数、求和、平均、最小值和最大值等基本聚合函数为用户提供基本统计数据。</p><p id="2fcb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在选择函数之后，可以获得支付数据集中的最小、最大和平均金额等聚合函数，如下所示:</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/3b1d17ff5beb3b9aa5f8fff8119abf84.png" data-original-src="https://miro.medium.com/v2/resize:fit:556/format:webp/1*nXXwWBvhEN_5IkTGiks0yg.png"/></div></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/cba86db4fa6f103642f1a82789de2342.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*mRCxoTnPTj18XoMcp3mmdw.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">查询的示例数据输出</figcaption></figure><p id="f3e6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设我们希望按照每个customer_id对这些值进行分组，我们可以在FROM函数之后应用GROUP BY函数。</p><p id="1b81" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以及DISTINCT函数，只显示升序排列的customer_id中的唯一值。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/1dc42cb7383d000cc7d035c533e293a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/format:webp/1*lMLcU63Z96Lue6KDD2EFvQ.png"/></div></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/e4ffa821955d26426af3588762e9497a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*7i03MFHV7ukFMX1Rg_vscA.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">查询的示例数据输出</figcaption></figure><h2 id="c0a1" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">4)哪里</h2><p id="57d1" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">WHERE函数允许我们返回一组关于特定子句的信息。例如，属于特定日期或客户id等的记录。</p><p id="e0a3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">需要注意的一点是，WHERE函数不允许在子句中进行聚合。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/5c64cf6650585ea610ff05707ee4a6a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/1*4dHQuTuzYuU9s-KnjFpU0w.png"/></div></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/cbb3f57d6b771db572863c694a9bd418.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*U7p_obP_GFWnCoGixR011g.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">查询的示例数据输出</figcaption></figure><p id="dd46" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">WHERE函数还可以与AND和OR等条件子句耦合。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/6d836ba066e45ab6239bb341054b65ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*3lniFmaYgHTTVyp5xppZNg.png"/></div></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/58ef318c6fce58872a35b70c39cfff15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*yMEA9Kb11YfXiBJOv6IHTA.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">查询的示例数据输出</figcaption></figure><h2 id="d79c" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">5)拥有</h2><p id="639a" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">如果希望通过聚合来过滤数据，可以在GROUP BY语句后应用HAVING函数。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/9123665d0b311977b761cf41b1fb403a.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*-Ui21NqGFYNThwXXzGlX-A.png"/></div></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/0bd91b97b0c7416e97200d2a40819d86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*PMP4aKvUKtdqZyRGgXcLMw.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">查询的示例数据输出</figcaption></figure><h2 id="be23" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">6)案例</h2><p id="52a8" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">CASE函数允许用户查询CASE中的一组命令。需要END函数来结束CASE函数。并且在CASE函数中至少需要一个WHEN或THEN命令。</p><p id="efee" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">CASE函数通常嵌套在SELECT函数中。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/4fae16441538b9f08d967c6ee029f238.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*jtPOZJfoa1FqEflHzSpjMg.png"/></div></figure><p id="eee3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">WHEN函数也必须是二进制数据类型，其中条件只能有两种状态。真或假，1或0。</p><p id="f197" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，不在case函数中的值将作为[null]返回</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi my"><img src="../Images/548ee4e68ec0daa72703e793ad00dfb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*N15TILQGcMclSxk4-2t7-g.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">查询的示例数据输出</figcaption></figure><p id="cc24" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了在CASE函数中有多个参数，我们还可以使用OR函数添加另一个条件。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/2dafc93485cc7a49e9fe5cfe78290a2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/format:webp/1*JK1gWk0X4VCtZduom1SFFA.png"/></div></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi na"><img src="../Images/76939d16b5dc9293d3fe6b4e5bf8ae0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*MhzX-zf0lXKzPFyjdArQPQ.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">查询的示例数据输出</figcaption></figure><h2 id="c8fb" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">7)内部连接</h2><p id="2ba0" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">有时，您可能会处理多个数据表，通过内部连接函数，可以使用一个公共列合并两个表。</p><p id="cc7f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设我计划连接两个表，<em class="mj">付款</em>和<em class="mj">客户</em>表，并显示以下列:客户标识、付款日期和租赁标识。</p><p id="c240" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我将基于一个类似的列即customer_id来合并两个表。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nb"><img src="../Images/0ac606ca13887f5e3769c47f5adad9a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sHF0zrOyLm9diOMqqRF2Vw.png"/></div></div></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/beeafc0bb94679993b022c991d25da31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*W8dbo8_hDnpZ6qkoeKs6uw.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">查询的示例数据输出</figcaption></figure><h2 id="6056" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">8)完全加入</h2><p id="eeaf" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">如果您想合并两个表中的所有结果，可以使用完全连接函数。相比之下，外部连接函数只允许在一个公共列上合并两个表中的不同列。</p><p id="8d51" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设我想基于每个表的公共customer_id连接属于两个不同表payment和customer的一些列。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nd"><img src="../Images/4016a0fd3332e567a2bb86bb804a5425.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*orNvdT30q4NsHHKiTaXI_g.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">付款表中的列</figcaption></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/20da98a146c3acd37c9a791c106a43f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nLen-ySFeCl5anrfgRImLw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">客户表中的列</figcaption></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nf"><img src="../Images/1cfb1c310997a078ad04cbac2137a706.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2_h2QfP1cyUjfWWm2mkn2g.png"/></div></div></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ng"><img src="../Images/29084e14960a4639f54a61d4d0e1b7e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GlY2nGSl67J0YYMSNKj-xg.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">查询的示例数据输出</figcaption></figure><p id="59e4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">虽然在现实中，查询可能没有这么简单，而且还有更多函数，比如子查询，但是上面提到的函数应该足以生成基本的查询。我希望你喜欢这个关于SQL的小指南！</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><p id="a6eb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好奇的学习者？释放你在媒体上学习的全部潜力，用不到一杯咖啡的钱支持像我这样的作家。</p><div class="no np gp gr nq nr"><a href="https://lzpdatascience.medium.com/membership" rel="noopener follow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">通过我的推荐链接加入媒体——杰森·LZP</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">lzpdatascience.medium.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of jz nr"/></div></div></a></div></div></div>    
</body>
</html>