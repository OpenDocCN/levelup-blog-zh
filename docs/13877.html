<html>
<head>
<title>A Step-by-Step Guide to Configuring LSP in Neovim for Coding in Next.js (React), TypeScript, and TailWindCSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Neovim中为Next.js (React)、TypeScript和TailWindCSS中的编码配置LSP的分步指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-step-by-step-guide-to-configuring-lsp-in-neovim-for-coding-in-next-js-a052f500da2?source=collection_archive---------1-----------------------#2022-10-14">https://levelup.gitconnected.com/a-step-by-step-guide-to-configuring-lsp-in-neovim-for-coding-in-next-js-a052f500da2?source=collection_archive---------1-----------------------#2022-10-14</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="1356" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">智能代码完成、漂亮的诊断、自动格式化等。</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/f2d1f9e426170c66eeaa9d116fde106d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*xJFeDT4Ye-yHasUcFZ-vXQ.gif"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">LSP驱动的vim编辑器:使用。Next.js项目中的tsx文件。GIF作者<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a></figcaption></figure></div><div class="ab cl lb lc hy ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="in io ip iq ir"><p id="77e7" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">当与实际项目相结合时，更容易理解不同的Neovim附加组件。因此，在本文中，我们将在Neovim中慢慢配置LSP，以满足我们用TypeScript和TailwindCSS编码Next.js项目的需求。</p><h1 id="9cbf" class="me mf iu bd mg mh mi mj mk ml mm mn mo ka mp kb mq kd mr ke ms kg mt kh mu mv bi translated">目录</h1><ul class=""><li id="2519" class="mw mx iu lk b ll my lo mz lr na lv nb lz nc md nd ne nf ng bi translated"><a class="ae nh" href="#cd27" rel="noopener ugc nofollow">创建一个新的Next.js项目</a></li><li id="a819" class="mw mx iu lk b ll ni lo nj lr nk lv nl lz nm md nd ne nf ng bi translated"><a class="ae nh" href="#429b" rel="noopener ugc nofollow">使用nvim-lspconfig的LSP配置</a></li><li id="9a9d" class="mw mx iu lk b ll ni lo nj lr nk lv nl lz nm md nd ne nf ng bi translated"><a class="ae nh" href="#5a4b" rel="noopener ugc nofollow">为Lua设置语言服务器</a></li><li id="e68b" class="mw mx iu lk b ll ni lo nj lr nk lv nl lz nm md nd ne nf ng bi translated"><a class="ae nh" href="#5f44" rel="noopener ugc nofollow">为TypeScript设置语言服务器</a></li><li id="0820" class="mw mx iu lk b ll ni lo nj lr nk lv nl lz nm md nd ne nf ng bi translated"><a class="ae nh" href="#fbd0" rel="noopener ugc nofollow">更好地管理LSP语言服务器— Mason.nvim </a></li><li id="05d8" class="mw mx iu lk b ll ni lo nj lr nk lv nl lz nm md nd ne nf ng bi translated"><a class="ae nh" href="#8a1b" rel="noopener ugc nofollow">LSP config-问题&amp;解决方案</a>的根目录</li><li id="6d5f" class="mw mx iu lk b ll ni lo nj lr nk lv nl lz nm md nd ne nf ng bi translated"><a class="ae nh" href="#0915" rel="noopener ugc nofollow">为TailwindCSS设置语言服务器</a></li><li id="9f0a" class="mw mx iu lk b ll ni lo nj lr nk lv nl lz nm md nd ne nf ng bi translated"><a class="ae nh" href="#502a" rel="noopener ugc nofollow">启用使用Null-ls和更漂亮的代码格式化</a></li><li id="6861" class="mw mx iu lk b ll ni lo nj lr nk lv nl lz nm md nd ne nf ng bi translated">启用<a class="ae nh" href="#5f0e" rel="noopener ugc nofollow">美观易读的在线诊断</a></li><li id="e2b4" class="mw mx iu lk b ll ni lo nj lr nk lv nl lz nm md nd ne nf ng bi translated"><a class="ae nh" href="#a999" rel="noopener ugc nofollow">使用Lspsaga插件改进LSP UI</a></li><li id="460a" class="mw mx iu lk b ll ni lo nj lr nk lv nl lz nm md nd ne nf ng bi translated"><a class="ae nh" href="#7bd5" rel="noopener ugc nofollow">总结</a></li></ul></div><div class="ab cl lb lc hy ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="in io ip iq ir"><h1 id="cd27" class="me mf iu bd mg mh nn mj mk ml no mn mo ka np kb mq kd nq ke ms kg nr kh mu mv bi translated">创建新的Next.js项目</h1><p id="5014" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated"><strong class="lk iv">启动Next.js项目:</strong></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/d60a5184ab9873523925ae3c39f9342c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2lrpP4kne6oKlwwVDT96Qw.gif"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">启动一个next js(next js+TypeScript+TailwindCSS)项目。GIF由<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a></figcaption></figure><p id="54ef" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">您也可以按照这篇文章使用Next.js、TypeScript和TailwindCSS快速创建应用程序。</p><div class="nv nw gq gs nx ny"><a href="https://blog.devgenius.io/set-up-a-next-js-application-workflow-using-neovim-typescript-tailwind-23621a34ed38" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fp"><div class="oa ab ob cl cj oc"><h2 class="bd iv gz z fq od fs ft oe fv fx it bi translated">使用Neovim、TypeScript和TailwindCSS设置Next.js应用程序工作流</h2><div class="of l"><h3 class="bd b gz z fq od fs ft oe fv fx dk translated">为新的Next.js应用程序设置高效的工作流。</h3></div><div class="og l"><p class="bd b dl z fq od fs ft oe fv fx dk translated">blog.devgenius.io</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om kt ny"/></div></div></a></div><p id="da29" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">从终端运行以下命令:</p><pre class="kk kl km kn gu on oo op oq aw or bi"><span id="8190" class="os mf iu oo b gz ot ou l ov ow">$ yarn create next-app --typescript my-app<br/>$ cd my-app</span><span id="6bf5" class="os mf iu oo b gz ox ou l ov ow"># Install tailwindcss</span><span id="89da" class="os mf iu oo b gz ox ou l ov ow">$ yarn add -D tailwindcss postcss autoprefixer<br/>$ npx tailwindcss init -p</span></pre><p id="75ca" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">现在打开一个文件来测试<code class="fe oy oz pa oo b">typescript</code>或<code class="fe oy oz pa oo b">typescriptreact</code>是否在Neovim中被识别。</p><pre class="kk kl km kn gu on oo op oq aw or bi"><span id="4529" class="os mf iu oo b gz ot ou l ov ow">nvim pages/index.tsx</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/4399871c3f7433368a7973ff2db2fc65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*SxQDWfutXM5p8K3aQVYgBQ.gif"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">使用<strong class="bd mg">类型脚本操作</strong> ( <strong class="bd mg">)。tsx </strong>)没有<strong class="bd mg"> tsserver </strong>设置和自动完成。GIF由<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a></figcaption></figure><p id="f855" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">除了<code class="fe oy oz pa oo b">.tsx</code>，有时候我们还需要创建<code class="fe oy oz pa oo b">.ts</code>。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/e3b847798eded6668c24996ec823ab6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wq8SStYY4ln6cALrjrHq_g.gif"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">使用<strong class="bd mg">类型脚本</strong> ( <strong class="bd mg">)工作。ts </strong>)没有<strong class="bd mg"> tsserver </strong>设置和自动完成。GIF作者<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a></figcaption></figure><p id="72d8" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">为了更好地处理<code class="fe oy oz pa oo b">.ts </code>或<code class="fe oy oz pa oo b">.tsx</code>的文件类型。在我们使用TypeScript的Next.js项目中，我们需要通过LSP config设置<code class="fe oy oz pa oo b">tsserver</code>,并启用智能代码完成。让我们继续下一部分。</p></div><div class="ab cl lb lc hy ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="in io ip iq ir"><h1 id="429b" class="me mf iu bd mg mh nn mj mk ml no mn mo ka np kb mq kd nq ke ms kg nr kh mu mv bi translated">使用nvim-lspconfig的LSP配置</h1><blockquote class="pb pc pd"><p id="7e27" class="li lj pe lk b ll lm jv ln lo lp jy lq pf ls lt lu pg lw lx ly ph ma mb mc md in bi translated">Nvim支持<a class="ae nh" href="https://microsoft.github.io/language-server-protocol/" rel="noopener ugc nofollow" target="_blank">语言服务器协议(LSP) </a>，这意味着它充当<br/>LSP服务器的客户端，并包括一个Lua框架“vim”。lsp '用于构建<br/>增强型LSP工具。</p><p id="c37a" class="li lj pe lk b ll lm jv ln lo lp jy lq pf ls lt lu pg lw lx ly ph ma mb mc md in bi translated">LSP简化了一些特性，如定义、查找引用、悬停、<br/>完成、重命名、格式化、重构等。，使用语义整体项目<br/>分析。</p></blockquote><p id="cd01" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">那么，什么是<code class="fe oy oz pa oo b">nvim-lspconfig</code>？</p><blockquote class="pb pc pd"><p id="c3be" class="li lj pe lk b ll lm jv ln lo lp jy lq pf ls lt lu pg lw lx ly ph ma mb mc md in bi translated"><code class="fe oy oz pa oo b"><a class="ae nh" href="https://github.com/neovim/nvim-lspconfig" rel="noopener ugc nofollow" target="_blank"><em class="iu">nvim-lspconfig</em></a></code>是<a class="ae nh" href="https://github.com/neovim/nvim-lspconfig/blob/master/doc/server_configurations.md" rel="noopener ugc nofollow" target="_blank">为<a class="ae nh" href="https://neovim.io/doc/user/lsp.html" rel="noopener ugc nofollow" target="_blank"> Nvim LSP客户端</a>配置</a>。</p></blockquote><h2 id="afe9" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">安装nvim-lspconfig插件</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pt"><img src="../Images/7f7c0b019b8a6eff057eb72edbaa9334.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DKJyQcDis0m6bUIlFsHikw.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">在plugins.lua文件中使用nvim-lspconfig。</figcaption></figure><p id="258a" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">使用初始设置创建<em class="pe"> lspconfig.lua </em>文件，包括导入<code class="fe oy oz pa oo b">nvim-lspconfig</code>并在保存缓冲区时启用格式化。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pu"><img src="../Images/d70e71fa99c31746accb2cd1d692a281.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KrQJm25VFcaPi7psu9SlqA.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">导入nvim-lspconfig，并在lspconfig.lua文件中附加格式化功能。</figcaption></figure></div><div class="ab cl lb lc hy ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="in io ip iq ir"><h1 id="5a4b" class="me mf iu bd mg mh nn mj mk ml no mn mo ka np kb mq kd nq ke ms kg nr kh mu mv bi translated">为Lua设置语言服务器</h1><p id="1cc3" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated">由于我们在整个Neovim配置过程中使用Lua语言，所以首先用Lua创建一个良好的工作环境并不是一个坏主意。</p><h2 id="de86" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">在Lua语言服务器建立之前</h2><p id="803a" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated">下面是没有设置Lua语言服务器的情况:</p><p id="6af9" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated"><em class="pe">用</em> <code class="fe oy oz pa oo b"><em class="pe">:w</em></code> <em class="pe">保存Lua文件时没有自动完成和自动套用格式。</em></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/9770a0396fc97ac7f23e0887b88b6185.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-EgSTNJZ0CmweAXoetTjdA.gif"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">在为Lua设置语言服务器之前，在vim终端<strong class="bd mg">中用Lua语言编写:没有自动完成，也没有自动套用格式。GIF由<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a></strong></figcaption></figure><h2 id="05dd" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">安装语言服务器</h2><pre class="kk kl km kn gu on oo op oq aw or bi"><span id="df4f" class="os mf iu oo b gz ot ou l ov ow">brew install lua-language-server</span></pre><h2 id="c680" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">启用语言服务器</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pv"><img src="../Images/3a13afa7d2a4557fed2bc34228c131b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rLRZJ11YbL-sHq8LSQtAQA.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">在lspconfig.lua文件中启用Lua语言服务器。</figcaption></figure><p id="029b" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">然后运行<code class="fe oy oz pa oo b">:luafile %</code>来应用更改</p><h2 id="6caa" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">在Lua语言服务器建立之后</h2><p id="0efd" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated">现在自动补全功能已经配置好了，用<code class="fe oy oz pa oo b">:w</code>保存文件时也会自动套用格式。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/6af9211ac6414fc439bc588a05df371f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*35JYWbuJx912RkMUAb8Mdg.gif"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">在为Lua设置语言服务器后，在vim终端<strong class="bd mg">内用Lua语言编写:自动完成和自动套用格式。GIF作者<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a></strong></figcaption></figure></div><div class="ab cl lb lc hy ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="in io ip iq ir"><h1 id="5f44" class="me mf iu bd mg mh nn mj mk ml no mn mo ka np kb mq kd nq ke ms kg nr kh mu mv bi translated">为TypeScript设置语言服务器</h1><h2 id="03af" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">安装语言服务器—“ts Server”</h2><p id="6f8b" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated">请参见nvim-lspconfig文档 ( <code class="fe oy oz pa oo b">: help lspconfig-all</code>来自nvim)中的<a class="ae nh" href="https://github.com/neovim/nvim-lspconfig/blob/master/doc/server_configurations.md" rel="noopener ugc nofollow" target="_blank"><em class="pe">server _ configuration s . MD</em></a><em class="pe">了解各语言服务器的完整配置列表。在我们的例子中，我们需要为TypeScript设置语言服务器— <code class="fe oy oz pa oo b">typescript-language-server</code>，它依赖于<code class="fe oy oz pa oo b">typescript</code>。两个包都可以通过<code class="fe oy oz pa oo b">npm</code>安装:</em></p><pre class="kk kl km kn gu on oo op oq aw or bi"><span id="7bbe" class="os mf iu oo b gz ot ou l ov ow">npm install -g typescript typescript-language-server</span></pre><h2 id="2cfe" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">启用语言服务器— tsserver</h2><pre class="kk kl km kn gu on oo op oq aw or bi"><span id="b657" class="os mf iu oo b gz ot ou l ov ow">Set filetypes = { “typescript”, “typescriptreact”, “typescript.tsx” }</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pw"><img src="../Images/1a0885e8339096c238eefb53f8b107df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_dB4Sk_QuKMl6RAv6ugG0g.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">启用lspconfig.lua文件中的<strong class="bd mg"> tsserver </strong>。李冠仪<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">截屏</a></figcaption></figure><p id="c88c" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">详见<a class="ae nh" href="https://github.com/neovim/nvim-lspconfig" rel="noopener ugc nofollow" target="_blank"> nvim-lspconfig自述文件</a>。</p><h2 id="06d4" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">启用自动完成功能</h2><blockquote class="pb pc pd"><p id="3ef5" class="li lj pe lk b ll lm jv ln lo lp jy lq pf ls lt lu pg lw lx ly ph ma mb mc md in bi translated">Nvim的内置omnifunc提供了手动触发完成功能。对于<em class="iu">自动</em>补全，需要一个通用的<a class="ae nh" href="https://github.com/neovim/nvim-lspconfig/wiki/Autocompletion" rel="noopener ugc nofollow" target="_blank">自动补全插件</a>。</p></blockquote><p id="54d7" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">所以，我们来介绍一个Lua编码的neovim的补全插件— <a class="ae nh" href="https://github.com/hrsh7th/nvim-cmp" rel="noopener ugc nofollow" target="_blank"> hrsh7th/nvim-cmp </a>。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj px"><img src="../Images/5c551386bfa12f24edc8157c1e6d5b86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A3vi25njJ_JwlMahRHSgRw.png"/></div></div></figure><p id="6ff9" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">插件的LSP配置:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pu"><img src="../Images/cafe6eadf2880d2173f0b60e011c3852.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8BXlPKFN3ncC6ouSrh4BAA.png"/></div></div></figure><p id="5855" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">设置nvim-cmp:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj py"><img src="../Images/8ea87a68bab9a79e14ea4519b253fa54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DFe3H6q3OE9s9LJ0jwkUWQ.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">设置nvim-cmp。</figcaption></figure><h2 id="af09" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">演示typescript中的自动完成功能(Typescript文件—)。ts’)</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/bbf2364147efb2eaea349a01721e7aa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*R_VUJxe4MYEI3pPdLLaJ2A.gif"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">使用<strong class="bd mg">类型脚本</strong> ( <strong class="bd mg">)工作。ts </strong>)与<strong class="bd mg"> tsserver </strong>设置和自动完成。GIF作者<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a></figcaption></figure><h2 id="e914" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">演示React TypeScript(typescriptreact文件—'中的自动完成功能。tsx’)</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/e0a42981c03f65b13b3b82d6131da30c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Qx2IjsAqE0wJLEzHeMWdtA.gif"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">使用<strong class="bd mg">类型脚本处理</strong> ( <strong class="bd mg">)。tsx </strong>)和<strong class="bd mg"> tsserver </strong>设置和自动完成。GIF由<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a></figcaption></figure><h2 id="cf16" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">演示React中的自动完成</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pz"><img src="../Images/0d2aa5cae9d0ca7e59a2176c082aae0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LNa1VvBnjLym2Dhj8rlN6Q.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">React中的自动完成功能。截图来自<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a>。</figcaption></figure></div><div class="ab cl lb lc hy ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="in io ip iq ir"><h1 id="fbd0" class="me mf iu bd mg mh nn mj mk ml no mn mo ka np kb mq kd nq ke ms kg nr kh mu mv bi translated">使用Mason LspConfig更好地管理LSP语言服务器</h1><p id="bb06" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated">在上文中，我们应用了几种安装语言服务器的方法:</p><pre class="kk kl km kn gu on oo op oq aw or bi"><span id="c3ac" class="os mf iu oo b gz ot ou l ov ow">// TtypeScript Language Server<br/>npm install -g typescript typescript-language-server</span><span id="37e1" class="os mf iu oo b gz ox ou l ov ow">// Lua Language Server<br/>brew install lua-language-server</span></pre><p id="09e2" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">以这种方式管理LSP服务器并不容易。那么我们再来介绍另一个<code class="fe oy oz pa oo b"><a class="ae nh" href="https://github.com/williamboman/mason.nvim" rel="noopener ugc nofollow" target="_blank">mason.nvim</a></code>，这是一个Neovim的便携包管理器，在Neovim运行的任何地方都可以运行。它可以轻松地安装和管理LSP服务器、DAP服务器、linters和formatters。请参考此<code class="fe oy oz pa oo b"> mason-lspconfig.nvim</code>的可用lsp服务器</p><h2 id="cabb" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">使用封隔器安装</h2><pre class="kk kl km kn gu on oo op oq aw or bi"><span id="31a3" class="os mf iu oo b gz ot ou l ov ow">use {<br/>    "williamboman/mason.nvim",<br/>    "williamboman/mason-lspconfig.nvim",<br/>    "neovim/nvim-lspconfig",<br/>}</span></pre><p id="da34" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">重要事项:您必须按照以下顺序设置插件:</p><ol class=""><li id="c31c" class="mw mx iu lk b ll lm lo lp lr qa lv qb lz qc md qd ne nf ng bi translated"><code class="fe oy oz pa oo b">mason.nvim</code></li><li id="a20f" class="mw mx iu lk b ll ni lo nj lr nk lv nl lz nm md qd ne nf ng bi translated"><code class="fe oy oz pa oo b">mason-lspconfig.nvim</code></li><li id="64c0" class="mw mx iu lk b ll ni lo nj lr nk lv nl lz nm md qd ne nf ng bi translated">通过<code class="fe oy oz pa oo b">lspconfig</code>设置服务器</li></ol><h2 id="28b7" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">梅森配置</h2><pre class="kk kl km kn gu on oo op oq aw or bi"><span id="6c04" class="os mf iu oo b gz ot ou l ov ow">require("mason").setup()</span><span id="e6bf" class="os mf iu oo b gz ox ou l ov ow">require("mason-lspconfig").setup({<br/>    ensure_installed = { "sumneko_lua", "tsserver", "tailwindcss" }<br/>})</span></pre><p id="9d51" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated"><code class="fe oy oz pa oo b">ensure_installed</code>表示如果尚未安装，将自动安装的服务器列表。所以，上面的配置将安装Lua语言服务器(<code class="fe oy oz pa oo b">sumneko_lua</code>)、TypeScript语言服务器(<code class="fe oy oz pa oo b">tsserver</code>)和TailwindCSS语言服务器(<code class="fe oy oz pa oo b">tailwindcss</code>)，如果我们还没有安装的话。</p><p id="1a12" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">或者通过<code class="fe oy oz pa oo b">:LspInstall [&lt;server&gt;...]</code>手动安装提供的服务器。</p><p id="f8d7" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">如<code class="fe oy oz pa oo b">:LspInstall tsserver</code>。</p><p id="74af" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">注意<code class="fe oy oz pa oo b">tsserver</code>负责JavaScript。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qe"><img src="../Images/92355dd522d9ca01d2c964731bbd7ccf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j6g5ItRuu4yQESeCETpxjA.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae nh" href="https://github.com/williamboman/mason-lspconfig.nvim#available-lsp-servers" rel="noopener ugc nofollow" target="_blank">mason-LSP config . nvim的可用LSP服务器</a></figcaption></figure><p id="4f4a" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">您可以在其GitHub页面上找到mason-lspconfig.nvim的详细文档:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/62e515b7dc96345b7bf7a230c7564bc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CufsVu5I0pAZOav2mpd3Wg.gif"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated"><code class="fe oy oz pa oo b">Check out the <a class="ae nh" href="https://github.com/williamboman/mason-lspconfig.nvim#available-lsp-servers" rel="noopener ugc nofollow" target="_blank">mason-lspconfig.nvim</a> documentation. GIF </code>作者<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a>。</figcaption></figure><h2 id="eb89" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">显示Mason的UI—可视化所有已安装的服务器</h2><p id="0cf7" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated">运行<code class="fe oy oz pa oo b">:Mason</code>显示已安装的服务器，以及所有您可以选择安装的可用服务器。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qf"><img src="../Images/95cf863ff39ab2443922f7b67b18d9bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tNfL72WL3qNoTmlKmwR9oQ.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">命令:' Mason '显示已安装的服务器。截图来自<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a>。</figcaption></figure><p id="9579" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">和往常一样，只要你想更新一下我们刚刚学过的插件知识，Neovim终端上的<code class="fe oy oz pa oo b">:help</code>命令就会派上用场。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/4b545610d5f7fafc3ee6e9e739def35e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*S_p-pKoUGOM1E5DzwfR1Iw.gif"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">通过运行':h mason '和':h mason-lsp '来浏览文档。GIF由<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a>制作。</figcaption></figure></div><div class="ab cl lb lc hy ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="in io ip iq ir"><h1 id="e445" class="me mf iu bd mg mh nn mj mk ml no mn mo ka np kb mq kd nq ke ms kg nr kh mu mv bi translated">Lspconfig的根目录—问题和解决方案</h1><p id="012c" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated">有必要了解语言服务器是如何自动启动的(附加到当前缓冲区)。</p><blockquote class="pb pc pd"><p id="4e6b" class="li lj pe lk b ll lm jv ln lo lp jy lq pf ls lt lu pg lw lx ly ph ma mb mc md in bi translated">为了自动启动语言服务器，lspconfig从当前缓冲区的目录树中向上搜索，以找到与每个服务器配置中定义的<code class="fe oy oz pa oo b"><em class="iu">root_dir</em></code>模式相匹配的文件。对于<a class="ae nh" href="https://archive.org/details/CONFIG.md#pyright" rel="noopener ugc nofollow" target="_blank"> pyright </a>，这是任何包含“.git "、" setup.py "、" setup.cfg "、" pyproject.toml "或" requirements.txt ")。语言服务器要求每个项目都有一个<code class="fe oy oz pa oo b"><em class="iu">root</em></code>,以便完成和搜索当前文件中没有定义的符号，并避免每次启动时都必须索引整个文件系统。</p><p id="ee7b" class="li lj pe lk b ll lm jv ln lo lp jy lq pf ls lt lu pg lw lx ly ph ma mb mc md in bi translated"><a class="ae nh" href="https://archive.org/details/github.com-neovim-nvim-lspconfig_-_2021-07-03_00-02-55" rel="noopener ugc nofollow" target="_blank"> -存档:Neovim-nvim-lspconfig 2021-07-03</a></p></blockquote><p id="36c8" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">这是我们到目前为止对<code class="fe oy oz pa oo b">tsserver</code>的<code class="fe oy oz pa oo b">lspconfig</code>:</p><pre class="kk kl km kn gu on oo op oq aw or bi"><span id="3ea7" class="os mf iu oo b gz ot ou l ov ow">require'lspconfig'.tsserver.setup{<br/>  filetypes = { "javascript",", "typescript", "typescriptreact", "typescript.tsx" }<br/>}</span></pre><p id="8666" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">如果我们试图在一个没有<code class="fe oy oz pa oo b">package.json</code>、<code class="fe oy oz pa oo b">tsconfig.json</code>、<code class="fe oy oz pa oo b">jsconfig.json</code>和<code class="fe oy oz pa oo b">.git</code>的项目目录下处理一个JavaScript文件，当从当前缓冲区运行<code class="fe oy oz pa oo b">:LspInfo</code>时，会弹出一条错误消息。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qg"><img src="../Images/282ef8a4182d562ceba291e2a7f3c107.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qK71jFSxuQ-Zd1tth7GaUg.png"/></div></div></figure><p id="48c7" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">您将看不到智能代码功能:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qh"><img src="../Images/d31fe78f7403660c875862eb18e99cdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pR8p5QmPTZ3ZQYI7W5X_Ww.png"/></div></div></figure><h2 id="0311" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">解决问题的两种方法:</h2><ol class=""><li id="9401" class="mw mx iu lk b ll my lo mz lr na lv nb lz nc md qd ne nf ng bi translated">任何一个丢失的文件添加到您的项目目录中</li><li id="5a45" class="mw mx iu lk b ll ni lo nj lr nk lv nl lz nm md qd ne nf ng bi translated">通过将粗体代码添加到<code class="fe oy oz pa oo b">lspconfig</code>，允许Lsp for JavaScript在任何目录中运行:</li></ol><pre class="kk kl km kn gu on oo op oq aw or bi"><span id="d9ea" class="os mf iu oo b gz ot ou l ov ow">require'lspconfig'.tsserver.setup{<br/>  filetypes = { "javascript", "typescript", "typescriptreact", "typescript.tsx" },<br/>  <strong class="oo iv">root_dir = function() return vim.loop.cwd() end </strong> <br/>}</span></pre><h2 id="2412" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">结果—类型脚本语言服务器最终附加到当前缓冲区</h2><p id="47e5" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated">Run ':LspInfo '显示当前缓冲区(一个JavaScript文件)的附加客户端。我们注意到<code class="fe oy oz pa oo b">tsserver</code>支持我们之前通过<code class="fe oy oz pa oo b">lspconfig</code>定义的几种文件类型— <code class="fe oy oz pa oo b">javascript</code>、<code class="fe oy oz pa oo b">javascriptreact</code>、<code class="fe oy oz pa oo b">javascript.jsx</code>、<code class="fe oy oz pa oo b">typescript</code>、<code class="fe oy oz pa oo b">typescriptreact</code>和<code class="fe oy oz pa oo b">typescript.tsx</code>。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qi"><img src="../Images/5b5eef893b7f689dac650a70c0c7bdf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uJHB2BUjEyC3BUZntHxOgA.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">Run ':LspInfo '显示当前缓冲区(一个JavaScript文件)的附加客户端。命令:' Mason '显示已安装的服务器。<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a>截图。</figcaption></figure><h2 id="bba5" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">演示问题和解决方案</h2><p id="0721" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated"><em class="pe">提示:运行</em> <code class="fe oy oz pa oo b"><em class="pe">:LspInfo</em></code> <em class="pe">命令查看客户端附加到当前文件缓冲区的语言服务器。</em></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/34d486a28455baa2fa70097332f64dc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*9q3hqRf5xUHddBUAlnaJ1Q.gif"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">Run ':LspInfo '来发现问题并应用修复。GIF由<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a>制作。</figcaption></figure></div><div class="ab cl lb lc hy ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="in io ip iq ir"><h1 id="0915" class="me mf iu bd mg mh nn mj mk ml no mn mo ka np kb mq kd nq ke ms kg nr kh mu mv bi translated">为TailwindCSS设置语言服务器</h1><h2 id="af36" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">安装Tailwincss语言服务器</h2><p id="3115" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated">如上一节所述，您可以将其添加到<code class="fe oy oz pa oo b">ensure_installed</code>列表中进行安装，如下所示:</p><pre class="kk kl km kn gu on oo op oq aw or bi"><span id="a487" class="os mf iu oo b gz ot ou l ov ow">require("mason").setup()</span><span id="ee0f" class="os mf iu oo b gz ox ou l ov ow">require("mason-lspconfig").setup({<br/>    ensure_installed = { "tailwindcss" }<br/>})</span></pre><p id="31e0" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">或者运行命令<code class="fe oy oz pa oo b">:LspInstall taillwindcss</code>。</p><p id="e729" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">通过运行命令<code class="fe oy oz pa oo b">: Mason</code>确保您已经安装了它。</p><h2 id="7e6b" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">Tailwincss语言服务器配置</h2><p id="f67c" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated">在Neovim中安装了tailwindcss语言服务器之后，让我们通过<code class="fe oy oz pa oo b">lspconfig</code>对其进行配置:</p><pre class="kk kl km kn gu on oo op oq aw or bi"><span id="1886" class="os mf iu oo b gz ot ou l ov ow">local nvim_lsp = require "lspconfig"<br/>nvim_lsp.tailwindcss.setup {}</span></pre><h2 id="cc5c" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">演示TailWindCSS中的自动完成</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qj"><img src="../Images/4651171fb18e0e8fcbfb2e28b290ec9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-SFiHseVrZ4w1qoW_L_R-w.png"/></div></div></figure></div><div class="ab cl lb lc hy ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="in io ip iq ir"><h1 id="502a" class="me mf iu bd mg mh nn mj mk ml no mn mo ka np kb mq kd nq ke ms kg nr kh mu mv bi translated">启用使用Null-ls和更漂亮的代码格式</h1><p id="3284" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated"><code class="fe oy oz pa oo b">Lua</code>的自动套用格式已通过LSP配置启用。然而，为了让文件类型<code class="fe oy oz pa oo b">javascript</code>、<code class="fe oy oz pa oo b">javascriptreact</code>、<code class="fe oy oz pa oo b">typescript</code>和<code class="fe oy oz pa oo b">typescriptreact</code>具有相同的自动格式化特性，我们需要使用另外两个neovim插件— <code class="fe oy oz pa oo b"><a class="ae nh" href="https://github.com/jose-elias-alvarez/null-ls.nvim" rel="noopener ugc nofollow" target="_blank">null-ls</a></code>和<code class="fe oy oz pa oo b">prettier</code>。</p><blockquote class="pb pc pd"><p id="6e68" class="li lj pe lk b ll lm jv ln lo lp jy lq pf ls lt lu pg lw lx ly ph ma mb mc md in bi translated"><a class="ae nh" href="https://github.com/jose-elias-alvarez/null-ls.nvim" rel="noopener ugc nofollow" target="_blank">Jose-Elias-Alvarez/null-ls . nvim</a>:“使用Neovim作为语言服务器来注入LSP诊断、代码动作、格式化、悬停和完成。”</p><p id="01b7" class="li lj pe lk b ll lm jv ln lo lp jy lq pf ls lt lu pg lw lx ly ph ma mb mc md in bi translated"><a class="ae nh" href="https://github.com/MunifTanjim/prettier.nvim" rel="noopener ugc nofollow" target="_blank">MunifTanjim/appeller . nvim</a>:“neo vim内置LSP客户端的appeller插件。”</p></blockquote><h2 id="84dc" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">安装插件</h2><pre class="kk kl km kn gu on oo op oq aw or bi"><span id="4bd2" class="os mf iu oo b gz ot ou l ov ow">use('neovim/nvim-lspconfig')<br/>use('jose-elias-alvarez/null-ls.nvim')<br/>use('MunifTanjim/prettier.nvim')</span></pre><p id="e46c" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">我们还需要安装<code class="fe oy oz pa oo b"><a class="ae nh" href="https://github.com/fsouza/prettierd" rel="noopener ugc nofollow" target="_blank">prettierd</a></code>以便在我们的编辑器中运行得更快:</p><pre class="kk kl km kn gu on oo op oq aw or bi"><span id="38ed" class="os mf iu oo b gz ot ou l ov ow">npm install -g <a class="ae nh" href="http://twitter.com/fsouza/prettierd" rel="noopener ugc nofollow" target="_blank">@fsouza/prettierd</a><br/># or use homebrew to install<br/>brew install fsouza/prettierd/prettierd</span></pre><h2 id="face" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">示例配置</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qk"><img src="../Images/024734a44138ddcb5dc8cd30474fc883.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qhFc8x48h6G1l2HwVgmZfQ.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">Null-ls配置</figcaption></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ql"><img src="../Images/130e8b8b840f6ea47b08d35eb4a7d093.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gbaPOwBNs0ilkT4YNwhnQw.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">更漂亮的配置</figcaption></figure></div><div class="ab cl lb lc hy ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="in io ip iq ir"><h1 id="5f0e" class="me mf iu bd mg mh nn mj mk ml no mn mo ka np kb mq kd nq ke ms kg nr kh mu mv bi translated">实现美观易读的在线诊断</h1><h2 id="101d" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">当前在线诊断的问题是</h2><p id="4492" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated">在我们之前通过LSP配置设置语言服务器后，会自动启用在线诊断，例如，语法错误或警告会在缓冲区中进行注释。</p><p id="53a3" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">然而，在线诊断很容易脱离屏幕。我们必须缩小屏幕才能看到整个信息，这使得阅读很困难。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/1074bdbeca9d884bec3545681030bb03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*93lR8151jVSMwbUs7futpQ.gif"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">在线诊断在<code class="fe oy oz pa oo b">.tsx</code>文件中启用，但对用户不友好。GIF作者<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a></figcaption></figure><h2 id="8c4f" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">解答-在悬停窗口中自动显示在线诊断</h2><p id="5db8" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated">将以下代码添加到我们的<code class="fe oy oz pa oo b"> lspconfig. lua</code>文件中:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qm"><img src="../Images/d32864e6e1f371abd6a3786b0e576dec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gcbUroOvuwU4jSEsweWXXw.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">代码来源:<a class="ae nh" href="https://github.com/neovim/nvim-lspconfig/wiki/UI-Customization#show-line-diagnostics-automatically-in-hover-window" rel="noopener ugc nofollow" target="_blank">在悬停窗口中自动显示在线诊断</a></figcaption></figure><h2 id="ba44" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">演示自动显示在悬停窗口中的在线诊断</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/04967a88ebb81117eaf822e086d34437.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qC1md6d-XMzci9wNCw79yw.gif"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">将光标移动到中的目标行时，在悬停窗口中自动显示在线诊断。tsx文件。GIF作者<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a></figcaption></figure><h2 id="aa2c" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">通过在符号列中添加诊断符号，进一步改进在线诊断</h2><p id="ae71" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated">以下是当前诊断符号在符号列中的样子:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qn"><img src="../Images/f6d110755bb528c48dc2d0f3ca849f70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RRD6rwtvPEC193UuGRySzw.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">符号栏中不显示诊断符号。<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a>截图</figcaption></figure><p id="13c5" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">让我们添加四种诊断符号— <code class="fe oy oz pa oo b">Error</code>、<code class="fe oy oz pa oo b">Warn</code>、<code class="fe oy oz pa oo b">Hint</code>和<code class="fe oy oz pa oo b">Info</code>。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qo"><img src="../Images/f6cc324f8f28838f6b6620d494edc3f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*abmNlbQXZ06UKcyI1x1vgA.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">诊断的LSP配置。截图由<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a></figcaption></figure><p id="9cda" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">诊断符号显示在左侧的符号栏中:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qn"><img src="../Images/e9b40f213b8b46e24abb57c5a82387bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PZbL6QqOZsPOXKyHsQEivA.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">在符号列中显示内嵌诊断符号。<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a>截图</figcaption></figure></div><div class="ab cl lb lc hy ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="in io ip iq ir"><h1 id="a999" class="me mf iu bd mg mh nn mj mk ml no mn mo ka np kb mq kd nq ke ms kg nr kh mu mv bi translated">使用Lspsaga插件改进LSP UI</h1><blockquote class="pb pc pd"><p id="2bd3" class="li lj pe lk b ll lm jv ln lo lp jy lq pf ls lt lu pg lw lx ly ph ma mb mc md in bi translated">Lspsaga是一个轻量级LSP插件，基于neovim的内置LSP，具有高性能的UI。(来源:<a class="ae nh" href="https://github.com/glepnir/lspsaga.nvim" rel="noopener ugc nofollow" target="_blank"> glepnir/lspsaga.nvim </a>)</p></blockquote><p id="72a7" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">Lspsaga为LSP相关的特性提供了一系列高性能的用户界面，包括悬停文档、查看定义、在预览中重命名等等。</p><h2 id="7404" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">使用打包程序安装Lspsaga插件</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qp"><img src="../Images/047870b40610299d718e083781796743.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xuLVkgC5Eb_Uy4imVFlR5g.png"/></div></div></figure><h2 id="67c5" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">Lspsaga配置</h2><p id="fe9f" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated">你可以在它的GitHub文档中找到一些<a class="ae nh" href="https://github.com/glepnir/lspsaga.nvim" rel="noopener ugc nofollow" target="_blank">详细的配置示例。</a></p><p id="6683" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated"><em class="pe">示例配置:</em></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qq"><img src="../Images/5246a17266d5d496b9fcb1d2298d35ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ee4rTmcgdbpZIWw9WKPFXQ.png"/></div></div></figure><h2 id="efce" class="os mf iu bd mg pi pj dn mk pk pl dp mo lr pm pn mq lv po pp ms lz pq pr mu ps bi translated">演示LSP的高性能用户界面</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/32fbdcf6cea5bb76280855076eba9ce6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1zYYiXJ18Wt9V6LCHWgyxw.gif"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">演示LSP插件为LSP提供的高性能用户界面。GIF作者<a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank">李冠仪</a></figcaption></figure></div><div class="ab cl lb lc hy ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="in io ip iq ir"><h1 id="7bd5" class="me mf iu bd mg mh nn mj mk ml no mn mo ka np kb mq kd nq ke ms kg nr kh mu mv bi translated">包裹</h1><p id="a301" class="pw-post-body-paragraph li lj iu lk b ll my jv ln lo mz jy lq lr ns lt lu lv nt lx ly lz nu mb mc md in bi translated">对于Neovim内置LSP支持的这些有用插件，我们已经深入讨论过了:<a class="ae nh" href="https://github.com/neovim/nvim-lspconfig" rel="noopener ugc nofollow" target="_blank"><strong class="lk iv">nvim-LSP config</strong></a>、<strong class="lk iv"> </strong> <a class="ae nh" href="https://github.com/jose-elias-alvarez/null-ls.nvim" rel="noopener ugc nofollow" target="_blank"> <strong class="lk iv"> null-ls </strong>、</a> <a class="ae nh" href="https://github.com/glepnir/lspsaga.nvim" rel="noopener ugc nofollow" target="_blank"> <strong class="lk iv"> lspsaga </strong> </a>、以及<a class="ae nh" href="https://github.com/hrsh7th/nvim-cmp" rel="noopener ugc nofollow" target="_blank"><strong class="lk iv">nvim-CMP</strong></a><strong class="lk iv">。</strong>通过适当的配置，我们可以实现智能代码完成、用户友好的在线诊断等。在Neovim很容易。</p><p id="95c5" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">感谢阅读。我希望这篇文章对使用基于Neovim的文本编辑器的Next.js项目有所帮助。</p><p id="48af" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">关于Lua中nvim的配置，请查看我的GitHub Repo。</p><div class="nv nw gq gs nx ny"><a href="https://medium.com/@amy-juan-li/membership" rel="noopener follow" target="_blank"><div class="nz ab fp"><div class="oa ab ob cl cj oc"><h2 class="bd iv gz z fq od fs ft oe fv fx it bi translated">通过我的推荐链接-李冠仪加入媒体</h2><div class="of l"><h3 class="bd b gz z fq od fs ft oe fv fx dk translated">阅读李冠仪的每一个故事(以及媒体上成千上万的其他作家)。你的会员费直接支持李冠仪…</h3></div><div class="og l"><p class="bd b dl z fq od fs ft oe fv fx dk translated">medium.com</p></div></div><div class="oh l"><div class="qr l oj ok ol oh om kt ny"/></div></div></a></div></div><div class="ab cl lb lc hy ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="in io ip iq ir"><p id="a9a9" class="pw-post-body-paragraph li lj iu lk b ll lm jv ln lo lp jy lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated"><a class="ae nh" href="https://medium.com/@amy-juan-li/membership" rel="noopener"> <em class="pe">如果你想在Medium上阅读来自</em> </a><a class="kz la ep" href="https://medium.com/u/9f2dc23bfffa?source=post_page-----a052f500da2--------------------------------" rel="noopener" target="_blank"> <em class="pe">【李冠仪】</em> </a> <em class="pe">以及成千上万其他作家的每一个故事，考虑成为Medium会员</em>  <em class="pe">。每月5美元，你可以无限制地访问媒体内容。如果你通过我的链接</em>  <em class="pe">注册，我会得到一点佣金。</em></p></div><div class="ab cl lb lc hy ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="in io ip iq ir"><h1 id="65c2" class="me mf iu bd mg mh nn mj mk ml no mn mo ka np kb mq kd nq ke ms kg nr kh mu mv bi translated">进一步阅读</h1><div class="nv nw gq gs nx ny"><a href="https://blog.devgenius.io/set-up-a-next-js-application-workflow-using-neovim-typescript-tailwind-23621a34ed38" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fp"><div class="oa ab ob cl cj oc"><h2 class="bd iv gz z fq od fs ft oe fv fx it bi translated">使用Neovim、TypeScript和TailwindCSS设置Next.js应用程序工作流</h2><div class="of l"><h3 class="bd b gz z fq od fs ft oe fv fx dk translated">为新的Next.js应用程序设置高效的工作流。</h3></div><div class="og l"><p class="bd b dl z fq od fs ft oe fv fx dk translated">blog.devgenius.io</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om kt ny"/></div></div></a></div><div class="nv nw gq gs nx ny"><a href="https://amy-juan-li.medium.com/how-i-learned-to-love-vim-9b7fe53a4615" rel="noopener follow" target="_blank"><div class="nz ab fp"><div class="oa ab ob cl cj oc"><h2 class="bd iv gz z fq od fs ft oe fv fx it bi translated">我是如何学会爱上Vim并在一个月内从VS代码过渡到Vim终端的</h2><div class="of l"><h3 class="bd b gz z fq od fs ft oe fv fx dk translated">快速过渡到基于Vim的文本编辑器是正确的选择！</h3></div><div class="og l"><p class="bd b dl z fq od fs ft oe fv fx dk translated">amy-juan-li.medium.com</p></div></div><div class="oh l"><div class="qs l oj ok ol oh om kt ny"/></div></div></a></div></div></div>    
</body>
</html>