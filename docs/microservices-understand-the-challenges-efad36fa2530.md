# 微服务:了解挑战

> 原文：<https://levelup.gitconnected.com/microservices-understand-the-challenges-efad36fa2530>

![](img/8b46ba6b13a54ca53e80fd88d8df0697.png)

迈克尔·朗米尔在 [Unsplash](https://unsplash.com/s/photos/microscope?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上的照片

*阳光明媚，我坐在电脑前，准备开始一天的开发工作。手里拿着一杯热咖啡。双显示器。舞台被设置成用我的键盘和笔记本电脑的画笔和画布来创造复杂而精致的艺术。但是，即使是雨天，我只有一个 wifi 热点和一个记事本，这一天也是开发的好日子—* 因为我们使用微服务开发我们的应用！

当我打开笔记本电脑准备工作时，我默默地同情世界上无数被迫从事单一应用程序工作的开发人员。一直以来，在一个项目中搜寻，发现自己在 18 个文件中深入寻找一个 bug 的难以捉摸的来源…

一阵颤栗爬上了我的脊柱，但我摆脱了恐惧的感觉，知道我不会受到这样的折磨。

## **但是真的……**

“微服务”是目前软件行业的热门词汇。如果你在网上做一些快速搜索，你会觉得自己像一个罪犯，因为你决定了一个在某种程度上不涉及“微”这个词的架构模式。我不知道有多少次，当我开始描述我最近参与的一个项目时，我感觉自己正在被默默的(或不那么默默的)评判，因为我没有为应用程序的每个部分准备不同的代码库。

现在，我已经在一个已经部署并积极支持成千上万用户的应用程序上使用了微服务，我想我应该分享一下在实际层面上开发微服务的情况。如果您正在探索迁移到(或从)微服务的可能性，希望这些观察能够通知您。

# **预计会有很多仓库**

微服务的一个主要优势是拥有可部署的、分离的功能，这些功能是分离的，可以单独维护。实际上，这意味着您将拥有大量的存储库。对于我们的项目来说，这意味着在 20 的上限，对于其他人来说，可能更多或更少。无论哪种方式，当你处理不同的 bug、特性等时，在项目之间交换。，可能很费时间。根据您对 git 或您使用的任何其他版本控制系统的熟悉程度，存储库之间的上下文切换可能是也可能不是一件大事。

这些存储库的组织将对这是一次痛苦还是愉快的经历产生巨大的影响。要体验微服务的好处，您的功能必须像您希望代码那样很好地解耦。如果不是这样，这将是一个持续的痛苦，因为如果不在多个存储库中工作，您将无法在单个功能上工作。事实上，这将比一个松散的整体更糟糕，因为你有更多的部分要处理。

如果您正在使用微服务进行开发，并且发现自己经常在存储库之间切换以实现基本的功能开发，这表明您没有正确地分离服务的关注点。

无论哪种方式，如果你是一个希望使用大量微服务的开发团队，就要准备大量的存储库。就这样…

# 你最好有好的发展

回报越多，债务越多。或者你最好希望如此，因为拥有一个单独的“可部署的”功能集意味着它需要被部署、更新、维护，并且在开发时可供你和其他人使用。

您是否有一个 QA 团队需要能够在开发过程中测试您的功能？您将需要一个测试环境，并且您需要能够方便地为他们单独更新和部署这些不同的部分。如果你没有一个强大的 CI/CD 管道，你会后悔为了追随微服务趋势而将你的整体分割成许多部分。

实际上，您可能会有一些经常更新的存储库，在您继续进行特性开发时，不去管其他的。如果你有多个团队在一个项目中使用多个微服务，你肯定会希望与他们保持同步，了解微服务的更新频率。

另一种方法也很流行，尽管我自己没有用过，那就是让每个团队负责单独的服务。在这种情况下，您仍然需要一个强大的 CI/CD 管道，但是您主要只需要担心您的团队所负责的服务。

# **如何保持干燥…**

DRY，或不要重复你自己，是一种编码最佳实践，它提醒我们所有人，如果我们在许多不同的地方发现相同的代码，这可能是一个提取一些逻辑并将其转化为共享组件的机会。即使在微服务领域，也不可避免地会有一些核心信息需要在所有服务之间共享，因此您需要为此制定一个策略，不要在十几个不同的 repos 之间进行复制/pasta。

对于那些坚持认为这不应该发生在适当架构的微服务中的反对者，我说也许…但无论如何都有可能发生。甚至像认证和授权这样基本的事情也需要一些共享代码，所以要确保你知道如何很好地共享。在我们的商店中，我们跨许多微服务共享一个数据库，这导致了跨 API 的大量重复。我们通过为不特定于某个特性的代码使用共享库来减轻这个问题。但是我们一直在努力提高，仍然有很长的路要走。

如果您踏上使用微服务构建企业级应用程序的旅程，很可能会遇到类似的挑战。

**总结**

希望这对以前从未使用过微服务的人有所启发。当我进入一个完全依赖微服务的环境时，我遇到了令人愉快和不愉快的惊喜，并且今天仍然享受着这种挑战。

同意或不同意我提到的任何事情？下面留言评论！