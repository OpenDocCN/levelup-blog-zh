<html>
<head>
<title>React forms — useState vs useRef</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应表单—使用状态与用户参考</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/react-forms-usestate-vs-useref-5cb584cc19fd?source=collection_archive---------0-----------------------#2021-11-25">https://levelup.gitconnected.com/react-forms-usestate-vs-useref-5cb584cc19fd?source=collection_archive---------0-----------------------#2021-11-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="edf3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">根据您的需要选择实现React表单的正确方法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/445328e1d3d41356e1a382199e958fef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1AktzTtx2ZOH1kb8yv7Piw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@max_duz?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Max Duzij </a>在<a class="ae kv" href="https://unsplash.com/s/photos/programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><blockquote class="ld le lf"><p id="82b4" class="lg lh li lj b lk ll jr lm ln lo ju lp lq lr ls lt lu lv lw lx ly lz ma mb mc ij bi translated">今天编写优化的、结构良好的应用程序将会让你明天节省大量的时间</p></blockquote></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="a8e4" class="pw-post-body-paragraph lg lh iq lj b lk ll jr lm ln lo ju lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">在本文中，我想向您展示React <code class="fe mg mh mi mj b">useState</code>和<code class="fe mg mh mi mj b">useRef</code>在没有第三方库的情况下实现表单的区别。</p><p id="2e86" class="pw-post-body-paragraph lg lh iq lj b lk ll jr lm ln lo ju lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">这两种方法都是有效的，我们应该根据我们的需要选择最合适的，这意味着我们可以在应用程序的不同地方使用这两种方法。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="f91c" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">如何阅读博客文章</h1><p id="4c82" class="pw-post-body-paragraph lg lh iq lj b lk nc jr lm ln nd ju lp md ne ls lt me nf lw lx mf ng ma mb mc ij bi translated">保持👀打开并检查<strong class="lj ir">演示示例中的<code class="fe mg mh mi mj b">### Refreshing</code>控制台日志。</strong></p><p id="b8a5" class="pw-post-body-paragraph lg lh iq lj b lk ll jr lm ln lo ju lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">请阅读示例下的描述，深入了解不同之处。</p><p id="47e9" class="pw-post-body-paragraph lg lh iq lj b lk ll jr lm ln lo ju lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">如果您对Codesandbox iframe有任何问题，请检查您的浏览器设置，查看第三方cookies和站点数据。这里有一个<a class="ae kv" href="https://www.chromium.org/for-testers/bug-reporting-guidelines/uncaught-securityerror-failed-to-read-the-localstorage-property-from-window-access-is-denied-for-this-document" rel="noopener ugc nofollow" target="_blank">铬</a>的例子。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="2af8" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">第一种方法:useRef</h1><p id="3cd4" class="pw-post-body-paragraph lg lh iq lj b lk nc jr lm ln nd ju lp md ne ls lt me nf lw lx mf ng ma mb mc ij bi translated">第一种方法是使用<code class="fe mg mh mi mj b">React.useRef</code>钩子。它是最被低估的，但是如果你不需要特殊的控件，它将允许你优化表单。</p><p id="1784" class="pw-post-body-paragraph lg lh iq lj b lk ll jr lm ln lo ju lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated"><code class="fe mg mh mi mj b">React.useRef</code>将允许您编写表单，而无需为每个用户输入重新呈现组件，以实时控制为代价优化应用程序，根据用户输入和预览启用/禁用表单提交按钮。</p><h1 id="a60c" class="mk ml iq bd mm mn nh mp mq mr ni mt mu jw nj jx mw jz nk ka my kc nl kd na nb bi translated">代码示例</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h1 id="c224" class="mk ml iq bd mm mn nh mp mq mr ni mt mu jw nj jx mw jz nk ka my kc nl kd na nb bi translated">演示</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/830962d8f0333a2980fba94d3df0ab3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*fx9LfXdX57Q4sZjHEK2pfw.gif"/></div></div></figure><p id="8a31" class="pw-post-body-paragraph lg lh iq lj b lk ll jr lm ln lo ju lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">正如你从上面的例子中看到的，用<code class="fe mg mh mi mj b">useRef</code>实现非常简单。我们没有使用组件状态，这意味着组件没有被刷新——事实上，控制台日志只打印一次<code class="fe mg mh mi mj b">### Refreshing</code>字符串。</p><p id="d095" class="pw-post-body-paragraph lg lh iq lj b lk ll jr lm ln lo ju lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">最大的限制是，我不能根据用户输入禁用/启用按钮，我们不能实时验证表单，但我们可以在提交时验证。</p><h1 id="16c5" class="mk ml iq bd mm mn nh mp mq mr ni mt mu jw nj jx mw jz nk ka my kc nl kd na nb bi translated">第二种方法:使用状态</h1><p id="274c" class="pw-post-body-paragraph lg lh iq lj b lk nc jr lm ln nd ju lp md ne ls lt me nf lw lx mf ng ma mb mc ij bi translated">第二种方法是使用<code class="fe mg mh mi mj b">React.useState</code>钩子。这是最常用的，有时也是被滥用的，因为很多表单不需要实时验证。</p><p id="bfdf" class="pw-post-body-paragraph lg lh iq lj b lk ll jr lm ln lo ju lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">对于不使用<code class="fe mg mh mi mj b">useCallback</code>和/或<code class="fe mg mh mi mj b">useMemo</code>钩子的人来说，这也是最大的问题，这些钩子对于编写一个优秀的应用程序来说是不可或缺的，因为组件会为每个用户输入重新加载，如果组件有很多未缓存的函数，你可能会大大降低应用程序的速度。</p><p id="0103" class="pw-post-body-paragraph lg lh iq lj b lk ll jr lm ln lo ju lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated"><code class="fe mg mh mi mj b">React.useState</code>将允许你为每个用户输入重新渲染组件，以建立更复杂的实时控制形式，即</p><h1 id="5048" class="mk ml iq bd mm mn nh mp mq mr ni mt mu jw nj jx mw jz nk ka my kc nl kd na nb bi translated">代码示例</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h1 id="3956" class="mk ml iq bd mm mn nh mp mq mr ni mt mu jw nj jx mw jz nk ka my kc nl kd na nb bi translated">演示</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/3b839c7f47dd7d01df230eab06f65a5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*HPIgNlx3R16ZihIghpiDlw.gif"/></div></div></figure><p id="0e20" class="pw-post-body-paragraph lg lh iq lj b lk ll jr lm ln lo ju lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">看起来<code class="fe mg mh mi mj b">React.useState</code>的实现比<code class="fe mg mh mi mj b">React.useRef</code>容易。我们使用组件状态，这意味着组件被刷新了很多次——事实上，控制台日志打印的<code class="fe mg mh mi mj b">### Refreshing</code>字符串超过了<strong class="lj ir"> 60 </strong>次。</p><p id="0376" class="pw-post-body-paragraph lg lh iq lj b lk ll jr lm ln lo ju lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">如果你没有使用<code class="fe mg mh mi mj b">useCallback</code>和<code class="fe mg mh mi mj b">useMemo</code>就用其他嵌套组件编写了一个大组件，那么使用这种方式制作的表单并不是一个好方法。</p><h1 id="c548" class="mk ml iq bd mm mn nh mp mq mr ni mt mu jw nj jx mw jz nk ka my kc nl kd na nb bi translated">结论</h1><p id="1c5a" class="pw-post-body-paragraph lg lh iq lj b lk nc jr lm ln nd ju lp md ne ls lt me nf lw lx mf ng ma mb mc ij bi translated">如果你想构建复杂的表单，使用<code class="fe mg mh mi mj b">useState</code>，否则我建议你使用<code class="fe mg mh mi mj b">useRef.</code> <strong class="lj ir"> <em class="li">。在我看来，实时验证和这种UI改进并没有给UX增加很多东西，但一个快速简洁的应用程序就足够了。</em> </strong></p><h1 id="f4e7" class="mk ml iq bd mm mn nh mp mq mr ni mt mu jw nj jx mw jz nk ka my kc nl kd na nb bi translated">就这样</h1><p id="99f4" class="pw-post-body-paragraph lg lh iq lj b lk nc jr lm ln nd ju lp md ne ls lt me nf lw lx mf ng ma mb mc ij bi translated">仅此而已！我希望这篇博文能帮助你理解一些小的React内部机制，从而改进你的应用程序。</p><p id="9d5d" class="pw-post-body-paragraph lg lh iq lj b lk ll jr lm ln lo ju lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">你喜欢这篇文章吗？用掌声和评论让我知道🙏</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="353c" class="pw-post-body-paragraph lg lh iq lj b lk ll jr lm ln lo ju lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">ReactJS/NextJS应用程序需要帮助吗？<a class="ae kv" href="mailto:andrea.vassallo.94@gmail.com" rel="noopener ugc nofollow" target="_blank"> <strong class="lj ir">联系我！</strong> </a></p><p id="0567" class="pw-post-body-paragraph lg lh iq lj b lk ll jr lm ln lo ju lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">你想加入星云实验室吗？<a class="ae kv" href="https://grnh.se/8df3c4f2teu" rel="noopener ugc nofollow" target="_blank"> <strong class="lj ir">此处适用</strong> </a>！</p></div></div>    
</body>
</html>