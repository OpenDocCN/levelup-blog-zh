<html>
<head>
<title>How I deployed a modern full-stack application on AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何在AWS上部署现代全栈应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-i-deployed-a-modern-full-stack-application-on-aws-4ce13113f8bf?source=collection_archive---------5-----------------------#2022-06-26">https://levelup.gitconnected.com/how-i-deployed-a-modern-full-stack-application-on-aws-4ce13113f8bf?source=collection_archive---------5-----------------------#2022-06-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7a15d6c2201720b8f034765ac1d77463.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5nNC-Evmu3YLDJud20taIQ.png"/></div></div></figure><p id="2830" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">漂亮的互联网用户(还有机器人😊)，在本文中，我想向您展示我是如何在AWS上部署全栈应用程序的。是的，前端和后端💃💃</p><p id="b69c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">前端堆栈</strong></p><p id="02ae" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于前端，我使用了以下技术:</p><ul class=""><li id="1e78" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">Axios / React查询</li><li id="1e05" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">反应(🤷)</li><li id="befb" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">下一个JS</li></ul><p id="5b24" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">后端栈</strong></p><p id="017c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于后端，我使用了以下技术:</p><ul class=""><li id="b919" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">Node.js /快递</li><li id="b0df" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">MongoDB</li></ul><p id="7631" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以基本上MERN·斯塔克😊</p><p id="d3a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在部署时，我使用了以下AWS服务:</p><ul class=""><li id="fb85" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">AWS放大器</li><li id="6dd6" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">AWS文档数据库</li><li id="34e2" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">AWS SES</li><li id="812e" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">53号公路</li><li id="2736" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">AWS证书管理器</li><li id="acad" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">AWS弹性豆茎</li><li id="b6a2" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">AWS S3</li><li id="68cf" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">AWS代码管道</li></ul><p id="95dc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以让我们进入细节</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lk"><img src="../Images/5cab43134fb334eab11afac1d59710c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TRaJSAy4UOLlt0M5RFwq0Q.jpeg"/></div></div></figure><p id="64fe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">一期:53号线</strong></p><p id="755a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第一件事就是把我们的域名导入到53路。</p><p id="95d2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个过程相当简单，在AWS控制台上转到Route 53并创建一个新的<strong class="ka ir">托管区域</strong></p><p id="90fa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">托管区域代表您的域名</p><p id="41bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你输入你的域名，并更新你的注册服务商的域名记录；通常有四条记录</p><p id="9847" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完成后，您的域名现在位于AWS Route 53上</p><p id="11c0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第二阶段:AWS简单电子邮件服务(SES) </strong></p><p id="345e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如今，由于各种原因，每个现代应用程序都需要向用户发送电子邮件通知或其他类型的电子邮件</p><p id="f9e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了能够从noreply@mydomain.com发送电子邮件，你需要设置一个<strong class="ka ir">验证身份</strong></p><p id="7280" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">经过验证的身份可以是域名或电子邮件地址。</p><p id="1a1c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要验证一个电子邮件地址，你只需点击发送到你邮箱的链接，但是对于域名，你需要更新CNAME记录</p><p id="3dc7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦您的身份得到验证，您就可以用该身份发送电子邮件</p><p id="0717" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要向您的AWS帐户上未经验证身份的其他电子邮件发送电子邮件，您必须申请AWS SES的生产访问权限</p><p id="b328" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第三阶段:AWS放大</strong></p><p id="deff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">AWS Amplify是一项允许您快速部署前端web应用程序的服务，它支持多种技术</p><p id="3a7a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我尝试了AWS AppRunner，但我随后意识到它仍然非常新，缺乏许多关键功能(我在2022年写这篇文章🤥)</p><p id="8581" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用Amplify，我们可以很容易地设置我们的代码库的哪一个分支用于阶段化和产品化</p><p id="571c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还可以为暂存环境启用密码保护，这真的很棒</p><p id="190f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Amplify也有助于设置域和子域，当域在AWS Route 53上时，这个过程甚至容易得多</p><p id="d286" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">别忘了HTTP到HTTPS的重定向也是自动处理的😌</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lp"><img src="../Images/aaff6f2caba0eb103ad8b52b86b8f4a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*oc0hyPJelmzDt1WK-k6aSA.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">灵感来自<a class="ae lu" href="https://www.youtube.com/c/BenAwad97" rel="noopener ugc nofollow" target="_blank">本·阿瓦德</a></figcaption></figure><p id="d60e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第4阶段:AWS文件数据库</strong></p><p id="7b87" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">AWS正在通过提供自己版本的MongoDB来重新发明轮子。</p><p id="eb3a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是一个惊人的服务(到目前为止👀)，只是我会喜欢像Atlas上那样的可视化编辑器。不管怎样，如果你感兴趣，这里有一篇关于如何在MongoDB Compass上访问你的文档DB的文章</p><p id="ca7f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">设置文档数据库时，请记住它只能由同一VPC内的其他AWS服务访问。如果您想在VPC之外使用它，您需要建立一个SSH隧道。</p><p id="25c8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">记住这一点，在文档DB上配置安全组，以允许来自EC2实例的TCP访问。</p><p id="7560" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您还可以将文档DB的SG设置为接受来自任何地方的TCP请求，这实际上不接受来自任何地方的TCP请求，而只接受VPC内部的请求。是的，我知道AWS喜欢和devs捣乱🤷</p><p id="28b1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第五阶段:AWS S3 </strong></p><p id="a759" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">除非您是Web 1开发人员，否则需要一个S3存储桶来存储文件和配置文件图像</p><p id="7905" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就个人而言，我喜欢用一个桶来存储公共和私有文件，并使用AWS所谓的“封装ACL”来管理访问</p><p id="0103" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建存储桶时，请确保启用ACL并禁用对公共访问的阻止。此时，默认情况下，上传到bucket的所有对象都是私有的，要访问它们，您需要生成一个预先签名的URL，这可以通过AWS SDK来完成</p><p id="c27f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当上传您想要公开的对象时，您还可以指定“公共读取”ACL</p><p id="0f48" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第六阶段:AWS证书管理员</strong></p><p id="05af" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">AWS证书管理器管理用于您的域的SSL/TLS证书。</p><p id="bbad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用证书管理器，您可以通过为以下对象请求证书来快速生成涵盖所有子域的证书</p><pre class="ll lm ln lo gt lv lw lx ly aw lz bi"><span id="7232" class="ma mb iq lw b gy mc md l me mf">*.example.com</span></pre><p id="2ed8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">或许也适用于开发环境</p><pre class="ll lm ln lo gt lv lw lx ly aw lz bi"><span id="cb4d" class="ma mb iq lw b gy mc md l me mf">*.dev.example.com</span></pre><p id="7e8c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要激活SSL，你需要做的就是添加一些CNAME记录，然后你的网站就安全了</p><p id="e4df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">虽然，如果你是一个10倍的开发者，你的域名已经在53号公路上，这是自动完成的😎</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/3d28510252e48114ebfb1fc04a045b8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*A9ijspVi-5pUi74fc-oddw.jpeg"/></div></figure><p id="b1fe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第七期:AWS弹性豆茎</strong></p><p id="8cf7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">部署应用程序时，水平和垂直扩展的便利性非常重要</p><p id="4a01" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当工作负载增加时，水平扩展会增加更多的服务器实例，而垂直扩展会增加CPU能力</p><p id="07e3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你自己设置的问题是你必须处理的；负载平衡器、自动扩展组、提供EC2实例、设置健康检查；因为有了豆茎，很多事情都不用我操心了😎</p><p id="62eb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">附注:学习如何手动设置是很好的🤓</p><p id="1fe8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有了AWS Elastic BeanStalk，您需要的所有东西都可以轻松管理，并且您可以根据自己的需要轻松扩展或缩小</p><p id="5665" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">BeanStalk还支持各种各样的语言和框架，这非常酷</p><p id="1980" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第8阶段:AWS代码管道</strong></p><p id="8b1c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，让我们来看看我个人最喜欢的AWS服务之一</p><p id="b292" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">代码管道非常简单，它帮助您将远程git存储库连接到AWS</p><p id="9951" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它支持GitHub、Atlassian Bitbucket和其他一些git提供者</p><p id="6555" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用代码管道，您可以基于特定git分支上的操作，自动将代码管道化到不同的AWS服务中</p><p id="beeb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">结论</strong></p><p id="b39f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">AWS是一个非常好的服务，你可能需要学习一些相关的知识</p><p id="5579" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我推荐这个免费课程来帮助你开始学习；<a class="ae lu" href="https://explore.skillbuilder.aws/learn/course/external/view/elearning/134/aws-cloud-practitioner-essentials" rel="noopener ugc nofollow" target="_blank">航线</a>🚀🚀</p><p id="3abd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，我刚开始使用AWS不到一个月，决定分享一些我到目前为止学到的东西</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/a1d590e8d09d97c40e95a3df7afdb4f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*94M0Lj0047TuU2p7MklAcA.jpeg"/></div></figure><p id="b59c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">联系我<a class="ae lu" href="https://toluolatubosun.com/contact" rel="noopener ugc nofollow" target="_blank">这里</a>的机会和合作或只是谈谈</p><p id="3225" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下一篇文章再见🚀🚀</p></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><h1 id="458c" class="mp mb iq bd mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl bi translated">分级编码</h1><p id="2a95" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">感谢您成为我们社区的一员！更多内容请参见<a class="ae lu" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>。<br/>跟随:<a class="ae lu" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a>，<a class="ae lu" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">领英</a>，<a class="ae lu" href="https://newsletter.levelup.dev/" rel="noopener ugc nofollow" target="_blank">通迅</a> <br/> <strong class="ka ir">升一级正在改造理工大招聘➡️ </strong> <a class="ae lu" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">加入我们的人才集体</strong> </a></p></div></div>    
</body>
</html>