<html>
<head>
<title>Trix — Rich editor for your Rails 6 application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">trix——Rails 6应用程序的丰富编辑器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/trix-rich-editor-for-your-rails-6-application-7b89e2f33de8?source=collection_archive---------4-----------------------#2020-01-10">https://levelup.gitconnected.com/trix-rich-editor-for-your-rails-6-application-7b89e2f33de8?source=collection_archive---------4-----------------------#2020-01-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/62e73541ffe8f66f7bffd7ee96108271.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gxsZogZJJH93NObpXXmuEw.jpeg"/></div></div></figure><ul class=""><li id="2b02" class="jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">安装文本编辑器</li><li id="868e" class="jy jz iq ka b kb kq kd kr kf ks kh kt kj ku kl km kn ko kp bi translated">向ActiveRecord添加新的文本内容</li><li id="774b" class="jy jz iq ka b kb kq kd kr kf ks kh kt kj ku kl km kn ko kp bi translated">它在表单中的样子</li><li id="bec2" class="jy jz iq ka b kb kq kd kr kf ks kh kt kj ku kl km kn ko kp bi translated">保存内容</li></ul></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><p id="9c12" class="pw-post-body-paragraph lc ld iq ka b kb kc le lf kd ke lg lh kf li lj lk kh ll lm ln kj lo lp lq kl ij bi translated">在本系列的第1部分中，我们讨论了RESTful API和令牌认证。我们将继续扩展我们的旅行规划应用程序。</p><div class="lr ls gp gr lt lu"><a href="https://medium.com/@billy.sf.cheng/a-rails-6-application-part-1-api-1ee5ccf7ed01" rel="noopener follow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd ir gy z fp lz fr fs ma fu fw ip bi translated">在带有令牌认证的Rails 6应用程序中构建Restful APIs</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">通过示例一步一步地在Rails 6中创建带有令牌认证的新API。</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">medium.com</p></div></div><div class="md l"><div class="me l mf mg mh md mi jw lu"/></div></div></a></div></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><h1 id="2f39" class="mj mk iq bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">安装文本编辑器</h1><p id="9753" class="pw-post-body-paragraph lc ld iq ka b kb nh le lf kd ni lg lh kf nj lj lk kh nk lm ln kj nl lp lq kl ij bi translated">在Rails 6之前，如果我们要使用所见即所得编辑器，有很多选项，如CKEditor或TinyMCE。现在在Rails 6中，它附带了由Ruby on Rails和Basecamp的开发者开发的Trix编辑器。</p><p id="6e5c" class="pw-post-body-paragraph lc ld iq ka b kb kc le lf kd ke lg lh kf li lj lk kh ll lm ln kj lo lp lq kl ij bi translated">安装它非常简单，你运行<code class="fe nm nn no np b">rails action_text:install</code>。一旦完成，你会看到</p><pre class="nq nr ns nt gt nu np nv nw aw nx bi"><span id="bb15" class="ny mk iq np b gy nz oa l ob oc"><strong class="np ir">$ rails action_text:install</strong><br/>Copying actiontext.scss to app/assets/stylesheets<br/>      <strong class="np ir">create</strong>  app/assets/stylesheets/actiontext.scss<br/>Copying fixtures to test/fixtures/action_text/rich_texts.yml<br/>      <strong class="np ir">create</strong>  test/fixtures/action_text/rich_texts.yml<br/>Copying blob rendering partial to app/views/active_storage/blobs/_blob.html.erb<br/>      <strong class="np ir">create</strong>  app/views/active_storage/blobs/_blob.html.erb<br/>Installing JavaScript dependencies<br/>      <strong class="np ir">run</strong>  yarn add trix@^1.0.0 @rails/actiontext@^6.0.1 from "."<br/><strong class="np ir">yarn add v1.19.0<br/></strong>[1/4] 🔍  Resolving packages...<br/>[2/4] 🚚  Fetching packages...<br/>[3/4] 🔗  Linking dependencies...<br/>warning " &gt; webpack-dev-server@3.9.0" has unmet peer dependency "webpack@^4.0.0".<br/>warning "webpack-dev-server &gt; webpack-dev-middleware@3.7.2" has unmet peer dependency "webpack@^4.0.0".<br/>[4/4] 🔨  Building fresh packages...</span><span id="a334" class="ny mk iq np b gy od oa l ob oc">success Saved lockfile.<br/>warning Your current version of Yarn is out of date. The latest version is "1.19.1", while you're on "1.19.0".<br/>info To upgrade, run the following command:<br/>$ brew upgrade yarn<br/>success Saved 2 new dependencies.<br/>info Direct dependencies<br/>├─ @rails/actiontext@6.0.1<br/>└─ trix@1.2.1<br/>info All dependencies<br/>├─ @rails/actiontext@6.0.1<br/>└─ trix@1.2.1<br/>✨  Done in 10.97s.<br/>Adding trix to app/javascript/packs/application.js<br/>      <strong class="np ir">append</strong>  app/javascript/packs/application.js<br/>Adding @rails/actiontext to app/javascript/packs/application.js<br/>      <strong class="np ir">append</strong>  app/javascript/packs/application.js<br/>Copied migration 20191124011114_create_active_storage_tables.active_storage.rb from active_storage<br/>Copied migration 20191124011115_create_action_text_tables.action_text.rb from action_text</span></pre></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><h1 id="2fcd" class="mj mk iq bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">在ActiveRecord中添加新的文本内容</h1><p id="d5d0" class="pw-post-body-paragraph lc ld iq ka b kb nh le lf kd ni lg lh kf nj lj lk kh nk lm ln kj nl lp lq kl ij bi translated">让ActiveRecord使用ActionText很简单，只需添加<code class="fe nm nn no np b">has_rich_text :content</code>即可。</p><pre class="nq nr ns nt gt nu np nv nw aw nx bi"><span id="a13a" class="ny mk iq np b gy nz oa l ob oc"><strong class="np ir"># app/models/trip.rb</strong><br/>class Trip &lt; ApplicationRecord<br/>  has_rich_text :content<br/>end</span></pre></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><h1 id="fa53" class="mj mk iq bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">它在表单中的样子</h1><p id="fb01" class="pw-post-body-paragraph lc ld iq ka b kb nh le lf kd ni lg lh kf nj lj lk kh nk lm ln kj nl lp lq kl ij bi translated">当你表演<code class="fe nm nn no np b">rails action_text:install</code>时，会有一个<code class="fe nm nn no np b">actiontext.scss</code>为你而生。你必须在你的<code class="fe nm nn no np b">application.css</code>档案中‘要求’这一点。</p><pre class="nq nr ns nt gt nu np nv nw aw nx bi"><span id="8ab5" class="ny mk iq np b gy nz oa l ob oc"><strong class="np ir"># app/assets/stylesheets/application.scss</strong><br/>//= require actiontext</span></pre><p id="e750" class="pw-post-body-paragraph lc ld iq ka b kb kc le lf kd ke lg lh kf li lj lk kh ll lm ln kj lo lp lq kl ij bi translated">在您的视图文件中，您包含一个<code class="fe nm nn no np b">rich_text_area</code>，奇迹就会发生。</p><h2 id="3ed4" class="ny mk iq bd ml oe of dn mp og oh dp mt kf oi oj mx kh ok ol nb kj om on nf oo bi translated">视角</h2><pre class="nq nr ns nt gt nu np nv nw aw nx bi"><span id="aa9b" class="ny mk iq np b gy nz oa l ob oc"><strong class="np ir"># app/views/trips/_form.html.erb<br/></strong>&lt;%= form_with(model: trip) do |form| %&gt;<br/>  &lt;div class="field"&gt;<br/>    &lt;%= form.label :name %&gt;<br/>    &lt;%= form.text_field :name, class: "form-control" %&gt;<br/>  &lt;/div&gt;</span><span id="166d" class="ny mk iq np b gy od oa l ob oc">&lt;div class="field"&gt;<br/>    &lt;%= form.label :content %&gt;<br/>    &lt;%= form.rich_text_area :content %&gt;<br/>  &lt;/div&gt;<br/>  &lt;div class="field"&gt;<br/>    &lt;button type="submit" class="btn btn-success"&gt;Save&lt;/button&gt;<br/>  &lt;/div&gt;<br/>&lt;% end %&gt;</span><span id="f1ce" class="ny mk iq np b gy od oa l ob oc"><strong class="np ir"># app/views/trip/news.html.erb</strong><br/>&lt;%= render partial: "form", locals: { trip: <a class="ae op" href="http://twitter.com/trip" rel="noopener ugc nofollow" target="_blank">@trip</a> } %&gt;</span></pre><h2 id="a366" class="ny mk iq bd ml oe of dn mp og oh dp mt kf oi oj mx kh ok ol nb kj om on nf oo bi translated">控制器</h2><pre class="nq nr ns nt gt nu np nv nw aw nx bi"><span id="3c8f" class="ny mk iq np b gy nz oa l ob oc"><strong class="np ir"># app/controllers/trips_controller.rb</strong><br/>class TripsController &lt; ApplicationController<br/>  <br/>  def new<br/>    <a class="ae op" href="http://twitter.com/trip" rel="noopener ugc nofollow" target="_blank">@trip</a> = Trip.new<br/>  end<br/>  <br/>  def create<br/>    trip = Trip.create! trip_params<br/>    redirect_to trip<br/>  end<br/>  <br/>  def show<br/>    <a class="ae op" href="http://twitter.com/trip" rel="noopener ugc nofollow" target="_blank">@trip</a> = Trip.find(params[:id])<br/>  end<br/>  <br/>  private<br/>  <br/>  def trip_params<br/>    params.require(:trip).permit(:name, :content)<br/>  end<br/>  <br/>end</span></pre><h2 id="a748" class="ny mk iq bd ml oe of dn mp og oh dp mt kf oi oj mx kh ok ol nb kj om on nf oo bi translated">结果</h2><figure class="nq nr ns nt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oq"><img src="../Images/74a6bc8be0495a0fa58ba69f85792361.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EkWuvq6-EHqmROEuB8a4Yw.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk translated">特里克斯编辑器</figcaption></figure><figure class="nq nr ns nt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oq"><img src="../Images/105f82e2d89666be324477cdb7524932.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A0WTDVWR6oxrGF04OVU7jw.png"/></div></div></figure><p id="9a6b" class="pw-post-body-paragraph lc ld iq ka b kb kc le lf kd ke lg lh kf li lj lk kh ll lm ln kj lo lp lq kl ij bi translated">如果你像我在例子中所做的那样附加图像，你也需要将<code class="fe nm nn no np b">gem 'image_processing', '~&gt; 1.0'</code>添加到你的Gemfile中。</p></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><h1 id="199c" class="mj mk iq bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">保存内容</h1><figure class="nq nr ns nt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oq"><img src="../Images/03809d484a1e9978157353ca47cee6c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*36bD3aOONkEfYjRS2bkjlw.png"/></div></div></figure></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><p id="f3fd" class="pw-post-body-paragraph lc ld iq ka b kb kc le lf kd ke lg lh kf li lj lk kh ll lm ln kj lo lp lq kl ij bi translated">瞧，现在在你的应用程序中有一个富文本编辑器是非常简单和直接的。试试吧，我们下次再见！</p></div></div>    
</body>
</html>