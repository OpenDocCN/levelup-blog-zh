<html>
<head>
<title>Sending Email with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python发送电子邮件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/sending-email-with-python-c6bdc9a07cb5?source=collection_archive---------9-----------------------#2020-11-02">https://levelup.gitconnected.com/sending-email-with-python-c6bdc9a07cb5?source=collection_archive---------9-----------------------#2020-11-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/7591b223e9923a8320df4002749625f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fC02C5Hfoiu0UL-Wd_Cmyw.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">Solen Feyissa 在<a class="ae kf" href="https://unsplash.com/s/photos/email?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="3e09" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将使用SMTP和IMAP用Python开发一个电子邮件机器人。</p><h1 id="0d76" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">简单邮件传输协议</h1><p id="9978" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">SMTP(简单邮件传输协议)是用于发送和接收电子邮件的TCP/IP协议。但是，由于它在接收端对消息进行排队的能力有限，所以它通常与其他两种协议(POP3(邮局协议)或IMAP(互联网消息访问协议))一起使用，这两种协议允许用户将消息保存在服务器邮箱中，并定期从服务器下载它们。换句话说，用户通常使用SMTP发送电子邮件，POP3或IMAP接收电子邮件的程序。</p><h1 id="3fa5" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">SMTP如何工作？</h1><p id="1394" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">SMTP使用客户机/服务器模型，分为三个步骤。首先，电子邮件服务器使用SMTP将邮件从电子邮件客户端(如Outlook或Gmail)发送到电子邮件服务器。第二，电子邮件服务器使用SMTP作为中继服务将电子邮件发送到接收电子邮件的服务器。第三，接收服务器使用电子邮件客户端通过IMAP下载收到的邮件，并将其放入收件人的收件箱。</p><h1 id="350c" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">代码时间</h1><p id="c4d0" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们将使用python来开发我们的电子邮件机器人，如果您没有，请从官方Python网站下载最新版本并安装。成功安装Python后，安装以下模块。</p><p id="0fe7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mh"> pip安装smtp </em></p><p id="e967" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mh"> pip安装邮件</em></p><figure class="mi mj mk ml gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="a8b7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在编码的第一步，我们在python文件中加载电子邮件和SMTP模块。只需创建您的py文件，复制并粘贴向上的代码。</p><figure class="mi mj mk ml gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="e7b5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们添加想要发送给某人的内容或消息，在代码编辑器的第6行到第8行，我们添加用户详细信息，即我们帐户的电子邮件和密码，以及收件人电子邮件。我们的SMTP模块将使用电子邮件和密码连接到我们的邮件服务，并将相应的邮件发送到收件人邮箱。</p><figure class="mi mj mk ml gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="ec49" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我们在电子邮件中设置了MIME，MIME代表<strong class="ki iu">多用途互联网邮件扩展，</strong> its <strong class="ki iu"> </strong>一种互联网标准，它扩展了电子邮件的格式，以支持ASCII以外的字符集的文本，以及音频、视频、图像和应用程序的附件。</p><figure class="mi mj mk ml gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="5ecc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在最后一个会话中，我们创建了一个用于发送邮件的SMTP会话，正如您在smtplib中看到的那样。SMTP()我们使用端口587的gmail.com，因为在本文中，我们向g mail用户个人发送邮件，您可以添加smtp.yahoo.mail.com或smtp.outlook.com或任何其他电子邮件服务主机名，session.starttls()将启动安全检查，session.login()函数将使用邮件和密码登录到一个受尊敬的电子邮件，我们将该邮件和密码添加为用户详细信息。session.send email函数使用SMTP发送邮件到收件人地址，最后，我们使用session.quite来关闭我们的SMTP会话。</p><h1 id="391e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">带文件附件的电子邮件</h1><p id="ed3c" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们的下一个挑战是发送带有文件附件的电子邮件，它可以是应用程序、zip文件、视频、音频或任何内容，而不是文本。我们将再次使用MIME，因为它将以二进制形式获取我们的文件，并通过SMTP模块将其发送给相应的接收者。</p><figure class="mi mj mk ml gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="66a3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">像往常一样，第一步我们将模块加载到。py文件，但这次我们添加了一些额外函数和模块，来自电子邮件的正确的编码器函数、SSL库和MIME库，我将在本文的后面解释每个函数库使用的功能。</p><figure class="mi mj mk ml gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="e4bd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下一部分，我们将再次添加用户详细信息和收件人电子邮件信息，主题，密件抄送等。如果您不想添加主题或密件抄送，就不要在代码中添加这些行。MIMEText()在这个函数中，我们传递包含消息或内容的主体，如果您不想发送任何文本消息，也可以将其留空。从第14行到第18行，我们正在读取我们需要作为附件发送的文件，使用python内置的open()函数，我们逐字节读取文件内容，并使用函数MIMEBase将其加载到应用程序表单中，encode_base64函数对文件进行编码(字节形式)。我们不能只是读取和发送文件，我们需要把它转换成字节形式，并把它发送到SMTP。</p><figure class="mi mj mk ml gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="0a4e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在最后一部分，我们使用ssl.create_default_context()函数告诉SMTP服务器我们正在将内容作为附件发送。正如你注意到的，我在这段代码中使用了465端口。login()函数将登录到电子邮件站点，sendmail()将把带有附件的邮件发送给收件人。</p><p id="79fe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以我们用Python创建了一个完整的电子邮件机器人，你可以根据需要修改代码。</p><p id="7ae7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">如果您觉得这篇文章有帮助，请点击👏拍手表情符号</strong></p></div></div>    
</body>
</html>