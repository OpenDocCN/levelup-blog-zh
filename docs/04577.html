<html>
<head>
<title>JavaScript Problems — Selecting Elements, Local Storage, and More</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript问题—选择元素、本地存储等等</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-problems-selecting-elements-local-storage-and-more-25d6d0c20f07?source=collection_archive---------7-----------------------#2020-07-03">https://levelup.gitconnected.com/javascript-problems-selecting-elements-local-storage-and-more-25d6d0c20f07?source=collection_archive---------7-----------------------#2020-07-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/80c6ef67938f84d12b565427ab96fabb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JrzbXlly7CiT0Euq"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">弗兰克·麦肯纳在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="b288" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">像任何类型的应用程序一样，当我们编写JavaScript应用程序时，有一些困难的问题需要解决。</p><p id="96a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将研究一些常见JavaScript问题的解决方案。</p><h1 id="b2c1" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">自定义数据属性上的jQuery选择器</h1><p id="248a" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用jQuery选择具有自定义数据属性的元素。</p><p id="e33d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4819" class="mq lf it mm b gy mr ms l mt mu">$("ul[data-group='companies']")</span></pre><p id="b128" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们得到ul元素，它的<code class="fe mv mw mx mm b">data-group</code>属性被设置为<code class="fe mv mw mx mm b">companies</code>。</p><h1 id="7d17" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将js onClick传递值反应给方法</h1><p id="3cd6" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们必须创建一个返回另一个函数的函数。</p><p id="ae06" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="7cf5" class="mq lf it mm b gy mr ms l mt mu">return (<br/>  &lt;div value={column} onClick={() =&gt; this.handleSort(column)}&gt;{column}&lt;/div&gt;<br/>);</span></pre><p id="6d25" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们有一个带参数的方法。</p><p id="72fe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用我们想要的<code class="fe mv mw mx mm b">colunm</code>调用<code class="fe mv mw mx mm b">handleSort</code>方法。</p><h1 id="5000" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">复选框选中状态已更改事件</h1><p id="480d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以附加一个事件处理程序来监听复选框的变化。</p><p id="e5e7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为此，我们可以使用jQuery中的<code class="fe mv mw mx mm b">change</code>方法来实现。</p><p id="69b9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="c9b5" class="mq lf it mm b gy mr ms l mt mu">$(".checkbox").change(function() {<br/>  if (this.checked) {<br/>    //Do stuff<br/>  }<br/>});</span></pre><p id="f91b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到checkbox元素，然后对它调用<code class="fe mv mw mx mm b">change</code>。</p><p id="f596" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们用<code class="fe mv mw mx mm b">this.checked</code>得到值，其中<code class="fe mv mw mx mm b">this</code>是复选框。</p><h1 id="3b89" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">用本地存储存储数组</h1><p id="5b60" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过将数组转换成字符串来用本地存储来存储数组。</p><p id="38f2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为此，我们可以使用<code class="fe mv mw mx mm b">JSON.stringify</code>方法。</p><p id="d993" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="1b43" class="mq lf it mm b gy mr ms l mt mu">localStorage.setItem("names", JSON.stringify(names));</span></pre><p id="d7f4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设<code class="fe mv mw mx mm b">names</code>是一个数组，我们把它串成一个JSON字符串，然后我们用第一个参数中指出的键<code class="fe mv mw mx mm b">'name'</code>存储它。</p><p id="8412" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以通过使用<code class="fe mv mw mx mm b">JSON.parse</code>来获得值:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="410d" class="mq lf it mm b gy mr ms l mt mu">const storedNames = JSON.parse(localStorage.getItem("names"));</span></pre><h1 id="f325" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">呈现后在输入字段上设置焦点</h1><p id="b337" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">在React组件中，我们可以在元素加载后调用DOM方法。</p><p id="5d8a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在类组件中，这应该在<code class="fe mv mw mx mm b">componentDidMount</code>方法中。</p><p id="e45f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="bf8a" class="mq lf it mm b gy mr ms l mt mu">class App extends React.Component{<br/>  componentDidMount(){<br/>    this.nameInput.focus();<br/>  }<br/>  ...<br/>}</span></pre><p id="fd6b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">其中<code class="fe mv mw mx mm b">nameInput</code>是输入元素的ref。</p><p id="d4a3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在一个函数组件中，我们可以通过编写来使用<code class="fe mv mw mx mm b">useEffect</code>钩子:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4c3d" class="mq lf it mm b gy mr ms l mt mu">useEffect(() =&gt; {<br/>  nameInputRef.current.focus();<br/>}, [])</span></pre><p id="b93d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">nameInputRef</code>是输入ref。</p><p id="a089" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">current</code>是带有DOM元素的属性。</p><p id="cdd9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们就可以在上面调用<code class="fe mv mw mx mm b">focus</code>了。</p><h1 id="e5ce" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">在HTML文件中包含另一个HTML文件</h1><p id="5730" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们用jQuery <code class="fe mv mw mx mm b">load</code>方法将另一个HTML文件包含在一个HTML文件中。</p><p id="5708" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="ce99" class="mq lf it mm b gy mr ms l mt mu">$("#includedContent").load("page.html");</span></pre><p id="3bfb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将把<code class="fe mv mw mx mm b">page.html</code>的内容加载到ID为<code class="fe mv mw mx mm b">includedContent</code>的元素中。</p><h1 id="43da" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">document . getelementbyid vs jQuery $()</h1><p id="1e9b" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mv mw mx mm b">getElementById</code>不同于jQuery的<code class="fe mv mw mx mm b">$</code>函数。</p><p id="40be" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">$</code>可以接受任何选择器字符串，如果找到给定的选择器，就返回它的一个或多个元素。</p><p id="0e69" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">getElementById</code>只能返回给定ID的元素。</p><h1 id="308b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">编写一个返回对象的ES6箭头函数</h1><p id="4107" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">要编写一个返回对象的arrow函数，我们可以用括号将对象括起来。</p><p id="ade5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="8679" class="mq lf it mm b gy mr ms l mt mu">p =&gt; ({ foo: 'bar' });</span></pre><p id="65b1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们想返回其他值，那么括号是可选的。</p><h1 id="3510" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">从HTML字符串创建一个DOM元素</h1><p id="52b7" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mv mw mx mm b">document.createElement</code>来创建元素。</p><p id="5c2a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以将HTML字符串设置为新元素的<code class="fe mv mw mx mm b">innerHTML</code>属性的值。</p><p id="c121" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="065a" class="mq lf it mm b gy mr ms l mt mu">const div = document.createElement('div');<br/>div.innerHTML = htmlString.trim();</span></pre><p id="70e3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">其中<code class="fe mv mw mx mm b">htmlString</code>是HTML字符串。</p><p id="8c5b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们创建了一个div并将HTML字符串的内容放入其中。</p><h1 id="b35a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">从父页面运行iframe中的JavaScript代码</h1><p id="26f7" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mv mw mx mm b">contentWindow</code>属性来访问iframe的内容。</p><p id="cfb8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以在其中调用一个函数:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="44d3" class="mq lf it mm b gy mr ms l mt mu">document.getElementById('frame').contentWindow.foo();</span></pre><p id="690e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们用它在iframe中调用了<code class="fe mv mw mx mm b">foo</code>，假设iframe的ID是<code class="fe mv mw mx mm b">frame</code>。</p><h1 id="7dee" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">窗口调整事件</h1><p id="22fa" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">为了在窗口调整大小时运行代码，我们可以将一个事件监听器函数附加到<code class="fe mv mw mx mm b">window.onresie</code>属性。</p><p id="aa08" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="c428" class="mq lf it mm b gy mr ms l mt mu">window.onresize = (event) =&gt; {<br/>  //...<br/>};</span></pre><h1 id="a803" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">从JavaScript对象中移除对象</h1><p id="4a94" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mv mw mx mm b">delete</code>操作符让我们从一个对象中删除一个属性。</p><p id="8f67" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="b06a" class="mq lf it mm b gy mr ms l mt mu">const o = { bar: 'foo' }<br/>delete o.bar;</span></pre><p id="5dea" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们从<code class="fe mv mw mx mm b">o</code>中移除了<code class="fe mv mw mx mm b">bar</code>属性。</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/86570e8d1b66a13d32a455de1d1fd82e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lgeV_eOS54o3nXGY"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@steve_j?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">斯蒂夫·约翰森</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="6777" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="a54c" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过将事件处理程序附加到<code class="fe mv mw mx mm b">onresize</code>属性来观察resize事件。</p><p id="1a67" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们想运行带参数的函数，我们可以将函数传递给调用函数的<code class="fe mv mw mx mm b">onClick</code>。</p><p id="8514" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有多种方法可以从DOM中获取元素。</p></div></div>    
</body>
</html>