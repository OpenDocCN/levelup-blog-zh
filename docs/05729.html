<html>
<head>
<title>Getting started with Ansible: local automation of Windows 10 and Ubuntu 20.04 workstations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ansible入门:Windows 10和Ubuntu 20.04工作站的本地自动化</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/getting-started-with-ansible-local-automation-of-windows-10-and-ubuntu-20-04-workstations-ffd03d7dc923?source=collection_archive---------4-----------------------#2020-09-26">https://levelup.gitconnected.com/getting-started-with-ansible-local-automation-of-windows-10-and-ubuntu-20-04-workstations-ffd03d7dc923?source=collection_archive---------4-----------------------#2020-09-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8d602a88bd4c687a7355a7d7d8862303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gu6CpRHD9k3FXeYU"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@ffstop?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">摄影师</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="f8f8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你不需要成为一个经验丰富的DevOps专业人员，就可以在你的个人工作空间中受益于<a class="ae kc" href="https://www.ansible.com/" rel="noopener ugc nofollow" target="_blank"> Ansible </a>和相关的自动化工具。我将展示一个我用来自动化我的个人Windows 10和Ubuntu 20.04工作站配置的示例设置(类似的方法也适用于MacOS)。</p><p id="df9b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这种设置的主要目标是自动化软件安装、更新和配置，以快速让我的开发环境在Ubuntu和Windows上运行，这样在出现稳定性问题或切换到新机器时，可以毫不费力地重新创建系统，用不到一个小时的时间设置每个操作系统，为工作做好准备。将会派上用场的关键工具(除Ansible之外)将会是<a class="ae kc" href="https://snapcraft.io/" rel="noopener ugc nofollow" target="_blank"> Snap </a>(针对Linux软件包)、<a class="ae kc" href="https://github.com/lra/mackup" rel="noopener ugc nofollow" target="_blank"> Mackup </a>(针对Linux点文件/配置备份)和<a class="ae kc" href="https://chocolatey.org/" rel="noopener ugc nofollow" target="_blank"> Chocolatey </a>(针对Windows软件包)。</p><p id="6e78" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我将在这两个系统上安装VSCode、git、Node.js (nvm)、Docker、Chromium、Slack和Dropbox。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="2633" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">配置Windows 10</h1><p id="5644" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">首先，我在cmd中运行以下脚本来为Ansible设置WinRM:<br/><code class="fe ml mm mn mo b">powershell.exe -ExecutionPolicy ByPass -File "windows-host-setup.ps1"</code></p><figure class="mp mq mr ms gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="6bfb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，为了在Windows上执行我的Ansible playbook，我需要一个正在运行的<a class="ae kc" href="https://docs.ansible.com/ansible/latest/network/getting_started/basic_concepts.html#control-node" rel="noopener ugc nofollow" target="_blank"> Ansible control node </a>，这需要一个Linux环境，而让它在同一台机器上运行的最简单的方法是Windows Subsystem for Linux (WSL)。</p><h2 id="ab29" class="mv lj iq bd lk mw mx dn lo my mz dp ls ko na nb lw ks nc nd ma kw ne nf me ng bi translated">用于Linux的Windows子系统</h2><ol class=""><li id="160b" class="nh ni iq kf b kg mg kk mh ko nj ks nk kw nl la nm nn no np bi translated">Windows搜索<code class="fe ml mm mn mo b">Turn Windows features on or off</code>，检查<code class="fe ml mm mn mo b">Windows Subsystem for Linux</code>，安装，重启；</li><li id="3245" class="nh ni iq kf b kg nq kk nr ko ns ks nt kw nu la nm nn no np bi translated">从Windows Store安装并启动Ubuntu 20.04</li><li id="3220" class="nh ni iq kf b kg nq kk nr ko ns ks nt kw nu la nm nn no np bi translated">创建带密码的用户；</li><li id="d919" class="nh ni iq kf b kg nq kk nr ko ns ks nt kw nu la nm nn no np bi translated">安装Ansible: <code class="fe ml mm mn mo b">sudo apt update &amp;&amp; sudo apt install -y ansible</code></li><li id="7aca" class="nh ni iq kf b kg nq kk nr ko ns ks nt kw nu la nm nn no np bi translated">运行Windows剧本:<code class="fe ml mm mn mo b">ansible-playbook windows-playbook.yml -i windows-inventory.yml --ask-pass --verbose</code></li></ol><figure class="mp mq mr ms gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="mp mq mr ms gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="568b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如上所述，我使用Chocolatey安装软件包，然后自动更新。最后，我安装<a class="ae kc" href="https://marketplace.visualstudio.com/items?itemName=Shan.code-settings-sync" rel="noopener ugc nofollow" target="_blank"> VSCode设置同步</a>来恢复我的VSCode设置。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="65df" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">配置Ubuntu 20.04</h1><p id="5de7" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">如果可以的话，我更喜欢snap包(它可以自动更新并优雅地回滚)而不是apt包。以下是Ubuntu 20.04上的作品:</p><ol class=""><li id="c224" class="nh ni iq kf b kg kh kk kl ko nv ks nw kw nx la nm nn no np bi translated">安装Ansible: <code class="fe ml mm mn mo b">sudo apt update &amp;&amp; sudo apt install -y ansible</code></li><li id="4972" class="nh ni iq kf b kg nq kk nr ko ns ks nt kw nu la nm nn no np bi translated">运行Ubuntu playbook: <code class="fe ml mm mn mo b">ansible-playbook ubuntu-playbook.yml -i ubuntu-inventory.yml --ask-become-pass --verbose</code></li></ol><figure class="mp mq mr ms gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="mp mq mr ms gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="2030" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我运行Dropbox，等待它同步，运行<code class="fe ml mm mn mo b">mackup restore</code>，用<code class="fe ml mm mn mo b">mackup backup</code>恢复之前备份到Dropbox的配置文件。最后，像以前一样安装并运行VSCode Settings Sync。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="3f26" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">就是这样！</h1><p id="527a" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">一些手动步骤将一直保留，但总的来说，这种方法一旦成为工具带的一部分，将节省大量时间。系统配置的更多部分可以自动化，参见<a class="ae kc" href="https://docs.ansible.com/ansible/latest/collections/index.html" rel="noopener ugc nofollow" target="_blank">可转换模块集合列表</a>获取灵感，并随意派生和扩展我的示例gist供您自己使用！:)</p></div></div>    
</body>
</html>