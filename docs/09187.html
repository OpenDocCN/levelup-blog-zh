<html>
<head>
<title>Implementing swipe-to-dismiss in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Flutter中实现滑动消除</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/implementing-swipe-to-dismiss-in-flutter-b6438cddadcc?source=collection_archive---------14-----------------------#2021-07-14">https://levelup.gitconnected.com/implementing-swipe-to-dismiss-in-flutter-b6438cddadcc?source=collection_archive---------14-----------------------#2021-07-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9434" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">自定义可忽略的小部件</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b739f46e3f74c45ac486e7babbf0ae9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FDQmV5WufkuzhnZAspOQ6A.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><blockquote class="lc ld le"><p id="3a4b" class="lf lg lh li b lj lk jr ll lm ln ju lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">当我们处理web和移动应用程序时，我们体验到删除项目需要滑动，或者必须使用单独的功能，可以通过使用滑动动作来完成。</p></blockquote><p id="4ebc" class="pw-post-body-paragraph lf lg iq li b lj lk jr ll lm ln ju lo mc lq lr ls md lu lv lw me ly lz ma mb ij bi translated">本文将向您展示如何在Flutter中使用<strong class="li ir"> <em class="lh">可忽略的小部件</em> </strong>来实现它。可忽略的小部件构造函数如下:</p><pre class="kg kh ki kj gt mf mg mh mi aw mj bi"><span id="2a22" class="mk ml iq mg b gy mm mn l mo mp">const <strong class="mg ir">Dismissible</strong>({</span><span id="7617" class="mk ml iq mg b gy mq mn l mo mp">@required Key <strong class="mg ir">key</strong>,</span><span id="45f1" class="mk ml iq mg b gy mq mn l mo mp">@required <strong class="mg ir">this.child</strong>,</span><span id="ab6b" class="mk ml iq mg b gy mq mn l mo mp"><strong class="mg ir">this.background</strong>,</span><span id="9a57" class="mk ml iq mg b gy mq mn l mo mp"><strong class="mg ir">this.secondaryBackground</strong>,</span><span id="2971" class="mk ml iq mg b gy mq mn l mo mp"><strong class="mg ir">this.confirmDismiss</strong>,</span><span id="2ede" class="mk ml iq mg b gy mq mn l mo mp"><strong class="mg ir">this.onResize</strong>,</span><span id="9213" class="mk ml iq mg b gy mq mn l mo mp"><strong class="mg ir">this.onDismissed</strong>,</span><span id="62bd" class="mk ml iq mg b gy mq mn l mo mp"><strong class="mg ir">this.direction</strong> = DismissDirection.horizontal,</span><span id="68a9" class="mk ml iq mg b gy mq mn l mo mp"><strong class="mg ir">this.resizeDuration</strong> = const Duration(milliseconds: 300),</span><span id="7455" class="mk ml iq mg b gy mq mn l mo mp"><strong class="mg ir">this.dismissThresholds</strong> = const &lt;DismissDirection, double&gt;{},</span><span id="8f81" class="mk ml iq mg b gy mq mn l mo mp"><strong class="mg ir">this.movementDuration</strong> = const Duration(milliseconds: 200),</span><span id="0c47" class="mk ml iq mg b gy mq mn l mo mp"><strong class="mg ir">this.crossAxisEndOffset</strong> = 0.0,</span><span id="fd7a" class="mk ml iq mg b gy mq mn l mo mp"><strong class="mg ir">this.dragStartBehavior</strong> = DragStartBehavior.start,</span><span id="7760" class="mk ml iq mg b gy mq mn l mo mp">})</span></pre><p id="bb35" class="pw-post-body-paragraph lf lg iq li b lj lk jr ll lm ln ju lo mc lq lr ls md lu lv lw me ly lz ma mb ij bi translated"><strong class="li ir">键</strong> (Key)和<strong class="li ir">子</strong> (Widget)是构造函数的必填字段。这个键变成了一个重要的角色，因为这个小部件可以从小部件列表中删除。孩子是一个主要角色，因为它显示了我们需要在哪里传递可以被解除的小部件。</p><p id="c570" class="pw-post-body-paragraph lf lg iq li b lj lk jr ll lm ln ju lo mc lq lr ls md lu lv lw me ly lz ma mb ij bi translated"><a class="ae mr" href="https://api.flutter.dev/flutter/widgets/Dismissible-class.html" rel="noopener ugc nofollow" target="_blank"><em class="lh"/></a><em class="lh">可以通过此链接收集更多关于房产描述的信息。</em></p></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><p id="fce9" class="pw-post-body-paragraph lf lg iq li b lj lk jr ll lm ln ju lo mc lq lr ls md lu lv lw me ly lz ma mb ij bi translated">在简单了解了实现的背景之后，让我们开始吧！😃</p><h2 id="5034" class="mk ml iq bd ms mt mu dn mv mw mx dp my mc mz na nb md nc nd ne me nf ng nh ni bi translated">1.使用现有项目中的元素创建一个列表<string/></h2><pre class="kg kh ki kj gt mf mg mh mi aw mj bi"><span id="dc9b" class="mk ml iq mg b gy mm mn l mo mp">List&lt;String&gt; _values = ['One', 'Two', 'Three', 'Four'];</span></pre><h2 id="9a2c" class="mk ml iq bd ms mt mu dn mv mw mx dp my mc mz na nb md nc nd ne me nf ng nh ni bi translated">2.用itemCount和itemBuilder构建一个ListView。</h2><p id="a1cb" class="pw-post-body-paragraph lf lg iq li b lj nj jr ll lm nk ju lo mc nl lr ls md nm lv lw me nn lz ma mb ij bi translated">然后通过ithemBuilder返回“可驳回的构造函数”。它需要有前面提到的键和子属性以及下面的示例代码。</p><pre class="kg kh ki kj gt mf mg mh mi aw mj bi"><span id="2fb7" class="mk ml iq mg b gy mm mn l mo mp">ListView.builder(</span><span id="3138" class="mk ml iq mg b gy mq mn l mo mp">itemCount: listItems.length,</span><span id="d210" class="mk ml iq mg b gy mq mn l mo mp">itemBuilder: (context, index) {</span><span id="7ddc" class="mk ml iq mg b gy mq mn l mo mp">return Dismissible(</span><span id="e9ed" class="mk ml iq mg b gy mq mn l mo mp">key: ObjectKey(listItems[index]),</span><span id="2cf8" class="mk ml iq mg b gy mq mn l mo mp">child: Container(</span><span id="c5b4" class="mk ml iq mg b gy mq mn l mo mp">padding: EdgeInsets.all(20.0),</span><span id="9357" class="mk ml iq mg b gy mq mn l mo mp">child: Text(listItems[index]),</span><span id="70e5" class="mk ml iq mg b gy mq mn l mo mp">),);</span><span id="96b6" class="mk ml iq mg b gy mq mn l mo mp">},)</span></pre><p id="b5c7" class="pw-post-body-paragraph lf lg iq li b lj lk jr ll lm ln ju lo mc lq lr ls md lu lv lw me ly lz ma mb ij bi translated"><strong class="li ir"> <em class="lh">这是使用Flutter实现刷卡功能的主要代码。</em> </strong></p><blockquote class="no"><p id="5d16" class="np nq iq bd nr ns nt nu nv nw nx mb dk translated">现在让我们看看如何处理“可忽略”构造函数的其他属性。</p></blockquote><ul class=""><li id="d280" class="ny nz iq li b lj oa lm ob mc oc md od me oe mb of og oh oi bi translated"><strong class="li ir"> <em class="lh">设定背景</em> </strong></li></ul><p id="0a65" class="pw-post-body-paragraph lf lg iq li b lj lk jr ll lm ln ju lo mc lq lr ls md lu lv lw me ly lz ma mb ij bi translated">在“可忽略的”构造函数中，有两个主要的交换方向可以使用，它们被定义为<strong class="li ir"> <em class="lh">背景</em> </strong>和<strong class="li ir"> <em class="lh">次要背景</em> </strong>。背景是默认的，其消除方向被定义为“<em class="lh">开始到结束</em>”，这样从左向右滑动。次级背景消除方向被定义为“<em class="lh">结束到开始</em>”，从而从左向右滑动。如果我们不设置任何一个，它会自动将背景方向设为“开始到结束”。因此，我们可以使用background和secondaryBackground来定制它的属性，如颜色、子元素、填充等。名为onDismissed的属性用于检测我们滑动的方向。之后，我们可以根据该方向执行任何操作，如删除或添加到收藏夹。</p><pre class="kg kh ki kj gt mf mg mh mi aw mj bi"><span id="ca6a" class="mk ml iq mg b gy mm mn l mo mp"><strong class="mg ir"><em class="lh">background</em></strong>: Container(</span><span id="f6c5" class="mk ml iq mg b gy mq mn l mo mp">color: Colors.blue,</span><span id="3ba3" class="mk ml iq mg b gy mq mn l mo mp">child: Padding(</span><span id="b7ff" class="mk ml iq mg b gy mq mn l mo mp">padding: const EdgeInsets.all(15),</span><span id="7d34" class="mk ml iq mg b gy mq mn l mo mp">child: Row(</span><span id="d056" class="mk ml iq mg b gy mq mn l mo mp">children: [</span><span id="85fc" class="mk ml iq mg b gy mq mn l mo mp">Icon(Icons.favorite, color: Colors.white),</span><span id="294c" class="mk ml iq mg b gy mq mn l mo mp">Text('Move to favorites', style: TextStyle(color: Colors.white)),</span><span id="d93d" class="mk ml iq mg b gy mq mn l mo mp">],),),<br/>);</span><span id="7ed0" class="mk ml iq mg b gy mq mn l mo mp"><strong class="mg ir"><em class="lh">secondaryBackground</em></strong>: Container(</span><span id="e40a" class="mk ml iq mg b gy mq mn l mo mp">color: Colors.red,</span><span id="3a28" class="mk ml iq mg b gy mq mn l mo mp">child: Padding(</span><span id="48a3" class="mk ml iq mg b gy mq mn l mo mp">padding: const EdgeInsets.all(15),</span><span id="e54f" class="mk ml iq mg b gy mq mn l mo mp">child: Row(</span><span id="8d9c" class="mk ml iq mg b gy mq mn l mo mp">mainAxisAlignment: MainAxisAlignment.end,</span><span id="df77" class="mk ml iq mg b gy mq mn l mo mp">children: [</span><span id="4a3e" class="mk ml iq mg b gy mq mn l mo mp">Icon(Icons.delete, color: Colors.white),</span><span id="a967" class="mk ml iq mg b gy mq mn l mo mp">Text('Move to trash', style: TextStyle(color: Colors.white)),</span><span id="565d" class="mk ml iq mg b gy mq mn l mo mp">],),),</span><span id="8b19" class="mk ml iq mg b gy mq mn l mo mp">);</span></pre><ul class=""><li id="7472" class="ny nz iq li b lj lk lm ln mc oj md ok me ol mb of og oh oi bi translated"><strong class="li ir"> <em class="lh">显示确认</em> </strong></li></ul><p id="71d7" class="pw-post-body-paragraph lf lg iq li b lj lk jr ll lm ln ju lo mc lq lr ls md lu lv lw me ly lz ma mb ij bi translated">在可驳回的构造函数下，有一个名为<strong class="li ir"><em class="lh">confirm discover</em></strong>的属性，可以用来对用户基于滑动方向执行动作进行最终确认。基于滑动方向，我们可以定制我们需要显示的提示。</p><pre class="kg kh ki kj gt mf mg mh mi aw mj bi"><span id="eb1d" class="mk ml iq mg b gy mm mn l mo mp"><strong class="mg ir"><em class="lh">confirmDismiss</em></strong>: (DismissDirection direction) async {</span><span id="bbaf" class="mk ml iq mg b gy mq mn l mo mp">return await showDialog(</span><span id="4fc3" class="mk ml iq mg b gy mq mn l mo mp">context: context,</span><span id="746a" class="mk ml iq mg b gy mq mn l mo mp">builder: (BuildContext context) {</span><span id="43ed" class="mk ml iq mg b gy mq mn l mo mp">return AlertDialog(</span><span id="d3c0" class="mk ml iq mg b gy mq mn l mo mp">title: const Text("Confirm"),</span><span id="b3ec" class="mk ml iq mg b gy mq mn l mo mp">content: direction == DismissDirection.startToEnd?</span><span id="5a3c" class="mk ml iq mg b gy mq mn l mo mp">Text(</span><span id="42c1" class="mk ml iq mg b gy mq mn l mo mp">"Are you sure you wish add to favorite this item?") :Text(</span><span id="0754" class="mk ml iq mg b gy mq mn l mo mp">"Are you sure you wish to delete this item?"),</span><span id="f3cc" class="mk ml iq mg b gy mq mn l mo mp">actions: &lt;Widget&gt;[</span><span id="c7a6" class="mk ml iq mg b gy mq mn l mo mp">FlatButton(</span><span id="cea3" class="mk ml iq mg b gy mq mn l mo mp">onPressed: () =&gt;</span><span id="de26" class="mk ml iq mg b gy mq mn l mo mp">Navigator.of(context).pop(true),</span><span id="1f8a" class="mk ml iq mg b gy mq mn l mo mp">child: direction == DismissDirection.startToEnd?</span><span id="4f30" class="mk ml iq mg b gy mq mn l mo mp">Text(</span><span id="6322" class="mk ml iq mg b gy mq mn l mo mp">"FAVORITE") :Text(</span><span id="ba2d" class="mk ml iq mg b gy mq mn l mo mp">"DELETE"),),</span><span id="c62a" class="mk ml iq mg b gy mq mn l mo mp">FlatButton(</span><span id="4d6b" class="mk ml iq mg b gy mq mn l mo mp">onPressed: () =&gt; Navigator.of(context).pop(false),</span><span id="1452" class="mk ml iq mg b gy mq mn l mo mp">child: const Text("CANCEL"),</span><span id="3b2f" class="mk ml iq mg b gy mq mn l mo mp">),],);</span><span id="b149" class="mk ml iq mg b gy mq mn l mo mp">},);</span><span id="9b93" class="mk ml iq mg b gy mq mn l mo mp">}</span></pre><p id="e549" class="pw-post-body-paragraph lf lg iq li b lj lk jr ll lm ln ju lo mc lq lr ls md lu lv lw me ly lz ma mb ij bi translated">上述活动的完整代码如下。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="7415" class="pw-post-body-paragraph lf lg iq li b lj lk jr ll lm ln ju lo mc lq lr ls md lu lv lw me ly lz ma mb ij bi translated">酷！！！😃</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/1adab9607df1d70b5f30776d9ec95d7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:508/1*3QhCGP4vnlAUO21yX7Njzg.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者gif</figcaption></figure></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><p id="674c" class="pw-post-body-paragraph lf lg iq li b lj lk jr ll lm ln ju lo mc lq lr ls md lu lv lw me ly lz ma mb ij bi translated">现在我们对水平方向的刷卡功能实现有了清晰的思路。此外，我们还可以在垂直方向刷卡实现。完整代码实现到<strong class="li ir">垂直划动</strong>如下图。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="e7f0" class="pw-post-body-paragraph lf lg iq li b lj lk jr ll lm ln ju lo mc lq lr ls md lu lv lw me ly lz ma mb ij bi translated">如果你需要给<strong class="li ir"> <em class="lh">添加一个函数，在从<em class="lh">on missed</em>属性检测到方向后，通过添加一个S <em class="lh"> nackBar </em>来撤销你所做的</em> </strong>修改。这可以如下实现。</p><p id="ef26" class="pw-post-body-paragraph lf lg iq li b lj lk jr ll lm ln ju lo mc lq lr ls md lu lv lw me ly lz ma mb ij bi translated">这里的方向参数提供了我们滑动的方向。</p><pre class="kg kh ki kj gt mf mg mh mi aw mj bi"><span id="1e12" class="mk ml iq mg b gy mm mn l mo mp">onDismissed: (direction) {</span><span id="b788" class="mk ml iq mg b gy mq mn l mo mp">var item = listItems.elementAt(index);</span><span id="26d1" class="mk ml iq mg b gy mq mn l mo mp">Scaffold.of(context).showSnackBar(SnackBar(</span><span id="871a" class="mk ml iq mg b gy mq mn l mo mp">content: Text("Item deleted"),</span><span id="f960" class="mk ml iq mg b gy mq mn l mo mp">action: SnackBarAction(</span><span id="32e0" class="mk ml iq mg b gy mq mn l mo mp">label: "UNDO",</span><span id="f947" class="mk ml iq mg b gy mq mn l mo mp">onPressed: () {</span><span id="1ef7" class="mk ml iq mg b gy mq mn l mo mp">undoDeletion(index, item); //undo deletion</span><span id="d202" class="mk ml iq mg b gy mq mn l mo mp">})));</span><span id="3c4d" class="mk ml iq mg b gy mq mn l mo mp">}</span></pre><blockquote class="lc ld le"><p id="973c" class="lf lg lh li b lj lk jr ll lm ln ju lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">这里我只使用了可忽略小部件中的几个属性。但是您可以使用其他属性并做进一步的实现。</p></blockquote><p id="cb88" class="pw-post-body-paragraph lf lg iq li b lj lk jr ll lm ln ju lo mc lq lr ls md lu lv lw me ly lz ma mb ij bi translated"><a class="ae mr" href="https://github.com/sajee1dw/swipe_implementing" rel="noopener ugc nofollow" target="_blank"> G <em class="lh"> itHub仓库完整代码… </em> </a></p><p id="2ec4" class="pw-post-body-paragraph lf lg iq li b lj lk jr ll lm ln ju lo mc lq lr ls md lu lv lw me ly lz ma mb ij bi translated">如果你对这篇文章有任何问题，或者对如何更好地实现有任何建议，请发表评论。如果你从中获得了任何有用的信息，别忘了鼓掌。</p><p id="59a4" class="pw-post-body-paragraph lf lg iq li b lj lk jr ll lm ln ju lo mc lq lr ls md lu lv lw me ly lz ma mb ij bi translated">感谢您的阅读！！！😜👍</p></div></div>    
</body>
</html>