<html>
<head>
<title>Animating A Material Design Swipe Gesture in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Android中制作材质设计滑动手势的动画</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/animating-a-material-design-swipe-gesture-in-android-81db04bf569?source=collection_archive---------8-----------------------#2022-06-22">https://levelup.gitconnected.com/animating-a-material-design-swipe-gesture-in-android-81db04bf569?source=collection_archive---------8-----------------------#2022-06-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/5426fd496a8d91f82791651a4a1eff63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q3WSkhwKb-W_AEQd9ZNQaA.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">不同状态下的动画</figcaption></figure><blockquote class="kf kg kh"><p id="7b9e" class="ki kj kk kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">今天我将分享我是如何在Android中实现滑动来移除列表项目上的动画的。</p></blockquote><p id="360b" class="pw-post-body-paragraph ki kj it kl b km kn ko kp kq kr ks kt lh kv kw kx li kz la lb lj ld le lf lg im bi translated">作为一名应用程序开发人员，在专注于动画和美学之前，我一直倾向于优先考虑拥有一个工作稳定的应用程序。但是最近我了解到，这两者同等重要，应该有或多或少的优先权。我从splash动画开始，现在我正在制作单个UI组件的动画。</p><div class="lk ll gp gr lm ln"><a href="https://medium.com/@molidev8/implementing-a-splash-animation-with-the-core-splashscreen-api-on-android-ec3fe00d105a" rel="noopener follow" target="_blank"><div class="lo ab fo"><div class="lp ab lq cl cj lr"><h2 class="bd iu gy z fp ls fr fs lt fu fw is bi translated">在Android上用核心闪屏API实现闪屏动画</h2><div class="lu l"><h3 class="bd b gy z fp ls fr fs lt fu fw dk translated">在这篇文章中，你将学习如何用Google为……提出的原生解决方案实现一个飞溅动画</h3></div><div class="lv l"><p class="bd b dl z fp ls fr fs lt fu fw dk translated">medium.com</p></div></div><div class="lw l"><div class="lx l ly lz ma lw mb jz ln"/></div></div></a></div><p id="1040" class="pw-post-body-paragraph ki kj it kl b km kn ko kp kq kr ks kt lh kv kw kx li kz la lb lj ld le lf lg im bi translated">UI设计中通常被搁置的一个方面是动画。这实际上是非常可悲的，因为任何适时实现的动画都会给一个应用带来专业的外观，并使其与众不同。这就是为什么今天我要分享我如何实现一个动画来删除RecyclerView中的一个元素，就像你在文章开头看到的那样。</p><h1 id="c74e" class="mc md it bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">让我们从一些理论开始</h1><p id="5121" class="pw-post-body-paragraph ki kj it kl b km na ko kp kq nb ks kt lh nc kw kx li nd la lb lj ne le lf lg im bi translated">第一步是理解动画是如何工作的。当一个RecyclerView项目被滑动时，框架显示一个视图，该视图具有水平平移，另一个视图是静态的。在本教程中，我们将它们称为父视图(移动的视图)和子视图(静态的视图)，如下面的截图所示。</p><figure class="ng nh ni nj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nf"><img src="../Images/e58822f74af33821869ca55f39875e42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Gf9YcO3rLzBFsQ8K8EyyA.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">RecyclerView项目中的子视图和父视图</figcaption></figure><blockquote class="nk"><p id="5eab" class="nl nm it bd nn no np nq nr ns nt lg dk translated">请记住，在Android中,( 0，0) <a class="ae nu" href="https://stackoverflow.com/questions/11483345/how-do-android-screen-coordinates-work" rel="noopener ugc nofollow" target="_blank">坐标</a>在屏幕的左上角。这对以后理解代码很重要。</p></blockquote><p id="7365" class="pw-post-body-paragraph ki kj it kl b km nv ko kp kq nw ks kt lh nx kw kx li ny la lb lj nz le lf lg im bi translated">我们将使用下一个算法，在每次检测到在我们的项目上滑动时触发动画:</p><ol class=""><li id="fb50" class="oa ob it kl b km kn kq kr lh oc li od lj oe lg of og oh oi bi translated">获得父视图坐标，以便也可以计算子视图坐标。</li><li id="a6d2" class="oa ob it kl b km oj kq ok lh ol li om lj on lg of og oh oi bi translated">当滑动被认为有效时，坐标被保存。</li><li id="c63d" class="oa ob it kl b km oj kq ok lh ol li om lj on lg of og oh oi bi translated">基于这个项目在X轴上移动了多少，我们定义了图标的大小，它的颜色和在整个动画中将要调整大小的圆的半径。</li><li id="a7c0" class="oa ob it kl b km oj kq ok lh ol li om lj on lg of og oh oi bi translated">计算图标的中心，这也是圆的中心，并且定义图标将要显示的空间。</li><li id="eef9" class="oa ob it kl b km oj kq ok lh ol li om lj on lg of og oh oi bi translated">图标和圆是使用之前完成的计算在子视图中绘制的。</li></ol><h1 id="1454" class="mc md it bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">现在用一些代码</h1><p id="3773" class="pw-post-body-paragraph ki kj it kl b km na ko kp kq nb ks kt lh nc kw kx li nd la lb lj ne le lf lg im bi translated">为了开发这个动画，我们需要覆盖<a class="ae nu" href="https://developer.android.com/reference/androidx/recyclerview/widget/ItemTouchHelper.SimpleCallback" rel="noopener ugc nofollow" target="_blank"> SimpleCallback </a>类，特别要注意<em class="kk"> onChildDraw </em>方法<em class="kk">，</em>，它将在每次屏幕更新时被调用，这意味着在60 Hz刷新率的显示器中，该函数每16毫秒被调用一次。该方法将包含之前解释的所有逻辑。</p><p id="0a26" class="pw-post-body-paragraph ki kj it kl b km kn ko kp kq kr ks kt lh kv kw kx li kz la lb lj ld le lf lg im bi translated">我们将使用的另一个方法是o <em class="kk"> nSwiped，</em>这是我们定义的一个动作，当在特定方向上滑动时触发(例如，删除应用数据库中的一行)。在这种情况下，滑动将在X轴的正方向，所以我们需要检查方向是否是<code class="fe oo op oq or b">ItemTouchHelper.RIGHT</code>。</p><p id="755a" class="pw-post-body-paragraph ki kj it kl b km kn ko kp kq kr ks kt lh kv kw kx li kz la lb lj ld le lf lg im bi translated">在这里，您可以看到实现了之前解释的算法，并添加了一些注释来进一步阐明正在发生的事情:</p><figure class="ng nh ni nj gt ju"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="c104" class="pw-post-body-paragraph ki kj it kl b km kn ko kp kq kr ks kt lh kv kw kx li kz la lb lj ld le lf lg im bi translated">最后一步是将回调添加到RecyclerView。</p><figure class="ng nh ni nj gt ju"><div class="bz fp l di"><div class="os ot l"/></div></figure><h1 id="e3ae" class="mc md it bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">就这样</h1><p id="559a" class="pw-post-body-paragraph ki kj it kl b km na ko kp kq nb ks kt lh nc kw kx li nd la lb lj ne le lf lg im bi translated">动画实际上很难做，需要花很多时间去学习，但是结果是值得的。我希望你明白这个动画是如何工作的，如果你需要检查更多的代码，我把GitHub库留在了文章的底部。</p></div><div class="ab cl ou ov hx ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="im in io ip iq"><p id="1ce9" class="pw-post-body-paragraph ki kj it kl b km kn ko kp kq kr ks kt lh kv kw kx li kz la lb lj ld le lf lg im bi translated">如果你想了解更多关于Android开发的知识并支持我，别忘了查看我的个人资料，或者给Medium一个成为会员的机会来访问你想要的所有故事。这只是5美元一个月，如果你使用这个链接，我会得到一小笔佣金。</p></div><div class="ab cl ou ov hx ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="im in io ip iq"><div class="ng nh ni nj gt ln"><a href="https://github.com/molidev8/Recipe-Vault" rel="noopener  ugc nofollow" target="_blank"><div class="lo ab fo"><div class="lp ab lq cl cj lr"><h2 class="bd iu gy z fp ls fr fs lt fu fw is bi translated">GitHub - molidev8/Recipe-Vault:一个存储、共享和备份食谱的Android应用程序</h2><div class="lu l"><h3 class="bd b gy z fp ls fr fs lt fu fw dk translated">安卓系统在TFM的应用和服务开发中的应用…</h3></div><div class="lv l"><p class="bd b dl z fp ls fr fs lt fu fw dk translated">github.com</p></div></div><div class="lw l"><div class="pb l ly lz ma lw mb jz ln"/></div></div></a></div></div><div class="ab cl ou ov hx ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="im in io ip iq"><h1 id="875d" class="mc md it bd me mf pc mh mi mj pd ml mm mn pe mp mq mr pf mt mu mv pg mx my mz bi translated">分级编码</h1><p id="96e4" class="pw-post-body-paragraph ki kj it kl b km na ko kp kq nb ks kt lh nc kw kx li nd la lb lj ne le lf lg im bi translated">感谢您成为我们社区的一员！更多内容见<a class="ae nu" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>。<br/>跟随:<a class="ae nu" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a>，<a class="ae nu" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">领英</a>，<a class="ae nu" href="https://newsletter.levelup.dev/" rel="noopener ugc nofollow" target="_blank">通迅</a> <br/> <strong class="kl iu">升一级正在改造理工大招聘➡️ </strong> <a class="ae nu" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu">加入我们的人才集体</strong> </a></p></div></div>    
</body>
</html>