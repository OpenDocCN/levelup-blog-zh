<html>
<head>
<title>Mastering React PropTypes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">掌握React属性类型</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/mastering-react-proptypes-93f8de9026df?source=collection_archive---------9-----------------------#2021-07-28">https://levelup.gitconnected.com/mastering-react-proptypes-93f8de9026df?source=collection_archive---------9-----------------------#2021-07-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d46d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">理解动态类型检查的艺术</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/67c74b7ae843bc6df0964cbc916d2cbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A0lHoQGX6L7O8Drs"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">萨姆·穆卡达姆在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="345e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React的<a class="ae ky" href="https://reactjs.org/docs/typechecking-with-proptypes.html" rel="noopener ugc nofollow" target="_blank"> PropTypes </a>是开发人员在构建项目时可以使用的强大工具。它可用于验证组件作为输入接收的数据。并确保这是所期望的。</p><p id="2e16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PropTypes模块包含一组函数，用于验证作为props传入的数据类型。并在验证失败时返回错误。最常见的用例是测试所需的道具是否由子组件提供。</p><h1 id="7ca6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">PropTypes如何工作</h1><p id="cd0e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">PropTypes是React的内部机制，用于检查组件是否正在接收正确的类型。React组件使用一个名为<code class="fe ms mt mu mv b">propTypes</code>的属性来设置类型检查。对于功能组件和基于类的组件都可以这样做。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="11d2" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">要检查的可用类型</h1><p id="fec0" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">当谈到支持的类型时。PropTypes包提供了预定义的验证函数。它们涵盖了大多数常见的类型。对于更困难的验证，我们也有能力定义定制的验证器。</p><h2 id="16da" class="my lw it bd lx mz na dn mb nb nc dp mf li nd ne mh lm nf ng mj lq nh ni ml nj bi translated">基本类型</h2><p id="3b08" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这些是基本数据类型的验证器:</p><ul class=""><li id="b27a" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated"><code class="fe ms mt mu mv b">PropTypes.any</code> -道具可以是任何东西</li><li id="0bb2" class="nk nl it lb b lc nt lf nu li nv lm nw lq nx lu np nq nr ns bi translated"><code class="fe ms mt mu mv b">PropTypes.bool</code> -道具需要是<code class="fe ms mt mu mv b">true</code>或者<code class="fe ms mt mu mv b">false</code></li><li id="12f9" class="nk nl it lb b lc nt lf nu li nv lm nw lq nx lu np nq nr ns bi translated"><code class="fe ms mt mu mv b">PropTypes.number</code> -道具需要是任意的<code class="fe ms mt mu mv b">number</code></li><li id="53a3" class="nk nl it lb b lc nt lf nu li nv lm nw lq nx lu np nq nr ns bi translated"><code class="fe ms mt mu mv b">PropTypes.string</code> -道具需要是任意的<code class="fe ms mt mu mv b">string</code></li><li id="3e04" class="nk nl it lb b lc nt lf nu li nv lm nw lq nx lu np nq nr ns bi translated"><code class="fe ms mt mu mv b">PropTypes.func</code> -道具需要是一个函数</li><li id="eceb" class="nk nl it lb b lc nt lf nu li nv lm nw lq nx lu np nq nr ns bi translated"><code class="fe ms mt mu mv b">PropTypes.array</code> -道具需要<code class="fe ms mt mu mv b">Array</code></li><li id="4c16" class="nk nl it lb b lc nt lf nu li nv lm nw lq nx lu np nq nr ns bi translated"><code class="fe ms mt mu mv b">PropTypes.object</code> -道具需要<code class="fe ms mt mu mv b">Object</code></li><li id="4cb8" class="nk nl it lb b lc nt lf nu li nv lm nw lq nx lu np nq nr ns bi translated"><code class="fe ms mt mu mv b">PropTypes.symbol</code> -道具需要<code class="fe ms mt mu mv b">Symbol</code></li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="6dc5" class="my lw it bd lx mz na dn mb nb nc dp mf li nd ne mh lm nf ng mj lq nh ni ml nj bi translated">可呈现类型</h2><p id="4822" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">可渲染类型检查属性是否可以被React渲染。我们可以指定<code class="fe ms mt mu mv b">prop</code>是否是React元素(即。<code class="fe ms mt mu mv b">&lt;MyComponent /&gt;</code>)或其他任何东西(即。字符串、数字等...)</p><ul class=""><li id="896d" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated"><code class="fe ms mt mu mv b">PropTypes.element</code> -反应元素</li><li id="7351" class="nk nl it lb b lc nt lf nu li nv lm nw lq nx lu np nq nr ns bi translated"><code class="fe ms mt mu mv b">PropTypes.node</code> -任何可以渲染的东西。数字、字符串、元素或数组</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="09bc" class="my lw it bd lx mz na dn mb nb nc dp mf li nd ne mh lm nf ng mj lq nh ni ml nj bi translated">实例类型</h2><p id="dc12" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">实例验证器可以用来检查<code class="fe ms mt mu mv b">prop</code>是否是给定类的实例。这对于检查<code class="fe ms mt mu mv b">prop</code>是否是组件的实例很有用，但是它只适用于基于类的组件。</p><h2 id="d204" class="my lw it bd lx mz na dn mb nb nc dp mf li nd ne mh lm nf ng mj lq nh ni ml nj bi translated">集合类型</h2><p id="f7d9" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">当我们需要验证数组的内容时，集合验证器就派上了用场。这让我们可以检查和验证数组或对象的内容。</p><ul class=""><li id="0c6d" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated"><code class="fe ms mt mu mv b">PropTypes.arrayOf</code> -已定义元素的数组</li><li id="cadb" class="nk nl it lb b lc nt lf nu li nv lm nw lq nx lu np nq nr ns bi translated"><code class="fe ms mt mu mv b">PropTypes.shape</code> -包含已定义属性的对象(可能包含附加属性)</li><li id="0981" class="nk nl it lb b lc nt lf nu li nv lm nw lq nx lu np nq nr ns bi translated"><code class="fe ms mt mu mv b">PropTypes.exact</code> -只包含已定义属性的对象(不能包含任何附加属性)</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="1dd1" class="my lw it bd lx mz na dn mb nb nc dp mf li nd ne mh lm nf ng mj lq nh ni ml nj bi translated">必需的类型</h2><p id="2df6" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">默认情况下所有<code class="fe ms mt mu mv b">props</code>都是可选的。以确保某个属性总是被传递。我们可以根据需要使用<code class="fe ms mt mu mv b">isRequired</code>验证器来标记它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="c04b" class="my lw it bd lx mz na dn mb nb nc dp mf li nd ne mh lm nf ng mj lq nh ni ml nj bi translated">自定义验证程序</h2><p id="894d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在某些情况下，我们需要编写定制的验证器。一个很好的例子是检查传递的<code class="fe ms mt mu mv b">prop</code>是否是有效的电子邮件地址。</p><p id="ca30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以将一个定制的验证器定义为一个接受3个参数并在验证失败时返回<code class="fe ms mt mu mv b">Error</code>的函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="c649" class="my lw it bd lx mz na dn mb nb nc dp mf li nd ne mh lm nf ng mj lq nh ni ml nj bi translated">提供默认值</h2><p id="6a40" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">为组件<code class="fe ms mt mu mv b">props</code>定义默认值很简单。我们可以通过将它们分配给<code class="fe ms mt mu mv b">defaultProps</code>属性来做到这一点。如果我们忘记设置道具，下面的例子将把<code class="fe ms mt mu mv b">englishSpeaker</code>设置为<code class="fe ms mt mu mv b">true</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="2ec6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">如何检查错误</h1><p id="943d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">React的PropTypes在运行时检查类型是否正确。这意味着我们需要运行我们的应用程序来检查类型是否正确。此外，它只检查呈现的组件类型。如果某个组件收到了不正确的类型。我们将在控制台中看到一个警告。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/9031e0ea4da75d209c8f0e3aedfca876.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/0*3spDFys__Z1MnLW-.png"/></div></figure><p id="4913" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为这是一项耗时的任务。它仅在开发模式下受支持。所以开发的时候要仔细看控制台。因为你在生产中不会看到警告！</p><h1 id="473d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="4ee4" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><a class="ae ky" href="https://reactjs.org/docs/typechecking-with-proptypes.html" rel="noopener ugc nofollow" target="_blank"> PropTypes </a>给了我们很多函数来检查组件是否接收到正确的属性。这是将类型检查快速引入React项目的好方法。并使应用程序更加稳定。然而，对于大型项目来说，这并不是一个理想的选择。</p><p id="f409" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着项目越来越大，很容易忽略控制台中的警告。并将不必要的错误引入系统。在这些场景中，我们应该考虑使用像<a class="ae ky" href="https://flow.org/en/docs/react/" rel="noopener ugc nofollow" target="_blank"> Flow </a>或<a class="ae ky" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> Typescript </a>这样的工具进行静态类型检查。</p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><p id="845a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">【https://www.upbeatcode.com】最初发表于<a class="ae ky" href="https://www.upbeatcode.com/mastering-react-proptypes/" rel="noopener ugc nofollow" target="_blank"><em class="og"/></a><em class="og">。</em></p></div></div>    
</body>
</html>