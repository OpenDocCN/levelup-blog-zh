<html>
<head>
<title>Create Custom View Components in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中创建自定义视图组件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-custom-view-components-in-swiftui-845b65e8ba94?source=collection_archive---------3-----------------------#2022-08-18">https://levelup.gitconnected.com/create-custom-view-components-in-swiftui-845b65e8ba94?source=collection_archive---------3-----------------------#2022-08-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1a3a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">具有结构、计算属性和函数</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/79e2c3265ff6d15b50f9342b3945f373.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BRniuBF9n6_fJmaQ8fauSw.png"/></div></div></figure><p id="d9be" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您想要可维护的项目，并且不喜欢多次键入相同的代码，那么创建定制组件是<strong class="kw iu">必须的</strong>。在SwiftUI中有大量不同的方法来制作可重用组件；您可以创建<a class="ae lq" href="https://betterprogramming.pub/create-custom-button-styles-in-swiftui-f3778f695266" rel="noopener ugc nofollow" target="_blank">自定义样式</a>、<a class="ae lq" href="https://medium.com/better-programming/create-custom-view-modifiers-in-swiftui-79d73d1691b" rel="noopener">自定义修改器</a>或<strong class="kw iu">自定义视图</strong>。</p><p id="74a6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这个简短的教程中，我们将探索为您的SwiftUI应用创建<strong class="kw iu">自定义视图组件</strong>的一些方法。</p><h1 id="96da" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">设置(可跳过)</h1><p id="5940" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">我将使用下面的<code class="fe mo mp mq mr b">City</code>模型来填充演示所需的数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated"><code class="fe mo mp mq mr b">City</code>型号</figcaption></figure><p id="1fd0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我创建了一个模型CityAPI来获取测试数据:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">获取城市数组的模拟API</figcaption></figure><p id="4024" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是<code class="fe mo mp mq mr b">ContentView</code>最初的样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">初始内容视图</figcaption></figure><p id="d709" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是不那么漂亮的初步预览:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi my"><img src="../Images/061270bd4077b85920bb22f0e239b99c.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*mnWccrlurHH0ZJe3o_41IQ.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">初始内容视图的预览</figcaption></figure><h1 id="73fb" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">组件作为结构</h1><p id="d4b7" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">我们将要学习的创建<strong class="kw iu">定制视图组件</strong>的第一种方法是创建一个符合<code class="fe mo mp mq mr b">View</code>协议的<code class="fe mo mp mq mr b">struct</code>。</p><p id="8181" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当创建一个新的SwiftUI项目时，您看到的最初的<code class="fe mo mp mq mr b">ContentView</code>使用了相同的方法(事实上，还有许多SwiftUI组件)。</p><p id="7c90" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了创建一个<strong class="kw iu">自定义视图，</strong>我们将简单地创建一个新的<strong class="kw iu"> SwiftUI视图</strong>文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/c6ea07a910b62597cd01bbb9f6b6bc41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f-54t0kahkLOpK2PxGirNg.png"/></div></div></figure><p id="9a5c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我想为我们城市中的每一行创建一个<strong class="kw iu">自定义卡片视图</strong>。我准备命名为<code class="fe mo mp mq mr b">CityCard</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/3e9eca066fc41d06b2d81269c796a63b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fRv0zjgObE7DekyEYvIEog.png"/></div></div></figure><p id="4c9d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">尝试采用苹果使用的<strong class="kw iu">命名约定</strong>。我们用的是<code class="fe mo mp mq mr b">VStack,</code>而不是<code class="fe mo mp mq mr b">VStackView</code>。</p><p id="477c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">尽管<code class="fe mo mp mq mr b">ContentView</code>和<code class="fe mo mp mq mr b">CityCard</code>本质上都是视图(它们符合视图协议)，但它们服务于不同的目的。</p><p id="0cf1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe mo mp mq mr b">CityCard</code>是在<code class="fe mo mp mq mr b">ContentView</code>内部(或其他地方)使用的组件。这就是我们避免使用“…视图”后缀的主要原因。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/a326b627e85bba5d610ed94d20fa2221.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EFe5Pz32scXQnFrBkRCd2A.png"/></div></div></figure><p id="5b25" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">创建一个新的<strong class="kw iu"> SwiftUI视图</strong>文件非常好，因为我们已经准备好了所有的设置样板代码！然而，了解这些代码来自哪里是很重要的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">创建新的SwiftUI视图时的样板文件</figcaption></figure><ul class=""><li id="01fa" class="nb nc it kw b kx ky la lb ld nd lh ne ll nf lp ng nh ni nj bi translated"><code class="fe mo mp mq mr b">CityCard</code>符合<code class="fe mo mp mq mr b">View</code>协议。</li><li id="cd3d" class="nb nc it kw b kx nk la nl ld nm lh nn ll no lp ng nh ni nj bi translated"><code class="fe mo mp mq mr b">View</code>协议声明需要存在一个返回<code class="fe mo mp mq mr b">some View</code>的名为<code class="fe mo mp mq mr b">body</code>的<strong class="kw iu">计算属性</strong>。</li><li id="c022" class="nb nc it kw b kx nk la nl ld nm lh nn ll no lp ng nh ni nj bi translated"><code class="fe mo mp mq mr b">some View</code>可以是任何其他的<code class="fe mo mp mq mr b">View</code>。答<code class="fe mo mp mq mr b">Text</code>、<code class="fe mo mp mq mr b">VStack</code>、<code class="fe mo mp mq mr b">Button</code>等。</li></ul><p id="b921" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">简而言之，我们在<code class="fe mo mp mq mr b">body</code>中构建我们的<strong class="kw iu">定制视图</strong>。</p><p id="c4ff" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">好吧，我们从简单的开始。我们将通过传递一个<code class="fe mo mp mq mr b">City</code>作为初始化式来复制我们已经在<code class="fe mo mp mq mr b">ContentView</code>中拥有的东西。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/98f801e9ee9d241b222c2cfe8da9cdc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*dMRm0PawfPRcjpVtELg88g.png"/></div></figure><p id="5852" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您现在可以返回到<code class="fe mo mp mq mr b">ContentView.swift</code>并将<code class="fe mo mp mq mr b">Text()</code>视图更新为<code class="fe mo mp mq mr b">CityCard(city: city)</code></p><p id="0bf7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们并没有创建一个自定义视图，而是一个文本在里面！</p><p id="842c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们详细阐述我们的观点。</p><p id="6cbd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">添加此代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">组件作为<strong class="ak">结构</strong>的完整示例</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/7afea047968507402afa681a5cc2bea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*ZfO087d6sWZZ8tU_aG2e0w.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">城市卡预览</figcaption></figure><h1 id="39d0" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">组件作为计算属性</h1><p id="3c7a" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">创建<strong class="kw iu">定制视图组件</strong>的另一种方式是使用<strong class="kw iu">计算属性</strong>。这对于封装您的视图和提高代码的可读性非常有用</p><p id="2117" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将添加一个<strong class="kw iu">背景图片</strong>，上面有一个暗渐变，这样文本更容易阅读。</p><p id="bd82" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我喜欢添加我的组件作为它们所属视图的扩展。</p><p id="14f6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在预览下添加以下代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">作为<strong class="ak">计算属性</strong>示例的组件</figcaption></figure><p id="e60a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将<code class="fe mo mp mq mr b">.background(.cyan)</code>更新为<code class="fe mo mp mq mr b">.background(backgroundImage)</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/3480bd96b82e5e6cc20893c609b52d34.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*t1uDgg-IwxXOtDLJjHJ6DQ.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">带有<code class="fe mo mp mq mr b">backgroundImage</code>的城市卡预览</figcaption></figure><h1 id="3abd" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">作为功能的组件</h1><p id="3e41" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">类似于我们可以用计算的属性创建<strong class="kw iu">定制</strong> <strong class="kw iu">视图组件</strong>，用<strong class="kw iu">函数</strong>，我们有为同一个视图模板传递参数的好处。</p><p id="7923" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们为收藏和旅行计数创建一个自定义视图。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">作为<strong class="ak">功能</strong>示例的组件</figcaption></figure><p id="5ca5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为两个指标更新<code class="fe mo mp mq mr b">HStack</code>的内容</p><p id="56c5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">来自:<code class="fe mo mp mq mr b">Label(city.favoriteCount.formatted(), systemImage: “heart.fill”)</code></p><p id="8772" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">致:<code class="fe mo mp mq mr b">metricsLabel(count: city.favoriteCount, systemImage: “heart.fill”)</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/f2c124e9bb95754ee48b9e22ad9a593f.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*E7Mqi6CvGOSNuHImoTPFgg.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">带有公制标签的城市卡预览</figcaption></figure><h1 id="125b" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">包裹</h1><p id="dd72" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">这些是您可以用来在SwiftUI应用程序中创建自定义视图组件的一些不同方法。当你需要构建一个大而复杂的视图时，使用<strong class="kw iu">结构</strong>，当你需要在结构中封装更小的组件时，使用<strong class="kw iu">计算属性</strong>和<strong class="kw iu">函数</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/76c4a17d683585733f8250f060f9e629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*0vBElYyfRtM2b225_OYaJw.gif"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">=最终产品的演示</figcaption></figure><p id="05ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你有兴趣看一下源代码，可以在这里找到Github repo <a class="ae lq" href="https://github.com/ricardomongza99/Cities.git" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="6b5b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">感谢阅读！如果你喜欢这篇文章，请务必关注。</p></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><h1 id="1277" class="lr ls it bd lt lu ob lw lx ly oc ma mb jz od ka md kc oe kd mf kf of kg mh mi bi translated">分级编码</h1><p id="0f88" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="1dc9" class="nb nc it kw b kx ky la lb ld nd lh ne ll nf lp ng nh ni nj bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="5f72" class="nb nc it kw b kx nk la nl ld nm lh nn ll no lp ng nh ni nj bi translated">📰查看<a class="ae lq" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="6fd1" class="nb nc it kw b kx nk la nl ld nm lh nn ll no lp ng nh ni nj bi translated">🔔关注我们:<a class="ae lq" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae lq" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae lq" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="8d5a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">🚀👉<a class="ae lq" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>