<html>
<head>
<title>Using The Map Function in Javascript and React!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Javascript和React中使用Map函数！</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/using-the-map-function-in-javascript-react-b433736759d4?source=collection_archive---------0-----------------------#2020-01-28">https://levelup.gitconnected.com/using-the-map-function-in-javascript-react-b433736759d4?source=collection_archive---------0-----------------------#2020-01-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/a748c04883f13bb88a7dc7c283bf41cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y7PFtgbRMuTwYqR8QPcqaA.png"/></div></div></figure><p id="48e5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">今天我将介绍如何在Javascript和React中使用<code class="fe kz la lb lc b">.map</code>高阶函数。Map是一个可以在元素数组上调用的函数，它允许程序员以特定的方式修改元素。</p><p id="2dd4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">假设我们有一个包含不同数字的数组:</p><pre class="ld le lf lg gt lh lc li lj aw lk bi"><span id="3a2e" class="ll lm it lc b gy ln lo l lp lq">const arr = [2,3,4,5]</span></pre><p id="33dc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">不管出于什么原因，我们都希望所有这些数字都被加倍，并作为一个单独的数组返回。我们可以用<code class="fe kz la lb lc b">.map</code>的方法！</p><pre class="ld le lf lg gt lh lc li lj aw lk bi"><span id="91d5" class="ll lm it lc b gy ln lo l lp lq">const doubledArr = arr.map( function(num){return num * 2})</span></pre><p id="4793" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe kz la lb lc b">map</code>被认为是一个高阶函数，因为它接受一个回调函数的参数来操作你的数据。上述内容也可以使用ES6的箭头函数语法重写:</p><pre class="ld le lf lg gt lh lc li lj aw lk bi"><span id="785d" class="ll lm it lc b gy ln lo l lp lq">const doubledArr = arr.map(num =&gt; num * 2)</span></pre><p id="33cc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，如果我们将<code class="fe kz la lb lc b">doubledArr</code>登录到我们的控制台，我们将得到一组数字，如下所示:</p><pre class="ld le lf lg gt lh lc li lj aw lk bi"><span id="9e0b" class="ll lm it lc b gy ln lo l lp lq">[ 4, 6, 8, 10 ]</span></pre><p id="37ba" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">发生这种情况是因为在幕后，我们的<code class="fe kz la lb lc b">.map</code>的行为就像一个for循环，遍历数组中的每个元素，根据需要修改元素，然后将修改后的元素推入一个新的数组:</p><figure class="ld le lf lg gt ju gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/e1a39ebdb8e8a011f022f96fbea0146c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*Cv8hkxvaaRM_8LPx6UeO8g.png"/></div></figure><h1 id="a457" class="ls lm it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">反应中的贴图</h1><p id="0ddd" class="pw-post-body-paragraph kb kc it kd b ke mp kg kh ki mq kk kl km mr ko kp kq ms ks kt ku mt kw kx ky im bi translated"><strong class="kd iu">假设:</strong><br/>——你知道如何给组件<br/>添加事件监听器——你知道如何在组件内传递函数作为道具。我推荐我的博客文章，标题是“React.js的基本道具指南”，不仅是道具指南，也是下面的待办事项列表应用程序的架构指南。</p><p id="e5ba" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">假设我们想要构建一个待办事项列表应用程序。在我们的App.js文件中，我们可以如下定义我们的状态:</p><figure class="ld le lf lg gt ju gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/aa3bb31f09fbb386d1e9a8de1eb035bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*Il6yAcbo2v-MlZdJsJI4Zg.png"/></div></figure><p id="5e9b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在上图中，我们将待办事项列表定义为一个键，指向状态对象中的待办事项对象数组。每个任务对象都有一个键，“completed”指向一个布尔值，表示我们是否已经完成了一个单独的任务。</p><p id="5643" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，为了使这个待办事项列表应用程序有效，我们想假设有一个点击事件，它以一种方式改变状态，其中单个待办事项任务将其“已完成”布尔值更改为相反的值。我们现在将使用<code class="fe kz la lb lc b">.map</code>方法来演示如何改变react应用程序的状态。</p><figure class="ld le lf lg gt ju gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/9c00dd0e9219c5ff2ad22c94f5476901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*iirEkW4Zq6u139aHF6gwmg.png"/></div></figure><p id="1df7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在上面的例子中，我们将单个任务的ID传递给我们定义的方法<code class="fe kz la lb lc b">completeTask</code>。这样，我们可以在状态对象中引用单个任务。</p><p id="7293" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">有了id，我们可以在todos的当前状态上使用<code class="fe kz la lb lc b">.map()</code>来查找传入的ID与被迭代的todo的ID相匹配的地方。当它们匹配时，我们将创建一个与原始todo对象具有相同内容的新对象，除了将<code class="fe kz la lb lc b">completed</code>键设置为相反的值。这样就可以避免直接突变我们的状态！</p><p id="b9f6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果id不匹配，那么我们将简单地返回被迭代的对象。</p><p id="9bbd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">一旦map函数运行完毕，新的对象数组将被保存到一个新的变量<code class="fe kz la lb lc b">newTodos</code>中。然后，我们使用<code class="fe kz la lb lc b">this.setState()</code>作为一种手段，通过将<code class="fe kz la lb lc b">todos</code>设置为<code class="fe kz la lb lc b">newTodos</code>来编辑我们的当前状态。</p><p id="4fe0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">正如我之前提到的，这个方法是针对单个点击事件的。假设每个任务对象都与一个组件相关联，该组件通过所述点击事件呈现一个div。当每个任务组件呈现时，每次我们用指定的事件侦听器单击div，我们现在将通过使用map方法来更改该任务的completed键的值。</p><figure class="ld le lf lg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mx"><img src="../Images/a771764b6244f53f7f4a17831fe51fb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*__DT-iFj0EUKNwW-ENUD4A.png"/></div></div></figure><h1 id="db44" class="ls lm it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">参考资料:</h1><div class="my mz gp gr na nb"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd iu gy z fp ng fr fs nh fu fw is bi translated">Array.prototype.map()</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">map()方法创建了一个新的数组，该数组填充了对…</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">developer.mozilla.org</p></div></div><div class="nk l"><div class="nl l nm nn no nk np jz nb"/></div></div></a></div><div class="my mz gp gr na nb"><a href="https://dev.to/damcosset/higher-order-functions-in-javascript-4j8b" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd iu gy z fp ng fr fs nh fu fw is bi translated">Javascript中的高阶函数</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">在Javascript中，函数是值(一等公民)。这意味着它们可以被赋给一个变量和/或…</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">开发到</p></div></div><div class="nk l"><div class="nq l nm nn no nk np jz nb"/></div></div></a></div></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><div class="ld le lf lg gt nb"><a href="https://skilled.dev" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd iu gy z fp ng fr fs nh fu fw is bi translated">编写面试问题</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">一个完整的平台，在这里我会教你找到下一份工作所需的一切，以及…</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">技术开发</p></div></div><div class="nk l"><div class="ny l nm nn no nk np jz nb"/></div></div></a></div></div></div>    
</body>
</html>