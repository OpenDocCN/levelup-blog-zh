<html>
<head>
<title>Automatically Translate Your Flutter App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动翻译你的Flutter应用</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/automatically-translate-your-flutter-app-d5761d6bc678?source=collection_archive---------5-----------------------#2022-05-16">https://levelup.gitconnected.com/automatically-translate-your-flutter-app-d5761d6bc678?source=collection_archive---------5-----------------------#2022-05-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9e97" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">颤动的包裹聚光灯</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fa2c781fdfc1f1a1f6b4aeefc7ad3abe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DIc9xssCc8DsshfRAOVCNQ.jpeg"/></div></div></figure><h1 id="15fd" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">介绍</h1><p id="cd4f" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">如果你想覆盖全球受众，将你的应用国际化是关键。Flutter通过结合ARB文件的<code class="fe mf mg mh mi b">flutter_localizations</code> &amp; <code class="fe mf mg mh mi b">intl</code>包使这变得容易。然而，你仍然需要翻译你的信息。这就是为什么我很兴奋地向大家介绍<code class="fe mf mg mh mi b"><a class="ae mj" href="https://pub.dev/packages/auto_translator" rel="noopener ugc nofollow" target="_blank">auto_translator</a></code>！不仅仅是因为在国际化你的Flutter应用程序时，它是你工作流程的一个很好的补充，还因为它是我正式发布的第一个包！😃</p><p id="2807" class="pw-post-body-paragraph lj lk iq ll b lm mk jr lo lp ml ju lr ls mm lu lv lw mn ly lz ma mo mc md me ij bi translated">在设计了这个程序供我个人使用后，我觉得它值得与Flutter社区分享。我应该注意到，在我编写代码和决定发布之间，有几个类似地执行这个任务的包被放到了<a class="ae mj" href="https://pub.dev" rel="noopener ugc nofollow" target="_blank"> pub.dev </a>中。事实上，为了发布，我不得不重命名我的包，因为原来的名字已经被使用了。😅但是，我觉得我的包给开发人员带来了不同的价值，所以我继续发布。我们来看看<code class="fe mf mg mh mi b">auto_translator</code>能做什么。</p><h1 id="69c2" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">特征</h1><p id="5caf" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">创建该软件包时考虑了4个主要目标:</p><ol class=""><li id="af2a" class="mp mq iq ll b lm mk lp ml ls mr lw ms ma mt me mu mv mw mx bi translated">易用性。</li><li id="13b7" class="mp mq iq ll b lm my lp mz ls na lw nb ma nc me mu mv mw mx bi translated">处理复杂的ARB字符串、条件和变量。</li><li id="4a6c" class="mp mq iq ll b lm my lp mz ls na lw nb ma nc me mu mv mw mx bi translated">使用最少配额的高质量上下文翻译。</li><li id="472e" class="mp mq iq ll b lm my lp mz ls na lw nb ma nc me mu mv mw mx bi translated">与<code class="fe mf mg mh mi b">flutter_localizations</code>和<code class="fe mf mg mh mi b">intl</code>封装无缝集成，这是Flutter国际化的首选方法。</li></ol><p id="72cd" class="pw-post-body-paragraph lj lk iq ll b lm mk jr lo lp ml ju lr ls mm lu lv lw mn ly lz ma mo mc md me ij bi translated">这些目标在实践中看起来如何？</p><h2 id="475e" class="nd ks iq bd kt ne nf dn kx ng nh dp lb ls ni nj ld lw nk nl lf ma nm nn lh no bi translated">易用性和无缝集成</h2><p id="9440" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">这两个目标在某种程度上是齐头并进的。<code class="fe mf mg mh mi b">auto_translator</code>使用与<code class="fe mf mg mh mi b">flutter_localizations</code> &amp; <code class="fe mf mg mh mi b">intl</code>相同的文件进行配置。在<code class="fe mf mg mh mi b">l10n.yaml</code>中，一个额外的<code class="fe mf mg mh mi b">translator</code>部分允许您定义您的目标语言，并且在模板ARB文件的元数据部分，您可以根据需要告诉<code class="fe mf mg mh mi b">auto_translator</code>到<code class="fe mf mg mh mi b">ignore</code>或<code class="fe mf mg mh mi b">force</code>对特定字符串的翻译。</p><p id="52ae" class="pw-post-body-paragraph lj lk iq ll b lm mk jr lo lp ml ju lr ls mm lu lv lw mn ly lz ma mo mc md me ij bi translated">运行之前的另一个步骤是设置谷歌云翻译，如果你还没有访问该服务的权限。操作说明可在<a class="ae mj" href="https://cloud.google.com/translate/docs/setup" rel="noopener ugc nofollow" target="_blank">这里</a>找到。然后将API密匙保存到项目根目录下的一个名为<code class="fe mf mg mh mi b">translator_key</code>的文件中。</p><p id="7e06" class="pw-post-body-paragraph lj lk iq ll b lm mk jr lo lp ml ju lr ls mm lu lv lw mn ly lz ma mo mc md me ij bi translated">要使用<code class="fe mf mg mh mi b">auto_translator</code>，只需在<code class="fe mf mg mh mi b">pubspec.yaml</code>中的<code class="fe mf mg mh mi b">dev_dependencies</code>下添加<code class="fe mf mg mh mi b">auto_translator</code>。然后，一旦配置完毕，运行<code class="fe mf mg mh mi b">flutter pub run auto_translator</code>。</p><h2 id="1c75" class="nd ks iq bd kt ne nf dn kx ng nh dp lb ls ni nj ld lw nk nl lf ma nm nn lh no bi translated">最小云翻译配额使用量</h2><p id="fe9d" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><code class="fe mf mg mh mi b">auto_translator</code>使用一种新颖的方法来处理谷歌云翻译查询，以减少这些查询中的字符数，同时保持基于上下文的翻译质量。这当然是为了节省配额的使用，最大限度地降低成本。如果你不是在翻译数量惊人的字符串，那么遵守免费使用限制应该没有问题。</p><p id="4efa" class="pw-post-body-paragraph lj lk iq ll b lm mk jr lo lp ml ju lr ls mm lu lv lw mn ly lz ma mo mc md me ij bi translated">为了确保没有不必要的配额使用，<code class="fe mf mg mh mi b">auto_translator</code>永远不会为已经翻译成特定目标语言的短语请求翻译(除非使用<code class="fe mf mg mh mi b">force</code>选项)。另外，你可以告诉<code class="fe mf mg mh mi b">auto_translator</code>到<code class="fe mf mg mh mi b">ignore</code>任何不需要翻译的字符串。</p><h2 id="c793" class="nd ks iq bd kt ne nf dn kx ng nh dp lb ls ni nj ld lw nk nl lf ma nm nn lh no bi translated">复杂ARB字符串</h2><p id="f1b7" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">使用Google Cloud Translate翻译字符串常量文件相对简单，但是当您开始使用ARB格式的高级功能时，就变得困难多了。ARB字符串能够使用占位符变量，其他ARB字符串作为变量，以及条件表达式，所以它们可以变得相当复杂。让我们看一个例子:</p><pre class="kg kh ki kj gt nq mi nr bn ns nt bi"><span id="f733" class="nu ks iq mi b be nv nw l nx ny">"userSelection": "{choice, select, 0{$name chose $otherString} 1{$name chose $someOtherString} other{$name chose $yetAnotherString}}",<br/>"@userSelection": {<br/>  "placeholders": {<br/>    "choice": {<br/>      "type": "int"<br/>    },<br/>    "name": {<br/>      "type": "String",<br/>  }<br/>}</span></pre><p id="8b33" class="pw-post-body-paragraph lj lk iq ll b lm mk jr lo lp ml ju lr ls mm lu lv lw mn ly lz ma mo mc md me ij bi translated">这里，我们接受一个整数和一个字符串输入，并基于该整数计算一个条件表达式，以输出一个包含字符串输入和ARB文件中其他地方定义的字符串的字符串值。</p><p id="8d6f" class="pw-post-body-paragraph lj lk iq ll b lm mk jr lo lp ml ju lr ls mm lu lv lw mn ly lz ma mo mc md me ij bi translated">随着字符串变得如此复杂，要对给定的短语进行正确的上下文翻译就变得非常困难。幸运的是，<code class="fe mf mg mh mi b">auto_translator</code>专为解决这一问题而设计，同时最大限度地减少云翻译配额的使用。</p><h1 id="95d4" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">考虑因素和未来工作</h1><p id="3768" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">如前所述，这是一个个人使用的项目。我决定使用谷歌云翻译，因为我以前用过它，我觉得它在翻译相当准确方面做得很好。我已经考虑过扩展这个包来集成其他翻译服务，所以我正在收集应该包含的服务的建议。</p><p id="e251" class="pw-post-body-paragraph lj lk iq ll b lm mk jr lo lp ml ju lr ls mm lu lv lw mn ly lz ma mo mc md me ij bi translated">如果你有兴趣看看一个用<code class="fe mf mg mh mi b">auto_translator</code>翻译的成熟应用，看看<a class="ae mj" href="https://onelink.to/lights-game" rel="noopener ugc nofollow" target="_blank"> Lights:一个记忆游戏</a>。这是我的一个有趣的兼职项目，扩展了经典的记忆游戏<em class="np">西蒙说</em>。</p><p id="66bd" class="pw-post-body-paragraph lj lk iq ll b lm mk jr lo lp ml ju lr ls mm lu lv lw mn ly lz ma mo mc md me ij bi translated">一如既往的感谢您的阅读！请关注我，了解未来关于Flutter、软件开发、IT管理以及更多内容的文章！</p></div></div>    
</body>
</html>