<html>
<head>
<title>Cypress Custom Commands</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Cypress自定义命令</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/cypress-custom-commands-1bc55577615b?source=collection_archive---------10-----------------------#2022-01-10">https://levelup.gitconnected.com/cypress-custom-commands-1bc55577615b?source=collection_archive---------10-----------------------#2022-01-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="21f1" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">编程；编排</h2><div class=""/><div class=""><h2 id="3234" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">用Cypress E2E框架编写你自己的定制命令</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/d3f30fde4ee3041541c0d74405a2c4fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9LbYpf8qg651U2Hl"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@sigmund?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">西格蒙德</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="dc61" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Cypress是一个JavaScript端到端(E2E)框架，你可以在其中测试你的应用程序的UI。在Cypress中有一些内置的命令，可以用来做几乎任何事情。但是在某些情况下，你需要有自己的指挥权。因此，您可以执行特定的操作，或者想要重用重复的代码块。因此，我们有“自定义命令”。让我们开始吧。</p><h1 id="45e4" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">自定义命令</h1><p id="e28d" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">在您的Cypress项目中，您会有一个“cypress &gt; support &gt; commands”文件夹。在此文件夹中，您可以创建一个名为“example.js”的新文件，如果您已经有(如果没有，请创建)一个“index.js”文件，请在其中添加以下代码。</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="4e13" class="ng mf it nc b gy nh ni l nj nk">import './example';</span></pre><p id="e1d2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，在您的示例文件中，我们可以创建自己的Cypress自定义命令。像这样:</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="4103" class="ng mf it nc b gy nh ni l nj nk">Cypress.Commands.<strong class="nc jd">add</strong>('<strong class="nc jd">example</strong>', <strong class="nc jd">() =&gt; {}</strong>);</span></pre><p id="2d33" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用上面的代码，您“添加”了一个带有两个参数的命令；第一个是命令名，第二个是回调函数。在这个功能中，你可以施展你所有的魔法。让我们试着添加一些东西来使它工作:</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="1b23" class="ng mf it nc b gy nh ni l nj nk"><strong class="nc jd">Cypress.Commands.add('example', (pathEnd) =&gt; {<br/>  const path = `some-really-long-url-with-a-changing-${pathEnd}`;<br/>  cy.visit(path);<br/>});</strong></span></pre><p id="70c7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在示例函数中，我输入了一个“cy.visit”命令，该命令将您重定向到某个url(注意:baseUrl是在配置中设置的)。我们通过我们自己的路径，在这种情况下，这是一条非常长的路径，并且路径的终点经常变化。因此，在这个漂亮的例子中，你可以将路径末端作为参数传递(如果你愿意，你可以添加更多)。</p><p id="6cf2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在您的Cypress测试中，您现在应该能够使用它了。请参见下面的示例:</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="d3fa" class="ng mf it nc b gy nh ni l nj nk">it('my-test', () =&gt; { <br/>  // some code here</span><span id="bc87" class="ng mf it nc b gy nl ni l nj nk">  <strong class="nc jd">cy.example('path-end-one');</strong></span><span id="968a" class="ng mf it nc b gy nl ni l nj nk">  // some other code there<br/>})</span></pre><p id="2ad7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在您有了一个可重用的定制命令，您可以在每个测试中使用它！</p></div></div>    
</body>
</html>