<html>
<head>
<title>Stop using for loops, here are other cool options</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止使用for循环，这里有其他很酷的选项</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/stop-using-for-loop-here-are-other-cool-options-46549a4dba97?source=collection_archive---------0-----------------------#2020-01-22">https://levelup.gitconnected.com/stop-using-for-loop-here-are-other-cool-options-46549a4dba97?source=collection_archive---------0-----------------------#2020-01-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/09bbde56284b20da835f6517ba3ded82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Eh1ju0aZiQP5Q6UJ-KdevQ.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Clément H在<a class="ae kc" href="https://unsplash.com/photos/95YRwf6CNw8" rel="noopener ugc nofollow" target="_blank"> unsplash </a>上拍摄的照片</figcaption></figure><p id="c76a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你总是求助于<code class="fe lb lc ld le b">for</code>循环和<code class="fe lb lc ld le b">forEach</code>循环来迭代数组中的元素，那么这是适合你的。我们将探索一些数组方法，您可以用它们来替代简单的“for”循环。</p><p id="6a61" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与通用的<code class="fe lb lc ld le b">for</code>或<code class="fe lb lc ld le b">forEach</code>版本相比，使用特定的方法有很多优势。</p><ul class=""><li id="ccab" class="lf lg iq kf b kg kh kk kl ko lh ks li kw lj la lk ll lm ln bi translated">它很容易写，别人也能很容易地解释它</li><li id="722f" class="lf lg iq kf b kg lo kk lp ko lq ks lr kw ls la lk ll lm ln bi translated">它易于维护、扩展和测试</li><li id="aed5" class="lf lg iq kf b kg lo kk lp ko lq ks lr kw ls la lk ll lm ln bi translated">你可以编写没有任何副作用的纯函数</li><li id="3cf2" class="lf lg iq kf b kg lo kk lp ko lq ks lr kw ls la lk ll lm ln bi translated">帮助您从函数式编程的角度进行思考</li><li id="3bf0" class="lf lg iq kf b kg lo kk lp ko lq ks lr kw ls la lk ll lm ln bi translated">如果您计划使用像RxJS这样的库，它肯定会有所帮助</li></ul><h1 id="34e2" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">使用地图</h1><p id="b830" class="pw-post-body-paragraph kd ke iq kf b kg mr ki kj kk ms km kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">下面的代码看起来很熟悉，对吗？你可以看到<code class="fe lb lc ld le b">for</code>循环从数组中取出每个元素，执行一些操作(这里是数字相乘)，然后放入一个新的数组。</p><pre class="mw mx my mz gt na le nb nc aw nd bi"><span id="47bc" class="ne lu iq le b gy nf ng l nh ni">find square of numbersvar numberArray = [1,2,3,4,5,6,7,8,9,10];</span><span id="5665" class="ne lu iq le b gy nj ng l nh ni"><strong class="le ir">//for Version</strong><br/>var squareNumbers = [];<br/>for (var counter=0; counter &lt; numberArray.length; counter++){<br/>   squareNumbers.push(numberArray[counter] * numberArray[counter])<br/>}<br/>console.log(squareNumbers);</span></pre><p id="1e30" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> Array.map </strong>是一个内置函数，它通过根据提供的转换方法将源数组的每个元素转换为一个新值来生成一个新数组。</p><p id="f85e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它按顺序遍历所有元素，为每个元素调用一个提供的转换函数，并在内部将结果推入一个新数组。我们只需要提供转换函数，剩下的工作将由<code class="fe lb lc ld le b">map</code>函数来完成。例如:</p><pre class="mw mx my mz gt na le nb nc aw nd bi"><span id="09c1" class="ne lu iq le b gy nf ng l nh ni">find square of numbersvar numberArray = [1,2,3,4,5,6,7,8,9,10];</span><span id="585a" class="ne lu iq le b gy nj ng l nh ni"><strong class="le ir">//Map version<br/></strong>var squareNumbers = numberArray.map(number =&gt; number*number);<br/>console.log(squareNumbers);</span></pre><p id="0eff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简单来说，<code class="fe lb lc ld le b">Array.map()</code>在对数组中的每个元素执行转换函数后，将给定的数组转换成一个新的数组。</p><div class="nk nl gp gr nm nn"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">Array.prototype.map()</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">map()方法创建了一个新的数组，该数组填充了对…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">developer.mozilla.org</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob jw nn"/></div></div></a></div></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><h1 id="6f31" class="lt lu iq bd lv lw oj ly lz ma ok mc md me ol mg mh mi om mk ml mm on mo mp mq bi translated">使用过滤器</h1><p id="77c3" class="pw-post-body-paragraph kd ke iq kf b kg mr ki kj kk ms km kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">你可以看到下面的<code class="fe lb lc ld le b">for</code>循环从数组中取出每个元素，检查某个条件(这里是检查数字是否为偶数)，如果条件为真，它就把它放入一个新的数组中。</p><pre class="mw mx my mz gt na le nb nc aw nd bi"><span id="c384" class="ne lu iq le b gy nf ng l nh ni">Example 1 :- Filter even numbers<br/>var numberArray = [1,2,3,4,5,6,7,8,9,10];</span><span id="8e51" class="ne lu iq le b gy nj ng l nh ni"><strong class="le ir">//for Version</strong><br/>var evenNumbers = [];<br/>for (var counter=0; counter &lt; numberArray.length; counter++){<br/>    if (numberArray[counter] %2 === 0){<br/>        evenNumbers.push(numberArray[counter])<br/>    }<br/>}<br/>console.log(evenNumbers);</span></pre><p id="58ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> Array.filter </strong>是另一个方便的函数，它基于给定的“验证器”函数构建一个新的元素数组。它循环遍历源数组的所有元素，为每一项调用“验证器”函数，如果“验证器”函数返回true，该元素将在内部添加到一个新数组中。有了<code class="fe lb lc ld le b">filter</code>函数，我们可以只提供函数的核心“验证”逻辑，剩下的工作留给<code class="fe lb lc ld le b">filter</code>去做，这样更容易编写和理解。</p><pre class="mw mx my mz gt na le nb nc aw nd bi"><span id="e3d2" class="ne lu iq le b gy nf ng l nh ni">Example 1 :- Filter even numbers<br/>var numberArray = [1,2,3,4,5,6,7,8,9,10];</span><span id="b444" class="ne lu iq le b gy nj ng l nh ni"><strong class="le ir">//filter version</strong><br/>var evenNumbers2 = numberArray.filter(number =&gt; number%2===0);<br/>console.log(evenNumbers2);</span></pre><p id="9dc9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">看看用<code class="fe lb lc ld le b">filter()</code>实现的同一个函数，很明显它是基于“validator”函数中使用的条件过滤原始数组的。</p><p id="b8e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于<code class="fe lb lc ld le b">for</code>和<code class="fe lb lc ld le b">forEach</code>版本，我们需要分析是否有一个空数组，然后根据条件向其中添加元素。有了<code class="fe lb lc ld le b">filter</code>函数，我们只需要考虑验证函数逻辑，剩下的交给<code class="fe lb lc ld le b">filter</code>，这使得代码看起来流畅自然。</p><div class="nk nl gp gr nm nn"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">Array.prototype.filter()</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">filter()方法创建一个新数组，其中所有元素都通过了由提供的函数实现的测试…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">developer.mozilla.org</p></div></div><div class="nw l"><div class="oo l ny nz oa nw ob jw nn"/></div></div></a></div><h1 id="da6c" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">使用reduce</h1><p id="4df6" class="pw-post-body-paragraph kd ke iq kf b kg mr ki kj kk ms km kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">另一个大家熟悉的for循环是，我们获取每个元素并进行某种累加运算(这里是将所有元素相加)，返回累加值。</p><pre class="mw mx my mz gt na le nb nc aw nd bi"><span id="d925" class="ne lu iq le b gy nf ng l nh ni">//find sum of elements in the array<br/>var numberArray = [1,2,3,4,5,6,7,8,9,10];</span><span id="26cc" class="ne lu iq le b gy nj ng l nh ni"><strong class="le ir">//for version</strong><br/>var sum = 0;<br/>for (var counter=0; counter &lt; numberArray.length; counter++){<br/>     sum += numberArray[counter]<br/>}<br/>console.log(sum);</span></pre><p id="a416" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> Array.reduce </strong>当你想处理一个数组的所有元素，从中获得一个单一的值时，就要用到。Reduce在开始的时候有点难理解，但是一旦你理解了，它就很容易使用了。</p><p id="008f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">需要注意的是，当数组中没有项目时,<code class="fe lb lc ld le b">reduce()</code>不会执行该函数，并且该方法不会对原始数组进行任何更改。</p><blockquote class="op"><p id="7530" class="oq or iq bd os ot ou ov ow ox oy la dk translated"><code class="fe lb lc ld le b">reduce()</code>方法将数组简化为一个值。</p></blockquote><p id="f39e" class="pw-post-body-paragraph kd ke iq kf b kg oz ki kj kk pa km kn ko pb kq kr ks pc ku kv kw pd ky kz la ij bi translated"><code class="fe lb lc ld le b">Array.reduce</code>有两个参数，一个是reduce函数，另一个是称为累加器的初始值。它通过给出累加器值来调用每个元素的<code class="fe lb lc ld le b">reduce</code>函数。reduce <code class="fe lb lc ld le b">function</code>处理当前元素，更新累加器值，并将其传递给下一次迭代。在最后一个循环结束时，累加器成为最终结果。让我们用例子来探讨一下</p><pre class="mw mx my mz gt na le nb nc aw nd bi"><span id="c85a" class="ne lu iq le b gy nf ng l nh ni">//find sum of all elements in the array<br/>var numberArray = [1,2,3,4,5,6,7,8,9,10];</span><span id="7fab" class="ne lu iq le b gy nj ng l nh ni"><strong class="le ir">//Reduce version</strong><br/>var sum = numberArray.reduce(((acc, num) =&gt; acc + num), 0);<br/>console.log(sum);</span></pre></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><h1 id="b1d9" class="lt lu iq bd lv lw oj ly lz ma ok mc md me ol mg mh mi om mk ml mm on mo mp mq bi translated">功能组成</h1><p id="42d6" class="pw-post-body-paragraph kd ke iq kf b kg mr ki kj kk ms km kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">还有其他类似<code class="fe lb lc ld le b">every</code>、<code class="fe lb lc ld le b">slice</code>、<code class="fe lb lc ld le b">splice</code>、<code class="fe lb lc ld le b">some</code>、<code class="fe lb lc ld le b">concat</code>、<code class="fe lb lc ld le b">sort</code>的数组实用方法，大家应该都知道。使用正确的函数不仅可以使代码更加简洁，还可以使测试和扩展变得容易。另外，您正在使用这些函数编写未来代码。这些函数是所有浏览器都支持的本地JavaScript函数，并且速度越来越快。它还有助于组合更小的功能来创建更广泛的用例。</p><pre class="mw mx my mz gt na le nb nc aw nd bi"><span id="edcf" class="ne lu iq le b gy nf ng l nh ni">using evenNumbers and sum, we can easily fund sum of even numbersvar </span><span id="a1af" class="ne lu iq le b gy nj ng l nh ni">numberArray = [1,2,3,4,5,6,7,8,9,10];<br/>var FilterFn = (number =&gt; number%2===0);<br/>var squareMapFn = (number =&gt; number*number);<br/>var sumFn = ((sum, number) =&gt; sum + number);<strong class="le ir">var sumOfSquareOfEvenNumbers = numberArray<br/>                              .filter(FilterFn)<br/>                              .map(squareMapFn)<br/>                              .reduce(sumFn,0);<br/>console.log(sumOfSquareOfEvenNumbers)</strong></span></pre><p id="f045" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用传统的<code class="fe lb lc ld le b">for</code>循环编写上面的例子将会花费更多的代码行，这最终会使它变得不那么清晰。</p><div class="nk nl gp gr nm nn"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">排列</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">JavaScript数组类是一个全局对象，用于构造数组；哪些是高层次的…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">developer.mozilla.org</p></div></div><div class="nw l"><div class="pe l ny nz oa nw ob jw nn"/></div></div></a></div><h1 id="0a15" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">性能说明:</h1><p id="0240" class="pw-post-body-paragraph kd ke iq kf b kg mr ki kj kk ms km kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">Array.filter，map，有些性能和forEach一样。这些都比for/while循环稍慢。除非您正在处理性能关键的功能，否则使用上述方法应该没问题。有了JIT，JavaScript执行引擎变得非常快，而且一天比一天快。因此，开始在您的应用程序中利用这些方法。</p><p id="f18f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢您阅读我的文章。如果你认为它有用，请分享，喜欢，鼓掌，评论✌☺</p></div></div>    
</body>
</html>