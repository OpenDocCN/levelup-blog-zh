<html>
<head>
<title>Rust: Traits Explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">铁锈:特征解释</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/rust-traits-explained-e098532dc8ca?source=collection_archive---------10-----------------------#2022-12-30">https://levelup.gitconnected.com/rust-traits-explained-e098532dc8ca?source=collection_archive---------10-----------------------#2022-12-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="fc66" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">理解Rust的特质系统:定义和实现不同类型的共同行为指南</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/27f985263bba3747eabc6a34e4ea75cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0uJB2qBaaGR1biF82CBOgw.jpeg"/></div></div></figure><p id="7073" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Rust中的特征是一种指定一个类型可以实现的一组行为的机制。特征类似于其他编程语言中的接口，允许您定义一组方法，类型必须实现这些方法才能符合接口。</p><p id="c255" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然而，Rust的trait系统比许多其他语言的界面系统更加强大和灵活。例如，在Rust中，traits可以有泛型类型，并为它们定义的一些或所有方法提供默认实现。trait系统允许您定义许多类型都可以实现的更加灵活和可重用的抽象。</p><p id="f039" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在Rust中使用特征的一个主要优点是，它们允许您用相同的行为抽象不同的类型。当处理需要对各种类型进行操作的数据结构或算法时，Traits是很有优势的，因为它允许您编写与所使用的特定类型无关的代码。</p><p id="837d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">特征的另一个主要好处是它们是Rust类型系统的核心部分。Rust编译器可以使用特征来加强类型安全，并在编译时防止常见的编程错误。例如，Rust编译器会阻止你调用一个在trait中定义的方法，除非你能保证你调用它的类型实现了它。</p><p id="7705" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">总的来说，Rust的trait系统提供了一种强大而灵活的方式来定义和实现不同类型的通用行为。它是Rust类型系统的重要组成部分，支持创建可重用和类型安全的抽象。</p><h2 id="60a8" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">示例实现</h2><p id="e7f9" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">下面是如何在Rust中定义和使用特征的一个简单示例:</p><pre class="kp kq kr ks gt ly lz ma bn mb mc bi"><span id="b64e" class="md lb it lz b be me mf l mg mh">// Define a trait called `Summarize` with a single method called `summarize`<br/>trait Summarize {<br/>    fn summarize(&amp;self) -&gt; String;<br/>}<br/><br/>// Define a struct called `NewsArticle` with a `headline` and a `location` field<br/>struct NewsArticle {<br/>    headline: String,<br/>    location: String,<br/>}<br/><br/>// Implement the `Summarize` trait for `NewsArticle`<br/>impl Summarize for NewsArticle {<br/>    fn summarize(&amp;self) -&gt; String {<br/>        format!("{}, {}", self.headline, self.location)<br/>    }<br/>}<br/><br/>// Define a struct called `Tweet` with a `username` and a `message` field<br/>struct Tweet {<br/>    username: String,<br/>    message: String,<br/>}<br/><br/>// Implement the `Summarize` trait for `Tweet`<br/>impl Summarize for Tweet {<br/>    fn summarize(&amp;self) -&gt; String {<br/>        format!("{}: {}", self.username, self.message)<br/>    }<br/>}<br/><br/>// Define a function that takes an object that implements the `Summarize` trait<br/>fn summarize&lt;T: Summarize&gt;(item: T) -&gt; String {<br/>    item.summarize()<br/>}<br/><br/>fn main() {<br/> // Create some instances of `NewsArticle` and `Tweet`<br/> let article = NewsArticle {<br/>     headline: String::from("Penguins win the Stanley Cup Championship!"),<br/>     location: String::from("Pittsburgh, PA"),<br/> };<br/> <br/> let tweet = Tweet {<br/>     username: String::from("ice_hockey_fan123"),<br/>     message: String::from("Can't believe the Penguins actually won the Stanley Cup!"),<br/> };<br/> <br/> // Use the `summarize` function with both a `NewsArticle` and a `Tweet`<br/> println!("New article available! {}", summarize(article));<br/> println!("Tweet: {}", summarize(tweet));<br/>}</span></pre><p id="e3d8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该代码将输出:</p><pre class="kp kq kr ks gt ly lz ma bn mb mc bi"><span id="72b6" class="md lb it lz b be me mf l mi mh">New article available! Penguins win the Stanley Cup Championship!, Pittsburgh, PA<br/>Tweet: ice_hockey_fan123: Can't believe the Penguins actually won the Stanley Cup!</span></pre><p id="52f5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这个例子中，我们用一个名为<code class="fe mj mk ml lz b">summarize</code>的方法定义了一个名为<code class="fe mj mk ml lz b">Summarize</code>的特征，该方法引用<code class="fe mj mk ml lz b">self</code>并返回一个<code class="fe mj mk ml lz b">String</code>。然后我们为<code class="fe mj mk ml lz b">NewsArticle</code>和<code class="fe mj mk ml lz b">Tweet</code>结构实现了<code class="fe mj mk ml lz b">Summarize</code>特征，每个都实现了<code class="fe mj mk ml lz b">summarize</code>方法。</p><p id="4a16" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，我们定义了一个名为<code class="fe mj mk ml lz b">summarize</code>的函数，它接受一个实现了<code class="fe mj mk ml lz b">Summarize</code>特征的对象，并通过调用该对象上的<code class="fe mj mk ml lz b">summarize</code>方法返回一个<code class="fe mj mk ml lz b">String</code>。我们可以用一个<code class="fe mj mk ml lz b">NewsArticle</code>和一个<code class="fe mj mk ml lz b">Tweet</code>对象来使用这个函数，因为它们都实现了<code class="fe mj mk ml lz b">Summarize</code>特征。</p><h2 id="c8c6" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">泛型类型</h2><p id="9c16" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">Traits也可以有泛型类型和默认实现。以下是如何使用这些功能的示例:</p><pre class="kp kq kr ks gt ly lz ma bn mb mc bi"><span id="95e1" class="md lb it lz b be me mf l mg mh">// Define a trait called `Summary` with a generic type `T` and a method called `summarize`<br/>trait Summary&lt;T&gt; {<br/>    fn summarize(&amp;self) -&gt; T;<br/>}<br/><br/>// Define a struct called `NewsArticle` with a `headline` and a `location` field<br/>struct NewsArticle {<br/>    headline: String,<br/>    location: String,<br/>}<br/><br/>// Implement the `Summary` trait for `NewsArticle`<br/>impl Summary&lt;String&gt; for NewsArticle {<br/>    fn summarize(&amp;self) -&gt; String {<br/>        format!("{}, {}", self.headline, self.location)<br/>    }<br/>}<br/><br/>// Define a struct called `Tweet` with a `username` and a `message` field<br/>struct Tweet {<br/>    username: String,<br/>    message: String,<br/>}<br/><br/>// Implement the `Summary` trait for `Tweet`<br/>impl Summary&lt;usize&gt; for Tweet {<br/>    fn summarize(&amp;self) -&gt; usize {<br/>        self.message.len()<br/>    }<br/>}<br/><br/>// Define a function that takes an object that implements the `Summary` trait<br/>fn summarize&lt;T, U: Summary&lt;T&gt;&gt;(item: U) -&gt; T {<br/>    item.summarize()<br/>}<br/><br/>fn main() {<br/> // Create some instances of `NewsArticle` and `Tweet`<br/> let article = NewsArticle {<br/>     headline: String::from("Penguins win the Stanley Cup Championship!"),<br/>     location: String::from("Pittsburgh, PA"),<br/> };<br/> <br/> let tweet = Tweet {<br/>     username: String::from("ice_hockey_fan123"),<br/>     message: String::from("Can't believe the Penguins actually won the Stanley Cup!"),<br/> };<br/> <br/> // Use the `summarize` function with both a `NewsArticle` and a `Tweet`<br/> println!("New article available! {}", summarize(article));<br/> println!("Tweet length: {}", summarize(tweet));<br/>}</span></pre><p id="2fe8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该代码将输出:</p><pre class="kp kq kr ks gt ly lz ma bn mb mc bi"><span id="2071" class="md lb it lz b be me mf l mi mh">New article available! Penguins win the Stanley Cup Championship!, Pittsburgh, PA<br/>Tweet length: 56</span></pre><p id="7987" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这个例子中，我们用一个通用类型<code class="fe mj mk ml lz b">T</code>和一个名为<code class="fe mj mk ml lz b">summarize</code>的方法定义了<code class="fe mj mk ml lz b">Summary</code>特征，该方法引用<code class="fe mj mk ml lz b">self</code>并返回一个类型为<code class="fe mj mk ml lz b">T</code>的值。然后，我们为<code class="fe mj mk ml lz b">NewsArticle</code>和<code class="fe mj mk ml lz b">Tweet</code>结构实现了<code class="fe mj mk ml lz b">Summary</code>特征，每个结构都有自己的<code class="fe mj mk ml lz b">summarize</code>方法实现。<code class="fe mj mk ml lz b">NewsArticle</code>实现返回一个<code class="fe mj mk ml lz b">String</code>，而<code class="fe mj mk ml lz b">Tweet</code>实现返回一个<code class="fe mj mk ml lz b">usize</code>。</p><p id="1891" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们还定义了一个名为<code class="fe mj mk ml lz b">summarize</code>的函数，它接受一个类型为<code class="fe mj mk ml lz b">U</code>的对象，该对象为某个类型<code class="fe mj mk ml lz b">T</code>实现了<code class="fe mj mk ml lz b">Summary</code>特征，并返回一个类型为<code class="fe mj mk ml lz b">T</code>的值。这允许我们对一个<code class="fe mj mk ml lz b">NewsArticle</code>和一个<code class="fe mj mk ml lz b">Tweet</code>对象使用<code class="fe mj mk ml lz b">summarize</code>函数，即使它们对<code class="fe mj mk ml lz b">summarize</code>方法有不同的实现并返回不同的类型。</p><p id="d9f4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望这阐明了特征在Rust中是如何工作的，以及如何使用它们来定义和实现不同类型的常见行为。</p><h2 id="2c5d" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">你想联系吗？</h2><p id="6350" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">如果你想联系我，请通过LinkedIn联系我。</p><p id="c598" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另外，请随意查看我的书籍推荐📚。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><div class="kp kq kr ks gt mu"><a href="https://mr-pascal.medium.com/my-book-recommendations-4b9f73bf961b" rel="noopener follow" target="_blank"><div class="mv ab fo"><div class="mw ab mx cl cj my"><h2 class="bd iu gy z fp mz fr fs na fu fw is bi translated">我的书籍推荐</h2><div class="nb l"><h3 class="bd b gy z fp mz fr fs na fu fw dk translated">在接下来的章节中，你可以找到我对所有日常生活话题的书籍推荐，它们对我帮助很大。</h3></div><div class="nc l"><p class="bd b dl z fp mz fr fs na fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="nd l"><div class="ne l nf ng nh nd ni ky mu"/></div></div></a></div><div class="nj nk gp gr nl mu"><a href="https://mr-pascal.medium.com/membership" rel="noopener follow" target="_blank"><div class="mv ab fo"><div class="mw ab mx cl cj my"><h2 class="bd iu gy z fp mz fr fs na fu fw is bi translated">通过我的推荐链接加入Medium—Pascal Zwikirsch</h2><div class="nb l"><h3 class="bd b gy z fp mz fr fs na fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nc l"><p class="bd b dl z fp mz fr fs na fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="nd l"><div class="nm l nf ng nh nd ni ky mu"/></div></div></a></div></div></div>    
</body>
</html>