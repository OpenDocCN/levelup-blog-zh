<html>
<head>
<title>Using the Fetch API in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在JavaScript中使用Fetch API</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/using-the-fetch-api-in-javascript-1de7c2fe673b?source=collection_archive---------8-----------------------#2021-05-31">https://levelup.gitconnected.com/using-the-fetch-api-in-javascript-1de7c2fe673b?source=collection_archive---------8-----------------------#2021-05-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="95d2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">什么是获取API，如何使用它</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a378b07984d8e0c30ba6070ba13593e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DfDTPR6MutOMMmg3a1Q-EA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">来自<a class="ae ky" href="https://www.pexels.com/@zante" rel="noopener ugc nofollow" target="_blank"> Brixiv </a> @ <a class="ae ky" href="https://www.pexels.com/photo/field-summer-animal-dog-6527911/" rel="noopener ugc nofollow" target="_blank">像素</a></figcaption></figure><h2 id="7576" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">什么是fetch API？</strong></h2><p id="876b" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">现代软件开发中一些最常见的任务包括与API通信。大多数编程语言都有一个内置的方法或包，使它们能够向API发出请求。获取API是JavaScript实现这一点的方式。Fetch允许您用相当简单的语法发出GET、PUT、PATCH、POST和DELETE请求。</p><h2 id="0d04" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">简单的GET请求示例:</strong></h2><p id="1d8f" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">当您想要从API中检索数据时，您将使用GET请求。下面是一个简单的GET请求示例。我们将使用免费的API <a class="ae ky" href="https://jsonplaceholder.typicode.com/" rel="noopener ugc nofollow" target="_blank"> JSON占位符</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="093a" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ms mf mg lm mt mi mj lq mu ml mm mn im bi translated"><strong class="lx iu">注意:如果您尝试在您的终端内用</strong> <code class="fe mv mw mx my b"><strong class="lx iu">node</strong></code> <strong class="lx iu">运行</strong> <code class="fe mv mw mx my b"><strong class="lx iu">fetch</strong></code> <strong class="lx iu">，您可能会得到一个</strong> <code class="fe mv mw mx my b"><strong class="lx iu">fetch is not defined</strong></code> <strong class="lx iu">错误。这是因为默认情况下，fetch由浏览器的JavaScript引擎解释，而不是由NodeJS解释。要解决这个问题，使用</strong> <a class="ae ky" href="https://stackoverflow.com/questions/48433783/referenceerror-fetch-is-not-defined" rel="noopener ugc nofollow" target="_blank"> <strong class="lx iu">这个</strong> </a> <strong class="lx iu">堆栈溢出。</strong></p><h2 id="aedc" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">解剖的要求</strong></h2><p id="1a4c" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">获取请求的基本结构是<code class="fe mv mw mx my b">fetch().then().then().</code></p><p id="8e9c" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ms mf mg lm mt mi mj lq mu ml mm mn im bi translated"><code class="fe mv mw mx my b">fetch()</code>部分接受将要点击的API URL的一个参数。</p><p id="448c" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ms mf mg lm mt mi mj lq mu ml mm mn im bi translated">带有<code class="fe mv mw mx my b">res =&gt; res.json()</code>的第一个<code class="fe mv mw mx my b">.then()</code>将以json格式返回API响应的主体。</p><p id="eff7" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ms mf mg lm mt mi mj lq mu ml mm mn im bi translated">第二个<code class="fe mv mw mx my b">.then()</code>是放置应该如何处理返回数据的逻辑的地方。在这种情况下，我们只是控制台记录它。但是，您可以将数据分配给变量或DOM元素。</p><p id="b90c" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ms mf mg lm mt mi mj lq mu ml mm mn im bi translated">上面的fetch请求应该返回一些JSON数据，其中包含一个伪todo项。</p><h2 id="950d" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">带有标题的GET请求示例</strong></h2><p id="a746" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">在许多情况下，您可能需要通过GET请求发送一个身份验证令牌。在这些情况下，向请求添加头部是必要的。报头可以以对象的形式添加到请求的<code class="fe mv mw mx my b">fetch</code>部分。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mo mp l"/></div></figure><h2 id="ab9e" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">删除请求示例</strong></h2><p id="059b" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">删除请求的结构非常类似于GET。您只需要指定您将使用删除请求，因为fetch默认使用GET。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="28ed" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ms mf mg lm mt mi mj lq mu ml mm mn im bi translated">这个请求将返回一个空的JSON对象，因为请求的对象不再存在。</p><p id="522c" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ms mf mg lm mt mi mj lq mu ml mm mn im bi translated">在需要进行身份验证来删除对象的情况下，可以像在GET请求中那样传递消息头。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mo mp l"/></div></figure><h2 id="3676" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">发布、修补和上传请求的示例</strong></h2><p id="fff2" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">POST、PATCH和PUT请求都非常相似。唯一的区别是您需要指定要发送的数据，并将其转换为JSON。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mo mp l"/></div></figure><h2 id="6572" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">请求中的错误</strong></h2><p id="a521" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">通过将一个<code class="fe mv mw mx my b">.catch()</code>承诺链接到请求的末尾，可以很容易地处理请求时的错误。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mo mp l"/></div></figure></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="29ed" class="ng la it bd lb nh ni nj le nk nl nm lh jz nn ka ll kc no kd lp kf np kg lt nq bi translated">分级编码</h1><p id="6cf3" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">感谢您成为我们社区的一员！<a class="ae ky" href="https://www.youtube.com/channel/UC3v9kBR_ab4UHXXdknz8Fbg?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank">订阅我们的YouTube频道</a>或者加入<a class="ae ky" href="https://skilled.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="lx iu"> Skilled.dev编码面试课程</strong> </a>。</p><div class="nr ns gp gr nt nu"><a href="https://skilled.dev" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">编写面试问题+获得开发工作</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">掌握编码面试的过程</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">技术开发</p></div></div><div class="od l"><div class="oe l of og oh od oi ks nu"/></div></div></a></div></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><p id="3ecd" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ms mf mg lm mt mi mj lq mu ml mm mn im bi translated">如果你喜欢这篇博文，并且觉得它很有用，可以考虑为它鼓掌，并在Medium上关注我。此外，考虑使用我的推荐链接在此注册Medium <a class="ae ky" href="https://tarricsookdeo.medium.com/subscribe" rel="noopener">。只要你还是会员，我就能得到一点回扣。如果你愿意，你也可以在这里给我买杯咖啡。非常感谢！</a></p></div></div>    
</body>
</html>