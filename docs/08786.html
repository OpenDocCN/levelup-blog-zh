<html>
<head>
<title>NetArchTest — Enforce Architecture and Design Rules in Your .NET Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NetArchTest —在您的。网络应用</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/netarchtest-enforce-architecture-and-design-rules-in-your-application-e6c6c9f5c97e?source=collection_archive---------2-----------------------#2021-06-05">https://levelup.gitconnected.com/netarchtest-enforce-architecture-and-design-rules-in-your-application-e6c6c9f5c97e?source=collection_archive---------2-----------------------#2021-06-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f80b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过编写单元测试。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3c94a044c2609a5c2e23186a0c56dab3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HQz87rWP01gObhgQ"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">约书亚·阿拉贡在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="7251" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天，我想快速浏览一下迷人的<a class="ae ky" href="https://github.com/BenMorris/NetArchTest" rel="noopener ugc nofollow" target="_blank"> NetArchTest </a>库，我在几个月前开始在我的项目中使用它，通过编写单元测试来执行各种特定于架构应用程序的规则和约定。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="0083" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">NetArchTest库允许您编写在应用程序中强制执行架构和设计规则的单元测试。您可以测试应用程序的不变性、封装、类型依赖、命名约定、项目分层等等。</p><p id="5d1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看一个快速演示。</p><p id="c4ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个包含两个简单的。NET核心项目:<strong class="lb iu">域</strong>和<strong class="lb iu">架构测试</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/ab61dd1241b4462aef2bda000f759553.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/format:webp/1*Li4WaffZ95RlgPCVtgo_oQ.png"/></div></figure><p id="7032" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">领域层包含三个简单的类:<code class="fe md me mf mg b">ValueObject</code>、<code class="fe md me mf mg b">Currency</code>和<code class="fe md me mf mg b">Discount.</code>下面是实现:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="bc3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，<code class="fe md me mf mg b">Currency</code>和<code class="fe md me mf mg b">Discount</code>是不可变的数据类型，因为它们的状态在创建时只初始化一次，并且由于缺少设置器，没有办法改变状态。</p><p id="ded9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，坏消息是编译器不阻止开发人员向值对象属性添加公共设置器，所以通常这样的违反只能在代码审查期间检测到。</p><p id="4bb6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是NetArchTest可以让开发人员的生活变得更轻松的地方。</p><p id="782d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">architectural tests</strong>project为我们的应用程序中的所有值对象实施不变性规则。这是一个简单的xUnit测试项目，带有<a class="ae ky" href="https://www.nuget.org/packages/NetArchTest.Rules/" rel="noopener ugc nofollow" target="_blank"> NetArchTest。规则</a>包已安装。</p><p id="6b56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是单元测试的样子，它检查值类型是否确实是不可变的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="f1da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果值对象设置器是私有的，测试将是绿色的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/cf330c1b2e6e6f39ea1558eca05d7e9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gIAKMh-OJz9A61stByVzDg.png"/></div></div></figure><p id="5018" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们向<code class="fe md me mf mg b">Currency</code>值对象的<code class="fe md me mf mg b">Code</code>属性添加一个公共setter，测试将会失败。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/c2f8b1ef5c341249c2f7ee46845420e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PLQmAaVLRh6zFO4i49H0rw.png"/></div></div></figure><p id="84d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">NetArchTest库有更多的规则，包括你可以使用的自定义规则。以下是该库可以测试的其他几个示例:</p><ul class=""><li id="d9fe" class="ml mm it lb b lc ld lf lg li mn lm mo lq mp lu mq mr ms mt bi translated">域层在基础结构层上没有引用。</li><li id="d208" class="ml mm it lb b lc mu lf mv li mw lm mx lq my lu mq mr ms mt bi translated">不是聚合根对象的实体不依赖于其他聚合。</li><li id="38d5" class="ml mm it lb b lc mu lf mv li mw lm mx lq my lu mq mr ms mt bi translated">文件夹或项目中的某些类型标有internal关键字。</li><li id="fcbb" class="ml mm it lb b lc mu lf mv li mw lm mx lq my lu mq mr ms mt bi translated">IQueryHandler接口的所有实现都以名称中的“QueryHandler”结尾。</li><li id="7aff" class="ml mm it lb b lc mu lf mv li mw lm mx lq my lu mq mr ms mt bi translated">项目中没有以“Manager”或“Helper”结尾的类。</li></ul><p id="cc2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要了解更多信息，您可以查看GitHub页面。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="5af5" class="mz na it bd nb nc nd dn ne nf ng dp nh li ni nj nk lm nl nm nn lq no np nq nr bi translated">我的其他文章</h2><div class="ns nt gp gr nu nv"><a rel="noopener  ugc nofollow" target="_blank" href="/5-asp-net-core-open-source-projects-to-gain-practical-knowledge-24fbf9164230"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd iu gy z fp oa fr fs ob fu fw is bi translated">5个ASP.NET核心开源项目，获取实用知识</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">在实践中学习。</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj ks nv"/></div></div></a></div><div class="ns nt gp gr nu nv"><a rel="noopener  ugc nofollow" target="_blank" href="/5-ways-to-clone-an-object-in-c-d1374ec28efa"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd iu gy z fp oa fr fs ob fu fw is bi translated">在C#中克隆对象的5种方法</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">各有利弊</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oe l"><div class="ok l og oh oi oe oj ks nv"/></div></div></a></div><div class="ns nt gp gr nu nv"><a rel="noopener  ugc nofollow" target="_blank" href="/develop-these-few-habits-to-become-an-outstanding-software-engineer-8117a155af77"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd iu gy z fp oa fr fs ob fu fw is bi translated">养成这几个习惯，成为一名优秀的软件工程师</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">你所需要的只是纪律。</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oe l"><div class="ol l og oh oi oe oj ks nv"/></div></div></a></div></div></div>    
</body>
</html>