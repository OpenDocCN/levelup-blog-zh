<html>
<head>
<title>Create a Python Development Environment with VS Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用VS代码创建一个Python开发环境</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-development-environment-with-vs-code-fe66f3892159?source=collection_archive---------1-----------------------#2020-06-13">https://levelup.gitconnected.com/create-development-environment-with-vs-code-fe66f3892159?source=collection_archive---------1-----------------------#2020-06-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6ab7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">在Windows下用Linux终端开发</em></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/82895c2125c58a12b2216b8098eab2fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CH321gHadICvDU-922OeWA.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">VS代码中的MobaXterm Teminal和MobaXterm</figcaption></figure><p id="3ba6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇文章中，让我们看看如何使用Visual Studio代码在Windows中建立一个干净的环境。</p><p id="5894" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们需要从<a class="ae lc" href="https://code.visualstudio.com/#alt-downloads" rel="noopener ugc nofollow" target="_blank">官方网站</a>下载VS代码安装程序。因为我更喜欢以非管理员用户的身份尝试一切，所以下载64位用户安装程序1.46.0版本。运行下载的“VSCodeUserSetup-x64–1 . 46 . 0 . exe”，用这些选项安装:位置-“C:\ Users \<strong class="jp ir">用户名</strong> \Apps\VSCode”，无开始菜单文件夹，选择所有附加任务。启动VS代码，我们有一个很好的，干净的编辑器用于我们的开发。</p><p id="11ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您不想将您的所有数据使用情况和错误共享给微软，请打开设置<strong class="jp ir">文件</strong> &gt; <strong class="jp ir">首选项</strong> &gt; <strong class="jp ir">设置</strong>，搜索<code class="fe ld le lf lg b">telemetry</code>，取消选中<strong class="jp ir">遥测:启用遥测</strong>设置。</p><p id="875a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当你打开VS代码时，你会看到欢迎标签。在自定义部分点击安装Python支持，这将安装VS代码的Python扩展。</p><p id="d665" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当您打开新终端(<strong class="jp ir">终端</strong> &gt; <strong class="jp ir">新终端)</strong>时，根据您的系统，我们可以看到Windows Power Shell或命令提示符。我更喜欢使用Linux命令，而不是Windows命令。让我们看看如何更改默认终端。</p><h1 id="bd6c" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">MobaXterm</h1><p id="18fa" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">有许多<a class="ae lc" href="https://www.puttygen.com/windows-terminal-emulators" rel="noopener ugc nofollow" target="_blank">选项</a>可用于在Windows中获得Linux终端，如PuTTY、Git Bash、WSL、MobaXterm、Cygwin。MobaXterm是强大的，它提供了其他很酷的功能，如文件浏览器，终端，sftp，X服务器等等。下载便携版<a class="ae lc" href="https://mobaxterm.mobatek.net/download-home-edition.html" rel="noopener ugc nofollow" target="_blank"> MobaXterm家庭版v20.4 </a>。将下载的zip文件解压到自己喜欢的位置:“C:\ Users<strong class="jp ir">\ UserName</strong>\ Apps \ mobax term”。您可以选择任何文件夹，但要确保路径中没有空格，因为Unix/Linux文件系统不喜欢路径中有空格。在这个文件夹中，创建另一个名为“slash”的空文件夹。打开MobaXterm可执行文件。我们需要更新一些设置，以便在每次重启MobaXterm时保留我们的首选项/应用程序。打开配置(<strong class="jp ir">设置&gt;配置&gt;通用</strong>，选择“斜杠”文件夹为根目录，选择“C:\Users <strong class="jp ir"> \UserName </strong>为主目录。然后它会要求重启应用程序。单击“启动本地终端”可以看到熟悉的bash终端。</p><h1 id="7828" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">将Windows路径添加到MobaXterm</h1><p id="ddda" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">如果要从MobaXterm打开Windows应用，在MobaXterm <strong class="jp ir">设置&gt;终端中选择“使用Windows路径”。</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mk"><img src="../Images/20fa9e8df6bddceeaf6ba990828e8ebe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MGkH6M_OshF235xSnBOdmQ.png"/></div></div></figure><h1 id="d67c" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">安装附加软件包</h1><p id="82e9" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">默认情况下，MobaXterm包含了大多数常用命令。如果您需要任何额外的包/命令，我们可以很容易地添加到它。你可以访问他们的插件页面，下载“. mxt3”文件，并将它们移动到MobaXterm_所在的安装文件夹中。exe存在，请重新启动终端以使命令生效。您也可以安装其他命令，例如make，启动MobaXterm，单击“软件包”按钮，搜索您需要的软件包，然后单击安装/更新按钮。这将下载必要的库和其他依赖项，并安装软件包。一旦安装完成，关闭MobaXterm并在VS代码中打开一个新的终端，现在你可以检查像“make -v”这样的命令。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ml"><img src="../Images/4a10df9d8c999995a404c15d5ac941ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PSkaFA7S5Tc36xhgWDe-CQ.png"/></div></div></figure><h1 id="4afc" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">在VS代码中更新终端</h1><p id="2465" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">现在是最后也是最重要的部分，在VS代码中指定默认终端。首先，我们需要在上面创建的“slash”文件夹中找到bash.exe。应该是“slash\bin\bash.exe”。打开VS代码设置(<strong class="jp ir">文件</strong> &gt; <strong class="jp ir">首选项</strong> &gt; <strong class="jp ir">设置</strong>)，点击右上角的“打开设置(JSON)”按钮。它将打开“settings.json”文件，添加下面的行并保存该文件，以定义用于windows的集成shell(将完整路径写入“slash”文件夹)和shellArgs，从而使bash能够作为登录shell运行。</p><pre class="kn ko kp kq gt mm lg mn mo aw mp bi"><span id="045f" class="mq li iq lg b gy mr ms l mt mu">// MobaXterm Bash<br/>"terminal.integrated.shell.windows": "C:\\Users\\<strong class="lg ir">UserName</strong>\\Apps\\MobaXterm\\slash\\bin\\bash.exe",<br/>"terminal.integrated.shellArgs.windows": ["--login"],</span></pre><p id="24c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">保存设置JSON文件，重启VS代码，查看VS代码中的MobaXterm终端。</p><p id="c6c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还可以使用VS代码设置在MobaXterm终端中定义环境变量。</p><pre class="kn ko kp kq gt mm lg mn mo aw mp bi"><span id="6856" class="mq li iq lg b gy mr ms l mt mu">// Define Environment Variables<br/>"terminal.integrated.env.windows": {<br/>   "dev_dir": "C:\\Users\\UserName\\Development"<br/>},</span></pre><p id="a6a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl"> shell </em>、<em class="kl"> shellArgs </em>、<em class="kl"> env </em>和<em class="kl"> cmd </em>终端设置都支持解析<a class="ae lc" href="https://code.visualstudio.com/docs/editor/variables-reference" rel="noopener ugc nofollow" target="_blank">变量</a>。</p><pre class="kn ko kp kq gt mm lg mn mo aw mp bi"><span id="9cb3" class="mq li iq lg b gy mr ms l mt mu">// Open the terminal in the currently opened file's directory<br/>"terminal.integrated.cwd": "${fileDirname}"</span></pre><h1 id="05e1" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">安装Python</h1><p id="86a2" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">为了在Windows中获得Python，我建议安装Anaconda个人版，而不是安装Python软件。Anaconda个人版是一个免费的、易于安装的包管理器、环境管理器和Python发行版，包含1500多个开源包，并有免费的社区支持。Anaconda是平台无关的，所以无论您是在Windows、macOS还是Linux上都可以使用它。</p><p id="d377" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安装Anaconda个人版是如此简单，你<a class="ae lc" href="https://www.anaconda.com/download/#windows" rel="noopener ugc nofollow" target="_blank">下载</a>安装程序(Anaconda 3–2020.07-Windows-x86 _ 64 . exe)和<a class="ae lc" href="https://docs.anaconda.com/anaconda/install/windows/" rel="noopener ugc nofollow" target="_blank">按照指示</a>。如果您按照指示进行操作，Anaconda3不会添加到Path环境变量中。</p><p id="ed1b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您想在MobaXterm中使用anaconda/conda/python命令，您需要向Path环境变量添加几个路径。这些路径是(<strong class="jp ir">而不是文件夹Anaconda3，可能是Anaconda2，这取决于Windows PC上的Anaconda版本</strong>):</p><pre class="kn ko kp kq gt mm lg mn mo aw mp bi"><span id="e741" class="mq li iq lg b gy mr ms l mt mu">C:\Users\<!-- -->UserName<!-- -->\Apps\Anaconda3<br/>C:\Users\<!-- -->UserName<!-- -->\Apps\Anaconda3\Scripts<br/>C:\Users\<!-- -->UserName<!-- -->\Apps\Anaconda3\Library\bin</span></pre><p id="b065" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果在安装Anaconda时已经将它们添加到Windows路径中，那么可以忽略这些命令。为了将这些添加到Path环境变量中，在VSCode中打开Terminal(<strong class="jp ir">Terminal</strong>&gt;<strong class="jp ir">New Terminal)</strong>并输入以下命令:根据您的Anaconda安装路径更新路径。这将创建/编辑您的”。bash_profile”放在$HOME文件夹中。</p><pre class="kn ko kp kq gt mm lg mn mo aw mp bi"><span id="14cf" class="mq li iq lg b gy mr ms l mt mu">echo "export PATH=\"/home/UserName/Apps/Anaconda3:/home/UserName/Apps/Anaconda3/Scripts:/home/UserName/Apps/Anaconda3/Library/bin:$PATH\"" &gt;&gt; .bash_profile</span></pre><p id="8508" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">关闭终端并重新打开，使用以下命令检查conda/python版本。如果这些命令有效，您就可以在终端中使用Python了。</p><pre class="kn ko kp kq gt mm lg mn mo aw mp bi"><span id="c004" class="mq li iq lg b gy mr ms l mt mu">conda --version<br/>python.exe --version</span><span id="616c" class="mq li iq lg b gy mv ms l mt mu"># Update conda<br/>conda update -n base -c defaults conda</span></pre><h1 id="2276" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">康达环境</h1><p id="d6de" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">对不同版本的Python和/或包使用不同的conda环境总是明智的。您可以通过运行以下命令为想要使用的每个Python版本创建一个单独的conda环境:</p><pre class="kn ko kp kq gt mm lg mn mo aw mp bi"><span id="df5f" class="mq li iq lg b gy mr ms l mt mu">conda create --name mypy37env python=3.7</span></pre><p id="36f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有关创建和管理conda环境的更多详细信息，请查看本<a class="ae lc" href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html" rel="noopener ugc nofollow" target="_blank">用户指南</a>。</p><h1 id="b340" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">激活康达环境</h1><p id="5eae" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">由于Windows和MobaXterm中的文件夹路径不同，以及DOS和Unix中的新行字符不同，您可能会在使用conda命令(如activate/deactivate)时遇到一些问题。如果您遇到这些问题，请在终端中运行以下命令(替换环境名称)，为每个新环境创建一个脚本文件:</p><pre class="kn ko kp kq gt mm lg mn mo aw mp bi"><span id="1131" class="mq li iq lg b gy mr ms l mt mu">conda shell.posix activate <strong class="lg ir">mypy37env</strong> <!-- -->&gt; /home/<strong class="lg ir">UserName</strong>/<strong class="lg ir">mypy37env</strong>.sh<br/>dos2unix /home/<strong class="lg ir">UserName</strong>/<strong class="lg ir">mypy37env</strong>.sh<br/>. <!-- -->/home/<strong class="lg ir">UserName</strong>/<strong class="lg ir">mypy37env</strong>.sh</span></pre><p id="df81" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面的前两个命令只需要一次，所以下次当您想要切换环境时，只需运行最后一个命令。如果您想每次都使用这个环境，您可以将它添加到您的<strong class="jp ir"> bash_profile </strong>文件中，如下所示。</p><pre class="kn ko kp kq gt mm lg mn mo aw mp bi"><span id="2315" class="mq li iq lg b gy mr ms l mt mu">echo ". /home/<strong class="lg ir">UserName</strong>/<strong class="lg ir">mypy37env</strong>.sh" &gt;&gt; ~/.bash_profile</span></pre><p id="79c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在将它添加到bash_profile文件之后，您需要关闭终端并重新打开，以查看您的终端在这个环境中启动的情况。您可以使用“conda info”命令进行确认。</p><h1 id="4bdf" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">选择Python解释器</h1><p id="fe9c" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">我们需要告诉VS代码对任何打开的python文件使用哪个Python解释器。让我们使用File-&gt;New File创建一个空文件，并输入简单的python print语句，如下所示:</p><pre class="kn ko kp kq gt mm lg mn mo aw mp bi"><span id="5f3e" class="mq li iq lg b gy mr ms l mt mu">print("Welcome to Python in VS Code!")</span></pre><p id="8748" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当您将这个文件保存为fileName.py时，VS代码会显示一个选择解释器的警告。当您点击“选择Python解释器”按钮时，它将显示所有可用的Python解释器，包括您在命令面板中创建的conda环境。为此选择“mypy37env”。选择将显示在VS代码窗口的左下角。然后你会看到另一个安装“<a class="ae lc" href="http://pylint.pycqa.org/en/latest/" rel="noopener ugc nofollow" target="_blank"> pylint </a>的警告，这是一个检查代码错误的工具，帮助你遵循编码标准。点击安装并选择“使用conda安装”，它将打开一个终端并在所选的Conda环境中安装必要的软件包。</p><p id="bb3c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们需要告诉VS代码当一个新的终端打开时不要激活conda环境，因为我们已经在上面的<strong class="jp ir"> bash_profile </strong>文件中添加了激活脚本。</p><pre class="kn ko kp kq gt mm lg mn mo aw mp bi"><span id="ddc2" class="mq li iq lg b gy mr ms l mt mu">// Disable activating conda environment in new terminal<br/>"python.terminal.activateEnvironment": false,</span></pre><h1 id="a21c" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">Git版本控制设置</h1><p id="8a4f" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">完成开发环境设置的最后也是最重要的一步是Git设置。VS代码包括对Git和源代码控制的支持。MobaXterm安装了Git，所以我们只需要告诉VS代码使用它进行版本控制。打开VS Code settings.json文件，添加下面几行来定义git路径并保存文件。关于在VS代码中使用版本控制的更多细节在<a class="ae lc" href="https://code.visualstudio.com/docs/editor/versioncontrol" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><pre class="kn ko kp kq gt mm lg mn mo aw mp bi"><span id="dddf" class="mq li iq lg b gy mr ms l mt mu">// MobaXterm Git<br/>"git.path": "C:\\Users\\<strong class="lg ir">UserName</strong>\\Apps\\MobaXterm\\slash\\bin\\git.exe",</span></pre><p id="e2a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以<a class="ae lc" href="http://git config --global credential.helper wincred" rel="noopener ugc nofollow" target="_blank">使用SSH </a>连接到GitHub，将所有的存储库从我们的计算机推到远程。这将有助于我们在每次访问GitHub时无需提供您的用户名和个人访问令牌。我们将使用MobaXterm终端来运行所有这些命令。</p><p id="2f28" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就完成了为Python开发设置VS代码的过程。</p><h1 id="cbf4" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">结论</h1><p id="faad" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">VS代码和MobaXterm本身就是非常强大的工具。将两者结合在一个环境中给了我们许多在单一开发环境中工作的机会。</p><p id="861c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一篇文章:<a class="ae lc" href="https://medium.com/@nsanka/use-vs-code-for-remote-development-366bdc217977" rel="noopener">使用VS代码进行远程开发</a></p></div></div>    
</body>
</html>