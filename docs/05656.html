<html>
<head>
<title>Learning JavaScript: Introduction to Classes Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习JavaScript:类简介第2部分</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/learning-javascript-introduction-to-classes-part-2-c6fb6e40b844?source=collection_archive---------20-----------------------#2020-09-17">https://levelup.gitconnected.com/learning-javascript-introduction-to-classes-part-2-c6fb6e40b844?source=collection_archive---------20-----------------------#2020-09-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/0652f146459db1a2b7cd22dee598b044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iQt2LugeoMhXVKKx"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@lum3n?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> LUM3N </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="6fc5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我的上一篇文章中，我讨论了如何用JavaScript创建经典类对象。在本文中，我将通过查看一些高级概念来继续讨论——作为一级对象的类、计算成员名和静态成员变量。</p><h1 id="004d" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">类是一级对象</h1><p id="758f" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">一级对象可以是函数参数、函数的返回值，也可以像数字和字符串这样的原始数据那样分配给变量。</p><p id="7772" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们从类对象被赋给变量开始。下面的示例演示了如何将匿名类表达式赋给变量，从而创建一个单独的类。代码如下:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4e61" class="mq lf it mm b gy mr ms l mt mu">let MyMath = new class {<br/>  get PI() {<br/>    return 3.14159;<br/>  }<br/>}</span><span id="9518" class="mq lf it mm b gy mv ms l mt mu">let radius = 5;<br/>let area = MyMath.PI * (radius * radius);<br/>print(`The area of the circle with radius 5 is ${area}.`);</span></pre><p id="5574" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个程序创建了一个类，可以用来存储数学常数和数学函数。通过使用类表达式创建具有一个访问器属性的类来创建该类，该属性是一个返回pi值的getter。</p><p id="ec9f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下一个例子演示了如何将一个类对象作为函数参数传递，并让一个类作为函数返回值返回。代码如下:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="6ee9" class="mq lf it mm b gy mr ms l mt mu">function createObject(classDef) {<br/>  return new classDef();<br/>}</span><span id="e4a9" class="mq lf it mm b gy mv ms l mt mu">let newObject = createObject(class {<br/>  greet() {<br/>    print("Hello, world!");<br/>  }<br/>});</span><span id="6647" class="mq lf it mm b gy mv ms l mt mu">newObject.greet(); // displays Hello, world!</span></pre><p id="5a59" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mw mx my mm b">createObject</code>函数将一个类定义作为参数，并使用该类定义返回一个新的实例对象。通过用只有一个方法<code class="fe mw mx my mm b">greet</code>的匿名类定义调用<code class="fe mw mx my mm b">createObject</code>来创建<code class="fe mw mx my mm b">newObject</code>。通过从<code class="fe mw mx my mm b">newObject</code>调用greet方法显示问候语。</p><p id="d1d5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当像类对象和函数这样的特性可以用作一级对象时，可以看出一个强大的编程语言的标准之一。基于如何使用类对象，JavaScript显然是一种强大的编程语言。我还应该提到，JavaScript函数也是一流的，这更加证明了JavaScript的强大。</p><h1 id="34f4" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">计算成员名称</h1><p id="eaa9" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">通常，类方法是通过点运算符访问的，如下例所示:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="0346" class="mq lf it mm b gy mr ms l mt mu">Point p1(1,2);<br/>print(pt.getX());</span></pre><p id="ecf1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，您可以使用方括号来定义将被计算的类方法。当访问该方法时，括号中的名称将被替换为一个值。</p><p id="1ab9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要使用计算成员名，请将成员名放在定义的括号中，如下所示:</p><p id="0cbf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mz">【方法名】(){ <br/> //方法定义<br/> } </em></p><p id="8c89" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是一个简化的<code class="fe mw mx my mm b">Point</code>类的例子:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="8e67" class="mq lf it mm b gy mr ms l mt mu">let methodName = "getPoint";</span><span id="176b" class="mq lf it mm b gy mv ms l mt mu">class Point {<br/>  constructor(x,y) {<br/>    this.x = x;<br/>    this.y = y;<br/>    Point.count++;<br/>  }</span><span id="1bca" class="mq lf it mm b gy mv ms l mt mu">  [methodName]() {<br/>    print(`x: ${this.x}, y: ${this.y}`);<br/>  }<br/>}</span></pre><p id="204a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是一个简短的测试程序:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="36da" class="mq lf it mm b gy mr ms l mt mu">let p1 = new Point(1,2);<br/>p1.getPoint(); // displays x: 1, y: 2</span></pre><p id="892a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您也可以将计算成员名称与getters和setters一起使用:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="d084" class="mq lf it mm b gy mr ms l mt mu">let propName = "getX";</span><span id="28a4" class="mq lf it mm b gy mv ms l mt mu">class Point {<br/>  constructor(x,y) {<br/>    this.x = x;<br/>    this.y = y;<br/>  }</span><span id="0a52" class="mq lf it mm b gy mv ms l mt mu">  get [propName]() {<br/>    return this.x;<br/>  }</span><span id="1d8d" class="mq lf it mm b gy mv ms l mt mu">  get [propName]() {<br/>    return this.y;<br/>  }</span><span id="913f" class="mq lf it mm b gy mv ms l mt mu">  set [propName](value) {<br/>    this.x = value;<br/>  }</span><span id="645b" class="mq lf it mm b gy mv ms l mt mu">  set [propName](value) {<br/>    this.y = value;<br/>  }<br/>}</span></pre><h1 id="e879" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">静态成员方法</h1><p id="c6b1" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">有时你想定义一个必须从类本身调用的方法，而不是通过类构造函数。这就是所谓的静态方法。您可能还希望定义一个与类的所有实例相关的属性，而不仅仅是一个实例，例如在程序运行期间创建的所有对象的计数。这就是所谓的静态属性。在JavaScript中我们可以做到这两个。</p><p id="a1ed" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">静态方法是在类定义中通过用关键字static开始声明来定义的。给定前面对一个<code class="fe mw mx my mm b">Point</code>对象的定义，下面的代码向该类添加了一个静态的<code class="fe mw mx my mm b">create</code>方法，这样我们就可以在不调用构造函数的情况下创建新的<code class="fe mw mx my mm b">Point</code>对象:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="b929" class="mq lf it mm b gy mr ms l mt mu">static create(x,y) {<br/>  return new Point(x,y);<br/>}</span></pre><p id="e1fd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">必须使用<code class="fe mw mx my mm b">Point</code>类而不是<code class="fe mw mx my mm b">Point</code>的实例来调用该方法，如下行所示:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="fa49" class="mq lf it mm b gy mr ms l mt mu">let p1 = Point.create(2,3);</span></pre><p id="3ac4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们通过取出构造函数并强迫类的用户调用create方法来修改<code class="fe mw mx my mm b">Point</code>类定义，我们就实现了OOP工厂方法模式。请到<a class="ae kf" href="https://en.wikipedia.org/wiki/Factory_method_pattern" rel="noopener ugc nofollow" target="_blank">这里</a>了解为什么您可能选择使用工厂方法而不是构造函数来创建对象。</p><h1 id="90c0" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">静态成员变量(属性)</h1><p id="12b3" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">静态属性是为程序中创建的每个类对象保留其值的类属性。静态属性的一个经典例子是跟踪创建的对象的数量。让我们看看如何为<code class="fe mw mx my mm b">Poin</code> t类创建一个静态属性。</p><p id="c5fd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">“纯”静态属性是ES2019的一部分，还没有在JavaScript中广泛使用，所以下面的<code class="fe mw mx my mm b">Point</code>类静态属性的实现有点麻烦。首先，修改<code class="fe mw mx my mm b">Point </code>的构造函数，如下所示:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="0b35" class="mq lf it mm b gy mr ms l mt mu">class Point {<br/>  constructor(x,y) {<br/>    this.x = x;<br/>    this.y = y;<br/>    Point.count++;<br/>  }<br/>  … // more class definition code<br/>}</span></pre><p id="97d4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，将静态getter方法<code class="fe mw mx my mm b">COUNT</code>添加到类定义中:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="ad8a" class="mq lf it mm b gy mr ms l mt mu">static get COUNT() {<br/>  return Point.count;<br/>}</span></pre><p id="160b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您必须在主程序中设置计数:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="c477" class="mq lf it mm b gy mr ms l mt mu">Point.count = 0;</span></pre><p id="2daa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是测试这个静态属性的测试程序:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4f2a" class="mq lf it mm b gy mr ms l mt mu">Point.count = 0;<br/>let p1 = Point.create(1,2);<br/>print(`Number of Point objects: ${Point.COUNT}`);<br/>let p2 = Point.create(2,3);<br/>print(`Number of Point objects: ${Point.COUNT}`);<br/>let p3 = Point.create(-1,-1);<br/>print(`Number of Point objects: ${Point.COUNT}`);</span></pre><p id="54b2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该程序的输出是:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="89f8" class="mq lf it mm b gy mr ms l mt mu">Number of Point objects: 1<br/>Number of Point objects: 2<br/>Number of Point objects: 3</span></pre><p id="8068" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如我所说的，这有点像黑客，当ES2019变得更广泛可用时，你将能够像其他OOP语言一样创建一个使用静态成员变量。</p><h1 id="4196" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">JavaScript有类</h1><p id="9add" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">本文展示了一些使用JavaScript类可以执行的高级技术。在我的下一篇文章中，我将向您介绍用JavaScript类执行继承。</p><p id="3d88" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢您阅读这篇文章，请给我发电子邮件，地址是<a class="ae kf" href="mailto:mmmcmillan1@att.net" rel="noopener ugc nofollow" target="_blank">mmmcmillan1@att.net</a>，并提出意见和建议。如果你对我的在线编程课程感兴趣，请访问https://learningcpp.teachable.com<a class="ae kf" href="https://learningcpp.teachable.com" rel="noopener ugc nofollow" target="_blank"/>。</p></div></div>    
</body>
</html>