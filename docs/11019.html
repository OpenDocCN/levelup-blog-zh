<html>
<head>
<title>Publish to NuGet with GitHub actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用GitHub操作发布到NuGet</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/publish-to-nuget-with-github-actions-4e1486e7c19f?source=collection_archive---------16-----------------------#2022-02-07">https://levelup.gitconnected.com/publish-to-nuget-with-github-actions-4e1486e7c19f?source=collection_archive---------16-----------------------#2022-02-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="29d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<a class="ae kl" href="https://itnext.io/how-to-create-a-template-in-net-for-a-c-application-and-what-nuget-is-for-e5d4fc03c487" rel="noopener ugc nofollow" target="_blank">上一篇文章</a>中，我描述了如何创建一个NuGet模板并手动将其发布到NuGet。在这里，我想谈谈如何通过CI自动创建包，或者使用GitHub作为存储库来发布包。</p><p id="d5f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 1。创建API密钥</strong></p><p id="7d72" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">登录到nuget.org的<a class="ae kl" href="http://nuget.org" rel="noopener ugc nofollow" target="_blank">然后进入API密钥管理并创建一个密钥。</a></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/ae4376b79930ca4321f06a24c521e68f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*boln1p0-XRNNBVLIE6qdJA.png"/></div></div></figure><p id="8431" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 2。将API密钥添加到GitHub库</strong></p><p id="b7cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">转到GitHub和所需的存储库设置，然后转到Secrets。创建一个新的秘密并粘贴在第一步中创建的API密匙。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ky"><img src="../Images/7aad2f3352bee305503b4fea727b3f9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0_ETai7LPflKUwrBYParWw.png"/></div></div></figure><p id="7951" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 3。添加工作流程说明</strong></p><p id="b786" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在根目录<repository> /下创建一个文件。github/workflows/release . yml<br/>将内容从<a class="ae kl" href="https://github.com/vit-h/mini-service-common/blob/main/.github/workflows/release.yml" rel="noopener ugc nofollow" target="_blank">复制到此处</a>。</repository></p><p id="58af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">确实如此:<br/> -发布发布时触发<br/> -在ubuntu上运行-最新<br/> -设置。NET SDK <br/> -运行dotnet构建，然后测试<br/> -打包nuget并使用附加的nu get密钥将其推送到nuget.org</p><p id="2c95" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 4。创建发布</strong></p><p id="bb6a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您的回购主页上的“查找发行”链接</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi kz"><img src="../Images/85e75f31d39eca8ffeb80c7587f6123e.png" data-original-src="https://miro.medium.com/v2/resize:fit:366/format:webp/1*toEqJhbLf_qkOPJwDLcurw.png"/></div></figure><p id="fc65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后创建一个新版本</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi la"><img src="../Images/44b30bbe96a3a41003154d04bec1b50f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g8lursBJpILfckOJKTkksw.png"/></div></div></figure><p id="cbd5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 5。验证工作流程是否成功</strong></p><p id="fedc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">转到“操作”选项卡，检查已触发操作的状态和输出。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lb"><img src="../Images/0e3299eca47983efaf70811d1a663bd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i0W3mbg4D3mJ1J90G4yIcA.png"/></div></div></figure><p id="b23d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">6。检查已发布的包</p><p id="6f30" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">去nuget.org，然后登录并检查包页面。大约5-10分钟后，您的包将出现在<a class="ae kl" href="https://www.nuget.org/account/Packages#" rel="noopener ugc nofollow" target="_blank">未列出的包</a>中，然后它们将被移动到<a class="ae kl" href="https://www.nuget.org/account/Packages#" rel="noopener ugc nofollow" target="_blank">已发布的包</a>中。</p><p id="9f4d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">7。故障排除</p><p id="7c1e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如你从上面的动作图片中看到的，我在向nuget.org推进时遇到了麻烦。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lc"><img src="../Images/1d3ee8e28bfcac8a384ce73d9951623f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u2GXzyl0N7p4jb51m4ASnw.png"/></div></div></figure><p id="2266" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，如果你将遇到你自己无法解决的问题，你可以发电子邮件给<a class="ae kl" href="mailto:support@nuget.org" rel="noopener ugc nofollow" target="_blank">support@nuget.org</a>。在我的情况下，我在10天内得到了答案和修复。</p></div></div>    
</body>
</html>