<html>
<head>
<title>Android Pop-up messages Tutorial for beginners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android弹出消息初学者教程</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/android-pop-up-messages-tutorial-for-beginners-51b15ddd68ce?source=collection_archive---------5-----------------------#2020-03-06">https://levelup.gitconnected.com/android-pop-up-messages-tutorial-for-beginners-51b15ddd68ce?source=collection_archive---------5-----------------------#2020-03-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c7cb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何用Kotlin在Android中实现Snackbar</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a22f1646694f360553e9d3d88e01e140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tNIR07cQvnjycpu5"/></div></div></figure><p id="1c65" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">自从计算机出现的最初几年，我们就开始熟悉“弹出”这个术语。那时候，这是你想尽一切办法阻止的事情。大多数情况下，这与宣传或恶意软件有关。现在在智能手机时代，我们有警告和对话框，我之前在其中创建了一个由三部分组成的教程。在本教程中，我们将学习Android弹出消息。</p><p id="0671" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Android赋予了术语<strong class="kw iu">弹出窗口</strong>新的含义。在我看来，他们的定义更准确，它与显示从屏幕底部弹出的消息有关。这个用一个图像来描述比较好，下面来看看。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lr"><img src="../Images/d1855d64bda0bfc808c9364d6ab3337f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p_KFYJQMTl-QIVHDHUU5MA.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">图一。屏幕底部的Snackbar或Android中的弹出窗口</figcaption></figure><p id="c004" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">小吃店在2015年与材料设计一起推出。在此之前，显示简短消息的首选方法是祝酒词(在Kotlin的Android Alert对话框的第二部分<a class="ae lq" href="http://www.evanamargain.com/blog/android/android-alert-dialogs-in-kotlin-tutorial-part-2-interact/" rel="noopener ugc nofollow" target="_blank">中，我简要解释了什么是祝酒词)。零食条相对于吐司的一个优势是它们可以包含按钮。</a></p><p id="47a1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本教程中，我将教您如何创建这些弹出窗口来与您的应用程序集成。和之前所有的教程一样，我们将以“<a class="ae lq" href="http://www.evanamargain.com/blog/android/new-android-studio-project-for-kotlin-and-java-tutorial/" rel="noopener ugc nofollow" target="_blank">新的Android Studio project for kot Lin and Java</a>结果文件”中解释的项目为起点。</p><p id="d790" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您需要该文件，可以从这里下载:</p><p id="b055" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下载:<a class="ae lq" href="http://www.evanamargain.com/blog/wp-content/uploads/2020/05/Starter-project.zip" rel="noopener ugc nofollow" target="_blank">入门项目</a></p><p id="5075" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个项目写在:</p><ul class=""><li id="ebdb" class="lw lx it kw b kx ky la lb ld ly lh lz ll ma lp mb mc md me bi translated">安卓工作室3.6.1</li><li id="d29b" class="lw lx it kw b kx mf la mg ld mh lh mi ll mj lp mb mc md me bi translated">科特林1.3</li><li id="2d23" class="lw lx it kw b kx mf la mg ld mh lh mi ll mj lp mb mc md me bi translated">Compat库:AndroidX</li></ul><p id="c3f8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在开始本教程之前，构建并运行starter应用程序是一个很好的起点，可以确保一切工作正常。您应该看到的屏幕如下图2所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/c34bdebbfd9cb9b001e8c9543c3a009f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*_i84NphLtQ3_riwPB8GYgw.png"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">图二。启动项目</figcaption></figure><h1 id="9c88" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">在协调器布局中使用Snackbar</h1><p id="3116" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">Android推荐在协调布局中使用snackbars。你仍然可以在任何其他类型的布局中使用snackbar，但是根据<a class="ae lq" href="https://developer.android.com/training/snackbar/showing#coordinator" rel="noopener ugc nofollow" target="_blank"> Android的文档</a>，协调器给出了两个优点:</p><ol class=""><li id="70ce" class="lw lx it kw b kx ky la lb ld ly lh lz ll ma lp ni mc md me bi translated">Snackbars只有在协调器布局中才能被消除。</li><li id="3666" class="lw lx it kw b kx mf la mg ld mh lh mi ll mj lp ni mc md me bi translated">当snackbar出现时，协调器布局负责将一些UI元素推到顶部，这样您就有了一个干净的布局。</li></ol><p id="20a7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">默认情况下，这个项目和大多数Android starter项目都有一个约束布局。你需要做的第一件事是通过打开activity_main.xml来改变它，你可以在app &gt; RES &gt; layout &gt; activity _ main . XML中找到它，如图3所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/acb034740e14bb1ba933f22f4a635a9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*InP9lAXTRDEO_UzEomtXBQ.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">图3。选择activity_main.xml</figcaption></figure><p id="9a97" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">打开文件后，您将能够看到XML的根标签，这是一个ConstraintLayout(图4)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/57ea2654bb267080ce2e32f88d47b103.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IZSPVL8Io1sPTzC7"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">图4。约束布局</figcaption></figure><p id="3636" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">用以下代码替换约束布局:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="1c7e" class="nq mm it nm b gy nr ns l nt nu">&lt;androidx.coordinatorlayout.widget.CoordinatorLayout <br/>  android:id="@+id/myCoordinatorLayout"   <br/>  xmlns:android="http://schemas.android.com/apk/res/android" <br/>  xmlns:app="http://schemas.android.com/apk/res-auto" <br/>  xmlns:tools="http://schemas.android.com/tools" <br/>  android:layout_width="match_parent" <br/>  android:layout_height="match_parent" <br/>  tools:context=".MainActivity"&gt; </span><span id="d53a" class="nq mm it nm b gy nv ns l nt nu">... </span><span id="1b9c" class="nq mm it nm b gy nv ns l nt nu">&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/f1f3c12515c416a85e0499227820e64f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*QJiS4Qk04NNMPEQtkjDxZA.png"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">图5。更改布局后的结果</figcaption></figure><p id="c1f8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你运行应用程序后，这一变化，你会注意到标签改变的地方(图5)。实际上，现在所有的约束都没有用了，所以您可以删除下面几行:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="c405" class="nq mm it nm b gy nr ns l nt nu">app:layout_constraintBottom_toBottomOf="parent" app:layout_constraintLeft_toLeftOf="parent" app:layout_constraintRight_toRightOf="parent" app:layout_constraintTop_toTopOf="parent"</span></pre><p id="e8ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你有错误，看看下面(图6)你的代码在这些改变后应该是什么样子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/8082b99ba815e91ceb431226f5b86948.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r-_vRWm1QQXYQH7v"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">图6。结果activity_main.xml</figcaption></figure><h1 id="a1ce" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">将材料设计添加到项目中</h1><p id="e3cd" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">为了在任何项目中使用snackbars，您首先需要在应用程序的Gradle文件中添加材料设计依赖关系。该文件可以在grad le Scripts &gt; build . grad le(Module:app)中找到，可以在下图中看到。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/77d15fb6b14d53eb3fbcd4c8140c6315.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zr4TSUyA-KwDDiHdipnROg.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">图7。应用程序梯度文件位置</figcaption></figure><p id="1f99" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一旦在底部打开了该文件，在依赖项内部添加以下代码。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="7911" class="nq mm it nm b gy nr ns l nt nu">implementation 'com.google.android.material:material:1.0.0'</span></pre><p id="105f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Android Studio将请求同步项目，请继续执行。什么都不会改变，但是现在你可以使用Snackbars了。</p><h1 id="d5f1" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">在MainActivity中创建Snackbar</h1><p id="2c24" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">完成所有这些设置后，您现在可以添加snackbar了。打开MainActivity.kt，位于app &gt; Java &gt; c . e . Android . my application &gt; main activity . kt，如下图所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/53bf0d9e821ddc36b96e80948659b898.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZTTB9aAgpbw_CzJaMiWKoQ.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">图8。Android项目视图中的主要活动位置</figcaption></figure><p id="a0f4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在文件的顶部，我们需要用以下代码导入Android Snackbars的依赖项:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="1583" class="nq mm it nm b gy nr ns l nt nu">import com.google.android.material.snackbar.Snackbar</span></pre><p id="83f4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后创建snackbar，并用下面的代码显示它:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="c695" class="nq mm it nm b gy nr ns l nt nu">//1 <br/>val snackbar = Snackbar.make(findViewById(R.id.myCoordinatorLayout), "Hello snackbar world!", Snackbar.LENGTH_LONG) </span><span id="c77f" class="nq mm it nm b gy nv ns l nt nu">//2 <br/>snackbar.show()</span></pre><p id="ac5d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们回顾一下这段代码:</p><ol class=""><li id="470a" class="lw lx it kw b kx ky la lb ld ly lh lz ll ma lp ni mc md me bi translated">您将把snackbar存储在一个<code class="fe oa ob oc nm b">val</code>变量中。然后使用Snackbar.make方法创建Snackbar，它接收三个参数:</li></ol><ul class=""><li id="144f" class="lw lx it kw b kx ky la lb ld ly lh lz ll ma lp mb mc md me bi translated">父视图，如上所述，推荐使用CoordinatorLayout，但也可以是LinearLayout、ConstraintLayout或您能想到的任何其他视图。</li><li id="ed36" class="lw lx it kw b kx mf la mg ld mh lh mi ll mj lp mb mc md me bi translated">您希望它包含的文本—在本例中是“Hello snackbar world！”</li><li id="4a11" class="lw lx it kw b kx mf la mg ld mh lh mi ll mj lp mb mc md me bi translated">snackbar将显示的时间长度，可以是<em class="od"> LENGTH_LONG </em>、<em class="od">LENGTH _不定</em>或<em class="od"> LENGTH_SHORT </em></li></ul><p id="ecd3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">2.你让小吃店出现。</p><p id="77d4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，您可以在一行中执行指令一和指令二，但是为了清楚起见，我们在这里将它们分成两行。</p><p id="ce3c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">完成这些更改后，您可以运行应用程序，并会在应用程序启动后几秒钟内看到snackbar出现。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/739ca6069b2c2a4d6ae75e9ac6b4db9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*8PV3Qsjt3qv0H6ataHjZWw.png"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">图9。零食条显示</figcaption></figure><h1 id="5cf4" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">向Snackbar添加操作</h1><p id="5bc0" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">正如开头提到的，Android Snackbars也可以有一个动作按钮。所以在教程的这一部分，我们将添加一个。</p><p id="8ea3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，转到activity_main.xml并在TextView标记中添加一个id:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="ab40" class="nq mm it nm b gy nr ns l nt nu">android:id="@+id/text_view_welcome"</span></pre><p id="c174" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后返回MainActivity.kt并导入操纵snackbar所需的“View”类。</p><p id="11fc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，在onCreate方法中，使用以下代码添加snackbar按钮:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="212a" class="nq mm it nm b gy nr ns l nt nu">snackbar.setAction("Click me", View.OnClickListener { <br/>    text_view_welcome.text = "I changed the text!" <br/>})</span></pre><p id="135f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这段代码有两部分。首先，设置按钮的动作和文本，在本例中是“Click me”。然后创建一个onClickListener，它将引用添加到文本视图中的id。通过设置此属性，您将通过单击Snackbar按钮来更改屏幕中的文本。</p><p id="46d6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">运行应用程序并单击按钮，您可以在下面的图片10和11中看到结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/fc55ac8e08b4d97b06f175b3365e917a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*AYG6PUIpv6okw3Pgfb0okg.png"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">图10。带按钮的零食条</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/92386d676c307072c818aedc14fea78a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*DcTBF-x-BsB14tWVfJRNOw.png"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">图11。单击按钮后，文本发生了变化</figcaption></figure><p id="e79b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">就是这个！您已经涵盖了小吃店所需的一切。如果你想看看这个项目最后应该如何运作，你可以在这里下载完成的项目:</p><p id="61bd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下载:<a class="ae lq" href="http://www.evanamargain.com/blog/wp-content/uploads/2020/05/Finished-project.zip" rel="noopener ugc nofollow" target="_blank">完成项目</a></p><p id="4570" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你有任何疑问，不要犹豫留下评论，我会尽快回复。</p><p id="c49b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下次见！</p><p id="9f53" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">埃娃娜·马尔甘·普伊格</p></div></div>    
</body>
</html>