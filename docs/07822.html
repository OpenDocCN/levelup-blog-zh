<html>
<head>
<title>React Animated Timeline</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应动画时间线</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/react-animated-timeline-c85ea6758a8f?source=collection_archive---------2-----------------------#2021-03-14">https://levelup.gitconnected.com/react-animated-timeline-c85ea6758a8f?source=collection_archive---------2-----------------------#2021-03-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9d1a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用GreenSock和React构建的动画垂直时间轴</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e33d3e70079aced23131705e2ed5a621.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z75a9WFVgrftQXQAtsQAJg.png"/></div></div></figure><p id="a6d4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本文中，我们将为动画垂直时间轴构建一个React组件。这个想法是创建一个垂直的时间线，当用户上下滚动时，这个时间线的项目会产生动画效果。</p><p id="03db" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了实现这个想法，我们将使用工具<code class="fe lq lr ls lt b">create-react-app</code>来创建React应用程序，并为我们提供构建时间轴原型所需的所有功能。</p><p id="40f9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">动画是用格林斯托克(GSAP)完成的，每个项目都有自己的子元素动画。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lu"><img src="../Images/b343b0ca8179897eb442727caf79884d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yyxf11gAbXwzL2DidsK6ww.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">时间轴示例</figcaption></figure><p id="8187" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">时间线的每个元素将由以下三个元素组成:标题、描述和日期，每个元素都有自己的动画。</p><p id="7a30" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">查看第一个元素上方的图像，日期从右边滑动，标题和描述从左边滑动，但是第二个元素的动画从相对的两边滑动，日期从左边，标题和描述从右边。</p><p id="ba3a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们已经讨论了这个想法，让我们建立我们的项目，并开始创建时间表。</p><p id="2cae" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">📝<em class="lz">如果你还没有安装Node.js可以从官网</em> <a class="ae ma" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> <em class="lz">下载</em> </a> <em class="lz">安装。</em></p><h1 id="853a" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">项目设置</h1><p id="a9b6" class="pw-post-body-paragraph ku kv it kw b kx mt ju kz la mu jx lc ld mv lf lg lh mw lj lk ll mx ln lo lp im bi translated">让我们从创建React应用程序开始，我们将在其中开发时间轴组件。</p><pre class="kj kk kl km gt my lt mz na aw nb bi"><span id="4382" class="nc mc it lt b gy nd ne l nf ng">npx create-react-app [name_of_project_directory]</span></pre><p id="dce0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">创建应用程序后，运行<code class="fe lq lr ls lt b">npm start</code>，转到<code class="fe lq lr ls lt b">http://localhost:3000</code>，检查您的应用程序是否启动并运行。</p><h1 id="9b10" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">时间轴组件</h1><p id="614f" class="pw-post-body-paragraph ku kv it kw b kx mt ju kz la mu jx lc ld mv lf lg lh mw lj lk ll mx ln lo lp im bi translated">现在我们已经准备好了应用程序，让我们创建<code class="fe lq lr ls lt b">Timeline</code>组件。</p><p id="acb1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，我们需要创建一个名为<code class="fe lq lr ls lt b">Timeline.js</code>的文件，从一个空组件开始，为此，将下面的内容放入文件中。</p><pre class="kj kk kl km gt my lt mz na aw nb bi"><span id="4282" class="nc mc it lt b gy nd ne l nf ng">const Timeline = () =&gt; {<br/>  return 'Timeline component'<br/>}</span></pre><p id="b1ab" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，将您的组件添加到<code class="fe lq lr ls lt b">App.js</code>文件中，您应该能够在浏览器中看到字符串<code class="fe lq lr ls lt b">Timeline component</code></p><p id="36d7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下一步是添加将呈现时间轴HTML结构的代码，但是首先，我们需要定义我们想要用来表示时间轴及其项目的数据结构。让我们使用一个简单的对象数组，如下例所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">时间轴数据示例</figcaption></figure><p id="5087" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们知道了数据结构，我们可以添加代码来迭代数组并呈现时间轴HTML。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">时间轴组件HTML结构</figcaption></figure><p id="0af7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">此时，您可以在文件<code class="fe lq lr ls lt b">App.js</code> t中创建一个数组，并将其传递给<code class="fe lq lr ls lt b">Timeline</code>组件来测试上面的代码。</p><pre class="kj kk kl km gt my lt mz na aw nb bi"><span id="3fc9" class="nc mc it lt b gy nd ne l nf ng">&lt;Timeline items={itemsArray} /&gt;</span></pre><p id="d831" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您返回浏览器，您应该看到一个简单的无序列表，其中包含您在数组中创建的项目。</p><p id="8e50" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">📝<em class="lz">时间线的风格取决于你的品味，我从Shanchit Sharma在这个</em><a class="ae ma" href="https://codepen.io/web_designer_sanchit/pen/eLjvyw" rel="noopener ugc nofollow" target="_blank"><em class="lz">codepen</em></a><em class="lz">中所做的惊人工作中获得了灵感。</em></p><p id="ffb5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们有了组件的结构，我们需要添加动画。</p><h1 id="f548" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">添加动画</h1><p id="3fb8" class="pw-post-body-paragraph ku kv it kw b kx mt ju kz la mu jx lc ld mv lf lg lh mw lj lk ll mx ln lo lp im bi translated">为了制作时间轴的动画，我们将使用GreenSock和它的ScrollTrigger插件。</p><p id="25ff" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们从创建一个从起点到终点的动画函数开始。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">动画功能</figcaption></figure><p id="bc01" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">上面的函数接收动画元素和方向(根据用户滚动向上或向下)。它检查元素将从哪一侧开始被激活，并应用偏移量。设置坐标后，它使用函数<code class="fe lq lr ls lt b">gsap.fromTo</code>在定义的坐标之间激活元素。这个功能足以让时间轴中的项目从左向右滑动到中央。</p><p id="9ed9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是在我们调用这个函数之前，我们需要注册ScrollTrigger插件并传递要被动画化的元素。为此，一旦HTML被加载到浏览器中，我们将使用钩子<code class="fe lq lr ls lt b">useEffect</code>来注册插件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">时间轴组件(useEffect)</figcaption></figure><p id="f717" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个函数将注册插件并搜索任何包含CSS类<code class="fe lq lr ls lt b">.animate</code>的元素。每个元素将开始隐藏，并在事件<code class="fe lq lr ls lt b">onEnter</code>(当向下滚动时滚动动作到达元素)和事件<code class="fe lq lr ls lt b">onEnterBack</code>(当向上滚动时滚动动作经过元素)时触发功能<code class="fe lq lr ls lt b">animateFromTo</code>。在事件<code class="fe lq lr ls lt b">onLeave</code>中，元素将被隐藏，因为滚动动作已经将它留在后面，这样，它可以在下一次滚动动作触发其<code class="fe lq lr ls lt b">onEnter</code>或<code class="fe lq lr ls lt b">onEnterBack</code>事件时被激活。</p><p id="6cc5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是了，下面你可以找到<code class="fe lq lr ls lt b">Timeline</code>组件的完整代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">时间轴组件</figcaption></figure><p id="03be" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有了上面的代码，你可以更进一步，尝试时间线HTML结构、样式和动画的新变体。</p><h1 id="e062" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">包扎</h1><p id="5775" class="pw-post-body-paragraph ku kv it kw b kx mt ju kz la mu jx lc ld mv lf lg lh mw lj lk ll mx ln lo lp im bi translated">在尝试了上面的代码之后，这里有一些值得一提的地方:</p><ul class=""><li id="ca05" class="nj nk it kw b kx ky la lb ld nl lh nm ll nn lp no np nq nr bi translated">格林斯托克(GSAP)是一个伟大的工具来建立动画/用户体验。这是非常好的记录，有广泛的例子和插件。</li><li id="c751" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><code class="fe lq lr ls lt b">create-react-app</code>是引导和原型化React应用程序或组件的伟大工具。</li></ul><p id="7eb1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你有任何建议或贡献，欢迎在下面评论。编码快乐！</p></div></div>    
</body>
</html>