<html>
<head>
<title>Custom CollectionView in Swift 5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift 5中的自定义集合视图</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/custom-collectionview-in-swift-5-a11786cbec8?source=collection_archive---------5-----------------------#2021-02-02">https://levelup.gitconnected.com/custom-collectionview-in-swift-5-a11786cbec8?source=collection_archive---------5-----------------------#2021-02-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8bf5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">创建自定义集合视图的分步指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a22413f2f1a8e747732aff830da1d61b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iykzk7yTsHy9RTfTbCgueg.png"/></div></div></figure><p id="4280" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在开发iOS应用程序时，您可能会发现自己需要自定义布局，并用动态和可自定义的内容填充表格。<code class="fe lq lr ls lt b">UICollectionView</code>是一个流行的UI元素，用于在可定制的布局中呈现一组项目。本文介绍了创建<code class="fe lq lr ls lt b">UICollectionView</code>和<code class="fe lq lr ls lt b">UICollectionViewCell</code>的逐步指南。请注意，本文假设您对Xcode、Swift和UICollectionView有基本的了解。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="6d09" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">创建新的iOS应用程序项目</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/ef33545cf02039ff3f769298e2160b62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d5dJHt0mv1LzgxiK7HJrQw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/3bd8ac24ede63db2acb84ec425b2aa0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sNTT0pCSsPkEDDXNijocQA.png"/></div></div></figure><p id="7b60" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从文件浏览器中选择主故事板。通过按<code class="fe lq lr ls lt b">command shift L</code>打开故事板小部件窗口，添加一个集合视图。将collectionView拖动到主视图控制器上。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/34f9b2a0e585067c0ff1f5aa01fd3e9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dVDD68q5wy6EcTllaFALQw.png"/></div></div></figure><p id="bc85" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">向UICollectionView小部件添加约束，以确保小部件填充所有设备上的屏幕。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mw"><img src="../Images/c5c5247958e9a8542c3f16418cab0bb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q3bn0XSG4m91bQnseKYRVA.png"/></div></div></figure><p id="2319" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">故事板中的基础现在已经建立起来了。为了定制collectionView和collectionView单元格，您需要为每种小部件类型创建定制类，并将这些新创建的类分配给故事板中相应的小部件。</p><h1 id="5a2b" class="mb mc it bd md me mx mg mh mi my mk ml jz mz ka mn kc na kd mp kf nb kg mr ms bi translated">创建UICollectionView文件</h1><ol class=""><li id="2a7a" class="nc nd it kw b kx ne la nf ld ng lh nh ll ni lp nj nk nl nm bi translated">创建新的Cocoa Touch类文件。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/81675768aeb7be293dd6f8bcfdbe0b82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*84nFYtQSid4PNQqlAcQ3Ag.png"/></div></div></figure><p id="2f93" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">2.输入类别的名称。子类必须设置为<code class="fe lq lr ls lt b">UICollectionView</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/dd5ede015ad2087f10bc85e1b01746b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9DUuF9u2XStA96WjRPzDfg.png"/></div></div></figure><p id="11ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">3.返回到故事板并选择collectionView小部件。将类设置为指向新创建的<code class="fe lq lr ls lt b">CustomCollectionView</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/46851f4a8a4cf007c5fedeb92abfec9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9qa2nn3WwLmWTgNPFuSHEQ.png"/></div></div></figure><h1 id="c830" class="mb mc it bd md me mx mg mh mi my mk ml jz mz ka mn kc na kd mp kf nb kg mr ms bi translated">创建UICollectionViewCell文件</h1><p id="ca0f" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld nq lf lg lh nr lj lk ll ns ln lo lp im bi translated">在创建<code class="fe lq lr ls lt b">UICollectionViewCell</code>文件时，您将希望遵循相同的说明。为新文件选择选项时，确保该文件是<code class="fe lq lr ls lt b">UICollectionViewCell</code>的子类。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/0997db9819366a6d24bdcfa572202312.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LwygTSHm1QCLAGyE2bEYVQ.png"/></div></div></figure><p id="57e3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">转到故事板并选择cell小部件。将类别设置为新创建的类别，在本例中为<code class="fe lq lr ls lt b">CustomCollectionViewCell</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/82c5c3ce2e5e870838ecd651e8a467e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PpBsW7sHbLz8xRx-6UbeYQ.png"/></div></div></figure><p id="999c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我们选择单元格时，将重用标识符设置为<code class="fe lq lr ls lt b">cell</code>。在定制<code class="fe lq lr ls lt b">CustomCollectionView.swift</code>文件中的单元格时，将引用该重用标识符。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/dcd256a2784f450111fd50d7f26007b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wXwAodq2IDgOyV7T1Wkm-A.png"/></div></div></figure><h1 id="0ee9" class="mb mc it bd md me mx mg mh mi my mk ml jz mz ka mn kc na kd mp kf nb kg mr ms bi translated">添加一些定制</h1><p id="ede2" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld nq lf lg lh nr lj lk ll ns ln lo lp im bi translated">现在我们已经设置好了类，让我们添加一些定制！</p><h2 id="bd07" class="nw mc it bd md nx ny dn mh nz oa dp ml ld ob oc mn lh od oe mp ll of og mr oh bi translated"><strong class="ak">单元格定制</strong></h2><p id="c06e" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld nq lf lg lh nr lj lk ll ns ln lo lp im bi translated">可以通过选择主故事板中的单元格小部件并更新属性编辑器中的<code class="fe lq lr ls lt b">Background</code>属性来定制单元格背景。在这种情况下，背景设置为蓝色。</p><p id="1b39" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">按下<code class="fe lq lr ls lt b">command shift L</code>打开微件窗口。通过将UILabel从小部件窗口拖到故事板中的单元格上，向单元格添加标签。通过选择标签，按下<code class="fe lq lr ls lt b">control</code>并将光标拖动到<code class="fe lq lr ls lt b">CustomCollectionViewCell.swift</code>文件，为CustomCollectionViewCell类的标签创建一个出口。向标签和单元格添加约束。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/65f176b708e5a477c92baf2636742a18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nHQboh6OF0jlcmf2gUwZ_Q.png"/></div></div></figure><p id="c121" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">标签将需要从UICollectionView配置。添加一个<code class="fe lq lr ls lt b">setLabel</code>函数，使标签可配置。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">CustomCollectionViewCell.swift</figcaption></figure><h2 id="c088" class="nw mc it bd md nx ny dn mh nz oa dp ml ld ob oc mn lh od oe mp ll of og mr oh bi translated"><strong class="ak">收藏视图定制</strong></h2><p id="1b71" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld nq lf lg lh nr lj lk ll ns ln lo lp im bi translated">在<code class="fe lq lr ls lt b">CustomCollectionView.swift</code>中，我们需要覆盖定义部分数量、每个部分的项目数量、每个单元格的大小的方法，以及每个单元格对象的任何覆盖和配置更改。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">CustomCollectionView.swift</figcaption></figure><p id="fe55" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是结果！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/2ea7f62badfc7a0051a37c5530db532c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ovmHmbBm-oVjhAjaiJveEw.png"/></div></div></figure><h1 id="57c2" class="mb mc it bd md me mx mg mh mi my mk ml jz mz ka mn kc na kd mp kf nb kg mr ms bi translated">结论</h1><p id="820f" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld nq lf lg lh nr lj lk ll ns ln lo lp im bi translated">本教程概述了如何构建包含自定义集合视图单元格的自定义集合视图。类似的技术可用于扩展swift库中的其他UI元素。</p><h1 id="f6b3" class="mb mc it bd md me mx mg mh mi my mk ml jz mz ka mn kc na kd mp kf nb kg mr ms bi translated">额外资源</h1><ul class=""><li id="5714" class="nc nd it kw b kx ne la nf ld ng lh nh ll ni lp oq nk nl nm bi translated"><a class="ae or" href="https://developer.apple.com/library/archive/documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40012334-CH1-SW1" rel="noopener ugc nofollow" target="_blank">iOS的收藏查看编程指南</a></li><li id="5c56" class="nc nd it kw b kx os la ot ld ou lh ov ll ow lp oq nk nl nm bi translated"><a class="ae or" href="https://swift.org/documentation/" rel="noopener ugc nofollow" target="_blank"> Swift 5文档</a></li></ul></div></div>    
</body>
</html>