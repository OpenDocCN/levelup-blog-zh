<html>
<head>
<title>How to Push a Dockerized Node.js App to a Container Registry</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将Dockerized Node.js应用程序推送到容器注册表</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-push-a-dockerized-node-js-app-to-a-container-registry-f11c272cbbed?source=collection_archive---------5-----------------------#2021-12-24">https://levelup.gitconnected.com/how-to-push-a-dockerized-node-js-app-to-a-container-registry-f11c272cbbed?source=collection_archive---------5-----------------------#2021-12-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7756" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">容器注册表存储并允许您分发容器映像。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/445328e1d3d41356e1a382199e958fef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1AktzTtx2ZOH1kb8yv7Piw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com/s/photos/programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kv" href="https://unsplash.com/@max_duz?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Max Duzij </a>拍照</figcaption></figure><p id="e232" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">容器化应用是现代软件开发中的一个流行概念，这一概念为开发者提供了更多的机会。在引入开源软件<strong class="ky ir"> Kubernetes </strong>之后，这个概念变得更加有趣，它开辟了将容器应用程序与第三方工具集成的各种方式。</p><p id="a9bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我将讨论如何将容器图像推送到容器注册中心。容器注册中心基本上是一个存储库，它帮助您存储容器映像，并允许其他主机从注册中心服务器下载您的映像。</p><p id="d708" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">出于演示的目的，我将使用一个简单的Node.js应用程序，并从头开始介绍每个步骤。所以你可以继续，如果你的电脑上已经有了一个集装箱图像，你可以从<strong class="ky ir">步骤3 </strong>开始。</p><p id="31d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们首先开始创建一个容器化的Node.js应用程序。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="d58c" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">步骤1:安装Docker</h1><p id="a31f" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">首先，你的电脑上需要安装Docker。你可以从下面的链接下载<strong class="ky ir"> Docker桌面</strong>，一旦下载并成功安装，在你的电脑上启动Docker桌面。</p><div class="mw mx gp gr my mz"><a href="https://www.docker.com/products/docker-desktop" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd ir gy z fp ne fr fs nf fu fw ip bi translated">用于Mac和Windows的Docker桌面</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">Docker订阅服务协议已更新。我们的Docker订阅服务协议包括一项更改…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">www.docker.com</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn kp mz"/></div></div></a></div></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="7680" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">步骤2:创建一个容器化的应用程序</h1><p id="b23a" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">下一步是使用Docker封装您的应用程序。要容器化你的应用程序，你需要有一个在YAML写的docker file<strong class="ky ir">。让我们使用<strong class="ky ir"> <em class="no">节点</em> </strong>作为基础图像创建一个Dockerfile。</strong></p><p id="2718" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我创建了一个简单的Node.js应用程序，我的工作目录包含以下文件。</p><pre class="kg kh ki kj gt np nq nr ns aw nt bi"><span id="35e9" class="nu ma iq nq b gy nv nw l nx ny">hello-world<br/>  - app.js<br/>  - package-lock.json<br/>  - package.json</span></pre><p id="16ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我需要在这个目录中创建一个Dockerfile。</p><pre class="kg kh ki kj gt np nq nz bn oa ob bi"><span id="3bcf" class="oc ma iq nq b be od oe l of ny">FROM node:10.23-alpine<br/><br/>WORKDIR /usr/src/app<br/><br/>COPY package*.json ./<br/><br/>RUN npm install<br/><br/>COPY . .<br/><br/>EXPOSE 8080<br/><br/>CMD ["node", "app.js"]</span></pre><p id="5411" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">添加docker文件后，可以为应用程序创建docker映像。使用下面的命令<em class="no">【确保您位于docker文件所在的目录中】</em>。</p><pre class="kg kh ki kj gt np nq nr ns aw nt bi"><span id="2e07" class="nu ma iq nq b gy nv nw l nx ny">$ docker build . -t &lt;image-name&gt;</span><span id="96cc" class="nu ma iq nq b gy og nw l nx ny">Eg:</span><span id="cdca" class="nu ma iq nq b gy og nw l nx ny">$ docker build . -t node-app</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="7f88" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">步骤3:将您的映像推送到容器注册中心</h1><p id="d5bd" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在这个演示中，我使用<strong class="ky ir"> Docker Hub </strong>作为容器注册中心。但是您可以根据自己的喜好选择任何其他容器注册表。</p><p id="a7fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，去<a class="ae kv" href="https://hub.docker.com/signup" rel="noopener ugc nofollow" target="_blank"> Docker Hub </a>创建一个新账户。然后登录并进入<strong class="ky ir">资源库</strong> &gt; <strong class="ky ir">创建资源库</strong>。<strong class="ky ir"> </strong>将一个<strong class="ky ir">名称</strong>添加到您的存储库<em class="no">【您也可以向您的存储库添加描述，但这是可选的】</em>并且您可以选择它是作为<strong class="ky ir">公共</strong>还是<strong class="ky ir">私有</strong>存储库<em class="no">【如果您使用的是</em> <strong class="ky ir"> <em class="no">自由计划</em> </strong> <em class="no">，您只能在您的帐户中创建一个私有存储库】</em>。</p><p id="13e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，您需要使用您的终端登录您的Docker Hub帐户。为此，请使用下面的命令，并在必要时提供您的凭据。</p><pre class="kg kh ki kj gt np nq nr ns aw nt bi"><span id="51ac" class="nu ma iq nq b gy nv nw l nx ny">$ docker login &lt;container-registry-name&gt; -u &lt;username&gt; -p &lt;password&gt;</span></pre><p id="81ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是您可以用来登录您的帐户的通用命令。但是使用这个命令的缺点是，您必须以纯文本格式输入您的密码。因此，请使用以下命令之一，这样即使在终端上也看不到您的密码。</p><pre class="kg kh ki kj gt np nq nr ns aw nt bi"><span id="a078" class="nu ma iq nq b gy nv nw l nx ny">$ docker login &lt;container-registry-name&gt;</span><span id="03fb" class="nu ma iq nq b gy og nw l nx ny">// then hit enter &amp; provide your username and password</span><span id="131f" class="nu ma iq nq b gy og nw l nx ny">- OR -</span><span id="fa22" class="nu ma iq nq b gy og nw l nx ny">$ docker login &lt;container-registry-name&gt; -u &lt;username&gt;</span><span id="18d7" class="nu ma iq nq b gy og nw l nx ny">// then hit enter and provide your password</span></pre><p id="46fa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为我使用Docker Hub作为容器注册中心，所以您可以在终端上使用<code class="fe oh oi oj nq b">docker login</code>命令，并且在不指定容器注册中心名称的情况下提供凭证。</p><pre class="kg kh ki kj gt np nq nr ns aw nt bi"><span id="8fcf" class="nu ma iq nq b gy nv nw l nx ny">Eg: type <em class="no">docker login</em> and hit enter</span><span id="78c2" class="nu ma iq nq b gy og nw l nx ny">$ docker login</span><span id="6cdf" class="nu ma iq nq b gy og nw l nx ny">Username: &lt;username&gt;</span><span id="fbb6" class="nu ma iq nq b gy og nw l nx ny">Password: &lt;password&gt;</span><span id="73cd" class="nu ma iq nq b gy og nw l nx ny">// provide credentials and hit enter</span></pre><p id="8ab9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在您的终端上得到<code class="fe oh oi oj nq b">Login Succeeded</code>作为输出后，您可以开始<strong class="ky ir">对接标记</strong>和<strong class="ky ir">对接推动</strong>。</p><p id="3741" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe oh oi oj nq b">docker tag</code>命令帮助你给你的docker图片添加一个标签，而<code class="fe oh oi oj nq b">docker push</code>命令将它推入Docker Hub。让我们看看如何在终端上使用这些命令。</p><pre class="kg kh ki kj gt np nq nr ns aw nt bi"><span id="31ab" class="nu ma iq nq b gy nv nw l nx ny">$ docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</span><span id="20db" class="nu ma iq nq b gy og nw l nx ny">SOURCE_IMAGE[:TAG] - you can keep this as your local image</span><span id="53ab" class="nu ma iq nq b gy og nw l nx ny">TARGET_IMAGE[:TAG] - &lt;username&gt;/&lt;image-name&gt;:&lt;tag&gt;</span><span id="9081" class="nu ma iq nq b gy og nw l nx ny">Eg:</span><span id="417c" class="nu ma iq nq b gy og nw l nx ny">$ docker tag node-app mikej/node-app:v1.0</span></pre><p id="9d77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上述命令将标记您的图像，然后您可以使用docker push命令，如下所示，它会将您的图像或存储库推送到注册表。</p><pre class="kg kh ki kj gt np nq nr ns aw nt bi"><span id="b295" class="nu ma iq nq b gy nv nw l nx ny">$ docker push --help</span><span id="79aa" class="nu ma iq nq b gy og nw l nx ny">Usage: docker push [OPTIONS] NAME[:TAG]</span><span id="b176" class="nu ma iq nq b gy og nw l nx ny">Push an image or a repository to a registry</span><span id="ca84" class="nu ma iq nq b gy og nw l nx ny">Options:</span><span id="fe3b" class="nu ma iq nq b gy og nw l nx ny">--disable-content-trust   Skip image signing (default true)</span><span id="290a" class="nu ma iq nq b gy og nw l nx ny">Eg:</span><span id="00ea" class="nu ma iq nq b gy og nw l nx ny">$ docker push mikej/node-app:v1.0</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="7421" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="d2b4" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated"><strong class="ky ir"> <em class="no">恭喜</em> </strong>🎉</p><p id="9276" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您已经成功地将dockerized Node.js应用程序推送到容器注册表中。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="a53a" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">为初学者下载Docker PDF🎉</h1><div class="mw mx gp gr my mz"><a href="https://www.buymeacoffee.com/krbtennakoon/e/68939" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd ir gy z fp ne fr fs nf fu fw ip bi translated">初学者码头工人</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">这涵盖了Docker的基础知识，包括您需要知道的命令。以PDF格式提供。</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="ni l"><div class="ok l nk nl nm ni nn kp mz"/></div></div></a></div></div></div>    
</body>
</html>