<html>
<head>
<title>Escape the Pyramid of Doom</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">逃离末日金字塔</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/escape-the-pyramid-of-doom-c58edd326225?source=collection_archive---------4-----------------------#2020-01-12">https://levelup.gitconnected.com/escape-the-pyramid-of-doom-c58edd326225?source=collection_archive---------4-----------------------#2020-01-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/></div><div class="ab cl jn jo hu jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="ij ik il im in"><p id="a911" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">代码最重要的一个方面是<strong class="jw ir">可读性</strong>，因为它直接关系到<strong class="jw ir">可维护性</strong>。你可以有一个非常高性能的代码，做它需要做的事情，但是如果它不可读，我个人认为它不是好代码。</p><p id="647e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当你写代码的时候，最好多花5分钟来提高可读性，而不是每次别人需要做代码的时候，强迫每个人多花5-10分钟来理解它。</p><p id="1c42" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">伤害可读性但并不难解决的一个问题是“<strong class="jw ir">末日金字塔</strong>”，所以让我们来谈谈这个问题。</p></div><div class="ab cl jn jo hu jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="ij ik il im in"><h1 id="e465" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">定义</h1><blockquote class="lq lr ls"><p id="ad6b" class="ju jv lt jw b jx jy jz ka kb kc kd ke lu kg kh ki lv kk kl km lw ko kp kq kr ij bi translated">在<a class="ae lx" href="https://en.wikipedia.org/wiki/Computer_programming" rel="noopener ugc nofollow" target="_blank">计算机编程</a>中，<strong class="jw ir">末日金字塔</strong>是一个常见的问题，当一个程序使用多级嵌套缩进来控制对一个函数的访问时就会出现这个问题。这在检查<a class="ae lx" href="https://en.wikipedia.org/wiki/Null_pointer" rel="noopener ugc nofollow" target="_blank">空指针</a>或处理<a class="ae lx" href="https://en.wikipedia.org/wiki/Callback_(computer_programming)" rel="noopener ugc nofollow" target="_blank">回调</a>时很常见。<br/>(来源:<a class="ae lx" href="https://en.wikipedia.org/wiki/Pyramid_of_doom_(programming)" rel="noopener ugc nofollow" target="_blank">维基百科</a>)</p></blockquote><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi ly"><img src="../Images/a053769b93b8bfec5461724439be6e08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YoTPCR_l1ApgGGfMp6ZzmQ.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">末日金字塔，或“哈都肯密码”</figcaption></figure><h1 id="881a" class="ks kt iq bd ku kv mo kx ky kz mp lb lc ld mq lf lg lh mr lj lk ll ms ln lo lp bi translated"><strong class="ak"> IF语句</strong></h1><p id="3fa0" class="pw-post-body-paragraph ju jv iq jw b jx mt jz ka kb mu kd ke kf mv kh ki kj mw kl km kn mx kp kq kr ij bi translated">考虑下面的代码:</p><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="ef95" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">如何才能避免这种情况？</strong></p><ul class=""><li id="780f" class="na nb iq jw b jx jy kb kc kf nc kj nd kn ne kr nf ng nh ni bi translated">使用<em class="lt">守卫报表</em></li><li id="1c6a" class="na nb iq jw b jx nj kb nk kf nl kj nm kn nn kr nf ng nh ni bi translated">将可选值与精确值进行比较(<a class="ae lx" href="https://medium.com/@bocato/tips-and-tricks-to-improve-your-swift-code-138a7d1e1bd8" rel="noopener">我上一篇文章中的技巧1</a>)</li><li id="6fc5" class="na nb iq jw b jx nj kb nk kf nl kj nm kn nn kr nf ng nh ni bi translated">用上下文名称提取变量的验证</li><li id="07ac" class="na nb iq jw b jx nj kb nk kf nl kj nm kn nn kr nf ng nh ni bi translated">代码格式/组织</li></ul><p id="7268" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">一些可能的重构</strong></p><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="my mz l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">示例1</figcaption></figure><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="my mz l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">示例2</figcaption></figure><h1 id="97ec" class="ks kt iq bd ku kv mo kx ky kz mp lb lc ld mq lf lg lh mr lj lk ll ms ln lo lp bi translated">关闭</h1><p id="c293" class="pw-post-body-paragraph ju jv iq jw b jx mt jz ka kb mu kd ke kf mv kh ki kj mw kl km kn mx kp kq kr ij bi translated">或者说，所谓“回调地狱”。</p><p id="6653" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">考虑下面的代码:</p><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="2d30" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们该如何解决这个问题？</p><ul class=""><li id="3da8" class="na nb iq jw b jx jy kb kc kf nc kj nd kn ne kr nf ng nh ni bi translated">调度组</li><li id="ca28" class="na nb iq jw b jx nj kb nk kf nl kj nm kn nn kr nf ng nh ni bi translated">信号灯</li></ul><p id="4269" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">一些可能的重构</strong></p><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="my mz l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">调度组</figcaption></figure><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="my mz l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">信号灯</figcaption></figure><p id="8902" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">注:</strong>我<strong class="jw ir"> </strong>建议多读一些关于<strong class="jw ir">信号量</strong>和<strong class="jw ir">调度组</strong>的内容，因为这里展示的例子只是简单的使用它们的基本功能。</p><p id="851b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">建议学习来源:<br/></strong>-<a class="ae lx" href="https://www.raywenderlich.com/5371-grand-central-dispatch-tutorial-for-swift-4-part-2-2" rel="noopener ugc nofollow" target="_blank">Swift大中央调度教程4: Part 2/2 </a> <br/> - <a class="ae lx" href="https://www.swiftbysundell.com/articles/a-deep-dive-into-grand-central-dispatch-in-swift/" rel="noopener ugc nofollow" target="_blank">深入了解Swift大中央调度</a> <br/> - <a class="ae lx" href="https://www.youtube.com/watch?v=JHqxmBFrWl8" rel="noopener ugc nofollow" target="_blank">高级Swift:回调地狱网络调用—异步等待样式修复</a> <br/> - <a class="ae lx" href="https://www.youtube.com/watch?v=6rJN_ECd1XM" rel="noopener ugc nofollow" target="_blank">何时信号量vs调度组！小心多线程共享资源</a></p><h1 id="2d00" class="ks kt iq bd ku kv mo kx ky kz mp lb lc ld mq lf lg lh mr lj lk ll ms ln lo lp bi translated">结论</h1><p id="e52f" class="pw-post-body-paragraph ju jv iq jw b jx mt jz ka kb mu kd ke kf mv kh ki kj mw kl km kn mx kp kq kr ij bi translated">我们可以看到，逃离末日金字塔模式并没有那么难。只需简单的改进，你的代码就可以变得更具可读性，下一个看到你的代码的人也不必花很多时间去理解它。</p></div></div>    
</body>
</html>