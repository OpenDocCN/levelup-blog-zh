<html>
<head>
<title>Load Balancing on Google Cloud Platform (GCP): Why and How</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌云平台(GCP)上的负载平衡:为什么和如何</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/load-balancing-on-google-cloud-platform-gcp-why-and-how-a8841d9b70c?source=collection_archive---------0-----------------------#2020-09-22">https://levelup.gitconnected.com/load-balancing-on-google-cloud-platform-gcp-why-and-how-a8841d9b70c?source=collection_archive---------0-----------------------#2020-09-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0f4f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">您有两种选择:纵向扩展或横向扩展</h2></div><p id="1ac5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由IOD专家塞缪尔·詹姆斯</p><p id="5b5e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你是一个在DevOps或软件开发团队工作的人，你可能听说过这样一句话“<a class="ae lb" href="https://aws.amazon.com/blogs/enterprise-strategy/enterprise-devops-why-you-should-run-what-you-build/" rel="noopener ugc nofollow" target="_blank">你建立它，你运行它</a>”，这是亚马逊首席技术官沃纳·威格尔在2016年创造的。<strong class="kh ir">这种态度主导了DevOps方法。</strong></p><p id="f714" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现代应用程序服务于来自世界各地不同地理区域的用户的数百万个请求。团队必须找到一种有效的方式在服务器之间分配工作负载，以最大限度地提高速度和容量利用率。</p><p id="791d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">在这篇文章中，你将了解负载平衡在云中是如何工作的，</strong>特别是在<a class="ae lb" href="https://cloud.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌云平台上，</a>以及哪些负载平衡器可供你使用。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/8d8ae877fccf9e215bdc10ad68f1d6a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xaIymdUxmx-aH4fk.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated">图1:负载平衡的简单示例</figcaption></figure><blockquote class="ls"><p id="fa68" class="lt lu iq bd lv lw lx ly lz ma mb la dk translated">云中负载平衡的主要目标之一是防止服务器崩溃或过载。</p></blockquote><p id="bfa5" class="pw-post-body-paragraph kf kg iq kh b ki mc jr kk kl md ju kn ko me kq kr ks mf ku kv kw mg ky kz la ij bi translated">负载平衡器可以是基于硬件的，也可以是基于软件的。基于硬件的负载平衡器是物理硬件，本质上是专用系统(盒子)，其主要目的是平衡服务器之间的信息流。相反，基于软件的负载平衡器运行在标准操作系统和硬件(PC、台式机)上。</p><p id="9a8e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">基于硬件的负载平衡器需要机架和专用设备，而基于软件的平衡器安装在虚拟机和标准x86服务器上。</p><p id="99c1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">基于硬件的负载平衡器通常要求您提供足够的负载平衡器来满足不断增长的网络流量需求。这意味着，几个负载平衡器将不得不保持空闲，直到网络流量增加，例如，在<a class="ae lb" href="https://info.avinetworks.com/hubfs/443964/Avi_Website_Resource_Center/load-balancer-black-friday-survival-guide-ebook.pdf" rel="noopener ugc nofollow" target="_blank">黑色星期五</a>。</p><h1 id="fa1f" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">为什么要负载平衡</h1><p id="2b80" class="pw-post-body-paragraph kf kg iq kh b ki mz jr kk kl na ju kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">单台计算机在给定时间内可以处理的请求数量是有限制的。当面对突然激增的请求时，您的应用程序将加载缓慢，网络将超时，并且您的服务器将吱吱作响。您有两种选择:纵向扩展或横向扩展。</p><p id="360f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当您纵向扩展(垂直扩展)时，您可以根据需要向现有的单台机器添加更多存储(磁盘)或处理能力(RAM、CPU ),从而增加单台机器的容量。但是向上扩展是有限制的——你会到达一个不能添加更多RAM或CPU的点。</p><p id="dffa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">更好的策略是向外扩展(水平扩展)，这涉及到在处理工作负载所需的尽可能多的服务器上分配负载。在这种情况下，您可以通过向现有的资源池中添加更多的物理机来无限扩展。</p><h1 id="f137" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">好处</h1><p id="4f8c" class="pw-post-body-paragraph kf kg iq kh b ki mz jr kk kl na ju kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">负载平衡的好处包括:</p><h2 id="fec0" class="ne mi iq bd mj nf ng dn mn nh ni dp mr ko nj nk mt ks nl nm mv kw nn no mx np bi translated">防止网络服务器过载</h2><p id="2758" class="pw-post-body-paragraph kf kg iq kh b ki mz jr kk kl na ju kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">当在云中使用负载平衡器时，您可以在几个服务器、网络单元、<a class="ae lb" href="https://iamondemand.com/blog/google-anthos-azure-arc-aws-outposts-the-race-to-dominate-hybrid-and-multicloud/" rel="noopener ugc nofollow" target="_blank">数据中心和云提供商</a>之间分配您的工作负载。这可让您在流量激增时有效防止网络服务器过载。</p><h2 id="3f4d" class="ne mi iq bd mj nf ng dn mn nh ni dp mr ko nj nk mt ks nl nm mv kw nn no mx np bi translated">高可用性</h2><p id="a5f3" class="pw-post-body-paragraph kf kg iq kh b ki mz jr kk kl na ju kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">高可用性的概念意味着无论何时系统组件停机或出现故障，您的整个系统都不会关闭。如果一个节点出现故障，您可以使用负载平衡器将请求简单地重定向到健康的节点。</p><h2 id="9fb3" class="ne mi iq bd mj nf ng dn mn nh ni dp mr ko nj nk mt ks nl nm mv kw nn no mx np bi translated">更好的资源利用率</h2><p id="9981" class="pw-post-body-paragraph kf kg iq kh b ki mz jr kk kl na ju kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">负载平衡的核心原则是跨数据中心并通过多种资源(如磁盘、服务器、集群或计算机)高效地分配工作负载。它最大化了吞吐量，优化了可用资源的使用，避免了任何单个资源的过载，并最小化了响应时间。</p><h2 id="a8a2" class="ne mi iq bd mj nf ng dn mn nh ni dp mr ko nj nk mt ks nl nm mv kw nn no mx np bi translated">防止单一故障源</h2><p id="2eba" class="pw-post-body-paragraph kf kg iq kh b ki mz jr kk kl na ju kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">负载平衡器能够通过各种算法和健康检查技术来检测集群中的不健康节点。出现故障时，负载可以转移到不同的节点，而不会影响您的用户，从而为您提供解决问题的时间，而不是将其视为紧急情况。</p><h1 id="23e5" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">谷歌云平台上的负载平衡(GCP)</h1><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nq"><img src="../Images/8713e70feb5c2d24aeb1ec105526c4d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NiKh-SA3J_BlvhQ7.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated">图2: GCP负载均衡，来源:<a class="ae lb" href="https://cloud.google.com/load-balancing/docs/https" rel="noopener ugc nofollow" target="_blank">谷歌云平台</a></figcaption></figure><p id="7075" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">选择谷歌云平台作为他们<a class="ae lb" href="https://iamondemand.com/blog/the-landlords-of-the-net-oligopoly-in-the-cloud-market/" rel="noopener ugc nofollow" target="_blank">首选云提供商</a>的组织的一个常见问题是:GCP上有哪些负载平衡器产品可以有效地平衡他们的工作负载。在本节中，我将通过深入研究GCP上的负载平衡来回答这个问题。</p><p id="a8ec" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如今，许多高流量网站同时服务于数百(甚至数百万)个来自客户/用户的请求，并以可靠和快速的方式返回正确的应用数据、视频、图像或文本。</p><p id="a4dc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">随着网络流量的增加，当应用程序后端不能有效地扩展时，我们通常会遇到连接超时错误和长时间等待。</p><p id="6bdd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从逻辑上来说，人们可能会说增加更多的后端服务器可以解决流量问题，但有效的资源利用成为人们必须处理的下一个问题。诸如如何根据容量有效地将流量分配给后端服务器，以及如何停止向不健康的后端服务器发送流量等问题必须得到解答。</p><p id="14bc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这就是GCP负载平衡的用武之地。</p><p id="3164" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">负载平衡器是GCP上的托管服务，它在应用程序的多个实例之间分配流量。GCP承担着管理运营开销的负担，并降低了应用程序无法正常运行、运行缓慢或负担过重的风险。</p><p id="5be6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们看看GCP上不同类型的负载平衡。</p><h2 id="9206" class="ne mi iq bd mj nf ng dn mn nh ni dp mr ko nj nk mt ks nl nm mv kw nn no mx np bi translated">全局负载平衡(GLB)</h2><p id="8fb1" class="pw-post-body-paragraph kf kg iq kh b ki mz jr kk kl na ju kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">全局负载平衡(GLB)是一种在位于不同地理区域的连接服务器资源之间分配流量的实践，它将您的工作负载分布在全球，而不是分布在单个数据中心。现代应用用户在本质上是分布的，你的app离你的用户越远，来回传输数据的时间就越长。具有全球负载平衡器的全球服务器池可确保您的用户能够连接到地理位置靠近他们的服务器。</p><p id="c468" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">全局负载平衡器提供增强的流量管理和灾难恢复优势，以优化应用程序的性能。您可以将GLB服务视为跨多个地理位置/地区托管的系统，这些系统可以平衡规模单位、端点和应用程序戳之间的负载。与Azure和AWS不同，GCP全球负载平衡器可用于管理跨多个区域部署的资源，而无需网络对等配置和复杂的VPN。</p><p id="8065" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">(注意:当您使用GCP的全球负载平衡器时，请使用<a class="ae lb" href="https://cloud.google.com/network-tiers/docs/overview" rel="noopener ugc nofollow" target="_blank">网络服务等级</a>的高级等级。)</p><h2 id="d8d1" class="ne mi iq bd mj nf ng dn mn nh ni dp mr ko nj nk mt ks nl nm mv kw nn no mx np bi translated">区域负载平衡</h2><p id="7bf6" class="pw-post-body-paragraph kf kg iq kh b ki mz jr kk kl na ju kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">区域负载平衡允许您通过位于同一区域的服务器池来分担工作负载。一些企业服务于特定地区的客户，可能是特定国家的利基市场。但是它们的工作负载可能超出了单个服务器所能处理的范围。此类企业可能在靠近其客户的区域拥有一批服务器来处理工作负载。</p><p id="3b0a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这就是区域负载平衡器发挥作用的地方。您可以将它们视为负载平衡器，在同一区域内的集群、容器或虚拟机之间平衡负载。</p><h2 id="401e" class="ne mi iq bd mj nf ng dn mn nh ni dp mr ko nj nk mt ks nl nm mv kw nn no mx np bi translated">外部负载平衡(ELB)</h2><p id="5b03" class="pw-post-body-paragraph kf kg iq kh b ki mz jr kk kl na ju kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">外部负载均衡支持<a class="ae lb" href="https://cloud.google.com/compute/docs/instance-groups" rel="noopener ugc nofollow" target="_blank">实例组</a>、<a class="ae lb" href="https://cloud.google.com/load-balancing/docs/negs/zonal-neg-concepts" rel="noopener ugc nofollow" target="_blank">区域网络端点组(NEGs) </a>、<a class="ae lb" href="https://cloud.google.com/storage/docs" rel="noopener ugc nofollow" target="_blank">云存储中的桶</a>、<a class="ae lb" href="https://cloud.google.com/load-balancing/docs/negs/serverless-neg-concepts" rel="noopener ugc nofollow" target="_blank">无服务器NEGs </a>和<a class="ae lb" href="https://cloud.google.com/load-balancing/docs/negs/internet-neg-concepts" rel="noopener ugc nofollow" target="_blank">互联网NEGs </a>。您可以使用ELB来支持web、应用程序和数据库层服务。</p><p id="1e87" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">外部负载平衡还支持基于内容的负载平衡和跨区域负载平衡，您可以通过高级层进行配置。这两个服务将使用不同的后端服务，每个服务在多个地区都有neg和后端实例组。当您使用高级层时，外部负载平衡器还会从不同的存在点通告相同的全局外部IP地址，并将流量路由到最近的Google前端。</p><h2 id="7fe1" class="ne mi iq bd mj nf ng dn mn nh ni dp mr ko nj nk mt ks nl nm mv kw nn no mx np bi translated">内部负载平衡(ILB)</h2><p id="ad68" class="pw-post-body-paragraph kf kg iq kh b ki mz jr kk kl na ju kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">借助内部负载平衡，您可以在内部IP地址后运行您的应用程序，并将HTTP/HTTPs流量分散到托管在Google Kubernetes Engine (GKE)或Google Compute Engine (GCE)上的后端应用程序。</p><p id="50be" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">内部负载平衡器是一项托管服务，只能通过内部IP地址和虚拟私有云网络的选定区域进行访问。您可以使用它来路由和平衡虚拟机的负载流量。在较高层次上，内部负载平衡器由负载平衡器向其转发流量的一个或多个后端服务和客户端向其发送流量的内部IP地址组成。</p><p id="7c5f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">内部负载平衡器使用一个<a class="ae lb" href="https://cloud.google.com/load-balancing/docs/url-map-concepts" rel="noopener ugc nofollow" target="_blank"> URL映射</a>和健康检查来提供负载平衡服务。它们是改进遗留应用程序的有用工具，并支持web应用程序和数据库层服务。</p><h2 id="2d24" class="ne mi iq bd mj nf ng dn mn nh ni dp mr ko nj nk mt ks nl nm mv kw nn no mx np bi translated">TCP/SSL负载平衡</h2><p id="617e" class="pw-post-body-paragraph kf kg iq kh b ki mz jr kk kl na ju kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">TCP/SSL负载平衡允许您跨位于计算引擎区域内的虚拟机实例池分发TCP流量。您可以使用TCP/SSL负载平衡器在负载平衡层终止用户SSL (TSL)连接；TCP或SSL协议将平衡后端实例之间的连接。</p><p id="1f6e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以在全球范围内部署TCP/SSL负载平衡器，并使用它们来管理特定和众所周知的端口上的非HTTP(s)流量和TCP流量的开销。当您在不同地区拥有多项服务时，TCP/SSL负载平衡器会自动检测最近的有容量的位置，并相应地引导您的流量。当您在GCP上使用TCP/SSL负载平衡器时，您应该确保使用<a class="ae lb" href="https://cloud.google.com/network-tiers/docs/overview" rel="noopener ugc nofollow" target="_blank">网络服务层</a>的高级层；否则，负载平衡将成为区域性服务，其中所有后端都必须位于负载平衡器的转发规则和外部IP地址所使用的区域中。</p><h2 id="4c33" class="ne mi iq bd mj nf ng dn mn nh ni dp mr ko nj nk mt ks nl nm mv kw nn no mx np bi translated">TCP代理负载平衡</h2><p id="5091" class="pw-post-body-paragraph kf kg iq kh b ki mz jr kk kl na ju kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">TCP代理负载平衡(TPLB)是一种全局平衡服务，适用于不间断的非HTTP流量。它是在谷歌前端(GFEs)上实现的，这些前端是全球分布的，并向IP地址提供经过错误检查的可靠数据包流，这些IP地址不容易被破坏或丢失。</p><p id="b3d1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以使用TCP代理负载平衡器来终止您的客户TCP会话，还可以使用SSL或TCP将流量转发到您的虚拟机实例。这些实例可以位于不同的区域，平衡器会将流量定向到最近的具有最高容量的区域。当您使用TCP代理负载平衡器时，您只能有一个后端服务，它可以在多个区域有后端。TCP负载平衡器的组件是转发规则/地址和目标代理。</p><p id="1c14" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">TCP负载平衡适合在处理TCP流量时使用，并且不需要任何SSL卸载。</p><h1 id="8d46" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">在GCP创建您的第一个负载平衡器</h1><p id="3f76" class="pw-post-body-paragraph kf kg iq kh b ki mz jr kk kl na ju kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">在本节中，您将学习如何在GCP上创建负载平衡器。</p><p id="aa4e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于生产工作负载，您应该通过像<a class="ae lb" href="https://www.terraform.io/" rel="noopener ugc nofollow" target="_blank"> terraform </a>这样的机器可读代码来管理和配置您的资源，而不是通过web浏览器。但是为了简单起见，本例中使用的负载平衡器将从GCP控制台提供。</p><p id="8a8b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">(注意:要访问GCP，你需要有一个谷歌账户。你可以点击<a class="ae lb" href="https://accounts.google.com/SignUp" rel="noopener ugc nofollow" target="_blank">这个链接</a>来创建一个。)</p><p id="0c3a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们开始吧。</p><h1 id="8956" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">步骤1:创建一个实例组</h1><p id="26d1" class="pw-post-body-paragraph kf kg iq kh b ki mz jr kk kl na ju kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">登录<a class="ae lb" href="https://console.cloud.google.com/getting-started?authuser=1" rel="noopener ugc nofollow" target="_blank"> GCP仪表板</a>，点击“计算引擎”，然后点击“实例组”</p><p id="a635" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">计算引擎准备就绪后，单击“创建实例组”</p><p id="86bb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输入名称和描述，然后选择区域(可以使用单个或多个区域)和区域，创建实例模板，并单击“创建”</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nr"><img src="../Images/261a273e81eddcda5bc0eb6eba212147.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eqefFrQagPF8ZIrr.png"/></div></div></figure><h1 id="152c" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">步骤2:创建一个HTTP(s)负载平衡器</h1><p id="515a" class="pw-post-body-paragraph kf kg iq kh b ki mz jr kk kl na ju kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">要创建HTTP(s)负载平衡器，请导航到“网络服务”并单击“负载平衡”，然后单击“创建负载平衡器”</p><p id="804f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">单击HTTP(s)负载平衡选项下的“开始配置”按钮。</p><p id="d291" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">选择第一个选项，然后单击“继续”HTTP(s)负载平衡器将管理从互联网到虚拟机的web应用程序流量分配。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/c5740653ccff9394b4ba4bc91ca2c10c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/0*3E9hHwg3hLWXd77Q.png"/></div></figure><p id="0fa3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">设置后端配置和前端配置。</p><p id="1bb6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输入负载平衡器名称，选择后端配置，填写必要的信息，创建运行状况检查，然后创建后端服务。运行状况检查将有助于确保计算引擎仅将流量路由到运行状况良好的现有实例。见下图:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nt"><img src="../Images/3855473fbea14b38e1289797c0505342.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rpS5BgGMdr6N4ZdJ.png"/></div></div></figure><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nr"><img src="../Images/29bc678f967c9bb116b217aa5eac38ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GVUp2eMjhW_uAcWi.png"/></div></div></figure><p id="21a2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">单击“主机和路径规则”，并确认选择了新创建的后端服务。</p><p id="174f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要创建前端配置，请单击“前端配置”，输入名称，然后单击IP地址框以保留新的静态IP地址。之后，点击“添加前端IP和端口”</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nq"><img src="../Images/c3be0abe36975db66de5700f3f29baec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SZp7OfvQXyoBmwnw.png"/></div></div></figure><p id="4ab0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">单击“审查并最终确定”选项卡，确认一切检查完毕。如果你对配置没意见，那么你可以简单地点击“创建”按钮。</p><p id="fd2f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">恭喜，您现在已经在GCP上创建了您的第一个负载平衡器。</p><p id="802a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意:您可以单击新创建的负载平衡器来查看其详细信息(如下所示)。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nq"><img src="../Images/97d7e9cfae3a6328b4b01e31fb562968.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Xou9qHmEFcbjpC6k.png"/></div></div></figure></div><div class="ab cl nu nv hu nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ij ik il im in"><p id="2a8c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ob">这篇文章最初部分发表在IOD博客</em><a class="ae lb" href="https://iamondemand.com/blog/" rel="noopener ugc nofollow" target="_blank"><em class="ob"/></a><em class="ob">上，这是一个由技术专家撰写的技术文章集。</em></p></div></div>    
</body>
</html>