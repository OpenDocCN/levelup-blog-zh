<html>
<head>
<title>Create an SFTP server in MS Azure — the easy way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在MS Azure中创建一个SFTP服务器——简单的方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-an-sftp-server-in-ms-azure-the-easy-way-ceac015f94eb?source=collection_archive---------9-----------------------#2022-12-30">https://levelup.gitconnected.com/create-an-sftp-server-in-ms-azure-the-easy-way-ceac015f94eb?source=collection_archive---------9-----------------------#2022-12-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="e738" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经过多年的等待，现在终于可以在MS Azure中设置一个SFTP服务器，只需点击几下鼠标。</p><p id="c1a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Microsoft Azure平台支持几种类型的blob存储选项。利用传统分层文件系统(说白了就是使用可能嵌套在其他文件夹中的文件和文件夹)的Azure Data Lake Storage Gen2现在支持SSH文件传输协议(SFTP)。因此，我们可以创建一个文件存储帐户，并通过SFTP端点安全地连接到该帐户，以进行文件访问、文件传输和文件管理。这在处理不支持其他数据连接方式的系统时特别有用，比如REST APIs或NFS。</p><p id="7b76" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇文章中，我将描述如何创建存储帐户，配置它，并通过SFTP协议一步一步地连接到它。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/f5ac608b2e2ad580a639a026d31998d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4ALw-viSMJB95U2y"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated"><a class="ae lb" href="https://unsplash.com/@growtika?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Growtika开发商营销机构</a>在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="8fc2" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">先决条件</h1><p id="0843" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">整个过程非常简单，不会超过10分钟。我希望如果你正在阅读这篇文章，你已经有了:</p><ul class=""><li id="bb58" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">MS Azure订阅</li><li id="ff66" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">Azure资源组</li><li id="9d64" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">配置Azure资源的一般知识</li></ul><h1 id="fe26" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">调配存储帐户</h1><p id="add6" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">让我们从创建新的存储帐户开始。导航到Azure门户，打开计划部署服务器的资源组。</p><p id="23fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击<strong class="jp ir">创建</strong>按钮打开Azure marketplace。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/3e1a9ca1c70704d976bfcb677430a898.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*B1cIcj3up_2TlO2obIW7GQ.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="b844" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">搜索<strong class="jp ir">存储账户</strong>，找到微软提供的选项，然后点击<strong class="jp ir">创建→存储账户</strong>。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mu"><img src="../Images/18d9388615a8dedbf754df443aae99b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oGXaBLfXAq017yE0g4_WQA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="b940" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们会看到一个表单，提供一些关于存储帐户的一般信息，以及它的配置细节。</p><p id="b34a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<strong class="jp ir">基础</strong>页面，验证<strong class="jp ir">订阅</strong>和<strong class="jp ir">资源组</strong>详细信息选择正确。为存储帐户选择一个<strong class="jp ir">名称</strong>—它将用于标识我们资源组中的资源，但更重要的是，该名称也将是我们将与用户共享的连接字符串的一部分。选择一个离我们服务器用户最近的<strong class="jp ir">区域</strong>。可选地，我们可以改变<strong class="jp ir">性能</strong>和<strong class="jp ir">冗余</strong>配置。标准性能和本地冗余存储(LRS)是最便宜的选择，至少在开始时应该足够了。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/c7c483de058e4c557d8d7e3a37499430.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z30qURg80Ox5xGNdPxHfkA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="2dfa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<strong class="jp ir">高级</strong>页面，我们需要更改两个设置。首先，单击<strong class="jp ir">启用分层名称空间</strong>，将我们的存储帐户类型更改为Data Lake Storage Gen2。这意味着存储将支持文件夹结构，它还将允许我们选择<strong class="jp ir">启用SFTP </strong>选项，这是我们试图实现的核心目标。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mw"><img src="../Images/34d0111cfbd390ea155527dff117b4ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u5ZmoaN93UPCuJ2i-Cuu1Q.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="6c27" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您有特定的偏好，您可以在“网络”、“数据保护”、“加密”和“标签”页面上更改配置。如果您不确定可用选项的含义，您可以保留默认设置，并在将来需要时随时更改它们。</p><p id="be79" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完成配置后，切换到页面<strong class="jp ir">查看</strong>。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/eed1dc187d5ee10149870f0e194af934.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*DYD_OLMXSy9KStQiki6dZQ.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="294e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，您将看到配置的概述。Azure还将验证整个配置，并在订阅策略出现任何问题或冲突时显示错误(例如，如果您无权在所选资源组或区域中创建资源)。</p><p id="bde5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您没有看到任何错误，您可以单击页面底部的<strong class="jp ir"> Create </strong>按钮来配置资源。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi my"><img src="../Images/71b9accded4728ff36b2b94db6338f92.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*tigVkggABDYW6abgV6FUEw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="2781" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">几秒钟后，您应该会被重定向到新创建的资源。</p><p id="8666" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在存储帐户的概述中，您应该看到SFTP已启用。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mz"><img src="../Images/40c6b449d1610deb75ced7d713474fb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dbFNeF0PHdWu4qHiXQPWQQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="8d22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击<strong class="jp ir">启用</strong>链接打开SFTP设置。或者，您可以通过左侧导航菜单中的<strong class="jp ir"> SFTP </strong>选项打开它。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi na"><img src="../Images/c8c43eeccaddf6c769abedbdae2403da.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*saS54srVc9riuGpBztx6kQ.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><h1 id="d667" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">打开和关闭SFTP</h1><p id="9ecf" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">可以在SFTP设置中启用或禁用SFTP端点。在某些用例中，当您不需要SFTP时，禁用它可能是有意义的，因为保持它的启用有每小时的成本。我们将在本文的定价部分详细介绍这一点。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nb"><img src="../Images/e4fcd86af7283eddf2e6c850d8eb2a55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UFdciqziZsQKSvzgq-klQQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><h1 id="7def" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">创建本地用户和处理权限</h1><p id="0001" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">到目前为止，我们已经调配了存储帐户，并了解了如何启用或禁用SFTP端点。为了能够通过SFTP连接到文件服务器，我们需要添加至少一个本地用户帐户，并为其生成凭据。</p><p id="37e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在SFTP设置中，点击<strong class="jp ir">添加本地用户</strong>按钮。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nb"><img src="../Images/b1ef00ec3c15a65cc05dd844f8569c6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wErDPC0ooyEwUr6fQfLMfA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="77eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将打开一个弹出窗口，提示我们为该用户选择用户名和身份验证方法。在本文中，我们选择<strong class="jp ir"> SSH密码</strong>作为认证方法。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/4ab6d077f394529084b8476fe5df9917.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*q5q_GCj35Tq1I_DWuvf3Tg.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="395e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击<strong class="jp ir">下一步</strong>继续。</p><p id="4011" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们必须设置本地用户帐户的权限。权限是在存储容器级别上授予的。您可以将容器视为存储帐户中文件夹和文件层次结构顶部的“第一个文件夹”。因为我们还没有在帐户中创建任何容器，我们可以点击<strong class="jp ir">创建新的</strong>链接，为容器提供名称和公共访问级别设置，并通过点击<strong class="jp ir"> OK </strong>按钮进行确认。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nd"><img src="../Images/3e4ed4365f3ba2815bdce67c9d225edd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rA7j-GnAUdnQk9abzkuzOw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="fcee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以创建和选择任意数量的容器，并为每个容器配置不同的权限。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/5af5827a23bf448b49df9110fb98a55a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*q6dcPlP2BWuNWTchTF3Frw.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="48dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">可以从每个容器旁边的下拉菜单中选择权限级别。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nf"><img src="../Images/77c3318dcb3e4835a1b1c62fdbba7787.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EsIcvrPQWLaRpWd_rq2x7A.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="f41d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以为这个本地用户提供一个默认的登录目录。这是用户连接到服务器时将打开的目录。因为我们的容器中还没有任何文件夹，所以我们将传递容器的名称作为默认目录。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/0f27fee8d5e58811a2f096e3187bc205.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*bXZ5i34e8vpmdV8lTJZlCQ.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="45d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，点击<strong class="jp ir">添加</strong>按钮保存这个新的用户设置。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/8bb07fc7507f62ba87f83b11fb21fb15.png" data-original-src="https://miro.medium.com/v2/resize:fit:462/format:webp/1*jswh5myvdRDKWfMW5Ej2fA.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="794b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">几秒钟后，将创建本地用户帐户，我们将看到一个弹出窗口，显示为用户生成的密码。复制密码并将其安全存储非常重要，因为我们将无法再次访问它，只能在将来生成新密码。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/a1bbbaa1c6e44d75e5b828d8a59f3e40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*xC_o8TeshpxntR-0ESsXxg.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="23c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">复制密码后，您可以关闭弹出窗口。您将在SFTP设置中看到新创建的用户。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nj"><img src="../Images/6c91aff87eccfd132b594c61021154bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qe04qSihDx-_EwwR4da_Dw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><h1 id="57dd" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">测试连接</h1><p id="281c" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">现在一切都设置好了，我们可以使用本地用户凭证连接到服务器。为此，我们需要:</p><ul class=""><li id="61e7" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated"><strong class="jp ir">服务器(主机)名称</strong> —您会发现它是“@”字符后面的连接字符串的最后一部分。在我们的示例中，它是“sftpservermedium . blob . core . windows . net”(根据您为存储帐户输入的名称，它会有所不同)。</li><li id="02b7" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated"><strong class="jp ir">端口号</strong> — 22(默认值)。</li><li id="0712" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated"><strong class="jp ir">用户名</strong>——格式为{存储帐户名}。{用户名}。在我们的例子中，它是“sftpservermedium.demouser”。</li><li id="6f50" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated"><strong class="jp ir">密码</strong> —保存本地用户账号时生成。</li><li id="105b" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated"><strong class="jp ir">具有SFTP支持的客户端</strong> —例如WinSCP或类似产品。</li></ul><p id="3a1d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">打开SFTP客户端并开始新的会话。输入连接详细信息并尝试登录。以下是它在WinSCP中的外观示例。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nk"><img src="../Images/d15867cfb3360ad9dcca0640e5710a1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BmHLOuedMUJWPgMLUzIXog.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="6127" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就这样，我们成功登录了服务器。</p><p id="77d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">到目前为止，服务器中没有任何文件，所以让我们上传一个文件来验证连接是否真的有效。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nk"><img src="../Images/be74e0dd7c52fadd342a75f4fc63861d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SnFPXD7mV3DJIf4PlkpAlQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="35fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在在浏览器中切换回Azure门户，点击左侧导航菜单中的<strong class="jp ir">容器</strong>，打开我们上传测试文件的容器。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nl"><img src="../Images/f271e912b65a9165e5d4662c4e9abd5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*at5zrbzUpxT54QfHAsm-Eg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="92df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">文件就在那里，所以连接正常工作。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nm"><img src="../Images/6516d0d3d1e0fda3b151976bc75a9eba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YSuVNfsJ9gqstNZ37RyyFA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><h1 id="162b" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">定价</h1><p id="2a79" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">让我们来回答一下在尝试Azure新功能时我们都会问自己的两个问题。</p><h2 id="8bbb" class="nn ld iq bd le no np dn li nq nr dp lm jy ns nt lq kc nu nv lu kg nw nx ly ny bi translated">要花多少钱？</h2><p id="f407" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">在Azure中运行支持SFTP的存储帐户的成本分为两部分。</p><p id="bd58" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先是存储帐户本身的<strong class="jp ir">价格</strong>。这一成本与您在服务器上存储的数据量以及您执行的操作(例如读/写等)数量成正比。你可以使用<a class="ae lb" href="https://azure.microsoft.com/en-us/pricing/calculator/" rel="noopener ugc nofollow" target="_blank"> Azure价格计算器</a>来估算你的服务器配置成本。</p><p id="e51a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在将能力和操作设置为最小允许值后，您可以看到每月成本低于1美元。实际上，如果您利用的服务器容量和操作较少，成本可能会更低。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nz"><img src="../Images/5f54fab1c0059beb59d9fb951ac618c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sr4_o-u0-eNSDwXmZ2kCvA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">来源:图片由作者提供</figcaption></figure><p id="2dac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">成本的第二部分是启用SFTP的价格。启用SFTP端点需要按小时付费，将从2023年1月1日起生效。在写这篇文章的时候，确切的每小时价格还不知道，尽管传言说它将在每小时0.30美元左右。全天候启用SFTP端点每月大约花费220美元。</p><h2 id="d7cc" class="nn ld iq bd le no np dn li nq nr dp lm jy ns nt lq kc nu nv lu kg nw nx ly ny bi translated">如何降低成本？</h2><p id="5c79" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">你可能会认为每月支付200多美元购买一台SFTP服务器有点太贵了。你说的没错，确实有更便宜的选择，比如创建一个Linux虚拟机，我们可以在那里托管服务器。然而，这将需要更深入的技术知识和更多的初始设置和后期维护时间。</p><p id="975b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我看来，在MS Azure中支持SFTP的存储帐户的主要卖点就是在未来以最小的维护需求设置它是多么容易和快速。</p><p id="41c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">毕竟，降低成本有一个显而易见的方法— <strong class="jp ir">在不需要使用SFTP端点时将其禁用</strong>。如果你知道你只在周一到周五的工作时间(每天8小时)使用这个连接，你可以在不使用的时候禁用SFTP，这样可以节省大约170美元，这样每月的总成本大约是50美元。如果您只需要在集成运行的晚上连接几个小时，您可以进一步降低成本，您会明白的。</p><p id="3d1c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还可以使用Azure Automation<strong class="jp ir">按照计划</strong>自动启用和禁用SFTP端点。在以后的文章中会有更多的介绍。</p><h1 id="ddd7" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">结论</h1><p id="1122" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">MS Azure资源家族的这一新成员使得设置具有SFTP连接的文件服务器变得非常容易。我个人在从仍然依赖SFTP协议的应用程序导入文件时，在我的数据分析工作流程中使用它。</p><p id="1d1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望这个教程对你有用。请在评论中告诉我你对SFTP服务器有哪些使用案例，并关注我，获取更多关于所有数据的文章。</p></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><p id="3fc1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">阅读关于此主题的更多信息:<em class="oh"> <br/> </em> <a class="ae lb" href="https://learn.microsoft.com/en-us/azure/storage/blobs/secure-file-transfer-protocol-support" rel="noopener ugc nofollow" target="_blank"> SFTP对Azure Blob存储的支持|微软学习</a></p></div></div>    
</body>
</html>