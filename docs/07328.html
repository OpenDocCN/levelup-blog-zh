<html>
<head>
<title>Is It Possible to Predict Football Players’ Value</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有可能预测足球运动员的价值吗</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/is-it-possible-to-predict-football-players-value-617eafe8669b?source=collection_archive---------10-----------------------#2021-02-09">https://levelup.gitconnected.com/is-it-possible-to-predict-football-players-value-617eafe8669b?source=collection_archive---------10-----------------------#2021-02-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1292" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Web抓取和回归模型简介</h2></div><p id="2229" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我在伊斯坦布尔数据科学院数据科学训练营的第二个项目；我试图通过一名球员2019/2020赛季的统计数据来发现是否有可能确定他的价值。这个项目是关于获得网络抓取，回归模型和交叉验证的实践经验。我的目标是预测它们的价值。我从著名的足球价值和统计网站transfermarkt.de上搜集了数据。这里有一个关于价值的问题。它们是基于它们过去和当前性能的当前更新值。但是我用的数据是上一季的。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/cdf2fe691cca3b2f8134647c331acda0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-dSUeyyEuJOkMwBi"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">马里奥·克拉森在<a class="ae lr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h2 id="c709" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">通过网页抓取获取数据</h2><p id="5887" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">我从<a class="ae lr" href="https://fbref.com/en/comps/Big5/2019-2020/stats/players/2019-2020-Big-5-European-Leagues-Stats" rel="noopener ugc nofollow" target="_blank">2019–2020欧洲五大联赛统计(球员)| FBref.com</a>获取球员统计数据，从transfermarkt.de获取球员价值。首先，我从多个页面获取各种统计数据，包括进攻，防守，创造力，传球，射门和其他关键性能指标。我用BeautifulSoup分析了数据。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mq"><img src="../Images/8722286d095ac9a082d362491486a583.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r6thANiojnAZNKU5"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">瓦列里·塞索耶夫在<a class="ae lr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="4993" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我重复了上面的代码，然后将所有数据合并到一帧中。这是由seaborn heatmap函数创建的每个项目的相关性快照。</p><p id="f931" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">功能:位置、年龄、分钟、进球、进球游戏、辅助、辅助进球游戏、进球90、90s、SCA、SCA90、射门传球、射门Drib、GCA、GCA90、辅助传球、辅助Drib、完成传球、传球比、TotDistPass、ProgDistPass、传中、点球、AerialWonRate、射门Target、射门90、进球射门、铲球、TklDribbling、拦网、成功压比、匹配、积分匹配、触球区</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mt"><img src="../Images/21ed68e69454ae87b302588144fd9069.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zPRIbqBj3F9wCex2gOIW_A.png"/></div></div></figure><p id="42a0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为目标，我从transfermarkt.de获取数据。这些是估计值，因此它们都是四舍五入的。玩家的价值观呈倾斜分布。我们从理论上知道，当我们建立模型时，对称分布的数据将帮助我们获得更好的结果。对数转换帮助我们将扭曲的玩家值转换成更正常的分布。您可以看到应用变换后分布是如何变化的。</p><div class="lc ld le lf gt ab cb"><figure class="mu lg mv mw mx my mz paragraph-image"><img src="../Images/22b7d9c9a8f61e20ba2325189f098336.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*88lhLEyTElx43VnwOn3Zmg.png"/></figure><figure class="mu lg na mw mx my mz paragraph-image"><img src="../Images/2bfe62f82deb01c0abc412023ec75a57.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*yBgZGbGAAPgrrezxBNlaaQ.png"/><figcaption class="ln lo gj gh gi lp lq bd b be z dk nb di nc nd translated">玩家价值分布</figcaption></figure></div><h2 id="2b70" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">更好贴合的新功能</h2><p id="ebc7" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">年龄组而不是年龄组:我把数据分成与球员价值相关的组。</p><p id="652d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">赢家</strong>:在大俱乐部踢球对球员的市场价值总是积极的。为了确定这一点，我创建了一个名为winner的kpi，其计算公式如下:</p><p id="dddd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">winner = "每场比赛的点数" ^ 2 *比赛次数</p><p id="67cd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">目标改变创建者</strong>:我创建了一个kpi来确定对团队得分有影响的球员。而不是“助攻”，“射向目标”，“运球领先助攻”，“传球领先助攻”，“点球获胜”，“在第三区成功施压”。</p><p id="a565" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">被转换为分类变量的特征被转换为虚拟/指示变量:联赛和球员位置。一些联赛比其他的更有挑战性，所以同样的数据在那里更有价值。从数据集中，我们知道球员的价值与他的位置高度相关。</p><p id="9061" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我还删除了彼此高度相关的特征。例如，在罚球区触球的球员比其他球员进更多的球。</p><p id="9972" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我也不得不移除大部分替补球员；因为他们没有足够的统计数据。我们模型的预测性能严重依赖于数据；因此，删除数据意味着模型性能的下降。</p><p id="788f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于建模，我使用了scikit-learn库中的各种回归模型。为了更好地拟合，我为不同的位置创建了单独的模型。我为前锋、中场和防守队员训练了不同的模型。因为对于每个位置，特征的重要性可能不同。比如对于一个前锋位置来说，在对方禁区内触球的次数和球员的价值是非常相关的，但是对于一个防守球员来说却不是。</p><p id="cdb7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">交叉验证是成功的关键。对于训练数据和测试，我强烈推荐使用交叉验证。通过拥有不同的数据切片并对其进行训练，你将为现实生活中的挑战做好更充分的准备。Kfold 是一个很棒的自动化这个过程的功能，请检查一下。您可以在下面看到一个使用kfold进行交叉验证的简单代码。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="0f86" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在交叉验证和拟合多个模型后，线性回归是最好的一种，具有最小的MSE，优于其他回归方法。所以我用它来训练我的数据。</p><h2 id="3fd8" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">结果</h2><p id="b210" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">下面是一些球员vs他们Transfermarkt值的预测。为了显示更人性化的数字，我重新转换了这个值。这里有一些顶级球员和他们的转会市场价值与我的预测值(百万欧元)的对比，也有一个比较球员价值与预测的图表。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/41e07ee76811765cf7ef74a9eb431331.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/format:webp/1*-mt3S4lVByFmUEbQU0ak4Q.png"/></div></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nf"><img src="../Images/ced0caeb60b5577eec9571eebbdca606.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*wF9xcX0GxTEUrFUNdsRe7w.jpeg"/></div></div></figure><h2 id="3f1f" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">未来的工作</h2><p id="4d8e" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">有些问题是统计不出来的。作为未来的工作，我们需要找出如何克服这些问题。</p><ul class=""><li id="e74b" class="ng nh iq kh b ki kj kl km ko ni ks nj kw nk la nl nm nn no bi translated">团队成员可能会影响彼此的统计数据。</li><li id="e5f6" class="ng nh iq kh b ki np kl nq ko nr ks ns kw nt la nl nm nn no bi translated">替补球员缺少统计数据，所以我们正在丢失数据。</li><li id="1a26" class="ng nh iq kh b ki np kl nq ko nr ks ns kw nt la nl nm nn no bi translated">有些运动员容易受伤。俱乐部避免签下经常受伤的球员。</li><li id="6679" class="ng nh iq kh b ki np kl nq ko nr ks ns kw nt la nl nm nn no bi translated">如果他们有几个精英球员，球员在他们国家的受欢迎程度是很重要的。本田圭佑就是一个很好的例子。俱乐部可以支付他们的实际价值，以获得该地区的知名度。</li><li id="2190" class="ng nh iq kh b ki np kl nq ko nr ks ns kw nt la nl nm nn no bi translated">有些人能承受压力，有些人不行。大俱乐部需要能应对压力、能打大型比赛的球员。</li><li id="b1b7" class="ng nh iq kh b ki np kl nq ko nr ks ns kw nt la nl nm nn no bi translated">球员的领导能力，工作效率和职业道德至关重要。光有天赋是不够的。</li><li id="b165" class="ng nh iq kh b ki np kl nq ko nr ks ns kw nt la nl nm nn no bi translated">俱乐部的经济实力和声望。</li></ul><p id="deb7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请分享你对如何处理这些问题的见解。关于演示和代码，请检查我的github。</p><p id="d535" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢阅读。</p></div></div>    
</body>
</html>