<html>
<head>
<title>Bad practices you should avoid using Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你应该避免使用角</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/bad-practices-you-should-avoid-with-angular-development-58098e5542d5?source=collection_archive---------0-----------------------#2022-11-09">https://levelup.gitconnected.com/bad-practices-you-should-avoid-with-angular-development-58098e5542d5?source=collection_archive---------0-----------------------#2022-11-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/fe07b89618185289ecd3e42c15360303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SglEeE68NCDfJrak.jpg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">来源:<a class="ae kf" href="https://codeburst.io/three-best-angular-js-4-online-courses-3234a65dabfd" rel="noopener" target="_blank">https://code burst . io/three-best-angular-js-4-online-courses-3234 a 65 dab FD</a></figcaption></figure><h2 id="b753" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">❌不做的事情:用空订阅将正在处理的逻辑放到tap中</h2><p id="1b00" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm kp ln lo lp kt lq lr ls kx lt lu lv lw im bi translated">不要将您要实现的逻辑放在<strong class="le iu"> tap操作符</strong>中，并保持subscribe为空，以防您的可观察对象有很多订阅者。</p><p id="3f45" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">为什么？tap操作符主要用于缓存或日志记录等副作用，如果你把你的逻辑放在那里，每个用户都会调用tap逻辑，甚至不需要它</strong></p><p id="c082" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">但是！:</strong>这不是一个通用规则，它取决于您的使用情况，如果您希望所有订户都有此逻辑，或者您只有一个订户，并且您希望使用“异步管道”，那么我的规则不适用。</p><p id="4749" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">代码示例:</strong></p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="4f84" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">解决方案:</strong>使用订阅逻辑，不要点击</p><h2 id="6c73" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">订阅中不要做❌:错误函数只是一个<code class="fe mi mj mk ml b">console.error</code></h2><p id="a32c" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm kp ln lo lp kt lq lr ls kx lt lu lv lw im bi translated">不要使用<code class="fe mi mj mk ml b">console.error</code></p><p id="e5ab" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">对于错误处理，因为只记录错误并不抛出错误，而且要知道某些东西失败了，你的可观察对象不能继续执行</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="25dc" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">解决方案:</strong>使用提供的Rxjs操作符进行错误处理，以优雅地处理错误并重试逻辑</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h2 id="2796" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">不要做❌:一些3-4k线组件</h2><p id="c757" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm kp ln lo lp kt lq lr ls kx lt lu lv lw im bi translated">不要把所有东西都放在一个组件中，因为:</p><ul class=""><li id="2aab" class="mm mn it le b lf lx lj ly kp mo kt mp kx mq lw mr ms mt mu bi translated">很难重构</li><li id="bd47" class="mm mn it le b lf mv lj mw kp mx kt my kx mz lw mr ms mt mu bi translated">对其他开发人员来说可读性差</li><li id="0915" class="mm mn it le b lf mv lj mw kp mx kt my kx mz lw mr ms mt mu bi translated">打破组件思维概念的规则</li></ul><p id="b1c3" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">代码示例:(多行代码的随机组件示例)</strong></p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="e8ee" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">解决方案:</strong>总是考虑一个可重用的组件和关注点分离的父/子组件</p><figure class="mc md me mf gt ju gh gi paragraph-image"><div class="gh gi na"><img src="../Images/f53c47b05875259aa82b45edb40880e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/0*Qhf1i4HdwCNuBZwQ.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">来源:<a class="ae kf" href="https://v2.angular.io/docs/ts/latest/guide/architecture.html" rel="noopener ugc nofollow" target="_blank">https://v2 . angular . io/docs/ts/latest/guide/architecture . html</a></figcaption></figure><h2 id="27b1" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">不要在模板中做❌:大量的逻辑内联代码</h2><p id="1211" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm kp ln lo lp kt lq lr ls kx lt lu lv lw im bi translated">不要在模板中调用函数，因为这会:</p><ul class=""><li id="f4b9" class="mm mn it le b lf lx lj ly kp mo kt mp kx mq lw mr ms mt mu bi translated">影响应用程序的性能</li><li id="ddde" class="mm mn it le b lf mv lj mw kp mx kt my kx mz lw mr ms mt mu bi translated">以后很难进行重构</li></ul><p id="c9d7" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">代码示例:</strong></p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="af19" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">解决方案:</strong></p><p id="5ccc" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">解决方案是对你的数据进行手工计算或组合，或者使用<strong class="le iu">管道</strong>来增加代码的可读性和<strong class="le iu">的可重用性</strong></p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h2 id="b38d" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">难道❌:不用承诺来代替可观察的吗</h2><p id="f2cd" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm kp ln lo lp kt lq lr ls kx lt lu lv lw im bi translated">如果您使用带有角度组件的promises来处理HTTP请求或其他，您应该考虑这些<strong class="le iu">限制</strong>:</p><ul class=""><li id="5ea9" class="mm mn it le b lf lx lj ly kp mo kt mp kx mq lw mr ms mt mu bi translated">你不能轻易取消承诺。</li><li id="3c13" class="mm mn it le b lf mv lj mw kp mx kt my kx mz lw mr ms mt mu bi translated">你不能轻易重复或重试承诺</li></ul><p id="6ae9" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">代码示例</strong>:有承诺用途的角形部件</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h2 id="612f" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">不要在subscribe方法中进行❌:映射或转换数据</h2><p id="2217" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm kp ln lo lp kt lq lr ls kx lt lu lv lw im bi translated">不建议在订阅块中处理您的数据</p><p id="f553" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">为什么？</strong>想象一下，您有许多订户需要相同的转换，因此存在大量代码冗余</p><p id="fb21" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">并且订阅是同步调用，那么在转换完成之前，您将被阻止。</p><p id="d04d" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">代码示例:</strong></p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="2ce6" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">解决方案:你应该使用</strong><a class="ae kf" href="https://www.learnrxjs.io/operators/transformation/map.html" rel="noopener ugc nofollow" target="_blank"><strong class="le iu">Rxjs map</strong></a><strong class="le iu">操作符对你的数据进行</strong>预处理，因为很多订阅者都可以得到你的结果，你会获得一些代码逻辑(复用性)。</p><p id="cae7" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">Impac  t:性能改进</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h2 id="663a" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">不要❌:把一切都放在共享模块里</h2><p id="bdb9" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm kp ln lo lp kt lq lr ls kx lt lu lv lw im bi translated">共享模块是推荐的角度架构模式，用于组织常用的管道、指令和组件。</p><p id="d6db" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">但是随着时间的推移和应用程序规模的增长，您会发现自己在组件中引入了不需要的依赖项，这将影响到您的项目包的大小</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h2 id="dc53" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">很高兴做✔️:添加<strong class="ak"> $后缀</strong>为变量类型可观察</h2><p id="89bc" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm kp ln lo lp kt lq lr ls kx lt lu lv lw im bi translated"><strong class="le iu">后缀</strong> $用来表示某个变量是可观测的。它有助于区分正常变量和可观察变量</p><p id="a372" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">代码示例:</strong></p><pre class="mc md me mf gt nb ml nc nd aw ne bi"><span id="4ed6" class="kg kh it ml b gy nf ng l nh ni">const currentTimeSeconds = currentTimeMs.pipe(<br/>  map(currentTimeMs =&gt; currentTimeMs * 1000)<br/>)<br/></span></pre><p id="1a35" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">提高:</strong></p><p id="7b8e" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">用$后缀重命名您的可观察对象</p><pre class="mc md me mf gt nb ml nc nd aw ne bi"><span id="de7d" class="kg kh it ml b gy nf ng l nh ni">const currentTimeSeconds$ = currentTimeMs$.pipe(<br/>  map(currentTimeMs =&gt; currentTimeMs * 1000)<br/>)</span></pre><h2 id="945d" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">很高兴做✔️: <strong class="ak">在一个单独的文件中定义常数</strong></h2><p id="7f72" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm kp ln lo lp kt lq lr ls kx lt lu lv lw im bi translated">建议定义多个组件之间常用的全局常量</p><p id="789a" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">当您希望在整个应用程序中使用通用行为时很有帮助</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="cf11" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">并且你可以在一个单独的组件中使用这些<strong class="le iu">常量文件</strong>:</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h2 id="c5ff" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">来源:</h2><ul class=""><li id="4ca9" class="mm mn it le b lf lg lj lk kp nj kt nk kx nl lw mr ms mt mu bi translated"><a class="ae kf" href="https://www.reddit.com/r/Angular2/comments/xz4kpp/what_is_the_worst_angular_codebase_youve_worked_on/" rel="noopener ugc nofollow" target="_blank">https://www . Reddit . com/r/angular 2/comments/xz 4k PP/what _ is _ the _ worst _ angular _ code base _ youve _ worked _ on/</a></li><li id="709f" class="mm mn it le b lf mv lj mw kp mx kt my kx mz lw mr ms mt mu bi translated"><a class="ae kf" href="https://medium.com/showpad-engineering/why-you-should-never-use-function-calls-in-angular-template-expressions-e1a50f9c0496" rel="noopener">https://medium . com/showpad-engineering/why-you-should-never-use-function-calls-in-angular-template-expressions-E1 a50 F9 c 0496</a></li><li id="f380" class="mm mn it le b lf mv lj mw kp mx kt my kx mz lw mr ms mt mu bi translated"><a class="ae kf" href="https://www.elite-corner.com/2020/06/how-to-define-global-constantsvariables-in-angular.html" rel="noopener ugc nofollow" target="_blank">https://www . elite-corner . com/2020/06/how-to-define-global-constants variables-in-angular . html</a></li><li id="5c47" class="mm mn it le b lf mv lj mw kp mx kt my kx mz lw mr ms mt mu bi translated"><a class="ae kf" href="https://stackoverflow.com/questions/38944725/how-to-get-dom-element-in-angular-2" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/38944725/how-to-get-DOM-element-in-angular-2</a></li><li id="a5c4" class="mm mn it le b lf mv lj mw kp mx kt my kx mz lw mr ms mt mu bi translated"><a class="ae kf" href="https://www.learnrxjs.io/learn-rxjs/operators/error_handling" rel="noopener ugc nofollow" target="_blank">https://www . learn rxjs . io/learn-rxjs/operators/error _ handling</a></li><li id="5bf0" class="mm mn it le b lf mv lj mw kp mx kt my kx mz lw mr ms mt mu bi translated"><a class="ae kf" href="https://v2.angular.io/docs/ts/latest/guide/architecture.html" rel="noopener ugc nofollow" target="_blank">https://v2 . angular . io/docs/ts/latest/guide/architecture . html</a></li><li id="ac3b" class="mm mn it le b lf mv lj mw kp mx kt my kx mz lw mr ms mt mu bi translated"><a class="ae kf" href="https://medium.com/showpad-engineering/why-you-should-never-use-function-calls-in-angular-template-expressions-e1a50f9c0496" rel="noopener">https://medium . com/showpad-engineering/why-you-should-never-use-function-calls-in-angular-template-expressions-E1 a50 F9 c 0496</a></li><li id="7d3d" class="mm mn it le b lf mv lj mw kp mx kt my kx mz lw mr ms mt mu bi translated"><a class="ae kf" href="https://angular.io/guide/sharing-ngmodules" rel="noopener ugc nofollow" target="_blank">https://angular.io/guide/sharing-ngmodules</a></li></ul><h2 id="cf19" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">额外资源📗：</h2><p id="e111" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm kp ln lo lp kt lq lr ls kx lt lu lv lw im bi translated">如果你对阅读更高级的角度话题感兴趣，可以看看这些博客</p><ul class=""><li id="2663" class="mm mn it le b lf lx lj ly kp mo kt mp kx mq lw mr ms mt mu bi translated"><a class="ae kf" rel="noopener ugc nofollow" target="_blank" href="/optimizing-angular-unit-tests-for-faster-execution-70c7adda6b21">优化角度单元测试以加快执行速度</a></li><li id="5cb3" class="mm mn it le b lf mv lj mw kp mx kt my kx mz lw mr ms mt mu bi translated"><a class="ae kf" rel="noopener ugc nofollow" target="_blank" href="/lets-optimize-angular-bundle-size-with-these-steps-6d6b753ac256">通过以下步骤优化角度束尺寸</a></li><li id="9a69" class="mm mn it le b lf mv lj mw kp mx kt my kx mz lw mr ms mt mu bi translated"><a class="ae kf" rel="noopener ugc nofollow" target="_blank" href="/introduction-to-state-management-with-ngrx-and-angular-91f4ff27ec9f">Ngrx和Angular状态管理简介</a></li><li id="846c" class="mm mn it le b lf mv lj mw kp mx kt my kx mz lw mr ms mt mu bi translated"><a class="ae kf" rel="noopener ugc nofollow" target="_blank" href="/write-e2e-tests-with-angular-and-cypress-1f011f673a5e">用Angular和Cypress编写CRUD E2E测试</a></li></ul><h2 id="f524" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">最后的话:</h2><p id="aff1" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm kp ln lo lp kt lq lr ls kx lt lu lv lw im bi translated">如果你喜欢这篇文章，请留下你的👏，在<a class="ae kf" href="https://twitter.com/RebaiAhmed_" rel="noopener ugc nofollow" target="_blank"> Twitter </a>和<a class="ae kf" href="https://github.com/Rebaiahmed" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上关注我</p><p id="22c8" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">感谢阅读</p></div></div>    
</body>
</html>