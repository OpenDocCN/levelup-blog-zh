<html>
<head>
<title>Autocomplete JSON with Angular and Monaco</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Angular和Monaco自动完成JSON</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/autocomplete-json-with-angular-and-monaco-f1dcc01e36e1?source=collection_archive---------1-----------------------#2020-12-09">https://levelup.gitconnected.com/autocomplete-json-with-angular-and-monaco-f1dcc01e36e1?source=collection_archive---------1-----------------------#2020-12-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/5d5d5ada9e5def9e42fc0f504b94eeae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Di5gintegqFGSvdOOeoJwg.png"/></div></div></figure><div class=""/><div class=""><h2 id="c429" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">让web原生编码成为一种特性，而不是一个bug</h2></div><p id="f866" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">微软的VS代码近年来越来越受欢迎，这要归功于摩纳哥编辑器。Monaco编辑器提供了基本的生产力插件和特性，包括:自动完成。这些功能被认为是IntelliSense，它是任何帮助开发人员的编码功能的统称。<a class="ae lp" href="https://code.visualstudio.com/docs/editor/editingevolved" rel="noopener ugc nofollow" target="_blank">这里的</a>是对摩纳哥编辑器特性的更好描述。</p><p id="5eff" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">微软将Monaco编辑器的代码开源，这意味着备受喜爱的VS Code IntelliSense功能可以并且已经移植到其他平台上。感谢<a class="ae lp" href="https://github.com/atularen" rel="noopener ugc nofollow" target="_blank"> atularen </a>，有一个可靠的方法可以将摩纳哥编辑器与Angular 2及以上版本集成。本指南将使用<a class="ae lp" href="https://www.npmjs.com/package/ngx-monaco-editor" rel="noopener ugc nofollow" target="_blank"> ngx-monaco-editor </a>包为给定的JSON模式启用自动完成特性。</p><p id="ac53" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">本教程的代码在<a class="ae lp" href="https://github.com/hyperstripe50/ngx-monaco-json-intellisense" rel="noopener ugc nofollow" target="_blank">这里</a>是公开的。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><blockquote class="lx ly lz"><p id="c8ea" class="kt ku ma kv b kw kx kf ky kz la ki lb mb ld le lf mc lh li lj md ll lm ln lo im bi translated"><strong class="kv jf">注:<br/> </strong>本指南仅适用于Angular CLI 9.1.12。</p></blockquote><h1 id="4c4d" class="me mf je bd mg mh mi mj mk ml mm mn mo kk mp kl mq kn mr ko ms kq mt kr mu mv bi translated">目录结构参考</h1><p id="1fad" class="pw-post-body-paragraph kt ku je kv b kw mw kf ky kz mx ki lb lc my le lf lg mz li lj lk na lm ln lo im bi translated">下面的文件树供你参考。在本教程中，将编辑洋红色盒装文件。</p><figure class="nc nd ne nf gt iv gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/c7c07b61d82ca7c0d02980fa2a23535f.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*nYAZumvZIcgk4CBDpDWa0A.png"/></div></figure></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="22a9" class="me mf je bd mg mh ng mj mk ml nh mn mo kk ni kl mq kn nj ko ms kq nk kr mu mv bi translated">先决条件</h1><ul class=""><li id="e6e4" class="nl nm je kv b kw mw kz mx lc nn lg no lk np lo nq nr ns nt bi translated"><a class="ae lp" href="https://www.npmjs.com/package/@angular/cli/v/9.0.4" rel="noopener ugc nofollow" target="_blank">角度CLI 9.1.12 </a></li><li id="0b4a" class="nl nm je kv b kw nu kz nv lc nw lg nx lk ny lo nq nr ns nt bi translated"><a class="ae lp" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> NPM </a></li></ul><h1 id="6e2e" class="me mf je bd mg mh mi mj mk ml mm mn mo kk mp kl mq kn mr ko ms kq mt kr mu mv bi translated">设置</h1><p id="c9dc" class="pw-post-body-paragraph kt ku je kv b kw mw kf ky kz mx ki lb lc my le lf lg mz li lj lk na lm ln lo im bi translated">更完整的安装指南可以在这里找到，但以下是本教程所要求的。</p><h2 id="da69" class="nz mf je bd mg oa ob dn mk oc od dp mo lc oe of mq lg og oh ms lk oi oj mu ok bi translated">创建项目</h2><p id="b03e" class="pw-post-body-paragraph kt ku je kv b kw mw kf ky kz mx ki lb lc my le lf lg mz li lj lk na lm ln lo im bi translated">创建一个新项目并在其中创建<code class="fe ol om on oo b">cd</code>。</p><pre class="nc nd ne nf gt op oo oq or aw os bi"><span id="df4f" class="nz mf je oo b gy ot ou l ov ow">ng new ngx-monaco-json-intellisense &amp;&amp; cd ngx-monaco-json-intellisense</span></pre><h2 id="b937" class="nz mf je bd mg oa ob dn mk oc od dp mo lc oe of mq lg og oh ms lk oi oj mu ok bi translated">安装摩纳哥编辑器包</h2><pre class="nc nd ne nf gt op oo oq or aw os bi"><span id="ffb6" class="nz mf je oo b gy ot ou l ov ow">npm install ngx-monaco-editor<a class="ae lp" href="http://twitter.com/9" rel="noopener ugc nofollow" target="_blank">@9</a>.0.0<!-- --> --save</span></pre><h2 id="5fee" class="nz mf je bd mg oa ob dn mk oc od dp mo lc oe of mq lg og oh ms lk oi oj mu ok bi translated">编辑angular.json</h2><p id="531f" class="pw-post-body-paragraph kt ku je kv b kw mw kf ky kz mx ki lb lc my le lf lg mz li lj lk na lm ln lo im bi translated">将glob添加到<code class="fe ol om on oo b">angular.json</code>中，如下例所示。</p><figure class="nc nd ne nf gt iv"><div class="bz fp l di"><div class="ox oy l"/></div><figcaption class="oz pa gj gh gi pb pc bd b be z dk translated">angular.json</figcaption></figure><h2 id="8970" class="nz mf je bd mg oa ob dn mk oc od dp mo lc oe of mq lg og oh ms lk oi oj mu ok bi translated">在app.module.ts中配置摩纳哥</h2><figure class="nc nd ne nf gt iv"><div class="bz fp l di"><div class="ox oy l"/></div><figcaption class="oz pa gj gh gi pb pc bd b be z dk translated">应用程序模块</figcaption></figure><h1 id="558a" class="me mf je bd mg mh mi mj mk ml mm mn mo kk mp kl mq kn mr ko ms kq mt kr mu mv bi translated">创建编辑器组件</h1><p id="bf47" class="pw-post-body-paragraph kt ku je kv b kw mw kf ky kz mx ki lb lc my le lf lg mz li lj lk na lm ln lo im bi translated">我们将使用Angular CLI创建组件<code class="fe ol om on oo b">monaco-json-autocomplete</code>。该组件将配置和显示Monaco编辑器。</p><h2 id="8e1f" class="nz mf je bd mg oa ob dn mk oc od dp mo lc oe of mq lg og oh ms lk oi oj mu ok bi translated">生成摩纳哥-json-autocomplete组件</h2><pre class="nc nd ne nf gt op oo oq or aw os bi"><span id="7b67" class="nz mf je oo b gy ot ou l ov ow">ng g c monaco-json-autocomplete</span></pre><p id="4301" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">Monaco编辑器为JSON <code class="fe ol om on oo b">schema</code>提供了自动补全功能。该模式定义了Monaco将自动完成的JSON对象的属性。下面是描述具有一个属性的JSON对象的最小模式:<code class="fe ol om on oo b">apiVersion</code>。</p><figure class="nc nd ne nf gt iv"><div class="bz fp l di"><div class="ox oy l"/></div></figure><p id="d56c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">该组件将有一个模式的<code class="fe ol om on oo b">Input</code>值。用户可以以URI或显式<code class="fe ol om on oo b">schema</code>对象的形式提供字符串值。该组件将从URI加载模式，或者简单地使用提供的对象。在编辑器初始化后的任何时候，都可以通过使用<code class="fe ol om on oo b">get value()</code>方法获得编辑器的字符串值。如果组件被扩展为针对编辑器的内容发出输出事件，这将非常有用。</p><figure class="nc nd ne nf gt iv"><div class="bz fp l di"><div class="ox oy l"/></div></figure><h2 id="028b" class="nz mf je bd mg oa ob dn mk oc od dp mo lc oe of mq lg og oh ms lk oi oj mu ok bi translated">编辑Monaco-JSON-autocomplete . component . ts</h2><figure class="nc nd ne nf gt iv"><div class="bz fp l di"><div class="ox oy l"/></div><figcaption class="oz pa gj gh gi pb pc bd b be z dk translated">摩纳哥-JSON-autocomplete . component . ts</figcaption></figure><h2 id="04a9" class="nz mf je bd mg oa ob dn mk oc od dp mo lc oe of mq lg og oh ms lk oi oj mu ok bi translated">编辑monaco-json-autocomplete.component.html</h2><p id="e47e" class="pw-post-body-paragraph kt ku je kv b kw mw kf ky kz mx ki lb lc my le lf lg mz li lj lk na lm ln lo im bi translated">现在给<code class="fe ol om on oo b">monaco-json-autocomplete.component.html</code>添加相应的HTML。</p><figure class="nc nd ne nf gt iv"><div class="bz fp l di"><div class="ox oy l"/></div><figcaption class="oz pa gj gh gi pb pc bd b be z dk translated">monaco-json-autocomplete.component.html</figcaption></figure><h1 id="c508" class="me mf je bd mg mh mi mj mk ml mm mn mo kk mp kl mq kn mr ko ms kq mt kr mu mv bi translated">使用自动完成组件</h1><p id="698c" class="pw-post-body-paragraph kt ku je kv b kw mw kf ky kz mx ki lb lc my le lf lg mz li lj lk na lm ln lo im bi translated">选择器<code class="fe ol om on oo b">app-monaco-json-autocomplete</code>现在可以使用自动完成组件了。让我们配置<code class="fe ol om on oo b">app.component</code>来使用它。</p><h2 id="e790" class="nz mf je bd mg oa ob dn mk oc od dp mo lc oe of mq lg og oh ms lk oi oj mu ok bi translated">编辑应用程序.组件. ts</h2><figure class="nc nd ne nf gt iv"><div class="bz fp l di"><div class="ox oy l"/></div><figcaption class="oz pa gj gh gi pb pc bd b be z dk translated">应用程序组件</figcaption></figure><h2 id="431b" class="nz mf je bd mg oa ob dn mk oc od dp mo lc oe of mq lg og oh ms lk oi oj mu ok bi translated">编辑app.component.html</h2><p id="58dc" class="pw-post-body-paragraph kt ku je kv b kw mw kf ky kz mx ki lb lc my le lf lg mz li lj lk na lm ln lo im bi translated">最后调用<code class="fe ol om on oo b">app.component.html</code>中的选择器。</p><figure class="nc nd ne nf gt iv"><div class="bz fp l di"><div class="ox oy l"/></div><figcaption class="oz pa gj gh gi pb pc bd b be z dk translated">app.component.html</figcaption></figure><p id="46ab" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">用<code class="fe ol om on oo b">ng serve</code>运行项目，打开<a class="ae lp" href="http://localhost:4200" rel="noopener ugc nofollow" target="_blank">浏览器</a>。使用<code class="fe ol om on oo b">CTRL + SPACE</code>显示建议，或者键入一个字母，将出现提前匹配。</p><figure class="nc nd ne nf gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pd"><img src="../Images/8f9ea80b0436b004bfcb26ad2e21f38e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Ix0wRSAUmgsA2jGPi79WAg.gif"/></div></div></figure></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="333f" class="me mf je bd mg mh ng mj mk ml nh mn mo kk ni kl mq kn nj ko ms kq nk kr mu mv bi translated">从服务器加载架构</h1><p id="db73" class="pw-post-body-paragraph kt ku je kv b kw mw kf ky kz mx ki lb lc my le lf lg mz li lj lk na lm ln lo im bi translated">至此，本教程已经使用了一个模式的显式声明。更实用的方法是从服务器加载模式。从服务器加载将允许您随时更改模式，并且不需要重新构建应用程序。</p><h2 id="4a2f" class="nz mf je bd mg oa ob dn mk oc od dp mo lc oe of mq lg og oh ms lk oi oj mu ok bi translated">创建一个JSON文件</h2><p id="3713" class="pw-post-body-paragraph kt ku je kv b kw mw kf ky kz mx ki lb lc my le lf lg mz li lj lk na lm ln lo im bi translated">将以下文件另存为<code class="fe ol om on oo b">schema.json</code>。</p><figure class="nc nd ne nf gt iv"><div class="bz fp l di"><div class="ox oy l"/></div></figure><h2 id="56d1" class="nz mf je bd mg oa ob dn mk oc od dp mo lc oe of mq lg og oh ms lk oi oj mu ok bi translated">启动简单的服务器</h2><p id="c130" class="pw-post-body-paragraph kt ku je kv b kw mw kf ky kz mx ki lb lc my le lf lg mz li lj lk na lm ln lo im bi translated">通过将您的目录更改为<code class="fe ol om on oo b">schema.json</code>的目录，用<code class="fe ol om on oo b">http-server</code>托管<code class="fe ol om on oo b">schema.json</code>。</p><p id="f34c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">运行以下命令安装<code class="fe ol om on oo b">http-server</code>:</p><pre class="nc nd ne nf gt op oo oq or aw os bi"><span id="7310" class="nz mf je oo b gy ot ou l ov ow">npm install http-server -g</span></pre><p id="a128" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">使用以下命令启动服务器:</p><pre class="nc nd ne nf gt op oo oq or aw os bi"><span id="e35e" class="nz mf je oo b gy ot ou l ov ow">http-server -p 8000 --cors</span></pre><h2 id="76d9" class="nz mf je bd mg oa ob dn mk oc od dp mo lc oe of mq lg og oh ms lk oi oj mu ok bi translated">将模式作为URI传递</h2><p id="4fd3" class="pw-post-body-paragraph kt ku je kv b kw mw kf ky kz mx ki lb lc my le lf lg mz li lj lk na lm ln lo im bi translated">打开<code class="fe ol om on oo b">app.component.ts</code>文件，将显式模式换成对应于<code class="fe ol om on oo b">http-server</code>的<code class="fe ol om on oo b">URI</code>。</p><h2 id="4f5f" class="nz mf je bd mg oa ob dn mk oc od dp mo lc oe of mq lg og oh ms lk oi oj mu ok bi translated">编辑应用程序.组件. ts</h2><figure class="nc nd ne nf gt iv"><div class="bz fp l di"><div class="ox oy l"/></div><figcaption class="oz pa gj gh gi pb pc bd b be z dk translated">应用程序组件</figcaption></figure><p id="68b0" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">再次打开<a class="ae lp" href="http://localhost:4200" rel="noopener ugc nofollow" target="_blank"> UI </a>查看变化。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="8070" class="me mf je bd mg mh ng mj mk ml nh mn mo kk ni kl mq kn nj ko ms kq nk kr mu mv bi translated">关于模式的更多信息</h1><p id="8ec7" class="pw-post-body-paragraph kt ku je kv b kw mw kf ky kz mx ki lb lc my le lf lg mz li lj lk na lm ln lo im bi translated">Monaco Editor不仅会对给定的模式执行typeahead和autocomplete，还会显示每个字段的信息并进行验证。下面是一个更详细的模式来显示一些模式属性。关于JSON模式的完整文档，请参见这里的<a class="ae lp" href="http://json-schema.org/specification.html" rel="noopener ugc nofollow" target="_blank"/>。</p><figure class="nc nd ne nf gt iv"><div class="bz fp l di"><div class="ox oy l"/></div></figure></div></div>    
</body>
</html>