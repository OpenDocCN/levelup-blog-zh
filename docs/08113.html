<html>
<head>
<title>Fade in-out text in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中的淡入淡出文本</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/fade-in-out-text-in-react-fa8fc7a2a0b1?source=collection_archive---------4-----------------------#2021-04-04">https://levelup.gitconnected.com/fade-in-out-text-in-react-fa8fc7a2a0b1?source=collection_archive---------4-----------------------#2021-04-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="31e6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">此处:</em><a class="ae kp" href="https://flatteredwithflutter.com/fade-in-out-text-in-react/" rel="noopener ugc nofollow" target="_blank"><em class="ko">https://flatteredwithflutter.com/fade-in-out-text-in-react/</em></a></p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="kv kw l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">react中的淡入淡出文本</figcaption></figure><p id="a076" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">点击此处观看演示</p><p id="e36c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="ko">网址:</em></strong><a class="ae kp" href="https://funwithreact.web.app/" rel="noopener ugc nofollow" target="_blank"><strong class="js iu"><em class="ko">https://funwithreact.web.app/</em></strong></a></p><p id="7a25" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将经历以下步骤</p><ol class=""><li id="d505" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn lg lh li lj bi translated">添加CSS</li><li id="9f45" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">创建推子组件</li><li id="7a61" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">淡入淡出逻辑</li><li id="7a60" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">清除副作用</li></ol><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lp"><img src="../Images/9b48bc5c97be0b8b5f0ce8ce218d19b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ISK_yTuduJNcJ6NwG1LEPg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">react中的淡入淡出文本</figcaption></figure><h2 id="1127" class="lw lx it bd ly lz ma dn mb mc md dp me kb mf mg mh kf mi mj mk kj ml mm mn mo bi translated">添加CSS</h2><p id="afdf" class="pw-post-body-paragraph jq jr it js b jt mp jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj mt kl km kn im bi translated">让我们从添加CSS开始，它将帮助我们实现淡入淡出的效果。</p><pre class="kq kr ks kt gt mu mv mw mx aw my bi"><span id="964e" class="lw lx it mv b gy mz na l nb nc">.fade-in {<br/>    transition: opacity 1s ease;<br/>}</span><span id="2bb9" class="lw lx it mv b gy nd na l nb nc">.fade-out {<br/>    opacity: 0;<br/>    transition: opacity 1s ease;<br/>}</span></pre><p id="9b3e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">类名是不言自明的！</p><h2 id="d6e8" class="lw lx it bd ly lz ma dn mb mc md dp me kb mf mg mh kf mi mj mk kj ml mm mn mo bi translated">创建推子组件</h2><p id="e711" class="pw-post-body-paragraph jq jr it js b jt mp jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj mt kl km kn im bi translated">我们创建了一个可重用的组件，并将其命名为<strong class="js iu"> Fader。</strong>该组件将包括UI +业务逻辑，以实现淡入淡出。</p><p id="25a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">定义道具</strong></p><ul class=""><li id="2fe6" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn ne lh li lj bi translated">这个组件将接受一个文本属性，它的类型是string</li><li id="abce" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn ne lh li lj bi translated">我们还为文本属性分配了一个默认值</li></ul><pre class="kq kr ks kt gt mu mv mw mx aw my bi"><span id="8026" class="lw lx it mv b gy mz na l nb nc">Fader.defaultProps = {<br/>    text: 'Hello World!'<br/>}</span><span id="e7e7" class="lw lx it mv b gy nd na l nb nc">Fader.propTypes = {<br/>    text: PropTypes.string,<br/>}</span></pre><ul class=""><li id="3f13" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn ne lh li lj bi translated">在组件内部导入CSS文件(在我们的例子中是<strong class="js iu"> App.css </strong>)</li></ul></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><p id="ba77" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">初始状态</strong></p><ul class=""><li id="2fb6" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn ne lh li lj bi translated">我们从React导入<a class="ae kp" href="https://reactjs.org/docs/hooks-state.html" rel="noopener ugc nofollow" target="_blank">使用状态</a>钩子。</li><li id="1a8f" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn ne lh li lj bi translated">将我们属性的初始值设置为<code class="fe nm nn no mv b">fade-in</code></li></ul><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi np"><img src="../Images/f7d805b9ab4dc300a05d2c4b5128062e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D2BGWawtBO1MR8xhZa1-vA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">设置初始状态</figcaption></figure><ul class=""><li id="c440" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn ne lh li lj bi translated">我们利用这个属性，并把它赋给Html元素的类名。</li></ul><pre class="kq kr ks kt gt mu mv mw mx aw my bi"><span id="2b06" class="lw lx it mv b gy mz na l nb nc">return (<br/>    &lt;&gt;<br/>      &lt;h1 className={fadeProp.fade}&gt;{text}&lt;/h1&gt;<br/>    &lt;/&gt;<br/>)</span></pre><p id="58c6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">fade prop . fade</strong>:CSS类名</p><p id="46f5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">文本</strong>:是推子属性</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h2 id="a6fc" class="lw lx it bd ly lz ma dn mb mc md dp me kb mf mg mh kf mi mj mk kj ml mm mn mo bi translated">淡入淡出逻辑</h2><p id="9a46" class="pw-post-body-paragraph jq jr it js b jt mp jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj mt kl km kn im bi translated">让我们带上<a class="ae kp" href="https://reactjs.org/docs/hooks-effect.html" rel="noopener ugc nofollow" target="_blank">使用效果</a>挂钩</p><p id="40a7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当且仅当依赖关系数组<code class="fe nm nn no mv b">[prop, state]</code>中的任何值已经改变时，在将改变提交给DOM和<em class="ko">之后，<code class="fe nm nn no mv b">useEffect(callback, [prop, state])</code>调用<code class="fe nm nn no mv b">callback</code>。</em></p><pre class="kq kr ks kt gt mu mv mw mx aw my bi"><span id="f04a" class="lw lx it mv b gy mz na l nb nc">useEffect(() =&gt; {<br/>     const timeout = setInterval(() =&gt; {<br/>        if (fadeProp.fade === 'fade-in') {<br/>           setFadeProp({<br/>                fade: 'fade-out'<br/>           })<br/>        } else {<br/>             setFadeProp({<br/>                fade: 'fade-in'<br/>             })<br/>        }<br/>     }, 4000);</span><span id="e538" class="lw lx it mv b gy nd na l nb nc">return () =&gt; clearInterval(timeout)<br/>}, [fadeProp])</span></pre><ul class=""><li id="5512" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn ne lh li lj bi translated">我们使用<a class="ae kp" href="https://javascript.info/settimeout-setinterval" rel="noopener ugc nofollow" target="_blank"> setInterval </a>，它接收回调和持续时间(在我们的例子中是4秒)</li><li id="c30c" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn ne lh li lj bi translated">在setInterval回调中，我们检查当前的css类名</li><li id="09d7" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn ne lh li lj bi translated">因为我们将初始类指定为<code class="fe nm nn no mv b">fade-in</code>,所以我们对此进行检查并相应地更改类</li><li id="0769" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn ne lh li lj bi translated">注意回调或if/else每4秒执行一次</li></ul></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h2 id="3699" class="lw lx it bd ly lz ma dn mb mc md dp me kb mf mg mh kf mi mj mk kj ml mm mn mo bi translated">清除副作用</h2><p id="c288" class="pw-post-body-paragraph jq jr it js b jt mp jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj mt kl km kn im bi translated">如果<code class="fe nm nn no mv b">useEffect(callback)</code>的<code class="fe nm nn no mv b">callback</code>返回一个函数，那么<code class="fe nm nn no mv b">useEffect()</code>认为这是一个<em class="ko">效果清理</em>:</p><pre class="kq kr ks kt gt mu mv mw mx aw my bi"><span id="9e67" class="lw lx it mv b gy mz na l nb nc">return () =&gt; clearInterval(timeout)</span></pre><ul class=""><li id="d267" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn ne lh li lj bi translated">我们添加这一行是为了清理效果。</li><li id="dba9" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn ne lh li lj bi translated">这将在启动新计时器之前取消之前的计时器。</li></ul><p id="1d28" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">清理的工作方式如下:</p><ol class=""><li id="6608" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn lg lh li lj bi translated">初始渲染后，<code class="fe nm nn no mv b">useEffect()</code>调用有副作用的回调。在我们的例子中，<code class="fe nm nn no mv b">timeout</code></li></ol><p id="f270" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.在后来的渲染中，在调用下一个副作用回调之前，<code class="fe nm nn no mv b">useEffect()</code> <em class="ko">调用</em>之前副作用执行的<code class="fe nm nn no mv b">clearInterval</code>函数，然后运行当前的副作用。</p><p id="b683" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.最后，在卸载组件后，<code class="fe nm nn no mv b">useEffect()</code> <em class="ko">从最新的副作用中调用</em><code class="fe nm nn no mv b">clearInterval</code>函数</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/76ca941007cfc65c591c9787e79f7df8.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/1*rpTl0ep9orbTrbRhvOmw-w.gif"/></div></figure></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><pre class="kq kr ks kt gt mu mv mw mx aw my bi"><span id="7ba6" class="lw lx it mv b gy mz na l nb nc"><em class="ko">Hosted URL: </em><a class="ae kp" href="https://funwithreact.web.app/" rel="noopener ugc nofollow" target="_blank"><em class="ko">https://funwithreact.web.app/</em></a></span><span id="3c36" class="lw lx it mv b gy nd na l nb nc"><a class="ae kp" href="https://github.com/AseemWangoo/expriments_with_react" rel="noopener ugc nofollow" target="_blank"><em class="ko">Source code</em></a></span></pre><p id="4b6d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感兴趣的文章:</p><div class="nr ns gp gr nt nu"><a rel="noopener  ugc nofollow" target="_blank" href="/show-push-notifications-in-react-449949e98e01"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">在React中显示推送通知</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">在React中显示推送通知</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">在Reactlevelup.gitconnected.com显示推送通知</p></div></div><div class="od l"><div class="oe l of og oh od oi lu nu"/></div></div></a></div><div class="nr ns gp gr nt nu"><a rel="noopener  ugc nofollow" target="_blank" href="/deploy-react-and-aws-amplify-1db36c625d73"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">部署React和AWS Amplify</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">部署React和AWS Amplify</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">部署React和AWS Amplifylevelup.gitconnected.com</p></div></div><div class="od l"><div class="oj l of og oh od oi lu nu"/></div></div></a></div><div class="nr ns gp gr nt nu"><a rel="noopener  ugc nofollow" target="_blank" href="/i-tried-react-in-2021-here-are-my-thoughts-51256e6f595d"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">我在2021年试过React。以下是我的想法</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">以下是我从React中学到的5个要点。</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="od l"><div class="ok l of og oh od oi lu nu"/></div></div></a></div></div></div>    
</body>
</html>