# 从 Android 开发者的角度看本地化工具

> 原文：<https://levelup.gitconnected.com/localazy-localization-tool-from-an-android-developer-perspective-1b842edb7d44>

![](img/19f28dce92f3669e944f375763d26cd8.png)

图片由维基共享资源提供

Localazy 是几乎所有软件产品的最佳本地化工具之一。看起来它将成为本地化的下一个行业标准。除此之外，它允许开发者在不访问产品代码库的情况下外包翻译。该工具本身有许多用例的样本，记录得非常好。

这篇文章不是一篇推广文章——它只是我在广泛使用后对这个话题的看法。

我们使用这个工具来本地化公司的网站以及 Android 和 IOS 应用程序。当我们开始实施本地化时，所有这些都已经投入生产大约。只有一种语言，不是英语。其他一些本地化反模式也在使用中，所以我们有一个非常粗略的起点。

经过大量的工作，我们公司的 Android 和 iOS 应用程序使用相同的 Localazy 项目，我们现在有 2 种语言的良好翻译，如果需要，可以很容易地添加任何其他翻译。我不得不提到“大量的工作”是必需的，主要是因为我们的 Android 和 iOS 应用程序有许多文本差异，并且有一些本地化的反模式。如果开发开始时就考虑到了 Localazy，事情可能会简单得多。

还有一点要提的是——很好的支持，非常专业，非常有求必应。

我收集了一些要点，可以帮助未来的本地化用户在本地化移动产品时避免很多混乱。以下所有内容都是基于我在 2022 年 5 月写这篇文章时的个人经历。

文中提到的 *localazy.json* 文件是安装 Localazy CLI 后应该创建的配置文件。

*   通读[文档](https://localazy.com/docs)！有时，如果事情不完全如你所愿，你的第一个想法将是“我将添加一个 gradle 任务或 bash 脚本来修复它！”。这不是必需的——Localazy CLI 可以做您需要的任何事情，使本地化文件完全符合它们应该在的位置。读一下文件。
*   用像德语这样的“长”语言测试你的布局，以确保一些添加的翻译不会破坏应用的布局。我们公司的应用程序最初只为希伯来语开发，希伯来语是一种非常短的语言，因为元音通常不会书写，所以许多布局都必须重构。
*   最重要的一条——在项目生命周期中尽早开始使用 Localazy。那会让你的生活轻松很多！
*   要求所有开发人员通过 Android 和 IOS 应用程序同步字符串密钥，即对相同的文本使用相同的字符串密钥。本技巧和下一个技巧将允许您对 Android 和 IOS 应用程序使用相同的 Localazy 项目，这反过来将使翻译和测试更容易。
*   所有开发人员都应该同步字符串方法的使用。例如，如果 Android 和 IOS 开发人员都决定到处使用字符串连接(或到处使用字符串格式)，那么您将能够为两个应用程序使用相同的 Localazy 项目。这很简单——只需将“转换”部分添加到您的 *localazy.json* 文件中。如果您的 Localazy 项目包含 IOS 字符串，并且您希望将它们用作 Android 字符串，那么应该是这样的:

*   当使用一个共享项目时，由于某种原因添加一个特定于应用程序的字符串时，总是标记它的键。例如有一个安卓 app 的文字说明了位置使用原因，IOS app 中没有使用，在键的开头加“ao_”，像这样:

*   Localazy 在一个 Android 项目中使用希伯来语的“values-he”资源文件夹。并非所有的 Android 设备都是这样工作的，一些设备使用“values-iw”进行希伯来语翻译。作为一名 Android 开发人员，我倾向于在构建过程中对任何需要复制、删除或修改的内容使用 gradle tasks，因此我添加了一个 gradle task 来将“values-he”复制到“values-iw”以确保兼容性。实际上这是不需要的，因为 localazy 支持将同一种语言写入多个文件夹。我只需将以下内容添加到我的项目的 *localazy.json* 文件的“下载”部分。

*   当使用 conversion 来为 Android 和 IOS 应用程序使用相同的 Localazy 项目时——注意你的 *localazy.json* 文件中的“conversion”部分也执行下载。如果你从一个 IOS 项目中使用 Android 的转换——你的“下载”部分应该被删除，否则它将在转换之前被执行。在这种情况下，您最终会将这两种类型的文件下载到您的项目中，这反过来会阻止编译。
*   在 Localazy 控制面板中创建新项目时，强烈建议源语言应为英语。对任何项目来说都是好主意，但对于 Android 项目，Localazy CLI 会将源英语放入“values_en”文件夹。这导致了任何未翻译语言的问题，因为如果没有找到翻译，大多数(如果不是全部)Android 设备将寻找默认语言的“值”文件夹。“像专业人士一样)))”我添加了一个 gradle 任务，将“values-en”复制到“values”中，以确保兼容性。然而，正确的选择是修改我的 *localazy.json* 文件的“下载”部分，为英语添加一个条件路径。Smth 像“conditions”:“equals:$ { lang }，en”然后是需要的路径。
*   一般来说，项目经理和其他管理人员更喜欢使用电子表格来要求开发人员向应用程序添加新文本。不要允许他们直接上传 xls 文件到你的本地项目中！使用一个空的临时 Localazy 项目来上传 xls 文件，然后选择主项目的文件格式从该项目下载文件。然后使用主 Localazy 项目中的“更新文件内容”选项来添加从临时项目中下载的文件内容。
*   有时，一个 Android 应用程序由几个模块和字符串组成。xml 文件包含在多个模块中。在这种情况下，如果您尝试使用 Localazy CLI 上传字符串，您将在 Localazy 中获得一个“复杂文件”实体。虽然仍可使用，但有些选项将不可用。我通过将每种语言的所有 string.xml 文件合并到一个模块中，解决了这个问题。您应该使用项目的“依赖树”中的“最低”模块，在我的例子中，它是“域”模块。在我的情况下，这是唯一的选择，因为我对两个应用程序使用同一个项目。如果无法将所有字符串文件合并到一个模块中，可以使用 path 参数，而不需要将文件更改为复杂的文件，只需收集包括原始位置在内的文件，然后使用下载/转换中的模式将它们恢复到相同的位置。当然，当使用更多不同结构的平台时，这就变得有点复杂了。然而，路径只能包含模块名(可以使用转换来过滤)和基于不同条件的输出文件。
*   我想要但必须自己实现的一个特性是让任何未使用的语言都包含字符串键作为值。为什么有人会需要这个特性可能不是很明显，但是想想有人想开始为两个以前没有通过字符串键同步的应用程序使用同一个 Localazy 项目。幸运的是，这可以通过 bash 脚本轻松完成。

我相信在您阅读本文的时候，Localazy 团队已经改进了他们的工具，所以在实现本文的第 7 到 12 段之前，请阅读文档。