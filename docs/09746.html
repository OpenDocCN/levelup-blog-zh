<html>
<head>
<title>CodeIgniter 4 CRUD Series with MySQL: Read</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带MySQL的CodeIgniter 4 CRUD系列:阅读</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/codeigniter-4-crud-series-with-mysql-read-96c994e33e4e?source=collection_archive---------8-----------------------#2021-09-09">https://levelup.gitconnected.com/codeigniter-4-crud-series-with-mysql-read-96c994e33e4e?source=collection_archive---------8-----------------------#2021-09-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="6924" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在文章<a class="ae ko" rel="noopener ugc nofollow" target="_blank" href="/codeigniter-4-crud-series-with-mysql-create-f2533edbd5e8">CodeIgniter 4 CRUD Series with MySQL:Create</a>中，我介绍了如何使用CodeIgniter\Model内置<code class="fe kp kq kr ks b">insert()</code>方法在MySQL数据库表中创建新的数据行。有相当多的<em class="kt">样板文件</em>需要设置以使项目<em class="kt">启动并运行。</em></p><p id="2991" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这第二根柱子应该更直接，所有的<em class="kt">基础脚手架</em>都在适当的位置并被处理好。</p><h2 id="8660" class="ku kv it bd kw kx ky dn kz la lb dp lc kb ld le lf kf lg lh li kj lj lk ll lm bi translated">读取数据</h2><p id="07fe" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">既然项目数据已经存在于数据库中，就有可能有人想要查看它。通常，读取数据是几个不同操作中的一个:</p><ul class=""><li id="c59c" class="ls lt it js b jt ju jx jy kb lu kf lv kj lw kn lx ly lz ma bi translated">一种情况是，所有可用的数据都应该显示出来供查看，没有任何过滤或限制。</li><li id="a8c6" class="ls lt it js b jt mb jx mc kb md kf me kj mf kn lx ly lz ma bi translated">另一种常见的模式是选择一个特定的数据点或一组相似的数据点。换句话说，就是过滤数据。</li></ul><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/609787f4b986eed2b9730d0ab847c199.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*HdPnU-g-CjLrs06bOb_KMA.jpeg"/></div></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><p id="8335" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你是<a class="ae ko" href="http://medium.com/" rel="noopener">中级</a>会员吗？如果是这样，<a class="ae ko" href="https://parabollus.medium.com/subscribe" rel="noopener">每当我在这里发表博客文章时，都会收到电子邮件通知</a>。不是会员？别担心！使用<a class="ae ko" href="https://parabollus.medium.com/membership" rel="noopener">我的注册链接</a>(我将免费向你收取佣金)并加入。我真的很喜欢阅读这里所有精彩的内容，我知道你也会喜欢的！！！</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><p id="8e74" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">CodeIgniter 4模型具有内置的CRUD功能，因此基本上不需要重新创建已经存在的功能。</p><p id="6927" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以用来查找和过滤数据的两个CodeIgniter 4模型类方法是:</p><ul class=""><li id="54a5" class="ls lt it js b jt ju jx jy kb lu kf lv kj lw kn lx ly lz ma bi translated"><code class="fe kp kq kr ks b">find()</code> —从表中返回主键与所提供的第一个参数匹配的行。</li><li id="7bca" class="ls lt it js b jt mb jx mc kb md kf me kj mf kn lx ly lz ma bi translated"><code class="fe kp kq kr ks b">findAll()</code> —返回所有可用的行。</li></ul><h2 id="6e33" class="ku kv it bd kw kx ky dn kz la lb dp lc kb ld le lf kf lg lh li kj lj lk ll lm bi translated">合并find()和findAll()方法</h2><p id="1684" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">ProjectsController控制器文件有一个<code class="fe kp kq kr ks b">index()</code>方法，在访问URL / <strong class="js iu"> cicrud/projects </strong>时执行，正如在<strong class="js iu"> /app/Config/Routes.php </strong>文件中设置的那样。</p><p id="e42b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Codeigniter\Model类内置的<code class="fe kp kq kr ks b">findAll()</code>方法返回模型的protected <code class="fe kp kq kr ks b">$table</code>类属性中指定的表中的所有行。使用<code class="fe kp kq kr ks b">findAll()</code>，我们可以将检索到的数据传递给一个视图，在浏览器中显示所有结果，这就是ProjectsController(默认)<code class="fe kp kq kr ks b">index()</code>方法的作用:</p><figure class="mh mi mj mk gt ml"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="f39b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">项目表显示在浏览器中:</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi mx"><img src="../Images/fb1ff5dbfb26d9b4e703668db59813e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ARplC7KJmDoEqm5nowVfmQ.png"/></div></div></figure><p id="6e8e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过使用<code class="fe kp kq kr ks b">findAll()</code>，我们不必手动编写任何MySQL查询，这在我看来并不是一件<em class="kt">坏事</em>。</p><p id="39e1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我认为自己是一个SQL优先的开发人员。SQL是我的热情、焦点和T型技能。因此，我完全有能力在需要时编写复杂的SQL查询。</p><p id="d355" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是，对于检索所有数据而不涉及聚合或分析函数的简单需求，利用现有功能代替编写定制代码和查询是有意义的。</p><p id="6781" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在浏览器中显示项目表数据的<strong class="js iu"> project_index.php </strong>视图文件包含以下代码:</p><figure class="mh mi mj mk gt ml"><div class="bz fp l di"><div class="mv mw l"/></div></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><p id="6261" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae ko" href="https://ko-fi.com/joshlovescoffee" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">我总是起来喝一杯浓咖啡！！！</strong>T15】</a></p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><p id="b3e2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在<strong class="js iu"> project_index.php </strong>视图文件中，一些<em class="kt">新的</em>——但与CRUD功能无关——是由<a class="ae ko" href="https://codeigniter.com/user_guide/helpers/url_helper.html" rel="noopener ugc nofollow" target="_blank"> CodeIgniter url助手库</a>提供的<code class="fe kp kq kr ks b">base_url()</code>和<code class="fe kp kq kr ks b">anchor()</code>方法。</p><p id="1e4b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了使用<code class="fe kp kq kr ks b">url</code>助手，它被加载到ProjectsController <code class="fe kp kq kr ks b">__construct()</code>类的构造函数方法中，并在整个控制器中使用其他助手:</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/54c5a9ade57d5148561158d5356a6892.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*6EpbGBYubHrZApZab2KhKA.png"/></div></figure><p id="b3e3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">找到一个具体的项目</strong></p><p id="8a33" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我在项目列表中添加了一个额外的项目(未显示),使总数达到3:</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nd"><img src="../Images/31393fcc8a520b8123c08eb6372e1827.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7JVM9uPquF3UitHNkzcF2A.png"/></div></div></figure><p id="3547" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果我想更改项目三的任何信息，点击该行的<strong class="js iu">编辑</strong>按钮，显示该表格和相关数据:</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ne"><img src="../Images/984c6b1313a3f969342cfb2eb106ce5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CA_Tx49lE6l3_9LOyuXmBQ.png"/></div></div></figure><p id="4a58" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">实际的更新功能将在一篇文章中单独介绍。在这一点上，我们正在为<em class="kt"> </em>过滤一个特定的数据点——在这个例子中是一个单独的项目——并且要这样做，使用<code class="fe kp kq kr ks b">find()</code>方法。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><p id="430c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我每周写一封关于我正在学习并感兴趣的SQL/PHP的邮件。如果这听起来像是你想参与的事情，<a class="ae ko" href="https://digitalowlsprose.ck.page/1b35a06295" rel="noopener ugc nofollow" target="_blank">在这里</a>(场外链接)了解更多。谢谢大家！</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h2 id="3081" class="ku kv it bd kw kx ky dn kz la lb dp lc kb ld le lf kf lg lh li kj lj lk ll lm bi translated">筛选特定行的数据</h2><p id="df81" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">那么单个项目表单是如何展示的呢？</p><p id="d312" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我已经创建了一个视图文件，<strong class="js iu"> edit_project.php，</strong>，其中的代码显示了表单和数据:</p><figure class="mh mi mj mk gt ml"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="3369" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我还修改了<strong class="js iu"> /app/Config/Routes.php </strong>文件并包含了这个路径:</p><figure class="mh mi mj mk gt ml"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="b77b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在ProjectsController控制器文件中，我有一个包含以下代码的<code class="fe kp kq kr ks b">readProject()</code>方法:</p><figure class="mh mi mj mk gt ml"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="7c5f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这里，我向模型<code class="fe kp kq kr ks b">find()</code>方法提供了<code class="fe kp kq kr ks b">$id</code>值，并检索了一个特定的数据行，该数据行随后被返回到<strong class="js iu"> edit_project.php </strong>视图文件。</p><p id="1891" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">同样，CodeIgniter 4模型CRUD方法可以轻松地为我们处理这个<em class="kt">基本</em>功能，而无需编写任何MySQL查询/语句。</p><p id="be01" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">够简单了吧？</p><h2 id="13db" class="ku kv it bd kw kx ky dn kz la lb dp lc kb ld le lf kf lg lh li kj lj lk ll lm bi translated">概述</h2><p id="3172" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">我们已经完成了这个系列的第2部分。我们已经看到了<code class="fe kp kq kr ks b">find()</code>和<code class="fe kp kq kr ks b">findAll()</code>模型方法如何使用很少的代码为我们返回所有数据或特定数据点。</p><p id="8020" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本系列的下一部分中，我们将使用CRUD方法根据更新的需要更改当前数据。</p><p id="4e2e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一如既往，如果你有任何问题或看到代码中的任何错误，请通过评论让我知道。建设性的意见有助于我提供准确的博客帖子，我非常感激。</p><h2 id="f55d" class="ku kv it bd kw kx ky dn kz la lb dp lc kb ld le lf kf lg lh li kj lj lk ll lm bi translated">相似阅读</h2><ul class=""><li id="745e" class="ls lt it js b jt ln jx lo kb nf kf ng kj nh kn lx ly lz ma bi translated">【MySQL之间的运算符查询包含吗？</li><li id="c170" class="ls lt it js b jt mb jx mc kb md kf me kj mf kn lx ly lz ma bi translated"><a class="ae ko" rel="noopener ugc nofollow" target="_blank" href="/recursive-cte-fun-with-substring-in-mysql-3a06fab881cd">用MySQL中的SUBSTRING()递归CTE乐趣</a></li><li id="1ea9" class="ls lt it js b jt mb jx mc kb md kf me kj mf kn lx ly lz ma bi translated"><a class="ae ko" href="https://medium.com/an-idea/mysql-aggregate-query-using-codeigniters-query-builder-fbba11f5ef69" rel="noopener">使用CodeIgniter的查询构建器进行MySQL聚合查询</a></li></ul></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><p id="29b6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">喜欢的内容，你在这个帖子里看过？那么你肯定会喜欢我博客上的博文，<a class="ae ko" href="http://joshuaotwell.com" rel="noopener ugc nofollow" target="_blank">数码猫头鹰的散文</a>(站外链接)。</p><p id="f94b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在那里你会找到关于SQL数据库开发/编程和LAMP stack web开发的博文。</p></div></div>    
</body>
</html>