<html>
<head>
<title>Sort JavaScript/TypeScript Modules Uniformly and Automatically with Git Hooks and CI Pipelines</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Git挂钩和CI管道统一自动地对JavaScript/TypeScript模块进行排序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-sort-the-imported-modules-in-javascript-typescript-automatically-ab397eb0e67a?source=collection_archive---------12-----------------------#2022-10-14">https://levelup.gitconnected.com/how-to-sort-the-imported-modules-in-javascript-typescript-automatically-ab397eb0e67a?source=collection_archive---------12-----------------------#2022-10-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6631" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">学习以优雅的方式对JavaScript/TypeScript代码中导入的模块进行排序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/33d91a3d444ad1cf2040160b9360a140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7cV9miYbUXFK72lr.jpg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://pixabay.com/photos/tea-teabag-teas-drink-herbal-tea-1252397/" rel="noopener ugc nofollow" target="_blank">像素设计</a></figcaption></figure><p id="52c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您的JavaScript/TypeScript项目变大时，您将导入越来越多的模块。如果你没有对模块进行正确的分类，它们看起来会很乱，并且很难阅读和维护。但是，如果你手动排序的话，其实是一件非常繁琐的工作。更糟糕的是，如果你在一个团队中工作，每个人可能都有他/她自己的模块分类习惯。结果，我们最终会在同一个存储库中拥有不同的排序模式，这并不酷。</p><p id="b728" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，有了<a class="ae ky" href="https://github.com/eslint/eslint" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> <em class="lv"> ESLint </em> </strong> </a>和<a class="ae ky" href="https://github.com/import-js/eslint-plugin-import" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="lv">import</em></strong></a>插件，我们可以自动地以统一的方式对模块进行排序。在这篇文章中，我们将介绍<em class="lv"> ESLint </em>和<em class="lv"> import </em>插件的配置，以使用Git挂钩和CI管道对模块进行排序。有了这些工具，你将有统一的进口看起来整洁和专业。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="2408" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了使本教程更有用，并且命令/代码片段可以随时用于任何JavaScript/TypeScript项目，我们将介绍<em class="lv"> ESLint </em>、<a class="ae ky" href="https://github.com/prettier/prettier" rel="noopener ugc nofollow" target="_blank">、<em class="lv">beautiful</em>、</a>、<a class="ae ky" href="https://github.com/okonet/lint-staged" rel="noopener ugc nofollow" target="_blank">、T25】 lint-staged 、</a><a class="ae ky" href="https://github.com/typicode/husky" rel="noopener ugc nofollow" target="_blank">、<em class="lv"> Husky </em>、</a>的设置，它们共同组成了一个静态代码检查管道。这篇文章的重点将放在排序模块的<em class="lv"> ESLint </em>和<em class="lv"> import </em>插件的配置上。其他库的关键设置也将简要介绍。有关这些库的详细信息，请查看以下文章:</p><ul class=""><li id="2943" class="md me it lb b lc ld lf lg li mf lm mg lq mh lu mi mj mk ml bi translated"><a class="ae ky" href="https://betterprogramming.pub/use-eslint-to-make-your-javascript-typesript-code-more-professional-1170bbdff32b" rel="noopener ugc nofollow" target="_blank">如何使用ESLint在JavaScript和TypeScript中编写优雅的代码</a></li><li id="3748" class="md me it lb b lc mm lf mn li mo lm mp lq mq lu mi mj mk ml bi translated"><a class="ae ky" href="https://javascript.plainenglish.io/create-a-pre-commit-git-hook-to-check-and-fix-your-javascript-typescript-code-b04de61834bd" rel="noopener ugc nofollow" target="_blank">创建一个预提交Git挂钩来自动检查和修复您的JavaScript/TypeScript代码</a></li></ul></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="5e49" class="mr ms it bd mt mu mv dn mw mx my dp mz li na nb nc lm nd ne nf lq ng nh ni nj bi translated">依赖项的安装</h2><p id="58f7" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">我们需要为样式和林挺安装一系列的库。建议将它们作为依赖项安装，而不是全局安装，这样它们可以保存在<code class="fe np nq nr ns b">pacakage.json</code>中，从而可以被团队的所有成员使用。</p><p id="7024" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行以下命令安装依赖项:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="516d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，还安装了TypeScript及其依赖项。如果您的项目是普通的JavaSript代码，您可以从上面的命令中删除TypeScript及其依赖项。同样，文章其他部分的命令和代码片段也将用于类型脚本代码。将它们用于JavaScript项目相当简单。您只需要删除TypeScript的相应部分，它们通常只适用于JavaScript。</p><p id="5ab8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，<em class="lv">哈士奇</em>的安装方式不同，这是<a class="ae ky" href="https://typicode.github.io/husky/#/?id=automatic-recommended" rel="noopener ugc nofollow" target="_blank">推荐<em class="lv">哈士奇</em>的</a>方式。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="cc4c" class="mr ms it bd mt mu mv dn mw mx my dp mz li na nb nc lm nd ne nf lq ng nh ni nj bi translated">设置本地ESLint排序规则</h2><p id="1327" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">实际上，<em class="lv"> ESLint </em>可以用<code class="fe np nq nr ns b"><a class="ae ky" href="https://eslint.org/docs/latest/rules/sort-imports" rel="noopener ugc nofollow" target="_blank">sort-imports</a></code>规则对导入的模块进行自动排序。然而，它不能区分内置、外部和内部模块，因此它不是完全自动的。尽管如此，它在对同一个导入语句中的成员进行排序方面做得很好，即对从同一个模块导入的多个函数/类/接口进行排序。</p><p id="88e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，<a class="ae ky" href="https://github.com/lynnkwong/js-ts-linting-example/blob/main/ts-only.eslintrc.js" rel="noopener ugc nofollow" target="_blank">这个<em class="lv"> ESLint </em>配置文件</a>将被用作TypeScript的起点，而<a class="ae ky" href="https://github.com/lynnkwong/js-ts-linting-example/blob/main/js-only.eslintrc.js" rel="noopener ugc nofollow" target="_blank">这个</a>将被用作JavaScript的起点。请注意，我们将删除格式化规则，因为它们将由<em class="lv">prettle</em>库实现。完整的配置文件可以在稍后的文章中找到。</p><p id="6754" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe np nq nr ns b">sort-imports</code>规则的设置如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="9147" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，<code class="fe np nq nr ns b"><a class="ae ky" href="http://ignoreDeclarationSort" rel="noopener ugc nofollow" target="_blank">ignoreDeclarationSort</a></code>被设置为<code class="fe np nq nr ns b">true</code>,因此我们不会使用<em class="lv"> ESLint </em>对导入语句进行排序。相反，我们将使用<em class="lv"> import </em>插件，它可以识别内置、外部和内部模块，并相应地对它们进行排序。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="c68f" class="mr ms it bd mt mu mv dn mw mx my dp mz li na nb nc lm nd ne nf lq ng nh ni nj bi translated">设置导入插件</h2><p id="caad" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">我们已经安装了<a class="ae ky" href="https://github.com/import-js/eslint-plugin-import" rel="noopener ugc nofollow" target="_blank"><em class="lv">eslint-plugin-import</em></a>插件，可以使用它来识别内置、外部和内部模块，并相应地对它们进行排序。这个插件的<a class="ae ky" href="https://github.com/import-js/eslint-plugin-import/blob/main/docs/rules/order.md" rel="noopener ugc nofollow" target="_blank">设置</a>非常冗长。但是，通常默认设置对于大多数项目来说都可以正常工作。需要的时候可以根据自己的口味和要求进行微调。</p><p id="75ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">导入</em>插件的规则是用<code class="fe np nq nr ns b">import/order</code>规则指定的，本帖使用的设置如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="05ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关键点:</p><ul class=""><li id="4203" class="md me it lb b lc ld lf lg li mf lm mg lq mh lu mi mj mk ml bi translated">正如键和值所建议的，<code class="fe np nq nr ns b">groups</code>用于定义不同模块组的顺序。在本例中，列出了所有允许的组，但是您可以只保留需要的组。此外，通过将组放在方括号中，可以将它们混合在一起。例如，我们可以使用<code class="fe np nq nr ns b">["sibling", "parent"]</code>来合并兄弟和父导入。如果您想知道不同组的定义，请查看本参考资料。</li><li id="f602" class="md me it lb b lc mm lf mn li mo lm mp lq mq lu mi mj mk ml bi translated">当<code class="fe np nq nr ns b">newlines-between</code>设置为<code class="fe np nq nr ns b">always</code>时，我们将总是在不同的组之间放置一个新的行，这是可取的，并且可以使导入更容易阅读。</li><li id="fc95" class="md me it lb b lc mm lf mn li mo lm mp lq mq lu mi mj mk ml bi translated">使用<code class="fe np nq nr ns b">alphabetize</code>，我们将按字母顺序对每个组中的导入进行排序。这里我们忽略大小写，按升序排序。</li></ul></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="5a36" class="mr ms it bd mt mu mv dn mw mx my dp mz li na nb nc lm nd ne nf lq ng nh ni nj bi translated">安装导入插件的类型脚本支持</h2><p id="9b8c" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">我们安装了一个插件<code class="fe np nq nr ns b">eslint-import-resolver-typescript</code>，为<code class="fe np nq nr ns b">eslint-plugin-import</code>增加了TypeScript支持。这个插件的设置非常简单，我们只需要指定<code class="fe np nq nr ns b">tsconfig.json</code>的位置。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="aa7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于您自己的项目，请相应地将路径更改为<code class="fe np nq nr ns b">tsconfig.json</code>。这个插件的更多设置可以在<a class="ae ky" href="http://eslint-import-resolver-typescript" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="6588" class="mr ms it bd mt mu mv dn mw mx my dp mz li na nb nc lm nd ne nf lq ng nh ni nj bi translated">完整的配置文件(<code class="fe np nq nr ns b">.eslintrc.js</code>)</h2><p id="6bdf" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">恭喜你！与<em class="lv"> ESLint </em>和<em class="lv"> import </em>相关的插件的配置已经设置好了，我们已经可以开始使用它对我们的导入进行分类了。完整的设置文件是<a class="ae ky" href="https://gist.github.com/lynnkwong/8dfe47b0a61c2243300bc84f921142c4" rel="noopener ugc nofollow" target="_blank">这个</a>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="47ce" class="mr ms it bd mt mu mv dn mw mx my dp mz li na nb nc lm nd ne nf lq ng nh ni nj bi translated">其他库的配置</h2><p id="bcca" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">为了构建一个功能性的静态代码检查管道，我们需要配置更漂亮的<em class="lv"/>、<em class="lv"> lint-staged </em>以及<em class="lv"> Husky </em>。我们只是简单介绍一下设置文件，供大家参考。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="f4a9" class="mr ms it bd mt mu mv dn mw mx my dp mz li na nb nc lm nd ne nf lq ng nh ni nj bi translated">更漂亮的配置(<code class="fe np nq nr ns b">.prettierrc.json</code></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="a151" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意这里的线长键是<code class="fe np nq nr ns b"><a class="ae ky" href="https://prettier.io/docs/en/options.html#print-width" rel="noopener ugc nofollow" target="_blank">printWidth</a></code>，而不是<code class="fe np nq nr ns b"><a class="ae ky" href="https://editorconfig.org/" rel="noopener ugc nofollow" target="_blank">.editorconfig</a></code>文件中的<code class="fe np nq nr ns b">max_line_length</code>。</p><p id="5c56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更多漂亮的配置可以在<a class="ae ky" href="https://prettier.io/docs/en/configuration.html" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="eb48" class="mr ms it bd mt mu mv dn mw mx my dp mz li na nb nc lm nd ne nf lq ng nh ni nj bi translated">lint分段(<code class="fe np nq nr ns b">.lintstagedrc.json</code>)配置</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="45c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个有点特别，值得多说几句:</p><ul class=""><li id="d7da" class="md me it lb b lc ld lf lg li mf lm mg lq mh lu mi mj mk ml bi translated"><em class="lv"> lint暂存</em>库可以只对暂存的文件进行lint处理，而不是所有文件。</li><li id="297e" class="md me it lb b lc mm lf mn li mo lm mp lq mq lu mi mj mk ml bi translated">默认情况下，<em class="lv"> lint暂存的</em>会将暂存的文件追加到命令中。这通常是需要的。但是，对于<code class="fe np nq nr ns b">tsc</code>，我们不能将<code class="fe np nq nr ns b">tsconfig.json</code>与输入文件一起指定。这是一个已知的问题，我们现在需要接受它。为了解决这个问题，我们需要使用bash的技巧，忽略传递给命令的参数。关于这个技巧的更多细节，请查看<a class="ae ky" href="https://github.com/okonet/lint-staged/issues/468#issuecomment-605102567" rel="noopener ugc nofollow" target="_blank">这个线程</a>。</li></ul></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="dc4f" class="mr ms it bd mt mu mv dn mw mx my dp mz li na nb nc lm nd ne nf lq ng nh ni nj bi translated">哈士奇(<code class="fe np nq nr ns b">.husky/pre-commit</code>)的配置</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="3712" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过<code class="fe np nq nr ns b">npx husky-init &amp;&amp; npm install</code>命令创建了一个<code class="fe np nq nr ns b">.husky</code>文件夹。这里有一个<em class="lv">预提交</em>文件，您可以在其中添加要在<a class="ae ky" href="https://lynn-kwong.medium.com/use-pre-commit-commit-msg-and-pre-push-git-hooks-to-fix-your-python-code-asap-77d80d3ce412" rel="noopener"> <em class="lv">预提交</em> </a>钩子中运行的命令。在本例中，我们只需运行<code class="fe np nq nr ns b">lint-staged</code>命令，该命令将依次运行林挺命令。此外，一个新的脚本<code class="fe np nq nr ns b">"prepare": "husky install"</code>已经被添加到<code class="fe np nq nr ns b">package.json</code>中，它将创建<code class="fe np nq nr ns b">.husky</code>文件夹，如果它还没有被创建的话。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="c60e" class="mr ms it bd mt mu mv dn mw mx my dp mz li na nb nc lm nd ne nf lq ng nh ni nj bi translated">使用静态代码检查管道</h2><p id="b281" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">现在一切都设置好了，我们可以开始使用代码检查管道来检查我们的代码。尝试将一些问题引入到一些TypeScript文件中，然后创建一个commit，您将会看到错误消息:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/36a19346a4f1074726a4a9260a6cb642.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*67eOt2KlNRy00CLy4ymc2w.png"/></div></div></figure><p id="bee9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后可以根据错误消息改进代码。</p><p id="66ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本帖介绍的所有文件都可以在<a class="ae ky" href="https://github.com/lynnkwong/js-ts-import-sorting" rel="noopener ugc nofollow" target="_blank">这个repo </a>中找到。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="00ec" class="mr ms it bd mt mu mv dn mw mx my dp mz li na nb nc lm nd ne nf lq ng nh ni nj bi translated">好处:设置服务器端CI管道</h2><p id="787a" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">警惕！创建提交时，可以用<code class="fe np nq nr ns b">--no-verify</code>标志跳过上面设置的预提交挂钩。这可能是故意的，也可能是偶然的。然而，当代码被推送到远程存储库时，这是不允许的。为了解决这个问题，我们可以设置一个服务器端持续集成(CI)管道，当代码被推送到远程存储库时，它将检查代码。</p><p id="ee23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我碰巧在工作中使用GitLab，因此CI管道设置在<code class="fe np nq nr ns b"><a class="ae ky" href="https://docs.gitlab.com/ee/ci/quick_start/index.html#create-a-gitlab-ciyml-file" rel="noopener ugc nofollow" target="_blank">.gitlab-ci.yml</a></code>中。但是，对于其他CI工具来说，它的工作方式应该是类似的。</p><p id="afa0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe np nq nr ns b">.gitlab-ci.yml</code>的内容是:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="6d8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里的要点是:</p><ul class=""><li id="0374" class="md me it lb b lc ld lf lg li mf lm mg lq mh lu mi mj mk ml bi translated">我们需要为Node.js使用Docker映像，并在那里安装软件包。请注意，GitLab会自动将所有文件加载到Docker容器中，并且会安装在<code class="fe np nq nr ns b">package.json</code>(或<code class="fe np nq nr ns b">package-lock.json</code>中指定的依赖项。</li><li id="354f" class="md me it lb b lc mm lf mn li mo lm mp lq mq lu mi mj mk ml bi translated">我们不应该在服务器端修改文件，但是如果样式化或林挺步骤失败，应该让管道失败。注意，对于<em class="lv">更漂亮的</em>，我们需要指定<code class="fe np nq nr ns b">--check</code>标志，以便在代码格式不正确时让该步骤失败。如果没有<code class="fe np nq nr ns b">--check</code>标志，即使代码格式不正确，退出状态也将为0。</li></ul></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="6160" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">干杯，如果你终于到达这里！我们已经介绍了为JavaScript/TypeScript项目设置静态代码检查管道所需的所有工具，重点是设置导入模块的自动排序。建议您亲自尝试管道，这样您可以更好地了解所有设置。</p><p id="9192" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本帖介绍的所有代码都可以在<a class="ae ky" href="https://github.com/lynnkwong/js-ts-import-sorting" rel="noopener ugc nofollow" target="_blank">这个repo </a>中找到。您可以使用这些文件作为自己项目的起点。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="2c56" class="mr ms it bd mt mu mv dn mw mx my dp mz li na nb nc lm nd ne nf lq ng nh ni nj bi translated">相关文章:</h2><ul class=""><li id="dd49" class="md me it lb b lc nk lf nl li nw lm nx lq ny lu mi mj mk ml bi translated"><a class="ae ky" href="https://betterprogramming.pub/use-eslint-to-make-your-javascript-typesript-code-more-professional-1170bbdff32b" rel="noopener ugc nofollow" target="_blank">如何使用ESLint用JavaScript和TypeScript写出优雅的代码</a></li><li id="7f26" class="md me it lb b lc mm lf mn li mo lm mp lq mq lu mi mj mk ml bi translated"><a class="ae ky" href="https://javascript.plainenglish.io/create-a-pre-commit-git-hook-to-check-and-fix-your-javascript-typescript-code-b04de61834bd" rel="noopener ugc nofollow" target="_blank">创建一个预提交Git钩子来自动检查和修复你的JavaScript/TypeScript代码</a></li></ul></div></div>    
</body>
</html>