<html>
<head>
<title>How to create a reusable Modal component in Angular 9 using ng-bootstrap</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用ng-bootstrap在Angular 9中创建可重用的模态组件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-create-a-reusable-modal-component-in-angular-9-using-ng-bootstrap-50c0aa5f3a65?source=collection_archive---------1-----------------------#2020-10-21">https://levelup.gitconnected.com/how-to-create-a-reusable-modal-component-in-angular-9-using-ng-bootstrap-50c0aa5f3a65?source=collection_archive---------1-----------------------#2020-10-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="bcc2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我作为初级Web开发人员开始我的第一份全职工作时，我意识到我的同事正在为应用程序中需要的每个对话框创建一个单独的组件。对我来说这是不可接受的，所以我决定开发一个可重用的模态组件来满足应用程序的需求。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/f3945fadc53c7c273d132b77e69116f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tums41FARnW23dtyXsi86w.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">照片由<a class="ae lb" href="https://unsplash.com/@florianolv?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Florian Olivo </a>在<a class="ae lb" href="https://unsplash.com/s/photos/code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="4f42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在开始之前，我想感谢<a class="lc ld ep" href="https://medium.com/u/14c6e677f21e?source=post_page-----50c0aa5f3a65--------------------------------" rel="noopener" target="_blank"> José Fernando Costa </a>的文章<a class="ae lb" rel="noopener ugc nofollow" target="_blank" href="/how-to-create-a-reusable-modal-dialog-component-in-angular-8-241cc738d260"> <em class="le">如何在Angular 8 </em> </a>中创建一个可重用的模态对话框组件。当我在网上研究如何完成我的任务时，我看到了他的文章，虽然使用的框架不同，但我仍然能够在我构建的解决方案中使用他的一些想法。</p><p id="7c3e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将只关注模型的核心功能，这些功能在。html和。ts文件。如果你对。css文件，你可以在这里看一下资源库<a class="ae lb" href="https://github.com/lorenzodb1/ng-reusable-modal" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="56e4" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">步骤0:设置应用程序</h1><p id="e1a8" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">让我们从安装Angular 9并创建一个全新的应用程序开始</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="fda7" class="mn lg iq mj b gy mo mp l mq mr">npm install -g @angular/cli<br/>ng new ng-reusable-modal</span></pre><p id="0a29" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后将<code class="fe ms mt mu mj b">ng-bootstrap</code>添加到项目中</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="6018" class="mn lg iq mj b gy mo mp l mq mr">cd ng-reusable-modal<br/>ng add @ng-bootstrap/ng-bootstrap</span></pre><h1 id="69d5" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">步骤1:创建我们的模态组件</h1><p id="5903" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">现在我们可以深入到项目的核心，模态组件，我们将在终端上方便地生成它:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="b8f0" class="mn lg iq mj b gy mo mp l mq mr">ng generate component components/modal</span></pre><p id="26a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ms mt mu mj b">ng-bootstrap</code>为我们提供了<code class="fe ms mt mu mj b">NgbModal</code>，这是一个模态对话框服务，允许我们的<code class="fe ms mt mu mj b">ModalComponent</code>做三件大家都期望模态做的事情:打开、关闭和解散。我们将在<em class="le"> modal.component.ts </em>中定义这些动作。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">modal.component.ts(第一版)</figcaption></figure><p id="f51a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如你所见，目前没什么事情。控制器获得模态的模板，并使用<code class="fe ms mt mu mj b">NgbModal</code>服务打开它，然后使用获得的<code class="fe ms mt mu mj b">NgbModalRef</code>关闭或消除模态。</p><p id="bea0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不过，这些都是最基本的功能。我们希望能够个性化我们的模型，这就是我们需要<code class="fe ms mt mu mj b">ModalConfig</code>的原因。我们可以用它来添加一个标题，一个标签到我们的按钮上，甚至决定何时禁用它们。我们将在<em class="le"> modal.config.ts </em>文件中包含所有这些内容。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">modal.config.ts</figcaption></figure><p id="ae4d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如您所见，我们可以关注模型的许多方面。使用这个组件的开发者现在可以个性化它的标题或两个按钮的标签，并定义它在关闭或关闭时的行为。因此，我们将<code class="fe ms mt mu mj b">ModalConfig</code>添加到我们的模态组件中，看看两者是如何实现的。ts和。html文件会改变。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">modal.component.ts(第二版)</figcaption></figure><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">modal.component.html</figcaption></figure><p id="6534" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可能已经注意到，除了<code class="fe ms mt mu mj b">ModalConfig</code>中的标题字段，其他字段都是可选的。其实我们并不想让我们的模态的配置繁琐，而是简单。因此，我们将建立一个默认行为，以防这些字段丢失，即不做任何事情并保持前面描述的基本行为。在某些情况下，一个行为可能是由一个异步函数定义的，这就是为什么我们使用promises来确保我们在继续之前等待这个函数的结果。</p><h1 id="45eb" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">步骤2:使用我们的模态组件</h1><p id="d9f0" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">使用我们刚刚创建的模型也非常简单。由于组件是可注入的，我们只需要在。要在其中包含模式的组件的html文件。该标记将如下所示:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="97e9" class="mn lg iq mj b gy mo mp l mq mr">&lt;modal #<strong class="mj ir"><em class="le">modal </em></strong>[modalConfig]="modalConfig"&gt;<br/>  &lt;!--  body of the modal  --&gt;<br/>&lt;/modal&gt;</span></pre><p id="9f29" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">其中<code class="fe ms mt mu mj b">modalConfig</code>是<code class="fe ms mt mu mj b">ModalConfig</code>的实例，我们在这里指定了我们在步骤1中讨论的行为。</p><p id="6767" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了打开modal，我们使用它的id，在我们的例子中是<code class="fe ms mt mu mj b">#modal</code>来获取它，作为。ts文件并调用其函数。我们是这样做的:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="bfbf" class="mn lg iq mj b gy mo mp l mq mr">@ViewChild('modal') private modalComponent: ModalComponent</span><span id="73d8" class="mn lg iq mj b gy mx mp l mq mr">async openModal() {<br/>  return await this.modalComponent.open()<br/>}</span></pre><p id="148c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将调用异步函数<code class="fe ms mt mu mj b">openModal()</code>来打开id为<code class="fe ms mt mu mj b">#modal</code>的模态。当然，这意味着您可以在同一个组件中包含多个模态，只要您给它们惟一的id。</p><h1 id="1dc9" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结论</h1><p id="c019" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">关于如何在Angular 9和ng-bootstrap中创建可重用的模态组件的教程到此结束。如果您对如何改进有任何意见或建议，请告诉我。</p><p id="adbc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">编码快乐！</p></div></div>    
</body>
</html>