<html>
<head>
<title>How to create like button animation in Android â€” Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•åœ¨Androidä¸­åˆ›å»ºlikeæŒ‰é’®åŠ¨ç”»â€”â€”ç¬¬1éƒ¨åˆ†</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/how-to-create-like-button-animation-in-android-part-1-f99e2792143d?source=collection_archive---------16-----------------------#2021-07-14">https://levelup.gitconnected.com/how-to-create-like-button-animation-in-android-part-1-f99e2792143d?source=collection_archive---------16-----------------------#2021-07-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="48cb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">ä»Dribbbleè®¾è®¡åˆ°çœŸæ­£çš„ä»£ç </h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/5c5ec6c2970c7d5b319be3f9375b7340.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/1*xTb0L1xZ8FX7GDXkZn9dtw.gif"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://dribbble.com/shots/12234916--Like-Button-for-Figma-Cool" rel="noopener ugc nofollow" target="_blank">https://dribbble.com/shots/12234916å¼çš„çº½æ‰£å¾ˆé…·</a></figcaption></figure><h1 id="7293" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">ä»‹ç»</h1><p id="88b2" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">å½“ä½ è¢«å‘ŠçŸ¥åœ¨å®¶å·¥ä½œè€Œåˆ«æ— é€‰æ‹©æ—¶ï¼Œå¾ˆå®¹æ˜“æ„Ÿåˆ°å­¤ç‹¬ã€‚æˆ‘ä¹Ÿæ˜¯ï¼ğŸ¥±</p><p id="fbdc" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">è¶Šæ¥è¶Šæ— èŠåï¼Œæˆ‘å¼€å§‹åœ¨Dribbbleä¸Šæµè§ˆä»¥è·å¾—ä¸€äº›çµæ„Ÿã€‚æˆ‘å‘ç°è‡ªå·±ç›¯ç€è¿™ä¸ªè®¾è®¡ï¼Œçªç„¶æ„è¯†åˆ°è‡ªå·±æœ‰å¤šå–œæ¬¢å®ƒã€‚</p><p id="7e5e" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">ç›¸ä¿¡æˆ‘ï¼Œè¿™æ¯”ä½ æƒ³è±¡çš„å®¹æ˜“ã€‚æˆ‘å°†æ‹æ‘„ä¸€å¼ æˆ‘æœ€è¿‘æ‹æ‘„çš„ç…§ç‰‡ï¼Œå¸¦ä½ èµ°è¿‡è¿™äº›æ­¥éª¤ï¼Œå¹¶ç»™ä½ ä¸€äº›å¦‚ä½•å®ç°å®ƒçš„æƒ³æ³•ã€‚</p><h1 id="8b63" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">å¿…éœ€çš„çŸ¥è¯†</h1><p id="3056" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">è‡ªå®šä¹‰è§†å›¾çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µã€‚æœ‰å…³è‡ªå®šä¹‰è§†å›¾ç»„ä»¶çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒ:</p><p id="03c5" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated"><a class="ae ku" href="https://developer.android.com/guide/topics/ui/custom-components" rel="noopener ugc nofollow" target="_blank">https://developer . Android . com/guide/topics/ui/custom-components</a></p><h1 id="0561" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">åˆ†æåŠ¨ç”»</h1><p id="d673" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">åœ¨ç¬¬1éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†å®ç°å¿ƒå½¢å›¾æ ‡å’ŒèƒŒæ™¯çš„åŠ¨ç”»ã€‚æ‰€ä»¥è¯·ç»§ç»­å…³æ³¨ç¬¬2éƒ¨åˆ†ã€‚ğŸ¥°</p><p id="d970" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">åŠ¨ç”»æ˜¯ä»¥ä¸‹æ­¥éª¤çš„ç»„åˆ:</p><ul class=""><li id="9fae" class="mo mp it lp b lq mj lt mk lw mq ma mr me ms mi mt mu mv mw bi translated">èƒŒæ™¯ä»1ç¼©æ”¾åˆ°0.9ï¼Œç„¶åå›åˆ°1ã€‚</li><li id="e351" class="mo mp it lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">å¿ƒå½¢å›¾æ ‡çš„åˆ»åº¦ä»1åˆ°0.6ï¼Œç„¶åå›åˆ°1ã€‚</li><li id="ce3c" class="mo mp it lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">èƒŒæ™¯ä¼šæ›´æ–°èµ·å§‹å€¼å’Œç»“æŸå€¼ä¹‹é—´çš„é¢œè‰²ã€‚</li><li id="1482" class="mo mp it lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">å¿ƒå½¢å›¾æ ‡æ›´æ–°å¼€å§‹å€¼å’Œç»“æŸå€¼ä¹‹é—´çš„é¢œè‰²ã€‚</li></ul><h1 id="65f3" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">ç¼–ç éƒ¨åˆ†</h1><p id="775b" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">æˆ‘å°†ç¼–ç éƒ¨åˆ†åˆ†ä¸º3ä¸ªæ­¥éª¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><ul class=""><li id="76cd" class="mo mp it lp b lq mj lt mk lw mq ma mr me ms mi mt mu mv mw bi translated"><a class="ae ku" href="#2aed" rel="noopener ugc nofollow">åˆ›å»ºè‡ªå®šä¹‰è§†å›¾ã€‚</a></li><li id="6201" class="mo mp it lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated"><a class="ae ku" href="#6a35" rel="noopener ugc nofollow">å¤„ç†OnDraw()æ–¹æ³•ã€‚</a></li><li id="a71d" class="mo mp it lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated"><a class="ae ku" href="#a340" rel="noopener ugc nofollow">å¤„ç†åŠ¨ç”»ã€‚</a></li></ul><h1 id="2aed" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">æ­¥éª¤1:åˆ›å»ºè‡ªå®šä¹‰è§†å›¾</h1><h2 id="4781" class="nc kw it bd kx nd ne dn lb nf ng dp lf lw nh ni lh ma nj nk lj me nl nm ll nn bi translated">a.åˆ›å»ºè§†å›¾ç±»</h2><p id="0e43" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">æ‚¨å¯ä»¥é€šè¿‡æ‰©å±•<code class="fe no np nq nr b">View</code>ç±»æ¥åˆ›å»ºæ‚¨çš„è‡ªå®šä¹‰è§†å›¾ã€‚è™½ç„¶<code class="fe no np nq nr b">View</code>æœ‰è®¸å¤šæ–¹æ³•æ¥å¤„ç†åº¦é‡ï¼Œä½†æ˜¯æˆ‘ä»¬çš„è§†å›¾ä¸éœ€è¦å¯¹å®ƒçš„å¤§å°è¿›è¡Œç‰¹æ®Šæ§åˆ¶ï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œå®ƒä»¬ä¸éœ€è¦è¢«è¦†ç›–ã€‚</p><p id="61e5" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">è‡ªå®šä¹‰è§†å›¾æœ€é‡è¦çš„éƒ¨åˆ†æ˜¯å®ƒçš„å¤–è§‚ã€‚ç¬¬ä¸€æ­¥æ˜¯è¦†ç›–<code class="fe no np nq nr b">onDraw()</code>æ–¹æ³•ã€‚<code class="fe no np nq nr b">onDraw()</code>çš„å‚æ•°æ˜¯ä¸€ä¸ª<code class="fe no np nq nr b">Canvas</code>å¯¹è±¡ï¼Œè§†å›¾å¯ä»¥ç”¨å®ƒæ¥ç»˜åˆ¶è‡ªå·±ã€‚ä»¥ä¸‹æ˜¯å±•ç¤ºæ¡†æ¶ç»“æ„çš„ä¸€ä¸ªç‰‡æ®µ:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="cf67" class="nc kw it nr b gy nw nx l ny nz">class LikeAnimButton @JvmOverloads constructor(<br/>    context: Context,<br/>    attrs: AttributeSet? = null,<br/>    defStyle: Int = 0<br/>) : View(context, attrs, defStyle) {<br/><br/>    override fun onDraw(canvas: Canvas) {<br/>        super.onDraw(canvas)<br/>    }<br/>}</span></pre><p id="982f" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">åœ¨Kotlinä¸­ï¼Œè®°å¾—ä½¿ç”¨<code class="fe no np nq nr b">@JvmOverloads</code>æ³¨é‡Šæ¥å®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè€Œä¸æ˜¯åƒJavaä¸­é‚£æ ·å®šä¹‰å¤šä¸ªæ„é€ å‡½æ•°ã€‚</p><h2 id="ea02" class="nc kw it bd kx nd ne dn lb nf ng dp lf lw nh ni lh ma nj nk lj me nl nm ll nn bi translated">b.å®šä¹‰ç”¨æˆ·ç•Œé¢çŠ¶æ€</h2><p id="76f4" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰çŠ¶æ€ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨å¯†å°ç±»æ¥ç¡®ä¿çŠ¶æ€éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="e510" class="nc kw it nr b gy nw nx l ny nz">sealed class UIState {<br/>    object UnLike : UIState()<br/>    class Like(val number: Int) : UIState()<br/>    object Animating : UIState()<br/>}</span></pre><p id="16d2" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">æ­¤è§†å›¾ä¸­æœ‰3ç§çŠ¶æ€:</p><ul class=""><li id="0f82" class="mo mp it lp b lq mj lt mk lw mq ma mr me ms mi mt mu mv mw bi translated"><code class="fe no np nq nr b">Like</code>:æ˜¾ç¤ºå¸¦æœ‰ç²‰è‰²å¿ƒå½¢çš„likeæŒ‰é’®ï¼Œå¹¶æœ‰ä¸€ä¸ªæŒ‡ç¤ºlikeç¼–å·çš„æœ‰æ•ˆè½½è·ã€‚</li><li id="f909" class="mo mp it lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated"><code class="fe no np nq nr b">Unlike</code>:ç”¨ç°è‰²å¿ƒå½¢æ˜¾ç¤ºå–œæ¬¢æŒ‰é’®ã€‚</li><li id="30d2" class="mo mp it lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated"><code class="fe no np nq nr b">Animating</code>:è¡¨ç¤ºåŠ¨ç”»æ­£åœ¨è¿è¡Œã€‚è¿™æ˜¯ç”¨æ¥é˜²æ­¢å¿«é€Ÿç‚¹å‡»ã€‚</li></ul><h2 id="92b3" class="nc kw it bd kx nd ne dn lb nf ng dp lf lw nh ni lh ma nj nk lj me nl nm ll nn bi translated">c.å°†å…¶æ·»åŠ åˆ°XMLæ–‡ä»¶ä¸­</h2><p id="2dc8" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">æ¥ä¸‹æ¥ï¼Œç”¨XMLå®ä¾‹åŒ–æˆ‘ä»¬çš„è‡ªå®šä¹‰<code class="fe no np nq nr b">LikeAnimButton</code>:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="e281" class="nc kw it nr b gy nw nx l ny nz">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="match_parent"&gt;<br/><br/>    &lt;com.umbrella.likeanimbutton.widget.LikeAnimButton<br/>        android:id="@+id/btn"<br/>        android:layout_width="112dp"<br/>        android:layout_height="112dp"<br/>        android:layout_gravity="center" /&gt;<br/>&lt;/FrameLayout&gt;</span></pre><h1 id="6a35" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">æ­¥éª¤2:å¤„ç†OnDraw()æ–¹æ³•</h1><h2 id="2f6e" class="nc kw it bd kx nd ne dn lb nf ng dp lf lw nh ni lh ma nj nk lj me nl nm ll nn bi translated">a.åœ¨OnDraw()æ–¹æ³•ä¸­åˆ›å»ºéª¨æ¶ç»“æ„</h2><p id="44ff" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">è¿™å°±æ˜¯<code class="fe no np nq nr b">onDraw()</code>æ–¹æ³•çš„å·¥ä½œåŸç†ã€‚å®ƒä¸€ä¸ªæ¥ä¸€ä¸ªåœ°ç»˜åˆ¶æ‰€æœ‰çš„è§†å›¾å±‚ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç‰‡æ®µæ˜¾ç¤ºäº†æ¡†æ¶ç»“æ„:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="e5c1" class="nc kw it nr b gy nw nx l ny nz">override fun onDraw(canvas: Canvas) {<br/>    super.onDraw(canvas)</span><span id="7866" class="nc kw it nr b gy oa nx l ny nz">    // draw background<br/>    getRoundRectPaint().also {<br/>    }</span><span id="f573" class="nc kw it nr b gy oa nx l ny nz">    // draw heart icon<br/>    getBitmapPaint().also { paint -&gt;<br/>    }<br/>}</span></pre><p id="73ea" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">æ‰€ä»¥ï¼Œåœ¨æˆ‘ä»¬ç”»ä»»ä½•ä¸œè¥¿ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ª<code class="fe no np nq nr b">Paint</code>å¯¹è±¡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åªåˆ›å»ºä¸€ä¸ªç”»å›¾ï¼Œå¹¶ä½¿ç”¨<code class="fe no np nq nr b">getRoundRectPaint()</code>æ–¹æ³•å’Œ<code class="fe no np nq nr b">getBitmapPaint()</code>æ–¹æ³•æ¥æ›´æ–°é¢œè‰²ã€‚</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="3825" class="nc kw it nr b gy nw nx l ny nz">private val paint = Paint(Paint.ANTI_ALIAS_FLAG)</span><span id="bef7" class="nc kw it nr b gy oa nx l ny nz">private fun getRoundRectPaint() = paint.apply {<br/>}</span><span id="2780" class="nc kw it nr b gy oa nx l ny nz">private fun getBitmapPaint() = paint.apply {<br/>}</span></pre><p id="6362" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">æ¥ä¸‹æ¥ï¼Œå®šä¹‰ä¸€ä¸ª<code class="fe no np nq nr b">fraction</code>ï¼Œå®ƒè¡¨ç¤ºåŠ¨ç”»æ­¥éª¤ä¸­ä½¿ç”¨çš„0åˆ°1ä¹‹é—´çš„å½“å‰æ•°é‡ï¼Œæˆ‘ä»¬å°†åœ¨åé¢è®¨è®ºã€‚</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="1a7e" class="nc kw it nr b gy nw nx l ny nz">private var fraction: Float = 0f</span></pre><h2 id="aa7d" class="nc kw it bd kx nd ne dn lb nf ng dp lf lw nh ni lh ma nj nk lj me nl nm ll nn bi translated">b.ç»˜åˆ¶èƒŒæ™¯</h2><p id="595b" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code class="fe no np nq nr b">ArgbEvaluator</code>å¯¹è±¡æ¥åœ¨ä¸¤ç§é¢œè‰²ä¹‹é—´åˆ¶ä½œåŠ¨ç”»:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="1c46" class="nc kw it nr b gy nw nx l ny nz">private val argbEvaluator = ArgbEvaluator()</span></pre><p id="d919" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">æ ¹æ®<code class="fe no np nq nr b">fraction</code>ï¼Œæˆ‘ä»¬è®¡ç®—å‡ºç›¸åº”çš„èƒŒæ™¯é¢œè‰²ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å¸Œæœ›æ›´æ–°é€Ÿåº¦æ¯”å¹³æ—¶å¿«ä¸¤å€:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="a7e2" class="nc kw it nr b gy nw nx l ny nz">private fun getRoundRectPaint() = paint.apply {<br/>    val bgFraction = (fraction * 2).coerceAtMost(1f)<br/>    color = argbEvaluator.evaluate(bgFraction, fromBgColor, toBgColor) as Int<br/>}</span></pre><p id="a531" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">æˆ‘ä»¬éœ€è¦ç”¨ä»1åˆ°0.9çš„ç¼©æ”¾æ¯”ä¾‹æ¥ç”»å®ƒï¼Œç„¶åå›åˆ°1ã€‚ä¸‹é¢æ˜¯åœ¨<code class="fe no np nq nr b">leap()</code>å‡½æ•°å¸®åŠ©ä¸‹çš„ä»£ç ç‰‡æ®µ:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="c4ab" class="nc kw it nr b gy nw nx l ny nz">val scaleX = lerp(1f, 0.9f, 1f, fraction)</span><span id="aa11" class="nc kw it nr b gy oa nx l ny nz">private fun lerp(a: Float, b: Float, c: Float, fraction: Float): Float {<br/>    return if (fraction &lt;= 0.5f) {<br/>        lerp(a, b, fraction * 2)<br/>    } else {<br/>        val tempFraction = fraction - 0.5f<br/>        lerp(b, c, tempFraction * 2)<br/>    }<br/>}</span></pre><p id="293f" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªè‡ªå®šä¹‰çš„<code class="fe no np nq nr b">lerp()</code>ï¼Œå®ƒè¿”å›<code class="fe no np nq nr b">a</code>ã€<code class="fe no np nq nr b">b</code>å’Œ<code class="fe no np nq nr b">c</code>ä¹‹é—´çš„<code class="fe no np nq nr b">fraction</code>çš„çº¿æ€§æ’å€¼ã€‚</p><p id="8d71" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">è¿™å°±æ˜¯æˆ‘ä»¬ç»˜åˆ¶èƒŒæ™¯æ‰€éœ€çš„å…¨éƒ¨å†…å®¹ã€‚è®©æˆ‘ä»¬ç›´æ¥è¿›å…¥ä¸»é¢˜:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="6111" class="nc kw it nr b gy nw nx l ny nz">getRoundRectPaint().also {<br/>    // bound<br/>    val left = 0f<br/>    val top = 0f<br/>    val right = width.toFloat()<br/>    val bottom = height.toFloat()<br/>    // scale<br/>    val scaleX = lerp(1f, 0.9f, 1f, fraction)<br/>    val scaleY = scaleX<br/>    val pivotX = width / 2f<br/>    val pivotY = height / 2f<br/>    canvas.withScale(scaleX, scaleY, pivotX, pivotY) {<br/>        canvas.drawRoundRect(left, top, right, bottom, radius, radius, it)<br/>    }<br/>}</span></pre><p id="d886" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">æ„å»ºé¡¹ç›®å¹¶æ£€æŸ¥ç»“æœã€‚é…·ï¼ğŸ¥°</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/5265b1fb4e9515b8998591bb52b0ddba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/1*UPB9AnxtknXLWin2u84F4A.gif"/></div></figure><h2 id="3315" class="nc kw it bd kx nd ne dn lb nf ng dp lf lw nh ni lh ma nj nk lj me nl nm ll nn bi translated">c.ç»˜åˆ¶å¿ƒå½¢å›¾æ ‡</h2><p id="a215" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä»vectorä¸­è·å–å¿ƒå½¢ä½å›¾:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="2dfe" class="nc kw it nr b gy nw nx l ny nz">private val iconBitmap = getBitmap(R.drawable.ic_baseline_favorite)</span></pre><p id="aeec" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">æ ¹æ®<code class="fe no np nq nr b">fraction</code>ï¼Œæˆ‘ä»¬è®¡ç®—ç›¸åº”çš„ä½å›¾é¢œè‰²ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å¸Œæœ›æ›´æ–°é€Ÿåº¦æ¯”å¹³æ—¶å¿«ä¸¤å€:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="6062" class="nc kw it nr b gy nw nx l ny nz">private fun getBitmapPaint() = paint.apply {<br/>    val bgFraction = (fraction * 2).coerceAtMost(1f)<br/>    color = argbEvaluator.evaluate(bgFraction, fromBmColor, toBmColor) as Int<br/>}</span></pre><p id="8a0a" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨<code class="fe no np nq nr b">PorterDuffXfermode</code>çš„å¸®åŠ©ä¸‹ç»™ä½å›¾ç€è‰²:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="19a2" class="nc kw it nr b gy nw nx l ny nz">private val srcInMode = PorterDuffXfermode(PorterDuff.Mode.SRC_IN)<br/>private val drawableCanvas = Canvas(this.iconBitmap)</span><span id="2599" class="nc kw it nr b gy oa nx l ny nz">private fun tintBitmap() {<br/>    // change to src in<br/>    paint.xfermode = srcInMode<br/>    drawableCanvas.drawRect(0f, 0f, this.iconBitmap.width.toFloat(), this.iconBitmap.height.toFloat(), getBitmapPaint())<br/>    paint.xfermode = null<br/>}</span></pre><p id="caf5" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">ç„¶åï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä»1åˆ°0.6çš„ç¼©æ”¾æ¯”ä¾‹æ¥ç”»å®ƒï¼Œç„¶åå›åˆ°1:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="5556" class="nc kw it nr b gy nw nx l ny nz">getBitmapPaint().also { paint -&gt;<br/>    val scaleX = lerp(1f, 0.6f, 1f, fraction)<br/>    val scaleY = scaleX<br/>    val pivotX = width / 2f<br/>    val pivotY = height / 2f<br/>    canvas.withScale(scaleX, scaleY, pivotX, pivotY) {<br/>        val left = width / 2f - iconBitmap.width / 2f<br/>        val top = height / 2f - iconBitmap.height / 2f<br/>        tintBitmap()<br/>        canvas.drawBitmap(iconBitmap, left, top, paint)<br/>    }<br/>}</span></pre><p id="4a0f" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">æ„å»ºé¡¹ç›®å¹¶å†æ¬¡æ£€æŸ¥ç»“æœã€‚ğŸ˜‰</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/b75d91c9bf068534164f7a5ee40e9634.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/1*Euu29UDC8Pgmanpvbp9W1A.gif"/></div></figure><h1 id="a340" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">æ­¥éª¤3:å¤„ç†åŠ¨ç”»</h1><p id="ca42" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">ä¸‹é¢æ˜¯åä¸º<code class="fe no np nq nr b">setUIState()</code>çš„æ–¹æ³•()ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥æ”¹å˜likeæŒ‰é’®çš„å¤–è§‚:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="134f" class="nc kw it nr b gy nw nx l ny nz">fun setUIState(uiState: UIState, isAnim: Boolean) {<br/>    updateBgColor(uiState)<br/>    if (this.uiState == UIState.Animating) {<br/>        return<br/>    }<br/>    if (isAnim) {<br/>        runAnimation().apply {<br/>            doOnEnd {<br/>                this@LikeAnimButton.uiState = uiState<br/>            }<br/>        }<br/>    } else {<br/>        this.uiState = uiState<br/>        fraction = 0f<br/>        invalidate()<br/>    }<br/>}</span></pre><p id="13a1" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">æœ€åï¼Œ<code class="fe no np nq nr b">runAnimation()</code>æ–¹æ³•ç”¨äºæ›´æ–°<code class="fe no np nq nr b">fraction</code>å¹¶è°ƒç”¨<code class="fe no np nq nr b">invalidate()</code>ï¼Œåè€…é€šè¿‡<code class="fe no np nq nr b">onDraw()</code>æ–¹æ³•é‡ç»˜UI:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="4521" class="nc kw it nr b gy nw nx l ny nz">private fun runAnimation(): ValueAnimator {<br/>    return ValueAnimator.ofFloat(0f, 1f).apply {<br/>        addUpdateListener {<br/>            fraction = it.animatedValue as Float<br/>            invalidate()<br/>        }<br/>        interpolator = FastOutSlowInInterpolator()<br/>        doOnStart {<br/>            this@LikeAnimButton.uiState = UIState.Animating<br/>        }<br/>        duration = 500L<br/>        start()<br/>    }<br/>}</span></pre><p id="29e4" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">è®©æˆ‘ä»¬é‡å»ºä¸€ä¸‹ï¼Œçœ‹çœ‹æœ€åçš„ç»“æœï¼ğŸ¥°</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/2cf5d0f1b239ba2a3f20bc3ee9d0f5cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/1*FrqoqgAUVEDPpK_rS93AlA.gif"/></div></figure><h1 id="fb26" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">è¿™æ˜¯ä¸€ä¸ªæ€»ç»“ï¼</h1><p id="ece0" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">ä¸‹é¢æ˜¯<code class="fe no np nq nr b">LikeAnimButton</code>ç±»çš„å®Œæ•´ä»£ç :</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="b0b8" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">å¦‚æœæ‚¨åœ¨æ‰§è¡Œä»£ç ç‰‡æ®µæ—¶å‘ç°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹GitHub repoè·å–å¸®åŠ©:</p><div class="og oh gp gr oi oj"><a href="https://github.com/PhongHuynh93/LikeButtonAnimation" rel="noopener  ugc nofollow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd iu gy z fp oo fr fs op fu fw is bi translated">phonghuynh 93/like button animation</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">åœ¨GitHubä¸Šåˆ›å»ºä¸€ä¸ªå¸æˆ·ï¼Œä¸ºphonghuynh 93/LikeButtonAnimationå¼€å‘åšè´¡çŒ®ã€‚</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">github.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox ko oj"/></div></div></a></div></div><div class="ab cl oy oz hx pa" role="separator"><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd"/></div><div class="im in io ip iq"><p id="cf68" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">ç°åœ¨ä½ å·²ç»å­¦ä¼šäº†å¦‚ä½•ç»˜åˆ¶å–œæ¬¢çš„å›¾æ ‡ï¼Œå¹¶åˆ¶ä½œä¸€ä¸ªå¾ˆé…·çš„åŠ¨ç”»ã€‚åœ¨ä¸‹ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•ç»˜åˆ¶æ¶Ÿæ¼ªæ•ˆåº”å’Œç±»ä¼¼çš„æ•°å­—ã€‚</p><p id="6bc8" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">éå¸¸æ„Ÿè°¢ä½ é˜…è¯»æˆ‘çš„æ–‡ç« ã€‚<em class="pf">å¦‚æœä½ å–œæ¬¢è¿™ä¸ªæ•…äº‹ï¼Œè¯·</em> <strong class="lp iu"> <em class="pf">ç‚¹å‡»</em> </strong>ğŸ‘<strong class="lp iu"> <em class="pf">æŒ‰é’®ï¼Œåˆ†äº«</em> </strong> <em class="pf">å®ƒæ¥å¸®åŠ©åˆ«äººï¼</em>å…³æ³¨æˆ‘çš„<a class="ae ku" href="https://mr-umbrella.medium.com/" rel="noopener"> Medium </a> <em class="pf">è·å–æ›´å¤šç‰›é€¼å®‰å“å°æŠ€å·§</em>ã€‚ä¹Ÿå¯ä»¥åœ¨<a class="ae ku" href="https://www.linkedin.com/in/huynh-phong-3649a7131/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>ä¸Šæ‰¾åˆ°æˆ‘ã€‚ç¥æ‚¨æ„‰å¿«ï¼ğŸ˜„</p><h1 id="24f6" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">ç»§ç»­è¯»Androidçš„ä¸œè¥¿</h1><p id="c3cd" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/shared-element-using-materialcontainertransform-in-android-6d420e74b122">Androidä¸­ä½¿ç”¨MaterialContainerTransformçš„å…±äº«å…ƒç´ </a></p><p id="e584" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/android-button-morphing-animation-bc3bed740501">å®‰å“æŒ‰é’®å˜å½¢åŠ¨ç”»</a></p><p id="cccd" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/motionlayout-collapsing-toolbar-d0ce8dd874b6">è¿åŠ¨å¸ƒå±€â€”â€”æŠ˜å å·¥å…·æ </a></p><h1 id="5c8a" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">Jetpackæ’°å†™</h1><p id="200a" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/implement-android-snackbar-in-jetpack-compose-d83df5ff5b47">åœ¨Jetpack Composeä¸­å®ç°snack bar</a></p><p id="7842" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/implement-android-tablayout-in-jetpack-compose-e61c113add79">åœ¨Jetpack Composeä¸­å®ç°tab layout</a></p><p id="1dbb" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/implement-tablayout-with-viewpager-in-android-jetpack-compose-d509fc6e2d8e">åœ¨Jetpack Composeä¸­ç”¨ViewPagerå®ç°talayout</a></p><p id="4826" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/create-an-auto-scroll-viewpager-with-transformation-and-ken-burns-effect-in-android-jetpack-compose-efdf46f2e8ed">åœ¨Jetpack Composeä¸­åˆ›å»ºä¸€ä¸ªå¸¦æœ‰å˜å½¢å’Œken burnsæ•ˆæœçš„è‡ªåŠ¨æ»šåŠ¨æµè§ˆå™¨</a></p></div></div>    
</body>
</html>