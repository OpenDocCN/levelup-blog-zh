<html>
<head>
<title>Animating Brightness Adjustment in iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOSä¸­çš„äº®åº¦è°ƒæ•´åŠ¨ç”»</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/animating-brightness-adjustment-in-ios-e56d1bff5a9f?source=collection_archive---------20-----------------------#2022-11-28">https://levelup.gitconnected.com/animating-brightness-adjustment-in-ios-e56d1bff5a9f?source=collection_archive---------20-----------------------#2022-11-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9b14" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨iOSåº”ç”¨ç¨‹åºå¼€å‘ä¸­ï¼Œé€šè¿‡è¿‡æ¸¡åŠ¨ç”»ä»¥ç¼–ç¨‹æ–¹å¼å°†å±å¹•äº®åº¦è°ƒæ•´åˆ°ç‰¹å®šå€¼ä»æ¥éƒ½ä¸å®¹æ˜“å®ç°ï¼Œå› ä¸ºè‹¹æœæ²¡æœ‰æä¾›ç›´è§‚çš„APIã€‚</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><blockquote class="ks kt ku"><p id="f9c2" class="jn jo kv jp b jq jr js jt ju jv jw jx kw jz ka kb kx kd ke kf ky kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="iq">å¼€å‘è€…</em> </strong> <em class="iq">:æˆ‘æƒ³ç”¨è¿‡æ¸¡æ•ˆæœè°ƒæ•´å±å¹•äº®åº¦ã€‚ä½ èƒ½å‘Šè¯‰æˆ‘æ€ä¹ˆåšå—ï¼ŸğŸ§ </em></p><p id="c9fb" class="jn jo kv jp b jq jr js jt ju jv jw jx kw jz ka kb kx kd ke kf ky kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="iq">è‹¹æœ</em> </strong> <em class="iq">:å¥½å§ï¼Œå¥½å§ï¼ä»£ç å·²ç»åœ¨é‚£é‡Œäº†ã€‚ç»™ä½ ã€‚æˆ‘ç›¸ä¿¡è¿™å°±æ˜¯ä½ æƒ³è¦çš„ã€‚ğŸ˜€</em></p></blockquote><pre class="kz la lb lc gt ld le lf bn lg lh bi"><span id="56dd" class="li lj iq le b be lk ll l lm ln">// From 10% <br/>UIScreen.main.brightness = 0.1<br/><br/>// To 100% <br/>UIScreen.main.brightness = 1</span></pre><figure class="kz la lb lc gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lo"><img src="../Images/22eba2be32dcd6b21af16bf7fd933c1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*e8sA_ILtyCz0oIQCbHuPCA.gif"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">æ— è¿‡æ¸¡æ•ˆæœçš„äº®åº¦è°ƒèŠ‚</figcaption></figure></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="714a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•å®ç°å¸¦æœ‰è¿‡æ¸¡æ•ˆæœçš„äº®åº¦è°ƒæ•´ï¼Œä»¥åŠ<strong class="jp ir"> <em class="kv">ä»£ç ç‰‡æ®µã€è§£é‡Šå’Œç»“æœ</em> </strong>ã€‚</p><h1 id="361d" class="ma lj iq bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">ğŸ§‘â€ğŸ’»ä»£ç ç‰‡æ®µ:</h1><pre class="kz la lb lc gt ld le lf bn lg lh bi"><span id="4dcf" class="li lj iq le b be lk ll l lm ln">func adjustScreenBrightness(to value: CGFloat, animationDuration: CGFloat = 1) {<br/>    var currentBrightness: CGFloat = UIScreen.main.brightness<br/>        <br/>    // MARK: 1) Determine the direction of the adjustment; Increase / Decrease<br/>    let isIncreasing: Bool = currentBrightness &lt; value<br/>        <br/>    // MARK: 2) Determine the animation speed<br/>    let incrementalStep: CGFloat = 1 / (animationDuration * 1000)<br/>        <br/>    // MARK: 3) Execute the iteration operation in a separate thread<br/>    DispatchQueue.global(qos: .userInteractive).async {<br/>        while (isIncreasing &amp;&amp; currentBrightness &lt;= value) || (!isIncreasing &amp;&amp; currentBrightness &gt;= value) {<br/>            DispatchQueue.main.async {<br/>                currentBrightness += isIncreasing ? incrementalStep : -incrementalStep<br/>                UIScreen.main.brightness = currentBrightness<br/>            }<br/>                <br/>            // MARK: 4) Set 1 milisecond interval to the while-loop<br/>            Thread.sleep(forTimeInterval: 1 / 1000)<br/>        }<br/>    }<br/>}</span></pre><h1 id="507f" class="ma lj iq bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated"><strong class="ak">ğŸ“è§£é‡Š:</strong></h1><h2 id="38b5" class="mx lj iq bd mb my mz dn mf na nb dp mj jy nc nd mn kc ne nf mr kg ng nh mv ni bi translated">1.ç¡®å®šè°ƒæ•´çš„æ–¹å‘ï¼›å¢åŠ /å‡å°‘</h2><p id="e8b5" class="pw-post-body-paragraph jn jo iq jp b jq nj js jt ju nk jw jx jy nl ka kb kc nm ke kf kg nn ki kj kk ij bi translated">è¿™éå¸¸ç®€å•ã€‚é€šè¿‡æ¯”è¾ƒå±å¹•äº®åº¦çš„å½“å‰å€¼å’Œæˆ‘ä»¬æƒ³è¦å°†äº®åº¦è°ƒåˆ°çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åŠ¨ç”»æ“ä½œæ˜¯åº”è¯¥<strong class="jp ir"> <em class="kv">å¢åŠ </em> </strong>è¿˜æ˜¯<strong class="jp ir"> <em class="kv">é™ä½</em> </strong>å±å¹•çš„äº®åº¦ã€‚</p><h2 id="93db" class="mx lj iq bd mb my mz dn mf na nb dp mj jy nc nd mn kc ne nf mr kg ng nh mv ni bi translated">2.ç¡®å®šåŠ¨ç”»é€Ÿåº¦</h2><p id="34cf" class="pw-post-body-paragraph jn jo iq jp b jq nj js jt ju nk jw jx jy nl ka kb kc nm ke kf kg nn ki kj kk ij bi translated">è¯¥å‡½æ•°æœŸæœ›<strong class="jp ir"> <em class="kv">æŒç»­æ—¶é—´</em> </strong>å‚æ•°ç¡®å®šå¢é‡å€¼ï¼Œä»¥å¢åŠ æˆ–å‡å°‘å±å¹•äº®åº¦ã€‚</p><h2 id="abb2" class="mx lj iq bd mb my mz dn mf na nb dp mj jy nc nd mn kc ne nf mr kg ng nh mv ni bi translated">3.åœ¨å•ç‹¬çš„çº¿ç¨‹ä¸­æ‰§è¡Œè¿­ä»£æ“ä½œ</h2><p id="36cc" class="pw-post-body-paragraph jn jo iq jp b jq nj js jt ju nk jw jx jy nl ka kb kc nm ke kf kg nn ki kj kk ij bi translated">ä¸ºäº†ä½¿äº®åº¦è°ƒæ•´çœ‹èµ·æ¥å…·æœ‰ç¨³å®šå’Œèˆ’ç¼“çš„è¿‡æ¸¡åŠ¨ç”»ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸€ä¸ªåä¸º<strong class="jp ir"> <em class="kv">çš„è¿­ä»£æ“ä½œï¼ŒåŒæ—¶å¾ªç¯</em> </strong>æ¥æ‰§è¡Œå±å¹•äº®åº¦å€¼çš„è¿ç»­å¢åŠ æˆ–å‡å°‘ã€‚</p><p id="6b66" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘è¿˜è¦å¼ºè°ƒä½¿ç”¨<a class="ae no" href="http://shorturl.at/HIJXZ" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="kv"/></strong></a><strong class="jp ir"><em class="kv"/></strong>æ¥æ‰§è¡Œå¾ªç¯ã€‚</p><blockquote class="np"><p id="32b0" class="nq nr iq bd ns nt nu nv nw nx ny kk dk translated"><strong class="ak"> <em class="nz">ç”¨æˆ·äº¤äº’</em> </strong> <em class="nz">æœåŠ¡è´¨é‡:</em></p><p id="ac9d" class="nq nr iq bd ns nt nu nv nw nx ny kk dk translated">ç”¨æˆ·äº¤äº’ä»»åŠ¡çš„æœåŠ¡è´¨é‡ç±»åˆ«ï¼Œå¦‚åŠ¨ç”»ã€äº‹ä»¶å¤„ç†æˆ–åº”ç”¨ç¨‹åºç”¨æˆ·ç•Œé¢çš„æ›´æ–°â€”è‹¹æœå¼€å‘è€…æ–‡æ¡£</p></blockquote></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="4786" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ ¹æ®å®šä¹‰ï¼Œç”¨æˆ·äº¤äº’QoSæ˜¯ç”¨äºå¯¹ç•Œé¢æˆ–åŠ¨ç”»æ‰§è¡Œäº¤äº’æ›´æ–°çš„æœ€åˆé€‚çš„é˜Ÿåˆ—ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå°†æ‰§è¡Œè®¾ç½®åˆ°å•ç‹¬çš„æ“ä½œé˜Ÿåˆ—ï¼Œè€Œä¸æ˜¯<strong class="jp ir">ä¸»</strong>é˜Ÿåˆ—ï¼Œå¯ä»¥é˜²æ­¢ä¸åº”ç”¨ç¨‹åºæ»åæˆ–å†»ç»“ç›¸å…³çš„å¸¸è§ç”¨æˆ·ç•Œé¢é—®é¢˜ï¼Œå› ä¸ºå¦‚æœåŠ¨ç”»é€Ÿåº¦è¾ƒæ…¢æˆ–è€…<strong class="jp ir"><em class="kv">animation duration</em></strong>å‚æ•°(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­)è®¾ç½®ä¸ºè¾ƒé«˜çš„å€¼ï¼Œå¾ªç¯æ“ä½œçš„æ‰§è¡Œæ—¶é—´å°†éœ€è¦è¾ƒé•¿çš„æ—¶é—´æ‰èƒ½å®Œæˆã€‚</p><h2 id="fcd3" class="mx lj iq bd mb my mz dn mf na nb dp mj jy nc nd mn kc ne nf mr kg ng nh mv ni bi translated">4.ä¸ºæ‰§è¡Œåˆ›å»ºä¸€ä¸ªåŠ¨ç”»æ•ˆæœ</h2><p id="94f1" class="pw-post-body-paragraph jn jo iq jp b jq nj js jt ju nk jw jx jy nl ka kb kc nm ke kf kg nn ki kj kk ij bi translated">è¿­ä»£æ“ä½œ<strong class="jp ir"> <em class="kv"> while-loop </em> </strong>ï¼Œä»å…¶é²œæ˜çš„æ€§è´¨æ¥çœ‹ï¼Œæ ¹æœ¬æ²¡æœ‰è€å¿ƒã€‚æˆ‘ä»¬æ— æ³•æ§åˆ¶å®ƒçš„é€Ÿåº¦ã€‚CPUæ€§èƒ½è¶Šé«˜ï¼Œæ‰§è¡Œé€Ÿåº¦è¶Šå¿«ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯æ¬¡å¢é‡è¿­ä»£ä¸­å¼•å…¥ä¸€æ¯«ç§’(1ms)çš„æ—¶é—´é—´éš”ï¼Œä»¥äº§ç”ŸåŠ¨ç”»æ•ˆæœã€‚</p><h1 id="ca98" class="ma lj iq bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">ğŸ†ç»“æœ:</h1><figure class="kz la lb lc gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lo"><img src="../Images/9fa73d2e6da85b4127205d5e2dc4e33c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*6R3hF_vOWnKHb5vXmpLFwQ.gif"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">å…·æœ‰è¿‡æ¸¡æ•ˆæœçš„äº®åº¦è°ƒèŠ‚</figcaption></figure><h1 id="28a6" class="ma lj iq bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">ğŸå¥–é‡‘:</h1><p id="ca1c" class="pw-post-body-paragraph jn jo iq jp b jq nj js jt ju nk jw jx jy nl ka kb kc nm ke kf kg nn ki kj kk ij bi translated">ä¸ºäº†ä½¿ä¸Šé¢ä»£ç ç‰‡æ®µä¸­çš„å‡½æ•°å¯ä»¥ä»ä»»ä½•åœ°æ–¹è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨UIScreenç±»ä¸Šåˆ›å»ºä¸€ä¸ªæ‰©å±•ï¼Œå¹¶å°†è¯¥å‡½æ•°æ”¾åœ¨é‚£é‡Œã€‚</p><pre class="kz la lb lc gt ld le lf bn lg lh bi"><span id="05e6" class="li lj iq le b be lk ll l lm ln">extension UIScreen {<br/><br/>  func adjustScreenBrightness(to value: CGFloat, animationDuration: CGFloat = 1) {<br/>      var currentBrightness: CGFloat = UIScreen.main.brightness<br/>        <br/>      // MARK: 1) Determine the direction of the adjustment; Increase / Decrease<br/>      let isIncreasing: Bool = currentBrightness &lt; value<br/>        <br/>      // MARK: 2) Determine the animation speed<br/>      let incrementalStep: CGFloat = 1 / (animationDuration * 1000)<br/>        <br/>      // MARK: 3) Execute the iteration operation in a separate thread<br/>      DispatchQueue.global(qos: .userInteractive).async {<br/>          while (isIncreasing &amp;&amp; currentBrightness &lt;= value) || (!isIncreasing &amp;&amp; currentBrightness &gt;= value) {<br/>              DispatchQueue.main.async {<br/>                  currentBrightness += isIncreasing ? incrementalStep : -incrementalStep<br/>                  UIScreen.main.brightness = currentBrightness<br/>              }<br/>                <br/>              // MARK: 4) Set 1 milisecond interval to the while-loop<br/>              Thread.sleep(forTimeInterval: 1 / 1000)<br/>          }<br/>      }<br/>  }<br/><br/>}</span></pre><p id="a87d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ğŸ‡°ğŸ‡­å°±æ˜¯è¿™æ ·ã€‚å¦‚æœä½ æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€ç¼–ç é£æ ¼ç”šè‡³å»ºè®®ï¼Œè¯·éšæ„å‘è¡¨ä½ çš„æƒ³æ³•ã€‚</p></div></div>    
</body>
</html>