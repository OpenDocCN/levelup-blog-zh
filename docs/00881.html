<html>
<head>
<title>A Heat Map in JavaScript for Texas Holdem Win Probability</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">德州扑克获胜概率的JavaScript热图</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-heat-map-for-texas-holdem-8b431224191a?source=collection_archive---------1-----------------------#2019-09-03">https://levelup.gitconnected.com/a-heat-map-for-texas-holdem-8b431224191a?source=collection_archive---------1-----------------------#2019-09-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/08098d7061f1e9be4db5d82c4c29a5b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4ZBIKavcFT0WQtV6.jpeg"/></div></div></figure><p id="4cdb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可能熟悉<a class="ae kw" href="https://en.wikipedia.org/wiki/Texas_hold_%27em" rel="noopener ugc nofollow" target="_blank"> Texas Holdem </a>，这是扑克的一种变体，向每位玩家发两张牌面朝下的牌，然后分三个阶段发五张面朝上的公共牌，总共四个阶段。在每个阶段之后，玩家都有机会下注或加注。</p><p id="c154" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">假设你有两张底牌。在翻牌圈发牌之前，你赢的机会有多大？了解这一点，你就可以相应地下注，或者计划下注。</p><p id="4f7b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://cs.indiana.edu/~kapadia/index.html" rel="noopener ugc nofollow" target="_blank">印第安纳大学的Apu Kapadia </a>教授采用统计学方法进行分析，通过运行40亿个模拟扑克游戏来确定结果。<a class="ae kw" href="https://cs.indiana.edu/~kapadia/nofoldem/" rel="noopener ugc nofollow" target="_blank">几个169行的列表是结果</a>，显示基于玩家数量的胜率，从2到10。虽然每个列表都非常有用，但由于有这么多行，很难看出数字中的任何模式，除了显示高排名的孔牌比低排名的孔牌赢的次数多。</p><p id="56b4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不久前，我创建了一个简单的热图包。为了寻找实际用途，我偶然发现了卡帕迪亚博士的统计数据，它们非常适合用于演示。</p><h1 id="f45c" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">篡改统计数据</h1><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lv"><img src="../Images/0321bb517661eaca37999f8bdcea066f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NMCzKGag-MDwDTJwC8vtgQ.jpeg"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">照片由<a class="ae kw" href="https://unsplash.com/@christinhumephoto?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">克里斯蒂安·休姆</a>在<a class="ae kw" href="https://unsplash.com/search/photos/massage?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="7727" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由于每组统计数据都不方便地嵌入在HTML中，所以我有两个选择:</p><ol class=""><li id="6397" class="me mf iq ka b kb kc kf kg kj mg kn mh kr mi kv mj mk ml mm bi translated">使用<a class="ae kw" href="https://github.com/cheeriojs/cheerio" rel="noopener ugc nofollow" target="_blank"> Cheerio </a>或同等工具从呈现的文档对象模型中抓取数据；</li><li id="d2f5" class="me mf iq ka b kb mn kf mo kj mp kn mq kr mr kv mj mk ml mm bi translated">将呈现的HTML页面上的统计信息剪切并粘贴到一个文件中，然后使用一些regex魔法将其转换为JSON格式</li></ol><p id="bd03" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由于统计数据带有版权声明，我问教授更喜欢哪种方法，他同意选择2。正则表达式并不太难写，所以我用JSON结束，如下所示:</p><pre class="lw lx ly lz gt ms mt mu mv aw mw bi"><span id="2463" class="mx ky iq mt b gy my mz l na nb">const arry = [<br/>  { pair: 'AA', wins: '84.97	 ', ties: '0.57	' },<br/>  { pair: 'KK', wins: '82.10	 ', ties: '0.58	' },<br/>  { pair: 'QQ', wins: '79.63	 ', ties: '0.61	' },<br/>  { pair: 'JJ', wins: '77.16	 ', ties: '0.65	' },<br/>  { pair: 'TT', wins: '74.66	 ', ties: '0.72	' },<br/>  { pair: '99', wins: '71.69	 ', ties: '0.80	' },<br/>  { pair: '88', wins: '68.72	 ', ties: '0.91	' },<br/>  { pair: '77', wins: '65.72	 ', ties: '1.04	' },<br/>  { pair: 'KAs', wins: '65.28	 ', ties: '2.66	' },<br/>  { pair: 'QAs', wins: '64.41	 ', ties: '2.78	' },...</span></pre><p id="d21b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这仍然不是jsheatmap API的正确格式，但是<a class="ae kw" href="https://github.com/JeffML/pokermap/blob/master/src/datasets/dsParser.js" rel="noopener ugc nofollow" target="_blank">几行代码</a>解决了这个问题。</p><p id="e3a8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在一切都准备好了。</p><h1 id="66fd" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">热图API</h1><p id="f9e6" class="pw-post-body-paragraph jy jz iq ka b kb nc kd ke kf nd kh ki kj ne kl km kn nf kp kq kr ng kt ku kv ij bi translated">我用TypeScript编写了jsheatmap包，它采用以下构造函数参数:</p><pre class="lw lx ly lz gt ms mt mu mv aw mw bi"><span id="a067" class="mx ky iq mt b gy my mz l na nb">type labeledValuesType = [string, number[]]<br/><br/>class Sterno {<br/>  headings: Array&lt;string&gt;<br/>  rows: Array&lt;labeledValuesType&gt;<br/><br/>  constructor(headings: string[], rows: Array&lt;labeledValuesType&gt;) {...</span></pre><p id="38cd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe nh ni nj mt b">headings</code>是列标题，<code class="fe nh ni nj mt b">['A', 'K', ..., '2']</code>；行的格式如下:</p><pre class="lw lx ly lz gt ms mt mu mv aw mw bi"><span id="f01c" class="mx ky iq mt b gy my mz l na nb">[['A', [51.7, 36.2, 25.1,...], ['K', [...], ..., ['2', [...]]</span></pre><p id="7a98" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">其中，每个数组元素的第一个值是行标签，后面的数字数组是该行的单元格值。这些像元值将被缩放到0.0到1.0之间的数字，并且RGB颜色值将被分配给这些缩放值。这一切都发生在调用方法<code class="fe nh ni nj mt b">getData()</code>时，该方法返回一个数据结构，显示原始输入数据是如何缩放的，以及每个缩放值对应的颜色渐变是什么:</p><figure class="lw lx ly lz gt jr"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="9b88" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在剩下的就是以彩色格式呈现地图数据。</p><h1 id="c99a" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">React应用</h1><p id="a256" class="pw-post-body-paragraph jy jz iq ka b kb nc kd ke kf nd kh ki kj ne kl km kn nf kp kq kr ng kt ku kv ij bi translated">我使用<a class="ae kw" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>来快速启动和运行react应用程序。脚本运行完毕后，我只需编辑生成的代码。</p><p id="0d04" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我想做的第一件事是通过单选按钮和复选框添加一些用户交互性。用户可以指定三件事情:</p><ol class=""><li id="72b3" class="me mf iq ka b kb kc kf kg kj mg kn mh kr mi kv mj mk ml mm bi translated">玩家数量</li><li id="6e54" class="me mf iq ka b kb mn kf mo kj mp kn mq kr mr kv mj mk ml mm bi translated">合适或不合适的底牌</li><li id="5fa7" class="me mf iq ka b kb mn kf mo kj mp kn mq kr mr kv mj mk ml mm bi translated">是否包括领带</li></ol><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/952e7141b561aaf23c614354449aefac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VtLZmqaMWCyEwFAHS4fvhw.png"/></div></div></figure><p id="a021" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我提到了玩家数量的影响。如果底牌是同花(例如，两张都是红心)，那么赢的几率会增加一点。平局是指两个或两个以上的玩家在他们的5张牌(他们的两张底牌加上五张公共牌中的三张)中拥有相同的牌级，从而平分底池。</p><p id="5a75" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以下是几张截图:</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/03494c66c869c782b3074571be6624fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*n4ukrSeJqwuZorI-.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">两名球员，不合适，没有联系</figcaption></figure><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/0f3941c04d29e4e5e589e5cc7687cefd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*s_FGr44GjgZ7FHpH.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">5名玩家，同花，有平局</figcaption></figure><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/9f5a7097444b45844eb4b5e43ea8460e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ytzzIg6_MDkA6Boa.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">10名玩家，同花，没有平局</figcaption></figure><h1 id="6219" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">热图中有什么值得注意的</h1><p id="0361" class="pw-post-body-paragraph jy jz iq ka b kb nc kd ke kf nd kh ki kj ne kl km kn nf kp kq kr ng kt ku kv ij bi translated">以下是热图中容易发现的一些东西，你可以在<a class="ae kw" href="https://pokermap.netlify.com/" rel="noopener ugc nofollow" target="_blank">https://pokermap.netlify.com</a>验证:</p><h2 id="1fcd" class="mx ky iq bd kz np nq dn ld nr ns dp lh kj nt nu ll kn nv nw lp kr nx ny lt nz bi translated"><strong class="ak">玩家越多，胜算越小</strong></h2><p id="0958" class="pw-post-body-paragraph jy jz iq ka b kb nc kd ke kf nd kh ki kj ne kl km kn nf kp kq kr ng kt ku kv ij bi translated">在两人游戏中，左上角有很多绿色，这表明在两人游戏中排名较高的底牌的胜算较大(A-2的胜算约为50%，与一对2的胜算大致相同)。有10个玩家，比两个2要差得多。</p><h2 id="d765" class="mx ky iq bd kz np nq dn ld nr ns dp lh kj nt nu ll kn nv nw lp kr nx ny lt nz bi translated"><strong class="ak">排名靠后的对子帮助不大</strong></h2><p id="e315" class="pw-post-body-paragraph jy jz iq ka b kb nc kd ke kf nd kh ki kj ne kl km kn nf kp kq kr ng kt ku kv ij bi translated">在10人参与的情况下，一对6的胜算与任何不成对的牌面组合大致相同或更少。</p><h2 id="b01e" class="mx ky iq bd kz np nq dn ld nr ns dp lh kj nt nu ll kn nv nw lp kr nx ny lt nz bi translated"><strong class="ak">玩家越多，同花底牌的效果越好</strong></h2><p id="f12c" class="pw-post-body-paragraph jy jz iq ka b kb nc kd ke kf nd kh ki kj ne kl km kn nf kp kq kr ng kt ku kv ij bi translated">在双人游戏中，不合适的K-Q有59%的胜率。同色，百分比仅略微增加到61.6%。在一场10人游戏中，不合适的K-Q有13.6%的胜算，但如果是同花，胜算会上升到17.1%。</p></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><p id="31e8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这篇文章证明了即使是一个简单的热图对于在大量数据中寻找模式和相关性也是有用的。在github上随意探索jsheatmap和T2 poker map的源代码。</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oh"><img src="../Images/123a56cd757c75199740b8d47048c9ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BRAEmAZU7XiX_OmwTx6hQw.jpeg"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">照片由<a class="ae kw" href="https://unsplash.com/@amandagraphc?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">阿曼达·琼斯</a>在<a class="ae kw" href="https://unsplash.com/search/photos/poker-chips?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><p id="862e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="oi">最初发表于</em><a class="ae kw" href="https://www.jeffamabob.com/posts/holecardmap" rel="noopener ugc nofollow" target="_blank"><em class="oi">https://www.jeffamabob.com</em></a><em class="oi">。</em></p></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><div class="lw lx ly lz gt oj"><a href="https://gitconnected.com/learn" rel="noopener  ugc nofollow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd ir gy z fp oo fr fs op fu fw ip bi translated">了解如何编码-查找编码教程| gitconnected</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">从开发者提交和排名的教程中学习任何编程语言、框架或库。教程是…</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">gitconnected.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox jw oj"/></div></div></a></div></div></div>    
</body>
</html>