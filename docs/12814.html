<html>
<head>
<title>Create a simple frontend for your Machine Learning application with Flasgger</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Flasgger为你的机器学习应用创建一个简单的前端</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-a-simple-frontend-for-your-machine-learning-application-with-flasgger-7d20f15f3517?source=collection_archive---------19-----------------------#2022-07-11">https://levelup.gitconnected.com/create-a-simple-frontend-for-your-machine-learning-application-with-flasgger-7d20f15f3517?source=collection_archive---------19-----------------------#2022-07-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="4690" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设您已经收集了数据，执行了特性工程，并为您的酷边项目建立了模型。当涉及到与您的朋友和社区共享模型时，您将模型公开为API。如果没有清晰的文档和UI，用户可能会对API的功能和参数感到困惑。我们可以使用<a class="ae kl" href="https://github.com/flasgger/flasgger" rel="noopener ugc nofollow" target="_blank">触发器</a>来解决这个具体问题。</p><p id="9cfc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将创建2个机器学习API，Flask作为后端。然后我们将使用Flasgger来标准化API并与之交互。最后，我们将对设置进行dockerize，并将其作为容器运行。在本文中，<a class="ae kl" href="https://www.kaggle.com/datasets/uciml/iris" rel="noopener ugc nofollow" target="_blank">虹膜数据集</a>已用于演示目的。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/5bf67b96139339179986b03b7d9c0cbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ooEYJ5Sz2jZGybHJ"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">照片由<a class="ae kl" href="https://unsplash.com/@flowforfrank?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">费伦茨·阿尔马西</a>在<a class="ae kl" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><h2 id="cf93" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated"><strong class="ak">模型构建</strong></h2><p id="e83b" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">IRIS数据集具有Id、SepalLengthCm、SepalWidthCm、PetalLengthCm、PetalWidthCm和Species作为特征。问题陈述是鉴别花是属于Setosa，Virginica还是Versicolor种。ID列可以删除，因为它与问题无关。因为物种特征具有分类变量，所以我们执行标签编码来将它们转换成数字。</p><p id="1d37" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这之后，我们执行通常的训练测试分割，并用分类器训练模型。在这种情况下，我使用了随机森林。训练完模型后，我们将它打包成一个pickle文件并保存。因为本文是对Flasgger的演示，所以我们不打算深入特性选择、模型选择和准确性的细节。你可以在这里找到完整的代码<a class="ae kl" href="https://github.com/Prithivee7/ML_Frontend_with_Flasgger" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="1661" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated"><strong class="ak">模型推断</strong></h2><p id="8f22" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">在我们训练好模型之后，下一步就是将它作为API公开。为此，我们用2个API创建了一个Flask应用程序。一个是GET方法，将特性作为参数，另一个是POST方法，将CSV文件作为输入。这些方法将处理数据，并将来自模型的推断作为响应返回。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="794c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">到目前为止，我们的机器学习应用程序的逻辑不包含任何UI。我们只需通过Postman发送请求，然后得到响应。这对于测试来说很好，但是我们不希望ML应用程序的用户继续使用Postman进行推理。无意冒犯邮差，我只是针对缺乏简单的UI提出一个观点。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mc"><img src="../Images/e424ddeec395262d58e8cf229676db6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fGjQ-iqcYtSOiRtWP_ZoSw.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">按作者排序的图像—典型的GET请求</figcaption></figure><p id="ea2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于缺少一个简单的用户界面，我们在两条战线上失败了。第一个是当我们输入不可接受的值时没有提示。第二个问题是缺少可用API的文档。提示是一个很好的特性，可以在数据类型不匹配或缺少特定特性时警告我们。类似地，用户需要知道可用的API和每个API的功能，以便做出明智的请求。因此，正如在开始时提到的，我们将创建一个带有Flasgger的前端，并将其与我们的flashpowered ML应用程序相链接。</p><blockquote class="md me mf"><p id="2669" class="jn jo mg jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated">是一个Flask扩展，用于从API中注册的所有Flask视图中提取OpenAPI规范。Flasgger还附带了嵌入的SwaggerUI，这样您就可以访问<a class="ae kl" href="http://localhost:5000/apidocs" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/API docs</a>，可视化您的API资源并与之交互。</p></blockquote><p id="8393" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">尽管Flasgger有多种用途，但在本例中，我们将它用作ML应用程序的前端。Flasgger有3个主要组件描述、参数和响应。</p><p id="bd6f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">描述</strong></p><p id="7318" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">顾名思义，这部分包含了API的描述。我们可以在这一节中包括一些细节，比如预期的输入参数和特定API的功能。</p><p id="9647" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">参数</strong></p><p id="a0cc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此部分包含名称、输入、类型和必需的标签。该名称将是所用参数的名称。“In”可以是我们在UI中输入的查询，也可以是我们上传的文件formData。“类型”标签可用于标准化参数的数据类型。可以是数字，文件等等。最后，我们有“required”标签，它表示是否必须为特定参数提供值。</p><p id="9bdc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">回应</strong></p><p id="0485" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本节处理响应代码和我们希望与响应代码一起显示的描述。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="0c1e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">只需两个简单的步骤就可以看到UI的运行。第一步是运行Flask应用程序。第二步是在浏览器中输入127.0.0.1:8000/apidocs。8000是我们在Flask应用程序中指定的端口号，apidocs将把我们带到swagger部分。正如我们所看到的，Flasgger提供了Flask应用程序中可用方法的相关信息及其描述。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mk"><img src="../Images/0cbb2378b14f31f3b8bf5f4a587bad40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2D7qAEBCitOeWH2_Jm3ENQ.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">作者提供的图片Flasgger概述</figcaption></figure><p id="61c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在API部分，每个参数都有“required”标志。如果该值未填充或输入了不可接受的数据类型，将会显示一个带有详细错误消息的提示。因为所有的参数在UI中都是现成的，所以我们不必担心在请求中给出错误的参数。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ml"><img src="../Images/6b0a89d0dd9b1201cb4987aaf27057d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kNhjhKuApvAZ9drR3hTgFQ.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">按作者分类的图像—用于输入推理数据的用户界面</figcaption></figure><p id="259f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在执行GET方法之后，我们到达响应部分。这里我们有请求的URL、Curl、响应正文以及响应代码。我们将为我们的POST方法获得相同的UI，在这里我们可以上传一个CSV文件用于批量预测。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mm"><img src="../Images/0a80fe0e1251b5ffd4c9a73debf81547.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DDXjRJQb3jrJt96EtV4pSg.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">作者提供的图像Flasgger的响应部分</figcaption></figure><h2 id="080d" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated"><strong class="ak">让我们回顾一下</strong></h2><blockquote class="md me mf"><p id="b538" class="jn jo mg jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated">我们有</p><p id="a81a" class="jn jo mg jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated">从Kaggle下载了虹膜数据集。</p><p id="d936" class="jn jo mg jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated">执行特征工程和模型训练。</p><p id="3292" class="jn jo mg jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated">将训练好的模型保存为pickle文件。</p><p id="1c57" class="jn jo mg jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated">创建了一个Flask应用程序，将我们的模型作为API公开</p><p id="076d" class="jn jo mg jp b jq jr js jt ju jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj kk ij bi translated">与我们的Flask应用程序集成在一起。</p></blockquote><h2 id="fcd0" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated"><strong class="ak">让我们来整理一下</strong></h2><p id="d75c" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">恭喜你，现在你拥有了一个不止是机器学习的模型。现在是时候分享给你的朋友和同事了。您可以打包代码、依赖文件和数据文件，并创建docker映像。这个docker映像可以在任何机器上共享和运行，没有任何依赖性问题。</p><p id="70e4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了学习docker的安装和部署，你可以看看这个<a class="ae kl" href="https://www.youtube.com/watch?v=hTacGMfL8lc&amp;list=PLZoTAELRMXVNKtpy0U_Mx9N26w8n0hIbs" rel="noopener ugc nofollow" target="_blank">惊人的资源</a>。创建docker映像的第一步是创建docker文件。这个文件包含了将我们的应用程序作为容器运行所需的所有信息。它包含有关基本映像、端口号和依赖关系的信息。安装完成后，您可以运行下面的命令来启动您的容器。</p><p id="cbad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">docker build -t虹膜图像。</p><p id="6131" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">docker run-name iris _ container-p 8000:8000 iris _ image</p><h2 id="f819" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated"><strong class="ak">结论</strong></h2><p id="c014" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">Flasgger可用于标准化机器学习API，这有助于开发人员和最终用户保持一致。Flasgger还通过将传入数据与底层模式进行比较来验证传入数据。此外，它还可以用作我们ML应用程序的简单前端。</p><h2 id="d748" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated"><strong class="ak">资源</strong></h2><ol class=""><li id="a94e" class="mn mo iq jp b jq lv ju lw jy mp kc mq kg mr kk ms mt mu mv bi translated"><a class="ae kl" href="https://www.youtube.com/watch?v=hTacGMfL8lc&amp;list=PLZoTAELRMXVNKtpy0U_Mx9N26w8n0hIbs" rel="noopener ugc nofollow" target="_blank"> Docker教程1-为什么和什么是Docker，Docker容器，机器学习中的虚拟化-YouTube</a></li><li id="8cb2" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated"><a class="ae kl" href="https://www.youtube.com/watch?v=17Bl31rlnRM&amp;t=3s" rel="noopener ugc nofollow" target="_blank"> (7079) Docker初学者教程——什么是Docker？容器介绍— YouTube </a></li></ol><h2 id="a236" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated"><strong class="ak">想要连接？</strong></h2><p id="66ac" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">如果你喜欢这篇文章，请在Medium上关注我，了解更多关于机器学习和计算机科学的故事。</p><p id="b091" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">linked In—<a class="ae kl" href="https://www.linkedin.com/in/prithivee-ramalingam-032b42110/" rel="noopener ugc nofollow" target="_blank">Prithivee Ramalingam | LinkedIn</a></p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="eb91" class="ni ld iq bd le nj nk nl lh nm nn no lk np nq nr ln ns nt nu lq nv nw nx lt ny bi translated">分级编码</h1><p id="ed1c" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">感谢您成为我们社区的一员！更多内容请参见<a class="ae kl" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>。<br/>跟随:<a class="ae kl" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a>，<a class="ae kl" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">领英</a>，<a class="ae kl" href="https://newsletter.levelup.dev/" rel="noopener ugc nofollow" target="_blank">通迅</a> <br/> <strong class="jp ir">升一级正在改造理工大招聘➡️ </strong> <a class="ae kl" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">加入我们的人才集体</strong> </a></p></div></div>    
</body>
</html>