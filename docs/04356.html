<html>
<head>
<title>What Is RedisGraph and What Are Your Options for Running it?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是RedisGraph，你有什么选择来运行它？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-is-redisgraph-and-what-are-your-options-for-running-it-af37574ea76?source=collection_archive---------16-----------------------#2020-06-22">https://levelup.gitconnected.com/what-is-redisgraph-and-what-are-your-options-for-running-it-af37574ea76?source=collection_archive---------16-----------------------#2020-06-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c46127d63b8d94af8e2ed42a817aa924.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iENqd3oBdMhGEG2NoW1uPw.png"/></div></div></figure><p id="497c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">IOD专家丹尼尔·达戈斯蒂诺</p><p id="7ab4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">图形数据库是NoSQL存储引擎的一个类别，它使得表示和查询高度关联的数据变得容易。虽然SQL数据库当然可以用来表示关系，但是对于大量具有复杂关系的数据，它们的性能无法与图形数据库相媲美。图形数据库在模式方面也更加灵活，几乎可以立即回答关于数据关系模式的问题。</p><p id="4e59" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">虽然我们很多人习惯于使用SQL数据库做任何事情，但图数据库的适用性也非常广泛。示例应用的范围可以从世俗的(例如，书籍及其作者)到不同种类的大规模社交网络(例如，在脸书上表示朋友和关系，或者在LinkedIn上表示职业关系)。近年来，“巴拿马文件”使用图形数据库来分析和揭露涉嫌金融犯罪的人。甚至像冠状病毒这样的疾病的传播也可以使用图形数据库进行建模。</p><p id="b6c1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">虽然主流图形数据库比SQL数据库更新，但它们肯定不是什么新东西。图形数据库空间已经有点拥挤，有几个著名的参与者(例如Neo4j、TigerGraph、ArangoDB等。)、云产品(例如Amazon Neptune)，甚至最近添加了某种级别的图形支持的SQL数据库(例如SQL Server)。</p><p id="79aa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">RedisGraph是一个相当新的图形数据库，作为Redis的一个模块而构建。它拥有出色的性能，支持Cypher查询语言(用于Neo4j等其他图形数据库)，并且非常容易上手。在这篇文章中，我会给你一个RedisGraph如何工作以及你可以用它做什么的高层次概述。</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="af17" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">RedisGraph如何工作</h1><p id="1b46" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">RedisGraph使用一个名为GraphBLAS的库，这个库允许它以一种非常紧凑的方式存储图形数据，并以极快的速度进行查询。结果，<a class="ae kw" href="https://redislabs.com/blog/new-redisgraph-1-0-achieves-600x-faster-performance-graph-databases/" rel="noopener ugc nofollow" target="_blank">基准测试</a>显示RedisGraph的表现超过了它的几个最成熟的竞争对手，这是非常令人惊讶的，因为Redis是众所周知的单线程。但是当你更好地理解它背后的<a class="ae kw" href="https://redislabs.com/redis-enterprise/technology/redisgraph/" rel="noopener ugc nofollow" target="_blank">技术</a>，原因就变得清晰了。</p><p id="0f70" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">虽然传入的请求使用Redis的单线程，但它们随后被传递到RedisGraph的内部线程池，该线程池可以并发执行不同的查询。在任何给定时间，一个查询只能在一个RedisGraph线程上运行(尽管GraphBLAS可以根据需要使用额外的线程)，这与竞争图形数据库不同，在竞争图形数据库中，相同的查询分布在机器的所有核心上。虽然这可能看起来违反直觉，但它更适合处理高吞吐量和低延迟的场景，因此提供了更好的性能。</p><h1 id="0d7c" class="le lf iq bd lg lh mh lj lk ll mi ln lo lp mj lr ls lt mk lv lw lx ml lz ma mb bi translated">设置重划</h1><p id="4c30" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated"><a class="ae kw" href="https://oss.redislabs.com/redisgraph/" rel="noopener ugc nofollow" target="_blank">再贴现主页</a>讲解如何快速试用再贴现。到目前为止，最简单的方法是使用Docker:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="151b" class="mv lf iq mr b gy mw mx l my mz">sudo docker run -p 6379:6379 -it --rm redislabs/redisgraph</span></pre><p id="c296" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">上面的命令将运行最新的稳定版本，但是如果您想要访问最新的特性和修复，您可能需要使用edge标记:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="3493" class="mv lf iq mr b gy mw mx l my mz">sudo docker run -p 6379:6379 -it --rm redislabs/redisgraph:edge</span></pre><p id="f007" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您对RedisGraph满意，并且希望在适当的环境中更认真地使用它，您也可以将它作为一个模块安装在自托管的Redis实例中。或者，对于更大的场景，您可以将其作为Redis企业云的一部分。</p><h1 id="1edd" class="le lf iq bd lg lh mh lj lk ll mi ln lo lp mj lr ls lt mk lv lw lx ml lz ma mb bi translated">与RedisGraph交互</h1><p id="5e55" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">我们可以使用一种叫做Cypher的语言在RedisGraph中存储和查询数据。最初由竞争对手Neo4j创建，后来在<a class="ae kw" href="https://www.opencypher.org/" rel="noopener ugc nofollow" target="_blank"> openCypher </a>项目中开发，Cypher使用一种ASCII艺术形式以及类似SQL的子句来提供对图形数据的访问，我们很快就会看到。</p><p id="22bf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了展示一些基本的查询，我们将使用图1所示的简单例子。方向箭头定义了演员(绿色节点)和电影(黄色节点)之间的关系。例如，肖恩·康纳利出演了《T4》中的《高地人》。为了简明起见，这只是每部电影的演员阵容或每个演员的电影记录的一个子集，但这些数据足以执行一些有趣的查询。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/bdd366c5d1c52dffa39e701c87b791aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/0*J0E9MX9qOfR7PTAT.png"/></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk translated">图1: <em class="ng">演员和电影关系的例子</em></figcaption></figure><h1 id="72ea" class="le lf iq bd lg lh mh lj lk ll mi ln lo lp mj lr ls lt mk lv lw lx ml lz ma mb bi translated">加载示例数据</h1><p id="3366" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">通过我们用于任何其他redis命令的相同redis-cli客户端工具，我们可以向RedisGraph发出命令。让我们从创建演员开始:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="1e33" class="mv lf iq mr b gy mw mx l my mz">GRAPH.QUERY FilmIndustry "CREATE (:Actor { name: 'Harrison Ford', born: 1942, nationality: 'American' } )"</span><span id="9347" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "CREATE (:Actor { name: 'Carrie Fisher', born: 1956, nationality: 'American' }) "</span><span id="1548" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "CREATE (:Actor { name: 'Sean Connery', born: 1930, nationality: 'Scottish' } )"</span><span id="95db" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "CREATE (:Actor { name: 'Dennis Quaid', born: 1954, nationality: 'American' } )"</span><span id="483b" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "CREATE (:Actor { name: 'Christopher Lambert', born: 1957, nationality: 'French American' } )"</span></pre><p id="54f6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这看起来可能有点奇怪，因为我们实际上是在Redis命令中发送Cypher查询。您需要将每个命令理解为:GRAPH。查询redis _ key“cypher _ QUERY”。在每个Cypher查询中，我们都创建了一个Actor类型的节点，其属性包括姓名、出生日期和国籍。</p><p id="d3c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以类似的方式，我们可以添加电影节点，每个节点都具有名称和发行日期的属性:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="530b" class="mv lf iq mr b gy mw mx l my mz">GRAPH.QUERY FilmIndustry "CREATE (:Film { name: 'Force 10 from Navarone', released: 1978 } )"</span><span id="0f52" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "CREATE (:Film { name: 'Star Wars IV: A New Hope', released: 1977 } )"</span><span id="db7f" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "CREATE (:Film { name: 'Indiana Jones and the Last Crusade', released: 1989 } )"</span><span id="fc7e" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "CREATE (:Film { name: 'The Blues Brothers', released: 1980 } )"</span><span id="6dce" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "CREATE (:Film { name: 'Dragonheart', released: 1996 } )"</span><span id="9fdb" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "CREATE (:Film { name: 'Highlander', released: 1986 } )"</span></pre><p id="1479" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，我们可以创建演员和电影之间的关系:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="521a" class="mv lf iq mr b gy mw mx l my mz">GRAPH.QUERY FilmIndustry "MATCH (actor:Actor { name : 'Harrison Ford' }), (film:Film { name : 'Force 10 from Navarone' }) CREATE (actor)-[:actedIn]-&gt;(film)"</span><span id="615e" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "MATCH (actor:Actor { name : 'Harrison Ford' }), (film:Film { name : 'Star Wars IV: A New Hope' }) CREATE (actor)-[:actedIn]-&gt;(film)"</span><span id="7bd6" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "MATCH (actor:Actor { name : 'Harrison Ford' }), (film:Film { name : 'Indiana Jones and the Last Crusade' }) CREATE (actor)-[:actedIn]-&gt;(film)"</span><span id="208b" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "MATCH (actor:Actor { name : 'Carrie Fisher' }), (film:Film { name : 'Star Wars IV: A New Hope' }) CREATE (actor)-[:actedIn]-&gt;(film)"</span><span id="bef9" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "MATCH (actor:Actor { name : 'Carrie Fisher' }), (film:Film { name : 'The Blues Brothers' }) CREATE (actor)-[:actedIn]-&gt;(film)"</span><span id="984e" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "MATCH (actor:Actor { name : 'Sean Connery' }), (film:Film { name : 'Indiana Jones and the Last Crusade' }) CREATE (actor)-[:actedIn]-&gt;(film)"</span><span id="dc66" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "MATCH (actor:Actor { name : 'Sean Connery' }), (film:Film { name : 'Dragonheart' }) CREATE (actor)-[:actedIn]-&gt;(film)"</span><span id="e06e" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "MATCH (actor:Actor { name : 'Sean Connery' }), (film:Film { name : 'Highlander' }) CREATE (actor)-[:actedIn]-&gt;(film)"</span><span id="96b5" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "MATCH (actor:Actor { name : 'Dennis Quaid' }), (film:Film { name : 'Dragonheart' }) CREATE (actor)-[:actedIn]-&gt;(film)"</span><span id="b193" class="mv lf iq mr b gy nh mx l my mz">GRAPH.QUERY FilmIndustry "MATCH (actor:Actor { name : 'Christopher Lambert' }), (film:Film { name : 'Highlander' }) CREATE (actor)-[:actedIn]-&gt;(film)"</span></pre><p id="6a15" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">虽然这里看起来有很多，但其实挺简单的。我们不是重新创建演员和电影节点，而是定位我们已经拥有的节点，按名称匹配每个节点，然后建立它们之间的关系。在每种情况下，关系语法看起来都是这样的:(actor)-[:actedIn]--&gt;(film)。Cypher使用一种语法，其中节点用圆括号表示，而边用方括号表示，中间的符号表示关系方向的箭头。</p><h1 id="3246" class="le lf iq bd lg lh mh lj lk ll mi ln lo lp mj lr ls lt mk lv lw lx ml lz ma mb bi translated">下一步是什么</h1><p id="9e0d" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">到目前为止，我已经解释了什么是RedisGraph以及GraphBLAS库如何支持它。我还讨论了运行RedisGraph的选项。最后，我展示了一个很小但很实用的涉及演员和电影的图表示例，并展示了如何通过Cypher语言将该图表的数据加载到RedisGraph中。</p><p id="7a0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然而，当看到它的查询能力时，RedisGraph的能力是最容易理解的。所以请继续关注第2部分，在那里我们将介绍RedisGraph中的Cypher查询，并进一步讨论将数据加载到RedisGraph中的选项。</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><p id="4c08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="na">本文原载于</em> <a class="ae kw" href="https://iamondemand.com/blog/" rel="noopener ugc nofollow" target="_blank"> <em class="na"> IOD博客</em> </a> <em class="na">。IOD每周发布与技术相关的操作方法、观点和产品比较——全部由从业者撰写。如果这个内容对你有意思或者有帮助，可以看看我们。我们也一直在寻找新的技术专家为我们写博客！</em></p></div></div>    
</body>
</html>