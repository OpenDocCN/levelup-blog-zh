<html>
<head>
<title>About Docker Financial Troubles and How to Switch to Free Alternatives</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于Docker财务困境和如何切换到免费替代品</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/about-docker-financial-troubles-and-how-to-switch-to-free-alternatives-673bfeb57047?source=collection_archive---------10-----------------------#2022-02-07">https://levelup.gitconnected.com/about-docker-financial-troubles-and-how-to-switch-to-free-alternatives-673bfeb57047?source=collection_archive---------10-----------------------#2022-02-07</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="16f4" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">Minikube + Docker CLI =大公司的免费Docker桌面替代方案</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/213449f1531fd122f3806ad49db2e4d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Awxnd5lJakg5ezQCzG91TA.png"/></div></div></figure><p id="81ef" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这家公司创造了开发者中最著名的工具之一，正在经历一场金融危机。在2019年出售部分Docker资产后，情况没有改善。所以公司取消了企业免费计划。它是如何发生的，如何迁移到免费的替代品？下面我们来回顾一下。</p></div><div class="ab cl lr ls hy lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="in io ip iq ir"><p id="6a97" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">Docker容器已经改变了应用程序的开发、测试和部署，尽管它们并没有发明Linux容器。因为Linux已经有了LXC和OpenVZ。在BSD/Solaris，监狱/区域已经存在很长时间了。</p><p id="9d05" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">但是Docker将容器作为一种方便直接的大众产品。然而，他们并没有以获利了结此案。</p><p id="9c5b" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">我们现在知道的Docker公司成立于2008年，当时名为DotCloud。它开发了云平台即服务(PaaS)。但五年后，该公司改变了商业模式，推出了将DotCloud作为独立产品运行的底层结构。尽管如此，用户一直在询问这个引擎，并希望单独获得它。Docker容器就是这样诞生的。</p></div><div class="ab cl lr ls hy lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="in io ip iq ir"><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ly"><img src="../Images/96d439afc32f3565fe34a5c3aa2ba4f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qSi6VaITwBuU2BlKF9xlXQ.png"/></div></div><figcaption class="lz ma gk gi gj mb mc bd b be z dk translated">截图自docker.com</figcaption></figure><p id="c61a" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这个想法是将所有必要的应用程序、库、脚本、测试和设置打包到一个可移植的“容器”中，开发人员可以将其安装在任何Linux机器上，并且非常容易运行。它在任何地方都是一样的，因为它在进程级是隔离的，并且有自己的文件系统。</p><p id="8263" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这在当时是绝对的奇迹。一切都做得如此简单和自动化。容器根据给定的条件被提升和关闭，依次，在执行链中一个接一个地或成组地，如你所愿。这允许你设置非常复杂的过程，而不需要太多的DevOps技能。您可以从目录中下载一个现成的配置好的容器，并在本地运行它。</p><p id="2b7d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">随着2016年Docker Desktop for Windows和macOS的发布，Docker获得了更多的关注，尽管Linux仍然是最受欢迎的容器利用平台。</p><p id="af99" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">Docker开发了Swarm管弦乐工具。作为Docker企业版的一部分，该公司对这一工具的货币化寄予厚望。但它没能与谷歌的Kubernetes竞争。</p><p id="c20c" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">因此，由于日益严重的资金问题，该公司不得不在2019年将Docker企业版出售给Mirantis。</p><p id="4da0" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">2021年8月，Docker将免费订阅更名为Docker个人。因此，Docker桌面应用程序开始对企业收费。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj md"><img src="../Images/187d7839956e06af5868192ec1a8c631.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BS0_uBOPyyctNherUQ7bTA.png"/></div></div><figcaption class="lz ma gk gi gj mb mc bd b be z dk translated">Docker定价和订阅</figcaption></figure><p id="bc12" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">时至今日，Docker依然健在，但公司并不成功，出售了一部分盈利的业务。结果，Docker Swarm support在没有公告的情况下悄然停止。</p><p id="67d7" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">与此同时，开发者和用户已经开始寻找Docker的替代品。</p></div><div class="ab cl lr ls hy lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="in io ip iq ir"><h2 id="0afe" class="me mf iu bd mg mh mi dn mj mk ml dp mm le mn mo mp li mq mr ms lm mt mu mv mw bi translated">Minikube + Docker CLI</h2><p id="82ba" class="pw-post-body-paragraph kv kw iu kx b ky mx jv la lb my jy ld le mz lg lh li na lk ll lm nb lo lp lq in bi translated">Minikube是一个开源工具，可以帮助您在本地机器(或虚拟机)上设置一个单节点Kubernetes集群。</p><p id="86f3" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">有适用于Linux、macOS和Windows的Minikube版本。像Docker Desktop一样，Minikube CLI提供了使用集群的基本操作，如启动、停止、状态和删除。</p><h2 id="1a74" class="me mf iu bd mg mh mi dn mj mk ml dp mm le mn mo mp li mq mr ms lm mt mu mv mw bi translated">放弃</h2><blockquote class="nc nd ne"><p id="45f0" class="kv kw nf kx b ky kz jv la lb lc jy ld ng lf lg lh nh lj lk ll ni ln lo lp lq in bi translated">在写这篇文章时，我发现了一个HyperV驱动程序使用的问题。端口转发没有按预期工作。测试容器工作良好，为试运行容器编写的基于selenium的UI测试也是如此。但是简单地运行一个带有转发端口的docker容器在本地网络上是不可见的。</p></blockquote><h2 id="df6b" class="me mf iu bd mg mh mi dn mj mk ml dp mm le mn mo mp li mq mr ms lm mt mu mv mw bi translated">Windows的安装过程</h2><ol class=""><li id="d4d0" class="nj nk iu kx b ky mx lb my le nl li nm lm nn lq no np nq nr bi translated">以管理员身份打开PowerShell控制台，运行以下命令<code class="fe ns nt nu nv b">Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V -All</code>。如果Hyper-V之前没有处于活动状态，则需要在完成后重新启动</li><li id="50c0" class="nj nk iu kx b ky nw lb nx le ny li nz lm oa lq no np nq nr bi translated">安装Minikube，按照说明执行步骤1:<a class="ae ob" href="https://minikube.sigs.k8s.io/docs/start/" rel="noopener ugc nofollow" target="_blank">https://minikube.sigs.k8s.io/docs/start/</a></li><li id="f8e6" class="nj nk iu kx b ky nw lb nx le ny li nz lm oa lq no np nq nr bi translated">使HyperV成为默认驱动<br/> <code class="fe ns nt nu nv b">minikube config set driver hyperv</code> <br/>并启动Minikube <br/> <code class="fe ns nt nu nv b">minikube start</code></li><li id="9a9c" class="nj nk iu kx b ky nw lb nx le ny li nz lm oa lq no np nq nr bi translated">使用管理员权限从PowerShell为Docker设置环境变量:<br/><a class="ae ob" href="https://gist.github.com/Golosay/b47833b784bb238020a6260ebf2c1adf" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/Golosay/b 47833 b 784 bb 238020 a 6260 ebf 2 C1 ADF</a></li><li id="384a" class="nj nk iu kx b ky nw lb nx le ny li nz lm oa lq no np nq nr bi translated">从<a class="ae ob" href="https://download.docker.com/win/static/stable/x86_64/" rel="noopener ugc nofollow" target="_blank">https://download.docker.com/win/static/stable/x86_64/</a>下载并解压最新版本的docker CLI，然后将其添加到Path环境变量中</li><li id="b50a" class="nj nk iu kx b ky nw lb nx le ny li nz lm oa lq no np nq nr bi translated">检查Docker是否正确配置<br/> <code class="fe ns nt nu nv b">docker container ls</code></li></ol><h2 id="a111" class="me mf iu bd mg mh mi dn mj mk ml dp mm le mn mo mp li mq mr ms lm mt mu mv mw bi translated">macOS的安装过程</h2><ol class=""><li id="b085" class="nj nk iu kx b ky mx lb my le nl li nm lm nn lq no np nq nr bi translated">安装迷你库<code class="fe ns nt nu nv b">brew install minikube</code></li><li id="2697" class="nj nk iu kx b ky nw lb nx le ny li nz lm oa lq no np nq nr bi translated">安装VirtualBox驱动程序<code class="fe ns nt nu nv b">brew install — cask virtualbox</code></li><li id="237d" class="nj nk iu kx b ky nw lb nx le ny li nz lm oa lq no np nq nr bi translated">安装Docker本身<code class="fe ns nt nu nv b">brew install docker</code></li><li id="8bc3" class="nj nk iu kx b ky nw lb nx le ny li nz lm oa lq no np nq nr bi translated">进入系统首选项-&gt;安全与隐私-&gt;允许-&gt;然后允许软件公司(在本例中为Oracle)。然后重启。</li><li id="2f58" class="nj nk iu kx b ky nw lb nx le ny li nz lm oa lq no np nq nr bi translated">将VirtualBox设为默认驱动程序。<code class="fe ns nt nu nv b">minikube config set driver virtualbox</code>。<br/>并启动Minikube <code class="fe ns nt nu nv b">minikube start</code>。</li><li id="4a9b" class="nj nk iu kx b ky nw lb nx le ny li nz lm oa lq no np nq nr bi translated">更新环境变量的任何一种方式:<br/>编写所需的变量输出到您的终端配置(对于zsh: <code class="fe ns nt nu nv b">minikube docker-env &gt;&gt; ~/.zshrc</code>)或手动注入到系统变量，抓取来自Minikube docker-env输出的真实值。<a class="ae ob" href="https://gist.github.com/Golosay/6013bb2e0998efbace701eb3be3dd1fb" rel="noopener ugc nofollow" target="_blank">要诀举例</a>。</li><li id="4da4" class="nj nk iu kx b ky nw lb nx le ny li nz lm oa lq no np nq nr bi translated">重启终端</li><li id="c19b" class="nj nk iu kx b ky nw lb nx le ny li nz lm oa lq no np nq nr bi translated">检查Docker是否正确配置<code class="fe ns nt nu nv b">docker container ls</code>。</li></ol><h2 id="7202" class="me mf iu bd mg mh mi dn mj mk ml dp mm le mn mo mp li mq mr ms lm mt mu mv mw bi translated">已知问题</h2><p id="4827" class="pw-post-body-paragraph kv kw iu kx b ky mx jv la lb my jy ld le mz lg lh li na lk ll lm nb lo lp lq in bi translated">有时，k8s会破坏API服务器来释放集群资源，或者整个集群会在工作站重启后停止运行。返回<code class="fe ns nt nu nv b">API server: Stopped</code>的minikube状态命令可用于识别这种情况。<br/>k8s集群需要重新启动来解决这个问题。但不幸的是，它有了新的宿主。因此，环境变量也需要更新。</p><p id="d895" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">对于<strong class="kx iv"> Windows，</strong>以管理员身份运行PowerShell命令:</p><pre class="kk kl km kn gu oc nv od oe aw of bi"><span id="af21" class="me mf iu nv b gz og oh l oi oj">minikube stop;`<br/>minikube start;`<br/>minikube -p minikube docker-env | Select-String "DOCKER_HOST" | Invoke-Expression;`<br/>[Environment]::SetEnvironmentVariable('DOCKER_HOST', $Env:DOCKER_HOST, [System.EnvironmentVariableTarget]::<br/>Machine)</span></pre><p id="6b5f" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">对于<strong class="kx iv"> macOS </strong>执行<code class="fe ns nt nu nv b">minikube stop &amp;&amp; minikube start</code>，然后更新环境变量(重复步骤#6)。</p><p id="085f" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这个修复可能是自动的😅。但我相信以后会修好的。</p><h2 id="24c5" class="me mf iu bd mg mh mi dn mj mk ml dp mm le mn mo mp li mq mr ms lm mt mu mv mw bi translated">结论</h2><p id="f029" class="pw-post-body-paragraph kv kw iu kx b ky mx jv la lb my jy ld le mz lg lh li na lk ll lm nb lo lp lq in bi translated">Docker是一个很棒的产品，要取代它需要你付出很多努力。如果你需要节省时间和金钱，通过订阅来支持他们。如果没有，有很多替代方案，如Minikube、Containerd、lxc/lxd、podman、freebsd jail、systemd-nspawn，但所有这些都需要时间和人力资源来正确设置。</p><p id="b525" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><strong class="kx iv">感谢阅读！</strong>请随意分享您在项目中使用了什么或您的迁移经历😇。</p></div><div class="ab cl lr ls hy lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="in io ip iq ir"><p id="9a59" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">如果你喜欢我的帖子，出于某种原因，你还不是一个媒体会员，你可以支持我，并通过这个链接获得会员资格。</p></div></div>    
</body>
</html>