<html>
<head>
<title>5 Ways To Make HTTP Requests In Node.js — 2020 Edition</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Node.js — 2020版中进行HTTP请求的5种方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/5-ways-to-make-http-requests-in-node-js-2020-edition-19d142a96681?source=collection_archive---------17-----------------------#2020-10-12">https://levelup.gitconnected.com/5-ways-to-make-http-requests-in-node-js-2020-edition-19d142a96681?source=collection_archive---------17-----------------------#2020-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3810eeae6c7913d2e1f1f73de6c3da5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k8Wl34iiSe0lmfA2mQChLA.png"/></div></div></figure><p id="db28" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">学习如何发出HTTP请求可能会让人感到不知所措，因为有几十个可用的库，每个解决方案都声称比上一个更有效。一些库提供跨平台支持，而另一些库侧重于包大小或开发人员体验。在本帖中，我们将探索在Node.js中实现这一核心功能的五种最流行的方法。</p><p id="e8fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">代码演示将使用指环王主题的API，<a class="ae kw" href="https://the-one-api.dev/" rel="noopener ugc nofollow" target="_blank">一个API来统治所有的</a>，用于所有的交互——仅仅是因为我上周末无意中看完了这个精彩的系列。</p><h1 id="2180" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">先决条件</h1><p id="5e0a" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">确保您的机器上安装了<a class="ae kw" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> npm和Node.js </a>，您就可以开始了！</p><p id="b751" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">更喜欢提前跳？这篇文章将涵盖:</p><ul class=""><li id="3f4f" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated"><a class="ae kw" href="https://www.nexmo.com/blog/2020/09/23/5-ways-to-make-http-requests-in-node-js-2020-edition#http" rel="noopener ugc nofollow" target="_blank"> HTTP(标准库)</a></li><li id="2495" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated"><a class="ae kw" href="https://www.nexmo.com/blog/2020/09/23/5-ways-to-make-http-requests-in-node-js-2020-edition#super-agent" rel="noopener ugc nofollow" target="_blank"> SuperAgent </a></li><li id="6259" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated"><a class="ae kw" href="https://www.nexmo.com/blog/2020/09/23/5-ways-to-make-http-requests-in-node-js-2020-edition#axios" rel="noopener ugc nofollow" target="_blank"> Axios </a></li><li id="9f0f" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated"><a class="ae kw" href="https://www.nexmo.com/blog/2020/09/23/5-ways-to-make-http-requests-in-node-js-2020-edition#node-fetch" rel="noopener ugc nofollow" target="_blank">节点获取</a></li><li id="41c7" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated"><a class="ae kw" href="https://www.nexmo.com/blog/2020/09/23/5-ways-to-make-http-requests-in-node-js-2020-edition#got" rel="noopener ugc nofollow" target="_blank">拿到了</a></li></ul><h1 id="5ea3" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">HTTP(标准库)</h1><p id="9a4c" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">标准库配备了默认的<code class="fe mo mp mq mr b">http</code>模块。该模块可用于发出HTTP请求，而无需添加外部包。然而，由于该模块是低级的，它不是对开发人员最友好的。此外，您需要使用<a class="ae kw" href="https://nodejs.org/api/stream.html#stream_streams_compatibility_with_async_generators_and_async_iterators" rel="noopener ugc nofollow" target="_blank">异步流</a>来分块数据，因为HTTP请求的异步/等待特性不能用于这个库。然后需要手动解析响应数据。</p><p id="902a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面的代码演示了如何使用标准的<code class="fe mo mp mq mr b">http</code>库发出一个<code class="fe mo mp mq mr b">GET</code>请求来检索指环王系列中的书籍名称:</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="c288" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">超级特工</h1><p id="d22a" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><a class="ae kw" href="https://github.com/visionmedia/superagent" rel="noopener ugc nofollow" target="_blank"> SuperAgent </a>是一个小型HTTP请求库，可用于在Node.js和浏览器中发出AJAX请求。SuperAgent有<a class="ae kw" href="https://github.com/visionmedia/superagent#plugins" rel="noopener ugc nofollow" target="_blank">几十个插件</a>可用来完成诸如防止缓存、转换服务器有效负载或前缀或后缀URL等任务，这一事实令人印象深刻。或者，您可以通过编写自己的插件来扩展功能。SuperAgent还可以方便地为您解析JSON数据。</p><blockquote class="my mz na"><p id="a52d" class="jy jz nb ka b kb kc kd ke kf kg kh ki nc kk kl km nd ko kp kq ne ks kt ku kv ij bi translated">可用于浏览器的SuperAgent缩略版只有6KB(缩略并压缩),在开发人员中非常受欢迎。</p></blockquote><p id="cc59" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在终端中输入以下命令，从npm安装SuperAgent:</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="a358" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以下代码片段展示了如何使用SuperAgent发出请求:</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="66e0" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">Axios</h1><p id="7be7" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><a class="ae kw" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank"> Axios </a>是一个基于promise的HTTP客户端，用于浏览器和Node.js。与SuperAgent一样，它可以方便地自动解析JSON响应。让它更加与众不同的是它对<code class="fe mo mp mq mr b">axios.all</code>发出并发请求的能力——例如，这将是同时从《指环王》电影<em class="nb">和</em>中检索引文的有效方式。</p><p id="ac5f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在终端中输入以下命令，从npm安装Axios:</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="dd9d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以下代码片段展示了如何使用Axios发出请求:</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="5c6f" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">节点获取</h1><p id="5117" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><a class="ae kw" href="https://github.com/node-fetch/node-fetch" rel="noopener ugc nofollow" target="_blank"> Node Fetch </a>是一个轻量级模块，它将Fetch API引入Node.js。通过Fetch(在浏览器中或通过Node Fetch ),您可以混合使用<code class="fe mo mp mq mr b">.then</code>和<code class="fe mo mp mq mr b">await</code>语法，以便更好地将可读流转换为JSON——因此<code class="fe mo mp mq mr b">data</code>,如下面的代码片段所示，拥有JSON而不需要一个笨拙的中间变量。此外，请注意，重定向限制、响应大小限制、用于故障排除的显式错误等有用的扩展可用于节点获取。</p><p id="5efb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在终端中输入以下命令，安装从npm获取节点:</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="eb37" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以下代码片段展示了如何使用节点获取来发出请求:</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="1892" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">得到</h1><p id="6773" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><a class="ae kw" href="https://github.com/sindresorhus/got" rel="noopener ugc nofollow" target="_blank"> Got </a>是Node.js的另一个直观而强大的HTTP请求库。它最初是作为流行的<a class="ae kw" href="https://www.npmjs.com/package/request" rel="noopener ugc nofollow" target="_blank">请求</a>(现已废弃)包的轻量级替代而创建的。要了解Got与其他库相比如何，请查看这张<a class="ae kw" href="https://github.com/sindresorhus/got#comparison" rel="noopener ugc nofollow" target="_blank">详细图表</a>。</p><p id="61b8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">与Axios和SuperAgent不同，Got在默认情况下不解析JSON。请注意，<code class="fe mo mp mq mr b">{ json: true }</code>是作为参数添加到下面的代码片段中的，以实现该功能。</p><blockquote class="my mz na"><p id="0084" class="jy jz nb ka b kb kc kd ke kf kg kh ki nc kk kl km nd ko kp kq ne ks kt ku kv ij bi translated">对于现代浏览器和<a class="ae kw" href="https://deno.land/" rel="noopener ugc nofollow" target="_blank"> Deno </a>用法，背后的人得到了生产<a class="ae kw" href="https://github.com/sindresorhus/ky" rel="noopener ugc nofollow" target="_blank"> Ky </a>。Ky是一个基于浏览器获取API的小型HTTP客户端，没有任何依赖性。</p></blockquote><p id="9ccd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在终端中输入以下命令，从npm安装Got:</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="7e12" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以下代码片段展示了如何使用Got发出请求:</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="d915" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">包扎</h1><p id="cd0f" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">这篇文章演示了如何使用Node.js中目前最流行的一些库来实现HTTP请求功能。</p><p id="a504" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">其他语言也有无数的库来处理HTTP请求。你希望我们接下来写什么语言？让我们知道！我们很乐意在<a class="ae kw" href="https://twitter.com/VonageDev" rel="noopener ugc nofollow" target="_blank"> Twitter </a>或Vonage <a class="ae kw" href="https://developer.nexmo.com/community/slack" rel="noopener ugc nofollow" target="_blank">开发者社区Slack </a>上听到你的想法或回答任何问题。</p></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><p id="2d7a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nb">最初发布于</em><a class="ae kw" href="https://www.nexmo.com/blog/2020/09/23/5-ways-to-make-http-requests-in-node-js-2020-edition" rel="noopener ugc nofollow" target="_blank"><em class="nb">https://www . NEX mo . com/blog/2020/09/23/5-ways-to-make-http-requests-in-node-js-2020-edition</em></a></p></div></div>    
</body>
</html>