# 创造愉快的开发者体验

> 原文：<https://levelup.gitconnected.com/creating-delightful-developer-experiences-a1a2417faa24>

## 快乐而专注的开发人员写出更好的代码

![](img/5f939d389990e30b9e15eaeec73e212c.png)

没有理想的软件项目。挑战很多，由技术和人引起。但是我相信，如果你提供了一个奇妙的开发者体验，你最终会创造出更高质量的产品。bug 是缺乏知识、混乱、捷径、不良实践和过度依赖横向组织/包的表现。这里有几个因素可以改善前端开发人员的生活。虽然这些因素看起来像是常识，但是我们仍然会看到这些妥协，尤其是随着项目的老化。

# 1.学习曲线

![](img/b929af7a8aa751bf89e012520ab1cb44.png)

来源:https://freesvg.org/by/OpenClipart

一个新的开发人员多久能开始为项目做贡献？作为一个前端开发人员，对 JavaScript、CSS、HTML 有很好掌握的人可以轻松上手吗？

## 结构

你的框架有多容易掌握？我喜欢 React，因为它占地面积小。JSX 只是包含了合成的 JavaScript 表达式。其实构图才是 React 的精髓。

Angular 有一个巨大的学习曲线，因为它迫使你采用基于类的开发并学习高级的 TypeScript。RX.js 需要掌握一个庞大的 API，以及一个庞大的框架[文档](https://angular.io/api)。当问题域需要时，我会使用 RX.js 作为库。UI 不是。

Vue.js 看似简单，API 占用空间小。我相信 Vue.js 对于那些来自 jQuery 世界、喜欢将 js、HTML 和 CSS 分开的人来说是一个舒适区。然而，作为一名软件工程师，我发现很难解释基于字符串的依赖注入和 DSL。

## 组合是软件的本质。

[](https://medium.com/javascript-scene/composing-software-an-introduction-27b72500d6ea) [## 作曲软件:导论

### 注:这是“作曲软件”系列的一部分(现在是一本书！)关于学习函数式编程和…

medium.com](https://medium.com/javascript-scene/composing-software-an-introduction-27b72500d6ea) 

反应不过如此。React 应用程序是由更小的组件组成的组件。React 从基于类的组件开始。现在，随着钩子的出现，你可以完全放弃类。(错误边界除外，因为没有钩子可以匹配**componentidcatch**生命周期方法)。

使用这种方法，您也可以放弃大量处理类的 ES6 和 TypeScript。在 HPE，我们的团队不仅在我们的 React 项目中遵循这一点，我们还进一步削减了我们的 JavaScript。

[](https://medium.com/swlh/trimming-javascript-for-better-dx-f043a9b01591) [## 微调 JavaScript 以获得更好的 DX

### 在 UI 开发中拥抱极简主义

medium.com](https://medium.com/swlh/trimming-javascript-for-better-dx-f043a9b01591) 

## 从依赖关系中学习曲线

CRA 帮助将 React 转换成一个框架，解决大部分前端问题，如 SASS、build 等。但是，您可能需要采用更多的库，例如:

*   组件库
*   按指定路线发送
*   i18n
*   表单管理
*   状态管理

IMO React 的 useState()、useReducer()和上下文 API 足以以一种干净的方式管理状态。尽你最大的努力保持最小的依赖性。有些图书馆很神奇。魔法是危险的。我们在项目中使用 Formik，这非常棒。神奇。直到你试着组织你的表格。当您需要将其扩展到定制组件时，Formik 的魔力增加了陡峭的学习曲线。还是比 react 的表单绑定强。

## 证明文件

除了高级架构和设计文档，我唯一推荐的文档是实时文档。我们广泛使用故事书来演示组件用法和布局模式。对于更复杂的用例，我们创建了展示状态管理和 api 集成的完整页面示例。没有什么比可复制/粘贴的工作代码更能加速开发了。

在我参与的每个项目中，内部维基网站上的文档过一段时间就会变得陈旧。没有人有保持新鲜感的动力。没人跟踪它。没有人会想念它。

# 2.上路跑步

一个新入职的开发人员多久能在他的笔记本电脑上看到应用程序的工作版本？我的目标是这样的:

*   安装 git、节点、nvm 和 vscode
*   克隆回购
*   npm 安装
*   如果需要，运行几个 cli。
*   npm 开始

但对于我过去参与的大多数项目来说，情况并非如此。以下是我遇到的一些事情。

*   我按照维基页面上的一系列步骤操作，却遇到了障碍。现在，必须有人通过电子邮件向我发送所需额外步骤的说明。这就是所谓的部落知识。这是很常见的。它是通过操作系统依赖中的怪癖、使应用程序工作的捷径等创建的。
*   我在本地设置并运行数据库和几个 API。这些步骤没有被适当地记录下来，并且文档经常是陈旧的。我唯一的希望是找到一个曾经走过这条路的人来帮助我。
*   为了运行软件的某些部分，我必须安装 Eclipse，修改环境变量并运行 Java 服务器。为此，肯定需要有人给你发送一个环境变量列表。对于没有 Java 经验的人来说，这是非常痛苦的。

你能做什么:

*   创建可以在不依赖数据库或服务器的情况下运行的模拟 API。在 CRA 境内运行。使用类似库的 faker 来生成数据。让 API 尽可能接近真实的 API。这也有助于在 API 还没有准备好的时候取得进展。如果按照准确的规格进行编码，集成将轻而易举。
*   了解部落知识。这些信息存在于晦涩陈旧的维基、旧电子邮件、bashrc 文件或聊天记录中。当你需要额外的步骤来运行你的应用程序时，把它构建到任务运行器中。
*   让新开发人员能够快速入门并逐步学习。任何人都不应该在开始工作前经历几个月的培训。仅仅 JavaScript 专业知识就足够了。

# 保持简单

说起来容易。很难完成。

![](img/91afeb8072d5deb015b121f017665b26.png)

来源:维基媒体

简单是一个旅程，而不是目的地。这是你每天做事的方式。这与你为实现目标而处理的分心事物的数量成反比。如果你需要一致地引用一个 API 文档，你就有了复杂的依赖关系。如果你发现自己的代码在几个月后被外星人重新访问，那么你的设计就过于复杂了。

软件是复杂的。无论是社交媒体、数据管理、银行还是娱乐，固有的复杂性都是不可避免的。下面的文章解决了这个问题。

 [## 没有银弹

### 最初出现在:Brooks，Frederick P .，“没有银弹:软件工程的本质和事故”，IEEE…

www.cgl.ucsf.edu](https://www.cgl.ucsf.edu/Outreach/pc204/NoSilverBullet.html) 

可以避免的是偶然的复杂。这源于我们在解决领域问题时所做的技术选择和设计策略。如前所述，对于前端开发，您的框架和库选择很重要。你可以做以下几件事来降低意外的复杂性:

*   采用简单的语言。对我们来说，JavaScript 是唯一的选择，但是你可以像前面提到的那样进一步简化它。
*   采用 API 占用空间小的框架和库。不管标语有多吸引人..如“万物皆流”(Rx.js)，在大多数情况下可能只会增加更多的复杂性。
*   选择可以逐步采用的技术。我们在项目中广泛使用 TypeScript。然而，当我们开始时，情况并非如此。在我们完全理解它并接受好的模式之前，它是可选的。学习是渐进的。即使是现在，对于更高阶的函数和组件，我们也很难完整地键入它们。在这里，我们简单地使用“任何”类型，单元测试会考虑它们的弹性，而不是添加复杂的类型。
*   避免 OOP。OOP 没有按照它的本意被使用或实现。对于前端工程师来说，J2EE 用 EJB 之类的东西彻底搞砸了。然后，POJO 运动推动了对它的简化。我曾经在一些项目中，一个由建筑师设计的简单项目贴了一整面墙的 UML 图，解释他的设计。Java 对于服务器端来说可能很棒，但是对于前端来说却是一个糟糕的选择。有人是 GWT 吗？

[](https://medium.com/better-programming/object-oriented-programming-the-trillion-dollar-disaster-92a4b666c7c7) [## 面向对象编程——万亿美元的灾难

### OOP 被许多人认为是计算机科学皇冠上的宝石。代码组织的最终解决方案。结尾…

medium.com](https://medium.com/better-programming/object-oriented-programming-the-trillion-dollar-disaster-92a4b666c7c7) 

*   即使在过去的十年里，JavaScript 作为一种函数式语言的力量已经显露出来，TC39 ECMA 基金会仍然不断地将半生不熟的类范例推进 JavaScript。
*   将构图作为你设计的精髓。避免基于类的继承。对数据转换和状态管理使用功能模式，如组合、映射/过滤和简化。使用诸如 ramda.js 之类的库来提供对象和列表管理实用程序。

# 编程实践

我们谈到了对 JavaScript 采取极简主义的方法，并采用功能模式。坚持以下实践可以减少代码错误，提高开发人员体验:

## 实践不变性

*   更喜欢 const 而不是 let。这是对非对象类型有效的第一级不变性。
*   使用“扩散”操作符创建新副本，而不是对现有对象进行变异。如果需要，请使用深度克隆。
*   使用减少器/动作进行状态管理。用于管理状态的 reducer 是一个纯函数，在给定当前状态和动作的情况下，它返回一个新状态。
*   学习如何编写纯函数。不要改变函数参数或其范围之外的任何东西。学习如何做好纯函数的单元测试。

## 编写惯用代码

*   一些开发人员通过编写聪明的代码获得快感，我就是其中之一。聪明的代码就是这样。聪明。这很难推理。避免聪明的代码，当你在代码评审中看到它们时，就把它们叫出来。
*   使用 linter 并将其与 git 挂钩集成。使用自以为是的格式化程序，如漂亮。通过代码评审，在此基础上强制实施诸如变量名和间距之类的约定。

## 使用静态类型

打字稿很吓人。文档假装它是自己的语言。然而，我们放弃了基于类的开发，采用了一种极简主义的方法。在这之后，TypeScript 成了我们的朋友。我们通常将 TypeScript 用于:

*   功能签名
*   组件属性类型
*   状态和局部变量

hoc 和动态行为很难归类。我们无耻地使用“任何”类型，而不浪费时间去搜索“如何打字”。记住，TypeScript 只是一个工具。不要把它当成教条。

## 单元测试

*   有足够的可演示的单元测试。这有助于新开发人员学习如何为助手函数和组件编写断言。笑话断言和快照是美妙的。
*   如果您发现自己在单元测试中注入了模拟，那么是时候将它转移到集成或验收测试中了。[这里有一篇推荐阅读](https://medium.com/javascript-scene/mocking-is-a-code-smell-944a70c90a6a)。
*   通过编写单元可测试的功能和组件来编写软件是一种习得的技能。当您构建由弹性单元组成的软件时，整个项目将会反映这一点。

## 验收测试

*   验收测试是在功能范围内执行的集成测试。功能测试传统上由 QA 使用基于 Java 的 Selenium 来完成。使用 cypress 和 testcafe 等框架，开发人员可以用 JavaScript 编写隔离的验收测试。
*   在我们的团队中，QA 通过扩展测试套件中的场景来进一步利用这一点。这消除了开发和 QA 之间的大部分测试重叠。

# 总线因子

![](img/0ea3eaf0403de0c5be3b37dbc440a7a3.png)

[图片来源:Pixabay](https://pixabay.com/vectors/man-worker-boxes-carrying-danger-156891/)

“总线因素”是在项目停止之前，由于缺乏有知识或有能力的人员，不得不突然从项目中消失的团队成员的最小数量。在软件开发中，您可以通过采取一些措施来最小化这种情况。

*   **没有英雄**。英雄是了不起的工程师，他们会毫不犹豫地独自解决问题。他们是领域和项目的辛勤工作者和专家。然而，当一个英雄离开一个项目时，它留下了一个巨大的空洞。两周的 TOI 会议记录不会停止这种影响。
*   同样的一点:最小化项目的复杂性。确保您的项目可以由具有广泛能力的工程师开发和维护。你应该能够很快接纳新的开发人员。如果你的项目需要深入的知识，确保有足够多的人具备这些知识。

# 孤立发展

![](img/27c709e567adbde189a69861d5c564bb.png)

这是一个很高的目标。独立编写代码的能力意味着:

*   你清楚地理解你正在解决的问题。
*   你不依赖任何人。你没有被屏蔽。
*   你可以融入其中。开发过程中的编写和重构。
*   合并冲突很少发生，因为您没有与任何人共享该文件夹。
*   退步的风险低。
*   您可以编写自包含的单元和验收测试。

我称之为高目标，因为它取决于你的特性是如何被隔离设计的。如果你的应用程序中的每一个功能都需要你在一些共同的部分上工作，比如更新路线、元数据等等，那么就会有持续的冲突。

## 删除功能

大多数项目只会增加规模。由于回归风险，被否决的功能(也称为死代码)将永远存在。理想情况下，删除要素应该像删除文件夹及其路径一样简单。这是一个伟大的目标。这意味着你可以在不回归的情况下增强、重构或删除特性。你甚至可以对同一个特性的两个完全不同的版本进行客户测试。

## 作为微前端架构的组合。

小程序、Flash 和 iframes 是微前端。但是它们都死了(iframes 通常被用作 hacks)。你可以找到一些关于 SPA 微前端的博客。目标是开发一个容器，可以容纳松散耦合的软件。这是一个有价值的探索。这些解决方案仍然非常定制和复杂，因为它试图在一个广泛的范围内解决它。当不同的团队希望在同一个“门户”中部署他们的应用程序时，通常会出现这种需求。例如，Angular 和 React 应用程序在同一个浏览器选项卡中并排存在，这会给项目带来不必要的复杂性。

我们在 HPE(在我们的团队中)讨论过这个问题。我们决定不追求混合框架这一首要目标，而是致力于 React 中独立的特性开发模型。没有必要组合 JavaScript 框架。我们的平台结合了:

1.  核心功能，如 npm 任务、故事书、通用组件、主题和助手
2.  一组孤立的特征。全局状态，如用户信息、路由等。被注入到特性容器中。
3.  应用外壳可以根据部署平台创建不同的角色。一个人物角色可以简单地通过挑选某些特性来创造一种体验，并在一个应用程序外壳中组合它们。

该项目前期加载了#1。经过几次冲刺后，我们只获得了第二名和第三名。开发者体验棒极了。通过应用本博客中解释的各种原则，我们能够轻松地确定开发人员的范围并为其分配单独的功能。一名 JavaScript 工程师入职不到两周。在大约 5 个月的时间里，我们和一个由 13 名前端工程师组成的团队一起制作了 30 多个特性。该项目从零到 1400 个打字稿文件和 80K 行代码，包括单元和验收测试。万岁！

# 如何让 DX 保持愉悦

保持 DX 愉快是一场持续的战斗。定期的技术会议和 nit 挑剔的代码审查是必须的。你必须注意以下几点:

## 糟糕的程序员

不管你喜不喜欢，你的团队中会有不太理想的程序员。他们会写出糟糕的代码。尤其是在开始的时候。你需要鼓励他们遵循核心原则，并督促他们编写符合习惯的代码。通过独立的特性开发，您可以降低风险。糟糕的代码可以在没有回归的情况下被重构。

## 代码气味

> "代码气味是一种表面迹象，通常对应于系统中更深层次的问题."~马丁·福勒

JavaScript 是一种有缺陷的语言。它是匆忙创建的，添加了一些结构来与 Java 竞争。这里有很多代码的味道。例如，在我们的 React 项目中，使用 let 是一种代码味道。不允许强制数据转换。意识到代码的味道是非常关键的。在代码评审期间，你作为一个团队来执行它。

## 偏差标准化

谷歌一下这个术语会让你了解它的意思，以及它如何应用于不同的领域。

例如，在一个正在进行的项目中，突然有一个时间表的转变和紧迫性。单元测试退居二线，因为开发人员时间紧迫。因此，他们的方法是“让它工作，并把它留给 QA”。积压现在是一种常态。因为一切看起来都很好，所以真的没有修复它的“紧迫性”。但这是一颗定时炸弹，很快就会以最糟糕的方式显现出来。

即使很小的不良偏差(如变量名约定)也会被发现，并产生非惯用代码。迟早会有人试图不加约束地访问文档、窗口或本地存储变量。如果你不能及时捕捉并驯服它，几年后，这种行为将会蔓延。保证。

## 新依赖项

随着项目的老化，新的依赖关系将会出现。选择有大量贡献者和良好在线形象的包是很重要的。确保这些包可以与其他包无缝升级。在快速发展的技术中使用开源充斥着各种问题，如 [is-promise](https://www.zdnet.com/article/another-one-line-npm-package-breaks-the-javascript-ecosystem/) 、 [core-js](https://news.ycombinator.com/item?id=22681860) 、 [left-pad](https://news.softpedia.com/news/annoyed-developer-brings-down-thousands-of-javascript-node-js-projects-502075.shtml) 和 [event-stream](https://blog.npmjs.org/post/180565383195/details-about-the-event-stream-incident) 。坦白说，采用 is-promise 这样的单一功能包是很可笑的。写一个叫 isPromise()的简单函数有那么难吗？

## 重构

依我看，重构永远不应该停止。我一直在寻求简化软件。有时，它会利用停机时间来审核您的应用程序的代码味道和复杂性。有时，这就像为函数或文件名找到一个更好的名字一样简单。重构就像保养你的汽车。定期做它，它将持续你很长一段时间。你不希望你的产品成为开发者迫不及待重写的“遗留”应用。

## 代码审查

代码审查必须是一种积极的体验。由于其文本性质，评论往往是非个人的。评论必须建立在同情和礼貌的基础上，并且应该加强代码库的共享所有权。代码评审不是展示聪明或编码肌肉，而是一起构建一个项目。在我们的团队中，我们鼓励每个人都参与评审。它有助于保持最佳实践并保持代码的习惯性。

## 升级

Npm 软件包即使不是几个月，也会在几周内变得陈旧。框架因引入突破性的变化而臭名昭著。保持稳定的版本将有助于保持你的产品新鲜。

## 闪亮的旧东西

时不时地，一个闪亮的新解决方案会出现在 npm 的地平线上。为了创造经久耐用的产品，抵制成为早期使用者的冲动。采用闪亮的旧东西。

# 发展

工具会变。新的哲学将会出现。前端解决方案仍然很复杂，但是创新的速度非常快。我们必须不断适应和进化。

[](https://skilled.dev) [## 编写面试问题

### 一个完整的平台，在这里我会教你找到下一份工作所需的一切，以及…

技术开发](https://skilled.dev)