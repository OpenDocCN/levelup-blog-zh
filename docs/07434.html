<html>
<head>
<title>Creating a Swagger Documented Go Web Server in Two Easy Steps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用两个简单的步骤创建一个Swagger文档化的Go Web服务器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-a-swagger-documented-go-web-server-in-two-easy-steps-59f1118bd247?source=collection_archive---------2-----------------------#2021-02-18">https://levelup.gitconnected.com/creating-a-swagger-documented-go-web-server-in-two-easy-steps-59f1118bd247?source=collection_archive---------2-----------------------#2021-02-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0c8e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过使用Go Fiber和自动生成的Swagger文档逐步解释如何设置Go web服务器。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/52c8c8869f1678967f13092deddcfb5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zd2wcuar-TJ8J2Ls"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@homajob" rel="noopener ugc nofollow" target="_blank">斯科特·格雷厄姆</a>在<a class="ae ky" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="1001" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">和往常一样，您可以在我的GitHub资源库中查看这篇文章的完整示例，因此可以随意将其作为参考:</p><div class="mc md gp gr me mf"><a href="https://github.com/Abszissex/medium_go_fiber_swagger" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd iu gy z fp mk fr fs ml fu fw is bi translated">abszisex/medium _ go _ fiber _ swagger</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">在GitHub上创建一个帐户，为abszisex/medium _ go _ fiber _ swagger开发做贡献。</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">github.com</p></div></div><div class="mo l"><div class="mp l mq mr ms mo mt ks mf"/></div></div></a></div><h1 id="7b31" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">从头开始设置Web服务器</h1><p id="5120" class="pw-post-body-paragraph lg lh it li b lj nm ju ll lm nn jx lo lp no lr ls lt np lv lw lx nq lz ma mb im bi translated">所以让我们从头开始我们的围棋项目。首先，我们必须创建一个新模块:</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="3f24" class="nw mv it ns b gy nx ny l nz oa">// Create new project folder and 'cd' into it.<br/>$ mkdir medium_go_fiber_swagger &amp;&amp; cd medium_go_fiber_swagger</span><span id="e49f" class="nw mv it ns b gy ob ny l nz oa">// Create module called `medium_go_fiber_swagger`<br/>$ go mod init medium_go_fiber_swagger</span></pre><p id="0971" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">接下来，我们已经可以将<a class="ae ky" href="https://github.com/gofiber/fiber" rel="noopener ugc nofollow" target="_blank">光纤</a>模块添加到我们的模块/应用程序中。</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="2db4" class="nw mv it ns b gy nx ny l nz oa">// Install Go Fiber module and add to `go.mod`<br/>$ go get -u github.com/gofiber/fiber/v2</span></pre><p id="0982" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated"><code class="fe oc od oe ns b">go.mod</code>文件现在应该如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="6577" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">现在让我们用一些初始代码创建我们的主文件<code class="fe oc od oe ns b">main.go</code>,通过一个GET端点启动一个简单的web服务器:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">main.go</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/90f967bc40ee50ef32d3ebc35ea60349.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*7CFxZKaLUuCR0W19fSrEQQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">通过“go run”启动Go web服务器</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/c46394bef9e4cf49513586fdb96e30c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/format:webp/1*3nDmc9PM0TDulCBWAx4Bjg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">访问<a class="ae ky" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>以验证服务器是否正确响应</figcaption></figure><p id="9818" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">在我们定义了我们的初始应用程序后，我们应该通过<code class="fe oc od oe ns b">go run .</code>快速验证服务器是否按预期启动。</p><p id="eed5" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">接下来，在浏览器中或者通过<code class="fe oc od oe ns b">curl</code>检查<a class="ae ky" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>，如果服务器响应正确。</p><p id="910c" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">恭喜你，你的第一个Go web服务器已经运行并响应了你的请求！🎉</p><h1 id="1428" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">添加招摇</h1><p id="5191" class="pw-post-body-paragraph lg lh it li b lj nm ju ll lm nn jx lo lp no lr ls lt np lv lw lx nq lz ma mb im bi translated">由于web服务器现在正在运行，是时候为它添加一些对Swagger文档的支持了。</p><ol class=""><li id="6456" class="oj ok it li b lj lk lm ln lp ol lt om lx on mb oo op oq or bi translated">下载<a class="ae ky" href="https://github.com/swaggo/swag" rel="noopener ugc nofollow" target="_blank"> Swag </a>进行Go，稍后运行<code class="fe oc od oe ns b">swag init</code>需要用到。</li></ol><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="1654" class="nw mv it ns b gy nx ny l nz oa">$ go get -u github.com/swaggo/swag/cmd/swag</span></pre><p id="20d6" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">2.下载<a class="ae ky" href="https://github.com/arsmn/fiber-swagger/" rel="noopener ugc nofollow" target="_blank">光纤招摇</a></p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="9c36" class="nw mv it ns b gy nx ny l nz oa">$ go get -u github.com/arsmn/fiber-swagger/v2</span></pre><p id="6b3a" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">3.接下来，让我们在<code class="fe oc od oe ns b">main.go</code>文件中添加一条新路径、一些代码文档和必要的导入。结果将如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="5559" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">请特别注意<code class="fe oc od oe ns b">"_ memdium_go_fiber_swagger/docs”</code>。这是一种会产生“副作用”的进口，因此有了<code class="fe oc od oe ns b">_</code>。<code class="fe oc od oe ns b">medium_go_fiber_swagger</code>对应于我们正在工作并在本文开头创建的模块。<code class="fe oc od oe ns b">/docs</code>部分告诉应用程序应该导入在<code class="fe oc od oe ns b">docs</code>文件夹中定义的文件，这些文件将在下一步通过一些CLI命令自动生成。</p><p id="1f0c" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">在上面的代码示例中，还可以看到在<code class="fe oc od oe ns b">main</code>函数和路由处理程序<code class="fe oc od oe ns b">GetItem</code>之上的注释部分有很多注释。我不会详细讨论单个注释的细节，因为我认为这是不言自明的，尤其是当您已经使用Swagger至少工作过一次的时候。尽管你可以在这里找到通用API信息(<code class="fe oc od oe ns b">func main</code>)注释<a class="ae ky" href="https://swaggo.github.io/swaggo.io/declarative_comments_format/general_api_info.html" rel="noopener ugc nofollow" target="_blank">的文档，在这里</a>找到API操作(<code class="fe oc od oe ns b">func GetItem</code> ) <a class="ae ky" href="https://swaggo.github.io/swaggo.io/declarative_comments_format/api_operation.html" rel="noopener ugc nofollow" target="_blank">的文档。</a></p><p id="a21b" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">既然实际的应用程序已经准备好了，我们当然需要创建我们的Swagger文档，这样它就可以由web服务器提供服务了。要实现这一点，我们只需在代码文档中的每次更改后运行以下命令:</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="d2b8" class="nw mv it ns b gy nx ny l nz oa">$ swag init</span></pre><p id="c33f" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这个命令在它被调用的位置创建一个名为<code class="fe oc od oe ns b">docs</code>的新文件夹。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/5535d25ca6ca0a056f85ea68f214a868.png" data-original-src="https://miro.medium.com/v2/resize:fit:442/format:webp/1*MRAiKI5OHeRAEipoSkWfwQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由“swag init”创建的文件夹结构</figcaption></figure><p id="4265" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">由于我们的文档现在已经生成，并且我们已经通过一些副作用导入将它导入到我们的<code class="fe oc od oe ns b">main.go</code>文件中，我们可以重新启动我们的服务器并检查我们的Swagger文档是否被正确提供。</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="8829" class="nw mv it ns b gy nx ny l nz oa">// Start the server<br/>$ go run .</span></pre><p id="8e83" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">访问<a class="ae ky" href="http://localhost:3000/swagger/index.html" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/swagger/index . html</a>并查看它是否按预期工作:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/b0e6799d35a5b9e3705585950b45e948.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rb48G5TEDD0ClrTxFAVMCg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">http://localhost:3000/Swagger/index . html上的swagger文档</figcaption></figure><h1 id="90ae" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">最后的话</h1><p id="e5d9" class="pw-post-body-paragraph lg lh it li b lj nm ju ll lm nn jx lo lp no lr ls lt np lv lw lx nq lz ma mb im bi translated">我希望我可以向您展示如何使用Go Fiber框架从头开始设置Go web服务器，并相应地对其进行配置，以便应用程序使用自动生成的Swagger文档并在一条路线上提供服务。</p><p id="465d" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">感谢您花时间阅读我的文章。</p><h2 id="c47e" class="nw mv it bd mw ou ov dn na ow ox dp ne lp oy oz ng lt pa pb ni lx pc pd nk pe bi translated">你想联系吗？</h2><p id="6350" class="pw-post-body-paragraph lg lh it li b lj nm ju ll lm nn jx lo lp no lr ls lt np lv lw lx nq lz ma mb im bi translated">如果你想联系我，请在LinkedIn上给我打电话。</p><p id="c598" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">另外，请随意查看我的书籍推荐📚。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><div class="kj kk kl km gt mf"><a href="https://mr-pascal.medium.com/my-book-recommendations-4b9f73bf961b" rel="noopener follow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd iu gy z fp mk fr fs ml fu fw is bi translated">我的书籍推荐</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">在接下来的章节中，你可以找到我对所有日常生活话题的书籍推荐，它们对我帮助很大。</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="mo l"><div class="pf l mq mr ms mo mt ks mf"/></div></div></a></div><div class="mc md gp gr me mf"><a href="https://mr-pascal.medium.com/membership" rel="noopener follow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd iu gy z fp mk fr fs ml fu fw is bi translated">通过我的推荐链接加入Medium—Pascal Zwikirsch</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="mo l"><div class="pg l mq mr ms mo mt ks mf"/></div></div></a></div></div></div>    
</body>
</html>