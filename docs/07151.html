<html>
<head>
<title>How to add Authentication &amp; Authorization to your app quickly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何快速向您的应用添加身份验证和授权</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-add-authentication-authorization-to-your-app-quickly-48afa2afa534?source=collection_archive---------1-----------------------#2021-01-27">https://levelup.gitconnected.com/how-to-add-authentication-authorization-to-your-app-quickly-48afa2afa534?source=collection_archive---------1-----------------------#2021-01-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/60fc7c72741d9c9af4ae13dc50a0f48f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8N3Xhmv4rgK2XBS72TUYfg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">利亚姆·塔克在<a class="ae kc" href="https://unsplash.com/s/photos/security?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="f4e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">认证和授权用户进入您的web应用程序并不一定是<a class="ae kc" href="https://starwars.fandom.com/wiki/Death_Star" rel="noopener ugc nofollow" target="_blank">死亡之星</a>的科学，但是很容易遗漏您的实现中的一个漏洞，并被“流氓”分子利用。使用一些更简单的过时的安全协议将毫不费力地被绕过(有点像一个孤独的冲锋队员<a class="ae kc" href="https://starwars.fandom.com/wiki/Stormtrooper" rel="noopener ugc nofollow" target="_blank"/>)。</p><p id="8085" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">实现您自己的<a class="ae kc" href="https://oauth.net/2/" rel="noopener ugc nofollow" target="_blank"> OAuth 2.0 </a>流程也非常耗时，这就是为什么我不愿意为我正在开发的应用程序重新发明轮子。让我们来看看如何将第三方解决方案集成到我们的应用程序中。</p><h1 id="5fbf" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">1.等等，不要用OAuth 2.0术语:</h1><p id="8919" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果你不熟悉OAuth 2.0框架，我强烈推荐你看看下面的视频。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><h1 id="d9d5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak"> 2。了解集成第三方解决方案时的授权代码流(ACF):</strong></h1><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/ec28bea77ddb809db3f00e3920bdccfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eMgEuSlAlB8mdptC.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">摘自公开发布的<a class="ae kc" href="https://auth0.com/docs/flows/authorization-code-flow" rel="noopener ugc nofollow" target="_blank"> Auth0文档</a></figcaption></figure><p id="54c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文的其余部分，我们将上面的图称为<strong class="kf ir"> ACF </strong>图。</p><h1 id="69bf" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak"> 3。选择合适的第三方解决方案:</strong></h1><p id="5620" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我发现了两个令人难以置信的解决方案，可以帮助你将OAuth 2.0框架集成到你的应用程序中(并且还有一个自由层):<a class="ae kc" href="https://www.okta.com/" rel="noopener ugc nofollow" target="_blank"> Okta </a>和<a class="ae kc" href="https://auth0.com/" rel="noopener ugc nofollow" target="_blank"> Auth0 </a>。</p><p id="a684" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与ACF图相比，我的应用程序使用Angular SPA作为“常规Web应用程序”，并在后端使用Python Flask服务器来提供“API”。</p><p id="f457" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">根据您的架构和框架，确保您的第三方解决方案提供库/SDK来简化集成。</p><p id="0b57" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在将Okta与我的Angular应用程序集成之后，我意识到他们没有任何库来解码和验证Python 3中的访问令牌(在ACF图中的步骤9 &amp; 10之间)。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ml"><img src="../Images/927b15ad8db3d038c58037da66bba653.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ijL3CnqmQu38ksyG7T02-Q.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">摘自公开发布的<a class="ae kc" href="https://developer.okta.com/docs/guides/validate-access-tokens/go/overview/#what-to-check-when-validating-an-access-token" rel="noopener ugc nofollow" target="_blank"> Okta指南</a></figcaption></figure><p id="06de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就是在那个时候，我决定改用Auth0。</p><h1 id="713c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak"> 4。使用Auth0保护Python Flask API:</strong></h1><p id="947f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">就像我之前说的，我不想重新发明轮子。用Auth0保护Flask API在下面的文章“用Auth0保护Flask应用程序”一节中有很好的记录。</p><p id="1219" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意:我使用了‘python-Jose’库，而不是文中提到的‘python-Jose-crypto dome’。</p><div class="mm mn gp gr mo mp"><a href="https://medium.com/@auth0/using-python-flask-and-angular-to-build-modern-web-apps-part-2-3baf4330606a" rel="noopener follow" target="_blank"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd ir gy z fp mu fr fs mv fu fw ip bi translated">使用Python、Flask和Angular构建现代Web应用程序—第2部分</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">在本系列的这一部分中，首先将Auth0配置为应用程序的身份管理系统。你会…</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">medium.com</p></div></div><div class="my l"><div class="mz l na nb nc my nd jw mp"/></div></div></a></div><p id="d0f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">python API端点现在是安全的，并且只有在提供了正确的访问令牌时才会给出有效的输出。</p><h1 id="c95a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak"> 5。使用Auth0保护Angular SPA:</strong></h1><p id="74b9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">上一节中的链接提供了一个使用<a class="ae kc" href="https://auth0.com/docs/libraries/auth0js?_ga=2.133333515.46076697.1611484358-1083246999.1606830885" rel="noopener ugc nofollow" target="_blank"> auth0-web </a>的Angular实现，它比<a class="ae kc" href="https://auth0.com/docs/libraries/auth0-single-page-app-sdk?_ga=2.199862187.46076697.1611484358-1083246999.1606830885" rel="noopener ugc nofollow" target="_blank"> auth-spa-js </a> SDK稍微复杂一些，也更重一些。</p><p id="bdb1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Auth0为我使用的这个SDK提供了很好的文档。它可以在下面链接的“使用Auth0保护应用程序”部分找到。这将满足ACF图的步骤1至8。</p><div class="mm mn gp gr mo mp"><a href="https://auth0.com/blog/securing-angular-applications-with-auth0-and-deploying-to-netlify/#Secure-the-Application-with-Auth0" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd ir gy z fp mu fr fs mv fu fw ip bi translated">使用Auth0保护Angular应用程序并部署到Netlify</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">TL；DR:许多Angular应用程序需要某种形式的认证来保护应用程序的不同部分。Auth0是…</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">auth0.com</p></div></div><div class="my l"><div class="ne l na nb nc my nd jw mp"/></div></div></a></div><p id="9c2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">angular应用程序现在是安全的，将确保用户无法访问要求他们登录应用程序的页面。</p><h1 id="b264" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak"> 6。保护应用程序和API之间的通信:</strong></h1><p id="76b5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">app和API现在是安全的，但是它们不会通信，因为您的app对API的调用没有有效的访问令牌(ACF图的步骤9和10)。</p><p id="8565" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从上一节修改createAuth0Client函数的参数，您可以将它链接到您的API。这存在于auth.service.ts文件中。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="nf mj l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">替换所有以_</figcaption></figure><p id="55af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要获取有效令牌以与API通信，请将以下方法添加到auth.service.ts文件中</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="nf mj l"/></div></figure><p id="ef65" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使用这些令牌，您需要将它们附加到API调用中。我选择创建一个通用实现，以便更容易地从应用程序的不同部分调用API。您可以随意制作自己的实现！</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="nf mj l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">替换所有以_</figcaption></figure><h1 id="27ae" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">7.这就是所有的乡亲:</h1><p id="8beb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">您的应用程序现在有了更好的安全性。不要相信我的话，你自己看吧:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b8e554ddd61d3dcf0fd4d07abf024706.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KSmwLV1FsrBHp_zQlB8Ubg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">布莱恩·麦高恩在<a class="ae kc" href="https://unsplash.com/s/photos/star-wars?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><p id="4640" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">看看我的其他一些帖子:</p><div class="mm mn gp gr mo mp"><a href="https://uxdesign.cc/how-to-implement-user-friendly-pagination-for-your-application-6700987bd8c8" rel="noopener follow" target="_blank"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd ir gy z fp mu fr fs mv fu fw ip bi translated">如何为您的应用程序实现用户友好的分页</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">关于如何根据应用程序的用例实现用户友好分页的提示</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">uxdesign.cc</p></div></div><div class="my l"><div class="nn l na nb nc my nd jw mp"/></div></div></a></div><div class="mm mn gp gr mo mp"><a rel="noopener  ugc nofollow" target="_blank" href="/scraping-your-statistics-from-quora-using-python-3-74d33413cae6"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd ir gy z fp mu fr fs mv fu fw ip bi translated">如何使用Python 3从Quora中抓取统计数据</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">从Quora Stats(统计)图中提取数据的指南。</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="my l"><div class="no l na nb nc my nd jw mp"/></div></div></a></div></div></div>    
</body>
</html>