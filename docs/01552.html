<html>
<head>
<title>Ramping up a production workflow and application(s), 10 steps in 10 minutes with Google Cloud Platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">借助谷歌云平台，在10分钟内完成10个步骤，提升生产工作流程和应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/ramping-up-a-production-workflow-and-application-s-10-steps-in-10-minutes-with-google-cloud-ad2607a45907?source=collection_archive---------8-----------------------#2020-01-12">https://levelup.gitconnected.com/ramping-up-a-production-workflow-and-application-s-10-steps-in-10-minutes-with-google-cloud-ad2607a45907?source=collection_archive---------8-----------------------#2020-01-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/18c8decd189ec32557eef180efaa0044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*31leHtK4D7URSNI4.jpg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">祖姆。好快啊！—原图，来源:<a class="ae kf" href="https://pixabay.com/illustrations/superhero-girl-speed-runner-534120/" rel="noopener ugc nofollow" target="_blank"> pixabay </a>，作者:<a class="ae kf" href="https://pixabay.com/users/alan9187-2347/" rel="noopener ugc nofollow" target="_blank"> alan9187 </a></figcaption></figure><p id="5244" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">云端的Web应用— <strong class="ki iu"> <em class="le">入门有那么容易吗？</em> </strong></p><p id="9f26" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在今天“云饱和”的互联网中，让web服务快速启动和运行是一件容易的事情。例如，GitHub pages是一个让个人网站在几分钟内运行起来的简单方法。我最近探索的另一个工具是Heroku，它允许爱好者从他们的代码库中轻松地设置一个登台环境。然而，对于商业应用程序，创建web应用程序可能要复杂得多，例如从以下问题中可以观察到。</p><p id="6671" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">建立一个可管理和可扩展的web应用程序用于生产环境怎么样— </strong>结合其他所需的基础设施和工作流，例如持续集成+持续部署/交付(CICD)管道？传统的方法是使用不同的服务来实现其中的每一个目标，这使得管理单个服务有时成为一场噩梦。</p><p id="da11" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">另一个问题是建立和维护基础设施的成本，包括时间和金钱。</strong>归结为两个因素，所选基础设施的技术壁垒和成本，以及能够克服这些壁垒的工程师。</p><p id="5284" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">谷歌云平台(GCP)的出现解决了这两个问题。但是在解释它如何解决这些问题之前，让我们先看看如何在10分钟之内通过GCP在云端的web应用程序建立一个生产工作流程。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="6ec0" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">10个步骤，在10分钟内</h1><p id="f70d" class="pw-post-body-paragraph kg kh it ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">以下是所采取步骤的简要概述:</p><ol class=""><li id="ddce" class="mp mq it ki b kj kk kn ko kr mr kv ms kz mt ld mu mv mw mx bi translated">创建GCP项目<strong class="ki iu"> (10秒)</strong></li><li id="e59e" class="mp mq it ki b kj my kn mz kr na kv nb kz nc ld mu mv mw mx bi translated">启用应用引擎<strong class="ki iu"> (10秒)</strong></li><li id="e1df" class="mp mq it ki b kj my kn mz kr na kv nb kz nc ld mu mv mw mx bi translated">启用应用引擎管理API <strong class="ki iu"> (10秒)</strong></li><li id="e748" class="mp mq it ki b kj my kn mz kr na kv nb kz nc ld mu mv mw mx bi translated">启用云运行<strong class="ki iu"> (10秒)</strong></li><li id="d474" class="mp mq it ki b kj my kn mz kr na kv nb kz nc ld mu mv mw mx bi translated">为CICD工作流启用云构建<strong class="ki iu"> (10秒)</strong></li><li id="196b" class="mp mq it ki b kj my kn mz kr na kv nb kz nc ld mu mv mw mx bi translated">使用云构建跟踪代码变更<strong class="ki iu"> (1分钟)</strong></li><li id="a29e" class="mp mq it ki b kj my kn mz kr na kv nb kz nc ld mu mv mw mx bi translated">使用适当的IAM角色配置云构建服务帐户<strong class="ki iu"> (1分钟)</strong></li><li id="bcae" class="mp mq it ki b kj my kn mz kr na kv nb kz nc ld mu mv mw mx bi translated">添加应用引擎配置(至代码库)<strong class="ki iu"> (1分钟)</strong></li><li id="2e39" class="mp mq it ki b kj my kn mz kr na kv nb kz nc ld mu mv mw mx bi translated">添加云构建配置(到代码库)<strong class="ki iu"> (1分钟)</strong></li><li id="533c" class="mp mq it ki b kj my kn mz kr na kv nb kz nc ld mu mv mw mx bi translated">将配置签入代码存储库，并触发CICD工作流进行部署。<strong class="ki iu"> (4分钟，包括构建时间)</strong></li></ol><p id="b811" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意，对于以上，我们部署到App Engine(标准)和Cloud Run作为节点应用。部署时，App Engine (Standard)需要代码库中有一个<code class="fe nd ne nf ng b">app.yaml</code>文件，这将在步骤8中介绍。云运行使用Docker映像，因此这里假设应用程序中会有一个Docker文件。一个兼容App Engine和Cloud Run的项目示例可以在<a class="ae kf" href="https://github.com/Weiyuan-Lane/slides/tree/demo/devfest-gui" rel="noopener ugc nofollow" target="_blank">这里</a>看到。</p><p id="eb7b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">总的来说，我们应该花大约<strong class="ki iu"> 9分钟</strong>从零开始，拥有两个具有CICD工作流的web应用程序，并直接从代码更改部署到GCP。事实上，我已经做了这个过程<a class="ae kf" href="https://www.linkedin.com/posts/liuweiyuan_where-do-i-start-i-had-this-mad-idea-activity-6592794697075392512-WCuq/" rel="noopener ugc nofollow" target="_blank">几次</a>，并且设法实现了比那个更低的计时。</p><p id="4ca1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一个值得注意的是，上面使用了Cloud Run和App Engine，用于演示目的。在实际的生产使用中，我们只需要利用其中的一个，而不是运行两个相同的web应用程序。这只能意味着上述工作可以在更短的时间内更容易地完成。</p><h1 id="923a" class="lm ln it bd lo lp nh lr ls lt ni lv lw lx nj lz ma mb nk md me mf nl mh mi mj bi translated"><strong class="ak">10个步骤，深入演练</strong></h1><p id="f2a7" class="pw-post-body-paragraph kg kh it ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">让我们仔细看看这10个步骤，以及每一步我们应该做什么。</p><h2 id="2c07" class="nm ln it bd lo nn no dn ls np nq dp lw kr nr ns ma kv nt nu me kz nv nw mi nx bi translated">步骤1—创建GCP项目</h2><figure class="nz oa ob oc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ny"><img src="../Images/5b278a2d29eeaa6eed1bdf423f3a0eeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L-X4kzkpPPtmfllC1dVaJw.png"/></div></div></figure><p id="c253" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为我们要从头开始，所以在部署应用程序之前，我们需要创建一个新的GCP项目。你可以通过这个<a class="ae kf" href="https://console.cloud.google.com/projectcreate" rel="noopener ugc nofollow" target="_blank">链接</a>直接创建你自己的GCP项目。</p><h2 id="5263" class="nm ln it bd lo nn no dn ls np nq dp lw kr nr ns ma kv nt nu me kz nv nw mi nx bi translated">步骤2—启用应用引擎</h2><figure class="nz oa ob oc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi od"><img src="../Images/d2b821e5f72807d99b85863fc9630134.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YfLhGjZSpYGnnnovVFcH0Q.png"/></div></div></figure><p id="d7f4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您选择使用App Engine而不是云运行，这是您需要执行的步骤之一。</p><p id="1405" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">过程很简单——从导航菜单中，点击<code class="fe nd ne nf ng b">App Engine</code>，然后点击<code class="fe nd ne nf ng b">Dashboard</code>。你应该能看到如上图所示的<code class="fe nd ne nf ng b">Create Application</code>按钮。点击后，您将进入一个流程，在该流程中，您可以为您的App Engine应用程序选择区域和环境(标准或灵活)。请注意，选定的区域以后不能更改，但环境可以随时更改。</p><p id="4151" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有关适用的应用引擎环境的更多信息，请参见此处的<a class="ae kf" href="https://cloud.google.com/appengine/docs/the-appengine-environments" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="49e0" class="nm ln it bd lo nn no dn ls np nq dp lw kr nr ns ma kv nt nu me kz nv nw mi nx bi translated">步骤3-启用应用引擎管理API</h2><figure class="nz oa ob oc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oe"><img src="../Images/0fb139fbfbe7873774cd436ad4906fd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kQTr9ETIJGEwY1WwDo-2aw.png"/></div></div></figure><p id="4178" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作为第2步中应用引擎创建步骤的继续，我们需要启用应用引擎管理API。</p><p id="8eee" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要执行此步骤，从导航菜单中点击<code class="fe nd ne nf ng b">APIs &amp; Services</code>，然后点击<code class="fe nd ne nf ng b">Dashboard</code>。搜索<code class="fe nd ne nf ng b">App Engine Admin API</code>，你应该会看到类似上图的带有<code class="fe nd ne nf ng b">Enable</code>按钮的界面。</p><p id="0245" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">启用这个API允许我们使用<code class="fe nd ne nf ng b">gcloud</code> SDK直接部署应用程序，这将在后面的步骤中提到。</p><h2 id="9265" class="nm ln it bd lo nn no dn ls np nq dp lw kr nr ns ma kv nt nu me kz nv nw mi nx bi translated">步骤4—启用云运行</h2><figure class="nz oa ob oc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi of"><img src="../Images/70d2b0e67634409a08520b24957ca7da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KWIbKDA7V9_P-iNcpjeC8A.png"/></div></div></figure><p id="81ee" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您选择使用云运行而不是App Engine，您将必须执行此步骤。</p><p id="4f63" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要执行此步骤，从导航菜单中点击<code class="fe nd ne nf ng b">Cloud Run</code>。您应该会看到带有<code class="fe nd ne nf ng b">Start Using Cloud Run</code>按钮的界面，如上图所示。</p><h2 id="4dce" class="nm ln it bd lo nn no dn ls np nq dp lw kr nr ns ma kv nt nu me kz nv nw mi nx bi translated">步骤5—为CICD工作流启用云构建</h2><figure class="nz oa ob oc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi og"><img src="../Images/13560a3ea0a6401d862fc9bc1a4cb31f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eKOqgGDLLwMTdRVTIL98wg.png"/></div></div></figure><p id="462b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">GCP为CICD提供的产品是通过使用云构建的。我们可以配置云构建来测试、构建和部署我们的应用到应用引擎和云运行。</p><p id="c082" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要访问上面的界面，从导航菜单中，点击<code class="fe nd ne nf ng b">Cloud Build</code>。然后，单击<code class="fe nd ne nf ng b">Enable Cloud Build API</code>在您的项目中启用云运行。</p><h2 id="ef8e" class="nm ln it bd lo nn no dn ls np nq dp lw kr nr ns ma kv nt nu me kz nv nw mi nx bi translated">步骤6—使用云构建跟踪代码变更</h2><figure class="nz oa ob oc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oh"><img src="../Images/818ec19a3a93513535eee64836bf0337.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ee7pGBGfR2W_038jHznpeQ.png"/></div></div></figure><p id="bd75" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">启用云构建之后，我们需要添加适当的配置，以便从代码存储库中跟踪和部署应用程序。我们从导航菜单开始这个过程，选择<code class="fe nd ne nf ng b">Cloud Build</code>，然后选择<code class="fe nd ne nf ng b">Triggers</code>。</p><p id="da96" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦我们看到上面的界面，我们可以选择<code class="fe nd ne nf ng b">Connect Repository</code>按钮继续到下面的屏幕。</p><figure class="nz oa ob oc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oi"><img src="../Images/5ae9086263cd929ed44a12c70be81ac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V4cClyNTJcyLHDG_64cRzg.png"/></div></div></figure><p id="521e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此时，我们可以选择我们正在使用的代码库服务。因为我使用的演示项目是基于GitHub的，所以我选择了这个选项，如上所示。准备就绪后，选择<code class="fe nd ne nf ng b">Continue</code>进入下一个界面，您将在这里为该CICD配置选择存储库。</p><figure class="nz oa ob oc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oj"><img src="../Images/ec9697c9c202234fd5d0d040054f8a79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NpLrOcLw021GEvS-CNhKXw.png"/></div></div></figure><p id="1482" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">选择存储库之后，该过程的最后一部分是添加触发器。该触发器将包含触发新构建发生的标准。</p><figure class="nz oa ob oc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ok"><img src="../Images/56fd1962879e8166598a67caca6727f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CHtPR3NzulD3JtKJPNnnIw.png"/></div></div></figure><p id="bac3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在触发器创建菜单中，我们选择“构建配置”下的上述选项<code class="fe nd ne nf ng b">Cloud Build configuration file</code>，位置为<code class="fe nd ne nf ng b">cloudbuild.yaml</code>，这一点很重要。这将与后面的步骤相关，该步骤包含为每个构建运行的步骤。</p><p id="ad87" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建触发器时，还可以选择其他选项。其中一个选项是创建一个分支正则表达式，以标记测试或部署的分支为目标。</p><h2 id="c795" class="nm ln it bd lo nn no dn ls np nq dp lw kr nr ns ma kv nt nu me kz nv nw mi nx bi translated">步骤7—使用适当的IAM角色配置云构建服务帐户</h2><figure class="nz oa ob oc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ol"><img src="../Images/b7e5332c23ef42f4e4c9d9ca4ba7bef8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kfcIEe-YfCG7UItwWt-LPg.png"/></div></div></figure><p id="45bc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了让我们的CICD构建成功地将构建的应用部署到App Engine或云运行，我们需要在GCP的身份和访问管理(IAM)下分配适当的权限。</p><p id="d7bb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从导航菜单，从<code class="fe nd ne nf ng b">IAM &amp; admin</code>，然后点击<code class="fe nd ne nf ng b">IAM</code>，可以进入上述界面。当为云构建分配权限时，确保将它分配给以项目ID为前缀的<code class="fe nd ne nf ng b">@cloudbuild.gserviceaccount.com</code>服务帐户。您的项目ID可以在您的项目主页中找到。</p><h2 id="6c46" class="nm ln it bd lo nn no dn ls np nq dp lw kr nr ns ma kv nt nu me kz nv nw mi nx bi translated">步骤8-添加应用引擎配置(到代码库)</h2><figure class="nz oa ob oc gt ju"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="c781" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您选择使用应用引擎而不是云运行，您将必须执行此步骤。App Engine需要此配置来了解它所服务的应用程序的依赖关系和属性。基于上面的代码片段，将其添加到项目的根目录中，作为<code class="fe nd ne nf ng b">app.yaml</code>。</p><p id="cefb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">应用引擎的配置因环境而异(标准与灵活)。务必检查可在<a class="ae kf" href="https://cloud.google.com/appengine/docs/standard/nodejs/config/appref" rel="noopener ugc nofollow" target="_blank">标准</a>和<a class="ae kf" href="https://cloud.google.com/appengine/docs/flexible/nodejs/reference/app-yaml" rel="noopener ugc nofollow" target="_blank">灵活</a>下配置的属性。</p><h2 id="e3a5" class="nm ln it bd lo nn no dn ls np nq dp lw kr nr ns ma kv nt nu me kz nv nw mi nx bi translated">步骤9—添加云构建配置(到代码库)</h2><figure class="nz oa ob oc gt ju"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="dd87" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">基于上面的代码片段，我们将它作为一个新文件<code class="fe nd ne nf ng b">cloudbuild.yaml</code>添加到应用程序代码的根目录中。这个配置文件详细描述了CICD工作流中执行的步骤，比如运行测试、构建资产，然后部署应用程序。根据您决定在自己的项目中不使用的工具，请省略云运行或应用引擎的步骤。</p><p id="ff3c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有关云构建的配置文件格式和属性的更多详细信息，请参见此处的<a class="ae kf" href="https://cloud.google.com/cloud-build/docs/build-config" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="02e1" class="nm ln it bd lo nn no dn ls np nq dp lw kr nr ns ma kv nt nu me kz nv nw mi nx bi translated">步骤10-将配置签入代码存储库，并触发CICD工作流进行部署。</h2><figure class="nz oa ob oc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oo"><img src="../Images/82cc29ce85ec14a556ceed084da09101.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cARvx6BbUAaIyYuQ1sZObQ.png"/></div></div></figure><p id="2e92" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为我们已经在最后两步中添加了配置文件，所以在使用它们之前，我们必须将它们签入代码存储库。一旦基于步骤6推送了提交，就会基于步骤9的配置触发新的构建，这将部署App Engine和云运行。</p><p id="092c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就是这样！我们已经完成了10分钟10步的过程。此时，您需要做的就是等待构建过程完成，以及web应用程序的部署过程触发。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="4867" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">回到最初的问题，GCP如何解决面临的两个问题？</h1><figure class="nz oa ob oc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi op"><img src="../Images/dd1b4d1a823d3fa8c70fb2cf53d1d0a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iMIi_zyDk9LCiWvyp79VKw.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">原图，来源:<a class="ae kf" href="https://pixabay.com/illustrations/question-mark-pile-questions-symbol-2492009/" rel="noopener ugc nofollow" target="_blank"> pixabay </a>，作者:<a class="ae kf" href="https://pixabay.com/users/qimono-1962238/" rel="noopener ugc nofollow" target="_blank"> qimono </a></figcaption></figure><p id="7d63" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">建立一个可管理和可扩展的web应用程序用于生产？</strong></p><p id="f5ce" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">来自GCP，在其生态系统上面使用的工具——比如云构建和容器注册——能够分别满足CICD和Docker图像库的需求。所有这些工具都可以在GCP的web应用程序的同一个项目或范围内使用，使得管理和分离每个应用程序组的资源成为一项更简单的任务。</p><p id="910c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过选择在GCP使用无服务器工具——app engine或Cloud Run，我们也可以利用无服务器带来的好处。其中一个好处是将扩展逻辑卸载到GCP，让我们可以专注于应用逻辑，我们的产品。</p><p id="53b0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">安装和维护应用程序需要巨大的金钱和时间成本？</strong></p><p id="277d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这两种成本类型都严重依赖于选定的基础架构(虚拟机？Kubernetes？码头工人？)和招聘工程师了解基础设施。有了更多经验丰富的工程师，您可以更快地启动和运行预期的基础架构，并可能缩短生产停机时间，尽管这是以前期投入更多财务资源为代价的。</p><p id="2604" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">逆，是一颗难以下咽的苦果。在专业技术上的吝啬可能会以牺牲安装速度为代价降低成本。但是，可能会有持久的不利影响，例如选择不当且成本高昂的基础架构，比预期更长的停机时间，或者规划不当的基础架构很快成为遗留问题，最终会花费更多的时间和金钱来重写。</p><p id="33e9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">与云提供商(如GCP)进行无服务器合作，通过降低基础设施的复杂性解决了这个问题，同时仍然达到了可靠性和功能方面的行业标准。以App Engine为例——它可以<a class="ae kf" href="https://cloud.google.com/appengine/docs/standard/nodejs/config/appref" rel="noopener ugc nofollow" target="_blank">轻松配置</a>，基础设施问题被GCP抽象掉了。这减少了每天分配工程师解决基础设施问题的必要性，使企业能够将资源集中在他们的产品上。</p><p id="0a8d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">至于应用引擎和云运行的实际成本，请查看GCP的<a class="ae kf" href="https://cloud.google.com/products/calculator/" rel="noopener ugc nofollow" target="_blank">定价计算器</a>。根据我的经验，我已经连续几个月运行基本上免费的AppEngine应用程序(由于GCP的免费层),但是如果输入流量增加，它们也可以扩展，并且我将只为我在任何时候使用的东西付费。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><p id="7138" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是所有的乡亲。希望你们喜欢上面的演示，以及我对GCP无服务器的看法。</p></div></div>    
</body>
</html>