<html>
<head>
<title>What to Expect in Python 3.9</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 3.9有什么值得期待的</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-to-expect-in-python-3-9-206b486ec2a4?source=collection_archive---------23-----------------------#2020-08-17">https://levelup.gitconnected.com/what-to-expect-in-python-3-9-206b486ec2a4?source=collection_archive---------23-----------------------#2020-08-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="61b0" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">大蟒</h2><div class=""/><div class=""><h2 id="a903" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">了解Python下一版本的新特性</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/38d6855628e5ca8acc23400d5faa7ae0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3o3fDm_d8ZeNdSdpdaa7mA.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@an_ku_sh?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">安库什·明达</a>在<a class="ae lh" href="https://unsplash.com/s/photos/release?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="489f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Python 3.9预计将于2020年10月5日星期一发布。在发布正式版之前，开发人员计划发布六个alpha版、五个beta版和两个候选版。</p><div class="me mf gp gr mg mh"><a href="https://medium.com/@bajcmartinez/what-is-python-best-for-6f509fea0727" rel="noopener follow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd jd gy z fp mm fr fs mn fu fw jc bi translated">Python最适合做什么？</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">了解Python编程语言的主要应用，也许你可以在你的下一个项目中使用它。</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">medium.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv lb mh"/></div></div></a></div><p id="8c5a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在撰写本文时，第一名候选人最近于8月11日获释。现在，我们正在焦急地等待第二个候选版本，可能会在9月14日发布。</p><p id="793d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">因此，您可能想知道Python 3.9中有什么新功能。对吗？</p><p id="ed63" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">有一些重要的变化将决定Python程序的工作方式。最重要的是，在这个最新版本中，您将获得一个基于<strong class="lk jd">解析表达式语法(PEG) </strong>的新解析器。类似地，合并<code class="fe mw mx my mz b">|</code>和更新<code class="fe mw mx my mz b">|=</code>联合操作符被添加到<a class="ae lh" href="https://docs.python.org/3.9/library/stdtypes.html#dict" rel="noopener ugc nofollow" target="_blank">字典</a>中。</p><p id="f271" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们更深入地了解一下Python 3.9即将推出的所有特性和改进。</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="d52c" class="nh ni it bd nj nk nl nm nn no np nq nr ki ns kj nt kl nu km nv ko nw kp nx ny bi translated">基于PEG的新型解析器</h1><p id="7c7a" class="pw-post-body-paragraph li lj it lk b ll nz kd ln lo oa kg lq lr ob lt lu lv oc lx ly lz od mb mc md im bi translated">与旧的LL(1)解析器不同，新的解析器有一些关键的不同，使它更加灵活，更经得起未来的考验。基本上在LL(1)中，Python开发人员使用了一些“技巧”来避免其局限性。进而影响添加新语言特性的灵活性。</p><p id="53fb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">PEG和基于上下文无关语法的解析器(例如<strong class="lk jd"> LL(1) </strong>)之间的主要区别在于，在PEG中，选择操作符是有序的。</p><p id="97ef" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们假设我们写这个<code class="fe mw mx my mz b">rule: A | B | C</code>。</p><p id="bd8c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，在LL(1)解析器的情况下，它将生成构造来推断A、B或C中的哪一个必须被扩展。另一方面，PEG将尝试检查第一个选项(例如A)是否成功。只有当<code class="fe mw mx my mz b">A</code>不成功时，它才会继续下一个替代方案。简单地说，PEG将按照书写的顺序检查选项。</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="9d69" class="nh ni it bd nj nk nl nm nn no np nq nr ki ns kj nt kl nu km nv ko nw kp nx ny bi translated">支持IANA时区</h1><p id="9108" class="pw-post-body-paragraph li lj it lk b ll nz kd ln lo oa kg lq lr ob lt lu lv oc lx ly lz od mb mc md im bi translated">在实际应用程序中，用户通常只需要三种时区。</p><ol class=""><li id="8240" class="oe of it lk b ll lm lo lp lr og lv oh lz oi md oj ok ol om bi translated">协调世界时。亦称COORDINATED UNIVERSAL TIME</li><li id="1c39" class="oe of it lk b ll on lo oo lr op lv oq lz or md oj ok ol om bi translated">系统的本地时区</li><li id="b7c3" class="oe of it lk b ll on lo oo lr op lv oq lz or md oj ok ol om bi translated">IANA时区</li></ol><p id="1a10" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，如果你已经熟悉Python以前的版本，那么你可能知道Python 3.2引入了一个类<code class="fe mw mx my mz b">datetime.timezone</code>。基本上，它的主要目的是为UTC提供支持。</p><p id="00e6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">真正意义上，当地时区仍然不可用。但是，在Python 3.0版本中，开发人员改变了原始时区的语义，以支持“本地时间”操作。</p><p id="b235" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在Python 3.9中，他们将增加对IANA时区数据库的支持。大多数时候，这个数据库也被称为“tz”或Olson数据库。所以，不要和这些术语混淆。</p><p id="c750" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">所有IANA时区的功能都打包在<a class="ae lh" href="https://docs.python.org/3.9/library/zoneinfo.html" rel="noopener ugc nofollow" target="_blank"> zoneinfo </a>模块中。这个数据库非常受欢迎，广泛分布在类Unix操作系统中。但是，请记住，Windows使用完全不同的方法来处理时区。</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="9c45" class="nh ni it bd nj nk nl nm nn no np nq nr ki ns kj nt kl nu km nv ko nw kp nx ny bi translated">添加了Union运算符</h1><p id="e1e0" class="pw-post-body-paragraph li lj it lk b ll nz kd ln lo oa kg lq lr ob lt lu lv oc lx ly lz od mb mc md im bi translated">在Python以前的版本中，合并或更新两个字典的效率不是很高。这就是为什么开发人员现在引入联合操作符，如用于合并的<code class="fe mw mx my mz b">|</code>和用于更新字典的<code class="fe mw mx my mz b">|=</code>。</p><p id="610c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，之前我们使用<code class="fe mw mx my mz b">d1.update(d2)</code>时，它也会修饰<code class="fe mw mx my mz b">d1</code>。因此，要修复它，我们必须实现一个类似于<code class="fe mw mx my mz b">e = d1.copy(); e.update(d2)</code>的小“黑客”。</p><p id="c8fe" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">实际上，我们在这里创建了一个新的临时变量来保存这个值。但是，这种解决方案不是很有效。这是添加这些新的Union操作符的主要原因。</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="af85" class="nh ni it bd nj nk nl nm nn no np nq nr ki ns kj nt kl nu km nv ko nw kp nx ny bi translated">介绍removeprefix()和removesuffix()</h1><p id="0fd9" class="pw-post-body-paragraph li lj it lk b ll nz kd ln lo oa kg lq lr ob lt lu lv oc lx ly lz od mb mc md im bi translated">你有没有觉得需要一些函数，可以很容易地删除前缀或后缀从一个给定的字符串？</p><p id="6966" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，你可能会说已经有一些像<code class="fe mw mx my mz b">str.lstrip([chars])</code>和<code class="fe mw mx my mz b">str.rstrip([chars])</code>这样的函数可以做到这一点。但是，这就是困惑的开始。实际上，这些函数处理的是一组字符，而不是一个子串。</p><p id="1225" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">因此，肯定需要一些单独的函数来从字符串的开头或结尾移除子字符串。</p><p id="76d6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为<code class="fe mw mx my mz b">removeprefix()</code>和<code class="fe mw mx my mz b">removesuffix()</code>提供内置支持的另一个原因是，应用程序开发人员通常自己编写这个功能来提高他们的生产力。但是，在大多数情况下，它们在处理空字符串时会出错。所以，一个内置的解决方案对现实世界的应用非常有帮助。</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="5ef6" class="nh ni it bd nj nk nl nm nn no np nq nr ki ns kj nt kl nu km nv ko nw kp nx ny bi translated">标准集合中的类型提示泛型</h1><p id="35ef" class="pw-post-body-paragraph li lj it lk b ll nz kd ln lo oa kg lq lr ob lt lu lv oc lx ly lz od mb mc md im bi translated">您有没有注意到<code class="fe mw mx my mz b">typing</code>模块中重复的集合层次结构？</p><p id="9674" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，您可以使用<code class="fe mw mx my mz b">typing.List</code>或内置的<code class="fe mw mx my mz b">list</code>。因此，在Python 3.9中，核心开发团队决定在<code class="fe mw mx my mz b">typing</code>模块中增加对泛型语法的支持。该语法现在可以在该模块中可用的所有标准集合中使用。</p><p id="5c87" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这个特性的主要优点是现在用户可以很容易地注释他们的代码。它甚至有助于教师以更好的方式教授Python。</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="8de4" class="nh ni it bd nj nk nl nm nn no np nq nr ki ns kj nt kl nu km nv ko nw kp nx ny bi translated">添加了graphlib模块</h1><p id="7406" class="pw-post-body-paragraph li lj it lk b ll nz kd ln lo oa kg lq lr ob lt lu lv oc lx ly lz od mb mc md im bi translated">在图中，拓扑顺序在识别作业流中起着重要的作用。这意味着它遵循线性顺序来判断哪个任务将在另一个任务之前运行。</p><p id="81c6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe mw mx my mz b">graphlib</code>模块使我们能够对图形进行拓扑排序。它主要用于哈希节点。</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="ca8a" class="nh ni it bd nj nk nl nm nn no np nq nr ki ns kj nt kl nu km nv ko nw kp nx ny bi translated">Python 3.9中增强的模块</h1><p id="a105" class="pw-post-body-paragraph li lj it lk b ll nz kd ln lo oa kg lq lr ob lt lu lv oc lx ly lz od mb mc md im bi translated">在我看来，主要的努力发生在改进现有模块的时候。您可以通过更新35个模块的庞大列表来评估这一点，以优化Python编程语言。</p><p id="8c4d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">一些最重要的变化发生在<code class="fe mw mx my mz b">gc</code>、<code class="fe mw mx my mz b">http</code>、<code class="fe mw mx my mz b">imaplib</code>、<code class="fe mw mx my mz b">ipaddress</code>、<code class="fe mw mx my mz b">math</code>、<code class="fe mw mx my mz b">os</code>、<code class="fe mw mx my mz b">pydoc</code>、<code class="fe mw mx my mz b">random</code>、<code class="fe mw mx my mz b">signal</code>、<code class="fe mw mx my mz b">socket</code>、<code class="fe mw mx my mz b">time</code>和<code class="fe mw mx my mz b">sys</code>模块内部。</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="901f" class="nh ni it bd nj nk nl nm nn no np nq nr ki ns kj nt kl nu km nv ko nw kp nx ny bi translated">功能已弃用</h1><p id="1154" class="pw-post-body-paragraph li lj it lk b ll nz kd ln lo oa kg lq lr ob lt lu lv oc lx ly lz od mb mc md im bi translated">在Python版中，约有16项功能被弃用。详细信息可以从<a class="ae lh" href="https://docs.python.org/3.9/whatsnew/3.9.html#deprecated" rel="noopener ugc nofollow" target="_blank">官方Python 3.9公告</a>中获取。在这里，我将试着给你一个最重要的东西被否决的简要概述。</p><p id="f461" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果你曾经使用过<code class="fe mw mx my mz b">random</code>模块，那么你可能知道它可以接受任何可散列类型作为种子值。这可能会产生意想不到的后果，因为无法保证哈希值是否具有确定性。这就是为什么开发人员决定只接受None、int、float、str、bytes和bytearray作为种子值。</p><p id="7d8e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">另外，从现在开始，你必须指定<code class="fe mw mx my mz b">mode</code>参数来打开一个<code class="fe mw mx my mz b">GzipFile</code>文件进行写入。</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="8163" class="nh ni it bd nj nk nl nm nn no np nq nr ki ns kj nt kl nu km nv ko nw kp nx ny bi translated">移除了什么？</h1><p id="d57e" class="pw-post-body-paragraph li lj it lk b ll nz kd ln lo oa kg lq lr ob lt lu lv oc lx ly lz od mb mc md im bi translated">在Python以前的版本中，总共有21个不推荐使用的特性现在已经完全从语言中删除了。你可以在<a class="ae lh" href="https://docs.python.org/3.9/whatsnew/3.9.html#removed" rel="noopener ugc nofollow" target="_blank"> Python的网站</a>上看到完整的列表。</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><p id="63ff" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">感谢阅读！</p></div></div>    
</body>
</html>