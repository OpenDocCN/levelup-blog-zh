<html>
<head>
<title>Clean Up That Code with Switch Statements</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Switch语句清理代码</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/switch-statements-to-the-rescue-ea5002146968?source=collection_archive---------4-----------------------#2021-05-24">https://levelup.gitconnected.com/switch-statements-to-the-rescue-ea5002146968?source=collection_archive---------4-----------------------#2021-05-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/ee415f597f930561c430706b2a755d2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kSCs_STi3SXDZ__q26ejwQ.jpeg"/></div></div></figure><div class=""/><p id="69b7" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在我的上一篇文章中，我做了一个<strong class="ke jf">模块化的</strong>加电系统，这样我所有的加电系统可以共享<strong class="ke jf">一个</strong>脚本。我通过给每个加电分配一个<strong class="ke jf"> ID </strong>号来完成这个任务，然后运行一系列<strong class="ke jf"> if-else </strong>语句来检查发生<strong class="ke jf">冲突</strong>时加电的ID号。当其各自的加电被玩家收集<strong class="ke jf">时，每个不同的ID号将向玩家脚本发送<strong class="ke jf">不同的</strong>消息。这是我停下来的地方。</strong></p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi la"><img src="../Images/f19bf7dbccda8e737ba25cfbb7b0a3b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yB_QCOqY06ETAJMQxyPWlw.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">通电ID变量</figcaption></figure><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lj"><img src="../Images/f35c8ce8e8d39761459da8ade07eb66b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wyQsuNJPxSpJPxKtKb0dgg.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">这发生在我的加电脚本中的OnTriggerEnter2D方法中</figcaption></figure><p id="cd0d" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">只加几次电，这真的不算太坏。你能想象如果我有五十次通电，这一系列if-else检查会是什么样子吗？这听起来像一个冗长的混乱。</p><p id="cf33" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">将这些<strong class="ke jf"> if-else </strong>语句转换成一个<strong class="ke jf"> switch </strong>语句将真正清理我的脚本，并使得在开发阶段后期添加新的加电更加容易。我首先打开一个基本的<strong class="ke jf">开关</strong>语句，引用<strong class="ke jf">加电ID </strong>变量。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/afbe23df01c869ea55aa2bf7fa34f241.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*zSsN4yvE3iEdylbcgI4UyA.png"/></div></figure><p id="f949" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在switch语句中，你使用一个叫做<strong class="ke jf"> case </strong>的东西，case之间需要关键字<strong class="ke jf"> break </strong>。这个案例还需要一个数字来<strong class="ke jf">引用</strong>它所代表的<strong class="ke jf">加电</strong>，所以我从<strong class="ke jf">零</strong>开始我的三连拍。<strong class="ke jf">在</strong>我的case和break关键字之间，我可以向<strong class="ke jf">玩家</strong>发送消息，让<strong class="ke jf">激活</strong>三击，就像在<strong class="ke jf"> if-else </strong>语句中一样。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ll"><img src="../Images/62d5cc540f4d2ffe2bb89c9864db062d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B3RF5EQtM-5KM5FElw9Ldw.png"/></div></div></figure><p id="ef3b" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">Switch语句还采用了<strong class="ke jf">默认</strong>的情况，如果玩家收到ID <strong class="ke jf">在指定范围</strong>之外的加电，就会触发该情况。在这种情况下，这将是一个<strong class="ke jf">错误</strong>，所以我选择发送一个<strong class="ke jf">调试。LogError </strong>向控制台发送消息，让我知道在加电碰撞时触发了一些<strong class="ke jf">意外的</strong>。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/1486f015f5989f2eafda92ac45a6f160.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_WTDVp07xcDgUu76Dd7RlQ.png"/></div></div></figure><p id="4765" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">我现在可以在<strong class="ke jf">中增加一个</strong>和<strong class="ke jf">两个</strong>用于我的速度提升和屏蔽<strong class="ke jf">加电</strong>。我还没有在我的播放器脚本中设置这些消息的方法，但是我仍然可以通过发送一些<strong class="ke jf">调试</strong>消息来<strong class="ke jf">测试</strong>连接。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/4fbc0545c315322aa648bb0b1d910151.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UAXSRgmwx5OGhzKSjl-RFw.png"/></div></div></figure></div><div class="ab cl lm ln hx lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="im in io ip iq"><p id="d016" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">我在我的玩家脚本中实现了一些速度和护盾增强的逻辑，我将在接下来的两篇文章中介绍。为了继续讨论switch语句的主题，我将直接跳回到下面的powerup脚本。</p></div><div class="ab cl lm ln hx lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="im in io ip iq"><p id="3ff7" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">现在我的播放器脚本已经为来自加电脚本的<strong class="ke jf">输入</strong>做好了准备，我可以在我的加电脚本中修改我的<strong class="ke jf">开关</strong>语句中的调试行来激活正确的方法。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/36cd69adca37f46c48db0c1d9f7b5fc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w-MJidMVpBUJ4FhJYRY9Hg.png"/></div></div></figure><p id="24d2" class="pw-post-body-paragraph kc kd je ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">一切基本上和以前一样工作，只是有了更清晰的设计和更流畅的设计，这将帮助我在游戏中加入更多的能量。</p></div></div>    
</body>
</html>