<html>
<head>
<title>A Dead Simple Guide to Using Environment Variables in Your Front End with Webpack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Webpack前端使用环境变量的简单指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-dead-simple-guide-to-using-environment-variables-in-your-front-end-with-webpack-5765ce7a6fd8?source=collection_archive---------0-----------------------#2022-04-02">https://levelup.gitconnected.com/a-dead-simple-guide-to-using-environment-variables-in-your-front-end-with-webpack-5765ce7a6fd8?source=collection_archive---------0-----------------------#2022-04-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/d626c164de74a0c75e9a7f83f3cb6d96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iHC1xT0RGYYSMCh2RX8Kww.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">生产和开发环境通常需要各自的环境变量。图片来源:<a class="ae jd" href="https://www.pexels.com/@olia-danilevich/" rel="noopener ugc nofollow" target="_blank">Pexels.com奥利雅·达尼莱维奇</a></figcaption></figure><div class=""/><p id="4f91" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">如果你在React应用中使用API，你很有可能需要使用环境变量来隐藏敏感信息和区分开发模式。</strong></p><p id="37c5" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我不会深入环境变量的细节，因为已经有很多关于使用它们的文章了，但是如果你是使用Create React App的<strong class="kf jh"> <em class="lb">而不是</em> </strong> <em class="lb"> </em>，我将概述一个在你的前端使用它们的<strong class="kf jh">两步过程</strong>。</p><p id="0d7e" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我之所以说如果你<em class="lb">没有</em>使用Create React App，是因为如果你使用了，Create React App <a class="ae jd" href="https://create-react-app.dev/docs/adding-custom-environment-variables/#referencing-environment-variables-in-the-html" rel="noopener ugc nofollow" target="_blank">有一个使用它们的内置方法</a>。您可以简单地在根文件夹中创建一个. env文件，然后像这样输入您的密钥:</p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="8416" class="ll lm jg lh b gy ln lo l lp lq">REACT_APP_MY_SECRET_API_KEY="key123"</span></pre><p id="46c0" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您将代码引用为:</p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="4d2f" class="ll lm jg lh b gy ln lo l lp lq">process.env.CREATE_REACT_APP_MY_SECRET_API_KEY</span></pre><blockquote class="lr"><p id="54c7" class="ls lt jg bd lu lv lw lx ly lz ma la dk translated">但是如果我没有使用Create React App呢？</p></blockquote><p id="e9d6" class="pw-post-body-paragraph kd ke jg kf b kg mb ki kj kk mc km kn ko md kq kr ks me ku kv kw mf ky kz la ij bi translated">如果您正在阅读这篇文章，您可能正在进行一个项目，需要在前端使用环境变量，但不知道应该如何做。</p><h2 id="c808" class="ll lm jg bd mg mh mi dn mj mk ml dp mm ko mn mo mp ks mq mr ms kw mt mu mv mw bi translated">使用节点包<a class="ae jd" href="https://www.npmjs.com/package/dotenv-webpack" rel="noopener ugc nofollow" target="_blank"> dotenv-webpack </a>我们可以访问我们的。env文件很容易从前端。</h2><h2 id="6572" class="ll lm jg bd mg mh mi dn mj mk ml dp mm ko mn mo mp ks mq mr ms kw mt mu mv mw bi translated">第一步</h2><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="f4d2" class="ll lm jg lh b gy ln lo l lp lq">npm install dotenv-webpack --save-dev</span></pre><h2 id="caa4" class="ll lm jg bd mg mh mi dn mj mk ml dp mm ko mn mo mp ks mq mr ms kw mt mu mv mw bi translated">第二步</h2><p id="18a3" class="pw-post-body-paragraph kd ke jg kf b kg mx ki kj kk my km kn ko mz kq kr ks na ku kv kw nb ky kz la ij bi translated">在webpack.config.json文件中:</p><figure class="lc ld le lf gt is"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h2 id="da96" class="ll lm jg bd mg mh mi dn mj mk ml dp mm ko mn mo mp ks mq mr ms kw mt mu mv mw bi translated">确保“系统变量”设置为真</h2><p id="3988" class="pw-post-body-paragraph kd ke jg kf b kg mx ki kj kk my km kn ko mz kq kr ks na ku kv kw nb ky kz la ij bi translated"><em class="lb">更多详情请见下文。</em></p><p id="a511" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">仅此而已。</p><p id="27bd" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无需任何额外的代码，您的。env文件在前端可以像在后端一样被访问:</p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="3fc1" class="ll lm jg lh b gy ln lo l lp lq">process.env.MY_SECRET_API_KEY</span></pre><p id="d0b9" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">确保在修改您的。环境文件。</p><p id="1583" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">也记得添加你的。环境文件到。gitignore和在生产环境中配置环境变量。</p><h2 id="13ec" class="ll lm jg bd mg mh mi dn mj mk ml dp mm ko mn mo mp ks mq mr ms kw mt mu mv mw bi translated">示例1</h2><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="6c89" class="ll lm jg lh b gy ln lo l lp lq">console.log(process.env.MY_SECRET_API_KEY) // 'key123'</span></pre><h2 id="7f28" class="ll lm jg bd mg mh mi dn mj mk ml dp mm ko mn mo mp ks mq mr ms kw mt mu mv mw bi translated">示例2</h2><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="5a5a" class="ll lm jg lh b gy ln lo l lp lq">const myReactComponent = () =&gt; {</span><span id="6673" class="ll lm jg lh b gy ne lo l lp lq">const key = process.env.MY_SECRET_KEY</span><span id="5bb6" class="ll lm jg lh b gy ne lo l lp lq">return (<br/>&lt;p&gt;<br/>Hello, my key is {key}.<br/>&lt;/p&gt;<br/>)<br/>}</span></pre></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><h1 id="bcd3" class="nm lm jg bd mg nn no np mj nq nr ns mm nt nu nv mp nw nx ny ms nz oa ob mv oc bi translated">结论</h1><p id="f112" class="pw-post-body-paragraph kd ke jg kf b kg mx ki kj kk my km kn ko mz kq kr ks na ku kv kw nb ky kz la ij bi translated">最近，我使用我参加的编码训练营提供的样板代码启动了一个React项目。当需要在React组件中使用环境变量时，我很难找到解决方案。</p><p id="9d55" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">解决方案通常假设读者正在使用Create React应用程序。另外，我发现这个问题的其他解决方案过于复杂，或者是针对稍微不同的问题，比如在webpack.config.json 文件中使用环境变量<em class="lb">，并且不能被前端的其他文件访问。我经常出错:</em></p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="1c3e" class="ll lm jg lh b gy ln lo l lp lq">process.env.MY_SECRET_KEY // error: process is not defined</span></pre><p id="e352" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">找到dotenv-webpack是我一直在寻找的简单解决方案，但我发现它的说明不是非常清楚。例如:</p><blockquote class="od oe of"><p id="d2a4" class="kd ke lb kf b kg kh ki kj kk kl km kn og kp kq kr oh kt ku kv oi kx ky kz la ij bi translated">“system vars:true；//加载所有预定义的“process.env”变量，这些变量将根据dotenv规范胜过任何本地变量。</p><p id="f1f3" class="kd ke lb kf b kg kh ki kj kk kl km kn og kp kq kr oh kt ku kv oi kx ky kz la ij bi translated">—<a class="ae jd" href="https://www.npmjs.com/package/dotenv-webpack" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/dotenv-webpack</a></p></blockquote><p id="00cc" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果这对你有意义，请不要犹豫在评论区阐明它的意思。我个人认为上述措辞令人困惑。我偶然发现systemvars需要设置为true。False是默认设置。</p><p id="1acb" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望这篇文章尽可能简单地在您的前端使用环境变量。</p><p id="b2d1" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请随意联系:</p><div class="ip iq gp gr ir oj"><a href="https://www.linkedin.com/in/jeffreylwood/" rel="noopener  ugc nofollow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd jh gy z fp oo fr fs op fu fw jf bi translated">杰弗里·伍德，美国纽约布鲁克林| LinkedIn</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">我于2019年来到纽约市，在纽约艺术学院读研究生。在那里的时候，我帮助…</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">www.linkedin.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox ix oj"/></div></div></a></div><div class="ip iq gp gr ir oj"><a href="https://github.com/JeffreyLWood" rel="noopener  ugc nofollow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd jh gy z fp oo fr fs op fu fw jf bi translated">杰弗里·伍德</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">我是杰夫，刚刚从纽约艺术学院(艺术硕士绘画2021)和富斯塔克学院(网络…</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">github.com</p></div></div><div class="os l"><div class="oy l ou ov ow os ox ix oj"/></div></div></a></div></div></div>    
</body>
</html>