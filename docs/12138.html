<html>
<head>
<title>Front-End Code Can Run on the Back-End Now?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">前端代码现在可以在后端运行了？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/wintercg-community-is-officially-established-front-end-code-can-run-on-the-back-end-now-760174894978?source=collection_archive---------13-----------------------#2022-05-17">https://levelup.gitconnected.com/wintercg-community-is-officially-established-front-end-code-can-run-on-the-back-end-now-760174894978?source=collection_archive---------13-----------------------#2022-05-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0405" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">它能实现“一次编写，随处运行”吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3ca49dbf7a395a8906bbe1b5e339aeec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gnOC4tSuL_QBaYpA"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@hdbernd?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Bernd Dittrich </a>拍摄的照片</figcaption></figure><p id="cb8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最近<a class="ae ky" href="http://www.cloudflare.com/" rel="noopener ugc nofollow" target="_blank"> Cloudflare </a>在其官方博客上宣布，它与Vercel、Shopify以及Node.js和Deno的个人核心贡献者合作，正式推出了一个新的社区团体——winter CG。它的全称是<strong class="lb iu"> Web互操作运行时社区组</strong>，专注于标准化web APIs在非Web浏览器、基于JavaScript的开发环境中的互操作实现。</p><p id="fb7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么JavaScript真的可以“一次编写，随处运行”吗？</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="92d1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">他们想解决什么问题？</h1><p id="1a29" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在Cloudflare Workers这样的无服务器环境中，或者在Node.js和Deno这样的运行时环境中，许多要求与web浏览器环境中的相同。例如这些API:<a class="ae ky" href="https://fetch.spec.whatwg.org/" rel="noopener ugc nofollow" target="_blank">fetch()</a>，<a class="ae ky" href="https://streams.spec.whatwg.org/" rel="noopener ugc nofollow" target="_blank"> ReadableStream和WritableStream </a>，<a class="ae ky" href="https:%20//url.spec.whatwg.org/" rel="noopener ugc nofollow" target="_blank"> URL </a>等。</p><p id="efb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.w3.org/" rel="noopener ugc nofollow" target="_blank"> W3C </a>和<a class="ae ky" href="https://whatwg.org/" rel="noopener ugc nofollow" target="_blank"> Web超文本应用技术工作组</a>(或WHATWG)的主要目标是为Web浏览器环境提供标准化API的制定和维护。并且那些非浏览器运行时已经实现了它们自己的定制的、特别的解决方案。这导致开发人员在切换环境时要密切关注它们。</p><p id="8955" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以新成立的WinterCG将试图改变这种状况。它们提供了一个场所来讨论和倡导所有web环境的共同需求，部署在整个堆栈的任何地方。</p><h1 id="df61" class="mc md it bd me mf na mh mi mj nb ml mm jz nc ka mo kc nd kd mq kf ne kg ms mt bi translated">对我们开发者有什么好处？</h1><p id="f9cd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">虽然Cloudflare Workers、Node.js、Deno和web浏览器互不相同，但它们共享许多共同的功能。例如，它们都提供了发送HTTP请求的能力，它们都提供了用于生成加密散列的API，等等。</p><p id="42c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想象一下，如果他们都为此实现了相同的通用标准，那么当迁移到不同的环境时，开发人员根本不需要重写它来保持做完全相同的事情。</p><p id="27f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以我们开发人员只需要关心我们编写的代码能正常运行，不管代码在哪里运行。这意味着在浏览器中正常运行的JavaScript代码可以迁移到后端代码中正常运行。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/cbc7b1c257abf6216c8c7aa79d779306.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*clxyynK2iBlJkYWP"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@maltehelmhold?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马尔特·赫尔姆霍尔德</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="6ff2" class="mc md it bd me mf na mh mi mj nb ml mm jz nc ka mo kc nd kd mq kf ne kg ms mt bi translated">他们要做什么？</h1><p id="0fee" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">WinterCG不打算发布自己的一套独立的标准API。WinterCG产生的新规范的想法被提交到W3C和WHATWG的现有工作流中进行考虑。如果Web浏览器对新规范没有特别的需求和兴趣，WinterCG将被授权推进自己的规范，但这些规范不会对已建立的Web标准产生任何影响。</p><p id="c4ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以对于我们这些开发者来说，学习成本会更低。</p><h1 id="7088" class="mc md it bd me mf na mh mi mj nb ml mm jz nc ka mo kc nd kd mq kf ne kg ms mt bi translated">他们目前的工作进展如何？</h1><p id="b917" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">他们目前从事的工作包括:</p><h2 id="02cc" class="ng md it bd me nh ni dn mi nj nk dp mm li nl nm mo lm nn no mq lq np nq ms nr bi translated">最低通用Web API</h2><blockquote class="ns nt nu"><p id="13ae" class="kz la mz lb b lc ld ju le lf lg jx lh nv lj lk ll nw ln lo lp nx lr ls lt lu im bi translated">“最小通用web平台API是标准化Web平台API的精选子集，旨在定义基于浏览器和非浏览器JavaScript的运行时环境的最小通用功能集。”</p></blockquote><p id="d811" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是来自<a class="ae ky" href="https://common-min-api.proposal.wintercg.org/#intro" rel="noopener ugc nofollow" target="_blank">草案规范</a>中的介绍。换句话说，这些API是现有web APIs的最小集合，将在Node.js、Deno和Cloudflare Workers中一致且正确地实现。</p><p id="ebf4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个列表包含了我们常见的<a class="ae ky" href="https://dom.spec.whatwg.org/#event" rel="noopener ugc nofollow" target="_blank">事件</a>，<a class="ae ky" href="https://url.spec.whatwg.org/#url" rel="noopener ugc nofollow" target="_blank"> URL </a>，globalThis。<a class="ae ky" href="https://html.spec.whatwg.org/multipage/window-object.html#dom-self" rel="noopener ugc nofollow" target="_blank"> self </a>，globalThis。<a class="ae ky" href="https://console.spec.whatwg.org/#namespacedef-console" rel="noopener ugc nofollow" target="_blank">控制台</a>，globalThis.navigator. <a class="ae ky" href="https://html.spec.whatwg.org/multipage/system-state.html#dom-navigator-useragent" rel="noopener ugc nofollow" target="_blank">用户代理</a>，globalThis。<a class="ae ky" href="https://html%20.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-settimeout" rel="noopener ugc nofollow" target="_blank">setTimeout()</a>/global this。<a class="ae ky" href="https://html.spec.whatwg.org/multipage/timers-and-%20user-prompts.html#dom-cleartimeout" rel="noopener ugc nofollow" target="_blank"> clearTimeout() </a>，globalThis。<a class="ae ky" href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-setinterval" rel="noopener ugc nofollow" target="_blank">setInterval()</a>/global this。<a class="ae ky" href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-clearinterval" rel="noopener ugc nofollow" target="_blank"> clearInterval() </a>以此类推。更多细节可以在这里找到<a class="ae ky" href="https://common-min-api.proposal.wintercg.org/#index" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="edd9" class="ng md it bd me nh ni dn mi nj nk dp mm li nl nm mo lm nn no mq lq np nq ms nr bi translated">网络加密流</h2><p id="ade8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">浏览器中的<a class="ae ky" href="https://www.w3.org/TR/WebCryptoAPI/" rel="noopener ugc nofollow" target="_blank">网络加密API </a>不支持对称加密算法的流式输入和输出。这严重限制了加密操作的性能和可扩展性。所以WinterCG已经开始为网络加密流起草新的规范，该规范将提交给W3C考虑。目标是以符合现有标准的方式将流加密操作带到整个网络，包括网络浏览器。</p><h2 id="e09e" class="ng md it bd me nh ni dn mi nj nk dp mm li nl nm mo lm nn no mq lq np nq ms nr bi translated">服务器fetch()的子集</h2><p id="cb18" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Node.js在<code class="fe ny nz oa ob b">18.x</code>提供了WHATWG标准化fetch() API的实现。然而，这些非浏览器运行时和web浏览器实现fetch()的方式有很大的不同(例如，没有CORS跨源验证，等等)。).</p><p id="4aaa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此很难就fetch标准达成共识，因此WinterCG正在为这些不同的需求和约束制定fetch标准的子集。这个子集将与浏览器环境的fetch标准完全兼容，并且它还将作为如何在这些非浏览器环境中正确实现fetch的文档指南。</p><h1 id="af44" class="mc md it bd me mf na mh mi mj nb ml mm jz nc ka mo kc nd kd mq kf ne kg ms mt bi translated">结论</h1><p id="2eb2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">新的<a class="ae ky" href="https://github.com/wintercg" rel="noopener ugc nofollow" target="_blank"> Web互操作运行时社区组</a>(或“WinterCG”)试图实现的关键目标是最大化“Web互操作性”。这意味着以一种<em class="mz">相同或者至少尽可能一致的方式</em>实现特性，这种方式与那些特性在web浏览器中的实现方式相同。</p><p id="a365" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些JavaScript运行时环境之间存在某些差异，这些差异也会影响标准化API的设计决策。例如，在后端环境中，没有CORS跨源机制和对本地文件系统的访问限制。所以我觉得有一小部分重叠的功能需求可能会被直接重用和实现，那些冲突的地方可能会被精心设计。</p><p id="819a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但无论如何，对于我们这些开发者来说，我们写的JavaScript移植性更强，平台迁移成本更低。这无疑给JavaScript增添了新的活力。你觉得怎么样？</p><h1 id="6f00" class="mc md it bd me mf na mh mi mj nb ml mm jz nc ka mo kc nd kd mq kf ne kg ms mt bi translated">参考</h1><p id="3912" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">[1]https://wintercg.org/<a class="ae ky" href="https://wintercg.org/" rel="noopener ugc nofollow" target="_blank"/></p><p id="8c72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[2]<a class="ae ky" href="https://wintercg.org/" rel="noopener ugc nofollow" target="_blank">https://blog.cloudflare.com/introducing-the-wintercg/</a></p><p id="a07a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.w3.org/community/wintercg/" rel="noopener ugc nofollow" target="_blank">https://www.w3.org/community/wintercg/</a></p><p id="a5ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://deno.com/blog/announcing-wintercg" rel="noopener ugc nofollow" target="_blank">https://deno.com/blog/announcing-wintercg</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="5110" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mz">感谢阅读。如果你喜欢这样的故事，想支持我，请考虑成为</em> <a class="ae ky" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="mz">中会员</em> </a> <em class="mz">。每月5美元，你可以无限制地访问媒体内容。如果你通过</em> <a class="ae ky" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="mz">我的链接</em> </a> <em class="mz">报名，我会得到一点佣金。</em></p><p id="9ba1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的支持对我来说很重要——谢谢。</p></div></div>    
</body>
</html>