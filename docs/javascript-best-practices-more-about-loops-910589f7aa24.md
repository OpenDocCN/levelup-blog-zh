# JavaScript 最佳实践—循环流控制

> 原文：<https://levelup.gitconnected.com/javascript-best-practices-more-about-loops-910589f7aa24>

![](img/6a2bbf327eacb3b64cf1691e883e2a36.png)

由[夏洛特·康尼比尔](https://unsplash.com/@she_sees?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

JavaScript 是一种非常宽容的语言。编写可以运行但有错误的代码很容易。

在本文中，我们将研究编写循环的最佳实践，特别是如何在循环中控制流控制。

# 使循环终止条件显而易见

为了使我们的代码更容易阅读，我们应该使循环终止条件显而易见。

如果我们有一个`for`循环，我们不应该使用`break`来结束循环。这是因为我们在循环的顶部已经有了一个结束条件。

我们可能想要使用这些来进行一个`while`循环，因为我们必须通过设置一个标志或者使用`break`来显式地在循环体内结束循环。

# 不要弄乱 for 循环的循环索引来终止循环

不应该在`for`循环中修改循环计数器。

因此，我们不应该将循环索引设置为大于结束索引来停止循环。

如果我们想要更多的灵活性，我们应该使用一个`while`循环来代替。

# 避免依赖于循环索引最终值的代码

我们不应该在循环之外使用循环索引的最终值。

我们可能不知道最终值是什么，即使我们知道，使用它们也是不好的，因为我们不知道在循环之外变量会发生什么。

# 考虑使用安全计数器

安全计数器防止我们运行太多的循环迭代。

例如，如果我们不想让一个循环运行超过 100 次迭代，我们可以写:

```
while (node) {
  if (i === 100) {
    break;
  }
  //...  
  node = node.nex;
  i++;
}
```

在上面的代码中，如果我们遍历一个列表超过 100 次，那么我们结束`while`循环。

这样，如果列表是循环的，我们就不会得到一个可能永远运行的循环。

# 考虑在 while 循环中使用 break 语句而不是布尔标志

为了结束一个`while`循环，我们可能还想使用`break`语句来结束它。

这比将布尔标志赋给不同的值更容易。

例如，我们可以编写以下内容:

```
while (condition) {
  if (end) {
    break;
  }
  //...  
  i++;
}
```

那么我们就不必担心将`condition`赋值给错误的东西来结束循环。

# 小心一个有许多分散断点的循环

我们拥有的语句越多，我们需要阅读和理解的就越多。

因此，我们应该尽量少用`break`，即使我们可以用它来结束循环。

此外，我们不想将`switch`语句中的`break`与打破循环的语句混淆，所以我们应该将`switch`语句排除在循环体之外。

# 使用“继续”跳到下一个迭代

我们可以使用`continue`语句跳到循环的下一次迭代。

例如，如果我们有:

```
for (let i = 0; i < 10; i++) {
  if (i === 5) {
    continue;
  }
  //..
}
```

在上面的代码中，当`i`为 5 时，我们用`continue`语句跳过循环体。

# 小心使用 break 和 continue

正如我们在上一节提到的，我们不应该频繁使用`break`。

这与`continue`语句相同。

太频繁地使用它们很容易被滥用。他们很难理解。

如果我们有太多的条件需要结束循环，那么这个循环可能做得太多了。

![](img/c2674516a43abf928ec48c32c936bc5d.png)

照片由[克劳德·里士满](https://unsplash.com/@crichmond?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

# 检查端点

我们应该确保我们检查了一个接一个的错误，这样我们在运行循环的时候就不会碰到它们。

如果我们的循环进行复杂的计算，那么我们应该检查它们以确保它们正常工作。

对我们的大脑来说很难的心理模拟应该在纸上完成。

# 对数组和循环都使用整数作为限制

数组索引必须是整数，所以如果我们用一个`for`循环遍历一个循环，那么我们也应该对循环索引变量使用整数。

否则，我们可能得不到我们想要的数组元素。

# 结论

我们应该确保使用整数索引进行循环，以避免遇到意外问题。

同样，我们不应该频繁使用`break`和`continue`来使我们的代码更容易理解。

安全计数器也可以方便地防止运行太多迭代的循环。