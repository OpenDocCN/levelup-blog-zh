<html>
<head>
<title>React Custom Hooks #3: useToggle and useBoolean</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React自定义钩子#3: useToggle和useBoolean</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/react-custom-hooks-3-usetoggle-and-useboolean-af842c5b8b47?source=collection_archive---------8-----------------------#2021-08-22">https://levelup.gitconnected.com/react-custom-hooks-3-usetoggle-and-useboolean-af842c5b8b47?source=collection_archive---------8-----------------------#2021-08-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="e7b9" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">REACT HOOKS食谱</h2><div class=""/><div class=""><h2 id="f754" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用这些定制挂钩改进您有条件地呈现React组件的方式。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/755874832332384c45b893ded47c3f9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ewl6XB--HaxsrLl0tpcNNA.png"/></div></div></figure><p id="993e" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">React最受欢迎的方面之一是它允许有条件地呈现组件和单个元素。这个特性，以及其他许多特性，使得这个库成为JavaScript生态系统中最受欢迎的。</p><p id="21e8" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">因为我们把所有的条件建立在真和假的基础上，所以我们经常重复一些常见的场景，在这些场景中，需要把一个布尔值转换成它的反义词，或者我们总是需要把一个标志转换成一个特定的值。</p><p id="327a" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">检查你的代码并告诉我:<strong class="lf jd">你是否在不同的组件上重复了很多代码</strong>。我想我们都知道答案，对吧？</p><p id="001e" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这就是为什么用几行代码就可以抽象出几个定制的钩子，使我们的组件可读性更好。这就是为什么<strong class="lf jd"> useToggle </strong>和<strong class="lf jd"> useBoolean </strong>成为我最喜欢的React定制钩子！</p><h2 id="d07e" class="lz ma it bd mb mc md dn me mf mg dp mh lm mi mj mk lq ml mm mn lu mo mp mq iz bi translated">完美的用例:模态组件</h2><p id="d2db" class="pw-post-body-paragraph ld le it lf b lg mr kd li lj ms kg ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">模态是任何现代web应用程序中常用的组件，它们适用于通知和与用户的交流。</p><p id="6c17" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在技术行为下，它们通常需要被打开、关闭，当点击一个按钮时，我们可能想要切换它们在屏幕上的外观。</p><p id="8974" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">看看这个例子，记住我们是如何处理创建各种处理程序的模态的，我们稍后会需要它来进行比较。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mw"><img src="../Images/485d066ff348c0e7a28280e31913d4af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*enFkwj50aIMoCFUWRLsSnA.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">模态分量的使用</figcaption></figure><p id="0265" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">你知道<code class="fe nb nc nd ne b">openModal</code>和<code class="fe nb nc nd ne b">closeModal</code>的处理程序吗？现在想象一下，你必须在不同的页面上使用一个模态，并通过不同于简单按钮的UI交互来控制它的行为。</p><p id="0b78" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">你真的每次都要重写所有那些处理程序吗？不，谢谢！</p><h2 id="f8f1" class="lz ma it bd mb mc md dn me mf mg dp mh lm mi mj mk lq ml mm mn lu mo mp mq iz bi translated">使用开关</h2><p id="9ddc" class="pw-post-body-paragraph ld le it lf b lg mr kd li lj ms kg ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">我们需要创建的第一个定制钩子是<strong class="lf jd"> useToggle。</strong></p><p id="b068" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">它允许立即切换一个布尔值，而不需要为它创建一个函数。在大多数情况下，它对处理复选框组件、隐藏元素等非常有用，我认为它是处理条件呈现的基础。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="aed5" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">它使用<a class="ae nh" href="https://marcoghiani.com/blog/how-to-use-react-reducer-effectively" rel="noopener ugc nofollow" target="_blank"> <strong class="lf jd"> useReducer钩子</strong> </a> <strong class="lf jd"> </strong>来定义调度函数的实现，以便在被调用时切换到其相反的值。<br/>这种方法的好处是调度函数总是被记忆，所以你可以把它的引用传递给任何事件属性，而不用触发接收它的组件的重新呈现器。</p><p id="a9b6" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在本例中，您可以看到它是如何更清晰地实现隐藏元素的:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ni"><img src="../Images/4ec1a6258eca69afd2c6cf42efa1fb99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*COGolanLcQp7kKx-8VCFyw.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">使用useToggle重构切换特征</figcaption></figure><p id="44ac" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">也许我错了，但在我看来它非常干净，✨</p><h2 id="2a9f" class="lz ma it bd mb mc md dn me mf mg dp mh lm mi mj mk lq ml mm mn lu mo mp mq iz bi translated">使用布尔值</h2><p id="615b" class="pw-post-body-paragraph ld le it lf b lg mr kd li lj ms kg ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">既然useToggle钩子已经成为现实，并且我们知道如何使用它，useBoolean钩子将向我们展示为什么<strong class="lf jd"> <em class="nj">可组合性和可重用性是React范例</em> </strong>的支柱。</p><p id="da37" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">几分钟前，我们已经看到了模态组件的用法和所有必要的处理程序打开/关闭它。它基本上告诉我们，我们需要设置布尔值的所有可能的方法。这就是使用布尔钩子的目的。眼睛看着屏幕，让我们读一下实现:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="d740" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">与useToggle类似，它返回一个数组，该数组将值作为第一个元素，作为第二个参数，它返回一个对象，该对象包含允许设置布尔值的所有可能的处理程序:</p><ul class=""><li id="576b" class="nk nl it lf b lg lh lj lk lm nm lq nn lu no ly np nq nr ns bi translated"><strong class="lf jd">开:</strong>将布尔值切换到<em class="nj">真。</em></li><li id="66e4" class="nk nl it lf b lg nt lj nu lm nv lq nw lu nx ly np nq nr ns bi translated"><strong class="lf jd">关</strong>:将布尔切换到<em class="nj">假。</em></li><li id="021f" class="nk nl it lf b lg nt lj nu lm nv lq nw lu nx ly np nq nr ns bi translated"><strong class="lf jd"> toggle: </strong>同一个处理程序从useToggle调用返回。</li></ul><p id="fb28" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">正如你所看到的，我们重用了useToggle钩子来抽象一些内部逻辑，并且我们用<strong class="lf jd"> useMemo </strong>钩子包装了我们的处理程序，以便总是提供我们的处理程序的相同引用。</p><blockquote class="ny nz oa"><p id="9cd8" class="ld le nj lf b lg lh kd li lj lk kg ll ob ln lo lp oc lr ls lt od lv lw lx ly im bi translated"><strong class="lf jd"> N.B. </strong>在这里使用useMemo被认为是一种预优化，但是因为这个钩子的目的是作为库的一部分发布，所以我想为未来的用户提供最好的保证。与React对useState和useReducer分派函数所做的工作没有什么不同。</p></blockquote><p id="fba9" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">此时，我们得到了一个新的自定义钩子来处理我们的模态外观。是时候重构我以前的实现了，以提高它的可读性，并抽象出所有那些冗长的处理程序！</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oe"><img src="../Images/37a596935bd30b9d1f3b690a39046be4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QQWU1YBLE6jUFDY0M7M1nw.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">重构模态用法</figcaption></figure><p id="1219" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">就这样，清楚地描述了我们在应用程序内部管理的内容！您可能希望使用它的场景还有很多，这只是有条件地在屏幕上呈现某些内容时最常见的场景之一。</p></div><div class="ab cl of og hx oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="im in io ip iq"><h1 id="65f6" class="om ma it bd mb on oo op me oq or os mh ki ot kj mk kl ou km mn ko ov kp mq ow bi translated">结论</h1><p id="9b9f" class="pw-post-body-paragraph ld le it lf b lg mr kd li lj ms kg ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">有了这两个定制的钩子，你的反应技能和自信将会比以前增长得更快！</p><p id="fb65" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我希望它能对你有所帮助，如果你有任何疑问，我希望你能告诉我，你可以直接在<a class="ae nh" href="https://twitter.com/tonyghiani" rel="noopener ugc nofollow" target="_blank"> <strong class="lf jd"> Twitter </strong> </a>上联系我，或者在这里发表评论！</p><p id="621f" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">您还可以在以下页面找到更多关于我正在使用的资源的信息:</p><ul class=""><li id="d853" class="nk nl it lf b lg lh lj lk lm nm lq nn lu no ly np nq nr ns bi translated"><a class="ae nh" href="https://github.com/tonyghiani/mountain-ui" rel="noopener ugc nofollow" target="_blank"> <strong class="lf jd">山-ui </strong> </a></li><li id="2e28" class="nk nl it lf b lg nt lj nu lm nv lq nw lu nx ly np nq nr ns bi translated"><a class="ae nh" href="https://marcoghiani.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lf jd">我的个人页面</strong> </a></li></ul><p id="9554" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在这里你也可以找到这个系列以前的帖子！</p><div class="ox oy gp gr oz pa"><a href="https://marcoghiani.com/blog/react-custom-hooks-uselocalstorage" rel="noopener  ugc nofollow" target="_blank"><div class="pb ab fo"><div class="pc ab pd cl cj pe"><h2 class="bd jd gy z fp pf fr fs pg fu fw jc bi translated">React自定义钩子#1: useLocalStorage</h2><div class="ph l"><h3 class="bd b gy z fp pf fr fs pg fu fw dk translated">使用React在localStorage上创建简单的持久化数据，以保存用户首选项。图片由马可在我开始后…</h3></div><div class="pi l"><p class="bd b dl z fp pf fr fs pg fu fw dk translated">marcoghiani.com</p></div></div><div class="pj l"><div class="pk l pl pm pn pj po lb pa"/></div></div></a></div><div class="ox oy gp gr oz pa"><a href="https://marcoghiani.com/blog/react-custom-hooks-usefontsize" rel="noopener  ugc nofollow" target="_blank"><div class="pb ab fo"><div class="pc ab pd cl cj pe"><h2 class="bd jd gy z fp pf fr fs pg fu fw jc bi translated">React自定义钩子#2: useFontSize</h2><div class="ph l"><h3 class="bd b gy z fp pf fr fs pg fu fw dk translated">设置并使用一个全局CSS变量来改变页面的基本字体大小。图片由马可遵循第一…</h3></div><div class="pi l"><p class="bd b dl z fp pf fr fs pg fu fw dk translated">marcoghiani.com</p></div></div><div class="pj l"><div class="pp l pl pm pn pj po lb pa"/></div></div></a></div><p id="368d" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">感谢您花时间阅读，下一篇文章再见！🚀</p></div></div>    
</body>
</html>