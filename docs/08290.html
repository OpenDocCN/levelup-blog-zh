<html>
<head>
<title>How to store secretes on AWS?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在AWS上存储secretes？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-store-secretes-on-aws-3e2f5881cd5b?source=collection_archive---------14-----------------------#2021-04-18">https://levelup.gitconnected.com/how-to-store-secretes-on-aws-3e2f5881cd5b?source=collection_archive---------14-----------------------#2021-04-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f960" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">AWS SSM参数存储和机密管理器的使用快速概述</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9db904a8692efb8cbcc1ddd535f4842d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_gPqSzWn3Sg0rJiYlowbAA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com/s/photos/secrets?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@beemagic275?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">nguyễn·普克</a>拍摄的照片</figcaption></figure><p id="2f3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安全性是架构良好的云系统最重要的特性之一。将密码或其他机密数据直接存储在应用程序的代码中会产生严重的安全风险，并使机密管理更加困难。幸运的是，有一种更好的方法可以使用AWS轻松实现。机密数据可以在独立的系统中管理和加密，并通过API调用公开。有两种服务非常适合这项工作。两者都提供了一种可扩展且安全的数据管理方式，但在一些可用功能上有所不同。</p><p id="7670" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一个是<a class="ae ky" href="https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html" rel="noopener ugc nofollow" target="_blank"> AWS系统管理器参数存储库</a>。它利用KMS等其他AWS服务来提供加密功能，并利用IAM来实现细粒度的访问控制。它允许在标准层存储最多4096个字符的明文或加密数据，在高级层存储最多8192个字符。参数名也可以加上前缀，以提供额外的上下文，如应用程序名、环境或版本。</p><p id="f4a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们创建一些加密的秘密，允许我们的应用程序连接到数据库。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="359f" class="ma mb it lw b gy mc md l me mf">aws ssm put-parameter --cli-input-json \<br/>   '{<br/>        "Name": "/SampleApp/uat/db/postgres/password", <br/>        "Value": "secret-password", <br/>        "Type": "SecureString",<br/>        "Tags": [<br/>            {<br/>            "Key": "env",<br/>            "Value": "UAT"<br/>            },<br/>            {<br/>            "Key": "app",<br/>            "Value": "SampleApp"<br/>            }<br/>         ]<br/>    }'<br/>    <br/>aws ssm put-parameter --cli-input-json \<br/>   '{<br/>        "Name": "/SampleApp/uat/db/postgres/endpoint", <br/>        "Value": "secret-enpoint.net", <br/>        "Type": "SecureString",<br/>        "Tags": [<br/>            {<br/>            "Key": "env",<br/>            "Value": "UAT"<br/>            },<br/>            {<br/>            "Key": "app",<br/>            "Value": "SampleApp"<br/>            }<br/>         ]<br/>    }'</span><span id="5269" class="ma mb it lw b gy mg md l me mf">// Fetch paramaters    <br/>aws ssm get-parameters-by-path --path "/SampleApp/uat/db/postgres" --with-decryption</span></pre><p id="85c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们创建一个使用这些秘密的示例客户机</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mh mi l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="64a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">AWS Secrets Manager 就像服用了类固醇的SSM参数商店。它提供了非常相似的功能，但顾名思义，它是用来存储机密数据的，因此它实施了加密。此外，它内置了对许多数据库引擎的自动密码轮换的支持，或者可以触发我们自己的Lambda函数。它还可以自动生成安全密码。</p><p id="3816" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们使用秘密管理器创建一些秘密。为了简单起见，自动密码轮换将被禁用</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="58cb" class="ma mb it lw b gy mc md l me mf">aws secretsmanager create-secret  \<br/>    --name /SampleApp/uat/db/postgres/password \<br/>    --secret-string "secret-password" \<br/>    --tags Key=env,Value=UAT Key=app,Value=SampleApp<br/><br/>aws secretsmanager create-secret  \<br/>    --name /SampleApp/uat/db/postgres/endpoint \<br/>    --secret-string "secret-enpoint.net" \<br/>    --tags Key=env,Value=UAT Key=app,Value=SampleApp<br/>    <br/>aws secretsmanager list-secrets \<br/>    --filters Key=name,Values=/SampleApp/uat/db/postgres</span></pre><p id="d434" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用秘密管理器也非常简单</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mh mi l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="dda2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们想让一项服务为我们做更多繁重的工作，它必须付出代价。两者的价格都是每10，000个API调用0.05美元，但是秘密管理器也每月每个秘密收取0.40美元(SSM参数商店中的高级层也每月每个秘密收取0.05美元)</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><blockquote class="mq mr ms"><p id="5562" class="kz la mt lb b lc ld ju le lf lg jx lh mu lj lk ll mv ln lo lp mw lr ls lt lu im bi translated"><em class="it">完整的源代码可从这里获得:</em></p></blockquote><div class="mx my gp gr mz na"><a href="https://github.com/jkapuscik2/aws-secrets-demo" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd iu gy z fp nf fr fs ng fu fw is bi translated">jkapuscik 2/AWS-秘密-演示</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">在GitHub上创建一个帐户，为jkapuscik2/aws-secrets-demo开发做贡献。</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">github.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no ks na"/></div></div></a></div></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="0e26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">资源:</strong></p><div class="mx my gp gr mz na"><a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd iu gy z fp nf fr fs ng fu fw is bi translated">AWS系统管理器参数存储</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">AWS系统管理器参数存储(参数存储)为配置数据提供安全的分层存储…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">docs.aws.amazon.com</p></div></div><div class="nj l"><div class="np l nl nm nn nj no ks na"/></div></div></a></div><div class="mx my gp gr mz na"><a href="https://aws.amazon.com/secrets-manager/" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd iu gy z fp nf fr fs ng fu fw is bi translated">AWS机密管理器|旋转、管理、检索机密| Amazon Web Services (AWS)</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">在数据库凭证、API密钥和其他机密的整个生命周期中，轻松地轮换、管理和检索它们…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">aws.amazon.com</p></div></div><div class="nj l"><div class="nq l nl nm nn nj no ks na"/></div></div></a></div></div></div>    
</body>
</html>