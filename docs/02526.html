<html>
<head>
<title>Use collections wisely in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在JavaScript中明智地使用集合</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/use-collections-wisely-in-javascript-c1440f2ff595?source=collection_archive---------12-----------------------#2020-03-19">https://levelup.gitconnected.com/use-collections-wisely-in-javascript-c1440f2ff595?source=collection_archive---------12-----------------------#2020-03-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1351" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">原创-&gt;()--&gt;()--&gt;()--&gt;最终</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2bf1d9de21faa082df436fe28042a6a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*itFakHrbAmtyR__K"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@wocintechchat?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯蒂娜@ wocintechchat.com</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="de8f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">集合是用于存储值列表的数据结构。这些被称为数组、集合和映射。在JavaScript中，经常需要获取元素的集合，并对每个元素应用一些函数来映射每个元素、过滤元素、查找元素或以任何其他方式缩减原始数组。</p><p id="56b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对集合的操作主要有三类，分别是<code class="fe ls lt lu lv b">.map()</code>、<code class="fe ls lt lu lv b">.filter()</code>和<code class="fe ls lt lu lv b">.reduce()</code>。围绕这三个函数进行思考是编写干净、功能性代码的重要一步。</p><p id="2af1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设我们有一个包含多个对象的集合，每个对象代表一个<code class="fe ls lt lu lv b">developer</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><h1 id="61e4" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">地图图案</h1><p id="0a85" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">map模式将一个函数应用于集合中的每个元素，并返回一个包含每个函数应用结果的新集合。</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="a530" class="mz lz iq lv b gy na nb l nc nd">The complexity is <!-- -->O(n)</span></pre><p id="437f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，我们需要的是一个只包含每个<code class="fe ls lt lu lv b">developer</code>的<code class="fe ls lt lu lv b">birth year</code>的数组。</p><p id="5027" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">输入:</strong> <code class="fe ls lt lu lv b">an array of developers</code> <br/> <strong class="ky ir">输出:</strong> <code class="fe ls lt lu lv b">an array contains only birth years of developers</code></p><h2 id="9800" class="mz lz iq bd ma ne nf dn me ng nh dp mi lf ni nj mk lj nk nl mm ln nm nn mo no bi translated">简单的方法</h2><p id="d8fb" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">使用<code class="fe ls lt lu lv b">for()</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="e113" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用<code class="fe ls lt lu lv b">.forEach()</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><h2 id="f0d8" class="mz lz iq bd ma ne nf dn me ng nh dp mi lf ni nj mk lj nk nl mm ln nm nn mo no bi translated">最佳接近方式</h2><p id="03c3" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">如果我们想通过使用<code class="fe ls lt lu lv b">.map()</code>获得一组开发人员的出生年份，我们将编写以下代码(5行- &gt; 1行)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="0da4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">两种情况下的输出都是<code class="fe ls lt lu lv b">[ 1950, 1955, 1969, 1956, 1943 ]</code>。</p><h2 id="96d4" class="mz lz iq bd ma ne nf dn me ng nh dp mi lf ni nj mk lj nk nl mm ln nm nn mo no bi translated">如何写自己的？map()函数</h2><p id="d008" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated"><code class="fe ls lt lu lv b">.map()</code>函数可以通过递归实现。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><h1 id="b09f" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">过滤模式</h1><p id="eb7e" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated"><code class="fe ls lt lu lv b">filter</code>模式将一个谓词应用于集合中的每个元素，并返回一个新的集合，该集合包含为所提供的谓词返回true的元素。</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="d270" class="mz lz iq lv b gy na nb l nc nd">The complexity is <!-- -->O(n</span></pre><p id="a215" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们观察下面的情况。我们只想得到1950年以前出生的开发者。</p><p id="dbbf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">输入:</strong> <code class="fe ls lt lu lv b">an array of developers</code> <br/> <strong class="ky ir">输出:</strong> <code class="fe ls lt lu lv b">an array contains only developers to be born before 1950.</code></p><h2 id="f35e" class="mz lz iq bd ma ne nf dn me ng nh dp mi lf ni nj mk lj nk nl mm ln nm nn mo no bi translated">最好的方法</h2><p id="7436" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">使用<code class="fe ls lt lu lv b">.filter()</code>函数，我们将编写以下代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><h2 id="6051" class="mz lz iq bd ma ne nf dn me ng nh dp mi lf ni nj mk lj nk nl mm ln nm nn mo no bi translated">简单的方法</h2><p id="0249" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">而不是遵循命令式对等。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="04d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是输出。</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="88d7" class="mz lz iq lv b gy na nb l nc nd">[ <br/> { id: 1, name: 'Bjarne Stroustrup', born: 1950 },<br/> { id: 5, name: 'Ken Thompson', born: 1943 } <br/>]</span></pre><h2 id="31b6" class="mz lz iq bd ma ne nf dn me ng nh dp mi lf ni nj mk lj nk nl mm ln nm nn mo no bi translated">如何编写自己的<code class="fe ls lt lu lv b">.filter()</code>函数</h2><p id="68b8" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">我们可以使用递归来实现它:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><h1 id="70ed" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">减少模式</h1><p id="217a" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated"><code class="fe ls lt lu lv b">reduce</code>模式通过用户提供的函数依次组合每个元素，将集合转换为单个值。</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="f59a" class="mz lz iq lv b gy na nb l nc nd">The complexity is <!-- -->O(n)</span></pre><p id="850e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们收集了这些开发者和他们的出生年份。我们需要知道他们所有人的平均出生年份。</p><p id="a2ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">输入:</strong>T2<br/>T14】输出:T3】</p><h2 id="11a1" class="mz lz iq bd ma ne nf dn me ng nh dp mi lf ni nj mk lj nk nl mm ln nm nn mo no bi translated">最好的方法</h2><p id="9a54" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">使用<code class="fe ls lt lu lv b">.reduce()</code>，非常简单:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><h2 id="3c41" class="mz lz iq bd ma ne nf dn me ng nh dp mi lf ni nj mk lj nk nl mm ln nm nn mo no bi translated">简单的方法</h2><p id="31d4" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">与此相比。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="c7d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">平均出生年份为<code class="fe ls lt lu lv b">1954.6</code>。</p><h2 id="f275" class="mz lz iq bd ma ne nf dn me ng nh dp mi lf ni nj mk lj nk nl mm ln nm nn mo no bi translated">如何写自己的？reduce()函数？</h2><p id="ec81" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">我们可以定义其他必要的实用函数来帮助处理JS中的数组，比如find和reduce。请用你的方式在这里分享。</p><h1 id="dfc5" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">奖金</h1><h2 id="0f16" class="mz lz iq bd ma ne nf dn me ng nh dp mi lf ni nj mk lj nk nl mm ln nm nn mo no bi translated">使用<code class="fe ls lt lu lv b">.join() </code>功能。</h2><p id="08f4" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">举一个使用<code class="fe ls lt lu lv b">.join()</code>函数的简单例子，如果我们想获得一个开发者的完整信息，我们可能会编写下面的代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="d667" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这很好，但是我们可以这样写。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><h2 id="2d14" class="mz lz iq bd ma ne nf dn me ng nh dp mi lf ni nj mk lj nk nl mm ln nm nn mo no bi translated">使用。最小()或。max()函数</h2><p id="0247" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">我遇到的一个相当常见的问题是比较两个值，然后返回较小的值。</p><p id="f462" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样做的典型方法如下。</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="5c6f" class="mz lz iq lv b gy na nb l nc nd">Math.min.apply(Math, (developers.map(developer =&gt; developer.born)))<br/>&lt;&lt; 1946</span></pre><p id="38f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我进一步解释一下…</p><p id="601a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">Math.min()</code>函数返回任意一组给定数字中的最小值。每个参数都要单独输入，并且不能将多个数字的数组作为输入。为了说明这一点，请看下面的代码。</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="8965" class="mz lz iq lv b gy na nb l nc nd">Math.min(1, 2, 3, 4)<br/><strong class="lv ir">&lt;&lt; 1</strong><br/>Math.min([ 1, 2, 3, 4 ])<br/><strong class="lv ir">&lt;&lt; NaN</strong></span></pre><p id="6bb3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以为了做到这一点，在ES6/ES2015之前使用了<code class="fe ls lt lu lv b">.apply()</code>功能。</p><h2 id="458a" class="mz lz iq bd ma ne nf dn me ng nh dp mi lf ni nj mk lj nk nl mm ln nm nn mo no bi translated">自己写。sum()函数</h2><p id="ba46" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated"><code class="fe ls lt lu lv b">.sum()</code>函数返回给定数组中所有值的总和。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="c2e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">试着用它来计算出生年份的总和。</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="e334" class="mz lz iq lv b gy na nb l nc nd">sum(developers.map(developer =&gt; developer.born))<br/><strong class="lv ir">&lt;&lt; 9773</strong></span></pre><p id="4411" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这完全是关于JavaScript中的集合。</p><div class="np nq gp gr nr ns"><a href="https://medium.com/javascript-in-plain-english/dont-use-collection-directly-93a5457a8e40" rel="noopener follow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd ir gy z fp nx fr fs ny fu fw ip bi translated">不要直接使用集合</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">创建一流的收藏</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">medium.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og kp ns"/></div></div></a></div></div><div class="ab cl oh oi hu oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="ij ik il im in"><p id="3d03" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读😘，再见👋，别忘了👏最多50次并跟随！</p></div></div>    
</body>
</html>