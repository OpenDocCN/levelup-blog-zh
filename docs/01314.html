<html>
<head>
<title>Mandatory Local Variable Initialization</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">强制局部变量初始化</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/mandatory-local-variable-initialization-b50a7e2a9ea0?source=collection_archive---------15-----------------------#2019-12-13">https://levelup.gitconnected.com/mandatory-local-variable-initialization-b50a7e2a9ea0?source=collection_archive---------15-----------------------#2019-12-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a4bd25973a6af48024f2cee7faa74522.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yje9AmlHTUlCaaVc"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">韦恩·达尔伯格在<a class="ae kc" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="5f59" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你有没有想过为什么实例字段不需要初始化并默认为0，false，null等，而局部变量在使用前必须初始化？</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/a837dd7c40fd93fe273c989c9bd32bed.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/0*cjDu6mhKJMNK2XpV.JPG"/></div></figure><p id="98c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">事实证明，微软这样做是有充分理由的。它防止了错误，并且您获得了更好的内存重用。</p><h1 id="15a7" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">防止bug</h1><p id="b770" class="pw-post-body-paragraph kd ke iq kf b kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw mi ky kz la ij bi translated">默认情况下，局部变量就像实例字段一样，在后台初始化为0。所以他们可以允许你使用未初始化的变量。然而，研究表明，使用未初始化的局部变量可能是一个错误。</p><p id="a84e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们决定不强制实例字段的初始化，因为编译器检查实例字段是否已经初始化要困难得多。</p><p id="62b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">阅读Eric Lippert的这篇<a class="ae kc" href="https://stackoverflow.com/a/30820127/2063755" rel="noopener ugc nofollow" target="_blank">回答</a>获得详细解释。</p><h1 id="4d12" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">内存重用</h1><p id="8cfd" class="pw-post-body-paragraph kd ke iq kf b kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw mi ky kz la ij bi translated">这样做的另一个好处是编译器可以重用内存槽。</p><p id="0e1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果有3个像这样的for循环:</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mj"><img src="../Images/c7b573c1b515b20241d3014d7e2e1316.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/0*6mfMeLX-GduXuxef.JPG"/></div></div></figure><p id="3518" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦<code class="fe mk ml mm mn b">i</code>超出范围，<code class="fe mk ml mm mn b">j</code>可以使用变量<code class="fe mk ml mm mn b">i</code>使用的同一个内存槽，然后当<code class="fe mk ml mm mn b">j</code>超出范围，<code class="fe mk ml mm mn b">k</code>就可以使用那个内存槽。</p><p id="7b2b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为每个局部变量都必须被初始化，所以同一个内存槽可以被重用，而不必担心那里当前有什么值。</p></div></div>    
</body>
</html>