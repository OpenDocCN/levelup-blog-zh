<html>
<head>
<title>Build a GraphQL Server with Node.js and Express</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨Node.jså’ŒExpressæ„å»ºä¸€ä¸ªGraphQLæœåŠ¡å™¨</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/build-a-graphql-server-with-node-js-express-ba1edf7b3b72?source=collection_archive---------2-----------------------#2019-11-09">https://levelup.gitconnected.com/build-a-graphql-server-with-node-js-express-ba1edf7b3b72?source=collection_archive---------2-----------------------#2019-11-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/24cf2dc7f72b546b69e4355de40807ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CRk2ncJW1YSINjb0TgX6vg.jpeg"/></div></div></figure><h1 id="0b7e" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">GraphQLå¿«é€Ÿä»‹ç»</h1><p id="aeca" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">GraphQLä¸ºä½ çš„APIæä¾›äº†æ•°æ®åŠå…¶ç±»å‹çš„å®Œæ•´å®šä¹‰(æˆ–æè¿°)ã€‚å®ƒä½¿å®¢æˆ·èƒ½å¤Ÿå‡†ç¡®åœ°è¦æ±‚ä»–ä»¬éœ€è¦çš„ï¼Œè€Œä¸æ˜¯æ›´å¤šï¼Œä½¿APIæ›´å®¹æ˜“éšç€æ—¶é—´çš„æ¨ç§»è€Œå‘å±•ï¼Œå¹¶æ”¯æŒå¼ºå¤§çš„å¼€å‘å·¥å…·ã€‚</p><p id="8bdb" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">GraphQLæ˜¯ä¸ºäº†è§£å†³RESTfulè·¯ç”±ä¸­å‡ºç°çš„é—®é¢˜è€Œæ„å»ºçš„ã€‚RESTfulè·¯ç”±æŒ‡çš„æ˜¯æ“ä½œæ‰˜ç®¡åœ¨æœåŠ¡å™¨ä¸Šçš„æ•°æ®çš„ä¼ ç»Ÿæ¨¡å¼æˆ–é€šç”¨è§„åˆ™ã€‚è¿™äº›çº¦å®šåŒ…æ‹¬<a class="ae lx" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods" rel="noopener ugc nofollow" target="_blank"> HTTPè¯·æ±‚æ–¹æ³•æˆ–åŠ¨è¯</a>(å¦‚POSTã€PUTã€GETã€DELETEç­‰)çš„ç±»å‹ä»¥åŠè¯·æ±‚è¢«å‘é€åˆ°çš„URLï¼Œä»¥ä¾¿æ‰§è¡ŒCRUD(åˆ›å»ºã€è¯»å–ã€æ›´æ–°å’Œåˆ é™¤)æ“ä½œã€‚</p><p id="d672" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">å…·æœ‰é«˜åº¦å…³ç³»æ•°æ®çš„RESTfulè·¯ç”±å¼€å§‹å˜å¾—ç›¸å½“å…·æœ‰æŒ‘æˆ˜æ€§ã€‚</p><ul class=""><li id="f77b" class="md me it lb b lc ly lg lz lk mf lo mg ls mh lw mi mj mk ml bi translated">å½“æˆ‘ä»¬æœ‰å¤§é‡åµŒå¥—å…³ç³»æ—¶ï¼Œå†³å®šURLæ¨¡å¼å°±å˜å¾—å¾ˆå›°éš¾</li><li id="a03f" class="md me it lb b lc mm lg mn lk mo lo mp ls mq lw mi mj mk ml bi translated">å½“è·å–å¤§é‡åµŒå¥—çš„æ•°æ®æ—¶ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“é‡åˆ°è¿™æ ·çš„æƒ…å†µ:æˆ‘ä»¬å‘å‡ºå¤ªå¤šçš„HTTPè¯·æ±‚æ¥è·å–æˆ‘ä»¬éœ€è¦çš„æ•°æ®</li><li id="15e2" class="md me it lb b lc mm lg mn lk mo lo mp ls mq lw mi mj mk ml bi translated">æˆ‘ä»¬å¾ˆå®¹æ˜“è¿‡åº¦è·å–æ•°æ®</li></ul><p id="1550" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">GraphQLå¸Œæœ›ä¿®å¤RESTfulè·¯ç”±å’Œè¿‡åº¦æœåŠ¡æ•°æ®æ–¹é¢çš„ä¸€äº›å¤§çš„ä¸ä¸€è‡´ã€‚</p><p id="a1d1" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">GraphQLè®¤ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰æ•°æ®çœ‹èµ·æ¥åƒä¸€ä¸ªå›¾è¡¨ã€‚ä½†æ˜¯ï¼Œå®ƒéœ€è¦äº†è§£ä¸åŒçš„æ•°æ®ç‰‡æ®µã€æ•°æ®ç‰‡æ®µä¹‹é—´çš„å…³ç³»ä»¥åŠå¦‚ä½•è®¿é—®è¿™äº›æ•°æ®ã€‚æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ¨¡å¼æ¥å®ç°è¿™ä¸€ç‚¹ã€‚</p><h2 id="2b95" class="mr kc it bd kd ms mt dn kh mu mv dp kl lk mw mx kp lo my mz kt ls na nb kx nc bi translated">(è®¡åˆ’æˆ–ç†è®ºçš„)çº²è¦</h2><p id="ba9f" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">è¯¥æ¨¡å¼å‘Šè¯‰GraphQLæ­£åœ¨å¤„ç†çš„æ•°æ®ç±»å‹ä»¥åŠæ•°æ®ç‰‡æ®µä¹‹é—´çš„å…³ç³»ã€‚æ‰€ä»¥æ¨¡å¼è´Ÿè´£å‘Šè¯‰GraphQLåº”ç”¨ç¨‹åºçš„æ•°æ®ã€è¿™äº›æ•°æ®å¯¹è±¡çš„å±æ€§<br/>ä»¥åŠè¿™äº›å¯¹è±¡å¦‚ä½•ç›¸äº’å…³è”ã€‚</p><p id="2b2e" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">å®ƒæ˜¯ä»»ä½•GraphQLæœåŠ¡å™¨å®ç°çš„æ ¸å¿ƒï¼Œæè¿°äº†è¿æ¥åˆ°å®ƒçš„å®¢æˆ·æœºå¯ç”¨çš„åŠŸèƒ½ã€‚</p><p id="50a8" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">æ¨¡å¼ä¸­çš„æ ¸å¿ƒæ„å»ºå—æ˜¯<em class="nd">ç±»å‹ã€‚ç±»å‹</em>åœ¨æ¨¡å¼ä¸­æä¾›äº†å¹¿æ³›çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬:</p><ul class=""><li id="8000" class="md me it lb b lc ly lg lz lk mf lo mg ls mh lw mi mj mk ml bi translated">åˆ›å»ºç±»å‹ä¹‹é—´çš„å…³ç³»(ä¾‹å¦‚ï¼Œç©å®¶å’Œå›¢é˜Ÿä¹‹é—´)</li><li id="317c" class="md me it lb b lc mm lg mn lk mo lo mp ls mq lw mi mj mk ml bi translated">å®šä¹‰å®¢æˆ·ç«¯å¯ä»¥æ‰§è¡Œå“ªäº›æ•°æ®è·å–(æŸ¥è¯¢)å’Œæ•°æ®æ“ä½œ(å˜å¼‚)æ“ä½œ</li></ul><p id="a010" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">ç®€è€Œè¨€ä¹‹ï¼Œæ¨¡å¼é€šçŸ¥GraphQLæˆ‘ä»¬çš„æ•°æ®æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œä»¥åŠå¯ä»¥å¯¹è¿™äº›æ•°æ®æ‰§è¡Œçš„æ“ä½œğŸ˜ƒã€‚</p><h2 id="9e4e" class="mr kc it bd kd ms mt dn kh mu mv dp kl lk mw mx kp lo my mz kt ls na nb kx nc bi translated">å¼ºç±»å‹</h2><p id="f11e" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">GraphQLæ˜¯ä¸€ç§å¼ºç±»å‹è¯­è¨€ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„æ•°æ®ç±»å‹:</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="0b41" class="mr kc it nj b gy nn no l np nq">| TYPE     | DESCRIPTION          <br/>|----------|-------------------------------------------------------|<br/>| Scalar   | Stores a single value                                                                   |<br/>| Object   | Shows what kind of object can be fetched                                                |<br/>| Query    | Entry point type to other specific types                                                |<br/>| Mutation | Entry point for data manipulation                                                       |<br/>| Enum     | Useful in a situation where you need the user to pick from a prescribed list of options |</span></pre><p id="b3a8" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">å¯¹è±¡ç±»å‹æ˜¯æ¨¡å¼ä¸­æœ€å¸¸ç”¨çš„ç±»å‹ï¼Œä»£è¡¨ä¸€ç»„å­—æ®µã€‚å¯¹è±¡ç±»å‹ä¸­çš„æ¯ä¸ªå­—æ®µéƒ½æ˜ å°„åˆ°å¦ä¸€ä¸ªç±»å‹ï¼Œä»è€Œå…è®¸åµŒå¥—ç±»å‹ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªå¯¹è±¡ç±»å‹ç”±å¤šä¸ªæ ‡é‡ç±»å‹æˆ–å¯¹è±¡ç±»å‹ç»„æˆã€‚å®šä¹‰å¯¹è±¡ç±»å‹çš„è¯­æ³•å¦‚ä¸‹:</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="3e16" class="mr kc it nj b gy nn no l np nq">type Person {<br/>   _id:ID<br/>   firstName: String<br/>   lastName: String<br/>   age: Int<br/>   height: Float<br/>}</span></pre><h2 id="b5a9" class="mr kc it bd kd ms mt dn kh mu mv dp kl lk mw mx kp lo my mz kt ls na nb kx nc bi translated">æ ¹æŸ¥è¯¢</h2><p id="a8aa" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">å›¾æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼ŒåŒ…å«èŠ‚ç‚¹å’Œæ¯ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»(ä¹Ÿç§°ä¸ºè¾¹)ã€‚è®°ä½è¿™ä¸€ç‚¹ï¼ŒGraphQLéœ€è¦ä¸€ä¸ªè¢«ç§°ä¸ºæ ¹æŸ¥è¯¢çš„æ•°æ®ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯æ•°æ®å›¾è¡¨çš„å…¥å£ç‚¹ã€‚æ¢å¥è¯è¯´ï¼Œæ ¹æŸ¥è¯¢å…è®¸æˆ‘ä»¬è¿›å…¥æˆ‘ä»¬çš„æ•°æ®ç»“æ„ã€‚</p></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><p id="3d13" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»ä»‹ç»äº†GraphQLèƒŒåçš„ä¸€äº›é‡è¦ç†è®ºï¼Œè®©æˆ‘ä»¬ç»§ç»­æ„å»ºä¸€ä¸ªGraphQLæœåŠ¡å™¨çš„åŸºæœ¬å·¥ä½œç¤ºä¾‹ã€‚</p><figure class="ne nf ng nh gt ju"><div class="bz fp l di"><div class="ny nz l"/></div><figcaption class="oa ob gj gh gi oc od bd b be z dk translated">æ¸¸æˆæ—¶é—´åˆ°äº†ï¼</figcaption></figure><h1 id="09f2" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">å¸¦æœ‰Node.js &amp; Expressçš„GraphQL</h1><figure class="ne nf ng nh gt ju gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/34aae13d1a4a6190396a49c4f6f33c62.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*YnTantyqOey7VzlevWtaeQ.png"/></div></figure><p id="307c" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">å‡è®¾æ‚¨å·²ç»å®‰è£…äº†<a class="ae lx" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>ï¼Œæ‚¨å¯ä»¥ç»§ç»­åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œå¹¶ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„<em class="nd"> package.json </em>æ–‡ä»¶:</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="3f3c" class="mr kc it nj b gy nn no l np nq">$ npm init -y</span></pre><p id="43e8" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">ç„¶åï¼Œæ‚¨å¯ä»¥æ›´æ–°<em class="nd"> package.json </em>æ–‡ä»¶ä¸­çš„ä¸€äº›å€¼ï¼Œæ¯”å¦‚åç§°ã€ä½œè€…å’Œæè¿°ã€‚</p><p id="0a7b" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">ç°åœ¨è®©æˆ‘ä»¬å®‰è£…ä¸€äº›graphqlæœåŠ¡å™¨éœ€è¦çš„ä¾èµ–é¡¹ã€‚</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="dd26" class="mr kc it nj b gy nn no l np nq">$ npm i --save graphql graphql-tag express express-graphql body-parser axios graphql-playground-middleware-express</span><span id="5317" class="mr kc it nj b gy of no l np nq">$ npm i -D nodemon</span></pre><p id="b765" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">express-graphqlåº“å……å½“graphqlå’ŒExpress (HTTPæœåŠ¡å™¨)ä¹‹é—´çš„å…¼å®¹å±‚ã€‚JsonæœåŠ¡å™¨å°†è¢«ç”¨æ¥åˆ›å»ºå‡çš„REST APIsã€‚</p><h2 id="2173" class="mr kc it bd kd ms mt dn kh mu mv dp kl lk mw mx kp lo my mz kt ls na nb kx nc bi translated">å‡å†’çš„åŸæ–™è¯</h2><p id="07a5" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">ç»§ç»­åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<strong class="lb iu"> db.json </strong>æ–‡ä»¶ï¼Œjson-serverå°†ä½¿ç”¨å®ƒæ¥ä¸ºæˆ‘ä»¬åˆ›å»ºAPIã€‚ç„¶åä½ å¯ä»¥æŠŠè¿™ä¸ªå†…å®¹<a class="ae lx" href="https://gist.github.com/LukeMwila/8aaa944ae017a9c2fe7a626da8b1ecd2" rel="noopener ugc nofollow" target="_blank">æ·»åŠ åˆ°è¿™ä¸ªæ–°æ·»åŠ çš„æ–‡ä»¶ä¸­ã€‚</a></p><p id="86cf" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è„šæœ¬æ›´æ–°package.jsonæ–‡ä»¶ï¼Œä»¥æµ‹è¯•æ‚¨çš„å‡API:</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="1a2d" class="mr kc it nj b gy nn no l np nq">"json:server": "json-server --watch db.json --port 3004"</span></pre><p id="9c97" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">å®Œæˆåï¼Œæ‚¨å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="e5bd" class="mr kc it nj b gy nn no l np nq">$ npm run json:server</span></pre><p id="ac23" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">ç„¶åï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä»¥ä¸‹å†…å®¹:</p><figure class="ne nf ng nh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi og"><img src="../Images/41554a9ebf7dd89ffce3c04741b321bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LkPmEEcJOos-leycW_ptvw.png"/></div></div><figcaption class="oa ob gj gh gi oc od bd b be z dk translated">CLIç»“æœ</figcaption></figure><p id="037c" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">è¯·éšæ„ä½¿ç”¨APIå®¢æˆ·ç«¯æµ‹è¯•APIï¼Œå¦‚<a class="ae lx" href="https://www.getpostman.com/" rel="noopener ugc nofollow" target="_blank"> Postman </a>æˆ–ç›´æ¥åœ¨æ‚¨çš„æµè§ˆå™¨ä¸­æµ‹è¯•ã€‚</p><figure class="ne nf ng nh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oh"><img src="../Images/c8a7589b13ccf2207ebb553f83cd8200.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IQSFpixwI_nQkdEoNIgQgg.png"/></div></div><figcaption class="oa ob gj gh gi oc od bd b be z dk translated">é‚®é€’å‘˜ç»“æœ</figcaption></figure><h2 id="5071" class="mr kc it bd kd ms mt dn kh mu mv dp kl lk mw mx kp lo my mz kt ls na nb kx nc bi translated">GraphQLå®ç°</h2><p id="86d7" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<strong class="lb iu"> src </strong>æ–‡ä»¶å¤¹ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥è®¾ç½®ä»¥ä¸‹æ–‡ä»¶å’Œæ–‡ä»¶å¤¹:</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="d47a" class="mr kc it nj b gy nn no l np nq">â”œâ”€â”€ schema/<br/>â”œâ”€â”€ app.js<br/>â””â”€â”€ server.js</span></pre><p id="3af6" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">è®©æˆ‘ä»¬ä»<strong class="lb iu"> app.js </strong>å’Œ<strong class="lb iu"> server.js </strong>æ–‡ä»¶å¼€å§‹ï¼Œç”¨GraphQLå±‚åˆå§‹åŒ–æˆ‘ä»¬çš„HTTPæœåŠ¡å™¨ã€‚</p><p id="e9e6" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu"> app.js </strong></p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="e331" class="mr kc it nj b gy nn no l np nq">const express = require('express');<br/>const expressGraphQL = require('express-graphql');<br/>const bodyParser = require('body-parser');<br/>const expressPlayground = require('graphql-playground-middleware-express').default;</span><span id="d556" class="mr kc it nj b gy of no l np nq">const schema = require('./schema');<br/>const app = express();</span><span id="6c3c" class="mr kc it nj b gy of no l np nq">app.get('/playground', expressPlayground({ endpoint: '/v1/graphql' }));</span><span id="a8ae" class="mr kc it nj b gy of no l np nq">app.use(bodyParser.json());<br/>app.use(<br/>  '/v1/graphql',<br/>  expressGraphQL({<br/>   schema,<br/>   graphiql: true<br/>  })<br/>);</span><span id="ce54" class="mr kc it nj b gy of no l np nq">module.exports = app;</span></pre><p id="5609" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu"> server.js </strong></p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="0a60" class="mr kc it nj b gy nn no l np nq">const http = require('http');<br/>const app = require('./app');</span><span id="1fa7" class="mr kc it nj b gy of no l np nq">const port = process.env.PORT || 3003;<br/>const server = http.createServer(app);</span><span id="663d" class="mr kc it nj b gy of no l np nq">server.listen(port, () =&gt; console.log(`Server running on ${port}`));</span></pre><p id="2ff6" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">ç°åœ¨è®©æˆ‘ä»¬ç»§ç»­å®šä¹‰æˆ‘ä»¬çš„GraphQLæ¨¡å¼ã€‚åœ¨æ¨¡å¼æ–‡ä»¶å¤¹ä¸­ï¼Œè®¾ç½®ä»¥ä¸‹æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ç»“æ„:</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="5de9" class="mr kc it nj b gy nn no l np nq">â”œâ”€â”€ types/<br/>â”œâ”€â”€ index.js<br/>â””â”€â”€ root_query.js</span></pre><p id="5185" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">è®©æˆ‘ä»¬åœ¨<strong class="lb iu"> index.js </strong>æ–‡ä»¶ä¸­åˆ›å»ºæˆ‘ä»¬çš„æ¨¡å¼ã€‚</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="e0e7" class="mr kc it nj b gy nn no l np nq">const graphql = require('graphql');<br/>const { GraphQLSchema } = graphql;</span><span id="180d" class="mr kc it nj b gy of no l np nq">// Root query<br/>const query = require('./root_query');</span><span id="c179" class="mr kc it nj b gy of no l np nq">module.exports = new GraphQLSchema({<br/>  query<br/>});</span></pre><p id="fa2d" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬æ­£åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å¯¼å…¥æˆ‘ä»¬çš„æ ¹æŸ¥è¯¢ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰ç”¨å¿…è¦çš„å†…å®¹å¡«å……æˆ‘ä»¬çš„<strong class="lb iu"> root_query.js </strong>æ–‡ä»¶ï¼Œæ‰€ä»¥ç°åœ¨è®©æˆ‘ä»¬å¼€å§‹å§ã€‚</p><p id="87db" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu"> root_query.js </strong></p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="7109" class="mr kc it nj b gy nn no l np nq">const graphql = require('graphql');<br/>const axios = require('axios');</span><span id="4b95" class="mr kc it nj b gy of no l np nq">const { GraphQLObjectType, GraphQLList } = graphql;</span><span id="57d2" class="mr kc it nj b gy of no l np nq">/** Data Types */<br/>const player = require('./types/player');<br/>const team = require('./types/team');</span><span id="987a" class="mr kc it nj b gy of no l np nq">const rootQuery = new GraphQLObjectType({<br/>  name: 'RootQueryType',<br/>  fields: () =&gt; ({<br/>    players: {<br/>      type: new GraphQLList(player),<br/>      resolve(parentValue, args) {<br/>       return axios<br/>         .get(`http://localhost:3004/players`)<br/>         .then(response =&gt; response.data);<br/>      }<br/>    },<br/>    teams: {<br/>      type: new GraphQLList(team),<br/>      resolve(parentValue, args) {<br/>       return axios<br/>         .get(`http://localhost:3004/teams`)<br/>         .then(response =&gt; response.data);<br/>       }<br/>    }<br/>  })<br/>});</span><span id="be76" class="mr kc it nj b gy of no l np nq">module.exports = rootQuery;</span></pre><p id="1a02" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»æ·»åŠ äº†æ ¹æŸ¥è¯¢ï¼Œè®©æˆ‘ä»¬åˆ›å»ºå¯ä»¥åœ¨å›¾ä¸­è®¿é—®çš„å¯¹è±¡çš„ä¸¤ç§æ•°æ®ç±»å‹ã€‚ä¸¤ä¸ªæ–‡ä»¶(<strong class="lb iu"> player.js </strong>å’Œ<strong class="lb iu"> team.js </strong>)éƒ½å°†è¢«æ·»åŠ åˆ°<strong class="lb iu"> types </strong>æ–‡ä»¶å¤¹ä¸­ã€‚</p><p id="9090" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu"> player.js </strong></p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="a3fa" class="mr kc it nj b gy nn no l np nq">/**<br/> * Player type<br/> */<br/>const graphql = require('graphql');<br/>const axios = require('axios');<br/>/** Import object types from GraphQL */<br/>const { GraphQLObjectType, GraphQLString } = graphql;</span><span id="5401" class="mr kc it nj b gy of no l np nq">const Player = new GraphQLObjectType({<br/>  name: 'Player',<br/>  fields: () =&gt; ({<br/>    id: { type: GraphQLString },<br/>    firstName: { type: GraphQLString },<br/>    lastName: { type: GraphQLString },<br/>    team: {<br/>      type: require('./team'),<br/>      resolve(parentValue, args) {<br/>        return axios<br/>          .get(`<a class="ae lx" href="http://localhost:3004/team/${parentValue.id}`" rel="noopener ugc nofollow" target="_blank">http://localhost:3004/team/${parentValue.id}`</a>)<br/>          .then(response =&gt; response.data);<br/>      }<br/>    }<br/>  })<br/>});</span><span id="96c3" class="mr kc it nj b gy of no l np nq">module.exports = Player;</span></pre><p id="d461" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">æ‚¨å¯èƒ½æƒ³çŸ¥é“resolveå‡½æ•°æ˜¯å¹²ä»€ä¹ˆçš„ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå®ƒé€šè¿‡ä¸ºGraphQLæŸ¥è¯¢ç”Ÿæˆå“åº”æ¥å……å½“æŸ¥è¯¢å¤„ç†ç¨‹åºã€‚parentValueæ˜¯æˆ‘ä»¬æ­£åœ¨å¤„ç†çš„å½“å‰æ•°æ®å¯¹è±¡çš„å®ä¾‹ã€‚GraphQLæ¨¡å¼ä¸­çš„æ¯ä¸ªè§£æå™¨å‡½æ•°éƒ½æ¥å—å››ä¸ªä½ç½®å‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="2468" class="mr kc it nj b gy nn no l np nq">fieldName:(parentValue, args, context, info) =&gt; { result }</span></pre><p id="965f" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu"> team.js </strong></p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="e678" class="mr kc it nj b gy nn no l np nq">/**<br/> * Team type<br/> */<br/>const graphql = require('graphql');<br/>const axios = require('axios');<br/>/** Import object types from GraphQL */<br/>const { GraphQLObjectType, GraphQLString, GraphQLList } = graphql;</span><span id="94d9" class="mr kc it nj b gy of no l np nq">const Team = new GraphQLObjectType({<br/>  name: 'Team',<br/>  fields: () =&gt; ({<br/>    id: { type: GraphQLString },<br/>    name: { type: GraphQLString },<br/>    players: {<br/>      type: new GraphQLList(require('./player')),<br/>      resolve(parentValue, args) {<br/>        return axios<br/>          .get(`<a class="ae lx" href="http://localhost:3004/teams/${parentValue.id}/players`" rel="noopener ugc nofollow" target="_blank">http://localhost:3004/teams/${parentValue.id}/players`</a>)<br/>          .then(response =&gt; response.data);<br/>      }<br/>    }<br/>  })<br/>});</span><span id="deed" class="mr kc it nj b gy of no l np nq">module.exports = Team;</span></pre><p id="96f5" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">å®Œæˆåï¼Œæ‚¨å¯ä»¥å°†ä»¥ä¸‹è„šæœ¬æ·»åŠ åˆ°æ‚¨çš„<em class="nd"> package.json </em>æ–‡ä»¶ä¸­:</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="3474" class="mr kc it nj b gy nn no l np nq">"start": "nodemon src/server.js"</span></pre><p id="1c7b" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">ç„¶åè¿è¡Œ<code class="fe oi oj ok nj b">npm start</code>ã€‚</p><p id="7be7" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">ä¸€æ—¦æ‚¨çš„åº”ç”¨ç¨‹åºå¯åŠ¨å¹¶è¿è¡Œï¼Œè¯·åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ä¸¤ä¸ªé€‰é¡¹å¡å¹¶è½¬åˆ°ä»¥ä¸‹é“¾æ¥:</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="efa8" class="mr kc it nj b gy nn no l np nq">GraphiQL: <a class="ae lx" href="http://localhost:3003/v1/graphql" rel="noopener ugc nofollow" target="_blank">http://localhost:3003/v1/graphql</a><br/>GraphQL Playground: <a class="ae lx" href="http://localhost:3003/playground" rel="noopener ugc nofollow" target="_blank">http://localhost:3003/playground</a></span></pre><p id="0995" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><a class="ae lx" href="https://github.com/graphql/graphiql" rel="noopener ugc nofollow" target="_blank"><em class="nd">graph QL</em></a>å’Œ<a class="ae lx" href="https://github.com/prisma-labs/graphql-playground" rel="noopener ugc nofollow" target="_blank"><em class="nd">graph QL Playground</em></a>éƒ½æ˜¯æµè§ˆå™¨å†…IDEï¼Œä¸ºæ‚¨çš„GraphQL APIæä¾›äº†å‡ºè‰²çš„å¼€å‘å·¥ä½œæµç¨‹ï¼Œå¹¶ä¸ºæ‚¨çš„æ¨¡å¼æä¾›äº†æ–‡æ¡£ã€‚</p><p id="a601" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">åœ¨ä¸¤ä¸ªIDEä¸­ï¼Œæµ‹è¯•ä»¥ä¸‹æŸ¥è¯¢:</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="5169" class="mr kc it nj b gy nn no l np nq"># Write your query or mutation here<br/>query {<br/>  teams {<br/>    name<br/>    players {<br/>      id<br/>      firstName<br/>      lastName<br/>    }<br/>  }<br/>}</span></pre><p id="716e" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">é¢„æœŸçš„ç»“æœåº”è¯¥å¦‚ä¸‹:</p><figure class="ne nf ng nh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ol"><img src="../Images/6c651ff55a7bb40423416645646961b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5jdzWM-Mm5-SKWLBcVn5Og.png"/></div></div><figcaption class="oa ob gj gh gi oc od bd b be z dk translated">å›¾å½¢QL</figcaption></figure><figure class="ne nf ng nh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi om"><img src="../Images/7b8e4983bf8fd42346b524e6704f4266.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H0vuGjv_tW6x36HXrjzI0Q.png"/></div></div><figcaption class="oa ob gj gh gi oc od bd b be z dk translated">GraphQLæ¸¸ä¹åœº</figcaption></figure></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><p id="8dd2" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">å¥³å£«ä»¬å…ˆç”Ÿä»¬ï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¦æœ‰Node.jså’ŒExpressçš„GraphQLæœåŠ¡å™¨çš„åŸºæœ¬å®ç°ã€‚è¿™ä¸ªä¾‹å­çš„æºä»£ç å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°<a class="ae lx" href="https://github.com/LukeMwila/basic-graphql-server" rel="noopener ugc nofollow" target="_blank">ã€‚</a></p><p id="4abf" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·åœ¨è¿™é‡Œç»™æˆ‘ä¹°æ¯å’–å•¡<a class="ae lx" href="https://www.buymeacoffee.com/lukemwila" rel="noopener ugc nofollow" target="_blank">â˜•ï¸ğŸ˜ƒã€‚</a></p><figure class="ne nf ng nh gt ju"><div class="bz fp l di"><div class="on nz l"/></div></figure></div></div>    
</body>
</html>