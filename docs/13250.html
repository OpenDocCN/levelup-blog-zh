<html>
<head>
<title>How to apply Material theme colors for your Angular Component</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为角度组件应用材质主题颜色</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-apply-material-theme-colors-for-your-angular-component-eda2aeb057be?source=collection_archive---------0-----------------------#2022-08-20">https://levelup.gitconnected.com/how-to-apply-material-theme-colors-for-your-angular-component-eda2aeb057be?source=collection_archive---------0-----------------------#2022-08-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/db08c9b7b3fad3f65fe9c0b5b84cbed7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rQuqX_u8tKrjdc6Z.png"/></div></div></figure><p id="bc06" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">TLDR；</strong>创建一个@mixin来接收<code class="fe kw kx ky kz b">$theme</code>作为参数，这样您就可以从<code class="fe kw kx ky kz b">$theme</code>中获得您需要的颜色，并将其应用到您的css选择器中。然后将mixin包含到您的<code class="fe kw kx ky kz b">styles.scss</code>中。</p><p id="6071" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当你使用有角度的材质组件时，颜色通常是为你选择的或者像<a class="ae la" href="https://material.angular.io/components/toolbar/api" rel="noopener ugc nofollow" target="_blank"> MatToolbar </a>一样，有一个<code class="fe kw kx ky kz b">color</code>属性供你方便地从你的主题中获得调色板。然而，有时你可能需要从你的主题调色板中添加一种颜色，但这并不容易做到。例如，当鼠标悬停在表格行上时，向表格行添加背景色。</p><pre class="lb lc ld le gt lf kz lg lh aw li bi"><span id="2b0c" class="lj lk iq kz b gy ll lm l ln lo">.full-width-table {<br/>  width: 100%;<br/>}</span><span id="63a0" class="lj lk iq kz b gy lp lm l ln lo">.mat-row {<br/>  cursor: pointer;<br/>}</span><span id="8999" class="lj lk iq kz b gy lp lm l ln lo">.mat-row:hover {<br/>  background-color: beige;<br/>}</span></pre><p id="6078" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">虽然我们可以很容易地在组件的css中添加<code class="fe kw kx ky kz b">.mat-row:hover</code> css选择器，但是我们并不能真正从主题中获得我们想要的颜色。这个<code class="fe kw kx ky kz b">beige</code>颜色可能适合你当前的主题，但是如果你的模板中有一个深色主题选择器，你可能想要一个基于用户选择的主题的不同颜色。这使得上述简单的方法并不真正有效。</p><p id="1b2f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了动态地从主题中获取颜色，我们需要将css合并到一个<code class="fe kw kx ky kz b">@mixin</code>中。一个<a class="ae la" href="https://sass-lang.com/documentation/at-rules/mixin" rel="noopener ugc nofollow" target="_blank"> Mixin </a>本质上是一个返回css样式的函数，你可以通过<code class="fe kw kx ky kz b">@include</code>在你的scss中直接使用它。它可以接受参数，所以可以用不同的参数值动态生成css样式。所以我们在scss文件中创建了一个新的<code class="fe kw kx ky kz b">color</code> @mixin来返回<code class="fe kw kx ky kz b">.mat-row:hover</code>的css，接受一个<code class="fe kw kx ky kz b">$theme</code>作为参数，我们稍后可以使用它。</p><pre class="lb lc ld le gt lf kz lg lh aw li bi"><span id="4b56" class="lj lk iq kz b gy ll lm l ln lo">@mixin color($theme){<br/>  .mat-row:hover {<br/>    background-color: beige;<br/>  }<br/>}</span><span id="157b" class="lj lk iq kz b gy lp lm l ln lo">.full-width-table {<br/>  width: 100%;<br/>}</span><span id="d505" class="lj lk iq kz b gy lp lm l ln lo">.mat-row {<br/>  cursor: pointer;<br/>}</span></pre><p id="a9d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以通过angular material提供的<code class="fe kw kx ky kz b">get-color-config($theme)</code>函数得到主题颜色配置。这个函数将返回一个sass地图，在这里你可以得到主题中的<code class="fe kw kx ky kz b">primary</code>、<code class="fe kw kx ky kz b">accent</code>、<code class="fe kw kx ky kz b">warn</code>调色板。要了解更多关于角度素材中的主题，请查看我之前的帖子 <a class="ae la" rel="noopener ugc nofollow" target="_blank" href="/defining-your-own-theme-in-angular-material-8a4a6ffad400"> <em class="lq">在角度素材中定义你自己的主题</em> </a> <em class="lq">。sass map就像其他编程语言中的地图或字典一样。要获得sass映射中的键值，我们可以使用<code class="fe kw kx ky kz b">map.get($map, $key)</code>方法。因为我们使用sass贴图和角度材质，所以我们需要将它们包含在@use语句中。</em></p><pre class="lb lc ld le gt lf kz lg lh aw li bi"><span id="bb44" class="lj lk iq kz b gy ll lm l ln lo">@use 'sass:map';<br/>@use '@angular/material' as mat;</span><span id="e34e" class="lj lk iq kz b gy lp lm l ln lo">@mixin color($theme){<br/>  // Get the color config from the theme.<br/>  $color-config: mat.get-color-config($theme);</span><span id="d340" class="lj lk iq kz b gy lp lm l ln lo">  // Get the primary color palette from the color-config.<br/>  $primary-palette: map.get($color-config, 'primary');</span><span id="10da" class="lj lk iq kz b gy lp lm l ln lo">  .mat-row:hover {<br/>    background-color: mat.get-color-from-palette($primary-palette, 100);<br/>  }<br/>}</span><span id="8102" class="lj lk iq kz b gy lp lm l ln lo">.full-width-table {<br/>  width: 100%;<br/>}</span><span id="5210" class="lj lk iq kz b gy lp lm l ln lo">.mat-row {<br/>  cursor: pointer;<br/>}</span></pre><p id="bc2b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然而，由于<code class="fe kw kx ky kz b">.mat-row:hover</code>在<code class="fe kw kx ky kz b">@mixin</code>中，它不会被实现，因为<code class="fe kw kx ky kz b">@mixin</code>就像一个函数，如果它没有被调用，它就不会执行，所以我们必须将它包含在我们的<code class="fe kw kx ky kz b">styles.scss</code>中。但在此之前，让我们将组件css模块化，以分离出函数调用。</p><p id="9376" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们的组件样式最初只是<code class="fe kw kx ky kz b">table.component.scss</code>，我们应该将@mixin代码提取到一个<a class="ae la" href="https://sass-lang.com/guide#topic-4" rel="noopener ugc nofollow" target="_blank"> partial sass文件</a>，这样styles.scss中就不会再生成其余的非mixin代码，按照惯例，文件名应该以<code class="fe kw kx ky kz b">-theme</code>为后缀，基于partial sass文件惯例，应该以下划线<code class="fe kw kx ky kz b">_</code>为前缀。我们应该以2个scss文件结束- <code class="fe kw kx ky kz b">_table.component-theme.scss</code>，</p><pre class="lb lc ld le gt lf kz lg lh aw li bi"><span id="db59" class="lj lk iq kz b gy ll lm l ln lo">@use 'sass:map';<br/>@use '@angular/material' as mat;</span><span id="e78b" class="lj lk iq kz b gy lp lm l ln lo">@mixin color($theme){<br/>  // Get the color config from the theme.<br/>  $color-config: mat.get-color-config($theme);</span><span id="a852" class="lj lk iq kz b gy lp lm l ln lo">  // Get the primary color palette from the color-config.<br/>  $primary-palette: map.get($color-config, 'primary');</span><span id="968f" class="lj lk iq kz b gy lp lm l ln lo">  .mat-row:hover {<br/>    background-color: mat.get-color-from-palette($primary-palette, 100);<br/>  }<br/>}</span></pre><p id="9fd1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">和<code class="fe kw kx ky kz b">table.component.scss</code>。</p><pre class="lb lc ld le gt lf kz lg lh aw li bi"><span id="cf53" class="lj lk iq kz b gy ll lm l ln lo">.full-width-table {<br/>  width: 100%;<br/>}</span><span id="5554" class="lj lk iq kz b gy lp lm l ln lo">.mat-row {<br/>  cursor: pointer;<br/>}</span></pre><p id="0c7a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，我们需要将新的部分sass文件包含到我们的<code class="fe kw kx ky kz b">styles.scss</code>中。注意，我们应该省略前面的下划线<code class="fe kw kx ky kz b">_</code>以及扩展名<code class="fe kw kx ky kz b">.scss</code>。下面的行将导入我们的sass部分文件，并将其命名为<code class="fe kw kx ky kz b">table</code>。</p><pre class="lb lc ld le gt lf kz lg lh aw li bi"><span id="5203" class="lj lk iq kz b gy ll lm l ln lo">@use "./app/table/table.component-theme" as table;</span></pre><p id="e968" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，在<code class="fe kw kx ky kz b">html, body</code> css选择器之前的<code class="fe kw kx ky kz b">styles.scss</code>中添加下面一行。</p><pre class="lb lc ld le gt lf kz lg lh aw li bi"><span id="a5a5" class="lj lk iq kz b gy ll lm l ln lo">@include table.color($bluesky-theme);</span></pre><blockquote class="lr ls lt"><p id="74f2" class="jy jz lq ka b kb kc kd ke kf kg kh ki lu kk kl km lv ko kp kq lw ks kt ku kv ij bi translated">我们使用<code class="fe kw kx ky kz b">@use</code>来导入sass文件，使用<code class="fe kw kx ky kz b">@include</code>来包含mixin。</p></blockquote><p id="f9c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe kw kx ky kz b">table</code>引用sass部分文件，<code class="fe kw kx ky kz b">color</code>是我们声明的@mixin，$bluesky-theme是我们在<code class="fe kw kx ky kz b">styles.scss</code>中作为参数传递给@mixin的主题。</p><p id="c9ee" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就是这样。</p><p id="cb91" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本文原载于<a class="ae la" href="https://thecodinganalyst.github.io/knowledgebase/How-to-apply-theme-colors-for-your-angular-component/" rel="noopener ugc nofollow" target="_blank">https://the coding analyst . github . io/knowledge base/How-to-apply-theme-colors-for-your-angular-component/</a>。</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="6620" class="me lk iq bd mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na bi translated">分级编码</h1><p id="fdc4" class="pw-post-body-paragraph jy jz iq ka b kb nb kd ke kf nc kh ki kj nd kl km kn ne kp kq kr nf kt ku kv ij bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="f74e" class="ng nh iq ka b kb kc kf kg kj ni kn nj kr nk kv nl nm nn no bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="6cdf" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated">📰查看<a class="ae la" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="3873" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated">🔔关注我们:<a class="ae la" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae la" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae la" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="e380" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">🚀👉<a class="ae la" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>