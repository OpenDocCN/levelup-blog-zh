<html>
<head>
<title>Vue — Watch only once</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue —仅观看一次</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/vue-watch-only-once-63597466dc74?source=collection_archive---------1-----------------------#2019-07-29">https://levelup.gitconnected.com/vue-watch-only-once-63597466dc74?source=collection_archive---------1-----------------------#2019-07-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="f37d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我最近有一个项目，我必须使用KPI图块可视化机器数据，如下图所示。图块本身是一个具有<code class="fe kl km kn ko b">isLive</code>属性的组件(默认为false)。一个视图包含所有的图块，并通过将<code class="fe kl km kn ko b">isLive</code>改为true来告诉它们何时开始运行，因此所有的图块都建立了它们的websocket连接。问题是，只要不改，我就只想看物业。否则，websocket连接将被建立多次，或者当我用一个<code class="fe kl km kn ko b">if</code>包装观察器时，观察器将被免费调用。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi kp"><img src="../Images/5092ea1b8f62faf0043091ca611d9315.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*TMLjNoFmHIRcuz2jszEzzA.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">KPI图块</figcaption></figure><p id="0b7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是我想出来的。</p><h2 id="4183" class="lb lc iq bd ld le lf dn lg lh li dp lj jy lk ll lm kc ln lo lp kg lq lr ls lt bi translated">KPI平铺逻辑(子)</h2><p id="72c5" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated">子进程通过调用返回一个<code class="fe kl km kn ko b">unwatch</code>处理程序的<code class="fe kl km kn ko b">this.$watch()</code>在其<code class="fe kl km kn ko b">created</code>钩子中注册一个<code class="fe kl km kn ko b">isLive</code>上的监视器。处理程序存储在实例中(<code class="fe kl km kn ko b">unwatchIsLiveProp</code>)。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="lz ma l"/></div></figure><h2 id="1bd8" class="lb lc iq bd ld le lf dn lg lh li dp lj jy lk ll lm kc ln lo lp kg lq lr ls lt bi translated">查看逻辑</h2><p id="a2aa" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated">视图只需要在其绑定到子视图的<code class="fe kl km kn ko b">data</code>属性中有一个<code class="fe kl km kn ko b">isLive</code>变量。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="lz ma l"/></div></figure><h2 id="225f" class="lb lc iq bd ld le lf dn lg lh li dp lj jy lk ll lm kc ln lo lp kg lq lr ls lt bi translated">结论</h2><p id="05a5" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated">当视图上的<code class="fe kl km kn ko b">isLive</code>发生变化时，子视图上的观察器触发回调并停止观察属性。完整的例子可以在这里找到:<a class="ae mb" href="https://stackblitz.com/edit/vue-watch-only-once" rel="noopener ugc nofollow" target="_blank">https://stackblitz.com/edit/vue-watch-only-once</a></p><p id="67cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">//BMA</p></div></div>    
</body>
</html>