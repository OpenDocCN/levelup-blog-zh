<html>
<head>
<title>Animating Your React Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">设置React组件的动画</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/animating-your-react-components-8af7615ea61f?source=collection_archive---------6-----------------------#2020-08-01">https://levelup.gitconnected.com/animating-your-react-components-8af7615ea61f?source=collection_archive---------6-----------------------#2020-08-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ecf7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过在React应用程序或组件库中制作组件动画，改善整体客户体验</h2></div><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/a716383bc8e2a80d39ea9f03c2278ca7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tH9ry6RuIl6Mrak73k-jnA.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">图片来自unsplash.com的卡尔·约瑟夫</figcaption></figure><p id="ca01" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi lz translated"><span class="l kf kg kh bm ki kj kk kl km di"> S </span> o，你想让你的React组件更上一层楼？实现动画可以大大改善客户体验，让你的应用感觉更专业。动画是实现这一目标的众多方法之一。在这篇文章中，我想介绍如何使用<a class="ae ma" href="http://framer.motion" rel="noopener ugc nofollow" target="_blank">成帧器动作</a>轻松制作React组件的动画。</p><h1 id="1235" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">如何开始</h1><p id="cc64" class="pw-post-body-paragraph ld le iq lf b lg mt jr li lj mu ju ll lm mv lo lp lq mw ls lt lu mx lw lx ly ij bi translated">要设置你的项目使用framer-motion，你可以简单地通过使用你的JavaScript包管理器来安装它，比如<a class="ae ma" href="http://npmjs.com/" rel="noopener ugc nofollow" target="_blank"> NPM </a>或<a class="ae ma" href="https://yarnpkg.com" rel="noopener ugc nofollow" target="_blank"> Yarn </a>。在React.js项目中运行以下任何命令，就可以开始了。</p><pre class="ko kp kq kr gt my mz na nb aw nc bi"><span id="f817" class="nd mc iq mz b gy ne nf l ng nh">$ npm install framer-motion</span><span id="d66c" class="nd mc iq mz b gy ni nf l ng nh">$ yarn add framer-motion</span></pre><h1 id="7fc2" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">不同类型的动画</h1><p id="17f5" class="pw-post-body-paragraph ld le iq lf b lg mt jr li lj mu ju ll lm mv lo lp lq mw ls lt lu mx lw lx ly ij bi translated">因此，在framer-motion中有几种不同类型的动画，您可以将其用作制作组件动画的工具。以下是我们将在本文中涉及的内容。你也可以在官方成帧器运动文档网站<a class="ae ma" href="https://www.framer.com/motion/" rel="noopener ugc nofollow" target="_blank">上找到更多信息。</a></p><ul class=""><li id="6904" class="nj nk iq lf b lg lh lj lk lm nl lq nm lu nn ly no np nq nr bi translated">制作单个组件的动画</li><li id="582a" class="nj nk iq lf b lg ns lj nt lm nu lq nv lu nw ly no np nq nr bi translated">动画组件安装和卸载</li><li id="e855" class="nj nk iq lf b lg ns lj nt lm nu lq nv lu nw ly no np nq nr bi translated">在组件状态之间制作动画</li><li id="653d" class="nj nk iq lf b lg ns lj nt lm nu lq nv lu nw ly no np nq nr bi translated">制作多个组件的动画</li></ul><h1 id="96f1" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">制作单个组件的动画</h1><p id="a55a" class="pw-post-body-paragraph ld le iq lf b lg mt jr li lj mu ju ll lm mv lo lp lq mw ls lt lu mx lw lx ly ij bi translated">因此，在React中尝试动画的一个好地方就是简单地制作一个组件的动画。为此，我们将使用由framer-motion包提供的motion组件。这让我们可以用motion.div替换默认的html divs，因此可以轻松地将它们制作成动画。要在x轴上制作一个组件的动画，我们可以写下面的代码。</p><pre class="ko kp kq kr gt my mz na nb aw nc bi"><span id="438a" class="nd mc iq mz b gy ne nf l ng nh">import React from 'react'<br/>import { motion }from 'framer-motion'</span><span id="f65e" class="nd mc iq mz b gy ni nf l ng nh">const MyComponent = ({ children }) =&gt; (<br/>  &lt;<strong class="mz ir">motion.div animate={{ x: 500 }}</strong>&gt;<br/>    {children}<br/>  &lt;/<strong class="mz ir">motion.div</strong>&gt;<br/>)</span></pre><p id="58f5" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">通过像这样使用我们的组件:</p><pre class="ko kp kq kr gt my mz na nb aw nc bi"><span id="30a0" class="nd mc iq mz b gy ne nf l ng nh">import MyComponent from "../components/component";</span><span id="d108" class="nd mc iq mz b gy ni nf l ng nh">export default function App() {<br/>  return (<br/>    &lt;MyComponent&gt;<br/>      &lt;h3&gt;This will animate&lt;/h3&gt;<br/>    &lt;/MyComponent&gt;<br/>  );<br/>}</span></pre><p id="464c" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">输出将看起来像这样，它将直接动画时，它安装。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi nx"><img src="../Images/bc17c6f9719a7b6aefb3d0b909f11c51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*34ySMN6tBlMDZt7LyJxjHQ.gif"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">一个黑色的文本写着“这将是动画”从左边快速“跳跃”过渡出来</figcaption></figure><p id="c80b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">虽然这看起来不像是一个非常有用的动画，但这只是制作React组件动画的基本概念。现在，我们将使用我们的知识来进一步开发我们的React组件，以使用更复杂的动画来制作状态和挂载之间的动画。首先，让我们在可见和不可见之间制作一个组件的动画。</p><h1 id="a3bd" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">动画演示</h1><p id="3b83" class="pw-post-body-paragraph ld le iq lf b lg mt jr li lj mu ju ll lm mv lo lp lq mw ls lt lu mx lw lx ly ij bi translated">可以用几种不同的方式制作存在动画。我们将通过稍微更新我们以前的组件来实现这一点，在我们的父组件中，我们将添加framer-motion提供的AnimatePresence组件，以在从dom安装和卸载之间制作动画。这最准确地代表了您目前最有可能使用React组件的方式。我们将更新组件，如下所示:</p><pre class="ko kp kq kr gt my mz na nb aw nc bi"><span id="d31d" class="nd mc iq mz b gy ne nf l ng nh">import { motion, AnimatePresence } from "framer-motion";</span><span id="46d1" class="nd mc iq mz b gy ni nf l ng nh">export default function MyComponent({ children }) {<br/>  return (<br/>    &lt;motion.div<br/><strong class="mz ir">      initial={{ opacity: 0 }}<br/>      animate={{ x: 250, opacity: 1 }}<br/>      exit={{ opacity: 0, x: 500 }}</strong><br/>    &gt;<br/>      {children}<br/>    &lt;/motion.div&gt;<br/>  );<br/>}</span></pre><p id="d1ca" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">通过添加初始属性、更新animate和添加exit属性，我们将确保AnimatePresence组件确切地知道如何在装载和卸载dom时动画化该组件。如果我们不提供正确的值，动画可能无法工作。现在，为了在组件从dom中装载和卸载时制作动画，我们需要稍微更新一下我们的父组件。</p><pre class="ko kp kq kr gt my mz na nb aw nc bi"><span id="32a9" class="nd mc iq mz b gy ne nf l ng nh">import { useState } from "react";<br/>import { AnimatePresence } from "framer-motion";<br/>import MyComponent from "../components/component";</span><span id="e327" class="nd mc iq mz b gy ni nf l ng nh">export default function App() {<br/>  const [isOpen, setIsOpen] = useState();</span><span id="56c5" class="nd mc iq mz b gy ni nf l ng nh">  return (<br/>    &lt;div&gt;<br/>      &lt;button onClick={() =&gt; setIsOpen(!isOpen)}&gt;<br/>        Toggle component<br/>      &lt;/button&gt;</span><span id="0d34" class="nd mc iq mz b gy ni nf l ng nh">      <strong class="mz ir">&lt;AnimatePresence&gt;</strong><br/>        {<strong class="mz ir">isOpen</strong> &amp;&amp; (<br/>          &lt;MyComponent&gt;<br/>            &lt;h3&gt;This will animate&lt;/h3&gt;<br/>          &lt;/MyComponent&gt;<br/>        )}<br/>      <strong class="mz ir">&lt;/AnimatePresence&gt;</strong><br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="1717" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">现在，这就是我们的组件应该看起来的样子。当第一次单击按钮时，组件将在页面上显示动画，当再次单击它时，它将在页面上显示动画。因为我们在组件上指定了初始、动画和退出属性，所以framer-motion现在知道如何在不同状态之间制作动画。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi nx"><img src="../Images/69aea25b9958e381b180155852b6b146.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*BDGAjKuPOMFK13QDieklag.gif"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">一个按钮被点击切换黑色文本说“这将动画”从左边出来，在一个快速的“反弹”过渡。再次单击该按钮时，它继续向右移动，然后消失。</figcaption></figure><h1 id="d8e7" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">在组件状态之间制作动画</h1><p id="24cc" class="pw-post-body-paragraph ld le iq lf b lg mt jr li lj mu ju ll lm mv lo lp lq mw ls lt lu mx lw lx ly ij bi translated">现在，让我们假设你的组件本身有不同的本地状态——当它改变时，你想让你的元素活动起来。我们可以通过使用motion元素和layout属性来实现这一点。我们将通过创建一个相当普通但重要的组件——交换机来尝试这一点。</p><pre class="ko kp kq kr gt my mz na nb aw nc bi"><span id="8264" class="nd mc iq mz b gy ne nf l ng nh">import { motion } from "framer-motion";</span><span id="1d37" class="nd mc iq mz b gy ni nf l ng nh">export default function Switch({ isOn, onToggle }) {<br/>  const styles = {<br/>    wrapper: {<br/>      display: "flex",<br/>      <strong class="mz ir">justifyContent: isOn ? "flex-end" : "flex-start",</strong><br/>      borderRadius: 50,<br/>      width: 60,<br/>      padding: 4,<br/>    },<br/>    handle: {<br/>      height: 25,<br/>      width: 25,<br/>      background: "#fff",<br/>      borderRadius: "50%",<br/>    },<br/>  };</span><span id="a9cc" class="nd mc iq mz b gy ni nf l ng nh">return (<br/>    &lt;<strong class="mz ir">motion.div</strong><br/>      style={styles.wrapper}<br/>      onClick={() =&gt; onToggle(!isOn)}<br/>      <strong class="mz ir">animate={{ background: isOn ? "#006aff" : "#ddd" }}</strong><br/>      <br/>    &gt;<br/>      <strong class="mz ir">&lt;motion.div</strong> <strong class="mz ir">layout</strong> style={styles.handle} /&gt;<br/><strong class="mz ir">    &lt;/motion.div&gt;</strong><br/>  );<br/>}</span></pre><p id="c8ea" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">通过在我们的父组件中这样使用它:</p><pre class="ko kp kq kr gt my mz na nb aw nc bi"><span id="5711" class="nd mc iq mz b gy ne nf l ng nh">import { useState } from "react";<br/>import Switch from "../components/switch";</span><span id="0f9f" class="nd mc iq mz b gy ni nf l ng nh">export default function App() {<br/>  const [isOn, setIsOn] = useState();</span><span id="2936" class="nd mc iq mz b gy ni nf l ng nh">  return &lt;Switch isOn={isOn} onToggle={() =&gt; setIsOn(!isOn)} /&gt;;<br/>}</span></pre><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi nx"><img src="../Images/3481973a542752c07269714908abd02f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qAF5Nxq5ONRUEoZUT-z4ig.gif"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">空白页上的一个开关组件，通过单击它可以在打开和关闭状态之间切换。当处于on状态时，开关具有蓝色背景，当处于off状态时，开关具有灰色背景。</figcaption></figure><h1 id="8ef5" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">制作多个组件的动画</h1><p id="e014" class="pw-post-body-paragraph ld le iq lf b lg mt jr li lj mu ju ll lm mv lo lp lq mw ls lt lu mx lw lx ly ij bi translated">因此，利用我们新收集的关于如何轻松制作React组件动画的知识，我们现在将把这些知识结合起来，制作一个具有多个组件的更真实的示例动画。Framer-motion的功能肯定比我们在本文中要介绍的多得多，但是这些例子肯定会帮助您开始制作React组件动画的旅程。</p><h2 id="a57d" class="nd mc iq bd md ny nz dn mh oa ob dp ml lm oc od mn lq oe of mp lu og oh mr oi bi translated">示例:动画通知</h2><p id="ae8b" class="pw-post-body-paragraph ld le iq lf b lg mt jr li lj mu ju ll lm mv lo lp lq mw ls lt lu mx lw lx ly ij bi translated">我们将在项目中创建一个名为Notification的新组件，从这里开始，我们将结合我们所学的知识，以专业的方式在布局中制作几个通知的动画。</p><p id="6891" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">下面是新组件的代码。它将使用motion元素以及initial、animate和exit属性来完成在dom中装载和卸载时所需的转换。</p><p id="6e7e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们还将应用layout prop来确保AnimatePresence知道每个组件应该知道它的兄弟组件，以便为包装器创建平滑的高度调整。</p><pre class="ko kp kq kr gt my mz na nb aw nc bi"><span id="3f1d" class="nd mc iq mz b gy ne nf l ng nh">import { motion } from "framer-motion";</span><span id="a7ae" class="nd mc iq mz b gy ni nf l ng nh">export default function Notification({ title, description, onClose, id }) {<br/>  const styles = {<br/>    wrapper: {<br/>      boxShadow: "0px 5px 30px 0px rgba(0,0,0,0.1)",<br/>      borderRadius: 5,<br/>      padding: 16,<br/>      margin: "1rem 0",<br/>    },<br/>  };</span><span id="de10" class="nd mc iq mz b gy ni nf l ng nh">  return (<br/>    &lt;<strong class="mz ir">motion.div<br/>      layout<br/>      initial={{ opacity: 0, x: 200 }}<br/>      animate={{ opacity: 1, x: 0 }}<br/>      exit={{ opacity: 0, x: 200 }}</strong><br/>      style={styles.wrapper}<br/>    &gt;<br/>      &lt;h2&gt;{title}&lt;/h2&gt;<br/>      &lt;p&gt;{description}&lt;/p&gt;<br/>      &lt;button onClick={() =&gt; onClose(id)}&gt;Close&lt;/button&gt;<br/>    <strong class="mz ir">&lt;/motion.div&gt;</strong><br/>  );<br/>}</span></pre><p id="b65f" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">为了使用该组件，我们将把它添加到父组件中:</p><pre class="ko kp kq kr gt my mz na nb aw nc bi"><span id="a497" class="nd mc iq mz b gy ne nf l ng nh">import { useState } from "react";<br/>import { AnimatePresence } from "framer-motion";<br/>import Notification from "../components/notification";</span><span id="ba49" class="nd mc iq mz b gy ni nf l ng nh">export default function App() {<br/>  const [notifications, setNotifications] = useState([]);</span><span id="b30e" class="nd mc iq mz b gy ni nf l ng nh">  const pushNotification = (notification) =&gt; {<br/>    setNotifications([...notifications, notification]);<br/>  };</span><span id="52ed" class="nd mc iq mz b gy ni nf l ng nh">  const styles = {<br/>    notifications: {<br/>      top: 0,<br/>      right: 0,<br/>      position: "fixed",<br/>    },<br/>  };</span><span id="22b1" class="nd mc iq mz b gy ni nf l ng nh">  return (<br/>    &lt;div&gt;<br/>      &lt;button<br/>        onClick={() =&gt;<br/>          pushNotification({<br/>            title: "Test notification",<br/>            description:<br/>              "This is a test notification that is being animated using framer-motion",<br/>            id: Math.random(),<br/>            onClose: (id) =&gt; {<br/>              setNotifications((currentNotifications) =&gt;<br/>                currentNotifications.filter(<br/>                  (notification) =&gt; notification.id !== id<br/>                )<br/>              );<br/>            },<br/>          })<br/>        }<br/>      &gt;<br/>        Push notification<br/>      &lt;/button&gt;</span><span id="e890" class="nd mc iq mz b gy ni nf l ng nh">      &lt;div style={styles.notifications}&gt;<br/>        <strong class="mz ir">&lt;AnimatePresence&gt;</strong><br/>          {notifications.map((notification) =&gt; (<br/>            &lt;Notification {...notification} <strong class="mz ir">key={notification.id}</strong> /&gt;<br/>          ))}<br/>        <strong class="mz ir">&lt;/AnimatePresence&gt;</strong><br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi nx"><img src="../Images/ca3f2865dd670468bbd16532c9c193ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*fGVmBIoeB8hJlp38GD-ayg.gif"/></div></div></figure><p id="2c52" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">瞧啊。我们现在已经建立了一种方法来动画显示页面上的通知。与没有任何转换的通知在页面上出现和消失相比，这极大地增强了用户的体验。仅仅通过提供一些道具和用动画包装我们的组件，我们就做到了这一点。这只是像framer-motion这样的动画库的皮毛。</p><h1 id="6a17" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">下一步是什么？</h1><p id="2dbf" class="pw-post-body-paragraph ld le iq lf b lg mt jr li lj mu ju ll lm mv lo lp lq mw ls lt lu mx lw lx ly ij bi translated">根据你在行业中的地位，动画可能不是你产品中最重要的部分。例如，如果你正在启动一个创业公司或者构建一个非常公司化的软件，动画化每一个React组件可能不是一个很好的投资回报(ROI)。但是，如果你在一家非常重视客户体验的大公司工作，或者你正在建立自己的初创公司，并且非常专注于设计，那么制作组件动画肯定可以增强客户体验和应用程序的总体感觉。</p><p id="7750" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">动画真的要看观众。如果你正在为孩子开发一个应用程序，那么这或多或少是必要的。另一方面——如果你正在为老年人或某些残疾人建造一些东西，你应该考虑减少你的应用程序的运动量。网上有很多很棒的资源，教你如何管理它，并确保每个用户都能获得最愉快的体验。感谢您的阅读，并祝您的React组件动画之旅好运！</p></div></div>    
</body>
</html>