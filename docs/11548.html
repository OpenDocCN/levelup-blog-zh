<html>
<head>
<title>React Text Input Losing Focus After Each Keypress</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对每次按键后失去焦点的文本输入做出反应</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/react-text-input-losing-focus-after-each-keypress-dd6eabfe2f7c?source=collection_archive---------0-----------------------#2022-03-25">https://levelup.gitconnected.com/react-text-input-losing-focus-after-each-keypress-dd6eabfe2f7c?source=collection_archive---------0-----------------------#2022-03-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="87c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个bug花了我一段时间才弄明白，所以我想分享一下原因和修复方法。</p><p id="3405" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在表单上输入了简单的文本。</p><p id="82a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你在文本输入中输入一个“r ”,它会显示“r ”,然后焦点会转移到其他地方。不确定在哪里。但不再输入文本。因此，他们输入的第二个字符不会出现。</p><p id="eb2b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你想输入一个完整的单词，比如“foo ”,你必须输入“f”。然后点击返回文本输入。然后键入“o”。点击返回文本输入。然后输入最后一个“o”。</p><p id="c3e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">显然这是混乱的。</p><p id="5967" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">问题是，我在另一个组件中定义了一个组件。</p><p id="2e51" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以在函数内部定义函数。因为我的组件只是函数，所以你应该能够在另一个函数组件中定义一个函数组件。</p><p id="8716" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是行不通。</p><p id="7ac1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以在另一个组件中定义一个类似于<em class="kl">组件的</em>函数，如下所示:</p><p id="0e44" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe km kn ko kp b">const renderHeader = (x) =&gt; { return &lt;div&gt;{x}&lt;/div&gt; }</code></p><p id="781b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">renderHeader只是一个返回一些JSX的函数。严格地说，它不是react组件。你完全可以在另一个函数组件中定义这个花花公子，它非常好用。</p><p id="ae8b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是要做两个细微的改变，就像这样:</p><p id="0087" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">const <strong class="jp ir"> R </strong> enderHeader = ( <strong class="jp ir">道具</strong>)=&gt;{ return&lt;div&gt;{<strong class="jp ir">道具。</strong> x} &lt; /div &gt; }</p><p id="4dbb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，它是一个真正的组件。然后嘣！！现在你变得疯狂“失去焦点”的行为。</p><p id="237c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了解决这个问题，我简单地将RendorHeader函数移到了顶层函数中，这样就解决了这个问题。</p></div></div>    
</body>
</html>