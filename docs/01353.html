<html>
<head>
<title>A 10 Line React Accordion Using Native HTML Tags</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用本地HTML标签的10行React Accordion</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-10-line-react-accordion-using-native-html-tags-8217f4b0388c?source=collection_archive---------8-----------------------#2019-12-16">https://levelup.gitconnected.com/a-10-line-react-accordion-using-native-html-tags-8217f4b0388c?source=collection_archive---------8-----------------------#2019-12-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/48f942022a7a91c753158a4c5fd3b2e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NiEZ9hC_6IbqJ949t5gAwg.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">手风琴！</figcaption></figure><p id="a192" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在最近的一个项目中，我在React应用程序中需要一个accordion组件。我有几个选择，比如使用<a class="ae ld" href="https://v1.material-ui.com/demos/expansion-panels/" rel="noopener ugc nofollow" target="_blank"> Material UI </a>或者一些开源组件<a class="ae ld" href="https://reactjsexample.com/tag/accordion/" rel="noopener ugc nofollow" target="_blank">这个</a>和<a class="ae ld" href="https://codepen.io/adamaoc/pen/wBGGQv" rel="noopener ugc nofollow" target="_blank">这个</a>。</p><p id="6181" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在我的用例中，accordion选项集是动态的，它们本身携带着是否应该打开的信息。</p><p id="4832" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我尝试了几个组件，但一两天后，我总是不得不回去删除组件或自己添加一些额外的行为。在大多数手风琴组件中，父母跟踪打开部分的状态，孩子使用一个变化处理器来通知父母何时应该打开它们。</p><p id="8da5" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">所以，我自己用几行代码创建了一个，没有使用任何第三方库。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div class="gh gi le"><img src="../Images/156db9f993595f91a7298984de11d0b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*aalq4u2YD2Zl1EBeBuTvug.png"/></div></figure><p id="5645" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我来介绍一下HTML <code class="fe lj lk ll lm b">&lt;detail&gt;</code>标签。</p><p id="04d3" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这个标签本身带有按需显示/隐藏特性，这是accordion的核心。我们将使用其中的一组来创建我们的组件，这将节省我们自己处理打开和关闭行为的几十行代码。这可以用来创建我们的交互式小部件，它将有一个决定是否显示或隐藏内容的<code class="fe lj lk ll lm b">open</code>道具。除了React之外，所有这些都是一个<em class="ln">非JavaScript </em>小部件。</p><p id="994d" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">助手链接:<a class="ae ld" href="https://www.w3schools.com/tags/tag_details.asp" rel="noopener ugc nofollow" target="_blank">详细标签</a></p><p id="5861" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们还需要一个标签，那就是<code class="fe lj lk ll lm b">&lt;summary&gt;</code>。该标签定义了一个标题，单击该标题可以显示或隐藏内容部分。它还带有一个内置的切换箭头，我们可以定制。</p><p id="a748" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这是它在普通HTML中的样子:</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/be502c62d283421c1b8042970347d9c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:736/format:webp/1*eeg0SqiPjBIX06QtQxc7Bw.png"/></div></figure><h1 id="f404" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">手风琴部件</h1><pre class="lf lg lh li gt mn lm mo mp aw mq bi"><span id="ca5f" class="mr lq it lm b gy ms mt l mu mv">function Accordion({ children: options }) {<br/>  const toOpen = options.props.open ? true : null;<br/>  return options.map(options =&gt; (<br/>    &lt;details open={toOpen}&gt;{options}&lt;/details&gt;<br/>  ));<br/>}</span></pre><p id="4cdc" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这里要注意两件事:</p><ol class=""><li id="0f5b" class="mw mx it kh b ki kj km kn kq my ku mz ky na lc nb nc nd ne bi translated"><code class="fe lj lk ll lm b">children</code>不管他们愿不愿意开，都带着财物。这里我们把它改名为<code class="fe lj lk ll lm b">options</code>。我们使用它包含的<code class="fe lj lk ll lm b">open</code>道具来决定手风琴部分是否应该打开。</li><li id="dc48" class="mw mx it kh b ki nf km ng kq nh ku ni ky nj lc nb nc nd ne bi translated">在JSX，<code class="fe lj lk ll lm b">props</code>编译成普通的JavaScript对象，然后作为属性应用到HTML中。因此，我们返回<code class="fe lj lk ll lm b">null</code>来禁止组件被添加到HTML中。由于我们使用了<code class="fe lj lk ll lm b">null</code>而不是<code class="fe lj lk ll lm b">boolean</code>，它不会将道具视为存在，也不会将其包含在DOM中。详细的解释:</li></ol><div class="nk nl gp gr nm nn"><a href="https://stackoverflow.com/questions/41798027/react-inline-conditional-component-attribute/41798074#41798074" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">反应内联条件组件属性</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">首先，JSX只是React.createElement的语法糖。所以，它可能看起来像，但是，在现实中，你不…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">stackoverflow.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob jz nn"/></div></div></a></div><p id="d900" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">它将被这样使用:</p><pre class="lf lg lh li gt mn lm mo mp aw mq bi"><span id="8958" class="mr lq it lm b gy ms mt l mu mv">&lt;Accordion&gt;<br/>   ...Options<br/>&lt;/Accordion&gt;</span></pre><h1 id="3bf7" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">选项组件</h1><p id="c09a" class="pw-post-body-paragraph kf kg it kh b ki oc kk kl km od ko kp kq oe ks kt ku of kw kx ky og la lb lc im bi translated">这将是手风琴中每一节的内容。它使用一个<code class="fe lj lk ll lm b">&lt;summary&gt;</code>标签来显示可点击部分的标签(标题)。它为每个部分呈现<code class="fe lj lk ll lm b">children</code>,不需要任何额外的JavaScript。</p><pre class="lf lg lh li gt mn lm mo mp aw mq bi"><span id="7470" class="mr lq it lm b gy ms mt l mu mv">function Option({ label, children }) {<br/>  return (<br/>    &lt;React.Fragment&gt;<br/>      &lt;summary&gt;<br/>        {label}<br/>      &lt;/summary&gt;<br/>      {children}<br/>    &lt;/React.Fragment&gt;<br/>  );<br/>}</span></pre><p id="939d" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我是这样用的:</p><pre class="lf lg lh li gt mn lm mo mp aw mq bi"><span id="23bc" class="mr lq it lm b gy ms mt l mu mv">&lt;Accordion&gt;<br/> {this.getOptions(status)}<br/>&lt;/Accordion&gt;</span></pre><p id="338f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">获取选项列表的代码:</p><pre class="lf lg lh li gt mn lm mo mp aw mq bi"><span id="2d55" class="mr lq it lm b gy ms mt l mu mv">function getOptions(status) {<br/> // status decides which options to return with what open flag<br/>return [<br/>     ...moreOptions, <br/>     &lt;Option label="heading" open={status === "status1"}&gt;<br/>        &lt;Component1<br/>          someProp={someProp}<br/>        /&gt;<br/>     &lt;/Option&gt;<br/>   ]</span><span id="0804" class="mr lq it lm b gy oh mt l mu mv">}</span></pre><p id="b0d0" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这是应用了一些CSS的最终输出。</p><figure class="lf lg lh li gt ju"><div class="bz fp l di"><div class="oi oj l"/></div></figure><blockquote class="ok ol om"><p id="80a5" class="kf kg ln kh b ki kj kk kl km kn ko kp on kr ks kt oo kv kw kx op kz la lb lc im bi translated"><em class="it">注意:禁用摘要组件中的默认图标:</em></p></blockquote><pre class="lf lg lh li gt mn lm mo mp aw mq bi"><span id="ae1d" class="mr lq it lm b gy ms mt l mu mv">summary::-webkit-details-marker {<br/>  display: none;<br/>}</span></pre><p id="9692" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在你可以随意摆弄它了。对于简单的用例，不要下载和保存第三方库通常是明智的。我试了5次，才决定只用不到10行代码就能做到，并不断添加第三方组件。简单的功能通常可以提取出来独立使用。</p><p id="1f4e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">谢谢你坚持到帖子的最后，你太棒了！<br/>如果你觉得有帮助，请分享它，或者在<a class="ae ld" href="https://twitter.com/Dpkahuja" rel="noopener ugc nofollow" target="_blank"> twitter </a>:)上给我打个招呼</p></div></div>    
</body>
</html>