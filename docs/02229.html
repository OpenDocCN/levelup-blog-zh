<html>
<head>
<title>How to pass data between NGX Bootstrap modal and parent</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在NGX引导模式和父模式之间传递数据</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-pass-data-between-ngx-bootstrap-modal-and-parent-e348cd596cf7?source=collection_archive---------1-----------------------#2020-02-28">https://levelup.gitconnected.com/how-to-pass-data-between-ngx-bootstrap-modal-and-parent-e348cd596cf7?source=collection_archive---------1-----------------------#2020-02-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="f601" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将数据从父模型传递到模型，并从模型获得对父模型的响应，这是我们在开发时经常遇到的情况。这篇文章给出了一个初级的演示，但是在它变得令人厌烦之前，你可以自由地直接跳过主题🤠。</p><ul class=""><li id="6a53" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated">如何将数据从父节点传递到模态节点</li><li id="76e7" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">如何将数据从模态传递到父代</li></ul><p id="4bc6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个例子中，我使用一个<em class="la">项目列表组件</em>作为父组件，使用<em class="la">添加项目表单</em>作为模态组件😉。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/bbfb5eadc3bac16644f5ea205db6d733.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MOpvl4GfcXlaoabcqlxS7A.png"/></div></div></figure><h2 id="2acd" class="ln lo iq bd lp lq lr dn ls lt lu dp lv jy lw lx ly kc lz ma mb kg mc md me mf bi translated">启动项目</h2><p id="e04f" class="pw-post-body-paragraph jn jo iq jp b jq mg js jt ju mh jw jx jy mi ka kb kc mj ke kf kg mk ki kj kk ij bi translated">首先建立一个新的angular项目，安装<em class="la">ngx-bootstrap model</em>。</p><p id="0f9f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ml mm mn mo b">ng add ngx-bootstrap — component modals</code></p><p id="d39d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建一个简单的组件<em class="la"> ItemList </em>来显示添加到数组中的项目列表。<br/> <code class="fe ml mm mn mo b">ng g c itemList</code></p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated"><em class="mv">item-list.component.html</em></figcaption></figure><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated"><em class="mv"> item-list.component.ts </em></figcaption></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/f045783ef022ca81c6016ef132127d3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*nRRS348_dLx19PMsK_Xp3Q.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">完成的项目列表</figcaption></figure><p id="457f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们创建另一个组件作为模态。</p><p id="5134" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ml mm mn mo b">ng g c itemAdd</code></p><p id="9351" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="la">的第二个组件添加了一个新项目</em>，它将在将来用作模态。此外，我写了一个简单的函数叫做<code class="fe ml mm mn mo b">saveToList()</code>，它也将在未来实现。现在，我已经放了一个简单的控制台日志，只是为了显示输入字段中的值。</p><p id="137e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="la"> numberOfItems </em>将是现有数组中的项目数。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated"><em class="mv">item-add.component.html</em></figcaption></figure><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated"><em class="mv">项目-添加组件. ts </em></figcaption></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/cd77f2c4a435e78e891142e12ec44b8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*OVYJ5chmDiB13uZFQAzPHA.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">已完成添加项目组件</figcaption></figure><h2 id="ab74" class="ln lo iq bd lp lq lr dn ls lt lu dp lv jy lw lx ly kc lz ma mb kg mc md me mf bi translated">添加一个模态</h2><p id="2fd7" class="pw-post-body-paragraph jn jo iq jp b jq mg js jt ju mh jw jx jy mi ka kb kc mj ke kf kg mk ki kj kk ij bi translated">让我们修改代码，当点击<em class="la">添加新项目</em>按钮时，打开<em class="la">添加项目表单</em>作为模态。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated"><em class="mv"> item-list.component.ts </em></figcaption></figure><p id="4355" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不要忘记将<em class="la"> ItemAddComponent </em>添加到<em class="la"> app.module.ts </em>中的<em class="la"> entryComponents </em>列表中</p><pre class="lc ld le lf gt my mo mz na aw nb bi"><span id="e125" class="ln lo iq mo b gy nc nd l ne nf">providers: [],<br/>entryComponents: [ItemAddComponent],</span></pre><h2 id="6139" class="ln lo iq bd lp lq lr dn ls lt lu dp lv jy lw lx ly kc lz ma mb kg mc md me mf bi translated">将值从父级传递到模态</h2><p id="e2da" class="pw-post-body-paragraph jn jo iq jp b jq mg js jt ju mh jw jx jy mi ka kb kc mj ke kf kg mk ki kj kk ij bi translated">我们可以简单地使用initialState将初始值传递给模态😊</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated"><em class="mv"> item-list.component.ts </em></figcaption></figure><p id="509d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要从添加项目模式中读取该值，</p><p id="7791" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">初始化modal中的列表，<em class="la"> item-add.component.ts </em></p><p id="5a9b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ml mm mn mo b">list: any[] = [];</code></p><p id="a249" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后<em class="la"> initialState </em>列表可以作为“<em class="la">list[]”</em>访问。</p><p id="0ca0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们正在发送一个样本数据“测试”,它可以作为列表[0]从<em class="la">item-add.component.html</em>访问</p><p id="ae16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ml mm mn mo b">&lt;label&gt;Number of Items : &lt;/label&gt; {{list[0]}}</code></p><p id="d4e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">想想看，我们想要<strong class="jp ir">将一个对象</strong>从<em class="la">项列表</em>中传递到模态中。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated"><em class="mv"> item-list.component.ts </em></figcaption></figure><p id="c6e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ml mm mn mo b">&lt;label&gt;Number of Items : &lt;/label&gt; {{list[0].value}}</code></p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ng"><img src="../Images/30fb87ea691e529943ad88d7fbe27e88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zoPVHwH__NkDhWNx7BKVAg.gif"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">将值从父级传递到模态</figcaption></figure><h2 id="14b9" class="ln lo iq bd lp lq lr dn ls lt lu dp lv jy lw lx ly kc lz ma mb kg mc md me mf bi translated">将值从模态传递给子级</h2><p id="0ea2" class="pw-post-body-paragraph jn jo iq jp b jq mg js jt ju mh jw jx jy mi ka kb kc mj ke kf kg mk ki kj kk ij bi translated">让我们看看如何从<em class="la">添加项目表单</em>向<em class="la">项目列表</em>传递一个值。在<em class="la"> item-add.component.ts </em>中声明一个<code class="fe ml mm mn mo b">EventEmitter</code></p><p id="be84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ml mm mn mo b">public event: EventEmitter&lt;any&gt; = new EventEmitter();</code></p><p id="c296" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">保存项目时发出事件。</p><pre class="lc ld le lf gt my mo mz na aw nb bi"><span id="20ac" class="ln lo iq mo b gy nc nd l ne nf">triggerEvent(item: string) {<br/>    this.event.emit({ data: item , res:200 });<br/>}</span></pre><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated"><em class="mv">项目-添加组件. ts </em></figcaption></figure><p id="b75f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<em class="la"> item-list.component.ts </em>中，我们可以<em class="la">订阅</em>到<em class="la">事件发射器</em>。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated"><em class="mv"> item-list.component.ts </em></figcaption></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ng"><img src="../Images/7e7177ba9474df6fef4426e08c63ecf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1J2XOA2XneWrIXW-rctOGw.gif"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">在父级和模态之间传递数据</figcaption></figure><p id="6ae7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完整代码可以在这里找到<a class="ae kl" href="https://github.com/RandulaKoralage/modalDataPassing/tree/dev" rel="noopener ugc nofollow" target="_blank"/>。</p></div></div>    
</body>
</html>