<html>
<head>
<title>Bitcoin Proof of Work — The Only Article You Will Ever Have to Read</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">比特币工作证明——你必须阅读的唯一一篇文章</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/bitcoin-proof-of-work-the-only-article-you-will-ever-have-to-read-4a1fcd76a294?source=collection_archive---------0-----------------------#2021-05-20">https://levelup.gitconnected.com/bitcoin-proof-of-work-the-only-article-you-will-ever-have-to-read-4a1fcd76a294?source=collection_archive---------0-----------------------#2021-05-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f506" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">工作证明挖掘到底是如何工作的？嗯，其实很简单。让我给你一个提示:矿工不需要解决一个“复杂”的数学问题。爱因斯坦过去常常解决复杂的数学问题。矿工们只是在猜彩票。</h2></div><p id="23da" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你一直在看我的文章，你就知道我喜欢直奔主题。这不是小说，我不想浪费读者的时间。尽管如此，这篇文章还是很长，请多包涵！</p><h1 id="51a8" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">工作证明挖掘</h1><p id="67f8" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">挖掘是区块链中使用的方法，用于将事务分组到一个块中，将该块附加到区块链，并将新块广播到网络。采矿确保共识机制得以维持，并保持区块链的分散化。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/852cb40b3faa3ce3b7b83e15e107d0e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*AqgfTthyFsFAxHhXxa7NEg.png"/></div></figure><p id="45fb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将深入了解挖掘是如何工作的。这将是你唯一需要阅读的关于工作共识证明的文章。真的。都在这里了。</p><h1 id="b36c" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">挖掘算法</h1><p id="c6e2" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">工作证明区块链具有挖掘算法或加密哈希函数，将数据块作为输入，并创建一个小输出。散列函数的设计使得挖掘者必须不断地散列块，直到他得到想要的输出。继续阅读，我会告诉你这是如何发生的。为了完成这项任务，矿工需要尝试同样的任务一百万或十亿次，需要硬件、电力和时间。</p><p id="3faf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于比特币，挖掘哈希函数是SHA256，比特币应用双SHA256过程来提高安全性。以太坊用的是Ethash或者Dagger-Hashimoto Keccak。不同的工作证明区块链使用不同的算法，但最著名的是:</p><ul class=""><li id="af90" class="mj mk it kk b kl km ko kp kr ml kv mm kz mn ld mo mp mq mr bi translated">sha 256–256位“安全哈希算法”可以被通用CPU挖掘，并被比特币、字节币、Peercoin、Namecoin等加密货币使用。SHA256是一个非常简单的函数，即它是一个简单的布尔运算和32位加法。像这样的简单功能可以在ASIC芯片中的数字逻辑中实现，从而创建非常高效的采矿硬件。</li></ul><figure class="mc md me mf gt mg gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/7e1dc979211f7439518d228853dac75c.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/format:webp/1*b98JRSL9SuvqJOF_lTJLnA.png"/></div></figure><ul class=""><li id="67bd" class="mj mk it kk b kl km ko kp kr ml kv mm kz mn ld mo mp mq mr bi translated">Ethash — Ethash是以太坊的工作证明挖掘算法。因为它更占用内存，所以GPU提供了更高效的哈希速率。ASIC矿机也被开发出来开采Ethash。一些区块链使用这种算法，包括Etehreum和Ethereum经典。</li><li id="1fb7" class="mj mk it kk b kl mt ko mu kr mv kv mw kz mx ld mo mp mq mr bi translated">X11——Dash开发人员创建了X11算法，它被认为是最安全的算法之一。ASIC矿机也是为X11矿开发的。使用它的一些加密货币是Dash、Karmacoin和MonetaryUnit。</li><li id="71eb" class="mj mk it kk b kl mt ko mu kr mv kv mw kz mx ld mo mp mq mr bi translated">Scrypt — Scrypt也是一种广泛使用的挖掘算法。它比SHA256更快，使用它的领先区块链是🐶、莱特币、波特币、中银币和居尔登币。说到剧本，我制作了<a class="ae my" href="https://www.udemy.com/course/-dogecoin-course-the-first-complete-dogecoin-course/?referralCode=9416B1408224CE309DD8" rel="noopener ugc nofollow" target="_blank">第一个Dogecoin课程</a>。看看吧！</li><li id="4902" class="mj mk it kk b kl mt ko mu kr mv kv mw kz mx ld mo mp mq mr bi translated">crypto night——这是另一个名字很酷的工作证明算法。它被设计成通过CPU挖掘来提高效率。使用它的加密货币有<a class="ae my" href="https://medium.datadriveninvestor.com/rings-stealth-and-monero-awesomeness-99bcab969676" rel="noopener ugc nofollow" target="_blank"> Monero </a>，Dashcoin，DigitalNote，Bytecoin等等。</li></ul><h2 id="90fc" class="mz lf it bd lg na nb dn lk nc nd dp lo kr ne nf lq kv ng nh ls kz ni nj lu nk bi translated">CPU挖掘、GPU挖掘和ASIC挖掘</h2><p id="487e" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">CPU、GPU和ASIC挖掘以不同的方式响应不同的区块链算法。一些算法更容易被CPU挖掘(即具有更好的哈希速率),更通用的GPU对简单计算来说资源更密集，对内存密集型算法或ASIC来说更好，它们是为特定目的而设计的。ASIC矿工，虽然效率很高，但是也有一些缺点。一些区块链开发者一直在试图更新协议，以使它们具有ASIC抗性，即不可能使用ASIC设备来开采。当这种情况发生时，ASIC挖掘器就变得毫无用处，因为它们是按照特定的算法设计的，不能执行任何其他任务。一些区块链开发者认为ASIC设备可能会增加集中化。</p><p id="de93" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，这仅适用于工作证明区块链，而不是<a class="ae my" href="https://medium.com/nerd-for-tech/proof-of-stake-what-is-and-how-does-it-work-1c8bd7f00303" rel="noopener">股权证明</a>或许可区块链。</p><h1 id="cb31" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">工作证明</h1><p id="d5e3" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">让我们先来看看工作证明，比特币的共识机制，以及大多数第一代区块链。工作证明是一种基于领导的共识机制。顺便说一句，如果你想解码比特币的genesis block coinbase交易，<a class="ae my" href="https://medium.com/geekculture/decoding-bitcoins-first-block-coinbase-transaction-aeefe87ceec0" rel="noopener">查看这篇文章</a>。</p><p id="5ba5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">矿工需要使用工作共识机制的证明，在比特币区块链和其他区块链中计算一个具有挑战性的彩票或数学问题。这有点像猜测彩票的号码🎲。一旦一个节点解决了彩票，他将结果广播给其他节点，一个新的块被附加到区块链。</p><p id="9f5e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">彩票的难度进行了调整，以确保所有矿工的计算能力平均每10分钟产生一个比特币块。假设网络中的矿工数量或计算能力增加，计算数学问题的难度将增加，以保持硬币分配/供应和块生产的可预测性。在这种情况下，当更多的人加入或离开网络时，工作难度的证明会进行调整。</p><p id="343e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在其他区块链，如以太坊，块可以添加不同的频率。例如，在以太坊中，每15秒增加一个新块。</p><p id="4753" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可以把工作证明看成是一串难以产生(既费时又耗资源)但一旦被发现，又很容易被别人核实的数据。</p><p id="e348" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">向区块链添加新区块需要一些工作的原因之一是为了使其更加安全。每个矿工需要解决一个困难的彩票来添加一个新的区块，但如果太容易，那么任何黑客都可以轻松地尝试添加新的区块或改变区块链对他有利。工作共识的证明是比特币成为人类历史上最安全的公共网络的原因。</p><p id="78e3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">数学问题只不过是猜测一个<strong class="kk iu">随机数</strong>，一长串经过数百万或数十亿次试错的数字。换句话说，暴力破解的结果。挖掘器必须猜测一个nonce，将其添加到当前头的散列中，重新散列该值，并将结果与目标散列进行比较。</p><p id="cc4d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我相信你也听说了采矿的困难。挖掘难度主要是衡量在区块链中找到一个新块的难度，或者换句话说，矿工需要强行找到一个小于目标哈希的哈希的概率有多低。</p><p id="a670" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我一直认为，当人们说矿工们正在做的事情是“解决一个非常复杂的数学问题”时，他们实际上正在做的事情是试图猜测一个“彩票”号码，这是非常有趣的。矿工不是爱因斯坦！他们不是在试图寻找宇宙的数学奇迹。🌌</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/7139d2eea312bcb3528ca2caf838f299.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*y_wEgvLm8bRaYu-CuNn5Yw.png"/></div></figure><p id="1d25" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在大多数公开的/未经许可的区块链，矿工们会因为他们的工作而得到一笔固定的报酬。这种奖励可能会支付他们与硬件和电力相关的费用，并且是继续运行网络的一种激励。2021年，比特币块奖励为6.25 BTC，并将持续到2024年再次减半(大约每4年减半，或者更准确地说，每21万块)。所以在2024年，比特币块奖励将是3.125 BTC。2028年将是1.5625 BTC，依此类推。因为这个区块奖励减半，比特币最高供应量上限为2100万比特币，2140年就要达到了。</p><p id="1241" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">工作证明主要由无需许可的区块链使用，任何人都可以向区块链添加节点，而区块链的节点身份未知。因此，有必要建立一种共识机制，允许节点以不信任的方式进行协作。</p><p id="6ba3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">工作证明占现有加密货币总市值的90%。它需要参与验证块的节点做一些困难的工作。矿工需要一定的激励来完成这项工作。我们还将看到，在比特币网络中挖掘一个区块需要许多万亿次计算。这就是为什么在所有的区块链工作证明中，矿工会得到一笔奖励，交易费或两者兼而有之。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/ca92342a9a5e8e1eb03bf4f1882801f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*O1mBdwbPK0zBdEgUiRsJ6A.png"/></div></figure><p id="3f32" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">工作证明背后的经济激励是如何在一个完全分散的网络中保持共识的完美例子。要成为工作证明区块链中的节点/矿工，需要硬件资源、电力和时间，但是如果节点遵守规则，即根据共识机制，则它们会获得奖励。如果节点试图攻击区块链，篡改数据或执行双重消费，他们将不会得到奖励，他们只会浪费资源。</p><p id="9089" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2020年，矿工们获得了价值约70亿美元的比特币作为集体奖励，以及用户支付的约8亿美元的比特币费用。不错吧。虽然当矿工是一项艰苦的工作。</p><p id="e5b0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">工作证明的优点:</p><ul class=""><li id="378f" class="mj mk it kk b kl km ko kp kr ml kv mm kz mn ld mo mp mq mr bi translated">网络的可扩展性(就节点数量而言)</li><li id="a76c" class="mj mk it kk b kl mt ko mu kr mv kv mw kz mx ld mo mp mq mr bi translated">安全性随着节点数量的增加而增加，即挖掘社区越大，安全性越高</li><li id="c652" class="mj mk it kk b kl mt ko mu kr mv kv mw kz mx ld mo mp mq mr bi translated">矿工因其对网络的计算能力贡献而获得激励</li><li id="f25c" class="mj mk it kk b kl mt ko mu kr mv kv mw kz mx ld mo mp mq mr bi translated">大多数情况下非常安全</li></ul><p id="2e11" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">工作证明的缺点:</p><ul class=""><li id="b23a" class="mj mk it kk b kl km ko kp kr ml kv mm kz mn ld mo mp mq mr bi translated">易受51%的攻击(在小型工作证明区块链)</li><li id="b056" class="mj mk it kk b kl mt ko mu kr mv kv mw kz mx ld mo mp mq mr bi translated">采矿难度通常会变得更难，采矿硬件很快就会过时(盈利能力仅在3年内就会变为零)</li><li id="c19e" class="mj mk it kk b kl mt ko mu kr mv kv mw kz mx ld mo mp mq mr bi translated">采矿成本高昂，通常需要专门的硬件才能盈利</li><li id="74ac" class="mj mk it kk b kl mt ko mu kr mv kv mw kz mx ld mo mp mq mr bi translated">它需要大量的电力</li><li id="99d7" class="mj mk it kk b kl mt ko mu kr mv kv mw kz mx ld mo mp mq mr bi translated">工作证明区块链通常具有较低的吞吐量(研究表明，工作证明区块链可以在不影响安全性的情况下实现每秒60个事务)</li><li id="54a9" class="mj mk it kk b kl mt ko mu kr mv kv mw kz mx ld mo mp mq mr bi translated">根据使用的区块链协议，在区块链验证交易需要时间，这就是为什么建议等待10到20分钟，直到比特币网络(1或2个区块)或以太坊区块链(约20个区块)验证/提交交易。另一方面，Dogecoin区块每1分钟开采一次。</li></ul><h2 id="b898" class="mz lf it bd lg na nb dn lk nc nd dp lo kr ne nf lq kv ng nh ls kz ni nj lu nk bi translated">哈希速率</h2><p id="41f6" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">哈希速率是硬件可以执行的计算哈希数。不同的硬件有不同的哈希速率。从CPU到GPU或ASIC芯片(专用集成电路)，采矿者试图拥有最高效的硬件，以便尽可能获得最佳散列率，这将增加他们在区块链开采区块并获得回报的可能性。</p><h2 id="263d" class="mz lf it bd lg na nb dn lk nc nd dp lo kr ne nf lq kv ng nh ls kz ni nj lu nk bi translated">困难</h2><p id="4207" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">这种困难表明，在区块链的工作证明中找到开采区块链新区块所需的散列值有多困难。难度表示矿工猜测散列的可能性/组合的数量。难度越大，挖掘者需要执行的工作就越多，以便猜测散列并创建新的块。比特币区块链调整了难度，平均每10分钟就有一个新的区块产生。如果更多的矿工加入比特币网络，从而贡献更多的哈希能力，难度将增加并调整，以便矿工平均每10分钟发现一次哈希。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/e485a91456336b1e38b9c12fe4014e00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*VBgnKjRYCbyitmAsWs-WhQ.png"/></div></figure><p id="01e6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">开采难度每2016个区块调整一次，考虑到每个区块平均10分钟，这大约需要两周时间。比特币算法非常容易提供这种调整。如果先前的2016块花费了多于或少于两周的时间来寻找，则难度以时间差的量与两周的量的比例来增加或减少。</p><p id="6a6b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">工作证明挖掘过程如何工作</strong></p><p id="b698" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">开采比特币比开采黄金还难。想象一下，你必须重复散列千万亿次，直到你找到正确的！</p><p id="4947" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不同的区块链可能有不同的机制，但让我们看看我们的创世区块链，比特币，作为一个例子。</p><p id="f0d9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在比特币挖矿中，矿工需要想出一个满足一定要求的块hash。为了得到这个散列，他们需要改变块中的一段数据，称为nonce，并且他们需要做很多次。这就是彩票猜测过程。听起来很复杂？别担心，让我们简单点。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/885fad5f6e0b8c392612a21b782491d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*C2TbwJ4zE0XCaU77GeYTmA.png"/></div></figure><p id="fac9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">全球比特币矿工平均要进行多少次哈希运算才能开采一个区块？嗯，我说过很多次了:</p><pre class="mc md me mf gt nm nn no np aw nq bi"><span id="4868" class="mz lf it nn b gy nr ns l nt nu">hashes per bitcoin<br/>= (network hash rate) / (6.25 BTC per 10 minutes)<br/>= (140 * Th / s) / (6.25 * BTC / (600 * s) )<br/>= 140 * 600 / 6.25 * Th / s / BTC * s<br/>= 13,440 Th / BTC<br/>= <strong class="nn iu">13,440,000,000,000,000 h/BTC</strong></span></pre><p id="0eec" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将当前网络每秒哈希速率除以6.25(每10分钟BTC区块奖励)，我们得到一个非常大的数字。</p><p id="82d2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">截至2021年1月，矿工平均需要计算13.44万亿次哈希才能生成一个比特币。如果我们把它乘以6.25，就需要84万亿次散列来挖掘一个单独的块！矿工们需要重复上图中的计算，确切地说是千万亿次，直到一个区块开采完毕。这就是为什么比特币挖矿耗费如此多的电力，但另一方面，却给了我们有史以来最安全的区块链。</p><p id="4290" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设你正试图独自找到我的比特币，而你拥有的是市场上最好的CPU，AMD锐龙9 3900X 12核处理器。以目前的难度，你需要<strong class="kk iu"> 225 730年</strong>才能开采出一个比特币区块。</p><p id="6624" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可惜用普通电脑挖矿比特币是蛮没用的。这在2009年和2010年时是可能的，当时网络中的哈希能力仍然很低，但目前只有非常强大的硬件，如专业的ASIC矿工才能完成这项工作。当时，没有多少人对开采比特币感兴趣，BTC价格也只有几分钱。</p><p id="f091" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">早期挖掘比特币的比特币早期信徒能够购买兰博基尼🚗。</p><p id="a465" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">但是……为什么挖掘比特币如此困难？？而挖掘过程是如何完成的？</strong></p><p id="7384" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如我们之前看到的，当更多的散列能力被添加到网络中时，工作证明的难度增加。块的难度和比特字段表示目标散列具有的零的数量。哈希开头的零的数量是挖掘者需要满足的条件。为了生成符合这一条件的散列，挖掘者必须遵循下面的过程，尝试不同的随机数，直到他们创建所需的散列。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/66fb7c03f18133cac4d64fd371679293.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/1*M7QCRMT1NAATWqMRU40ucw.png"/></div></figure><p id="1f02" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要创建块哈希(即挖掘块)，需要满足工作证明中的某些条件。根据所使用的算法，可能会有一些小的变化，但条件通常是找到一个值符合特定要求的散列。换句话说，散列需要以多个零开始。</p><p id="b07f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个过程非常简单，但非常重复(正如我们所看到的，矿工重复了数十亿或数万亿次)。</p><p id="84ca" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我画的图表非常清楚。根据该图，为了执行必要的工作来挖掘块并获得块散列，挖掘器将执行该任务。这就是块头中的一个字段nonce发挥作用的地方。nonce是一个32位的数字，挖掘器需要猜测，以便根据目标创建散列。</p><ol class=""><li id="d52f" class="mj mk it kk b kl km ko kp kr ml kv mm kz mn ld nw mp mq mr bi translated">挖掘器将创建块头，将其转换成一串数据</li><li id="c169" class="mj mk it kk b kl mt ko mu kr mv kv mw kz mx ld nw mp mq mr bi translated">挖掘器向数据添加一个随机数，并将其提供给哈希算法(随机数是挖掘器可以自由更改的块的唯一部分)</li><li id="9af7" class="mj mk it kk b kl mt ko mu kr mv kv mw kz mx ld nw mp mq mr bi translated">获取结果哈希</li><li id="42d9" class="mj mk it kk b kl mt ko mu kr mv kv mw kz mx ld nw mp mq mr bi translated">运行测试以检查是否满足条件，即目标哈希</li><li id="eefd" class="mj mk it kk b kl mt ko mu kr mv kv mw kz mx ld nw mp mq mr bi translated">如果满足条件，这意味着挖掘器找到了根据目标生成散列的nonce</li><li id="00e2" class="mj mk it kk b kl mt ko mu kr mv kv mw kz mx ld nw mp mq mr bi translated">如果不满足条件(最有可能)，挖掘器将尝试不同的现时，即，他返回到点2，尝试新的现时，直到它产生满足目标的散列</li></ol><p id="88f9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">矿工们很可能不得不执行这些计算千万亿次，直到他们得到正确的值。</p><p id="f860" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦一个挖掘者找到正确的散列，他将把该块广播到网络，并且其他挖掘者可以容易地验证该随机数根据目标产生散列。挖掘该块的矿工也将在该块中包括coinbase事务。该交易对应于他将获得的整体奖励。</p><h1 id="94d8" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">骰子、比特和目标</h1><p id="4b82" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">在挖掘中，挖掘者试图找到低于<strong class="kk iu">目标</strong>值的哈希值(这是每个区块链块中的一个字段)。哈希值必须低于块头中的位字段所代表的值。这也意味着目标散列必须以多个零开始。这个零的数量将很难增加。难度越大，挖掘一个块就越难，因为找到一个满足所需目标的hash就越难。</p><p id="e5ea" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为什么散列中的这些“零”会对难度产生如此大的影响？如果你认为散列一个有20个直0的块的概率是非常低的。这就像试图在千万亿张彩票中找到一张以20个0开头的彩票。或者和掷骰子一样，连续15次得到相同的数字。这是一个非常非常低的概率，这就是为什么它如此困难。</p><p id="411e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了说明概率以及获得比目标散列值低的具有大量零的散列值有多难，让我们想象我们正在玩骰子。投掷15个骰子并得到相同价值的概率是多少？</p><p id="ab46" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">pⁿ = (1/s)ⁿ</p><p id="0345" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设我们的骰子是6面骰子:</p><p id="dcdf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">1骰子:(1/6) = 0.16或16%的概率</p><p id="161c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2个骰子:(1/6) = 0.02(7)或2.77%的概率</p><p id="5daf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">4个骰子:(1/6)⁴ = 0.00077160493827或0.077160493827%概率</p><p id="c4d5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">6个骰子:(1/6)⁶ = 0.00002143347050或0.002143347050%概率</p><p id="5d1b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">15个骰子:(1/6)⁵= 0.0000000000212682249或0.0000000212682249%</p><p id="0073" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个概率意味着你需要平均投掷15个骰子470 184 984 737次才能让它们都面对相同的值。<strong class="kk iu">那是4700亿次！</strong></p><p id="f38f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你现在明白了吧，要让所有的骰子都有相同的值，或者让一个散列有这么多的“T4”零，这比看起来要困难得多。</p><p id="d7d8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们理解了这个概念，让我们用实际的公式来看看，看看矿工如何根据难度找到散列。</p><p id="04c2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">难度=最大目标/当前目标</p><p id="c1b0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以MAX_TARGET是为第一块设置的难度，基本上就是难度= 1，写成1d00ffff十六进制值。</p><p id="ae50" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们将386，867，735块的位值<strong class="kk iu"> </strong>转换为十六进制，我们将得到值0x170f2217。该值分为四个字节。第一个是索引，后面是3个字节。这种情况下，位是0x17的索引和0x0f2217的系数。在这里，0x意味着我们正在谈论一个十六进制数，又名hex，一个用于计算的数字系统。</p><p id="8ff5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">目标阈值是一个256位整数，哈希需要等于或小于该整数才能满足目标哈希。这是我们在挖掘过程中提到的目标散列。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi nx"><img src="../Images/07e610047f9b1bab485ec528e92502d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1CXp0bVDM67p0QKJ0qmP6w.png"/></div></div></figure><p id="6f8d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以将这个目标值与哈希值进行比较，遵循一个简单的等式:</p><p id="9b47" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">目标=系数* 2 ^(8 *(索引— 3))</p><p id="6860" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们首先需要将我们的比特值转换成十六进制:</p><p id="d7c1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">386，867，735±0x 170 f 2217</p><p id="1a6e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们用我们的值代替等式，</p><p id="8091" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">0x0f 2217 * 2^(0x08 *(0x 17–0x 03))</p><p id="365b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以使用Python计算器来帮助进行十进制到十六进制和十六进制到十进制的转换:</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/77dd669f6f97a567e143fbbf673ced45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*usU2cAo3uE4y4VHBx11geQ.png"/></div></figure><p id="45b4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从十六进制转换成十进制，我们得到，</p><p id="ad19" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">991767 x 2 ^(8 x(23–3))= 1449469094350757594478113895488529861555105250349678592</p><p id="0b0a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">十六进制的意思是</p><p id="8fd8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">0x<strong class="kk iu">0000 0000 0000 0000 00</strong>f 22170 000 000 000 000 000 000 000 000 000 000</p><p id="513a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">与数据块的哈希相比，我们看到我们的数据块哈希更低:</p><p id="d4cd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">0x<strong class="kk iu">0000 0000 0000 0000 0000 000</strong>92 F5 f 21 CD 6 db 1d 374252 d6e 343 BD 7 a 0 fcac 448 ef 01 a 5</p><p id="ce57" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">简单对吗？</p><p id="3d42" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以使用Python计算器直接到达目标点，检查散列值是否低于目标值。</p><p id="5263" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们使用以下等式来计算目标值:</p><p id="d916" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">目标=系数* 2 ^(8 *(指数-3)</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/b200436f072af32fd42a62198fe2dc7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*jHE6My-nCmuqAx9GSZMuZw.png"/></div></figure><p id="5cb9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如你所见，我们得到了完全相同的结果，这是一个目标值。如果你想自己试试，可以通过你的命令提示符下载python。</p><p id="5d92" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以检查块哈希是否低于目标值:</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/d31d7d9e86123dbfcb38dda387f893a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*1vA99ifA9iy8a4l1YSCplQ.png"/></div></figure><p id="f4e5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这最后一个函数显示块散列整数低于目标整数，意味着散列满足目标，即条件为真。<strong class="kk iu">耶！🤯🤠🦄🚀</strong></p><p id="1db3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">🚀请关注我，并查看我的🧱区块链课程:</strong></p><p id="9a1a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">🐶</strong> <a class="ae my" href="https://www.udemy.com/course/-dogecoin-course-the-first-complete-dogecoin-course/?referralCode=9416B1408224CE309DD8" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">有史以来第一次Dogecoin课程</strong> </a></p><p id="6f51" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">👨‍🎓</strong> <a class="ae my" href="https://www.udemy.com/course/fintech-technologies-cloud-and-cybersecurity/?referralCode=F1D4EA005A2881735A36" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">金融科技、云和网络安全课程</strong> </a></p><p id="b589" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">📖</strong><a class="ae my" href="https://www.amazon.com/dp/B091CYTX37/ref=sr_1_1?dchild=1&amp;keywords=unblockchain&amp;qid=1617186443&amp;s=digital-text&amp;sr=1-1" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu"/></a><a class="ae my" href="https://www.udemy.com/course/the-complete-nft-course-learn-everything-about-nfts/?referralCode=AAEE908D13D0E2276B19" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu">完整的NFTs教程</strong> </a></p><p id="4b01" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">👨‍🎓</strong> <a class="ae my" href="https://www.udemy.com/course/blockchain-deep-dive-from-bitcoin-to-ethereum-to-crypto/?referralCode=B8463EE382E6D313304B" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> Unblockchain课程</strong> </a> <strong class="kk iu"> —脑洞大开的区块链课程</strong></p></div></div>    
</body>
</html>