<html>
<head>
<title>Service Workers in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">服务人员在反应</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/service-workers-in-react-8bcaccfd0356?source=collection_archive---------3-----------------------#2020-07-23">https://levelup.gitconnected.com/service-workers-in-react-8bcaccfd0356?source=collection_archive---------3-----------------------#2020-07-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="3540" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">React中服务人员的简要指南</p><p id="24a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>是一个用于构建用户界面的Javascript库。它是基于组件的，允许开发者创建比普通Javascript更简单的用户界面。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="kr ks l"/></div></figure><blockquote class="kt ku kv"><p id="5d59" class="jn jo kw jp b jq jr js jt ju jv jw jx kx jz ka kb ky kd ke kf kz kh ki kj kk ij bi translated"><em class="iq">以后想看这个故事吗？保存在</em> <a class="ae kl" href="https://usejournal.com/?utm_source=medium.com&amp;utm_medium=blog&amp;utm_campaign=noteworthy&amp;utm_content=eid7" rel="noopener ugc nofollow" target="_blank"> <em class="iq">日记本</em> </a> <em class="iq">。</em></p></blockquote><p id="0c39" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">React有一个工具<code class="fe la lb lc ld b">create-react-app</code>，可以很容易地从头创建一个新的React项目。<code class="fe la lb lc ld b">create-react-app</code>工具创建一个默认的预配置项目，准备用<code class="fe la lb lc ld b">npm start</code>启动。这个<code class="fe la lb lc ld b">create-react-app </code>工具的一个很酷的特性是一个默认的服务工作者文件。</p><h1 id="71ac" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">什么是服务人员？</strong></h1><p id="288f" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">服务人员是您的浏览器在后台运行的脚本，独立于网页，允许使用不需要网页或用户交互的功能。当天的一个例子是<a class="ae kl" href="https://developers.google.com/web/updates/2015/03/push-notifications-on-the-open-web" rel="noopener ugc nofollow" target="_blank">推送通知</a>。服务人员允许工程师和开发人员对用户与应用程序的交互进行端到端控制。服务人员使您能够在页面存在之前运行JavaScript，创建更快的站点，并且即使在没有互联网连接的情况下也能够显示内容。</p><h1 id="1075" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">【服务人员属性】</strong></h1><p id="54ed" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">服务人员是渐进式web应用程序的核心。Progressive web applications简要地解释说，是一个使用现代网络功能向用户提供类似应用程序的体验的网络应用程序，但是，如果你想了解更多关于PWA的信息，请阅读更多<a class="ae kl" href="https://ionicframework.com/docs/core-concepts/what-are-progressive-web-apps" rel="noopener ugc nofollow" target="_blank">这里</a>。我们知道服务人员运行在一个独立的线程上，并允许用户不需要在线或使用应用程序的离线支持功能。现在，让我们来了解一下服务人员的属性或关键特征:</p><ul class=""><li id="cea5" class="mh mi iq jp b jq jr ju jv jy mj kc mk kg ml kk mm mn mo mp bi translated">在它自己的全局脚本上下文中运行，它是一个Javascript文件</li><li id="9a98" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">在独立于UI的线程上执行，因此不会直接绑定到特定页面</li><li id="2da1" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">无法直接访问DOM</li><li id="2e84" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">是事件驱动的(仅在使用时有效)</li><li id="abbf" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">服务人员需要HTTPS</li></ul><p id="1b96" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">服务人员的能力足以劫持连接、伪造和过滤响应。这就是为什么只有使用<a class="ae kl" href="https://love2dev.com/blog/how-https-works/" rel="noopener ugc nofollow" target="_blank"> HTTPS </a>服务页面时才能启用它们。这确保了一定程度的安全性，使服务人员能够在不被篡改的情况下完成网络旅程。</p><p id="bbc7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于服务工作器和UI位于不同的线程上，因此服务工作器不能直接访问DOM。服务人员和窗口可以通过<code class="fe la lb lc ld b">postMessage</code>方式通信。这允许消息来回传递。这需要每一侧的逻辑(在UI和服务工作器之间)来处理消息和触发不同的工作流。</p><h1 id="25b4" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">我们如何使用服务人员？</h1><p id="ecd5" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">正如我之前提到的，React有一个工具<code class="fe la lb lc ld b">create-react-app</code>，它带有预配置的文件。我创建了一个名为my-app的简单应用程序(我知道它有多有创意？)在下面的图片中，你可以看到当我点击我的<strong class="jp ir"> src </strong>文件夹时，里面有一个serviceWorker.js文件。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi mv"><img src="../Images/4dab93f89374bac897bd6ffdd9bab582.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MYlYPf5FBbNnLQg98h3Ruw.png"/></div></div></figure><p id="4555" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该文件很长，其中包含处理服务工作器生命周期方法的代码。第二个函数是register函数，但是默认情况下，您的服务工作器是未注册的。如果我们转到index.js文件，我们会发现服务工作器默认为unregister方法。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi nc"><img src="../Images/68b806d3ec4aa850fb6f5e47f0fc80d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tDoMmIfB0uYoLLM3g4PPjw.png"/></div></div></figure><p id="5a40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过将方法从未注册更改为注册，您已经设置了一个服务工作器功能！如果您在一个不同的环境中工作，并且需要在本地安装，您可以通过这个谷歌服务人员<a class="ae kl" href="https://developers.google.com/web/fundamentals/primers/service-workers" rel="noopener ugc nofollow" target="_blank">文档</a>了解更多信息并获取指导。通过使用<code class="fe la lb lc ld b">create-react-app</code>工具，我们节省了在服务工作者生命周期中编写大量代码的时间。下面是关于服务工作人员生命周期的图片。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi nd"><img src="../Images/8c3e84610d6c17b2f69b205c7b98a2e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HUnu3nbBSq2lDoOSllBkiA.png"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk translated"><a class="ae kl" href="https://developers.google.com/web/fundamentals/primers/service-workers" rel="noopener ugc nofollow" target="_blank">https://developer . Google . com/web/foundation/primer/service-workers</a></figcaption></figure><p id="893d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于我的视觉学习伙伴。</p><p id="1901" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本博客对服务人员进行了简要说明，但所有添加的文档以及额外的<a class="ae kl" href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers" rel="noopener ugc nofollow" target="_blank">资源</a>都做了更详细的说明。至少现在，当你醒来看着你的手机，instagram通知你谁喜欢你的照片，或者CoStar根据占星术的建议让你深入了解你身边发生的事情，你就知道服务人员已经就位，让这些通知在你不在应用程序中的时候出现。</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><p id="13fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">📝将这个故事保存在<a class="ae kl" href="https://usejournal.com/?utm_source=medium.com&amp;utm_medium=noteworthy_blog&amp;utm_campaign=tech&amp;utm_content=guest_post_read_later_text" rel="noopener ugc nofollow" target="_blank">日志</a>中。</p><p id="6b1c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">👩‍💻每周日早上醒来，你的收件箱里会有本周最值得关注的科技新闻。<a class="ae kl" href="https://usejournal.com/newsletter/noteworthy-in-tech/?utm_source=medium.com&amp;utm_medium=noteworthy_blog&amp;utm_campaign=tech&amp;utm_content=guest_post_text" rel="noopener ugc nofollow" target="_blank">阅读科技简讯</a>中值得注意的内容。</p></div></div>    
</body>
</html>