<html>
<head>
<title>Play a sound 🔔 when your Julia function is finished</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">播放声音🔔当你的朱丽亚函数完成时</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/play-a-sound-when-your-julia-function-is-finished-3daad599f174?source=collection_archive---------24-----------------------#2022-12-19">https://levelup.gitconnected.com/play-a-sound-when-your-julia-function-is-finished-3daad599f174?source=collection_archive---------24-----------------------#2022-12-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9759" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">当你的脚本完成时得到一个声音通知</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3596c91c4e9ff6373b0d7d3fd855dd08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dcvApRUNIPPnudJMe4L3vQ.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@theblowup?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">在<a class="ae ky" href="https://unsplash.com/s/photos/bell?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上放大</a></figcaption></figure><p id="0d55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很久很久以前，我使用r。有时我会有一些函数或<strong class="lb iu">进程需要很长时间才能完成</strong>，所以我会在等待结果的时候离开，在电脑上做些别的事情。问题是我从来不知道<strong class="lb iu">脚本什么时候会结束运行</strong>。幸运的是，R中有一个<code class="fe lv lw lx ly b">beep()</code>函数，当执行时<strong class="lb iu">会发出声音。所以我想，为什么不在朱莉娅身上做同样的事情呢？😉</strong></p><blockquote class="lz ma mb"><p id="e2f4" class="kz la mc lb b lc ld ju le lf lg jx lh md lj lk ll me ln lo lp mf lr ls lt lu im bi translated">当您没有足够的屏幕来关注您的长时间运行的脚本时，在您的计算机上播放一些声音是有用的。</p></blockquote></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><div class="kj kk kl km gt mn"><a href="https://towardsdatascience.com/build-your-first-neural-network-with-flux-jl-in-julia-10ebdfcf2fa3" rel="noopener follow" target="_blank"><div class="mo ab fo"><div class="mp ab mq cl cj mr"><h2 class="bd iu gy z fp ms fr fs mt fu fw is bi translated">在Julia中用Flux.jl构建你的第一个神经网络</h2><div class="mu l"><h3 class="bd b gy z fp ms fr fs mt fu fw dk translated">没有任何外部数据的初学者教程</h3></div><div class="mv l"><p class="bd b dl z fp ms fr fs mt fu fw dk translated">towardsdatascience.com</p></div></div><div class="mw l"><div class="mx l my mz na mw nb ks mn"/></div></div></a></div></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="304c" class="nc nd it bd ne nf ng nh ni nj nk nl nm jz nn ka no kc np kd nq kf nr kg ns nt bi translated">制造一些噪音！</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/b1f8d2884b6176f78a238ec798f5f550.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xCISMXRe0eZzL5DEBmX69A.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@gronemo?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Roméo A. </a>在<a class="ae ky" href="https://unsplash.com/s/photos/mario?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="9aa7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于前面提到的R包有一些马里奥的声音，这也是我想要的。幸运的是，我<a class="ae ky" href="https://themushroomkingdom.net/media/smb/wav" rel="noopener ugc nofollow" target="_blank">找到了这个网站</a>，那里有一堆<code class="fe lv lw lx ly b">wav</code>格式的声音，所以我很快<strong class="lb iu">和Julia </strong>一起下载了这些声音:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="e6db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的，在Julia base中有一个<code class="fe lv lw lx ly b">download</code>功能，可以让你将互联网上的文件直接下载到本地机器上的一个文件名中。</p><p id="2477" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们必须以某种方式播放这些声音。为此我们有<code class="fe lv lw lx ly b">WAV.jl</code>包，你可以在REPL输入<code class="fe lv lw lx ly b">]</code>后运行<code class="fe lv lw lx ly b">add WAV</code>或者运行<code class="fe lv lw lx ly b">import Pkg; Pkg.add("WAV")</code>来添加。</p><blockquote class="nx"><p id="bafc" class="ny nz it bd oa ob oc od oe of og lu dk translated">WAV包的GitHub repo可以在<a class="ae ky" href="https://github.com/dancasimiro/WAV.jl" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p></blockquote><p id="38e2" class="pw-post-body-paragraph kz la it lb b lc oh ju le lf oi jx lh li oj lk ll lm ok lo lp lq ol ls lt lu im bi translated">要播放声音，我们可以用<code class="fe lv lw lx ly b">wavplay</code>直接从磁盘播放，也可以先读入然后播放:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="f5e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，<code class="fe lv lw lx ly b">wavread</code>返回一组浮点和其他位，我们需要将它们分别传递给<code class="fe lv lw lx ly b">wavplay</code>。这就是索引的意义所在。</p><p id="61d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面有点难看，我们把它抽象掉，变成一个<code class="fe lv lw lx ly b">beep()</code>函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="e386" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要使用它，我们只需选择一个下载的声音，并播放一些好的老马里奥兄弟的声音:</p><pre class="kj kk kl km gt om ly on oo aw op bi"><span id="1ea5" class="oq nd it ly b gy or os l ot ou">beep("game_over")<br/>beep("coin")<br/>beep("stage_clear")</span></pre><h1 id="1fb5" class="nc nd it bd ne nf ov nh ni nj ow nl nm jz ox ka no kc oy kd nq kf oz kg ns nt bi translated">用宏启动！</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pa"><img src="../Images/de547749dd27a5083ec6510d1af795e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iJp_WLA4qDJslfBobWnjaA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@geekyshots?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">在<a class="ae ky" href="https://unsplash.com/s/photos/mario?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的</a>极客拍摄</figcaption></figure><p id="1fd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不喜欢用对<code class="fe lv lw lx ly b">beep()</code>的函数调用来破坏我的代码，所以我想我会把这整个事情变成一个宏。<strong class="lb iu">我不是Julia macros的专家</strong>——尽管我发现元编程很吸引人——所以对这里的一切都要有所保留。我在这里基本上使用宏作为Python中的函数装饰器，所以只有基本的东西。</p><p id="9936" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我如何设法把<code class="fe lv lw lx ly b">beep()</code>变成<code class="fe lv lw lx ly b">@beep</code>的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="5531" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将评估原始表达式，收集其结果，然后播放声音。你可以这样称呼它:</p><pre class="kj kk kl km gt om ly on oo aw op bi"><span id="77de" class="oq nd it ly b gy or os l ot ou">@beep println("hello") "coin"</span></pre><p id="52de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它还将保留返回值，因此您可以将它赋给任何您想要的值:</p><pre class="kj kk kl km gt om ly on oo aw op bi"><span id="911e" class="oq nd it ly b gy or os l ot ou"># test function that takes longer to run<br/><strong class="ly iu">julia&gt; </strong>fib(n) = n &lt; 2 ? 1 : fib(n-2) + fib(n-1)<br/>fib (generic function with 1 method)</span><span id="abb8" class="oq nd it ly b gy pb os l ot ou"><strong class="ly iu">julia&gt;</strong> x = <a class="ae ky" href="http://twitter.com/beep" rel="noopener ugc nofollow" target="_blank">@beep</a> 10 "coin"<br/>10</span><span id="5d3c" class="oq nd it ly b gy pb os l ot ou"><strong class="ly iu">julia&gt;</strong> y = <a class="ae ky" href="http://twitter.com/beep" rel="noopener ugc nofollow" target="_blank">@beep</a> fib(40) "game_over"<br/>165580141</span><span id="78ba" class="oq nd it ly b gy pb os l ot ou"><strong class="ly iu">julia&gt;</strong> println("x is $x and fib(40) is $y")<br/>x is 10 and fib(40) is 165580141</span></pre><p id="43a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了设置默认声音，我制作了第二个宏，作为上面宏的一个特殊变体——如果你知道更好的方法，请在评论中告诉我！🙏我很乐意接受如何让这一切变得更好的建议。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><pre class="kj kk kl km gt om ly on oo aw op bi"><span id="17eb" class="oq nd it ly b gy or os l ot ou"><strong class="ly iu">julia&gt; </strong>@beep fib(40)<br/>165580141</span></pre><h1 id="d5a4" class="nc nd it bd ne nf ov nh ni nj ow nl nm jz ox ka no kc oy kd nq kf oz kg ns nt bi translated">去收集所有的硬币！</h1><p id="ca7b" class="pw-post-body-paragraph kz la it lb b lc pc ju le lf pd jx lh li pe lk ll lm pf lo lp lq pg ls lt lu im bi translated">谢谢你一直读到最后。我希望你能从<a class="ae ky" href="https://github.com/niczky12/medium/blob/master/julia/finish_sounds.jl" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> GitHub </strong> </a>中取出我的<code class="fe lv lw lx ly b">@beep</code>宏，让甜美的马里奥声音引导你从YouTube或Medium回到Julia控制台😉！</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><div class="kj kk kl km gt mn"><a rel="noopener  ugc nofollow" target="_blank" href="/progressbars-tqdm-and-likes-in-julia-f5102cdd1841"><div class="mo ab fo"><div class="mp ab mq cl cj mr"><h2 class="bd iu gy z fp ms fr fs mt fu fw is bi translated">Julia中的进度条(tqdm和likes)</h2><div class="mu l"><h3 class="bd b gy z fp ms fr fs mt fu fw dk translated">注意你的for循环</h3></div><div class="mv l"><p class="bd b dl z fp ms fr fs mt fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mw l"><div class="ph l my mz na mw nb ks mn"/></div></div></a></div><div class="pi pj gp gr pk mn"><a href="https://towardsdatascience.com/memoize-and-cache-in-julia-48aa98f6549" rel="noopener follow" target="_blank"><div class="mo ab fo"><div class="mp ab mq cl cj mr"><h2 class="bd iu gy z fp ms fr fs mt fu fw is bi translated">Julia中的内存和缓存</h2><div class="mu l"><h3 class="bd b gy z fp ms fr fs mt fu fw dk translated">使用动态编程让你的函数更快</h3></div><div class="mv l"><p class="bd b dl z fp ms fr fs mt fu fw dk translated">towardsdatascience.com</p></div></div><div class="mw l"><div class="pl l my mz na mw nb ks mn"/></div></div></a></div><blockquote class="lz ma mb"><p id="b073" class="kz la mc lb b lc ld ju le lf lg jx lh md lj lk ll me ln lo lp mf lr ls lt lu im bi translated">我写朱莉娅和其他很酷的东西。如果你喜欢这样的文章，请考虑关注我。要获得所有媒体文章的完整信息——包括我的——可以考虑在这里订阅<a class="ae ky" href="https://niczky12.medium.com/membership" rel="noopener"><em class="it"/></a><em class="it">。</em></p></blockquote></div></div>    
</body>
</html>