<html>
<head>
<title>Implement Search Feature on a Web Page in Plain JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用普通JavaScript在网页上实现搜索功能</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/implement-search-feature-on-a-web-page-in-plain-javascript-adad27e48?source=collection_archive---------2-----------------------#2020-02-25">https://levelup.gitconnected.com/implement-search-feature-on-a-web-page-in-plain-javascript-adad27e48?source=collection_archive---------2-----------------------#2020-02-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d0fff2892ab83e1f7be33b3ad35f3125.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RGJrLD5qCkdRXyxr"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@olloweb?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">新闻社跟随</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="600a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文描述了如何在JSON对象数组中搜索给定的关键字，并在web页面上显示结果。</p><p id="e0ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将搜索书单。每个book对象包含一个标题、副标题、作者、类别和出版商。我们希望能够搜索一组搜索词的所有字段，并在网页上显示结果。</p><p id="7f4e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将从在网页上显示图书列表开始。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="19a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lh li lj lk b">The render()</code>函数将JSON对象数组作为其参数。然后它映射数组来创建一个HTML图书列表，并在<code class="fe lh li lj lk b">&lt;div id="app"&gt;&lt;/div&gt;</code>中显示该列表</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ll"><img src="../Images/d465bc0db66fd69af54932b61f88478c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Go43X8Uwy87spED9HNFSZg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">图书清单</figcaption></figure><h2 id="fb57" class="lm ln iq bd lo lp lq dn lr ls lt dp lu ko lv lw lx ks ly lz ma kw mb mc md me bi translated">搜索字段</h2><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="91ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将在网页上创建一个搜索字段</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/8e8ffe89e38e2c148cdc83c05d5993fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*EbG-LS1nOyDXkEESo7w7Ng.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">搜索字段</figcaption></figure><h2 id="8496" class="lm ln iq bd lo lp lq dn lr ls lt dp lu ko lv lw lx ks ly lz ma kw mb mc md me bi translated">事件监听器</h2><p id="38e8" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">在<code class="fe lh li lj lk b">&lt;script&gt;</code>块中添加一个事件监听器来监听“提交”事件</p><pre class="lb lc ld le gt ml lk mm mn aw mo bi"><span id="3d5a" class="lm ln iq lk b gy mp mq l mr ms">&lt;script&gt;<br/>...<br/>var handleSearch = function(event) {<br/>// to be implemented<br/>}</span><span id="3c42" class="lm ln iq lk b gy mt mq l mr ms">document.addEventListener('submit',handleSearch);<br/>&lt;/script&gt;</span></pre><h2 id="90a6" class="lm ln iq bd lo lp lq dn lr ls lt dp lu ko lv lw lx ks ly lz ma kw mb mc md me bi translated">实施搜索</h2><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="131c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们详细看看代码</p><p id="0c85" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lh li lj lk b">event.preventDefault()</code>提交后停止页面重新加载。</p><pre class="lb lc ld le gt ml lk mm mn aw mo bi"><span id="4744" class="lm ln iq lk b gy mp mq l mr ms">// Get the search terms from the input field<br/>var searchTerm = event.target.elements['search'].value;</span></pre><p id="7c35" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lh li lj lk b">searchTerm</code>保存用户在搜索框中输入的搜索字符串。</p><pre class="lb lc ld le gt ml lk mm mn aw mo bi"><span id="e464" class="lm ln iq lk b gy mp mq l mr ms">// Tokenize the search terms and remove empty spaces<br/>var tokens = searchTerm<br/>             .toLowerCase()<br/>             .split(' ')<br/>             .filter(function(<em class="mu">token</em>){<br/>                return token.trim() !== '';<br/>             });</span></pre><p id="94ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将搜索字符串分割成单独的标记，并删除任何空白。</p><pre class="lb lc ld le gt ml lk mm mn aw mo bi"><span id="f6eb" class="lm ln iq lk b gy mp mq l mr ms">//Example<br/>searchTerm = "Cracking the Coding Interview"<br/>tokens = ["cracking","the","coding","interview"]</span></pre><p id="10cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lh li lj lk b">var searchTermRegex = <strong class="kf ir">new</strong> <em class="mu">RegExp</em>(tokens.join(‘|’), ‘gim’)</code>创建包含所有标记的正则表达式</p><pre class="lb lc ld le gt ml lk mm mn aw mo bi"><span id="4dc3" class="lm ln iq lk b gy mp mq l mr ms">//Example<br/>searchTermRegex =<!-- --> <!-- -->/cracking|the|coding|interview/gim</span></pre><p id="e2cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下代码创建了一个包含<code class="fe lh li lj lk b">book</code>对象中所有值的字符串，并将其赋给<code class="fe lh li lj lk b">bookString</code>变量。</p><pre class="lb lc ld le gt ml lk mm mn aw mo bi"><span id="8244" class="lm ln iq lk b gy mp mq l mr ms">// Create a string of all object values<br/>var bookString = '';<br/>for(var key in book) {<br/>  if(book.hasOwnProperty(key) &amp;&amp; book[key] !== '') {<br/>    bookString += book[key].toString().toLowerCase().trim() + ' ';<br/>  }<br/>}</span><span id="6463" class="lm ln iq lk b gy mt mq l mr ms">//Example<br/>book = {<br/>  "title": "Cracking the coding interview",<br/>  "subtitle":"189 programming questions and solutions",<br/>  "author":"Gayle Laakmann McDowell",<br/>  "category":"Programming",<br/>  "publisher":"CareerCup, LLC"<br/>}</span><span id="e699" class="lm ln iq lk b gy mt mq l mr ms">bookString = "cracking the coding interview 189 programming questions and solutions gayle laakmann mcdowell programming careercup, llc"</span></pre><p id="ffc7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们通过返回匹配<code class="fe lh li lj lk b">searchTermRegex</code>的对象来过滤<code class="fe lh li lj lk b">books</code>。</p><pre class="lb lc ld le gt ml lk mm mn aw mo bi"><span id="763a" class="lm ln iq lk b gy mp mq l mr ms">var filteredList = books.filter(function(<em class="mu">book</em>){</span><span id="51da" class="lm ln iq lk b gy mt mq l mr ms">  // ... Code to convert book object to a string ...</span><span id="8892" class="lm ln iq lk b gy mt mq l mr ms">  // Return book objects where a match is found<br/>  return bookString.match(searchTermRegex);<br/>});</span><span id="40f4" class="lm ln iq lk b gy mt mq l mr ms">// Render the search results<br/>render(filteredList);</span></pre><p id="9fd6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果任何搜索项出现在<code class="fe lh li lj lk b">bookString</code>中，那么我们将那个<code class="fe lh li lj lk b">book</code>对象存储在<code class="fe lh li lj lk b">filteredList</code>中。我们通过调用<code class="fe lh li lj lk b">render()</code>函数并将<code class="fe lh li lj lk b">filteredList</code>传递给它来呈现搜索结果。</p><h2 id="07c9" class="lm ln iq bd lo lp lq dn lr ls lt dp lu ko lv lw lx ks ly lz ma kw mb mc md me bi translated">重置列表</h2><p id="907f" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">我们用<code class="fe lh li lj lk b">type="reset"</code>创建了一个重置按钮。点击此按钮时，会触发“重置”事件。我们监听“reset”事件，并通过调用<code class="fe lh li lj lk b">render()</code>函数并将原始的<code class="fe lh li lj lk b">books</code>数组传递给它来呈现原始列表。</p><pre class="lb lc ld le gt ml lk mm mn aw mo bi"><span id="96dc" class="lm ln iq lk b gy mp mq l mr ms">document.addEventListener('reset', function(<em class="mu">event</em>){<br/>  event.preventDefault();<br/>  render(books);<br/>});</span></pre><h2 id="621b" class="lm ln iq bd lo lp lq dn lr ls lt dp lu ko lv lw lx ks ly lz ma kw mb mc md me bi translated">摘要</h2><p id="88bd" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">以下是实施搜索功能的总体步骤总结:</p><ol class=""><li id="5f5c" class="mv mw iq kf b kg kh kk kl ko mx ks my kw mz la na nb nc nd bi translated">将搜索字符串标记化</li><li id="4020" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">创建令牌的正则表达式</li><li id="ad70" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">将书本对象字符串化</li><li id="a006" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">在字符串化的book对象中查找搜索标记，并创建一个匹配的book对象列表。</li><li id="10e2" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">呈现搜索结果</li></ol><p id="c51a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://gist.github.com/amitgupta15/2240838e112ba073c24877583043fa34" rel="noopener ugc nofollow" target="_blank">链接到代码</a></p></div></div>    
</body>
</html>