<html>
<head>
<title>Converting Categorical Data to Numerical Data for Machine Learning — a Workaround</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为机器学习将分类数据转换为数值数据—一种变通方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/converting-categorical-data-to-numerical-data-for-machine-learning-a-workaround-327afacbbe84?source=collection_archive---------9-----------------------#2020-03-16">https://levelup.gitconnected.com/converting-categorical-data-to-numerical-data-for-machine-learning-a-workaround-327afacbbe84?source=collection_archive---------9-----------------------#2020-03-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f0f70a910871bfd7e5fb99e331e802da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6z0ZUWgBcx81v084"/></div></div></figure><p id="1b72" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当我在浏览Quora时，我遇到了以下问题— <em class="kz">我如何才能将分类数据转换为机器学习的连续数据？</em></p><p id="d2f6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">一些数据科学家很快指出这是不可能的。我是说，我想他们在某种程度上是对的。并不是把第一个元素叫做1，第二个叫做2，以此类推那么简单。但让我困扰的是，没有对可能的变通办法的解释。我们有一个完整的特征价值数据——我们如何理解它？我们应该抛弃它吗？我们如何使用这个预测器来进一步增强我们的算法？我遇到过几次这种问题，但训练模型和更好的方法肯定存在，总比什么都不做好。</p><p id="ae45" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，让我们探究一下为什么一开始就要问这个问题。许多机器学习算法，如随机森林和神经网络，不采用分类预测器(或者，软件包在输入它们之前会自动尝试转换它们)。结果，我们最终没有充分利用这个预测器，因为我们无法从数学上理解如何使用它。</p><p id="ca17" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，让我们举例说明为什么我们不能简单地将分类预测值编码为虚拟数值。</p><p id="7673" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">假设我们有两个向量，名字和高度。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="fb4b" class="lj lk it lf b gy ll lm l ln lo">name = ["Kevin Durant", "Kyrie Irving", "James Harden", "Russell Westbrook"] # Categorical</span><span id="758c" class="lj lk it lf b gy lp lm l ln lo">height = [82, 74, 77, 75] # Numerical</span></pre><p id="d99d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于高度矢量，这是一个数字，我可以<strong class="kd iu">客观地</strong>从数学上理解它。我可以从高到低排序:82 &gt; 77 &gt; 75 &gt; 74。我可以平均一下:77。诸如此类。</p><p id="71b8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然而，对我来说没有意义的是<strong class="kd iu">客观地</strong>说:凯文·杜兰特&gt;詹姆斯·哈登&gt;拉塞尔·威斯布鲁克&gt;凯里·欧文。显然你可以主观地说这个<strong class="kd iu">，</strong>但数学上不行。我能把那些球员相加吗？取他们的平均值？不，为了推动这一点，让我们假设我们有第三个向量，也是绝对的</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="3b70" class="lj lk it lf b gy ll lm l ln lo">favorite_color = ["Green", "Blue", "Red", "Purple"]</span></pre><p id="d782" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">虽然你可能强烈认为紫色是国王，但你不能用数学来表达它。你不能对这些颜色求和，也不能对它们进行排序。</p><p id="d30b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我看到的一个常见错误是人们盲目地将分类向量编码成虚拟数值。换句话说，他们说绿色= 0，蓝色= 1等等。现在，这有时可能对二进制分类器有效，但是当向量长度增加时，如果使用不当，这实际上会损害您的模型。让我们探索一下为什么会发生这种情况。</p><p id="ee60" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当我们将变量编码成相应的数字时，我们的模型开始假设它们也像数字一样。74和82之间的差值大于72和77之间的差值。如果我们像对待数字一样对待类别，我们让绿色= 0，蓝色= 1，红色= 2，紫色= 3，它会假设绿色(0)和紫色(3)之间的距离大于蓝色(1)和红色(2)之间的差异，这显然没有多大意义。它还会假设红色和紫色之间的平均值是2.5。还是没用。</p><p id="8ebe" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">大多数时候，我看到人们抛弃这些特性，因为他们认为它们不能被使用。或者更糟，尝试一些时髦的系统将它们转换成连续变量，输入到他们的模型中。</p><p id="caa2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">诀窍是使用无关的数据对其进行特征设计，使其成为更有用的东西。</p><p id="75f3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们回到NBA的例子。为了说明，我将使用来自Kaggle 的<a class="ae lq" href="https://www.kaggle.com/dansbecker/nba-shot-logs" rel="noopener ugc nofollow" target="_blank"> NBA投篮日志数据集。它拥有2014-2015 NBA赛季期间拍摄的每一次投篮，以及许多相应的属性，如运球计数、投篮时钟上的时间等。</a></p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lr"><img src="../Images/66c6affc13ad7168cbae779d3e258421.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qVssraHHpc71-MYs"/></div></div></figure><p id="a5b0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">既有定量变量，也有定性变量。假设我想运行一个机器学习算法，该算法获取所有变量并对击球结果进行分类。“球员姓名”(射手)和“最近的后卫”变量都是分类变量。有281个独特的因素，因此用虚拟变量对它们进行编码是不合逻辑的。这是不是意味着我们需要把它们扔掉？不。射门的人和最近的防守队员都是重要的信息，我们想利用他们。你可以这样做:</p><p id="d00e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">每个玩家都有附随的数据。我们知道詹姆斯·哈登在那个赛季投了多少球(可能很多)。我们知道有多少人进去了，有多少人没进去。所有这些其他信息都是定量的——那么为什么不针对每个玩家制定一个相应的定量变量呢？</p><p id="3a60" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你可以写一个函数来计算每个球员的投篮命中率。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="c600" class="lj lk it lf b gy ll lm l ln lo">shot_percentage = number_shots_made / (number_shots_made + number_shots_missed)</span></pre><p id="7082" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这将给我们一个量化的变量，对每个投篮者来说都是独一无二的。</p><p id="fa9e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你可以对最近的防守者做同样的事情——计算一个“防守百分比”,即#失误数除以#得分+失误数。再次，数量，但独特的代表分类变量。</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/39aa6233cba55ad2775edad37f94be7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/0*4aVm0oY7Afa3ffBn"/></div></figure><p id="d1b1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们对每个分类变量都有了一个定量变量。shot_percentage列是詹姆斯·哈登的定量对应列。换句话说，我们现在可以用数学方法来指詹姆斯·哈登。这个数字，具体对应于他，可以被排序，你可以找到这些数字的平均值，你可以用它做所有不同类型的定量分析——所有这些都是参照你之前的定性变量。</p><p id="9a0b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">目标是使用旧数据的特性来设计新数据。</p><p id="e15b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如有任何问题，请随时联系我们！</p><p id="f18a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">crb4595@gmail.com</p><p id="17a9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">社交媒体:【https://linktr.ee/chrisbuetti T4】</p></div></div>    
</body>
</html>