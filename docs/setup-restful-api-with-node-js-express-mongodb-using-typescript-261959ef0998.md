# ä½¿ç”¨ TypeScript ä½¿ç”¨ Node.jsã€Expressã€MongoDB è®¾ç½® RESTful API

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/setup-restful-api-with-node-js-express-mongodb-using-typescript-261959ef0998>

![](img/375add0fa33c1c03f0e375e244c8701d.png)

ç¬¬ 1 éƒ¨åˆ†:[è®¾ç½® REST API](https://medium.com/@jpbinith/setup-restful-api-with-node-js-express-mongodb-using-typescript-261959ef0998)

ç¬¬äºŒéƒ¨åˆ†:[REST API ä¸­çš„é¡¹ç›®ç»“æ„å’Œå»ºè®¾è·¯çº¿](https://medium.com/@jpbinith/project-structure-and-building-routes-of-restful-api-with-node-js-f3a8b53d94e7)

ç¬¬ 3 éƒ¨åˆ†:[è¿æ¥åˆ° MongoDB å’Œ CRUD æ“ä½œ](https://medium.com/@jpbinith/connect-express-rest-api-with-mongodb-and-crud-operations-using-typescript-58d9afcc06d)

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å¸®åŠ©æ‚¨ä½¿ç”¨ä¸Šè¿°æŠ€æœ¯å»ºç«‹æ‚¨çš„ç¬¬ä¸€ä¸ª REST APIï¼Œå¹¶åœ¨æ‚¨çš„æœºå™¨ä¸Šè¿è¡Œå®ƒã€‚å¸Œæœ›ä½ ä¼šå–œæ¬¢å®ƒã€‚ğŸ˜ƒ

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å¯¹å°†è¦ä½¿ç”¨çš„æŠ€æœ¯å’Œå·¥å…·æœ‰ä¸€äº›äº†è§£ã€‚

## ä»€ä¹ˆæ˜¯ APIï¼Œå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

API(åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£)æœ‰ç‚¹åƒä¿¡ä½¿ã€‚å®ƒå……å½“ä¸¤ä¸ªæˆ–æ›´å¤šéœ€è¦ç›¸äº’å¯¹è¯çš„åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸­ä»‹ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒå°†ä½ çš„è¯·æ±‚ä¼ é€’ç»™æä¾›è€…(ä½ å‘ä»–ä»¬è¯·æ±‚ä»€ä¹ˆ),å¹¶åœ¨é‚£é‡Œå¯¹ä½ åšå‡ºå“åº”(ä½ è¯·æ±‚çš„ä¸œè¥¿)ã€‚å› æ­¤ï¼Œè¿™æ˜¯ä¸€ç§å…è®¸ä¸¤ä¸ªåº”ç”¨ç¨‹åºä½¿ç”¨ä¸€ç»„**è§„åˆ™è¿›è¡Œäº¤äº’çš„æœºåˆ¶ã€‚**

æƒ³è±¡ä½ åœ¨ä¸€å®¶é¤é¦†é‡Œäº«ç”¨ä¸€äº›é£Ÿç‰©ã€‚ä½ çš„æ¡Œå­ä¸Šæœ‰ä¸€ä»½èœå•ï¼Œä¸Šé¢æœ‰å¾ˆå¤šé€‰æ‹©ï¼Œåœ¨å¨æˆ¿é‡Œï¼Œæœ‰ä¸€ä½å¨å¸ˆå‡†å¤‡å¥½ä¸ºä½ åšé¥­ã€‚ä½†æ˜¯å¨å¸ˆä¸èƒ½æ¥å¸®ä½ ç‚¹èœï¼Œå› ä¸ºä»–/å¥¹æ­£åœ¨å¨æˆ¿å¿™ç€åšé¥­ã€‚æ‰€ä»¥æœåŠ¡å‘˜ä¼šä»ä½ é‚£é‡Œæ¥è®¢å•ï¼Œé€åˆ°å¨æˆ¿ï¼Œå‘Šè¯‰å¨å¸ˆä½ ç‚¹çš„æ˜¯ä»€ä¹ˆ(è¦æ±‚)ã€‚å½“é£Ÿç‰©(å›åº”)å‡†å¤‡å¥½äº†ï¼ŒæœåŠ¡å‘˜ä¼šæŠŠå®ƒé€åˆ°ä½ é¢å‰ã€‚åœ¨è¿™é‡Œï¼ŒæœåŠ¡å‘˜å……å½“ APIã€‚è¿™ä¸ªä¾‹å­å°†è®©ä½ å¯¹ä»€ä¹ˆæ˜¯ API ä»¥åŠå®ƒå¦‚ä½•å·¥ä½œæœ‰ä¸€ä¸ªåŸºæœ¬çš„æ¦‚å¿µã€‚

## **åŸæ–™è¯çš„ç§ç±»ï¼Ÿ**

*   è‚¥çš‚
*   XML-RPC
*   JSON-RPC
*   ä¼‘æ¯

## ä»€ä¹ˆæ˜¯ Rest APIï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ

REST(**RE**presentational**S**state**T**transfer)API æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºæ¥å£ï¼Œå®ƒä½¿ç”¨ HTTP è¯·æ±‚æ¥è·å–ã€ä¸Šä¼ ã€å‘å¸ƒå’Œåˆ é™¤æ•°æ®ã€‚å®ƒä¸åƒå…¶ä»– web æœåŠ¡é‚£æ ·æ˜¯ä¸€ä¸ªåè®®ï¼Œç›¸åï¼Œå®ƒæ˜¯ä¸€ç»„æ¶æ„åŸåˆ™ã€‚REST å»ºè®®ä¸ºå®¢æˆ·æœºè¯·æ±‚çš„æ•°æ®åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å°†å¯¹è±¡çš„çŠ¶æ€å‘é€ç»™ç”¨æˆ·ã€‚REST APIs æ¯”å…¶ä»–ç±»å‹çš„ API æ›´å¿«ã€æ›´çµæ´»ï¼Œå¼€å‘äººå‘˜å–œæ¬¢ RESTï¼Œå› ä¸ºå­¦ä¹ æ›²çº¿ä¸å¤ªé™¡ã€‚

## èŠ‚ç‚¹. js

Node.js æ˜¯ä¸€ä¸ªå¼€æºçš„è·¨å¹³å°è¿è¡Œæ—¶ç¯å¢ƒï¼Œç”¨äºå¼€å‘æœåŠ¡å™¨ç«¯å’Œç½‘ç»œåº”ç”¨ç¨‹åºã€‚Node.js åº”ç”¨ç¨‹åºæ˜¯ç”¨ JavaScript ç¼–å†™çš„ï¼Œå¯ä»¥åœ¨ OS Xã€Microsoft Windows å’Œ Linux ä¸Šçš„ Node.js è¿è¡Œæ—¶ä¸­è¿è¡Œã€‚

## è¡¨è¾¾

Express æ˜¯ Node.js çš„ä¸€ä¸ªå¿«é€Ÿã€è‡ªä¿¡ã€åŸºæœ¬å’Œé€‚åº¦çš„ web æ¡†æ¶ã€‚æ‚¨å¯ä»¥å‡è®¾ express æ˜¯æ„å»ºåœ¨ Node.js ä¹‹ä¸Šçš„ä¸€ä¸ªå±‚ï¼Œå¸®åŠ©ç®¡ç†æœåŠ¡å™¨å’Œè·¯ç”±ã€‚å®ƒæä¾›äº†ä¸€ç»„å¥å£®çš„ç‰¹æ€§æ¥å¼€å‘ web å’Œç§»åŠ¨åº”ç”¨ç¨‹åºã€‚

## MongoDB

MongoDB æ˜¯ä¸€ä¸ªé¢å‘æ–‡æ¡£çš„ NoSQL æ•°æ®åº“ï¼Œç”¨äºå¤§å®¹é‡æ•°æ®å­˜å‚¨ã€‚MongoDB ä½¿ç”¨å¸¦æœ‰æ¨¡å¼çš„ç±»ä¼¼ JSON çš„æ–‡æ¡£ã€‚

## ä»¥æ‰“å­—æ‰“çš„æ–‡ä»¶

TypeScript æ˜¯ä¸€ç§ç”±å¾®è½¯å¼€å‘å’Œç»´æŠ¤çš„å¼€æºç¼–ç¨‹è¯­è¨€ã€‚å®ƒæ˜¯ JavaScript è¯­è¨€çš„è¶…é›†ï¼Œä¸ºè¯¥è¯­è¨€æ·»åŠ äº†å¯é€‰çš„é™æ€ç±»å‹ã€‚TypeScript çš„ç›®æ ‡æ˜¯å¸®åŠ©é€šè¿‡ç±»å‹ç³»ç»Ÿå°½æ—©å‘ç°é”™è¯¯ï¼Œå¹¶ä½¿ JavaScript å¼€å‘æ›´åŠ é«˜æ•ˆã€‚

## åˆ»è–„ï¼Ÿ

åœ¨ MEAN stack ä¸­ï¼ŒM ä»£è¡¨ MongoDBï¼ŒE ä»£è¡¨ Expressï¼ŒA ä»£è¡¨ AngularJSï¼Œæœ€ç»ˆ N ä»£è¡¨ Node.js. Angular æ˜¯ä¸€ä¸ªå‰ç«¯å¼€å‘æ¡†æ¶ï¼Œå› ä¸ºæˆ‘ä»¬ä¸“æ³¨äºåç«¯ï¼Œæ‰€ä»¥æˆ‘ä¸æ‰“ç®—åœ¨è¿™é‡Œè°ˆè®ºå®ƒã€‚MEAN stack æ¯”å…¶ä»–ç«äº‰å¯¹æ‰‹éƒ½å‡ºåï¼Œå› ä¸ºå®ƒè¦†ç›–äº†ä½¿ç”¨ javascript ä»å‰ç«¯åˆ°åç«¯å¼€å‘çš„æ•´ä¸ª web å¼€å‘å‘¨æœŸï¼Œæœ‰åŠ©äºä¿æŒ web åº”ç”¨ç¨‹åºå¼€å‘çš„æœ‰åºæ€§ï¼ŒæŠµåˆ¶ä¸å¿…è¦çš„ç¹é‡å·¥ä½œï¼Œå¹¶ä¸”å› ä¸ºå®ƒä»¬æ˜¯å¼€æºçš„ï¼Œæ‰€ä»¥å…·æœ‰è‰¯å¥½çš„ç¤¾åŒºæ”¯æŒã€‚

åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿æ‚¨çš„æœºå™¨ä¸Šå·²ç»å®‰è£…äº† [NodeJSã€](https://nodejs.org/en/)[MongoDB](https://docs.mongodb.com/manual/administration/install-community/)[ã€‚å¦‚æœæ‚¨åœ¨æœ¬åœ°å®‰è£…äº† MongoDBï¼Œæ‚¨åº”è¯¥ä¸º GUI ç•Œé¢å®‰è£…](https://nodejs.org/en/) [Mongo Compass](https://docs.mongodb.com/compass/master/install/) æˆ– [Robo 3T](https://robomongo.org/) ã€‚æˆ‘å»ºè®®ä½ ä½¿ç”¨ [VS ä»£ç ](https://code.visualstudio.com/)è¿›è¡Œå¼€å‘ã€‚

å¦‚æœæ‚¨åœ¨å¼€å§‹æˆ‘ä»¬çš„é¡¹ç›®ä¹‹å‰å…¨å±€å®‰è£… TypeScript ä¼šæ›´å¥½ã€‚ç„¶ååœ¨ç»ˆç«¯ä¸­é”®å…¥ä¸‹é¢ä¸€è¡Œï¼Œå¹¶æŒ‰ Enter é”®ã€‚

```
npm install -g typescript ts-node
```

ä¸ºäº†æµ‹è¯• HTTP è¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [Postman](https://www.getpostman.com/apps) å‘é€ç¤ºä¾‹è¯·æ±‚å¹¶æŸ¥çœ‹å“åº”ã€‚

ç°åœ¨æˆ‘ä»¬å¯ä»¥æ·±å…¥åˆ°ç¼–ç éƒ¨åˆ†äº†ğŸ’ªè®©æˆ‘ä»¬å…ˆè®¾ç½®æˆ‘ä»¬çš„é¡¹ç›®

> **ç¬¬ä¸€æ­¥:å¯åŠ¨ä¸€ä¸ªèŠ‚ç‚¹é¡¹ç›®**

æ‰“å¼€è¦åœ¨å…¶ä¸­åˆ›å»ºé¡¹ç›®çš„æ–‡ä»¶å¤¹ã€‚ç„¶åå•å‡»åœ°å€æ ä¸­çš„æ–‡ä»¶æµè§ˆç±»å‹ cmd å¹¶è¾“å…¥ã€‚ç„¶ååœ¨ä½ çš„ç»ˆç«¯ä¸Šè¾“å…¥â€œä»£ç â€å®ƒä¼šæŠŠä½ å¼•å‘ vs ä»£ç ã€‚åœ¨ vs ä»£ç ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ç‚¹å‡»ç»ˆç«¯æ ‡ç­¾å¹¶é€‰æ‹©æ–°ç»ˆç«¯æˆ–è€…æŒ‰ ctrl + shift +` 'æ¥æ‰“å¼€ç»ˆç«¯ã€‚æ‚¨å¯ä»¥ç°åœ¨å›ç­”é—®é¢˜ï¼Œä¹Ÿå¯ä»¥åœ¨ä¹‹åçš„ä»»ä½•æ—¶é—´è¿›è¡Œç¼–è¾‘ã€‚å®Œæˆåˆå§‹åŒ–åï¼Œä½ å¯ä»¥çœ‹åˆ°' **package.json** 'å·²ç»åˆ›å»ºå¥½äº†ã€‚

```
mkdir my-first-project
cd .\my-first-project\
npm init
```

> **ç¬¬äºŒæ­¥:å®‰è£…æ‰€æœ‰çš„ä¾èµ–é¡¹**

å®Œæˆåï¼Œæ‚¨å¯ä»¥çœ‹åˆ°' **package-lock.json** 'æ–‡ä»¶å·²åˆ›å»ºï¼Œä¸”' **node_modules** 'å·²å¯¼å…¥ã€‚

```
npm install --save @types/express express body-parser mongoose   nodemon
```

> **ç¬¬ä¸‰æ­¥:é…ç½® TypeScript é…ç½®æ–‡ä»¶**

æˆ‘ä»¬ä½¿ç”¨ typescript è¿›è¡Œå¼€å‘ï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨ Node.js ä¸Šè¿è¡Œå®ƒï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†å…¶è½¬æ¢ä¸º javascriptã€‚æ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä»¬æŠŠæˆ‘ä»¬æ‰€æœ‰çš„ typescript æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªåä¸º ***lib*** çš„æ–‡ä»¶å¤¹é‡Œé¢ï¼Œè€Œ java script æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªåä¸º ***dist*** çš„æ–‡ä»¶å¤¹é‡Œé¢ã€‚è®©æˆ‘ä»¬åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­è®¨è®ºè¿™ç§æ–‡ä»¶æ ¼å¼ã€‚ç°åœ¨åœ¨ä½ çš„é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸º' **tsconfig.json** 'ï¼Œå¤åˆ¶å¹¶ç²˜è´´å¦‚ä¸‹å†…å®¹ã€‚

æ¯å½“æˆ‘ä»¬è¿è¡Œ typescript ç¼–è¯‘å™¨' **tsc** 'æ—¶ï¼Œ' **lib** æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰ typescript æ–‡ä»¶éƒ½ä¼šè½¬æ¢æˆ javascript å¹¶ä¿å­˜åœ¨' **dist** æ–‡ä»¶å¤¹ä¸­

```
tsc
```

> **ç¬¬å››æ­¥:è®¾ç½®è„šæœ¬è¿è¡Œ API**

åœ¨' **package.json** 'æ–‡ä»¶ä¸­æ›´æ–°ä¸»æ–‡ä»¶å¦‚ä¸‹ã€‚

```
"main": "./dist/server.js"
```

åœ¨è„šæœ¬ä¸‹çš„' **package.json** 'æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹è„šæœ¬ã€‚

å› æ­¤ï¼Œå¯¹äºå¼€å‘ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨æ‚¨çš„ç»ˆç«¯ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥è¿è¡Œæµ‹è¯•æœåŠ¡å™¨

```
npm run test / npm run dev
```

ä¸ºäº†ç”Ÿäº§

```
npm run prod
```

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ typescript ç¼–è¯‘å™¨(tsc)å°† typescript ç¼–è¯‘æˆ javascriptï¼Œå¹¶è½¬åˆ° server.ts æ–‡ä»¶æ‰€åœ¨çš„æ–¹å‘ï¼Œä½¿ç”¨ nodemon è¿è¡Œå®ƒã€‚

è¦ç»ˆæ­¢è¯¥è¿‡ç¨‹ï¼Œè¯·æŒ‰

```
ctrl + c
```

> **æ­¥éª¤ 5:åœ¨åº”ç”¨ç¨‹åºä¸Šé…ç½®åŸºæœ¬é…ç½®**

ç°åœ¨è®©æˆ‘ä»¬åœ¨' **lib** 'æ–‡ä»¶å¤¹ä¸­åˆ›å»ºå¦ä¸€ä¸ªåä¸º' **config** çš„æ–‡ä»¶å¤¹ã€‚åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ›´å¤šåœ°è®¨è®ºæ–‡ä»¶æ ¼å¼ã€‚åœ¨è¿™ä¸ªâ€œ **config** æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºâ€œ **app.ts** çš„æ–‡ä»¶ï¼Œå¤åˆ¶å¹¶ç²˜è´´ä»¥ä¸‹å†…å®¹ã€‚åœ¨å¤„ç†ç¨‹åºä¹‹å‰è§£æä¸­é—´ä»¶ä¸­çš„ä¼ å…¥è¯·æ±‚ä½“ï¼Œåœ¨`req.body`å±æ€§ä¸‹å¯ç”¨ã€‚ç›®å‰ï¼Œæˆ‘ä»¬ä¸æ‰“ç®—åœ¨è¿™æ–¹é¢æ•´åˆ mongoã€‚

ç„¶ååˆ›å»º server.ts æ–‡ä»¶

ä»ç°åœ¨å¼€å§‹ï¼Œæ‚¨å¯ä»¥é€šè¿‡è¿è¡Œ' **npm run dev** 'æ¥æµ‹è¯•é¡¹ç›®ï¼Œä¸‹é¢çš„å†…å®¹å°†ä¼šæ‰“å°åœ¨æ‚¨çš„ç»ˆç«¯ä¸Šã€‚

> å¿«é€ŸæœåŠ¡å™¨ä¾¦å¬ç«¯å£ 3000

å®Œæ•´ä»£ç è¯·è®¿é—®æˆ‘çš„ [Github åº“](https://github.com/jpbinith/test-project)ã€‚å¦‚æœä½ æ„Ÿå…´è¶£ï¼Œä½ å¯ä»¥ä»ä¸‹é¢çš„æ–‡ç« ä¸­å­¦ä¹ å…³äº Node Express REST APIs çš„ç§»åŠ¨ã€‚

1.  [è®¾ç½® REST API](https://medium.com/@jpbinith/setup-restful-api-with-node-js-express-mongodb-using-typescript-261959ef0998)
2.  [REST API](https://medium.com/@jpbinith/project-structure-and-building-routes-of-restful-api-with-node-js-f3a8b53d94e7)é¡¹ç›®ç»“æ„å’Œå»ºè®¾è·¯çº¿
3.  [è¿æ¥åˆ° MongoDB å’Œ CRUD æ“ä½œ](https://medium.com/@jpbinith/connect-express-rest-api-with-mongodb-and-crud-operations-using-typescript-58d9afcc06d)