<html>
<head>
<title>Create Web Apps That Talk! 🔊</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建会说话的Web应用程序！🔊</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-web-apps-that-talk-1aedbf48a6e5?source=collection_archive---------15-----------------------#2020-06-12">https://levelup.gitconnected.com/create-web-apps-that-talk-1aedbf48a6e5?source=collection_archive---------15-----------------------#2020-06-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bf72" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">网络语音合成API简介。</h2></div><p id="f96e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">网络提供了巨大的机会。我们很难想象没有互联网的生活。它提供了一种无需离开舒适的沙发就能与世界联系的方式。随着我们在旅途中收听有声读物，音频形式的互联网每天都在增长。它还允许有视觉障碍的个人享受书籍和文章。</p><p id="d70e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们都是开发者，所以理解如何让你的应用程序/网站更容易被所有用户访问是很有意义的。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/d0f015459be15ad988a16016847b0d4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GgWGwF-4mTNfLUILVxp-Lg.jpeg"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">照片由<a class="ae lr" href="https://unsplash.com/@solomac" rel="noopener ugc nofollow" target="_blank">亚当·所罗门</a>在Unsplash上拍摄</figcaption></figure><div class="ls lt gp gr lu lv"><a href="https://skilled.dev" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">编写面试问题</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">一个完整的平台，在这里我会教你找到下一份工作所需的一切，以及…</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">技术开发</p></div></div><div class="me l"><div class="mf l mg mh mi me mj ll lv"/></div></div></a></div><p id="5154" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Web Speech API使您能够将语音数据添加到Web应用程序中。Web语音API有两个部分:</p><ol class=""><li id="78de" class="mk ml iq kh b ki kj kl km ko mm ks mn kw mo la mp mq mr ms bi translated">语音合成(文本到语音)</li><li id="2eba" class="mk ml iq kh b ki mt kl mu ko mv ks mw kw mx la mp mq mr ms bi translated">语音识别(异步语音识别。)</li></ol><p id="776d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们看看SpeechSynthesis API。</p><p id="efcd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe my mz na nb b">SpeechSynthesisUtterence</code>界面允许您向浏览器提出语音请求。这个界面最棒的部分是它可以让你控制声音、语言、音量，甚至是声音的速率和音调！</p><p id="5170" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe my mz na nb b">SpeechSynthesisUtterance</code>的属性是:</p><ol class=""><li id="2a67" class="mk ml iq kh b ki kj kl km ko mm ks mn kw mo la mp mq mr ms bi translated"><code class="fe my mz na nb b">SpeechSynthesisUtterance.lang</code>:获取并设置演讲的语言。</li><li id="315c" class="mk ml iq kh b ki mt kl mu ko mv ks mw kw mx la mp mq mr ms bi translated"><code class="fe my mz na nb b">SpeechSynthesisUtterance.pitch</code>:获取并设置演讲的音调。</li><li id="b8e5" class="mk ml iq kh b ki mt kl mu ko mv ks mw kw mx la mp mq mr ms bi translated"><code class="fe my mz na nb b">SpeechSynthesisUtterance.text</code>:要合成的文本。</li><li id="e05a" class="mk ml iq kh b ki mt kl mu ko mv ks mw kw mx la mp mq mr ms bi translated"><code class="fe my mz na nb b">SpeechSynthesisUtterance.rate</code>:获取并设置讲话的速度。</li><li id="74e6" class="mk ml iq kh b ki mt kl mu ko mv ks mw kw mx la mp mq mr ms bi translated"><code class="fe my mz na nb b">SpeechSynthesisUtterance.voice</code>:获取并设置将要使用的声音。</li><li id="dbcd" class="mk ml iq kh b ki mt kl mu ko mv ks mw kw mx la mp mq mr ms bi translated"><code class="fe my mz na nb b">SpeechSynthesisUtterance.volume</code>:获取并设置演讲的音量。</li></ol><p id="77c3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们来看一下文本到语音转换API的基本演示。</p><p id="66f0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码片段中，我们使用了<code class="fe my mz na nb b">SpeechSynthesisUtterance</code>接口来指示浏览器说出消息(“Hello，World！”)还给我们。</p><p id="5df9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，如果直接在HTML文件的一个<code class="fe my mz na nb b">&lt;script&gt;</code>标签中运行上面的代码，就听不到任何声音了！现在，在你开始怀疑你的扬声器是否正常工作，或者这段代码是否合法之前，打开你的浏览器开发工具，根据浏览器的不同，你可能会在控制台上看到警告，也可能看不到。</p><p id="83d2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我一直推荐你使用谷歌浏览器，因为它有最好的开发工具。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nc"><img src="../Images/c0e91cd90ee8f485b535cf9465320619.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z9K5CSeZ2FR7fyitZSAbGQ.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">如果您直接在一个<script>标签中运行上面的代码片段，您将会看到上面的反对警告。&lt;/root&gt;</script></figcaption></figure><p id="6ecc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是谷歌Chrome新<a class="ae lr" href="https://www.chromestatus.com/feature/5687444770914304" rel="noopener ugc nofollow" target="_blank">政策</a>的一部分，允许从标签页播放声音。这很好，因为有些网站臭名昭著，在没有用户互动/允许的情况下播放广告或声音，让你陷入尴尬的境地。</p><p id="a9c4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简而言之，在文档的生命周期中，您的用户至少需要与您的页面交互一次，直到您可以播放页面中的声音。</p><p id="639b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您只需提供某种UI元素，确保您的用户在调用该方法之前已经与页面进行了交互。让我们在代码中添加一个。</p><p id="2da5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在你可以在输入框中输入内容了，浏览器会把你的信息读给你听。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nd"><img src="../Images/f3a8db28ffacf394388110df0c398464.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0xphXNyn47kjB0snkBi18g.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">这是我们最终的用户界面应该是什么样子。</figcaption></figure><h2 id="c93d" class="ne nf iq bd ng nh ni dn nj nk nl dp nm ko nn no np ks nq nr ns kw nt nu nv nw bi translated">使用不同的声音</h2><p id="4180" class="pw-post-body-paragraph kf kg iq kh b ki nx jr kk kl ny ju kn ko nz kq kr ks oa ku kv kw ob ky kz la ij bi translated">如果您想使用不同的可用声部，您可能需要试验声部参数。</p><p id="1788" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以通过在您的<code class="fe my mz na nb b">click</code>监听器中运行<code class="fe my mz na nb b">for-loop</code>来获得所有可用声音的列表。</p><pre class="lc ld le lf gt oc nb od oe aw of bi"><span id="8600" class="ne nf iq nb b gy og oh l oi oj"><em class="ok">for </em>(<em class="ok">let </em>voice <em class="ok">of </em>window.speechSynthesis.getVoices()) {<br/>    console.log('voice', voice.name);<br/>}</span></pre><p id="5f22" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另外，请注意，这些声音是异步加载的，因此您可能会在第一次点击时听到默认的声音。之后，您应该可以听到选定的声音。</p><p id="99e2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们在例子中使用<code class="fe my mz na nb b">Google UK English Male</code>的声音。在第25行的click listener中添加以下代码。</p><p id="47a5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">试着改变<code class="fe my mz na nb b">msg.volume</code>、<code class="fe my mz na nb b">msg.rate</code>、&amp;、<code class="fe my mz na nb b"> msg.pitch</code>的值来获得不同版本的声音！</p><h2 id="7853" class="ne nf iq bd ng nh ni dn nj nk nl dp nm ko nn no np ks nq nr ns kw nt nu nv nw bi translated">浏览器支持</h2><p id="c99c" class="pw-post-body-paragraph kf kg iq kh b ki nx jr kk kl ny ju kn ko nz kq kr ks oa ku kv kw ob ky kz la ij bi translated">Chrome 33+ &amp; Firefox 49+ &amp; Safari 7+完全支持Web Speech API，但您可能希望明确检查Web Speech API的每个功能是否都受支持:</p><pre class="lc ld le lf gt oc nb od oe aw of bi"><span id="b266" class="ne nf iq nb b gy og oh l oi oj"><em class="ok">if </em>('speechSynthesis' <em class="ok">in </em>window) {<br/>    console.log('Speech Synthesis available!');<br/>}</span></pre></div><div class="ab cl ol om hu on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="ij ik il im in"><p id="d437" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">厉害！现在你可以给你的网站增加额外的可访问性。当开发人员和产品设计人员考虑到他们的所有用户，并付出一点额外的努力让所有人都能使用时，这总是好的！</p><p id="2fef" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">享受创建会说话的网络应用程序的乐趣！🔉 ❤️</p></div></div>    
</body>
</html>